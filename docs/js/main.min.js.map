{"version":3,"sources":["src/js/main.js","../../src/js/common/modal/modal.service.js","../../src/js/common/utils/utils.js","../../src/js/environment.js","../../src/js/environment.static.js","../../src/js/environment.served.js","../../src/js/common/http/http.service.js","../../src/js/common/label/label.pipe.js","../../src/js/common/location/location.service.js","../../src/js/common/language/language.service.js","../../src/js/common/api/api.service.js","../../src/js/common/storage/local-storage.service.js","../../src/js/shared/header/header.service.js","../../src/js/shared/cart-mini/cart-mini.service.js","../../src/js/pages/cart/cart.service.js","../../src/js/common/storage/session-storage.service.js","../../src/js/shared/user/user.service.js","../../src/js/app.component.js","../../src/js/common/click-outside/click-outside.directive.js","../../src/js/common/date/date.pipe.js","../../src/js/common/download/download.directive.js","../../src/js/common/locomotive-scroll/locomotive-scroll.service.js","../../src/js/common/dropdown/dropdown.directive.js","../../src/js/common/dropdown/dropdown-item.directive.js","../../src/js/common/env/env.pipe.js","../../src/js/common/filter/filter-item.component.js","../../src/js/common/flag/flag.pipe.js","../../src/js/common/highlight/highlight.pipe.js","../../src/js/common/html/html.pipe.js","../../src/js/common/id/id.directive.js","../../src/js/common/label-for/label-for.directive.js","../../src/js/common/locomotive-scroll/locomotive-scroll-sticky.directive.js","../../src/js/common/locomotive-scroll/locomotive-scroll-to.directive.js","../../src/js/common/locomotive-scroll/locomotive-scroll.directive.js","../../src/js/common/locomotive-scroll/scroll.directive.js","../../src/js/common/modal/modal-outlet.component.js","../../src/js/common/name/name.directive.js","../../src/js/common/number/number.pipe.js","../../src/js/common/relative-date/relative-date.pipe.js","../../src/js/common/share/share.directive.js","../../src/js/common/slug/slug.pipe.js","../../src/js/common/svg/svg-icon.structure.js","../../src/js/common/swiper/swiper.directive.js","../../src/js/common/thron/thron.service.js","../../src/js/common/thron/thron.component.js","../../src/js/common/title/title.directive.js","../../src/js/common/common.module.js","../../src/js/controls/control.component.js","../../src/js/controls/control-checkbox.component.js","../../src/js/common/keyboard/keyboard.service.js","../../src/js/controls/control-custom-select.component.js","../../src/js/controls/control-email.component.js","../../src/js/controls/control-file.component.js","../../src/js/controls/control-password.component.js","../../src/js/controls/control-privacy.component.js","../../src/js/controls/control-search.component.js","../../src/js/controls/control-text.component.js","../../src/js/controls/control-textarea.component.js","../../src/js/controls/errors.component.js","../../src/js/controls/test.component.js","../../src/js/controls/controls.module.js","../../src/js/common/filter/filter-item.js","../../src/js/common/filter/filter.service.js","../../src/js/shared/filters/filters.component.js","../../src/js/pages/ambience/ambience.service.js","../../src/js/pages/ambience/ambience.component.js","../../src/js/pages/ateliers-and-stores/ateliers-and-stores.service.js","../../src/js/pages/ateliers-and-stores/ateliers-and-stores.component.js","../../src/js/pages/careers/careers-modal.component.js","../../src/js/common/gtm/gtm.service.js","../../src/js/controls/form.service.js","../../src/js/controls/required-if.validator.js","../../src/js/pages/careers/careers.service.js","../../src/js/pages/careers/careers.component.js","../../src/js/common/once/once.service.js","../../src/js/common/facebook/facebook.service.js","../../src/js/common/google/google.service.js","../../src/js/common/googlemaps/googlemaps.service.js","../../src/js/common/linkedin/linkedin.service.js","../../src/js/pages/cart/cart.component.js","../../src/js/pages/contacts/contacts.service.js","../../src/js/pages/contacts/contacts.component.js","../../src/js/pages/dealers/dealers.service.js","../../src/js/pages/dealers/dealers.component.js","../../src/js/pages/designers/designers.service.js","../../src/js/pages/designers/designers.component.js","../../src/js/pages/generic/generic-modal.component.js","../../src/js/pages/markets-and-languages/markets-and-languages.service.js","../../src/js/pages/markets-and-languages/markets-and-languages-modal.component.js","../../src/js/pages/materials/materials-modal.component.js","../../src/js/pages/materials/materials.service.js","../../src/js/pages/materials/materials.component.js","../../src/js/pages/news/news.service.js","../../src/js/pages/news/news.component.js","../../src/js/pages/newsletter/newsletter.service.js","../../src/js/pages/newsletter/newsletter.component.js","../../src/js/pages/orders/orders-modal.component.js","../../src/js/pages/orders/orders.service.js","../../src/js/pages/orders/orders-detail.component.js","../../src/js/pages/orders/orders.component.js","../../src/js/pages/products-configure/products-configure.component.js","../../src/js/pages/products-detail/products-detail.service.js","../../src/js/pages/products-detail/products-detail.component.js","../../src/js/pages/products/products.service.js","../../src/js/pages/products/products.component.js","../../src/js/pages/projects-registration/projects-registration-modal.component.js","../../src/js/pages/projects-registration/projects-registration.service.js","../../src/js/pages/projects-registration/projects-registration.component.js","../../src/js/pages/projects/projects.service.js","../../src/js/pages/projects/projects.component.js","../../src/js/shared/files/files.service.js","../../src/js/pages/reserved-area/reserved-area.service.js","../../src/js/pages/reserved-area/reserved-area.component.js","../../src/js/pages/store-locator/store-locator.service.js","../../src/js/pages/store-locator/store-locator.component.js","../../node_modules/@googlemaps/markerclustererplus/src/overlay-view-safe.ts","../../node_modules/@googlemaps/markerclustererplus/src/cluster-icon.ts","../../node_modules/@googlemaps/markerclustererplus/src/cluster.ts","../../node_modules/@googlemaps/markerclustererplus/src/markerclusterer.ts","../../src/js/partials/map/map.style.js","../../src/js/partials/map/map.component.js","../../src/js/partials/swiper-gallery/swiper-gallery.directive.js","../../src/js/partials/swiper-homepage/swiper-homepage.directive.js","../../src/js/partials/swiper-news-proposition/swiper-news-proposition.directive.js","../../src/js/partials/swiper-products-proposition/swiper-products-proposition.directive.js","../../src/js/partials/swiper-projects-proposition/swiper-projects-proposition.directive.js","../../src/js/shared/cart-mini/cart-mini.component.js","../../src/js/shared/error/error.component.js","../../src/js/shared/files/files.component.js","../../src/js/shared/menu/menu.service.js","../../src/js/shared/header/header.component.js","../../src/js/shared/menu/menu.directive.js","../../src/js/shared/newsletter-proposition/newsletter-proposition.component.js","../../src/js/shared/search/search.service.js","../../src/js/shared/search/search.component.js","../../src/js/shared/submenu/submenu.directive.js","../../src/js/shared/tree/tree.component.js","../../src/js/shared/user/user-access-data.component.js","../../src/js/shared/user/user-delete.component.js","../../src/js/shared/user/user-detail.component.js","../../src/js/shared/user/user-edit.component.js","../../src/js/shared/user/user-forgot.component.js","../../src/js/shared/user/user.component.js","../../src/js/shared/user/user-modal.component.js","../../src/js/shared/user/user-signin.component.js","../../src/js/controls/match.validator.js","../../src/js/shared/user/user-signup.component.js","../../src/js/shared/shared.module.js","../../src/js/app.module.js","../../src/js/main.js"],"names":["g","f","exports","module","require","define","amd","globalThis","self","rxcomp","form","rxjs","operators","this","rxcompForm","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_defineProperty","obj","value","_inheritsLoose","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_assertThisInitialized","ReferenceError","ModalEvent","data","ModalResolveEvent","_ModalEvent","apply","arguments","ModalRejectEvent","_ModalEvent2","ModalService","open$","modal","_this","busy$","next","getTemplate$","src","pipe","map","template","node","getNode","tap","modal$","hasModal","switchMap","events$","_","load$","url","from","fetch","then","response","text","div","document","createElement","innerHTML","firstElementChild","reject","resolve","Subject","Utils","merge","source","keys","forEach","Array","isArray","NODE","BASE_HREF","get","URLSearchParams","window","location","search","querySelector","getAttribute","HEROKU","host","indexOf","STATIC","port","DEVELOPMENT","split","ENV","PRODUCTION","Environment","_proto","options","assign","getAbsoluteUrl","path","params","origin","replace","getPath","isLocal","href","set","console","log","githubDocs","defaultOptions","flags","production","heroku","slug","markets","defaultMarket","currentMarket","languages","defaultLanguage","currentLanguage","labels","select","browse","cancel","error_email","error_match","error_required","loading","remove","required","select_file","update","upload","drag_and_drop_images","environmentOptions","api","assets","configureProduct","cart","reservedArea","careersModal","genericModal","marketsAndLanguagesModal","materialsModal","ordersModal","projectsRegistrationModal","userModal","facebook","appId","fields","scope","tokenClient","version","google","clientId","linkedIn","clientSecret","googleMaps","apiKey","thron","workers","image","prefetch","environment","HttpService","http$","method","format","userPass","response_","headers","Accept","Content-Type","body","JSON","stringify","undefined","credentials","btoa","Headers","typedResponse","contentType","json","ok","Promise","error","warn","catchError","throwError","getError","get$","query","delete$","post$","put$","patch$","object","status","statusCode","statusMessage","statusText","LabelPipe","_Pipe","transform","labels_","getKeys","_len","_key","x","join","setLabels","LABELS","Pipe","meta","name","LocationService","has","keyOrValue","pushParams","history","pushState","title","toString","to","replaceState","pathname","state","deserialize","encoded","decode","serialize","encode","decoded","atob","parse","LanguageService","getDefaultLanguages","alternates","getDefaultLanguage","lang","setLanguage","language","selectedLanguage","setLanguage$","html","labelsMatch","exec","Function","call","bhereMatch","bhere","activeLanguage","toggleLanguages","showLanguages","pushChanges","_this2","find","ApiService","_HttpService","LocalStorageService","delete","isLocalStorageSupported","localStorage","removeItem","exist","e","cache","push","setItem","supported","HeaderService","setHeader","id","header$_","toggleHeader","currentHeader","onBack","header$","getValue","BehaviorSubject","CartMiniService","hasItem","item","items","currentItems","setItems","STORAGE_KEY","items$_","items$","localItems","of","incrementItem$","slice","item_","qty","decrementItem$","removeItem$","addItem$","count","price","index","splice","removeAll$","getPrice$","getPriceAndAddItem$","match","code","showefy","product_link","reduce","CartSteps","None","Items","Data","Delivery","Recap","Payment","Complete","Error","CartService","setStep","step","currentCart","setCart","cart$_","cart$","localCart","clear$","data$","estimatedDelivery$","getDeliveryType$","getStores$","payload","getDiscount$","SessionStorageService","isSessionStorageSupported","sessionStorage","UserViews","SIGN_IN","SIGN_UP","FORGOTTEN","EDIT","User","firstName","substr","toUpperCase","lastName","UserService","setUser","user","user$_","forgot$","me$","sessionUser","mapUser","signin$","signout$","_this3","signup$","_this4","edit$","_this5","accessData$","gdpr$","tryFacebook$","me","tryGoogle$","tryLinkedin$","sessionStorage$","mapUsers","users","AppComponent","_Component","onInit","getContext","classList","header","takeUntil","unsubscribe$","subscribe","onOpenMarketAndLanguage","event","onLogin","view","onLogout","first","onProjectRegistration","onAddToCart","onOpenMiniCart","Component","selector","ClickOutsideDirective","_Directive","initialFocus","_getContext","parentInstance","event$","fromEvent","filter","contains","shareReplay","expression","outputFunction","makeFunction","clickOutside$","Directive","DatePipe","Intl","DateTimeFormat","Date","DownloadDirective","onChanges","setAttribute","download","inputs","LocomotiveScrollService","scroll","scroll$","init","useKeyboard","smoothMobile","inertia","smooth","lerp","getDirection","getSpeed","initClass","scrollingClass","draggingClass","smoothClass","scrollbarContainer","scrollbarClass","multiplier","firefoxMultiplier","touchMultiplier","scrollFromAnywhere","gestureDirection","reloadOnContextChange","resetNativeScroll","el","useLocomotiveScroll","instance","LocomotiveScroll","add","innerWidth","isMacLike","test","navigator","platform","isIOS","isMacOs","toLowerCase","isSafari","vendor","userAgent","init$","delay","on","speed","style","pointerEvents","direction","y","previousY","scrollTop","addEventListener","stop","start","scrollTo","offset","currentTop","distance","getBoundingClientRect","top","pow","gsap","scroll-behavior","disableLerp","duration","Math","abs","ease","Quad","easeOut","overwrite","onUpdate","onComplete","scrollToSelector","ReplaySubject","DROPDOWN_ID","DropdownDirective","trigger","opened","onClick","bind","onDocumentClick","openDropdown","closeDropdown","addListeners","dropdown$","addDocumentListeners","dropped","removeDocumentListeners","removeListeners","removeEventListener","onDestroy","nextId","dropdown","id_","outputs","DropdownItemDirective","enter$","leave$","EnvPipe","keypath","env","k","shift","FilterItemComponent","closeFilter","active","change","toggleFilter","filters","clearFilter","preventDefault","stopImmediatePropagation","clear","onEnter","onLeave","FlagPipe","HighlightPipe","escapedQuery","escapeRegexChars","regExp","RegExp","b","safeToString","trim","encodeHTML","decodeHTML","HtmlPipe","m","n","String","fromCharCode","parseInt","unescapes","rx","IdDirective","LabelForDirective","labelFor","LocomotiveScrollStickyDirective","args","concat","targetNode","until","sticky$","rect","bottom","innerHeight","offsetHeight","sticked","height","min","sticked_","LocomotiveScrollToDirective","scrollTo$","_getContext2","LocomotiveScrollDirective","ResizeObserver","entries","observe","ScrollDirective","scrollSpeed","parseFloat","wh","wh2","currentY","getProperty","ModalOutletComponent","busy_","modalNode","busy","modal_","removeChild","appendChild","compile","NameDirective","NumberPipe","NumberFormat","DIVISIONS","amount","Number","POSITIVE_INFINITY","RelativeDatePipe","numeric","date","formatter","RelativeTimeFormat","division","round","ShareDirective","share","open","encodeURI","encodeURIComponent","c","charCodeAt","facebookUrl","pinterestUrl","linkedInUrl","twitterUrl","whatsappUrl","mailToUrl","shareTitle","shareUrl","SlugPipe","SvgIconStructure","_Structure","name_","parentNode","_element$classList","element","createElementNS","w","width","h","setAttributeNS","rxcompId","replaceChild","Structure","SwiperDirective","slidesPerView","spaceBetween","centeredSlides","autoplay","keyboardControl","mousewheelControl","pagination","clickable","keyboard","enabled","onlyInViewport","init_","swiperInitOrUpdate_","removeListeners_","swiperDestroy_","onBeforePrint","slideToIndex","swiper","slideTo","hasPrev","activeIndex","slides","hasNext","slidePrev","slideNext","opacity","slideChange","addListeners_","callback","swiperDirectiveInit","Power2","setTimeout","Swiper","_opening","destroy","matchMedia","matches","ThronService","thron$","THRONContentExperience","THRONPlayer","script","loaded$","head","ID","ThronComponent","THRON","media","splitted","controls","hasAttribute","loop","player","muted","displayLinked","noSkin","onReady","onCanPlay","onPlaying","onPlay","onPause","video","mediaContainer","ready","canPlay","off","qualities","qualityLevels","highestQuality","currentQuality","playing","play","pause","complete","playVideo","pauseVideo","toggle","playing_","TitleDirective","title_","removeAttribute","factories","pipes","CommonModule","_Module","Module","imports","declarations","ControlComponent","control","ControlCheckboxComponent","_ControlComponent","label","link$","anchors","querySelectorAll","anchor","stopPropagation","htmlDocument","DOMParser","parseFromString","abstract","description","KeyboardService","keydown$","keydown$_","keyup$","keyup$_","keys$","keys$_","type","startWith","key$","key$_","regexp","typing$","typing$_","typing","clearTimeout","ControlCustomSelectComponent","dropdownId","word","scrollToWord","children","offsetTop","setOption","isMultiple","TypeError","_readOnlyError","hasOption","getLabel","v","onDropped","$event","touched","multiple","ControlEmailComponent","ControlFileComponent","file","onReaderComplete","onInputDidChange","files","lastModified","lastModifiedDate","size","reader","FileReader","readAsDataURL","content","result","ControlPasswordComponent","ControlPrivacyComponent","input","onSelect","ControlSearchComponent","disabled","ControlTextComponent","ControlTextareaComponent","ErrorsComponent","TestComponent","onTest","onReset","reset","ControlsModule","FilterMode","FilterItem","change$","mode","placeholder","values","unshift","hasAny","FilterService","initialParams","getParamsCount","locationParams","any","changes","filterItems","updateFilterStates","skipFilter","filteredItems","option","FiltersComponent","combineLatest","setFiltersParams","doFilterItem","city","countries","pageSize","visibleItems","FormGroup","FormControl","changes$","setFilterByKeyAndValue","finalize","onLoad","filterService","patch","showMore","onSearch","model","onFilterDidChange","AmbienceService","all$","sort$","filters$","sort","a","AmbienceComponent","_FiltersComponent","ambienceId","ambience","category","materials","designers","AteliersAndStoresService","ateliers$","stores$","AteliersAndStoresComponent","types","Atelier","Store","filteredAteliers","filteredStores","country","CareersModalComponent","position","onClose","GtmService","dataLayer","push_","FormService","toOptions","toSelectOptions","RequiredIfValidator","fieldName","formGroup","shouldBe","FormValidator","field","requiredIf","CareersService","positions$","submit$","CareersComponent","success","positions","Validators","RequiredValidator","email","EmailValidator","telephone","region","domain","cv","presentationLetter","message","privacy","checkRequest","antiforgery","checkField","results","onSubmit","valid","submitted","form_name","onOpenPosition","close","OnceService","script$","callbackName","callback$","paths","callbacks$","uid","async","scripts","getElementsByTagName","lastScript","insertBefore","nextSibling","FacebookService","facebook$","protocol","facebook_","concatMap","cookie","xfbml","AppEvents","logPageView","status$","getLoginStatus","authResponse_","authResponse","login$","login","logout$","logout","l","accessToken","facebookToken","GoogleService","google$","Observable","gapi","once$","profile","currentUser","getBasicProfile","getId","getName","getGivenName","getFamilyName","picture","getImageUrl","getEmail","googleToken","access_token","auth2Instance$","isSignedIn","signOut","signed","getAuth2$","_this6","auth2","auth2init$","load","_this7","readAccessToken","getAuthResponse","signIn","_this8","client_id","cookiepolicy","fetch_basic_profile","ux_mode","_this9","getAuthInstance","GoogleMapsService","maps$","maps","geocode$","Geocoder","geocode","LinkedinService","getAccessToken$","grant_type","client_secret","redirect_uri","linkedin$","getTime","onSocialCallback","social","floor","CartComponent","detectSocialLogin","socialBusy","initWithData","steps","errorDelivery","errorDiscount","errorPayment","estimatedDelivery","guest","shipmentCountryOptions","countryOptions","deliveryData","billingData","delivery","discount","paymentMethod","shipmentCountry","address","zipCode","province","invoice","invoiceData","taxNumber","getDataGroup","sdi","pec","billing","company","conditions","RequiredTrueValidator","newsletter","commercial","promotion","deliveryType","discountCode","stores","store","sortCountry","info","icons","onPatch","touchForm","firstInvalidInput","onNext","skipUpdate","onAfterPatch","onItems","onUser","onIncrement","onDecrement","onRemove","onEdit","onModalSignIn","onModalSignUp","onGuest","onFacebookLogout","onSocialLogin","onFacebookLogin","onGoogleLogin","onLinkedinLogin","socialMe","mapMe","first_name","last_name","socialPicture","socialType","socialId","socialToken","socialTokenExpiresAt","data_access_expiration_time","expires_at","_this10","token","opener","urlSearchParams","fromEntries","onData","_this11","deliveryCountry","getCountryById","onGeocoder","latitude","longitude","billingCountry","geometry","lat","lng","countryId","testData","resetData","onDelivery","_this12","storeId","_this13","deliveryTypeOptions","fullPrice","onDiscountCode","_this14","onTimetableToggle","selectedStore","showTimetable","onPayment","total","_this15","ContactsService","ContactsComponent","flag","DealersService","regions","DealersComponent","DesignersService","DesignersComponent","GenericModalComponent","MarketsAndLanguagesService","currentCoId","MarketsAndLanguagesModalComponent","setMarket","market","MaterialsModalComponent","onPrev","MaterialsService","MaterialsComponent","categories","selectedItem","onToggle","onOpenItem","marginBottom","setCategory","NewsService","NewsComponent","NewsletterService","NewsletterComponent","occupation","engagement","newsletterLanguage","OrdersModalComponent","orderId","OrdersService","detail$","OrdersDetailComponent","order","OrdersComponent","orders","onOpenOrder","breadcumbStyle","ProductsConfigureComponent","sl","product","isReady","isComplete","isConfiguring","iframe","onEvent","sfy","SFYFrame","getIframeDocument","contentWindow","contentDocument","eventName","emit","onShowefyComplete","onStartConfigurator","onButtonPressed","onSetButtonStatus","onGetIframeSize","onGetProductExtData","onGetFastProductExtData","statusTxt","addButtons","getProductExtData","addTexts","HTML","printHTML","buttons","BUTTONS","PROPERTIES","visibility","LABEL","it","en","setButtonStatus","addBreadcrumb","breadcrumb","BREADCUMB","printBreadcumb","cartItem","priceListByMarket","ProductsDetailService","versions$","productId","ProductsDetailComponent","isAddedToCart","onReservedArea","ProductsService","ProductsComponent","categoryId","ProjectsRegistrationModalComponent","ProjectsRegistrationService","ProjectsRegistrationComponent","dealer","fullName","client","architect","destination","products","isModal","ProjectsService","ProjectsComponent","FilesService","hasFile","currentFiles","setFiles","files$_","files$","localFiles","addFile$","removeFile$","ReservedAreaService","toTitleCase","all_$","added","sentence","seps","wordPattern","str","ReservedAreaComponent","tree","visibleFiles","getTree","parentId","onOpen","onToggleFile","isAddedToFiles","StoreLocatorService","rank","StoreLocatorComponent","extendStatics","d","hasOwnProperty","__extends","__","__assign","t","s","OverlayViewSafe","type1","type2","property","extend","OverlayView","toCssText","styles","acc","coercePixels","pixels","ClusterIcon","_super","cluster_","styles_","center_","div_","sums_","visible_","setMap","getMap","onAdd","cMouseDownInCluster","cDraggingMapByCluster","mc","getMarkerClusterer","_a","major","minor","gmVersion","show","getPanes","overlayMouseTarget","boundsChangedListener_","addListener","addDomListener","getZoomOnClick","mz_1","getMaxZoom","theBounds_1","getBounds","fitBounds","getZoom","setZoom","cancelBubble","hide","removeListener","clearInstanceListeners","draw","pos","getPosFromLatLng_","left","display","className","className_","cssText","createCss_","getImageElementHtml","getLabelDivHtml","getTitle","ariaLabelFn","anchorText_","color","textColor","font-size","textSize","font-family","fontFamily","font-weight","fontWeight","font-style","fontStyle","text-decoration","textDecoration","text-align","line-height","textLineHeight","bp","backgroundPosition","spriteH","spriteV","dimensions","getEnableRetinaIcons","clip","overrideDimensionsDynamicIcon","useStyle","sums","max","anchorText","anchorIcon_","anchorIcon","getClusterClass","setCenter","center","z-index","getZIndex","cursor","-webkit-user-select","-khtml-user-select","-moz-user-select","-o-user-select","user-select","latlng","getProjection","fromLatLngToDivPixel","Cluster","markerClusterer_","map_","minClusterSize_","getMinimumClusterSize","averageCenter_","getAverageCenter","markers_","bounds_","clusterIcon_","getStyles","getSize","getMarkers","getCenter","bounds","LatLngBounds","markers","getPosition","addMarker","marker","isMarkerAlreadyAdded_","LatLng","calculateBounds_","isAdded","mCount","mz","isMarkerInClusterBounds","getExtendedBounds","updateIcon","numStyles","getCalculator","getOption","prop","def","MarkerClusterer","clusters_","listeners_","activeMap_","ready_","zIndex_","zIndex","Marker","MAX_ZINDEX","gridSize_","gridSize","minimumClusterSize","maxZoom_","maxZoom","zoomOnClick_","ignoreHidden_","enableRetinaIcons_","imagePath_","imagePath","IMAGE_PATH","imageExtension_","imageExtension","IMAGE_EXTENSION","imageSizes_","imageSizes","IMAGE_SIZES","calculator_","calculator","CALCULATOR","batchSize_","batchSize","BATCH_SIZE","batchSizeIE_","batchSizeIE","BATCH_SIZE_IE","clusterClass_","clusterClass","setupStyles_","addMarkers","repaint","prevZoom_","minZoom","mapTypes","getMapTypeId","zoom","resetViewport_","redraw_","withDefaultStyle","fitMapToMarkers","padding","getVisible","getIgnoreHidden","getGridSize","setGridSize","setMinimumClusterSize","setMaxZoom","setZIndex","setStyles","setTitle","setZoomOnClick","zoomOnClick","setAverageCenter","averageCenter","setIgnoreHidden","ignoreHidden","setEnableRetinaIcons","enableRetinaIcons","getImageExtension","setImageExtension","getImagePath","setImagePath","getImageSizes","setImageSizes","setCalculator","getBatchSizeIE","setBatchSizeIE","setClusterClass","getTotalMarkers","getClusters","getTotalClusters","nodraw","pushMarkerTo_","getDraggable","removeMarker","removed","removeMarker_","removeMarkers","r","clearMarkers","oldClusters","projection","tr","getNorthEast","bl","getSouthWest","trPix","blPix","ne","fromDivPixelToLatLng","sw","createClusters_","distanceBetweenPoints_","p1","p2","dLat","PI","dLon","sin","cos","atan2","sqrt","isMarkerInBounds_","addToClosestCluster_","clusterToAddTo","cluster","iFirst","mapBounds","timerRefStatic","iLast","dv","overrides","MAP_STYLE","featureType","elementType","stylers","saturation","lightness","MapComponent","mapOptions","scrollwheel","zoomControlOptions","ZoomControlStyle","DEFAULT","scaleControl","zoomControl","mapTypeControl","streetViewControl","rotateControl","fullscreenControl","mapElement","Map","getItalyBounds","calculateDistance","lat1","lon1","lat2","lon2","unit","radlat1","radlat2","theta","radtheta","dist","acos","markerCluster","phone","fax","markerImage","MarkerImage","Size","icon","setMarkerWindow","sizes","getGeolocation","busyLocation","geolocation","getCurrentPosition","coords","geocoder","filteredInfoCity","address_component","includes","formatted_address","address_components","searchCountry","short_name","setInfoWindow","searchPosition","finally","ZOOM_LEVEL","findNearStores","visible","cod_stato","userCountry","MAX_DISTANCE","importante","visibleStores","$timeout","panTo","markerWindow","InfoWindow","pixelOffset","setPosition","setContent","closeMarkerWindow","getWorldBounds","SwiperGalleryDirective","_SwiperDirective","loopAdditionalSlides","SwiperHomepageDirective","SwiperNewsPropositionDirective","breakpoints","768","1024","1440","1920","SwiperProductsPropositionDirective","SwiperProjectsPropositionDirective","CartMiniComponent","onBuy","onRemoveAll","ErrorComponent","showDetail","onDetailToggle","FilesComponent","showFiles","onToggleFiles","onDownloadAll","link","click","MenuService","setMenu","menu$_","toggleMenu","currentMenu","menu$","HeaderComponent","menu","pictogram","scrolled","direction_","scrolled_","MenuDirective","preview","previewSrc","container","menu_","onExit","NewsletterPropositionComponent","onNewsletter","action","SearchService","search$_","items_","search$","SearchComponent","auditTime","SubmenuDirective","onload","Power4","TreeComponent","hasItems","UserAccessDataComponent","password","newPassword","UserDeleteComponent","UserDetailComponent","occupations","newsletterLanguages","gdpr","datas","onModalUserUpdate","onModalGdpr","legalNote","countryName","occupationName","newsletterLanguageName","UserEditComponent","UserForgotComponent","forgot","onSignIn","viewSignIn","onSignUp","viewSignUp","UserComponent","views","setView","onViewSignIn","onViewSignUp","onViewForgot","navTo","onForgot","UserModalComponent","_UserComponent","UserSigninComponent","viewForgot","UserSignupComponent","passwordConfirm","signUp","SharedModule","AppModule","CoreModule","FormModule","bootstrap","Browser"],"mappings":"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","file":"docs\\js\\main.min.js","sourcesContent":[null,"import { from, Subject } from 'rxjs';\r\nimport { map, switchMap, tap } from 'rxjs/operators';\r\n\r\nexport class ModalEvent {\r\n\r\n\tconstructor(data) {\r\n\t\tthis.data = data;\r\n\t}\r\n\r\n}\r\n\r\n// export class ModalLoadEvent extends ModalEvent { }\r\n// export class ModalLoadedEvent extends ModalEvent { }\r\nexport class ModalResolveEvent extends ModalEvent { }\r\nexport class ModalRejectEvent extends ModalEvent { }\r\n\r\nexport class ModalService {\r\n\r\n\tstatic hasModal = false;\r\n\r\n\tstatic open$(modal) {\r\n\t\tthis.busy$.next(true);\r\n\t\treturn this.getTemplate$(modal.src).pipe(\r\n\t\t\t// startWith(new ModalLoadEvent(Object.assign({}, modal.data, { $src: modal.src }))),\r\n\t\t\tmap(template => {\r\n\t\t\t\treturn { node: this.getNode(template), data: modal.data, modal: modal };\r\n\t\t\t}),\r\n\t\t\ttap(node => {\r\n\t\t\t\tthis.modal$.next(node);\r\n\t\t\t\tthis.hasModal = true;\r\n\t\t\t\tthis.busy$.next(false);\r\n\t\t\t\t// this.events$.next(new ModalLoadedEvent(Object.assign({}, modal.data, { $src: modal.src })));\r\n\t\t\t}),\r\n\t\t\tswitchMap(node => this.events$),\r\n\t\t\ttap(_ => this.hasModal = false)\r\n\t\t)\r\n\t}\r\n\r\n\tstatic load$(modal) {\r\n\r\n\t}\r\n\r\n\tstatic getTemplate$(url) {\r\n\t\treturn from(fetch(url).then(response => {\r\n\t\t\treturn response.text();\r\n\t\t}));\r\n\t}\r\n\r\n\tstatic getNode(template) {\r\n\t\tconst div = document.createElement('div');\r\n\t\tdiv.innerHTML = template;\r\n\t\tconst node = div.firstElementChild;\r\n\t\treturn node;\r\n\t}\r\n\r\n\tstatic reject(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalRejectEvent(data));\r\n\t}\r\n\r\n\tstatic resolve(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalResolveEvent(data));\r\n\t}\r\n\r\n}\r\n\r\nModalService.modal$ = new Subject();\r\nModalService.events$ = new Subject();\r\nModalService.busy$ = new Subject();\r\n","\r\nexport class Utils {\r\n\r\n\tstatic merge(target, source) {\r\n\t\tif (typeof source === 'object') {\r\n\t\t\tObject.keys(source).forEach(key => {\r\n\t\t\t\tconst value = source[key];\r\n\t\t\t\tif (typeof value === 'object' && !Array.isArray(value)) {\r\n\t\t\t\t\ttarget[key] = this.merge(target[key], value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttarget[key] = value;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn target;\r\n\t}\r\n\r\n}\r\n","import { Utils } from './common/utils/utils';\r\nimport { environmentServed } from './environment.served';\r\nimport { environmentStatic } from './environment.static';\r\n\r\nexport const NODE = (typeof module !== 'undefined' && module.exports);\r\nexport const PARAMS = NODE ? { get: () => { } } : new URLSearchParams(window.location.search);\r\nexport const DEBUG = false || (PARAMS.get('debug') != null);\r\nexport const BASE_HREF = NODE ? null : document.querySelector('base').getAttribute('href');\r\nexport const HEROKU = NODE ? false : (window && window.location.host.indexOf('herokuapp') !== -1);\r\nexport const STATIC = NODE ? false : (HEROKU || (window && (window.location.port === '48481' || window.location.port === '5000' || window.location.port === '6443' || window.location.host === 'actarian.github.io')));\r\nexport const DEVELOPMENT = NODE ? false : (window && ['localhost', '127.0.0.1', '0.0.0.0'].indexOf(window.location.host.split(':')[0]) !== -1);\r\nexport const PRODUCTION = !DEVELOPMENT;\r\nexport const ENV = {\r\n\tSTATIC,\r\n\tDEVELOPMENT,\r\n\tPRODUCTION\r\n};\r\n\r\nexport class Environment {\r\n\r\n\tget STATIC() {\r\n\t\treturn ENV.STATIC;\r\n\t}\r\n\tset STATIC(STATIC) {\r\n\t\tENV.STATIC = (STATIC === true || STATIC === 'true');\r\n\t\tconsole.log('Environment.STATIC.set', ENV.STATIC);\r\n\t}\r\n\r\n\tget href() {\r\n\t\tif (HEROKU) {\r\n\t\t\treturn this.githubDocs;\r\n\t\t} else {\r\n\t\t\treturn BASE_HREF;\r\n\t\t}\r\n\t}\r\n\r\n\tgetAbsoluteUrl(path, params) {\r\n\t\tlet url = `${window.location.origin}${path}`;\r\n\t\t// let url = `${window.location.protocol}//${window.location.host}${path}`;\r\n\t\tObject.keys(params).forEach(key => {\r\n\t\t\turl = url.replace(`$${key}`, params[key]);\r\n\t\t});\r\n\t\treturn url;\r\n\t}\r\n\r\n\tgetPath(path) {\r\n\t\treturn this.isLocal(path) ? (this.href + path) : path;\r\n\t}\r\n\r\n\tisLocal(path) {\r\n\t\treturn path.indexOf('://') === -1;\r\n\t}\r\n\r\n\tconstructor(options) {\r\n\t\tif (options) {\r\n\t\t\tObject.assign(this, options);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst defaultOptions = {\r\n\tport: 5000,\r\n\tflags: {\r\n\t\tproduction: false,\r\n\t\theroku: HEROKU,\r\n\t},\r\n\tslug: {},\r\n\tmarkets: ['IT', 'EU', 'AM', 'AS', 'IN'],\r\n\tdefaultMarket: 'IT',\r\n\tcurrentMarket: 'IT',\r\n\tlanguages: ['it', 'en'],\r\n\tdefaultLanguage: 'it',\r\n\tcurrentLanguage: 'it',\r\n\tlabels: {\r\n\t\tselect: 'Seleziona',\r\n\t\tbrowse: 'Sfoglia',\r\n\t\tcancel: 'Annulla',\r\n\t\terror_email: 'Email non valida',\r\n\t\terror_match: 'I campi non corrispondono',\r\n\t\terror_required: 'Campo obbligatorio',\r\n\t\tloading: 'caricamento',\r\n\t\tremove: 'Rimuovi',\r\n\t\trequired: 'Richiesto',\r\n\t\tselect_file: 'Seleziona una file...',\r\n\t\tupdate: 'Aggiorna',\r\n\t\tupload: 'Carica',\r\n\t\tdrag_and_drop_images: 'Drag And Drop your images here',\r\n\t}\r\n};\r\n\r\nconst environmentOptions = window.STATIC ? environmentStatic : environmentServed;\r\n\r\nlet options = Object.assign(defaultOptions, environmentOptions);\r\noptions = Utils.merge(options, window.environment);\r\n\r\nexport const environment = new Environment(options);\r\n\r\n// console.log('environment', environment);\r\n","\r\nexport const environmentStatic = {\r\n\tflags: {\r\n\t\tproduction: false,\r\n\t},\r\n\tmarkets: ['IT', 'EU', 'AM', 'AS', 'IN'],\r\n\tdefaultMarket: 'IT',\r\n\tcurrentMarket: 'IT',\r\n\tlanguages: ['it', 'en', 'de', 'ch'],\r\n\tdefaultLanguage: 'it',\r\n\tcurrentLanguage: 'it',\r\n\tapi: '/giorgetti/api',\r\n\tassets: '/giorgetti/',\r\n\tslug: {\r\n\t\tconfigureProduct: `/giorgetti/products-configure.html`,\r\n\t\tcart: `/giorgetti/cart.html`,\r\n\t\treservedArea: `/giorgetti/reserved-area.html`,\r\n\t},\r\n\ttemplate: {\r\n\t\tmodal: {\r\n\t\t\tcareersModal: '/giorgetti/partials/modals/careers-modal.html',\r\n\t\t\tgenericModal: '/giorgetti/partials/modals/generic-modal.html',\r\n\t\t\tmarketsAndLanguagesModal: '/giorgetti/partials/modals/markets-and-languages-modal.html',\r\n\t\t\tmaterialsModal: '/giorgetti/partials/modals/materials-modal.html',\r\n\t\t\tordersModal: '/giorgetti/partials/modals/orders-modal.html',\r\n\t\t\tprojectsRegistrationModal: '/giorgetti/partials/modals/projects-registration-modal.html',\r\n\t\t\tuserModal: '/giorgetti/partials/modals/user-modal.html',\r\n\t\t}\r\n\t},\r\n\tfacebook: {\r\n\t\tappId: 610048027052371,\r\n\t\tfields: 'id,name,first_name,last_name,email,gender,picture,cover,link',\r\n\t\tscope: 'public_profile, email', // publish_stream\r\n\t\ttokenClient: '951b013fe59b05cf471d869aae9ba6ba',\r\n\t\tversion: 'v11.0',\r\n\t},\r\n\tgoogle: {\r\n\t\tclientId: '760742757246-61qknlmthbmr54bh7ch19kjr0sftm4q3.apps.googleusercontent.com',\r\n\t},\r\n\tlinkedIn: {\r\n\t\tclientId: '77cg5ls5lgu3k3',\r\n\t\tclientSecret: 'gfBIl365EdckxCgK',\r\n\t\tscope: 'r_emailaddress r_liteprofile',\r\n\t},\r\n\tgoogleMaps: {\r\n\t\tapiKey: 'AIzaSyDvGw6iAoKdRv8mmaC9GeT-LWLPQtA8p60',\r\n\t},\r\n\tthron: {\r\n\t\tclientId: '',\r\n\t},\r\n\tworkers: {\r\n\t\timage: './js/workers/image.service.worker.js',\r\n\t\tprefetch: './js/workers/prefetch.service.worker.js',\r\n\t},\r\n\tgithubDocs: 'https://raw.githubusercontent.com/actarian/giorgetti/main/docs/',\r\n};\r\n","\r\nexport const environmentServed = {\r\n\tflags: {\r\n\t\tproduction: true,\r\n\t},\r\n\tmarkets: ['IT', 'EU', 'AM', 'AS', 'IN'],\r\n\tdefaultMarket: 'IT',\r\n\tcurrentMarket: 'IT',\r\n\tlanguages: ['it', 'en', 'de', 'ch'],\r\n\tdefaultLanguage: 'it',\r\n\tcurrentLanguage: 'it',\r\n\tapi: '/api',\r\n\tassets: '/Client/docs/',\r\n\tslug: {\r\n\t\tconfigureProduct: `/it/it/products-configure`,\r\n\t\tcart: `/it/it/cart`,\r\n\t\treservedArea: `/it/it/reserved-area`,\r\n\t},\r\n\ttemplate: {\r\n\t\tmodal: {\r\n\t\t\tcareersModal: '/template/modals/careers-modal.cshtml',\r\n\t\t\tgenericModal: '/template/modals/generic-modal.cshtml',\r\n\t\t\tmarketsAndLanguagesModal: '/template/modals/markets-and-languages-modal.cshtml',\r\n\t\t\tmaterialsModal: '/template/modals/materials-modal.cshtml',\r\n\t\t\tordersModal: '/template/modals/orders-modal.cshtml',\r\n\t\t\tprojectsRegistrationModal: '/template/modals/projects-registration-modal.cshtml',\r\n\t\t\tuserModal: '/template/modals/user-modal.cshtml',\r\n\t\t}\r\n\t},\r\n\tfacebook: {\r\n\t\tappId: 610048027052371,\r\n\t\tfields: 'id,name,first_name,last_name,email,gender,picture,cover,link',\r\n\t\tscope: 'public_profile, email', // publish_stream\r\n\t\ttokenClient: '951b013fe59b05cf471d869aae9ba6ba',\r\n\t\tversion: 'v11.0',\r\n\t},\r\n\tgoogle: {\r\n\t\tclientId: '760742757246-61qknlmthbmr54bh7ch19kjr0sftm4q3.apps.googleusercontent.com',\r\n\t},\r\n\tlinkedIn: {\r\n\t\tclientId: '77cg5ls5lgu3k3',\r\n\t\tclientSecret: 'gfBIl365EdckxCgK',\r\n\t\tscope: 'r_emailaddress r_liteprofile',\r\n\t},\r\n\tgoogleMaps: {\r\n\t\tapiKey: 'AIzaSyByTXqwtyFUcD6d4PY7ab4GBwS5IYjEVcc',\r\n\t},\r\n\tthron: {\r\n\t\tclientId: '',\r\n\t},\r\n\tworkers: {\r\n\t\timage: '/Client/docs/js/workers/image.service.worker.js',\r\n\t\tprefetch: '/Client/docs/js/workers/prefetch.service.worker.js',\r\n\t},\r\n\tgithubDocs: 'https://raw.githubusercontent.com/actarian/giorgetti/main/docs/',\r\n};\r\n","import { from, throwError } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\n\r\nexport class HttpResponse {\r\n\r\n\tget static() {\r\n\t\treturn this.url.indexOf('.json') === this.url.length - 5;\r\n\t}\r\n\r\n\tconstructor(response) {\r\n\t\tthis.data = null;\r\n\t\tif (response) {\r\n\t\t\tthis.url = response.url;\r\n\t\t\tthis.status = response.status;\r\n\t\t\tthis.statusText = response.statusText;\r\n\t\t\tthis.ok = response.ok;\r\n\t\t\tthis.redirected = response.redirected;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class HttpService {\r\n\r\n\tstatic http$(method, url, data, format = 'json', userPass = null, options = {}) {\r\n\t\tconst methods = ['POST', 'PUT', 'PATCH'];\r\n\t\tlet response_ = null;\r\n\t\t// url = this.getUrl(url, format);\r\n\t\toptions = Object.assign({\r\n\t\t\tmethod: method,\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t}, options, {\r\n\t\t\tbody: methods.indexOf(method) !== -1 ? JSON.stringify(data) : undefined\r\n\t\t});\r\n\t\tif (userPass) {\r\n\t\t\t// options.mode = 'no-cors';\r\n\t\t\toptions.credentials = 'include';\r\n\t\t\tuserPass = window.btoa(userPass);\r\n\t\t\toptions.headers['Authorization'] = `Basic ${userPass}`;\r\n\t\t}\r\n\t\toptions.headers = new Headers(options.headers);\r\n\t\treturn from(fetch(url, options).then((response) => {\r\n\t\t\tresponse_ = response;\r\n\t\t\t// console.log(response);\r\n\t\t\ttry {\r\n\t\t\t\tconst contentType = response.headers.get('content-type');\r\n\t\t\t\tlet typedResponse;\r\n\t\t\t\tif (contentType && contentType.indexOf('application/json') !== -1) {\r\n\t\t\t\t\ttypedResponse = response.json();\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttypedResponse = response.text();\r\n\t\t\t\t}\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\treturn typedResponse;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn typedResponse.then(data => {\r\n\t\t\t\t\t\treturn Promise.reject(data);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\tconsole.warn('HttpService.http$', 'Cannot parse response');\r\n\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.reject(error);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})).pipe(\r\n\t\t\tcatchError(error => {\r\n\t\t\t\treturn throwError(this.getError(error, response_));\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\t/*\r\n\t// !!! todo mapping response.data\r\n\tstatic http$(method, url, data, format = 'json') {\r\n\t\tconst methods = ['POST', 'PUT', 'PATCH'];\r\n\t\tconst body = (data && methods.indexOf(method) !== -1) ? JSON.stringify(data) : undefined;\r\n\t\tconst queryString = (data && methods.indexOf(method) !== -1) ? Object.keys(data).map(function(key) {\r\n\t\t\treturn key + '=' + encodeURI(data[key]);\r\n\t\t}).join('&') : undefined;\r\n\t\tif (queryString) {\r\n\t\t\turl = `${url}?${queryString}`;\r\n\t\t}\r\n\t\tlet response_ = null;\r\n\t\treturn from(fetch(url, {\r\n\t\t\tmethod: method,\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: body,\r\n\t\t}).then((response) => {\r\n\t\t\tresponse_ = new HttpResponse(response);\r\n\t\t\ttry {\r\n\t\t\t\tconst contentType = response.headers.get('content-type');\r\n\t\t\t\tlet typedResponse;\r\n\t\t\t\tif (contentType && format === 'json' && contentType.indexOf('application/json') !== -1) {\r\n\t\t\t\t\ttypedResponse = response.json();\r\n\t\t\t\t} else if (format === 'blob') {\r\n\t\t\t\t\ttypedResponse = response.blob();\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttypedResponse = response.text();\r\n\t\t\t\t}\r\n\t\t\t\treturn typedResponse.then(data => {\r\n\t\t\t\t\tresponse_.data = data;\r\n\t\t\t\t\tif (response.ok) {\r\n\t\t\t\t\t\treturn Promise.resolve(response_);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn Promise.reject(response_);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} catch(error) {\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\tconsole.warn('HttpService.http$', 'Cannot parse response');\r\n\t\t\t\t\treturn Promise.resolve(response_);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.reject(this.getError(error, response_));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})).pipe(\r\n\t\t\tcatchError(error => {\r\n\t\t\t\treturn throwError(this.getError(error, response_));\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\t*/\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\tconst query = this.query(data);\r\n\t\treturn this.http$('GET', `${url}${query}`, undefined, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn this.http$('DELETE', url);\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn this.http$('POST', url, data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn this.http$('PUT', url, data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn this.http$('PATCH', url, data);\r\n\t}\r\n\r\n\tstatic query(data) {\r\n\t\treturn ''; // todo\r\n\t}\r\n\r\n\tstatic getError(object, response) {\r\n\t\tlet error = typeof object === 'object' ? object : {};\r\n\t\tif (!error.status) {\r\n\t\t\terror.status = response ? response.status : 0;\r\n\t\t}\r\n\t\tif (!error.statusCode) {\r\n\t\t\terror.statusCode = response ? response.status : 0;\r\n\t\t}\r\n\t\tif (!error.statusMessage) {\r\n\t\t\terror.statusMessage = response ? response.statusText : object;\r\n\t\t}\r\n\t\t// console.log('HttpService.getError', error, response);\r\n\t\treturn error;\r\n\t}\r\n\r\n}\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\nimport { Utils } from '../utils/utils';\r\n\r\nexport class LabelPipe extends Pipe {\r\n\r\n\tstatic transform(key) {\r\n\t\tconst labels = LabelPipe.labels_;\r\n\t\treturn labels[key] || key; // `#${key}#`;\r\n\t}\r\n\r\n\tstatic getKeys(...keys) {\r\n\t\treturn LabelPipe.transform(keys.map(x => x.replace('-', '_')).join('_'));\r\n\t}\r\n\r\n\tstatic setLabels() {\r\n\t\tconst LABELS = Utils.merge({\r\n\t\t\tselect: 'Seleziona',\r\n\t\t\tbrowse: 'Sfoglia',\r\n\t\t\tcancel: 'Annulla',\r\n\t\t\terror_email: 'Email non valida',\r\n\t\t\terror_match: 'I campi non corrispondono',\r\n\t\t\terror_required: 'Campo obbligatorio',\r\n\t\t\tloading: 'caricamento',\r\n\t\t\tremove: 'Rimuovi',\r\n\t\t\trequired: 'Richiesto',\r\n\t\t\tselect_file: 'Seleziona una file...',\r\n\t\t\tupdate: 'Aggiorna',\r\n\t\t\tupload: 'Carica',\r\n\t\t\tdrag_and_drop_images: 'Drag And Drop your images here',\r\n\t\t}, environment.labels);\r\n\t\tthis.labels_ = LABELS;\r\n\t}\r\n}\r\n\r\nLabelPipe.setLabels();\r\n\r\nLabelPipe.meta = {\r\n\tname: 'label',\r\n};\r\n","export class LocationService {\r\n\r\n\tstatic has(key) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\t// console.log('LocationService.has', params);\r\n\t\treturn params.has(key);\r\n\t}\r\n\r\n\tstatic get(key) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\t// console.log('LocationService.get', params);\r\n\t\treturn params.get(key);\r\n\t}\r\n\r\n\tstatic set(keyOrValue, value) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams.set(keyOrValue, value);\r\n\t\t} else {\r\n\t\t\tparams.set(keyOrValue, '');\r\n\t\t}\r\n\t\tthis.pushParams(params);\r\n\t\t// console.log('LocationService.set', params, keyOrValue, value);\r\n\t}\r\n\r\n\tstatic pushParams(params) {\r\n\t\tif (window.history && window.history.pushState) {\r\n\t\t\tconst title = document.title;\r\n\t\t\tconst url = `${window.location.href.split('?')[0]}?${params.toString()}`;\r\n\t\t\twindow.history.pushState(params.toString(), title, url);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic replace(from, to) {\r\n\t\tconst history = window.history;\r\n\t\tif (history && history.replaceState) {\r\n\t\t\tconst location = window.location;\r\n\t\t\tconst title = document.title;\r\n\t\t\tif (location.pathname === '/') {\r\n\t\t\t\tconst url = location.origin + to + location.search;\r\n\t\t\t\thistory.replaceState(history.state, title, url);\r\n\t\t\t} else if (location.href.indexOf(from) !== -1) {\r\n\t\t\t\tconst url = location.href.replace(from, to);\r\n\t\t\t\thistory.replaceState(history.state, title, url);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic deserialize(key) {\r\n\t\tconst encoded = this.get('params');\r\n\t\treturn this.decode(key, encoded);\r\n\t}\r\n\r\n\tstatic serialize(keyOrValue, value) {\r\n\t\tconst params = this.deserialize();\r\n\t\tconst encoded = this.encode(keyOrValue, value, params);\r\n\t\tthis.set('params', encoded);\r\n\t}\r\n\r\n\tstatic decode(key, encoded) {\r\n\t\tlet decoded = null;\r\n\t\tif (encoded) {\r\n\t\t\tconst json = window.atob(encoded);\r\n\t\t\tdecoded = JSON.parse(json);\r\n\t\t}\r\n\t\tif (key && decoded) {\r\n\t\t\tdecoded = decoded[key];\r\n\t\t}\r\n\t\treturn decoded || null;\r\n\t}\r\n\r\n\tstatic encode(keyOrValue, value, params) {\r\n\t\tparams = params || {};\r\n\t\tlet encoded = null;\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams[keyOrValue] = value;\r\n\t\t} else {\r\n\t\t\tparams = keyOrValue;\r\n\t\t}\r\n\t\tconst json = JSON.stringify(params);\r\n\t\tencoded = window.btoa(json);\r\n\t\treturn encoded;\r\n\t}\r\n\r\n}\r\n","import { from } from 'rxjs';\r\nimport { tap } from 'rxjs/operators';\r\nimport { environment } from '../../environment';\r\nimport { LabelPipe } from '../label/label.pipe';\r\nimport { LocationService } from '../location/location.service';\r\nimport { Utils } from '../utils/utils';\r\n\r\nexport class LanguageService {\r\n\r\n\tstatic languages = this.getDefaultLanguages();\r\n\tstatic defaultLanguage = this.getDefaultLanguage();\r\n\tstatic selectedLanguage = this.defaultLanguage;\r\n\r\n\tstatic get hasLanguages() {\r\n\t\treturn this.languages.length > 1;\r\n\t}\r\n\r\n\tstatic get activeLanguage() {\r\n\t\treturn this.languages.find(language => language.lang === this.selectedLanguage);\r\n\t}\r\n\r\n\tstatic getDefaultLanguages() {\r\n\t\treturn environment.alternates || [];\r\n\t}\r\n\r\n\tstatic getDefaultLanguage() {\r\n\t\treturn environment.defaultLanguage || (this.languages ? this.languages[0].lang : null);\r\n\t}\r\n\r\n\tstatic setLanguage(language) {\r\n\t\tthis.selectedLanguage = language.lang;\r\n\t}\r\n\r\n\tstatic setLanguage$(language) {\r\n\t\treturn from(fetch(language.href).then(response => {\r\n\t\t\treturn response.text();\r\n\t\t})).pipe(\r\n\t\t\ttap(html => {\r\n\t\t\t\t// console.log('html', html);\r\n\t\t\t\tconst labelsMatch = /(window\\.labels\\s*=\\s*\\n*\\s*\\{((\\{.+?\\})|.)+?\\})/gms.exec(html);\r\n\t\t\t\tif (labelsMatch) {\r\n\t\t\t\t\t// console.log('labels', labelsMatch[0]);\r\n\t\t\t\t\tnew Function(labelsMatch[0]).call(window);\r\n\t\t\t\t\tLabelPipe.setLabels();\r\n\t\t\t\t}\r\n\t\t\t\tconst bhereMatch = /(window\\.bhere\\s*=\\s*\\n*\\s*\\{((\\{.+?\\})|.)+?\\})/gms.exec(html);\r\n\t\t\t\tif (bhereMatch) {\r\n\t\t\t\t\t// console.log('bhere', bhereMatch[0]);\r\n\t\t\t\t\tconst data = {};\r\n\t\t\t\t\tnew Function(bhereMatch[0].replace('window', 'this')).call(data);\r\n\t\t\t\t\tif (data.bhere) {\r\n\t\t\t\t\t\tUtils.merge(environment, data.bhere);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tLocationService.replace(this.activeLanguage.href, language.href);\r\n\t\t\t\t// console.log(window.labels);\r\n\t\t\t\tthis.selectedLanguage = language.lang;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic toggleLanguages() {\r\n\t\tthis.showLanguages = !this.showLanguages;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n}\r\n","import { environment } from '../../environment';\r\nimport { HttpService } from '../http/http.service';\r\nimport { LanguageService } from '../language/language.service';\r\n\r\nexport class ApiService extends HttpService {\r\n\r\n\tstatic currentLanguage = LanguageService.activeLanguage;\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\treturn super.get$(`${environment.api}${url}`, data, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn super.delete$(`${environment.api}${url}`);\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn super.post$(`${environment.api}${url}`, data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn super.put$(`${environment.api}${url}`, data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn super.patch$(`${environment.api}${url}`, data);\r\n\t}\r\n}\r\n","export class LocalStorageService {\r\n\r\n\tstatic delete(name) {\r\n\t\tif (this.isLocalStorageSupported()) {\r\n\t\t\twindow.localStorage.removeItem(name);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic exist(name) {\r\n\t\tif (this.isLocalStorageSupported()) {\r\n\t\t\treturn window.localStorage[name] !== undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic get(name) {\r\n\t\tlet value = null;\r\n\t\tif (this.isLocalStorageSupported() && window.localStorage[name] !== undefined) {\r\n\t\t\ttry {\r\n\t\t\t\tvalue = JSON.parse(window.localStorage[name]);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('LocalStorageService.get.error parsing', name, e);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tstatic set(name, value) {\r\n\t\tif (this.isLocalStorageSupported()) {\r\n\t\t\ttry {\r\n\t\t\t\tconst cache = [];\r\n\t\t\t\tconst json = JSON.stringify(value, function(key, value) {\r\n\t\t\t\t\tif (typeof value === 'object' && value !== null) {\r\n\t\t\t\t\t\tif (cache.indexOf(value) !== -1) {\r\n\t\t\t\t\t\t\t// Circular reference found, discard key\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcache.push(value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t});\r\n\t\t\t\twindow.localStorage.setItem(name, json);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('LocalStorageService.set.error serializing', name, value, e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic isLocalStorageSupported() {\r\n\t\tif (this.supported) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tlet supported = false;\r\n\t\ttry {\r\n\t\t\tsupported = 'localStorage' in window && window.localStorage !== null;\r\n\t\t\tif (supported) {\r\n\t\t\t\twindow.localStorage.setItem('test', '1');\r\n\t\t\t\twindow.localStorage.removeItem('test');\r\n\t\t\t} else {\r\n\t\t\t\tsupported = false;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tsupported = false;\r\n\t\t}\r\n\t\tthis.supported = supported;\r\n\t\treturn supported;\r\n\t}\r\n}\r\n","import { BehaviorSubject } from 'rxjs';\r\n\r\nexport class HeaderService {\r\n\r\n\tstatic header$_ = new BehaviorSubject(-1);\r\n\r\n\tstatic get currentHeader() {\r\n\t\treturn this.header$_.getValue();\r\n\t}\r\n\r\n\tstatic setHeader(id) {\r\n\t\tthis.header$_.next(id);\r\n\t}\r\n\r\n\tstatic toggleHeader(id) {\r\n\t\tthis.header$_.next(this.currentHeader === id ? -1 : id);\r\n\t}\r\n\r\n\tstatic onBack() {\r\n\t\tthis.header$_.next(-1);\r\n\t}\r\n\r\n\tstatic header$() {\r\n\t\treturn this.header$_;\r\n\t}\r\n\r\n}\r\n","import { BehaviorSubject, of } from 'rxjs';\r\nimport { map, switchMap, tap } from 'rxjs/operators';\r\nimport { ApiService } from '../../common/api/api.service';\r\nimport { LocalStorageService } from '../../common/storage/local-storage.service';\r\nimport { environment } from '../../environment';\r\nimport { HeaderService } from '../header/header.service';\r\n\r\nexport class CartMiniService {\r\n\r\n\tstatic get STORAGE_KEY() {\r\n\t\treturn `cartItems_${environment.currentMarket}`;\r\n\t}\r\n\r\n\tstatic items$_ = new BehaviorSubject([]);\r\n\r\n\tstatic get currentItems() {\r\n\t\treturn CartMiniService.items$_.getValue();\r\n\t}\r\n\r\n\tstatic get count() {\r\n\t\treturn CartMiniService.currentItems.length;\r\n\t}\r\n\r\n\tstatic hasItem(item) {\r\n\t\tconst items = CartMiniService.currentItems;\r\n\t\tconst index = CartMiniService.indexOf(item, items);\r\n\t\treturn index !== -1;\r\n\t}\r\n\r\n\tstatic setItems(items) {\r\n\t\tif (items) {\r\n\t\t\tLocalStorageService.set(CartMiniService.STORAGE_KEY, items);\r\n\t\t} else {\r\n\t\t\tLocalStorageService.delete(CartMiniService.STORAGE_KEY);\r\n\t\t}\r\n\t\tCartMiniService.items$_.next(items);\r\n\t}\r\n\r\n\tstatic items$() {\r\n\t\tconst localItems = LocalStorageService.get(CartMiniService.STORAGE_KEY) || [];\r\n\t\treturn of(localItems).pipe(\r\n\t\t\tswitchMap(items => {\r\n\t\t\t\tCartMiniService.setItems(items);\r\n\t\t\t\treturn CartMiniService.items$_;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic incrementItem$(item) {\r\n\t\treturn of(item).pipe(\r\n\t\t\tmap(item => {\r\n\t\t\t\tconst items = CartMiniService.currentItems.slice();\r\n\t\t\t\tconst item_ = CartMiniService.find(item, items);\r\n\t\t\t\tif (item_) {\r\n\t\t\t\t\titem_.qty++;\r\n\t\t\t\t\tCartMiniService.setItems(items);\r\n\t\t\t\t\treturn item_;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic decrementItem$(item) {\r\n\t\treturn of(item).pipe(\r\n\t\t\tswitchMap(item => {\r\n\t\t\t\tconst items = CartMiniService.currentItems.slice();\r\n\t\t\t\tconst item_ = CartMiniService.find(item, items);\r\n\t\t\t\tif (item_) {\r\n\t\t\t\t\titem_.qty--;\r\n\t\t\t\t\tif (item_.qty > 0) {\r\n\t\t\t\t\t\tCartMiniService.setItems(items);\r\n\t\t\t\t\t\treturn of(item_);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn CartMiniService.removeItem$(item);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn of(null);\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic addItem$(item, qty = 1) {\r\n\t\tconst count = CartMiniService.count;\r\n\t\treturn of(Object.assign({}, item, { qty })).pipe(\r\n\t\t\tmap(item => {\r\n\t\t\t\tconst items = CartMiniService.currentItems.slice();\r\n\t\t\t\tconst item_ = CartMiniService.find(item, items);\r\n\t\t\t\tif (item_) {\r\n\t\t\t\t\titem_.qty += item.qty;\r\n\t\t\t\t\titem_.price = item.price;\r\n\t\t\t\t\tCartMiniService.setItems(items);\r\n\t\t\t\t\treturn item_;\r\n\t\t\t\t} else {\r\n\t\t\t\t\titems.push(item);\r\n\t\t\t\t\tCartMiniService.setItems(items);\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\ttap(_ => {\r\n\t\t\t\tif (count === 0) {\r\n\t\t\t\t\tHeaderService.setHeader('cart');\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic removeItem$(item) {\r\n\t\treturn of(item).pipe(\r\n\t\t\tmap(item => {\r\n\t\t\t\tconst items = CartMiniService.currentItems.slice();\r\n\t\t\t\tconst index = CartMiniService.indexOf(item, items);\r\n\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\titems.splice(index, 1);\r\n\t\t\t\t\tif (items.length === 0) {\r\n\t\t\t\t\t\tHeaderService.onBack();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tCartMiniService.setItems(items);\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic removeAll$() {\r\n\t\treturn of([]).pipe(\r\n\t\t\tmap(items => {\r\n\t\t\t\tHeaderService.onBack();\r\n\t\t\t\tCartMiniService.setItems(items);\r\n\t\t\t\treturn items;\r\n\t\t\t}),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic getPrice$(item) {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.post$('/cart-mini/price', item);\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/cart-mini/price.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getPriceAndAddItem$(item, qty = 1) {\r\n\t\treturn CartMiniService.getPrice$(item).pipe(\r\n\t\t\tswitchMap(item => CartMiniService.addItem$(item, qty)),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic match(item, item_) {\r\n\t\treturn item_.id === item.id && item_.code === item.code && ((!item_.showefy && !item.showefy) || (item_.showefy && item.showefy && item_.showefy.product_link === item.showefy.product_link));\r\n\t}\r\n\r\n\tstatic find(item, items) {\r\n\t\treturn items.find(item_ => CartMiniService.match(item, item_));\r\n\t}\r\n\r\n\tstatic indexOf(item, items) {\r\n\t\treturn items.reduce((p, item_, i) => {\r\n\t\t\treturn p !== -1 ? p : (CartMiniService.match(item, item_) ? i : p);\r\n\t\t}, -1);\r\n\t}\r\n}\r\n","import { BehaviorSubject, of } from 'rxjs';\r\nimport { map, switchMap } from 'rxjs/operators';\r\nimport { ApiService } from '../../common/api/api.service';\r\nimport { LocalStorageService } from '../../common/storage/local-storage.service';\r\nimport { environment } from '../../environment';\r\nimport { CartMiniService } from '../../shared/cart-mini/cart-mini.service';\r\n\r\nexport const CartSteps = {\r\n\tNone: 0,\r\n\tItems: 1,\r\n\tData: 2,\r\n\tDelivery: 3,\r\n\tRecap: 4,\r\n\tPayment: 5,\r\n\tComplete: 6,\r\n\tError: -1,\r\n};\r\n\r\n/*\r\nexport class Cart {\r\n\tconstructor() {\r\n\t\tthis.step = CartSteps.Items; // number\r\n\t\tthis.items = []; // CartItem[]\r\n\t\tthis.shipmentCountry = null; // number\r\n\t\tthis.user = null; // User\r\n\t\tthis.guest = null; // boolean\r\n\t\tthis.data = {\r\n\t\t\tfirstName: null, // string\r\n\t\t\tlastName: null, // string\r\n\t\t\temail: null, // string\r\n\t\t\ttelephone: null, // string\r\n\t\t\taddress: null, // string\r\n\t\t\tzipCode: null, // string\r\n\t\t\tcity: null, // string\r\n\t\t\tprovince: null, // string\r\n\t\t\tcountry: null, // number\r\n\t\t\tmessage: null, // string\r\n\t\t\tinvoice: null, // boolean\r\n\t\t\tinvoiceData: {\r\n\t\t\t\ttaxNumber: null, // string\r\n\t\t\t\tsdi: null, // string\r\n\t\t\t\tpec: null, // string\r\n\t\t\t},\r\n\t\t\tbilling: null, // boolean\r\n\t\t\tbillingData: {\r\n\t\t\t\tcompany: null, // string\r\n\t\t\t\tfirstName: null, // string\r\n\t\t\t\tlastName: null, // string\r\n\t\t\t\ttelephone: null, // string\r\n\t\t\t\taddress: null, // string\r\n\t\t\t\tzipCode: null, // string\r\n\t\t\t\tcity: null, // string\r\n\t\t\t\tprovince: null, // string\r\n\t\t\t\tcountry: null, // number\r\n\t\t\t},\r\n\t\t\tconditions: false, // boolean\r\n\t\t\tprivacy: false, // boolean\r\n\t\t\tterms: false, // boolean\r\n\t\t};\r\n\t\tthis.deliveryData = null; // {\r\n\t\t\tfirstName: null, // string\r\n\t\t\tlastName: null, // string\r\n\t\t\temail: null, // string\r\n\t\t\ttelephone: null, // string\r\n\t\t\taddress: null, // string\r\n\t\t\tzipCode: null, // string\r\n\t\t\tcity: null, // string\r\n\t\t\tprovince: null, // string\r\n\t\t\tcountry: null, // { id: number, name: string }\r\n\t\t}\r\n\t\tthis.billingData = null; // {\r\n\t\t\tfirstName: null, // string\r\n\t\t\tlastName: null, // string\r\n\t\t\taddress: null, // string\r\n\t\t\tzipCode: null, // string\r\n\t\t\tcity: null, // string\r\n\t\t\tprovince: null, // string\r\n\t\t\tcountry: null, // { id: number, name: string }\r\n\t\t}\r\n\t\tthis.deliveryType = null; // number\r\n\t\tthis.delivery = null; // { id: number, name: string }\r\n\t\tthis.discountCode = null; // string\r\n\t\tthis.discount = null; // { code: string, price: number }\r\n\t\tthis.paymentMethod = null; // number\r\n\t\tthis.store = null; // Store\r\n\t}\r\n}\r\n*/\r\n\r\nexport class CartService {\r\n\r\n\tstatic get STORAGE_KEY() {\r\n\t\treturn `cart_${environment.currentMarket}`;\r\n\t}\r\n\r\n\tstatic cart$_ = new BehaviorSubject(null);\r\n\r\n\tstatic get currentCart() {\r\n\t\treturn CartService.cart$_.getValue();\r\n\t}\r\n\r\n\tstatic setStep(step) {\r\n\t\tconst cart = CartService.currentCart;\r\n\t\tif (cart) {\r\n\t\t\tcart.step = step;\r\n\t\t\tCartService.setCart(cart);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic setCart(cart) {\r\n\t\tif (cart) {\r\n\t\t\tLocalStorageService.set(CartService.STORAGE_KEY, cart);\r\n\t\t} else {\r\n\t\t\tLocalStorageService.delete(CartService.STORAGE_KEY);\r\n\t\t}\r\n\t\tCartService.cart$_.next(cart);\r\n\t}\r\n\r\n\tstatic cart$() {\r\n\t\tconst localCart = LocalStorageService.get(CartService.STORAGE_KEY) || null;\r\n\t\treturn of(localCart).pipe(\r\n\t\t\tswitchMap(cart => {\r\n\t\t\t\tCartService.setCart(cart);\r\n\t\t\t\treturn CartService.cart$_;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic clear$() {\r\n\t\treturn of(null).pipe(\r\n\t\t\tmap(cart => {\r\n\t\t\t\tCartMiniService.setItems([]);\r\n\t\t\t\tCartService.setCart(cart);\r\n\t\t\t\treturn cart;\r\n\t\t\t}),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic data$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/cart/data');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/cart/data.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic estimatedDelivery$(cart) {\r\n\t\tif (environment.flags.production) {\r\n\t\t\t// !!! convertire in post ApiService.post$('/cart/estimated-delivery', cart);\r\n\t\t\treturn ApiService.get$('/cart/estimated-delivery.json');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/cart/estimated-delivery.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getDeliveryType$(cart) {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.post$('/cart/delivery-type', cart);\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/cart/delivery-type.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getStores$(payload) {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.post$('/cart/stores', payload);\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/cart/stores.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getDiscount$(payload) {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/cart/discount.json');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/cart/discount.json');\r\n\t\t}\r\n\t}\r\n}\r\n","export class SessionStorageService {\r\n\r\n\tstatic delete(name) {\r\n\t\tif (this.isSessionStorageSupported()) {\r\n\t\t\twindow.sessionStorage.removeItem(name);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic exist(name) {\r\n\t\tif (this.isSessionStorageSupported()) {\r\n\t\t\treturn window.sessionStorage[name] !== undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic get(name) {\r\n\t\tlet value = null;\r\n\t\tif (this.isSessionStorageSupported() && window.sessionStorage[name] !== undefined) {\r\n\t\t\ttry {\r\n\t\t\t\tvalue = JSON.parse(window.sessionStorage[name]);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('SessionStorageService.get.error parsing', name, e);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tstatic set(name, value) {\r\n\t\tif (this.isSessionStorageSupported()) {\r\n\t\t\ttry {\r\n\t\t\t\tconst cache = [];\r\n\t\t\t\tconst json = JSON.stringify(value, function(key, value) {\r\n\t\t\t\t\tif (typeof value === 'object' && value !== null) {\r\n\t\t\t\t\t\tif (cache.indexOf(value) !== -1) {\r\n\t\t\t\t\t\t\t// Circular reference found, discard key\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcache.push(value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t});\r\n\t\t\t\twindow.sessionStorage.setItem(name, json);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('SessionStorageService.set.error serializing', name, value, e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic isSessionStorageSupported() {\r\n\t\tif (this.supported) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tlet supported = false;\r\n\t\ttry {\r\n\t\t\tsupported = 'sessionStorage' in window && window.sessionStorage !== null;\r\n\t\t\tif (supported) {\r\n\t\t\t\twindow.sessionStorage.setItem('test', '1');\r\n\t\t\t\twindow.sessionStorage.removeItem('test');\r\n\t\t\t} else {\r\n\t\t\t\tsupported = false;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tsupported = false;\r\n\t\t}\r\n\t\tthis.supported = supported;\r\n\t\treturn supported;\r\n\t}\r\n}\r\n","import { BehaviorSubject, of } from 'rxjs';\r\nimport { catchError, map, switchMap, tap } from 'rxjs/operators';\r\nimport { ApiService } from '../../common/api/api.service';\r\nimport { SessionStorageService } from '../../common/storage/session-storage.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport const UserViews = {\r\n\tSIGN_IN: 1,\r\n\tSIGN_UP: 2,\r\n\tFORGOTTEN: 3,\r\n\tEDIT: 4,\r\n};\r\n\r\nexport class User {\r\n\r\n\tget shortName() {\r\n\t\treturn (this.firstName || '?').substr(0, 1).toUpperCase() + (this.lastName || '?').substr(0, 1).toUpperCase();\r\n\t}\r\n\r\n\tget fullName() {\r\n\t\treturn this.firstName + ' ' + this.lastName;\r\n\t}\r\n\r\n\tconstructor(data) {\r\n\t\tif (data) {\r\n\t\t\tObject.assign(this, data);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport class UserService {\r\n\r\n\tstatic user$_ = new BehaviorSubject(null);\r\n\r\n\tstatic get currentUser() {\r\n\t\treturn this.user$_.getValue();\r\n\t}\r\n\r\n\tstatic setUser(user) {\r\n\t\tif (user) {\r\n\t\t\tSessionStorageService.set('user', user);\r\n\t\t} else {\r\n\t\t\tSessionStorageService.delete('user');\r\n\t\t}\r\n\t\tthis.user$_.next(user);\r\n\t}\r\n\r\n\tstatic data$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/user/data.json');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/user/data.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic forgot$(payload) {\r\n\t\tif (environment.flags.production) {\r\n\t\t\t// !!! convert to .post$\r\n\t\t\treturn ApiService.get$(`/user/forgot.json`, payload);\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$(`/user/forgot.json`);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic me$() {\r\n\t\tconst sessionUser = SessionStorageService.get('user');\r\n\t\tif (sessionUser) {\r\n\t\t\treturn of(sessionUser).pipe(\r\n\t\t\t\tswitchMap(user => {\r\n\t\t\t\t\tthis.setUser(new User(user));\r\n\t\t\t\t\treturn this.user$_;\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn (\r\n\t\t\t\tenvironment.flags.production ?\r\n\t\t\t\t\tApiService.get$(`/user/me`) :\r\n\t\t\t\t\tApiService.get$(`/user/me.json`)\r\n\t\t\t).pipe(\r\n\t\t\t\tmap((response) => {\r\n\t\t\t\t\treturn this.mapUser(response);\r\n\t\t\t\t}),\r\n\t\t\t\tcatchError(_ => of(null)),\r\n\t\t\t\tswitchMap(user => {\r\n\t\t\t\t\tthis.setUser(user);\r\n\t\t\t\t\treturn this.user$_;\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic signin$(payload) {\r\n\t\treturn (\r\n\t\t\tenvironment.flags.production ? ApiService.post$(`/user/signin`, payload) : ApiService.get$(`/user/signin.json`)\r\n\t\t).pipe(\r\n\t\t\tmap((response) => this.mapUser(response)),\r\n\t\t\ttap((user) => this.setUser(user)),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic signout$() {\r\n\t\treturn (\r\n\t\t\tenvironment.flags.production ? ApiService.post$(`/user/signout`) : ApiService.get$(`/user/signout.json`)\r\n\t\t).pipe(\r\n\t\t\ttap((_) => this.setUser(null)),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic signup$(payload) {\r\n\t\t// console.log('UserService.signup$', payload);\r\n\t\treturn (\r\n\t\t\tenvironment.flags.production ? ApiService.post$(`/user/signup`, payload) : ApiService.get$(`/user/signup.json`)\r\n\t\t).pipe(\r\n\t\t\tmap((response) => this.mapUser(response)),\r\n\t\t\ttap((user) => this.setUser(user)),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic edit$(payload) {\r\n\t\t// console.log('UserService.edit$', payload);\r\n\t\treturn (\r\n\t\t\tenvironment.flags.production ? ApiService.post$(`/user/edit`, payload) : ApiService.get$(`/user/edit.json`)\r\n\t\t).pipe(\r\n\t\t\tmap((response) => this.mapUser(response)),\r\n\t\t\ttap((user) => this.setUser(user)),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic accessData$(payload) {\r\n\t\t// console.log('UserService.accessData$', payload);\r\n\t\treturn (\r\n\t\t\tenvironment.flags.production ?\r\n\t\t\t\t// !!! convert to .post$\r\n\t\t\t\tApiService.get$(`/user/access-data.json`, payload) :\r\n\t\t\t\tApiService.get$(`/user/access-data.json`)\r\n\t\t);\r\n\t}\r\n\r\n\tstatic delete$(payload) {\r\n\t\t// console.log('UserService.delete$', payload);\r\n\t\treturn (\r\n\t\t\tenvironment.flags.production ?\r\n\t\t\t\t// !!! convert to .post$\r\n\t\t\t\tApiService.get$(`/user/delete.json`, payload) :\r\n\t\t\t\tApiService.get$(`/user/delete.json`)\r\n\t\t);\r\n\t}\r\n\r\n\tstatic gdpr$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/user/gdpr.json');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/user/gdpr.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic tryFacebook$(me) {\r\n\t\treturn of(null);\r\n\t}\r\n\r\n\tstatic tryGoogle$(me) {\r\n\t\treturn of(null);\r\n\t}\r\n\r\n\tstatic tryLinkedin$(me) {\r\n\t\treturn of(null);\r\n\t}\r\n\r\n\tstatic sessionStorage$() {\r\n\t\treturn of(SessionStorageService.get('user') || null);\r\n\t}\r\n\r\n\tstatic mapUser(user) {\r\n\t\treturn user ? new User(user) : null;\r\n\t}\r\n\r\n\tstatic mapUsers(users) {\r\n\t\treturn users ? users.map(x => UserService.mapUser(x)) : [];\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { ModalResolveEvent, ModalService } from './common/modal/modal.service';\r\nimport { environment } from './environment';\r\nimport { CartService } from './pages/cart/cart.service';\r\nimport { CartMiniService } from './shared/cart-mini/cart-mini.service';\r\nimport { HeaderService } from './shared/header/header.service';\r\nimport { UserService } from './shared/user/user.service';\r\n\r\nexport class AppComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.remove('hidden');\r\n\t\t// console.log('AppComponent.onInit');\r\n\t\tthis.header = HeaderService.currentHeader;\r\n\t\tHeaderService.header$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(header => {\r\n\t\t\tthis.header = header;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tCartMiniService.items$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(_ => this.pushChanges());\r\n\t}\r\n\r\n\tonOpenMarketAndLanguage() {\r\n\t\tHeaderService.onBack();\r\n\t\tModalService.open$({ src: environment.template.modal.marketsAndLanguagesModal }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tconsole.log('AppComponent.onOpenMarketAndLanguage', event);\r\n\t\t});\r\n\t}\r\n\r\n\tonLogin() {\r\n\t\tHeaderService.onBack();\r\n\t\tModalService.open$({ src: environment.template.modal.userModal, data: { view: 1 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tconsole.log('AppComponent.onLogin', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\twindow.location.href = environment.slug.reservedArea;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonLogout() {\r\n\t\tUserService.signout$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tonProjectRegistration(event) {\r\n\t\tModalService.open$({ src: environment.template.modal.projectsRegistrationModal }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tconsole.log('AppComponent.onProjectRegistration', event);\r\n\t\t\t/*\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\t// window.location.href = environment.slug.reservedArea;\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t});\r\n\t}\r\n\r\n\tonAddToCart(item) {\r\n\t\t// resetting purchase procedure\r\n\t\tCartService.setCart(null);\r\n\t\t// getting showefy price and adding to mini cart\r\n\t\tCartMiniService.getPriceAndAddItem$(item).pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(_ => {\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tonOpenMiniCart() {\r\n\t\tHeaderService.setHeader('cart');\r\n\t}\r\n\r\n}\r\n\r\nAppComponent.meta = {\r\n\tselector: '[app-component]',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { filter, shareReplay, takeUntil } from 'rxjs/operators';\r\n\r\nexport class ClickOutsideDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tthis.initialFocus = false;\r\n\t\tconst { module, node, parentInstance, selector } = getContext(this);\r\n\t\tconst event$ = this.event$ = fromEvent(document, 'click').pipe(\r\n\t\t\tfilter(event => {\r\n\t\t\t\tconst target = event.target;\r\n\t\t\t\t// console.log('ClickOutsideDirective.onClick', this.element.nativeElement, target, this.element.nativeElement.contains(target));\r\n\t\t\t\t// const documentContained: boolean = Boolean(document.compareDocumentPosition(target) & Node.DOCUMENT_POSITION_CONTAINED_BY);\r\n\t\t\t\t// console.log(target, documentContained);\r\n\t\t\t\tconst clickedInside = node.contains(target) || !document.contains(target);\r\n\t\t\t\tif (!clickedInside) {\r\n\t\t\t\t\tif (this.initialFocus) {\r\n\t\t\t\t\t\tthis.initialFocus = false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.initialFocus = true;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t\tconst expression = node.getAttribute(`(clickOutside)`);\r\n\t\tif (expression) {\r\n\t\t\tconst outputFunction = module.makeFunction(expression, ['$event']);\r\n\t\t\tevent$.pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(event => {\r\n\t\t\t\tmodule.resolve(outputFunction, parentInstance, event);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tparentInstance.clickOutside$ = event$;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nClickOutsideDirective.meta = {\r\n\tselector: `[(clickOutside)]`,\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nexport class DatePipe extends Pipe {\r\n\r\n\tstatic transform(value, options = {}, language = null) { // = 'en-IN'\r\n\t\tif (value != null) { // !!! keep losing\r\n\t\t\tlanguage = language || environment.currentLanguage;\r\n\t\t\treturn new Intl.DateTimeFormat(language, options).format(value instanceof Date ? value : new Date(value));\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\tstatic transform(value, locale = 'it-IT-u-ca-gregory', options = {\r\n\t\tdateStyle: 'short',\r\n\t\ttimeStyle: 'short',\r\n\t}) {\r\n\t\tconst localeDateString = new Date(value).toLocaleDateString(locale, options);\r\n\t\treturn localeDateString;\r\n\t}\r\n\t*/\r\n\r\n}\r\n\r\nDatePipe.meta = {\r\n\tname: 'date',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class DownloadDirective extends Directive {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('download', this.download);\r\n\t}\r\n\r\n}\r\n\r\nDownloadDirective.meta = {\r\n\tselector: '[download]',\r\n\tinputs: ['download']\r\n};\r\n","import { fromEvent, ReplaySubject } from 'rxjs';\r\nimport { delay, switchMap } from 'rxjs/operators';\r\n\r\nexport class LocomotiveScrollService {\r\n\r\n\tstatic scroll$ = new ReplaySubject(1);\r\n\tstatic scroll(scroll) {\r\n\t\t// console.log('LocomotiveScrollService.scroll', scroll);\r\n\t\tthis.scroll$.next(scroll);\r\n\t}\r\n\r\n\tstatic init(node, options) {\r\n\t\toptions = Object.assign({\r\n\t\t\tuseKeyboard: true,\r\n\t\t\tsmoothMobile: true,\r\n\t\t\tinertia: 0.5,\r\n\t\t\t// name:'scroll',\r\n\t\t\t// offset: [0,0], // bottom top\r\n\t\t\t// repeat: false,\r\n\t\t\tsmooth: true,\r\n\t\t\t// initPosition: { x: 0, y: 0 }\r\n\t\t\t// direction: 'vertical',\r\n\t\t\tlerp: 0.01,\r\n\t\t\tgetDirection: true, // add direction to scroll event\r\n\t\t\tgetSpeed: true, // add speed to scroll event\r\n\t\t\t// class: 'is-inview',\r\n\t\t\tinitClass: 'has-scroll-init',\r\n\t\t\tscrollingClass: 'has-scroll-scrolling',\r\n\t\t\tdraggingClass: 'has-scroll-dragging',\r\n\t\t\tsmoothClass: 'has-scroll-smooth',\r\n\t\t\tscrollbarContainer: false,\r\n\t\t\tscrollbarClass: 'c-scrollbar',\r\n\t\t\tmultiplier: 1,\r\n\t\t\tfirefoxMultiplier: 50,\r\n\t\t\ttouchMultiplier: 2,\r\n\t\t\tscrollFromAnywhere: true,\r\n\t\t\tgestureDirection: 'vertical',\r\n\t\t\treloadOnContextChange: false,\r\n\t\t\tresetNativeScroll: true,\r\n\t\t}, options, {\r\n\t\t\tel: node,\r\n\t\t});\r\n\t\tif (this.useLocomotiveScroll()) {\r\n\t\t\tconst instance = new LocomotiveScroll(options);\r\n\t\t\tLocomotiveScrollService.instance = instance;\r\n\t\t\treturn instance;\r\n\t\t} else {\r\n\t\t\tdocument.querySelector('html').classList.add('has-scroll-init');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic useLocomotiveScroll() {\r\n\t\treturn window.innerWidth >= 768 && !this.isMacLike();\r\n\t}\r\n\r\n\tstatic isMacLike() {\r\n\t\tconst isMacLike = /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform);\r\n\t\treturn isMacLike;\r\n\t}\r\n\r\n\tstatic isIOS() {\r\n\t\tconst isIOS = /(iPhone|iPod|iPad)/i.test(navigator.platform);\r\n\t\treturn isIOS;\r\n\t}\r\n\r\n\tstatic isMacOs() {\r\n\t\tconst isMacOs = navigator.platform.toLowerCase().indexOf('mac') >= 0;\r\n\t\treturn isMacOs;\r\n\t}\r\n\r\n\tstatic isSafari() {\r\n\t\tconst isSafari = navigator.vendor.match(/apple/i) &&\r\n\t\t\t!navigator.userAgent.match(/crios/i) &&\r\n\t\t\t!navigator.userAgent.match(/fxios/i);\r\n\t\treturn isSafari;\r\n\t}\r\n\r\n\tstatic init$(node) {\r\n\t\treturn fromEvent(window, 'DOMContentLoaded').pipe(\r\n\t\t\tdelay(1),\r\n\t\t\tswitchMap(_ => {\r\n\t\t\t\t// setTimeout(() => {\r\n\t\t\t\tconst instance = LocomotiveScrollService.init(node);\r\n\t\t\t\tif (instance) {\r\n\t\t\t\t\tconst showefy = document.querySelector('#showefy');\r\n\t\t\t\t\tinstance.on('scroll', instance => {\r\n\t\t\t\t\t\tLocomotiveScrollService.scroll(instance);\r\n\t\t\t\t\t\tif (showefy) {\r\n\t\t\t\t\t\t\tconst isShowefyDisabled = instance.speed > 0.1;\r\n\t\t\t\t\t\t\tif (isShowefyDisabled) {\r\n\t\t\t\t\t\t\t\tif (showefy.style.pointerEvents !== 'none') {\r\n\t\t\t\t\t\t\t\t\tshowefy.style.pointerEvents = 'none';\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (showefy.style.pointerEvents === 'none') {\r\n\t\t\t\t\t\t\t\t\tshowefy.style.pointerEvents = 'auto';\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst event = { direction: null, scroll: { x: 0, y: 0 }, speed: 0 };\r\n\t\t\t\t\tconst body = document.querySelector('body');\r\n\t\t\t\t\tlet previousY = body.scrollTop; // window.pageYOffset; // body.scrollTop;\r\n\t\t\t\t\tbody.addEventListener('scroll', () => {\r\n\t\t\t\t\t\tconst y = body.scrollTop; // window.pageYOffset; // body.scrollTop;\r\n\t\t\t\t\t\tconst direction = y >= previousY ? 'down' : 'up';\r\n\t\t\t\t\t\t// console.log('scroll', y, direction);\r\n\t\t\t\t\t\tpreviousY = y;\r\n\t\t\t\t\t\tevent.direction = direction;\r\n\t\t\t\t\t\tevent.scroll.y = y;\r\n\t\t\t\t\t\tLocomotiveScrollService.scroll(event);\r\n\t\t\t\t\t}, true);\r\n\t\t\t\t}\r\n\t\t\t\treturn LocomotiveScrollService.scroll$;\r\n\t\t\t\t// }, 1);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic update() {\r\n\t\tif (this.instance) {\r\n\t\t\tthis.instance.update();\r\n\t\t}\r\n\t}\r\n\r\n\tstatic stop() {\r\n\t\tif (this.instance) {\r\n\t\t\tthis.instance.stop();\r\n\t\t}\r\n\t}\r\n\r\n\tstatic start() {\r\n\t\tif (this.instance) {\r\n\t\t\tthis.instance.start();\r\n\t\t}\r\n\t}\r\n\r\n\tstatic scrollTo(target, options = { offset: -130 }) {\r\n\t\tif (this.instance) {\r\n\t\t\tthis.instance.scrollTo(target, options);\r\n\t\t} else {\r\n\t\t\tconst body = document.querySelector('body');\r\n\t\t\tconst currentTop = body.scrollTop; // window.pageYOffset; // body.scrollTop;\r\n\t\t\tconst targetTop = currentTop + target.getBoundingClientRect().top + options.offset;\r\n\t\t\tconst distance = targetTop - currentTop;\r\n\t\t\tconst o = { pow: 0 };\r\n\t\t\tgsap.set(body, {\r\n\t\t\t\t'scroll-behavior': 'auto'\r\n\t\t\t});\r\n\t\t\tif (options.disableLerp) {\r\n\t\t\t\tgsap.set(body, {\r\n\t\t\t\t\t'scrollTop': currentTop + distance\r\n\t\t\t\t});\r\n\t\t\t\tgsap.set(body, {\r\n\t\t\t\t\t'scroll-behavior': 'smooth'\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tgsap.to(o, {\r\n\t\t\t\t\tduration: Math.abs(distance) / 2000,\r\n\t\t\t\t\tpow: 1,\r\n\t\t\t\t\tease: Quad.easeOut,\r\n\t\t\t\t\toverwrite: 'all',\r\n\t\t\t\t\tonUpdate: () => {\r\n\t\t\t\t\t\tgsap.set(body, {\r\n\t\t\t\t\t\t\t'scrollTop': currentTop + distance * o.pow\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// window.scrollTo(0, currentTop + distance * o.pow);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonComplete: () => {\r\n\t\t\t\t\t\tgsap.set(body, {\r\n\t\t\t\t\t\t\t'scroll-behavior': 'smooth'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t// target.scrollIntoView();\r\n\t\t}\r\n\t}\r\n\r\n\tstatic scrollToSelector(selector, options) {\r\n\t\tconst target = document.querySelector(selector);\r\n\t\tif (target) {\r\n\t\t\tLocomotiveScrollService.scrollTo(target, options);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\n\r\nlet DROPDOWN_ID = 1000000;\r\n\r\nexport class DropdownDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this.dropdown || this.id_ || (this.id_ = DropdownDirective.nextId());\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst trigger = node.getAttribute('dropdown-trigger');\r\n\t\tthis.trigger = trigger ? node.querySelector(trigger) : node;\r\n\t\tthis.opened = null;\r\n\t\tthis.onClick = this.onClick.bind(this);\r\n\t\tthis.onDocumentClick = this.onDocumentClick.bind(this);\r\n\t\tthis.openDropdown = this.openDropdown.bind(this);\r\n\t\tthis.closeDropdown = this.closeDropdown.bind(this);\r\n\t\tthis.addListeners();\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.openDropdown();\r\n\t\t} else {\r\n\t\t\tconst dropdownItemNode = node.querySelector('[dropdown-item]');\r\n\t\t\t// console.log('dropdownItemNode', dropdownItemNode);\r\n\t\t\tif (!dropdownItemNode) { // if (this.trigger !== node) {\r\n\t\t\t\tthis.closeDropdown();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDocumentClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst clickedInside = node === event.target || node.contains(event.target);\r\n\t\tif (!clickedInside) {\r\n\t\t\tthis.closeDropdown();\r\n\t\t}\r\n\t}\r\n\r\n\topenDropdown() {\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.opened = true;\r\n\t\t\tthis.addDocumentListeners();\r\n\t\t\tDropdownDirective.dropdown$.next(this.id);\r\n\t\t\tthis.dropped.next(this.id);\r\n\t\t}\r\n\t}\r\n\r\n\tcloseDropdown() {\r\n\t\tif (this.opened !== null) {\r\n\t\t\tthis.removeDocumentListeners();\r\n\t\t\tthis.opened = null;\r\n\t\t\tif (DropdownDirective.dropdown$.getValue() === this.id) {\r\n\t\t\t\tDropdownDirective.dropdown$.next(null);\r\n\t\t\t\tthis.dropped.next(null);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\taddListeners() {\r\n\t\tthis.trigger.addEventListener('click', this.onClick);\r\n\t}\r\n\r\n\taddDocumentListeners() {\r\n\t\tdocument.addEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tremoveListeners() {\r\n\t\tthis.trigger.removeEventListener('click', this.onClick);\r\n\t}\r\n\r\n\tremoveDocumentListeners() {\r\n\t\tdocument.removeEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners();\r\n\t\tthis.removeDocumentListeners();\r\n\t}\r\n\r\n\tstatic nextId() {\r\n\t\treturn DROPDOWN_ID++;\r\n\t}\r\n\r\n}\r\n\r\nDropdownDirective.meta = {\r\n\tselector: '[dropdown]',\r\n\tinputs: ['dropdown', 'dropdown-trigger'],\r\n\toutputs: ['dropped']\r\n};\r\n\r\nDropdownDirective.dropdown$ = new BehaviorSubject(null);\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { takeUntil, tap } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from '../locomotive-scroll/locomotive-scroll.service';\r\nimport { DropdownDirective } from './dropdown.directive';\r\n\r\nexport class DropdownItemDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this['dropdown-item'];\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('dropdown-item');\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownItemDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t\t// LocomotiveScrollService.stop();\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t\t// LocomotiveScrollService.start();\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.enter$(node).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t\tthis.leave$(node).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t\t// this.addListeners();\r\n\t}\r\n\r\n\tenter$(node) {\r\n\t\t// const { node } = getContext(this);\r\n\t\treturn fromEvent(node, 'mouseenter').pipe(\r\n\t\t\ttap(event => {\r\n\t\t\t\tLocomotiveScrollService.stop();\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tleave$(node) {\r\n\t\t// const { node } = getContext(this);\r\n\t\treturn fromEvent(node, 'mouseleave').pipe(\r\n\t\t\ttap(event => {\r\n\t\t\t\tLocomotiveScrollService.start();\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\t/*\r\n\tonDestroy() {\r\n\t\tthis.removeListeners();\r\n\t}\r\n\r\n\tonEnter(event) {\r\n\t\tLocomotiveScrollService.stop();\r\n\t}\r\n\r\n\tonLeave(event) {\r\n\t\tLocomotiveScrollService.start();\r\n\t}\r\n\r\n\taddListeners() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.addEventListener('mouseenter', this.onEnter);\r\n\t\tnode.addEventListener('mouseleave', this.onLeave);\r\n\t}\r\n\r\n\tremoveListeners() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.removeEventListener('mouseenter', this.onEnter);\r\n\t\tnode.removeEventListener('mouseleave', this.onLeave);\r\n\t}\r\n\t*/\r\n}\r\n\r\nDropdownItemDirective.meta = {\r\n\tselector: '[dropdown-item], [[dropdown-item]]',\r\n\tinputs: ['dropdown-item']\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nexport class EnvPipe extends Pipe {\r\n\r\n\tstatic transform(keypath) {\r\n\t\tlet env = environment;\r\n\t\tconst keys = keypath.split('.');\r\n\t\tlet k = keys.shift();\r\n\t\twhile (keys.length > 0 && env[k]) {\r\n\t\t\tenv = env[k];\r\n\t\t\tk = keys.shift();\r\n\t\t}\r\n\t\tconst value = env[k] || null;\r\n\t\treturn value;\r\n\t}\r\n\r\n}\r\n\r\nEnvPipe.meta = {\r\n\tname: 'env',\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { LocomotiveScrollService } from '../locomotive-scroll/locomotive-scroll.service';\r\n\r\nexport class FilterItemComponent extends Component {\r\n\r\n\tonInit() {\r\n\r\n\t}\r\n\r\n\tcloseFilter() {\r\n\t\tthis.filter.active = false;\r\n\t\tthis.change.next();\r\n\t\t// this.pushChanges();\r\n\t}\r\n\r\n\ttoggleFilter(filter) {\r\n\t\tObject.keys(this.filters).forEach(key => {\r\n\t\t\tconst f = this.filters[key];\r\n\t\t\tif (f === filter) {\r\n\t\t\t\tf.active = !f.active;\r\n\t\t\t} else {\r\n\t\t\t\tf.active = false;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.change.next();\r\n\t\t// this.pushChanges();\r\n\t}\r\n\r\n\tclearFilter(event, filter) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopImmediatePropagation();\r\n\t\tfilter.clear();\r\n\t\tthis.change.next();\r\n\t\t// this.pushChanges();\r\n\t}\r\n\r\n\tonEnter() {\r\n\t\tLocomotiveScrollService.stop();\r\n\t}\r\n\r\n\tonLeave() {\r\n\t\tLocomotiveScrollService.start();\r\n\t}\r\n}\r\n\r\nFilterItemComponent.meta = {\r\n\tselector: '[filter], [[filter]]',\r\n\toutputs: ['change'],\r\n\tinputs: ['filter', 'filters', 'name'],\r\n\ttemplate: /* html */`\r\n\t\t<div class=\"group--filter\" (click)=\"toggleFilter(filter)\" (clickOutside)=\"closeFilter(filter)\">\r\n\t\t\t<span class=\"label\" [innerHTML]=\"filter.getLabel() || name\"></span>\r\n\t\t\t<svg class=\"caret-down\" *if=\"!filter.hasAny()\"><use xlink:href=\"#caret-down\"></use></svg>\r\n\t\t\t<svg class=\"close-sm\" *if=\"filter.hasAny()\" (click)=\"clearFilter($event, filter)\"><use xlink:href=\"#close-sm\"></use></svg>\r\n\t\t</div>\r\n\t\t<div class=\"options\" *if=\"filter.active\" (mouseenter)=\"onEnter()\" (mouseleave)=\"onLeave()\">\r\n\t\t\t<div class=\"category\" [innerHTML]=\"name\"></div>\r\n\t\t\t<ul class=\"nav--options\">\r\n\t\t\t\t<li class=\"nav--options__item\" [class]=\"{ active: filter.has(item), disabled: item.disabled, empty: !item.value }\" *for=\"let item of filter.options\">\r\n\t\t\t\t\t<span class=\"option\" (click)=\"filter.set(item)\">\r\n\t\t\t\t\t\t<span class=\"name\" [innerHTML]=\"item.label | label\"></span>\r\n\t\t\t\t\t\t<!-- <span class=\"count\" [innerHTML]=\"item.count || ''\"></span> -->\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t\t`,\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nexport class FlagPipe extends Pipe {\r\n\r\n\tstatic transform(key) {\r\n\t\tconst flags = environment.flags;\r\n\t\treturn flags[key] || false;\r\n\t}\r\n\r\n}\r\n\r\nFlagPipe.meta = {\r\n\tname: 'flag',\r\n};\r\n","\r\nimport { Pipe } from 'rxcomp';\r\n\r\nexport class HighlightPipe extends Pipe {\r\n\r\n\tstatic transform(text, query) {\r\n\t\tif (!query) {\r\n\t\t\treturn text;\r\n\t\t}\r\n\t\tif (!Array.isArray(query)) {\r\n\t\t\tquery = [query];\r\n\t\t}\r\n\t\t// text = HighlightPipe.encodeHTML(text);\r\n\t\tconst escapedQuery = query.map(x => HighlightPipe.escapeRegexChars(x));\r\n\t\tconst regExp = new RegExp(`(?<!\\<)${escapedQuery.join('(?![\\w\\s]*[\\>])|(?<!\\<)')}(?![\\w\\s]*[\\>])`, 'gmi');\r\n\t\t// const regExp = new RegExp('&[^;]+;|' + escapedQuery.join('|'), 'gi');\r\n\t\ttext = text.replace(regExp, function(match, i, b) {\r\n\t\t\treturn '<b>' + match + '</b>';\r\n\t\t\t// return match.toLowerCase() === x.toLowerCase() ? '<strong>' + match + '</strong>' : match;\r\n\t\t});\r\n\t\t// text = HighlightPipe.decodeHTML(text);\r\n\t\tconsole.log(text);\r\n\t\treturn text;\r\n\t}\r\n\r\n\tstatic escapeRegexChars(text) {\r\n\t\treturn text.replace(/([.?*+^$[\\]\\\\(){}|-])/g, '\\\\$1');\r\n\t}\r\n\r\n\tstatic safeToString(text) {\r\n\t\treturn text === undefined || text === null ? '' : text.toString().trim();\r\n\t}\r\n\r\n\tstatic encodeHTML(text) {\r\n\t\treturn this.safeToString(text)\r\n\t\t\t.replace(/&/g, '&amp;')\r\n\t\t\t.replace(/</g, '&lt;')\r\n\t\t\t.replace(/>/g, '&gt;');\r\n\t}\r\n\r\n\tstatic decodeHTML(text) {\r\n\t\treturn text\r\n\t\t\t.replace(/&amp;/g, '&')\r\n\t\t\t.replace(/&lt;/g, '<')\r\n\t\t\t.replace(/&gt;/g, '>');\r\n\t}\r\n\r\n}\r\n\r\nHighlightPipe.meta = {\r\n\tname: 'highlight',\r\n};\r\n\r\n","import { Pipe } from 'rxcomp';\r\n\r\n/*\r\n['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n['\"', '&', ''', '<', '>', ' ', '¡', '¢', '£', '¤', '¥', '¦', '§', '¨', '©', 'ª', '«', '¬', '­', '®', '¯', '°', '±', '²', '³', '´', 'µ', '¶', '·', '¸', '¹', 'º', '»', '¼', '½', '¾', '¿', 'À', 'Á', 'Â', 'Ã', 'Ä', 'Å', 'Æ', 'Ç', 'È', 'É', 'Ê', 'Ë', 'Ì', 'Í', 'Î', 'Ï', 'Ð', 'Ñ', 'Ò', 'Ó', 'Ô', 'Õ', 'Ö', '×', 'Ø', 'Ù', 'Ú', 'Û', 'Ü', 'Ý', 'Þ', 'ß', 'à', 'á', 'ã', 'ä', 'å', 'æ', 'ç', 'è', 'é', 'ê', 'ë', 'ì', 'í', 'î', 'ï', 'ð', 'ñ', 'ò', 'ó', 'ô', 'õ', 'ö', '÷', 'ø', 'ù', 'ú', 'û', 'ü', 'ý', 'þ', 'ÿ', '&', '•', '°', '∞', '‰', '⋅', '±', '†', '—', '¬', 'µ', '⊥', '∥', '€', '£', '¥', '¢', '©', '®', '™', 'α', 'β', 'γ', 'δ', 'ε', 'ζ', 'η', 'θ', 'ι', 'κ', 'λ', 'μ', 'ν', 'ξ', 'ο', 'π', 'ρ', 'σ', 'τ', 'υ', 'φ', 'χ', 'ψ', 'ω', 'Α', 'Β', 'Γ', 'Δ', 'Ε', 'Ζ', 'Η', 'Θ', 'Ι', 'Κ', 'Λ', 'Μ', 'Ν', 'Ξ', 'Ο', 'Π', 'Ρ', 'Σ', 'Τ', 'Υ', 'Φ', 'Χ', 'Ψ', 'Ω'];\r\n*/\r\n\r\nexport class HtmlPipe extends Pipe {\r\n\r\n\tstatic transform(value) {\r\n\t\tif (value) {\r\n\t\t\tvalue = value.replace(/&#(\\d+);/g, function(m, n) {\r\n\t\t\t\treturn String.fromCharCode(parseInt(n));\r\n\t\t\t});\r\n\t\t\tconst escapes = ['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n\t\t\tconst unescapes = ['\"', '&', '\\'', '<', '>', ' ', '¡', '¢', '£', '¤', '¥', '¦', '§', '¨', '©', 'ª', '«', '¬', '­', '®', '¯', '°', '±', '²', '³', '´', 'µ', '¶', '·', '¸', '¹', 'º', '»', '¼', '½', '¾', '¿', 'À', 'Á', 'Â', 'Ã', 'Ä', 'Å', 'Æ', 'Ç', 'È', 'É', 'Ê', 'Ë', 'Ì', 'Í', 'Î', 'Ï', 'Ð', 'Ñ', 'Ò', 'Ó', 'Ô', 'Õ', 'Ö', '×', 'Ø', 'Ù', 'Ú', 'Û', 'Ü', 'Ý', 'Þ', 'ß', 'à', 'á', 'ã', 'ä', 'å', 'æ', 'ç', 'è', 'é', 'ê', 'ë', 'ì', 'í', 'î', 'ï', 'ð', 'ñ', 'ò', 'ó', 'ô', 'õ', 'ö', '÷', 'ø', 'ù', 'ú', 'û', 'ü', 'ý', 'þ', 'ÿ', '&', '•', '°', '∞', '‰', '⋅', '±', '†', '—', '¬', 'µ', '⊥', '∥', '€', '£', '¥', '¢', '©', '®', '™', 'α', 'β', 'γ', 'δ', 'ε', 'ζ', 'η', 'θ', 'ι', 'κ', 'λ', 'μ', 'ν', 'ξ', 'ο', 'π', 'ρ', 'σ', 'τ', 'υ', 'φ', 'χ', 'ψ', 'ω', 'Α', 'Β', 'Γ', 'Δ', 'Ε', 'Ζ', 'Η', 'Θ', 'Ι', 'Κ', 'Λ', 'Μ', 'Ν', 'Ξ', 'Ο', 'Π', 'Ρ', 'Σ', 'Τ', 'Υ', 'Φ', 'Χ', 'Ψ', 'Ω'];\r\n\t\t\tconst rx = new RegExp(`(&${escapes.join(';)|(&')};)`, 'g');\r\n\t\t\tvalue = value.replace(rx, function() {\r\n\t\t\t\tfor (let i = 1; i < arguments.length; i++) {\r\n\t\t\t\t\tif (arguments[i]) {\r\n\t\t\t\t\t\t// console.log(arguments[i], unescapes[i - 1]);\r\n\t\t\t\t\t\treturn unescapes[i - 1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// console.log(value);\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nHtmlPipe.meta = {\r\n\tname: 'html',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class IdDirective extends Directive {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('id', this.id);\r\n\t}\r\n\r\n}\r\n\r\nIdDirective.meta = {\r\n\tselector: '[id]',\r\n\tinputs: ['id']\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class LabelForDirective extends Directive {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('for', this.labelFor);\r\n\t}\r\n\r\n}\r\n\r\nLabelForDirective.meta = {\r\n\tselector: '[labelFor]',\r\n\tinputs: ['labelFor']\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil, tap } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from './locomotive-scroll.service';\r\n\r\nexport class LocomotiveScrollStickyDirective extends Directive {\r\n\r\n\tsticked_ = false;\r\n\tget sticked() {\r\n\t\treturn this.sticked_;\r\n\t}\r\n\tset sticked(sticked) {\r\n\t\tif (this.sticked_ !== sticked) {\r\n\t\t\tthis.sticked_ = sticked;\r\n\t\t\tif (this.targetNode) {\r\n\t\t\t\tsticked ? this.targetNode.classList.add('sticked') : this.targetNode.classList.remove('sticked');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.targetNode = (this.target ? (node.querySelector(this.target) || node) : node);\r\n\t\tthis.until = this.until ? document.querySelector(this.until) : null;\r\n\t\tthis.sticky$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('LocomotiveScrollStickyDirective', event);\r\n\t\t});\r\n\t}\r\n\r\n\tsticky$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst targetNode = this.targetNode;\r\n\t\tconst until = this.until;\r\n\t\treturn LocomotiveScrollService.scroll$.pipe(\r\n\t\t\ttap(event => {\r\n\t\t\t\tconst rect = node.getBoundingClientRect();\r\n\t\t\t\tlet y = 0;\r\n\t\t\t\tif (this.bottom) {\r\n\t\t\t\t\tconst bottom = window.innerHeight - targetNode.offsetHeight;\r\n\t\t\t\t\tif (window.innerWidth >= 1024 && rect.y > bottom) {\r\n\t\t\t\t\t\ty = bottom - rect.y;\r\n\t\t\t\t\t\tthis.sticked = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.sticked = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst top = event.direction === 'down' ? 80 : 135;\r\n\t\t\t\t\tif (window.innerWidth >= 1024 && rect.y < top) {\r\n\t\t\t\t\t\ty = top - rect.y;\r\n\t\t\t\t\t\tif (until) {\r\n\t\t\t\t\t\t\tconst untilRect = until.getBoundingClientRect();\r\n\t\t\t\t\t\t\tconst height = untilRect.y - rect.y;\r\n\t\t\t\t\t\t\ty = Math.min(height, y);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.sticked = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.sticked = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// console.log(rect.height - targetNode.offsetHeight);\r\n\t\t\t\tgsap.set(targetNode, { y });\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nLocomotiveScrollStickyDirective.meta = {\r\n\tselector: '[locomotive-scroll-sticky],[[locomotive-scroll-sticky]]',\r\n\tinputs: ['target', 'until', 'bottom'],\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { takeUntil, tap } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from './locomotive-scroll.service';\r\n\r\nexport class LocomotiveScrollToDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tthis.initialFocus = false;\r\n\t\tconst { module, node } = getContext(this);\r\n\t\tconst expression = this.expression = node.getAttribute(`(locomotiveScrollTo)`);\r\n\t\tthis.outputFunction = module.makeFunction(expression, ['$event']);\r\n\t\tthis.scrollTo$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tscrollTo$() {\r\n\t\tconst { module, node, parentInstance } = getContext(this);\r\n\t\treturn fromEvent(node, 'click').pipe(\r\n\t\t\ttap(event => {\r\n\t\t\t\tif (event) {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t\tconst selector = module.resolve(this.outputFunction, parentInstance, event);\r\n\t\t\t\tif (typeof selector === 'string') {\r\n\t\t\t\t\tconst target = node.querySelector(selector) || document.querySelector(selector);\r\n\t\t\t\t\tif (target) {\r\n\t\t\t\t\t\tconst offset = this.offset;\r\n\t\t\t\t\t\tconst options = offset ? { offset } : undefined;\r\n\t\t\t\t\t\tLocomotiveScrollService.scrollTo(target, options);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nLocomotiveScrollToDirective.meta = {\r\n\tselector: `[(locomotiveScrollTo)]`,\r\n\tinputs: ['offset']\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from './locomotive-scroll.service';\r\n\r\nexport class LocomotiveScrollDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tLocomotiveScrollService.init$(node).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('LocomotiveScrollDirective', event);\r\n\t\t});\r\n\t\tif ('ResizeObserver' in window) {\r\n\t\t\tconst resizeObserver = new ResizeObserver(entries => {\r\n\t\t\t\t// console.log('LocomotiveScrollDirective.ResizeObserver', entries[0].target.clientHeight);\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t\tresizeObserver.observe(node);\r\n\t\t}\r\n\t\t/*\r\n\t\tconst images = Array.prototype.slice.call(document.querySelectorAll('img'));\r\n\t\timages.forEach(image => {\r\n\t\t\timage.onload = () => {\r\n\t\t\t\tconsole.log(update);\r\n\t\t\t\tinstance.update();\r\n\t\t\t};\r\n\t\t});\r\n\t\t*/\r\n\t\t/*\r\n\t\twindow.onload = () => {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tconst instance = LocomotiveScrollService.init(node);\r\n\t\t\t\tif (instance) {\r\n\t\t\t\t\tinstance.on('scroll', instance => {\r\n\t\t\t\t\t\tLocomotiveScrollService.scroll(instance.scroll.y);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst body = document.querySelector('body');\r\n\t\t\t\t\twindow.addEventListener('scroll', () => {\r\n\t\t\t\t\t\tconst y = body.scrollTop; // window.pageYOffset\r\n\t\t\t\t\t\tLocomotiveScrollService.scroll(y);\r\n\t\t\t\t\t}, true);\r\n\t\t\t\t}\r\n\t\t\t}, 1);\r\n\t\t};\r\n\t\t*/\r\n\t}\r\n\r\n}\r\n\r\nLocomotiveScrollDirective.meta = {\r\n\tselector: '[locomotive-scroll],[[locomotive-scroll]]'\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil, tap } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from './locomotive-scroll.service';\r\n\r\nexport class ScrollDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tif (LocomotiveScrollService.useLocomotiveScroll()) {\r\n\t\t\tthis.scroll$().pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(event => {\r\n\t\t\t\t// console.log('ScrollDirective', event);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tscroll$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst speed = this.scrollSpeed ? parseFloat(this.scrollSpeed) : 1.5;\r\n\t\treturn LocomotiveScrollService.scroll$.pipe(\r\n\t\t\ttap(scroll => {\r\n\t\t\t\tconst wh = window.innerHeight;\r\n\t\t\t\tconst wh2 = wh / 2;\r\n\t\t\t\tconst rect = node.getBoundingClientRect();\r\n\t\t\t\tconst currentY = gsap.getProperty(node, 'y');\r\n\t\t\t\tconst top = rect.top - currentY;\r\n\t\t\t\tconst bottom = rect.bottom - currentY;\r\n\t\t\t\tif (top < wh && bottom > 0) {\r\n\t\t\t\t\tconst pow = (top - wh2) / wh2;\r\n\t\t\t\t\tconst y = pow * speed * 40;\r\n\t\t\t\t\tgsap.set(node, { y });\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nScrollDirective.meta = {\r\n\tselector: '[scroll]',\r\n\tinputs: ['scrollSpeed'],\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { ModalService } from './modal.service';\r\n\r\nexport class ModalOutletComponent extends Component {\r\n\r\n\tget modal() {\r\n\t\treturn this.modal_;\r\n\t}\r\n\r\n\tset modal(modal) {\r\n\t\t// console.log('ModalOutletComponent set modal', modal, this);\r\n\t\tconst { module } = getContext(this);\r\n\t\tif (this.modal_ && this.modal_.node) {\r\n\t\t\tmodule.remove(this.modal_.node, this);\r\n\t\t\tthis.modalNode.removeChild(this.modal_.node);\r\n\t\t}\r\n\t\tif (modal && modal.node) {\r\n\t\t\tthis.modal_ = modal;\r\n\t\t\tthis.modalNode.appendChild(modal.node);\r\n\t\t\tconst instances = module.compile(modal.node);\r\n\t\t}\r\n\t\tthis.modal_ = modal;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tget busy() {\r\n\t\treturn this.busy_;\r\n\t}\r\n\r\n\tset busy(busy) {\r\n\t\t// console.log('ModalOutletComponent set busy', busy, this);\r\n\t\tif (this.busy_ !== busy) {\r\n\t\t\tthis.busy_ = busy;\r\n\t\t\tthis.pushChanges();\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.busy_ = false;\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.modalNode = node.querySelector('.modal-outlet__modal');\r\n\t\tModalService.modal$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(modal => this.modal = modal);\r\n\t\tModalService.busy$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(busy => this.busy = busy);\r\n\t}\r\n\r\n\treject(event) {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n}\r\n\r\nModalOutletComponent.meta = {\r\n\tselector: '[modal-outlet]',\r\n\ttemplate: /* html */ `\r\n\t<div class=\"modal-outlet__container\" [class]=\"{ active: modal, busy: busy }\">\r\n\t\t<div class=\"modal-outlet__background\" (click)=\"reject($event)\"></div>\r\n\t\t<div class=\"modal-outlet__modal\"></div>\r\n\t\t<!-- spinner -->\r\n\t\t<div class=\"spinner spinner--contrasted\" *if=\"busy\"></div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class NameDirective extends Directive {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('name', this.name);\r\n\t}\r\n\r\n}\r\n\r\nNameDirective.meta = {\r\n\tselector: '[name]',\r\n\tinputs: ['name']\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nexport class NumberPipe extends Pipe {\r\n\r\n\tstatic transform(value, options = {}, language = null) { // = 'en-IN'\r\n\t\tif (value != null) { // !!! keep losing\r\n\t\t\tlanguage = language || environment.currentLanguage;\r\n\t\t\treturn new Intl.NumberFormat(language, options).format(value);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nNumberPipe.meta = {\r\n\tname: 'number',\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nconst DIVISIONS = [\r\n\t{ amount: 60, name: 'seconds' },\r\n\t{ amount: 60, name: 'minutes' },\r\n\t{ amount: 24, name: 'hours' },\r\n\t{ amount: 7, name: 'days' },\r\n\t{ amount: 4.34524, name: 'weeks' },\r\n\t{ amount: 12, name: 'months' },\r\n\t{ amount: Number.POSITIVE_INFINITY, name: 'years' }\r\n];\r\n\r\nexport class RelativeDatePipe extends Pipe {\r\n\r\n\tstatic transform(value, options = { numeric: 'auto' }, language = null) { // = 'en-IN'\r\n\t\tif (value != null) { // !!! keep losing\r\n\t\t\tconst date = value instanceof Date ? value : new Date(value);\r\n\t\t\tlanguage = language || environment.currentLanguage;\r\n\t\t\tconst formatter = new Intl.RelativeTimeFormat(language, options);\r\n\t\t\tlet duration = (date - new Date()) / 1000;\r\n\t\t\tfor (let i = 0; i <= DIVISIONS.length; i++) {\r\n\t\t\t\tconst division = DIVISIONS[i];\r\n\t\t\t\tif (Math.abs(duration) < division.amount) {\r\n\t\t\t\t\treturn formatter.format(Math.round(duration), division.name);\r\n\t\t\t\t}\r\n\t\t\t\tduration /= division.amount;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nRelativeDatePipe.meta = {\r\n\tname: 'relativeDate',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { takeUntil, tap } from 'rxjs/operators';\r\n\r\nexport class ShareDirective extends Directive {\r\n\r\n\tget href() {\r\n\t\tswitch (this.share) {\r\n\t\t\tcase 'facebook':\r\n\t\t\t\treturn this.facebookUrl;\r\n\t\t\tcase 'pinterest':\r\n\t\t\t\treturn this.pinterestUrl;\r\n\t\t\tcase 'linkedIn':\r\n\t\t\t\treturn this.linkedInUrl;\r\n\t\t\tcase 'twitter':\r\n\t\t\t\treturn this.twitterUrl;\r\n\t\t\tcase 'whatsapp':\r\n\t\t\t\treturn this.whatsappUrl;\r\n\t\t\tcase 'mailTo':\r\n\t\t\t\treturn this.mailToUrl;\r\n\t\t}\r\n\t}\r\n\r\n\tget facebookUrl() {\r\n\t\treturn `https://www.facebook.com/sharer/sharer.php?u=${this.url}`;\r\n\t}\r\n\r\n\tget pinterestUrl() {\r\n\t\treturn `https://www.pinterest.com/pin/create/button/?url=${this.url}&media=&description=${this.title}`;\r\n\t}\r\n\r\n\tget linkedInUrl() {\r\n\t\treturn `https://www.linkedin.com/shareArticle?mini=true&url=${this.url}&title=${this.title}`;\r\n\t}\r\n\r\n\tget twitterUrl() {\r\n\t\treturn `https://twitter.com/intent/tweet?text=${this.title}%20${this.url}`;\r\n\t}\r\n\r\n\tget whatsappUrl() {\r\n\t\treturn `https://api.whatsapp.com/send?text=${this.url}`;\r\n\t}\r\n\r\n\tget mailToUrl() {\r\n\t\treturn `mailto:?subject=${this.title}&body=${this.url}`;\r\n\t}\r\n\r\n\tget title() {\r\n\t\tconst title = this.shareTitle ? this.shareTitle : document.title;\r\n\t\treturn this.encodeURI(title);\r\n\t}\r\n\r\n\tget url() {\r\n\t\tlet url = this.shareUrl;\r\n\t\tif (url) {\r\n\t\t\tif (url.indexOf(window.location.origin) === -1) {\r\n\t\t\t\turl = window.location.origin + (url.indexOf('/') === 0 ? url : ('/' + url));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\turl = window.location.href;\r\n\t\t}\r\n\t\treturn this.encodeURI(url);\r\n\t}\r\n\r\n\tonInit() {\r\n\t\t// console.log('ShareComponent.onInit', this.share, this.title);\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst href = this.href;\r\n\t\tnode.setAttribute('href', href);\r\n\t\tif (this.share !== 'mailTo') {\r\n\t\t\tnode.setAttribute('target', '_blank');\r\n\t\t\tfromEvent(node, 'click').pipe(\r\n\t\t\t\ttap(event => {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\twindow.open(href, 'ShareWindow', window.innerWidth >= 768 ? 'width=640,height=480' : '');\r\n\t\t\t\t}),\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe();\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\tonChanges() {\r\n\t\tconsole.log('ShareComponent.onChanges', this.share, this.shareTitle);\r\n\t}\r\n\t*/\r\n\r\n\tencodeURI(text) {\r\n\t\treturn encodeURIComponent(text).replace(/[!'()*]/g, function(c) {\r\n\t\t\treturn '%' + c.charCodeAt(0).toString(16);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nShareDirective.meta = {\r\n\tselector: '[share]',\r\n\tinputs: ['share', 'shareUrl', 'shareTitle'],\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nexport class SlugPipe extends Pipe {\r\n\r\n\tstatic transform(key) {\r\n\t\tconst slug = environment.slug;\r\n\t\treturn slug[key] || `#${key}`;\r\n\t}\r\n\r\n}\r\n\r\nSlugPipe.meta = {\r\n\tname: 'slug',\r\n};\r\n","import { getContext, Structure } from 'rxcomp';\r\n\r\nexport class SvgIconStructure extends Structure {\r\n\tonInit() {\r\n\t\tthis.update();\r\n\t}\r\n\tonChanges() {\r\n\t\tthis.update();\r\n\t}\r\n\tupdate() {\r\n\t\tif (this.name_ !== this.name) {\r\n\t\t\tthis.name_ = this.name;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tif (node.parentNode) {\r\n\t\t\t\tconst xmlns = 'http://www.w3.org/2000/svg';\r\n\t\t\t\tconst element = document.createElementNS(xmlns, `svg`);\r\n\t\t\t\tconst w = this.width || 24;\r\n\t\t\t\tconst h = this.height || 24;\r\n\t\t\t\telement.setAttribute('class', `icon--${this.name}`);\r\n\t\t\t\t// element.setAttributeNS(null, 'width', w);\r\n\t\t\t\t// element.setAttributeNS(null, 'height', h);\r\n\t\t\t\telement.setAttributeNS(null, 'viewBox', `0 0 ${w} ${h}`);\r\n\t\t\t\telement.innerHTML = `<use xlink:href=\"#${this.name}\"></use>`;\r\n\t\t\t\telement.rxcompId = node.rxcompId;\r\n\t\t\t\telement.classList.add(...node.classList);\r\n\t\t\t\tnode.parentNode.replaceChild(element, node);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nSvgIconStructure.meta = {\r\n\tselector: 'svg-icon',\r\n\tinputs: ['name', 'width', 'height']\r\n};\r\n\r\n/*\r\n<svg class=\"copy\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><use xlink:href=\"#copy\"></use></svg>\r\n*/\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { Subject } from 'rxjs';\r\n\r\nexport class SwiperDirective extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 'auto',\r\n\t\t\tspaceBetween: 0,\r\n\t\t\tcenteredSlides: true,\r\n\t\t\tspeed: 600,\r\n\t\t\tautoplay: {\r\n\t\t\t\tdelay: 5000,\r\n\t\t\t},\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t}\r\n\r\n\tget enabled() {\r\n\t\treturn !window.matchMedia('print').matches;\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tthis.swiperInitOrUpdate_();\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners_();\r\n\t\tthis.swiperDestroy_();\r\n\t}\r\n\r\n\tonBeforePrint() {\r\n\t\tthis.swiperDestroy_();\r\n\t}\r\n\r\n\tslideToIndex(index) {\r\n\t\t// console.log('SwiperDirective.slideToIndex', index);\r\n\t\tif (this.swiper) {\r\n\t\t\tthis.swiper.slideTo(index);\r\n\t\t}\r\n\t}\r\n\r\n\thasPrev() {\r\n\t\tconst swiper = this.swiper;\r\n\t\tif (swiper && swiper.activeIndex > 0 && swiper.slides.length > swiper.activeIndex) {\r\n\t\t\t// console.log('SwiperDirective.hasPrev', swiper.activeIndex, swiper.realIndex, swiper.slides);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\r\n\thasNext() {\r\n\t\tconst swiper = this.swiper;\r\n\t\tif (swiper) {\r\n\t\t\tconst slidesPerView = swiper.params.slidesPerView || 1;\r\n\t\t\t// console.log('SwiperDirective.hasNext', swiper.slides.length, swiper.params.slidesPerView);\r\n\t\t\tif (swiper.activeIndex < swiper.slides.length - slidesPerView) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tslidePrev() {\r\n\t\tconst swiper = this.swiper;\r\n\t\tif (this.hasPrev()) {\r\n\t\t\t// console.log('SwiperDirective.slidePrev', swiper.activeIndex, swiper.realIndex, swiper.slides);\r\n\t\t\tswiper.slideTo(swiper.activeIndex - 1);\r\n\t\t}\r\n\t}\r\n\r\n\tslideNext() {\r\n\t\tconst swiper = this.swiper;\r\n\t\tif (this.hasNext()) {\r\n\t\t\t// console.log('SwiperDirective.slideNext', swiper.activeIndex, swiper.realIndex, swiper.slides);\r\n\t\t\tswiper.slideTo(swiper.activeIndex + 1);\r\n\t\t}\r\n\t}\r\n\r\n\tinit_(target) {\r\n\t\tthis.events$ = new Subject();\r\n\t\tif (this.enabled) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\ttarget = target || node;\r\n\t\t\tthis.target = target;\r\n\t\t\tgsap.set(target, { opacity: 0 });\r\n\t\t\tthis.index = 0;\r\n\t\t\tconst on = this.options.on || {};\r\n\t\t\ton.slideChange = () => {\r\n\t\t\t\tconst swiper = this.swiper;\r\n\t\t\t\tif (swiper) {\r\n\t\t\t\t\tthis.index = swiper.activeIndex;\r\n\t\t\t\t\tthis.events$.next(this.index);\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.options.on = on;\r\n\t\t\tthis.addListeners_();\r\n\t\t}\r\n\t}\r\n\r\n\taddListeners_() {\r\n\t\tthis.onBeforePrint = this.onBeforePrint.bind(this);\r\n\t\twindow.addEventListener('beforeprint', this.onBeforePrint);\r\n\t\t/*\r\n\t\tscope.$on('onResize', ($scope) => {\r\n\t\t\tthis.onResize(scope, element, attributes);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\tremoveListeners_() {\r\n\t\twindow.removeEventListener('beforeprint', this.onBeforePrint);\r\n\t}\r\n\r\n\tswiperInitOrUpdate_() {\r\n\t\tif (this.enabled) {\r\n\t\t\tconst target = this.target;\r\n\t\t\tif (this.swiper) {\r\n\t\t\t\tthis.swiper.update();\r\n\t\t\t} else {\r\n\t\t\t\tlet swiper;\r\n\t\t\t\tconst on = this.options.on || (this.options.on = {});\r\n\t\t\t\tconst callback = on.init;\r\n\t\t\t\tif (!on.init || !on.init.swiperDirectiveInit) {\r\n\t\t\t\t\ton.init = function() {\r\n\t\t\t\t\t\tgsap.to(target, {\r\n\t\t\t\t\t\t\tduration: 0.4,\r\n\t\t\t\t\t\t\topacity: 1,\r\n\t\t\t\t\t\t\tease: Power2.easeOut,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tif (typeof callback === 'function') {\r\n\t\t\t\t\t\t\t\tcallback.apply(this, [swiper, element, scope]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, 1);\r\n\t\t\t\t\t};\r\n\t\t\t\t\ton.init.swiperDirectiveInit = true;\r\n\t\t\t\t}\r\n\t\t\t\tgsap.set(target, { opacity: 1 });\r\n\t\t\t\tswiper = new Swiper(target, this.options);\r\n\t\t\t\t// console.log(swiper);\r\n\t\t\t\tthis.swiper = swiper;\r\n\t\t\t\tthis.swiper._opening = true;\r\n\t\t\t\ttarget.classList.add('swiper-init');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tswiperDestroy_() {\r\n\t\tif (this.swiper) {\r\n\t\t\tthis.swiper.destroy();\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nSwiperDirective.meta = {\r\n\tselector: '[swiper]',\r\n\tinputs: ['consumer']\r\n};\r\n","import { fromEvent, of } from 'rxjs';\r\nimport { map, shareReplay } from 'rxjs/operators';\r\n\r\n// <!-- <script id=ta_bootstrapper src='https://gruppoconcorde-cdn.thron.com/shared/plugins/tracking/current/bootstrapper-min.js'></script> -->\r\n// <script src='https://gruppoconcorde-cdn.thron.com/shared/ce/bootstrap/1/scripts/embeds-min.js'></script>\r\n\r\nexport class ThronService {\r\n\r\n\tstatic thron$() {\r\n\t\tlet thron = window.THRONContentExperience || window.THRONPlayer;\r\n\t\tif (thron) {\r\n\t\t\treturn of(thron);\r\n\t\t} else {\r\n\t\t\tconst script = document.createElement('script');\r\n\t\t\tscript.setAttribute('type', 'text/javascript');\r\n\t\t\tscript.setAttribute('src', 'https://gruppoconcorde-cdn.thron.com/shared/ce/bootstrap/1/scripts/embeds-min.js')\r\n\t\t\tconst loaded$ = fromEvent(script, 'load').pipe(\r\n\t\t\t\t// tap(event => console.log(event, window.THRONContentExperience || window.THRONPlayer)),\r\n\t\t\t\tmap(event => window.THRONContentExperience || window.THRONPlayer),\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t);\r\n\t\t\treturn document.head.appendChild(script) && loaded$;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { first, tap } from 'rxjs/operators';\r\nimport { ThronService } from './thron.service';\r\n\r\nlet ID = 0;\r\n\r\nexport class ThronComponent extends Component {\r\n\r\n\tplaying_ = false;\r\n\tget playing() {\r\n\t\treturn this.playing_;\r\n\t}\r\n\tset playing(playing) {\r\n\t\tif (this.playing_ !== playing) {\r\n\t\t\tthis.playing_ = playing;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tif (node) {\r\n\t\t\t\tplaying ? node.classList.add('playing') : node.classList.remove('playing');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\t// console.log('ThronComponent.onInit');\r\n\t\tthis.init$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tinit$() {\r\n\t\treturn ThronService.thron$().pipe(\r\n\t\t\ttap(THRON => {\r\n\t\t\t\t// const THRON = window.THRONContentExperience || window.THRONPlayer;\r\n\t\t\t\tif (!THRON) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// console.log('THRONContentExperience', window.THRONContentExperience, 'THRONPlayer', window.THRONPlayer);\r\n\t\t\t\tconst { node } = getContext(this);\r\n\t\t\t\tconst target = this.target = node.querySelector('.video > .thron');\r\n\t\t\t\tconst id = target.id = `thron-${++ID}`;\r\n\t\t\t\tlet media = this.thron;\r\n\t\t\t\tif (media.indexOf('pkey=') === -1) {\r\n\t\t\t\t\tconst splitted = media.split('/');\r\n\t\t\t\t\tconst clientId = splitted[6];\r\n\t\t\t\t\tconst xcontentId = splitted[7];\r\n\t\t\t\t\tconst pkey = splitted[8];\r\n\t\t\t\t\tmedia = `https://gruppoconcorde-view.thron.com/api/xcontents/resources/delivery/getContentDetail?clientId=${clientId}&xcontentId=${xcontentId}&pkey=${pkey}`;\r\n\t\t\t\t}\r\n\t\t\t\tconst controls = this.controls = node.hasAttribute('controls') ? true : false,\r\n\t\t\t\t\tloop = this.loop = node.hasAttribute('loop') ? true : false,\r\n\t\t\t\t\tautoplay = this.autoplay = node.hasAttribute('autoplay') ? true : false;\r\n\t\t\t\tconst player = this.player = THRON(id, {\r\n\t\t\t\t\tmedia: media,\r\n\t\t\t\t\tloop: loop,\r\n\t\t\t\t\tautoplay: autoplay,\r\n\t\t\t\t\tmuted: !controls,\r\n\t\t\t\t\tdisplayLinked: 'close',\r\n\t\t\t\t\tnoSkin: !controls,\r\n\t\t\t\t\t// lockBitrate: 'max',\r\n\t\t\t\t});\r\n\t\t\t\tthis.onReady = this.onReady.bind(this);\r\n\t\t\t\tthis.onCanPlay = this.onCanPlay.bind(this);\r\n\t\t\t\tthis.onPlaying = this.onPlaying.bind(this);\r\n\t\t\t\tthis.onPlay = this.onPlay.bind(this);\r\n\t\t\t\tthis.onPause = this.onPause.bind(this);\r\n\t\t\t\tthis.onComplete = this.onComplete.bind(this);\r\n\t\t\t\tplayer.on('ready', this.onReady);\r\n\t\t\t\tplayer.on('canPlay', this.onCanPlay);\r\n\t\t\t\tplayer.on('playing', this.onPlaying);\r\n\t\t\t\tplayer.on('play', this.onPlay);\r\n\t\t\t\tplayer.on('pause', this.onPause);\r\n\t\t\t\tplayer.on('complete', this.onComplete);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tonReady() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tif (!this.controls) {\r\n\t\t\tconst mediaContainer = player.mediaContainer();\r\n\t\t\tconst video = mediaContainer.querySelector('video');\r\n\t\t\tvideo.setAttribute('playsinline', 'true');\r\n\t\t\tvideo.setAttribute('autoplay', 'true');\r\n\t\t}\r\n\t\tthis.ready.next(id);\r\n\t\t// video.setAttribute('autoplay', 'true');\r\n\t};\r\n\r\n\tonCanPlay() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\t// console.log('ThronDirective.onCanPlay', id);\r\n\t\tthis.canPlay.next(id);\r\n\t}\r\n\r\n\tonPlaying() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tplayer.off('playing', this.onPlaying);\r\n\t\tif (!this.controls) {\r\n\t\t\tconst qualities = player.qualityLevels();\r\n\t\t\t// console.log('ThronDirective.onPlaying', id, qualities);\r\n\t\t\tif (qualities.length) {\r\n\t\t\t\tconst highestQuality = qualities[qualities.length - 1].index;\r\n\t\t\t\tconst lowestQuality = qualities[0].index;\r\n\t\t\t\tplayer.currentQuality(highestQuality);\r\n\t\t\t\t// console.log('ThronDirective.onPlaying', id, 'currentQuality', player.currentQuality());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonPlay() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\t// console.log('ThronDirective.onComplete', id);\r\n\t\tthis.playing = true;\r\n\t\tthis.play.next(id);\r\n\t}\r\n\r\n\tonPause() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\t// console.log('ThronDirective.onComplete', id);\r\n\t\tthis.playing = false;\r\n\t\tthis.pause.next(id);\r\n\t}\r\n\r\n\tonComplete() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\t// console.log('ThronDirective.onComplete', id);\r\n\t\tthis.playing = false;\r\n\t\tthis.complete.next(id);\r\n\t}\r\n\r\n\tplayVideo() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tconst status = player.status();\r\n\t\t// console.log('ThronDirective.playVideo', id, status);\r\n\t\tif (status && !status.playing) {\r\n\t\t\tplayer.play();\r\n\t\t}\r\n\t}\r\n\r\n\tpauseVideo() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tconst status = player.status();\r\n\t\t// console.log('ThronDirective.pauseVideo', id, status);\r\n\t\tif (status && status.playing) {\r\n\t\t\tplayer.pause();\r\n\t\t}\r\n\t}\r\n\r\n\ttoggle() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tconst status = player.status();\r\n\t\t// console.log('ThronDirective.pauseVideo', id, status);\r\n\t\tif (status && status.playing) {\r\n\t\t\tplayer.pause();\r\n\t\t} else {\r\n\t\t\tplayer.play();\r\n\t\t}\r\n\t}\r\n\r\n\tplay(id) {\r\n\t\t// console.log('ThronDirective.play', id, id, id === id);\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (id === this.target.id) {\r\n\t\t\tthis.playVideo();\r\n\t\t}\r\n\t}\r\n\r\n\tpause(id) {\r\n\t\t// console.log('ThronDirective.pause', id, id, id === id);\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (id === this.target.id) {\r\n\t\t\tthis.pauseVideo();\r\n\t\t}\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tconst player = this.player;\r\n\t\tif (player) {\r\n\t\t\tplayer.off('ready', this.onReady);\r\n\t\t\tplayer.off('canPlay', this.onCanPlay);\r\n\t\t\tplayer.off('playing', this.onPlaying);\r\n\t\t\tplayer.off('play', this.onPlay);\r\n\t\t\tplayer.off('pause', this.onPause);\r\n\t\t\tplayer.off('complete', this.onComplete);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nThronComponent.meta = {\r\n\tselector: '[thron],[[thron]]',\r\n\toutputs: ['ready', 'canPlay', 'play', 'pause', 'complete'],\r\n\tinputs: ['thron', 'm3u8'],\r\n\ttemplate: /* html */``,\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class TitleDirective extends Directive {\r\n\tset title(title) {\r\n\t\tif (this.title_ !== title) {\r\n\t\t\tthis.title_ = title;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\ttitle ? node.setAttribute('title', title) : node.removeAttribute('title');\r\n\t\t}\r\n\t}\r\n\tget title() {\r\n\t\treturn this.title_;\r\n\t}\r\n}\r\n\r\nTitleDirective.meta = {\r\n\tselector: '[[title]]',\r\n\tinputs: ['title'],\r\n};\r\n","import { Module } from 'rxcomp';\r\nimport { ClickOutsideDirective } from './click-outside/click-outside.directive';\r\nimport { DatePipe } from './date/date.pipe';\r\nimport { DownloadDirective } from './download/download.directive';\r\nimport { DropdownItemDirective } from './dropdown/dropdown-item.directive';\r\nimport { DropdownDirective } from './dropdown/dropdown.directive';\r\nimport { EnvPipe } from './env/env.pipe';\r\nimport { FilterItemComponent } from './filter/filter-item.component';\r\nimport { FlagPipe } from './flag/flag.pipe';\r\nimport { HighlightPipe } from './highlight/highlight.pipe';\r\nimport { HtmlPipe } from './html/html.pipe';\r\nimport { IdDirective } from './id/id.directive';\r\nimport { LabelForDirective } from './label-for/label-for.directive';\r\nimport { LabelPipe } from './label/label.pipe';\r\nimport { LocomotiveScrollStickyDirective } from './locomotive-scroll/locomotive-scroll-sticky.directive';\r\nimport { LocomotiveScrollToDirective } from './locomotive-scroll/locomotive-scroll-to.directive';\r\nimport { LocomotiveScrollDirective } from './locomotive-scroll/locomotive-scroll.directive';\r\nimport { ScrollDirective } from './locomotive-scroll/scroll.directive';\r\nimport { ModalOutletComponent } from './modal/modal-outlet.component';\r\nimport { NameDirective } from './name/name.directive';\r\nimport { NumberPipe } from './number/number.pipe';\r\nimport { RelativeDatePipe } from './relative-date/relative-date.pipe';\r\nimport { ShareDirective } from './share/share.directive';\r\nimport { SlugPipe } from './slug/slug.pipe';\r\nimport { SvgIconStructure } from './svg/svg-icon.structure';\r\nimport { SwiperDirective } from './swiper/swiper.directive';\r\nimport { ThronComponent } from './thron/thron.component';\r\nimport { TitleDirective } from './title/title.directive';\r\n\r\nconst factories = [\r\n\tClickOutsideDirective,\r\n\tDownloadDirective,\r\n\t// DropDirective,\r\n\tDropdownDirective,\r\n\tDropdownItemDirective,\r\n\t// DropdownItemDirective,\r\n\tFilterItemComponent,\r\n\tIdDirective,\r\n\tLabelForDirective,\r\n\t// LanguageComponent,\r\n\t// LazyDirective,\r\n\tLocomotiveScrollDirective,\r\n\tLocomotiveScrollStickyDirective,\r\n\tLocomotiveScrollToDirective,\r\n\t// ModalComponent,\r\n\tModalOutletComponent,\r\n\tNameDirective,\r\n\tScrollDirective,\r\n\tShareDirective,\r\n\tSvgIconStructure,\r\n\tSwiperDirective,\r\n\tThronComponent,\r\n\tTitleDirective,\r\n\t// UploadItemComponent,\r\n\t// VirtualStructure\r\n];\r\n\r\nconst pipes = [\r\n\tDatePipe,\r\n\tEnvPipe,\r\n\tFlagPipe,\r\n\tHighlightPipe,\r\n\tHtmlPipe,\r\n\tLabelPipe,\r\n\tNumberPipe,\r\n\tRelativeDatePipe,\r\n\tSlugPipe,\r\n];\r\n\r\nexport class CommonModule extends Module { }\r\n\r\nCommonModule.meta = {\r\n\timports: [\r\n\t],\r\n\tdeclarations: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n\texports: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\n\r\nexport class ControlComponent extends Component {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\t// console.log(this, node, this.control);\r\n\t\tconst control = this.control;\r\n\t\tconst flags = control.flags;\r\n\t\tObject.keys(flags).forEach((key) => {\r\n\t\t\tflags[key] ? node.classList.add(key) : node.classList.remove(key);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nControlComponent.meta = {\r\n\tselector: '[control]',\r\n\tinputs: ['control']\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { from, fromEvent, merge } from 'rxjs';\r\nimport { switchMap, takeUntil, tap } from 'rxjs/operators';\r\nimport { ModalService } from '../common/modal/modal.service';\r\nimport { environment } from '../environment';\r\nimport { ControlComponent } from './control.component';\r\n\r\nexport class ControlCheckboxComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t\tif (this.target === 'modal') {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.link$().pipe(\r\n\t\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t\t).subscribe();\r\n\t\t\t}, 1);\r\n\t\t}\r\n\t}\r\n\r\n\tlink$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst anchors = Array.prototype.slice.call(node.querySelectorAll('a'));\r\n\t\t// console.log(anchors, node.innerHTML);\r\n\t\treturn merge(...anchors.map(anchor => fromEvent(anchor, 'click'))).pipe(\r\n\t\t\tswitchMap(event => {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t// console.log('UserDetailComponent.onModalUserUpdate');\r\n\t\t\t\tconst anchor = event.target;\r\n\t\t\t\tconst href = anchor.getAttribute('href');\r\n\t\t\t\t// console.log('ControlCheckboxComponent.link$.href', href);\r\n\t\t\t\treturn from(fetch(href).then(response => response.text()));\r\n\t\t\t}),\r\n\t\t\ttap(html => {\r\n\t\t\t\t// console.log('ControlCheckboxComponent.link$.html', html);\r\n\t\t\t\tconst parser = new DOMParser();\r\n\t\t\t\tconst htmlDocument = parser.parseFromString(html, 'text/html');\r\n\t\t\t\t// console.log('ControlCheckboxComponent.link$.htmlDocument', htmlDocument);\r\n\t\t\t\tlet title = htmlDocument.querySelector('.section--intro-sm .title');\r\n\t\t\t\ttitle = title ? title.innerHTML : null;\r\n\t\t\t\tlet abstract = htmlDocument.querySelector('.section--intro-sm .descritpion');\r\n\t\t\t\tabstract = abstract ? abstract.innerHTML : null;\r\n\t\t\t\tlet description = htmlDocument.querySelector('.section--text .col-md-6');\r\n\t\t\t\tdescription = description ? description.innerHTML : null;\r\n\t\t\t\tModalService.open$({ src: environment.template.modal.genericModal, data: { title: title, abstract: abstract, description: description } }).pipe(\r\n\t\t\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t\t\t).subscribe(event => {\r\n\t\t\t\t\t// console.log('ControlCheckboxComponent.link$.genericModal', event);\r\n\t\t\t\t});\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nControlCheckboxComponent.meta = {\r\n\tselector: '[control-checkbox]',\r\n\tinputs: ['control', 'label', 'target'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--checkbox\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<input [id]=\"control.name\" type=\"checkbox\" class=\"control--checkbox\" [formControl]=\"control\" [value]=\"true\" />\r\n\t\t\t<label [labelFor]=\"control.name\">\r\n\t\t\t\t<svg class=\"icon icon--checkbox\"><use xlink:href=\"#checkbox\"></use></svg>\r\n\t\t\t\t<svg class=\"icon icon--checkbox-checked\"><use xlink:href=\"#checkbox-checked\"></use></svg>\r\n\t\t\t\t<span [innerHTML]=\"label | html\"></span>\r\n\t\t\t\t<span class=\"required__sign\">*</span>\r\n\t\t\t</label>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { fromEvent, merge } from 'rxjs';\r\nimport { filter, map, shareReplay, startWith } from 'rxjs/operators';\r\n\r\nexport class KeyboardService {\r\n\r\n\tstatic keys = {};\r\n\r\n\tstatic keydown$() {\r\n\t\tif (!this.keydown$_) {\r\n\t\t\tthis.keydown$_ = fromEvent(window, 'keydown').pipe(\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn this.keydown$_;\r\n\t}\r\n\r\n\tstatic keyup$() {\r\n\t\tif (!this.keyup$_) {\r\n\t\t\tthis.keyup$_ = fromEvent(window, 'keyup').pipe(\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn this.keyup$_;\r\n\t}\r\n\r\n\tstatic keys$() {\r\n\t\tif (!this.keys$_) {\r\n\t\t\tthis.keys$_ = merge(this.keydown$(), this.keyup$()).pipe(\r\n\t\t\t\tmap(event => {\r\n\t\t\t\t\tconst keys = this.keys;\r\n\t\t\t\t\tif (event.type === 'keydown') {\r\n\t\t\t\t\t\tkeys[event.key] = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdelete keys[event.key];\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn this.keys;\r\n\t\t\t\t}),\r\n\t\t\t\tstartWith(this.keys),\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn this.keys$_;\r\n\t}\r\n\r\n\tstatic key$() {\r\n\t\tif (!this.key$_) {\r\n\t\t\tconst regexp = /\\w/;\r\n\t\t\tthis.key$_ = this.keydown$().pipe(\r\n\t\t\t\tfilter(event => event.key && event.key.match(regexp)),\r\n\t\t\t\tmap(event => event.key),\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn this.key$_;\r\n\t}\r\n\r\n\tstatic typing$() {\r\n\t\tif (!this.typing$_) {\r\n\t\t\tlet typing = '',\r\n\t\t\t\tto;\r\n\t\t\tthis.typing$_ = this.key$().pipe(\r\n\t\t\t\tmap(key => {\r\n\t\t\t\t\tif (to) {\r\n\t\t\t\t\t\tclearTimeout(to);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttyping += key;\r\n\t\t\t\t\tto = setTimeout(() => {\r\n\t\t\t\t\t\ttyping = '';\r\n\t\t\t\t\t}, 1500);\r\n\t\t\t\t\treturn typing;\r\n\t\t\t\t}),\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn this.typing$_;\r\n\t}\r\n\r\n}\r\n","import { getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { DropdownDirective } from '../common/dropdown/dropdown.directive';\r\nimport { KeyboardService } from '../common/keyboard/keyboard.service';\r\nimport { ControlComponent } from './control.component';\r\n\r\nexport class ControlCustomSelectComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t\tthis.dropped = false;\r\n\t\tthis.dropdownId = DropdownDirective.nextId();\r\n\t\tKeyboardService.typing$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(word => {\r\n\t\t\tthis.scrollToWord(word);\r\n\t\t});\r\n\t\t/*\r\n\t\tKeyboardService.key$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(key => {\r\n\t\t\tthis.scrollToKey(key);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\t/*\r\n\tonChanges() {\r\n\t\t// console.log('ControlCustomSelectComponent.onChanges');\r\n\t}\r\n\t*/\r\n\r\n\tscrollToWord(word) {\r\n\t\t// console.log('ControlCustomSelectComponent.scrollToWord', word);\r\n\t\tconst items = this.control.options || [];\r\n\t\tlet index = -1;\r\n\t\tfor (let i = 0; i < items.length; i++) {\r\n\t\t\tconst x = items[i];\r\n\t\t\tif (x.name.toLowerCase().indexOf(word.toLowerCase()) === 0) {\r\n\t\t\t\t// console.log(word, x.name);\r\n\t\t\t\tindex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (index !== -1) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tconst dropdown = node.querySelector('.dropdown');\r\n\t\t\tconst navDropdown = node.querySelector('.nav--dropdown');\r\n\t\t\tconst item = navDropdown.children[index];\r\n\t\t\tdropdown.scrollTo(0, item.offsetTop);\r\n\t\t}\r\n\t}\r\n\r\n\tsetOption(item) {\r\n\t\t// console.log('setOption', item, this.isMultiple);\r\n\t\tlet value;\r\n\t\tif (this.isMultiple) {\r\n\t\t\tconst value = this.control.value || [];\r\n\t\t\tconst index = value.indexOf(item.id);\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\t// if (value.length > 1) {\r\n\t\t\t\tvalue.splice(index, 1);\r\n\t\t\t\t// }\r\n\t\t\t} else {\r\n\t\t\t\tvalue.push(item.id);\r\n\t\t\t}\r\n\t\t\tvalue = value.length ? value.slice() : null;\r\n\t\t} else {\r\n\t\t\tvalue = item.id;\r\n\t\t\t// DropdownDirective.dropdown$.next(null);\r\n\t\t}\r\n\t\tthis.control.value = value;\r\n\t\tthis.change.next(value);\r\n\t}\r\n\r\n\thasOption(item) {\r\n\t\tif (this.isMultiple) {\r\n\t\t\tconst values = this.control.value || [];\r\n\t\t\treturn values.indexOf(item.id) !== -1;\r\n\t\t} else {\r\n\t\t\treturn this.control.value === item.id;\r\n\t\t}\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tlet value = this.control.value;\r\n\t\tconst items = this.control.options || [];\r\n\t\tif (this.isMultiple) {\r\n\t\t\tvalue = value || [];\r\n\t\t\tif (value.length) {\r\n\t\t\t\treturn value.map(v => {\r\n\t\t\t\t\tconst item = items.find(x => x.id === v || x.name === v);\r\n\t\t\t\t\treturn item ? item.name : '';\r\n\t\t\t\t}).join(', ');\r\n\t\t\t} else {\r\n\t\t\t\treturn this.select || 'select'; // LabelPipe.transform('select');\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst item = value ? items.find(x => x.id === value || x.name === value) : null;\r\n\t\t\tif (item) {\r\n\t\t\t\treturn item.name;\r\n\t\t\t} else {\r\n\t\t\t\treturn this.select || 'select'; // LabelPipe.transform('select');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDropped($event) {\r\n\t\t// console.log('ControlCustomSelectComponent.onDropped', id);\r\n\t\tif (this.dropped && $event === null) {\r\n\t\t\tthis.control.touched = true;\r\n\t\t}\r\n\t\tthis.dropped = $event === this.dropdownId;\r\n\t}\r\n\r\n\tget isMultiple() {\r\n\t\treturn this.multiple && this.multiple !== false && this.multiple !== 'false';\r\n\t}\r\n\r\n}\r\n\r\nControlCustomSelectComponent.meta = {\r\n\tselector: '[control-custom-select]',\r\n\toutputs: ['change'],\r\n\tinputs: ['control', 'label', 'multiple', 'select'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--select\" [class]=\"{ required: control.validators.length, multiple: isMultiple }\" [dropdown]=\"dropdownId\" (dropped)=\"onDropped($event)\">\r\n\t\t\t<label><span [innerHTML]=\"label\"></span> <span class=\"required__sign\">*</span></label>\r\n\t\t\t<span class=\"control--custom-select\" [innerHTML]=\"getLabel() | label\"></span>\r\n\t\t\t<svg class=\"caret-down\"><use xlink:href=\"#caret-down\"></use></svg>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t\t<div class=\"dropdown\" [dropdown-item]=\"dropdownId\">\r\n\t\t\t<div class=\"category\" [innerHTML]=\"label\"></div>\r\n\t\t\t<ul class=\"nav--dropdown\" [class]=\"{ multiple: isMultiple }\">\r\n\t\t\t\t<li (click)=\"setOption(item)\" [class]=\"{ empty: item.id == null }\" *for=\"let item of control.options\">\r\n\t\t\t\t\t<span [class]=\"{ active: hasOption(item) }\" [innerHTML]=\"item.name | label\"></span>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlEmailComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t}\r\n\r\n}\r\n\r\nControlEmailComponent.meta = {\r\n\tselector: '[control-email]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [labelFor]=\"control.name\"><span [innerHTML]=\"label\"></span> <span class=\"required__sign\">*</span></label>\r\n\t\t\t<input [id]=\"control.name\" type=\"text\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" required email />\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlFileComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t\tthis.labels = window.labels || {};\r\n\t\tthis.file = null;\r\n\t\tthis.onReaderComplete = this.onReaderComplete.bind(this);\r\n\t}\r\n\r\n\tonInputDidChange(event) {\r\n\t\tconst input = event.target;\r\n\t\tconst file = input.files[0];\r\n\t\tthis.file = {\r\n\t\t\tname: file.name,\r\n\t\t\tlastModified: file.lastModified,\r\n\t\t\tlastModifiedDate: file.lastModifiedDate,\r\n\t\t\tsize: file.size,\r\n\t\t\ttype: file.type,\r\n\t\t}\r\n\t\tconst reader = new FileReader();\r\n\t\treader.addEventListener('load', this.onReaderComplete);\r\n\t\treader.readAsDataURL(file);\r\n\t\t// reader.readAsArrayBuffer() // Starts reading the contents of the specified Blob, once finished, the result attribute contains an ArrayBuffer representing the file's data.\r\n\t\t// reader.readAsBinaryString() // Starts reading the contents of the specified Blob, once finished, the result attribute contains the raw binary data from the file as a string.\r\n\t\t// reader.readAsDataURL() // Starts reading the contents of the specified Blob, once finished, the result attribute contains a data: URL representing the file's data.\r\n\t\t// reader.readAsText() // Starts reading the contents of the specified Blob, once finished, the result attribute contains the contents of the file as a text string. An optional encoding name can be specified.\r\n\t}\r\n\r\n\tonReaderComplete(event) {\r\n\t\tconst content = event.target.result;\r\n\t\tthis.file.content = content;\r\n\t\tthis.control.value = this.file;\r\n\t\t// console.log('ControlFileComponent.onReaderComplete', this.file);\r\n\t\t// image/*,\r\n\t}\r\n\r\n}\r\n\r\nControlFileComponent.meta = {\r\n\tselector: '[control-file]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--file\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label for=\"file\"><span [innerHTML]=\"label\"></span> <span class=\"required__sign\">*</span></label>\r\n\t\t\t<span class=\"control--text\" [innerHTML]=\"file?.name || labels.select_file\"></span>\r\n\t\t\t<svg class=\"upload\"><use xlink:href=\"#upload\"></use></svg>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t\t<input name=\"file\" type=\"file\" accept=\".pdf,.doc,.docx,*.txt\" class=\"control--file\" (change)=\"onInputDidChange($event)\" />\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { ControlComponent } from './control.component';\r\n\r\nexport class ControlPasswordComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (node.hasAttribute('secure')) {\r\n\t\t\t// const name = [...\"abcdefghijklmnopqrsuvwxyz0123456789\"].map((c, i, a) => a[Math.floor(Math.random() * a.length)]).join('');\r\n\t\t\tconst input = node.querySelector('input');\r\n\t\t\tinput.setAttribute('autocomplete', 'new-password');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nControlPasswordComponent.meta = {\r\n\tselector: '[control-password]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [labelFor]=\"control.name\"><span [innerHTML]=\"label\"></span> <span class=\"required__sign\">*</span></label>\r\n\t\t\t<input [id]=\"control.name\" type=\"password\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" />\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { from, fromEvent, merge } from 'rxjs';\r\nimport { switchMap, takeUntil, tap } from 'rxjs/operators';\r\nimport { ModalService } from '../common/modal/modal.service';\r\nimport { environment } from '../environment';\r\nimport { ControlComponent } from './control.component';\r\n\r\nexport class ControlPrivacyComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t\tif (this.target === 'modal') {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.link$().pipe(\r\n\t\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t\t).subscribe();\r\n\t\t\t}, 1);\r\n\t\t}\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst inputs = Array.prototype.slice.call(node.querySelectorAll('input'));\r\n\t\tinputs.forEach((input, i) => {\r\n\t\t\t(this.control.value === true && i === 0) || (this.control.value === false && i === 1) ? input.setAttribute('checked', '') : input.removeAttribute('checked');\r\n\t\t});\r\n\t}\r\n\r\n\tonSelect(value) {\r\n\t\tthis.control.value = value;\r\n\t}\r\n\r\n\tlink$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst anchors = Array.prototype.slice.call(node.querySelectorAll('a'));\r\n\t\t// console.log(anchors, node.innerHTML);\r\n\t\treturn merge(...anchors.map(anchor => fromEvent(anchor, 'click'))).pipe(\r\n\t\t\tswitchMap(event => {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t// console.log('UserDetailComponent.onModalUserUpdate');\r\n\t\t\t\tconst anchor = event.target;\r\n\t\t\t\tconst href = anchor.getAttribute('href');\r\n\t\t\t\t// console.log('ControlPrivacyComponent.link$.href', href);\r\n\t\t\t\treturn from(fetch(href).then(response => response.text()));\r\n\t\t\t}),\r\n\t\t\ttap(html => {\r\n\t\t\t\t// console.log('ControlPrivacyComponent.link$.html', html);\r\n\t\t\t\tconst parser = new DOMParser();\r\n\t\t\t\tconst htmlDocument = parser.parseFromString(html, 'text/html');\r\n\t\t\t\t// console.log('ControlPrivacyComponent.link$.htmlDocument', htmlDocument);\r\n\t\t\t\tlet title = htmlDocument.querySelector('.section--intro-sm .title');\r\n\t\t\t\ttitle = title ? title.innerHTML : null;\r\n\t\t\t\tlet abstract = htmlDocument.querySelector('.section--intro-sm .descritpion');\r\n\t\t\t\tabstract = abstract ? abstract.innerHTML : null;\r\n\t\t\t\tlet description = htmlDocument.querySelector('.section--text .col-md-6');\r\n\t\t\t\tdescription = description ? description.innerHTML : null;\r\n\t\t\t\tModalService.open$({ src: environment.template.modal.genericModal, data: { title: title, abstract: abstract, description: description } }).pipe(\r\n\t\t\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t\t\t).subscribe(event => {\r\n\t\t\t\t\t// console.log('ControlPrivacyComponent.link$.genericModal', event);\r\n\t\t\t\t});\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nControlPrivacyComponent.meta = {\r\n\tselector: '[control-privacy]',\r\n\tinputs: ['control', 'label', 'target'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--privacy\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<div class=\"group--inputs\">\r\n\t\t\t\t<input type=\"radio\" class=\"control--checkbox\" [id]=\"control.name + '_true'\" [name]=\"control.name\" [value]=\"true\" (change)=\"onSelect(true)\" />\r\n\t\t\t\t<label [labelFor]=\"control.name + '_true'\">\r\n\t\t\t\t\t<svg class=\"icon icon--checkbox\"><use xlink:href=\"#checkbox\"></use></svg>\r\n\t\t\t\t\t<svg class=\"icon icon--checkbox-checked\"><use xlink:href=\"#checkbox-checked\"></use></svg>\r\n\t\t\t\t\t<span>Acconsento</span>\r\n\t\t\t\t</label>\r\n\t\t\t\t<input type=\"radio\" class=\"control--checkbox\" [id]=\"control.name + '_false'\" [name]=\"control.name\" [value]=\"false\" (change)=\"onSelect(false)\" />\r\n\t\t\t\t<label [labelFor]=\"control.name + '_false'\">\r\n\t\t\t\t\t<svg class=\"icon icon--checkbox\"><use xlink:href=\"#checkbox\"></use></svg>\r\n\t\t\t\t\t<svg class=\"icon icon--checkbox-checked\"><use xlink:href=\"#checkbox-checked\"></use></svg>\r\n\t\t\t\t\t<span>Non acconsento</span>\r\n\t\t\t\t</label>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"description\">\r\n\t\t\t\t<span [innerHTML]=\"label | html\"></span>\r\n\t\t\t\t<span class=\"required__sign\">*</span>\r\n\t\t\t</div>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlSearchComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t\tthis.disabled = this.disabled || false;\r\n\t}\r\n\r\n}\r\n\r\nControlSearchComponent.meta = {\r\n\tselector: '[control-search]',\r\n\tinputs: ['control', 'label', 'disabled'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length, disabled: disabled }\">\r\n\t\t\t<svg class=\"search\"><use xlink:href=\"#search\"></use></svg>\r\n\t\t\t<input type=\"text\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" [disabled]=\"disabled\" />\r\n\t\t</div>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlTextComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t\tthis.disabled = this.disabled || false;\r\n\t}\r\n\r\n}\r\n\r\nControlTextComponent.meta = {\r\n\tselector: '[control-text]',\r\n\tinputs: ['control', 'label', 'disabled'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length, disabled: disabled }\">\r\n\t\t\t<label [labelFor]=\"control.name\"><span [innerHTML]=\"label\"></span> <span class=\"required__sign\">*</span></label>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t\t<input [id]=\"control.name\" type=\"text\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" [disabled]=\"disabled\" />\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlTextareaComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t\tthis.disabled = this.disabled || false;\r\n\t}\r\n\r\n}\r\n\r\nControlTextareaComponent.meta = {\r\n\tselector: '[control-textarea]',\r\n\tinputs: ['control', 'label', 'disabled'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--textarea\" [class]=\"{ required: control.validators.length, disabled: disabled }\">\r\n\t\t\t<label [labelFor]=\"control.name\"><span [innerHTML]=\"label\"></span> <span class=\"required__sign\">*</span></label>\r\n\t\t\t<textarea [id]=\"control.name\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" [innerHTML]=\"label\" rows=\"4\" [disabled]=\"disabled\"></textarea>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { LabelPipe } from '../common/label/label.pipe';\r\nimport { ControlComponent } from './control.component';\r\n\r\nexport class ErrorsComponent extends ControlComponent {\r\n\r\n\tgetLabel(key, value) {\r\n\t\tconst label = LabelPipe.transform(`error_${key}`);\r\n\t\treturn label;\r\n\t}\r\n\r\n}\r\n\r\nErrorsComponent.meta = {\r\n\tselector: 'errors-component',\r\n\tinputs: ['control'],\r\n\ttemplate: /* html */ `\r\n\t<div class=\"inner\" [style]=\"{ display: control.invalid && control.touched ? 'block' : 'none' }\">\r\n\t\t<div class=\"error\" *for=\"let [key, value] of control.errors\">\r\n\t\t\t<span [innerHTML]=\"getLabel(key, value)\"></span>\r\n\t\t\t<!-- <span class=\"key\" [innerHTML]=\"key\"></span> <span class=\"value\" [innerHTML]=\"value | json\"></span> -->\r\n\t\t</div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Component } from 'rxcomp';\r\n\r\nexport class TestComponent extends Component {\r\n\r\n\tonTest(event) {\r\n\t\tthis.test.next(event);\r\n\t}\r\n\r\n\tonReset(event) {\r\n\t\tthis.reset.next(event);\r\n\t}\r\n\r\n}\r\n\r\nTestComponent.meta = {\r\n\tselector: 'test-component',\r\n\tinputs: ['form'],\r\n\toutputs: ['test', 'reset'],\r\n\ttemplate: /* html */ `\r\n\t<div class=\"test-component\" *if=\"!('production' | flag)\">\r\n\t\t<div class=\"test-component__title\">development mode</div>\r\n\t\t<code [innerHTML]=\"form.value | json\"></code>\r\n\t\t<button type=\"button\" class=\"btn--submit\" (click)=\"onTest($event)\"><span>test</span></button>\r\n\t\t<button type=\"button\" class=\"btn--submit\" (click)=\"onReset($event)\"><span>reset</span></button>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Module } from 'rxcomp';\r\nimport { ControlCheckboxComponent } from './control-checkbox.component';\r\nimport { ControlCustomSelectComponent } from './control-custom-select.component';\r\nimport { ControlEmailComponent } from './control-email.component';\r\nimport { ControlFileComponent } from './control-file.component';\r\nimport { ControlPasswordComponent } from './control-password.component';\r\nimport { ControlPrivacyComponent } from './control-privacy.component';\r\nimport { ControlSearchComponent } from './control-search.component';\r\nimport { ControlTextComponent } from './control-text.component';\r\nimport { ControlTextareaComponent } from './control-textarea.component';\r\nimport { ErrorsComponent } from './errors.component';\r\nimport { TestComponent } from './test.component';\r\n\r\nconst factories = [\r\n\tControlCheckboxComponent,\r\n\tControlCustomSelectComponent,\r\n\tControlEmailComponent,\r\n\tControlFileComponent,\r\n\tControlPasswordComponent,\r\n\tControlPrivacyComponent,\r\n\t// ControlSelectComponent,\r\n\tControlSearchComponent,\r\n\tControlTextareaComponent,\r\n\tControlTextComponent,\r\n\t// DisabledDirective,\r\n\tErrorsComponent,\r\n\tTestComponent,\r\n\t// ValueDirective,\r\n];\r\n\r\nconst pipes = [\r\n];\r\n\r\nexport class ControlsModule extends Module { }\r\n\r\nControlsModule.meta = {\r\n\timports: [\r\n\t],\r\n\tdeclarations: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n\texports: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n};\r\n","import { BehaviorSubject } from 'rxjs';\r\n\r\nexport const FilterMode = {\r\n\tSELECT: 'select',\r\n\tAND: 'and',\r\n\tOR: 'or',\r\n\tQUERY: 'query',\r\n};\r\n\r\nexport class FilterItem {\r\n\r\n\tconstructor(filter) {\r\n\t\tthis.change$ = new BehaviorSubject();\r\n\t\tthis.mode = FilterMode.SELECT;\r\n\t\tthis.filter = 'Filter';\r\n\t\tthis.placeholder = null;\r\n\t\tthis.values = [];\r\n\t\tthis.options = [];\r\n\t\tif (filter) {\r\n\t\t\tObject.assign(this, filter);\r\n\t\t}\r\n\t\tif (filter.mode === FilterMode.SELECT) {\r\n\t\t\tfilter.options.unshift({\r\n\t\t\t\tlabel: 'select',\r\n\t\t\t\tvalue: undefined,\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfilter(item, value) {\r\n\t\treturn item.options.indexOf(value) !== -1;\r\n\t}\r\n\r\n\tmatch(item) {\r\n\t\tlet match;\r\n\t\tif (this.mode === FilterMode.OR) {\r\n\t\t\tmatch = this.values.length ? false : true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match || this.filter(item, value);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tmatch = true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match && this.filter(item, value);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn match;\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tif (this.hasAny()) {\r\n\t\t\treturn this.options.filter(x => x.value && this.values.indexOf(x.value) !== -1).map(x => x.label).join(', ');\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\t/*\r\n\t\tif (this.mode === FilterMode.QUERY) {\r\n\t\t\treturn this.label;\r\n\t\t\t// return this.placeholder || this.label;\r\n\t\t} else if (this.mode === FilterMode.SELECT) {\r\n\t\t\tif (this.hasAny()) {\r\n\t\t\t\treturn this.options.filter(x => x.value && this.values.indexOf(x.value) !== -1).map(x => x.label).join(', ');\r\n\t\t\t} else {\r\n\t\t\t\treturn this.label;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn this.label;\r\n\t\t}\r\n\t\t*/\r\n\t}\r\n\r\n\thasAny() {\r\n\t\treturn this.values.length > 0;\r\n\t}\r\n\r\n\thas(item) {\r\n\t\treturn this.values.indexOf(item.value) !== -1;\r\n\t}\r\n\r\n\tset(item) {\r\n\t\tif (this.mode === FilterMode.QUERY) {\r\n\t\t\tthis.values = item ? [item] : [];\r\n\t\t\t// this.placeholder = item;\r\n\t\t} else {\r\n\t\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\t\tthis.values = [];\r\n\t\t\t}\r\n\t\t\tconst index = this.values.indexOf(item.value);\r\n\t\t\tif (index === -1) {\r\n\t\t\t\tif (item.value != null) {\r\n\t\t\t\t\tthis.values.push(item.value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t/*\r\n\t\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\t\tthis.placeholder = item.label;\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t}\r\n\t\t// console.log('FilterItem.set', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\tremove(item) {\r\n\t\tconst index = this.values.indexOf(item.value);\r\n\t\tif (index !== -1) {\r\n\t\t\tthis.values.splice(index, 1);\r\n\t\t}\r\n\t\t/*\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst first = this.options[0];\r\n\t\t\tthis.placeholder = first.label;\r\n\t\t}\r\n\t\t*/\r\n\t\t// console.log('FilterItem.remove', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\ttoggle(item) {\r\n\t\tif (this.has(item)) {\r\n\t\t\tthis.remove(item);\r\n\t\t} else {\r\n\t\t\tthis.set(item);\r\n\t\t}\r\n\t}\r\n\r\n\tclear() {\r\n\t\tthis.values = [];\r\n\t\t/*\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst first = this.options[0];\r\n\t\t\tthis.placeholder = first.label;\r\n\t\t}\r\n\t\t*/\r\n\t\tthis.change$.next();\r\n\t}\r\n}\r\n","import { merge } from 'rxjs';\r\nimport { map, tap } from 'rxjs/operators';\r\nimport { LocationService } from '../location/location.service';\r\nimport { FilterItem } from './filter-item';\r\n\r\nexport class FilterService {\r\n\r\n\tconstructor(options, initialParams, callback) {\r\n\t\tconst filters = {};\r\n\t\tif (options) {\r\n\t\t\tObject.keys(options).forEach(key => {\r\n\t\t\t\tconst filter = new FilterItem(options[key]);\r\n\t\t\t\tif (typeof callback === 'function') {\r\n\t\t\t\t\tcallback(key, filter);\r\n\t\t\t\t}\r\n\t\t\t\tfilters[key] = filter;\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.filters = filters;\r\n\t\tthis.deserialize(this.filters, initialParams);\r\n\t}\r\n\r\n\tgetParamsCount(params) {\r\n\t\tif (params) {\r\n\t\t\tconst paramsCount = Object.keys(params).reduce((p, c, i) => {\r\n\t\t\t\tconst values = params[c];\r\n\t\t\t\treturn p + (values ? values.length : 0);\r\n\t\t\t}, 0);\r\n\t\t\treturn paramsCount;\r\n\t\t} else {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t}\r\n\r\n\tdeserialize(filters, initialParams) {\r\n\t\tlet params;\r\n\t\tif (initialParams && this.getParamsCount(initialParams)) {\r\n\t\t\tparams = initialParams;\r\n\t\t}\r\n\t\tconst locationParams = LocationService.deserialize('filters');\r\n\t\tif (locationParams && this.getParamsCount(locationParams)) {\r\n\t\t\tparams = locationParams;\r\n\t\t}\r\n\t\tif (params) {\r\n\t\t\tObject.keys(filters).forEach(key => {\r\n\t\t\t\tfilters[key].values = params[key] || [];\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn filters;\r\n\t}\r\n\r\n\tserialize(filters) {\r\n\t\tlet params = {};\r\n\t\tlet any = false;\r\n\t\tObject.keys(filters).forEach(x => {\r\n\t\t\tconst filter = filters[x];\r\n\t\t\tif (filter.value !== null) {\r\n\t\t\t\tparams[x] = filter.values;\r\n\t\t\t\tany = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (!any) {\r\n\t\t\tparams = null;\r\n\t\t}\r\n\t\t// console.log('ReferenceCtrl.serialize', params);\r\n\t\tLocationService.serialize('filters', params);\r\n\t\treturn params;\r\n\t}\r\n\r\n\titems$(items) {\r\n\t\tconst filters = this.filters;\r\n\t\tconst changes = Object.keys(filters).map(key => filters[key].change$);\r\n\t\treturn merge(...changes).pipe(\r\n\t\t\t// tap(() => console.log(filters)),\r\n\t\t\ttap(() => this.serialize(filters)),\r\n\t\t\tmap(() => this.filterItems(items)),\r\n\t\t\ttap(() => this.updateFilterStates(filters, items))\r\n\t\t);\r\n\t}\r\n\r\n\tfilterItems(items, skipFilter) {\r\n\t\tconst filters = Object.keys(this.filters).map((x) => this.filters[x]).filter(x => x.value !== null);\r\n\t\titems = items.filter(item => {\r\n\t\t\tlet has = true;\r\n\t\t\tfilters.forEach(filter => {\r\n\t\t\t\tif (filter !== skipFilter) {\r\n\t\t\t\t\thas = has && filter.match(item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn has;\r\n\t\t});\r\n\t\treturn items;\r\n\t}\r\n\r\n\tupdateFilterStates(filters, items) {\r\n\t\tObject.keys(filters).forEach(x => {\r\n\t\t\tconst filter = filters[x];\r\n\t\t\tconst filteredItems = this.filterItems(items, filter);\r\n\t\t\tfilter.options.forEach(option => {\r\n\t\t\t\tlet count = 0;\r\n\t\t\t\tif (option.value) {\r\n\t\t\t\t\tlet i = 0;\r\n\t\t\t\t\twhile (i < filteredItems.length) {\r\n\t\t\t\t\t\tconst item = filteredItems[i];\r\n\t\t\t\t\t\tif (filter.filter(item, option.value)) {\r\n\t\t\t\t\t\t\tcount++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ti++;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcount = filteredItems.length;\r\n\t\t\t\t}\r\n\t\t\t\toption.count = count;\r\n\t\t\t\toption.disabled = count === 0;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tlet filter;\r\n\t\tObject.keys(this.filters).forEach(x => {\r\n\t\t\tfilter = this.filters[x];\r\n\t\t\tfilter.values = [];\r\n\t\t});\r\n\t\tif (filter) {\r\n\t\t\tfilter.change$.next();\r\n\t\t}\r\n\t}\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup } from 'rxcomp-form';\r\nimport { combineLatest } from 'rxjs';\r\nimport { finalize, first, takeUntil } from 'rxjs/operators';\r\nimport { FilterMode } from '../../common/filter/filter-item';\r\nimport { FilterService } from '../../common/filter/filter.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\n\r\nexport const PAGE_SIZE = 24;\r\n\r\nexport class FiltersComponent extends Component {\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tof([]),\r\n\t\t\tof({ search: { mode: 'query' } }),\r\n\t\t]);\r\n\t}\r\n\r\n\tsetFiltersParams() {\r\n\t\t// nope;\r\n\t}\r\n\r\n\tdoFilterItem(key, item, value) {\r\n\t\tswitch (key) {\r\n\t\t\tcase 'search':\r\n\t\t\t\treturn item.name.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\r\n\t\t\t\t\t// item.address.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\r\n\t\t\t\t\t(item.city && item.city.toLowerCase().indexOf(value.toLowerCase()) !== -1) ||\r\n\t\t\t\t\t(item.countries && item.countries.find(x => x.label.toLowerCase().indexOf(value.toLowerCase()) !== -1))\r\n\t\t\tdefault:\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.pageSize = PAGE_SIZE;\r\n\t\tthis.items = [];\r\n\t\tthis.filteredItems = [];\r\n\t\tthis.visibleItems = [];\r\n\t\tthis.filters = {};\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tsearch: new FormControl(null),\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.setFilterByKeyAndValue('search', form.value.search);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.busy = true;\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t\tfinalize(_ => {\r\n\t\t\t\tthis.busy = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t}),\r\n\t\t).subscribe(data => {\r\n\t\t\tthis.items = data[0];\r\n\t\t\tthis.filters = data[1];\r\n\t\t\tthis.onLoad();\r\n\t\t});\r\n\t}\r\n\r\n\tonLoad() {\r\n\t\tconst items = this.items;\r\n\t\tconst filters = this.filters;\r\n\t\tObject.keys(filters).forEach(key => {\r\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\r\n\t\t});\r\n\t\tconst initialParams = {};\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn this.doFilterItem(key, item, value);\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t\tthis.setFiltersParams();\r\n\t\tconst search = this.filters.search.values.length ? this.filters.search.values[0] : null;\r\n\t\tthis.form.patch({ search });\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(filteredItems => {\r\n\t\t\tthis.filteredItems = filteredItems;\r\n\t\t\tthis.visibleItems = filteredItems.slice(0, Math.min(12, filteredItems.length));\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t\tLocomotiveScrollService.start();\r\n\t\t\t// console.log('FiltersComponent.filteredItems', filteredItems.length);\r\n\t\t});\r\n\t}\r\n\r\n\tshowMore(event) {\r\n\t\tif (this.visibleItems.length + this.pageSize >= this.filteredItems.length) {\r\n\t\t\tthis.visibleItems = this.filteredItems.slice();\r\n\t\t} else {\r\n\t\t\tthis.visibleItems = this.filteredItems.slice(0, Math.min(this.visibleItems.length + this.pageSize, this.filteredItems.length));\r\n\t\t}\r\n\t\tthis.pushChanges();\r\n\t\tLocomotiveScrollService.update();\r\n\t}\r\n\r\n\tonSearch(model) {\r\n\t\t// console.log('FiltersComponent.onSearch', this.form.value);\r\n\t\t/*\r\n\t\tthis.setFilterByKeyAndValue('country', this.form.value.country);\r\n\t\t*/\r\n\t\tthis.setFilterByKeyAndValue('search', this.form.value.search);\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tsetFilterByKeyAndValue(key, value) {\r\n\t\tconst filter = this.filters[key];\r\n\t\tif (filter) {\r\n\t\t\tif (filter.mode === FilterMode.QUERY) {\r\n\t\t\t\tfilter.set(value);\r\n\t\t\t} else {\r\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\r\n\t\t\t\t// console.log(filter.options, option);\r\n\t\t\t\tif (option) {\r\n\t\t\t\t\tfilter.set(option);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfilter.clear();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonFilterDidChange() {\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n}\r\n\r\nFiltersComponent.meta = {\r\n\tselector: '[filters]',\r\n};\r\n","import { map } from 'rxjs/operators';\r\nimport { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport class AmbienceService {\r\n\r\n\tstatic all$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn AmbienceService.sort$(ApiService.get$('/ambience/all'));\r\n\t\t} else {\r\n\t\t\treturn AmbienceService.sort$(ApiService.get$('/ambience/all.json'));\r\n\t\t}\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/ambience/filters');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/ambience/filters.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic sort$(items$) {\r\n\t\treturn items$.pipe(\r\n\t\t\tmap(items => {\r\n\t\t\t\titems.sort((a, b) => {\r\n\t\t\t\t\tif (a.configurable !== b.configurable) {\r\n\t\t\t\t\t\treturn a.configurable ? -1 : 1;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn items;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","import { combineLatest } from 'rxjs';\r\nimport { FiltersComponent } from '../../shared/filters/filters.component';\r\nimport { AmbienceService } from './ambience.service';\r\n\r\nexport class AmbienceComponent extends FiltersComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tthis.ambienceId = this.ambienceId || null;\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tAmbienceService.all$(),\r\n\t\t\tAmbienceService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\tsetFiltersParams() {\r\n\t\tif (this.ambienceId) {\r\n\t\t\tthis.filters.ambience.set({ value: this.ambienceId });\r\n\t\t}\r\n\t}\r\n\r\n\tdoFilterItem(key, item, value) {\r\n\t\tswitch (key) {\r\n\t\t\tcase 'ambience':\r\n\t\t\t\treturn item.ambience.id === value;\r\n\t\t\tcase 'category':\r\n\t\t\t\treturn item.category.id === value;\r\n\t\t\tcase 'material':\r\n\t\t\t\treturn item.materials.indexOf(value) !== -1;\r\n\t\t\tcase 'designer':\r\n\t\t\t\treturn item.designers.indexOf(value) !== -1;\r\n\t\t\tcase 'search':\r\n\t\t\t\treturn item.title.toLowerCase().indexOf(value.toLowerCase()) !== -1;\r\n\t\t\tdefault:\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nAmbienceComponent.meta = {\r\n\tselector: '[ambience]',\r\n\tinputs: ['ambienceId'],\r\n};\r\n","import { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport class AteliersAndStoresService {\r\n\r\n\tstatic all$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/ateliers-and-stores/all');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/ateliers-and-stores/all.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic ateliers$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/ateliers-and-stores/ateliers.json');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/ateliers-and-stores/ateliers.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic stores$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/ateliers-and-stores/stores.json');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/ateliers-and-stores/stores.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/ateliers-and-stores/filters');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/ateliers-and-stores/filters.json');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup } from 'rxcomp-form';\r\nimport { combineLatest } from 'rxjs';\r\nimport { finalize, first, takeUntil } from 'rxjs/operators';\r\nimport { FilterMode } from '../../common/filter/filter-item';\r\nimport { FilterService } from '../../common/filter/filter.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { AteliersAndStoresService } from './ateliers-and-stores.service';\r\n\r\nexport class AteliersAndStoresComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.types = {\r\n\t\t\tAtelier: 1,\r\n\t\t\tStore: 2,\r\n\t\t};\r\n\t\tthis.items = [];\r\n\t\tthis.filteredItems = [];\r\n\t\tthis.filteredAteliers = [];\r\n\t\tthis.filteredStores = [];\r\n\t\tthis.filters = {};\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\t/*\r\n\t\t\tcountry: new FormControl(null),\r\n\t\t\t*/\r\n\t\t\tsearch: new FormControl(null),\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\t// console.log('AteliersAndStoresComponent.changes$', form.value);\r\n\t\t\t/*\r\n\t\t\tthis.setFilterByKeyAndValue('country', form.value.country);\r\n\t\t\t*/\r\n\t\t\tthis.setFilterByKeyAndValue('search', form.value.search);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.busy = true;\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t\tfinalize(_ => {\r\n\t\t\t\tthis.busy = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t}),\r\n\t\t).subscribe(data => {\r\n\t\t\tthis.items = data[0];\r\n\t\t\tthis.filters = data[1];\r\n\t\t\t/*\r\n\t\t\tcontrols.country.options = FormService.toSelectOptions(this.filters.country.options);\r\n\t\t\t*/\r\n\t\t\tthis.onLoad();\r\n\t\t});\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tAteliersAndStoresService.all$(),\r\n\t\t\tAteliersAndStoresService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\tonLoad() {\r\n\t\tconst items = this.items;\r\n\t\tconst filters = this.filters;\r\n\t\tObject.keys(filters).forEach(key => {\r\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\r\n\t\t});\r\n\t\tconst initialParams = {};\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\tswitch (key) {\r\n\t\t\t\t\t\t\tcase 'country':\r\n\t\t\t\t\t\t\t\treturn item.country.id === value;\r\n\t\t\t\t\t\t\tcase 'search':\r\n\t\t\t\t\t\t\t\treturn item.title.toLowerCase().indexOf(value.toLowerCase()) !== -1 || item.country.name.toLowerCase().indexOf(value.toLowerCase()) !== -1\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t\tconst country = this.filters.country.values.length ? this.filters.country.values[0] : null;\r\n\t\tconst search = this.filters.search.values.length ? this.filters.search.values[0] : null;\r\n\t\t// this.form.patch({ country, search });\r\n\t\tthis.form.patch({ search });\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(filteredItems => {\r\n\t\t\tthis.filteredItems = filteredItems;\r\n\t\t\tthis.filteredAteliers = filteredItems.filter(x => x.type === this.types.Atelier);\r\n\t\t\tthis.filteredStores = filteredItems.filter(x => x.type === this.types.Store);\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t\t// console.log('AteliersAndStoresComponent.filteredItems', filteredItems.length);\r\n\t\t});\r\n\t}\r\n\r\n\tonSearch(model) {\r\n\t\t// console.log('AteliersAndStoresComponent.onSearch', this.form.value);\r\n\t\t/*\r\n\t\tthis.setFilterByKeyAndValue('country', this.form.value.country);\r\n\t\t*/\r\n\t\tthis.setFilterByKeyAndValue('search', this.form.value.search);\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tsetFilterByKeyAndValue(key, value) {\r\n\t\tconst filter = this.filters[key];\r\n\t\tif (filter) {\r\n\t\t\tif (filter.mode === FilterMode.QUERY) {\r\n\t\t\t\tfilter.set(value);\r\n\t\t\t} else {\r\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\r\n\t\t\t\t// console.log(filter.options, option);\r\n\t\t\t\tif (option) {\r\n\t\t\t\t\tfilter.set(option);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfilter.clear();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonFilterDidChange() {\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nAteliersAndStoresComponent.meta = {\r\n\tselector: '[ateliers-and-stores]',\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalOutletComponent } from '../../common/modal/modal-outlet.component';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\n\r\nexport class CareersModalComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tconst data = parentInstance.modal.data;\r\n\t\t\tthis.position = data.position;\r\n\t\t\t// console.log('CareersModalComponent.onInit', data);\r\n\t\t}\r\n\t\tLocomotiveScrollService.stop();\r\n\t}\r\n\r\n\tonClose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tLocomotiveScrollService.start();\r\n\t}\r\n}\r\n\r\nCareersModalComponent.meta = {\r\n\tselector: '[careers-modal]'\r\n};\r\n","function push_(event) {\r\n\tconst dataLayer = window.dataLayer || [];\r\n\tdataLayer.push(event);\r\n\tconsole.log('GtmService.dataLayer', event);\r\n}\r\n\r\nexport class GtmService {\r\n\r\n\tstatic push(event) {\r\n\t\treturn push_(event);\r\n\t}\r\n\r\n}\r\n","\r\nexport class FormService {\r\n\r\n\tstatic toOptions(options) {\r\n\t\toptions = options.slice().map(x => ({ id: x.value, name: x.label }));\r\n\t\treturn options;\r\n\t}\r\n\r\n\tstatic toSelectOptions(options) {\r\n\t\toptions = options.slice().map(x => ({ id: x.value, name: x.label }));\r\n\t\toptions.unshift({ id: null, name: 'select' });\r\n\t\treturn options;\r\n\t}\r\n\r\n}\r\n","import { FormValidator } from 'rxcomp-form';\r\n\r\nexport default function RequiredIfValidator(fieldName, formGroup, shouldBe) {\r\n\r\n\treturn new FormValidator((value) => {\r\n\t\tlet field = null;\r\n\t\tif (typeof formGroup === 'function') {\r\n\t\t\tfield = formGroup().get(fieldName);\r\n\t\t} else if (formGroup) {\r\n\t\t\tfield = formGroup.get(fieldName);\r\n\t\t}\r\n\t\treturn (!value && field && (shouldBe != null ? field.value === shouldBe : field.value != null)) ? { required: { value: value, requiredIf: fieldName } } : null;\r\n\t});\r\n\r\n}\r\n","import { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport class CareersService {\r\n\r\n\tstatic data$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/careers/data.json');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/careers/data.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic positions$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/careers/positions.json');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/careers/positions.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic submit$(payload) {\r\n\t\tif (environment.flags.production) {\r\n\t\t\t// !!! convert to .post$\r\n\t\t\treturn ApiService.get$('/careers/submit.json', payload);\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/careers/submit.json');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { combineLatest } from 'rxjs';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport RequiredIfValidator from '../../controls/required-if.validator';\r\nimport { environment } from '../../environment';\r\nimport { CareersService } from './careers.service';\r\n\r\nexport class CareersComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tthis.positions = [];\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tlastName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\ttelephone: new FormControl(null),\r\n\t\t\tcountry: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tregion: new FormControl(null, [new RequiredIfValidator('country', form, 114)]), // required if country === 114, Italy\r\n\t\t\tcity: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tdomain: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcv: new FormControl(null),\r\n\t\t\tpresentationLetter: new FormControl(null),\r\n\t\t\tmessage: new FormControl(null),\r\n\t\t\tprivacy: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([CareersService.data$(), CareersService.positions$()]).pipe(\r\n\t\t\ttap(results => {\r\n\t\t\t\tconst data = results[0];\r\n\t\t\t\tconst controls = this.controls;\r\n\t\t\t\tcontrols.country.options = FormService.toSelectOptions(data.country.options);\r\n\t\t\t\tcontrols.region.options = FormService.toSelectOptions(data.region.options);\r\n\t\t\t\tcontrols.domain.options = FormService.toSelectOptions(data.domain.options);\r\n\t\t\t\tconst positions = results[1];\r\n\t\t\t\tthis.positions = positions;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tconst controls = this.controls;\r\n\t\tconst country = controls.country.options.length > 1 ? controls.country.options[1].id : null;\r\n\t\tconst region = controls.region.options.length > 1 ? controls.region.options[1].id : null;\r\n\t\tconst domain = controls.domain.options.length > 1 ? controls.domain.options[1].id : null;\r\n\t\tform.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\ttelephone: '0721 411112',\r\n\t\t\tcountry: country,\r\n\t\t\tregion: region,\r\n\t\t\tcity: 'Pesaro',\r\n\t\t\tdomain: domain,\r\n\t\t\tmessage: 'Hi!',\r\n\t\t\tprivacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit(model) {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('CareersComponent.onSubmit', form.value);\r\n\t\t// console.log('CareersComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (form.valid) {\r\n\t\t\t// console.log('CareersComponent.onSubmit', form.value);\r\n\t\t\tform.submitted = true;\r\n\t\t\tCareersService.submit$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(_ => {\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tform.reset();\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Careers\",\r\n\t\t\t\t\t'form_name': \"Lavora con noi\"\r\n\t\t\t\t});\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('CareersComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonOpenPosition(position) {\r\n\t\tModalService.open$({ src: environment.template.modal.careersModal, data: { position } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tconsole.log('CareersComponent.onOpenPosition', event);\r\n\t\t});\r\n\t}\r\n\r\n\tonClose() {\r\n\t\tthis.close.next(this.form.value);\r\n\t}\r\n}\r\n\r\nCareersComponent.meta = {\r\n\tselector: '[careers]',\r\n\toutputs: ['close'],\r\n\tinputs: ['isModal', 'position'],\r\n};\r\n","\r\nimport { from, fromEvent } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\n\r\nexport class OnceService {\r\n\r\n\tstatic uid = 0;\r\n\tstatic paths = [];\r\n\r\n\tstatic script$(url, callback) {\r\n\t\t// console.log('OnceScript.script$', url, callback);\r\n\t\tlet item = this.paths.find(x => x.url === url);\r\n\t\tif (item != null) {\r\n\t\t\treturn item.callback$;\r\n\t\t} else {\r\n\t\t\titem = { url, callbacks$: null };\r\n\t\t\tthis.paths.push(item);\r\n\t\t\tlet callbackName;\r\n\t\t\tif (callback === true) {\r\n\t\t\t\tcallbackName = 'OnceCallback' + (++this.uid);\r\n\t\t\t\turl = url.split('{{callback}}').join(callbackName);\r\n\t\t\t} else {\r\n\t\t\t\tcallbackName = callback;\r\n\t\t\t}\r\n\t\t\tlet callback$;\r\n\t\t\tconst script = document.createElement('script');\r\n\t\t\tscript.type = 'text/javascript';\r\n\t\t\tif (callback) {\r\n\t\t\t\tcallback$ = from(\r\n\t\t\t\t\tnew Promise((resolve, reject) => {\r\n\t\t\t\t\t\twindow[callbackName] = function(data) {\r\n\t\t\t\t\t\t\t// console.log('OnceScript', callbackName, data);\r\n\t\t\t\t\t\t\tresolve(data);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tscript.async = true;\r\n\t\t\t\tcallback$ = fromEvent(script, 'load').pipe(\r\n\t\t\t\t\tmap(x => x)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\titem.callback$ = callback$;\r\n\t\t\tconst scripts = Array.prototype.slice.call(document.getElementsByTagName('script'));\r\n\t\t\tif (scripts.length) {\r\n\t\t\t\tscript.src = url;\r\n\t\t\t\tconst lastScript = scripts[scripts.length - 1];\r\n\t\t\t\tlastScript.parentNode.insertBefore(script, lastScript.nextSibling);\r\n\t\t\t}\r\n\t\t\t// console.log('OnceScript.script$', scripts.length, script.src, scripts.map(x => x.src).join(', '));\r\n\t\t\treturn callback$;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","\r\n/*\r\n<script>\r\n  window.fbAsyncInit = function() {\r\n\tFB.init({\r\n\t  appId      : '{your-app-id}',\r\n\t  cookie     : true,\r\n\t  xfbml      : true,\r\n\t  version    : '{api-version}'\r\n\t});\r\n\r\n\tFB.AppEvents.logPageView();\r\n\r\n  };\r\n\r\n  (function(d, s, id){\r\n\t var js, fjs = d.getElementsByTagName(s)[0];\r\n\t if (d.getElementById(id)) {return;}\r\n\t js = d.createElement(s); js.id = id;\r\n\t js.src = \"https://connect.facebook.net/en_US/sdk.js\";\r\n\t fjs.parentNode.insertBefore(js, fjs);\r\n   }(document, 'script', 'facebook-jssdk'));\r\n</script>\r\n\r\n\r\n1. check status (already logged?)\r\nFB.getLoginStatus(function(response) {\r\n\tstatusChangeCallback(response);\r\n\t{\r\n\t\tstatus: 'connected',\r\n\t\tauthResponse: {\r\n\t\t\taccessToken: '...',\r\n\t\t\texpiresIn:'...',\r\n\t\t\tsignedRequest:'...',\r\n\t\t\tuserID:'...'\r\n\t\t}\r\n\t}\r\n});\r\n\r\n2. login\r\nFB.login(function(response) {\r\n  if (response.status === 'connected') {\r\n\t// Logged into your webpage and Facebook.\r\n  } else {\r\n\t// The person is not logged into your webpage or we are unable to tell.\r\n  }\r\n}, {scope: 'public_profile,email'});\r\n\r\n3. logout\r\nFB.logout(function(response) {\r\n   // Person is now logged out\r\n});\r\n\r\n\r\nfunction statusChangeCallback(response) {  // Called with the results from FB.getLoginStatus().\r\n\tconsole.log('statusChangeCallback');\r\n\tconsole.log(response);                   // The current login status of the person.\r\n\tif (response.status === 'connected') {   // Logged into your webpage and Facebook.\r\n\t  testAPI();\r\n\t} else {                                 // Not logged into your webpage or we are unable to tell.\r\n\t  document.getElementById('status').innerHTML = 'Please log ' +\r\n\t\t'into this webpage.';\r\n\t}\r\n  }\r\n\r\nfunction testAPI() {                      // Testing Graph API after login.  See statusChangeCallback() for when this call is made.\r\n\tconsole.log('Welcome!  Fetching your information.... ');\r\n\tFB.api('/me', function(response) {\r\n\t  console.log('Successful login for: ' + response.name);\r\n\t  document.getElementById('status').innerHTML =\r\n\t\t'Thanks for logging in, ' + response.name + '!';\r\n\t});\r\n  }\r\n\r\n*/\r\n\r\n/*\r\nstatic init(document, tagName, id) {\r\n\tlet script;\r\n\tlet firstTagName = document.getElementsByTagName(tagName)[0];\r\n\tif (document.getElementById(id)) {\r\n\t\treturn;\r\n\t}\r\n\tscript = document.createElement(tagName);\r\n\tscript.id = id;\r\n\tscript.src = 'https://connect.facebook.net/en_US/sdk.js';\r\n\tfirstTagName.parentNode.insertBefore(script, firstTagName);\r\n}\r\n*/\r\n\r\nimport { from, of } from \"rxjs\";\r\nimport { catchError, concatMap, filter, switchMap } from \"rxjs/operators\";\r\nimport { environment } from \"../../environment\";\r\nimport { OnceService } from \"../once/once.service\";\r\nimport { LocalStorageService } from \"../storage/local-storage.service\";\r\n\r\nexport class FacebookService {\r\n\r\n\tstatic facebook_ = null;\r\n\tstatic authResponse_ = null;\r\n\r\n\tstatic facebook$() {\r\n\t\tif (window.location.protocol.indexOf('https') !== -1) {\r\n\t\t\tif (this.facebook_) {\r\n\t\t\t\treturn of(this.facebook_);\r\n\t\t\t} else {\r\n\t\t\t\treturn OnceService.script$('//connect.facebook.net/' + environment.currentLanguage + '/sdk.js', 'fbAsyncInit').pipe(\r\n\t\t\t\t\tconcatMap(x => {\r\n\t\t\t\t\t\tconst facebook = window['FB'];\r\n\t\t\t\t\t\tfacebook.init({\r\n\t\t\t\t\t\t\tappId: environment.facebook.appId,\r\n\t\t\t\t\t\t\t// status: true,\r\n\t\t\t\t\t\t\tcookie: true,\r\n\t\t\t\t\t\t\txfbml: true,\r\n\t\t\t\t\t\t\tversion: environment.facebook.version,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tfacebook.AppEvents.logPageView();\r\n\t\t\t\t\t\tthis.facebook_ = facebook;\r\n\t\t\t\t\t\treturn of(facebook);\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn of(null);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic status$() {\r\n\t\treturn this.facebook$().pipe(\r\n\t\t\tfilter(facebook => facebook !== null),\r\n\t\t\tconcatMap(facebook => {\r\n\t\t\t\treturn from(new Promise((resolve, reject) => {\r\n\t\t\t\t\tfacebook.getLoginStatus((response) => {\r\n\t\t\t\t\t\tthis.authResponse_ = null;\r\n\t\t\t\t\t\tif (response.status === 'connected') {\r\n\t\t\t\t\t\t\tthis.authResponse_ = response.authResponse;\r\n\t\t\t\t\t\t\tLocalStorageService.set('facebook', response.authResponse);\r\n\t\t\t\t\t\t\tresolve(response);\r\n\t\t\t\t\t\t} else if (response.status === 'not_authorized') {\r\n\t\t\t\t\t\t\tLocalStorageService.delete('facebook');\r\n\t\t\t\t\t\t\treject(response);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treject(response);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, { scope: environment.facebook.scope });\r\n\t\t\t\t}));\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic login$() {\r\n\t\treturn this.facebook$().pipe(\r\n\t\t\tfilter(facebook => facebook !== null),\r\n\t\t\tconcatMap(facebook => {\r\n\t\t\t\treturn from(new Promise((resolve, reject) => {\r\n\t\t\t\t\tfacebook.login((response) => {\r\n\t\t\t\t\t\tthis.authResponse_ = null;\r\n\t\t\t\t\t\tif (response.status === 'connected') {\r\n\t\t\t\t\t\t\tthis.authResponse_ = response.authResponse;\r\n\t\t\t\t\t\t\tLocalStorageService.set('facebook', response.authResponse);\r\n\t\t\t\t\t\t\tresolve(response);\r\n\t\t\t\t\t\t} else if (response.status === 'not_authorized') {\r\n\t\t\t\t\t\t\tLocalStorageService.delete('facebook');\r\n\t\t\t\t\t\t\treject(response);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treject(response);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, { scope: environment.facebook.scope });\r\n\t\t\t\t}));\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic logout$() {\r\n\t\treturn this.status$().pipe(\r\n\t\t\tcatchError(error => {\r\n\t\t\t\tLocalStorageService.delete('facebook');\r\n\t\t\t\treturn of(null);\r\n\t\t\t}),\r\n\t\t\tswitchMap(_ => {\r\n\t\t\t\treturn from(new Promise((resolve, reject) => {\r\n\t\t\t\t\tthis.facebook_.logout(response => {\r\n\t\t\t\t\t\tresolve(response);\r\n\t\t\t\t\t\tLocalStorageService.delete('facebook');\r\n\t\t\t\t\t});\r\n\t\t\t\t}));\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic me$(fields) {\r\n\t\treturn this.status$().pipe(\r\n\t\t\tcatchError(error => {\r\n\t\t\t\treturn this.login$();\r\n\t\t\t}),\r\n\t\t\tconcatMap(l => {\r\n\t\t\t\treturn from(new Promise((resolve, reject) => {\r\n\t\t\t\t\tfields = fields || environment.facebook.fields;\r\n\t\t\t\t\tthis.facebook_.api('/me', {\r\n\t\t\t\t\t\tfields: fields,\r\n\t\t\t\t\t\taccessToken: environment.facebook.tokenClient,\r\n\t\t\t\t\t}, (response) => {\r\n\t\t\t\t\t\tif (!response || response.error) {\r\n\t\t\t\t\t\t\tconst error = response ? response.error : 'error';\r\n\t\t\t\t\t\t\tconsole.log('FacebookService.getMe.error', error);\r\n\t\t\t\t\t\t\treject(response.error);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconst user = response;\r\n\t\t\t\t\t\t\tuser.authResponse = this.authResponse_;\r\n\t\t\t\t\t\t\tuser.facebookToken = this.authResponse_.accessToken;\r\n\t\t\t\t\t\t\tresolve(user);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}));\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","\r\n\r\n\r\nimport { from, Observable, of } from 'rxjs';\r\nimport { concatMap } from 'rxjs/operators';\r\nimport { environment } from '../../environment';\r\nimport { OnceService } from '../once/once.service';\r\nimport { LocalStorageService } from '../storage/local-storage.service';\r\n\r\n/*\r\nexport class GoogleConfig {\r\n\tpublic clientId: string;\r\n\tpublic cookiepolicy?: string = 'single_host_origin';\r\n\tpublic scope?: string = 'profile email';\r\n\tpublic fetch_basic_profile?: boolean = true;\r\n\tpublic ux_mode?: string = 'popup';\r\n}\r\n\r\nexport class GoogleAuthResponse {\r\n\ttoken_type: string;\r\n\taccess_token: string;\r\n\tscope: string;\r\n\tlogin_hint: string;\r\n\texpires_in: number;\r\n\texpires_at: number;\r\n\tfirst_issued_at: number;\r\n\tid_token: string;\r\n\tidpId: string;\r\n\tsignedRequest: string;\r\n\tuserID: string;\r\n}\r\n\r\nexport class GoogleUser {\r\n\temail: string;\r\n\tfirstName: string;\r\n\tid: string;\r\n\tlastName: string;\r\n\tname: string;\r\n\tpicture: string;\r\n\tauthResponse?: GoogleAuthResponse;\r\n\tgoogleToken?: string;\r\n}\r\n*/\r\n\r\nexport class GoogleService {\r\n\r\n\tstatic authResponse;\r\n\tstatic storage;\r\n\tstatic gapi;\r\n\tstatic auth2;\r\n\tstatic instance;\r\n\r\n\tstatic init() {\r\n\t\t/*\r\n\t\tif (!environment['plugins'] && !environment['plugins']['google']) {\r\n\t\t\tthrow new Error('GoogleService.error missing config object in environment.plugins.google');\r\n\t\t}\r\n\t\t*/\r\n\t\tthis.authResponse = LocalStorageService.get('google');\r\n\t\t// console.log('GoogleService.authResponse', this.authResponse);\r\n\t}\r\n\r\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\r\n\t*  call GoogleService.google on component OnInit to avoid popup blockers via asyncronous loading *\r\n\t* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\r\n\r\n\tstatic google$() {\r\n\t\treturn new Observable().pipe(x => {\r\n\t\t\tif (this.gapi) {\r\n\t\t\t\treturn of(this.gapi);\r\n\t\t\t} else {\r\n\t\t\t\treturn this.once$();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tstatic once$() {\r\n\t\treturn OnceService.script$('//apis.google.com/js/api:client.js?onload={{callback}}', true).pipe(\r\n\t\t\tconcatMap(x => {\r\n\t\t\t\tthis.gapi = window['gapi'];\r\n\t\t\t\treturn of(this.gapi);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic me$() {\r\n\t\treturn this.login$().pipe(\r\n\t\t\tconcatMap(x => {\r\n\t\t\t\tconst profile = this.instance.currentUser.get().getBasicProfile();\r\n\t\t\t\tconst user = {\r\n\t\t\t\t\tid: profile.getId(),\r\n\t\t\t\t\tname: profile.getName(),\r\n\t\t\t\t\tfirstName: profile.getGivenName(),\r\n\t\t\t\t\tlastName: profile.getFamilyName(),\r\n\t\t\t\t\tpicture: profile.getImageUrl(),\r\n\t\t\t\t\temail: profile.getEmail(),\r\n\t\t\t\t\tauthResponse: this.authResponse,\r\n\t\t\t\t\tgoogleToken: this.authResponse.access_token,\r\n\t\t\t\t};\r\n\t\t\t\treturn of(user);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic login$() {\r\n\t\treturn this.auth2Instance$().pipe(\r\n\t\t\tconcatMap(x => {\r\n\t\t\t\treturn this.signin$();\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic logout$() {\r\n\t\treturn this.auth2Instance$().pipe(\r\n\t\t\tconcatMap(x => {\r\n\t\t\t\treturn from(\r\n\t\t\t\t\tnew Promise((resolve, reject) => {\r\n\t\t\t\t\t\tif (this.instance.isSignedIn && this.instance.isSignedIn.get()) {\r\n\t\t\t\t\t\t\tthis.instance.signOut().then((signed) => {\r\n\t\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t\t}, reject);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic getAuth2$() {\r\n\t\treturn new Observable().pipe(x => {\r\n\t\t\tif (this.auth2) {\r\n\t\t\t\treturn of(this.auth2);\r\n\t\t\t} else {\r\n\t\t\t\treturn this.google$().pipe(\r\n\t\t\t\t\tconcatMap(x => {\r\n\t\t\t\t\t\tif (this.gapi.auth2) {\r\n\t\t\t\t\t\t\treturn this.auth2init$();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn from(\r\n\t\t\t\t\t\t\t\tnew Promise((resolve, reject) => {\r\n\t\t\t\t\t\t\t\t\tthis.gapi.load('auth2', () => {\r\n\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t\t\t\t\t}, 200);\r\n\t\t\t\t\t\t\t\t\t}, reject);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t).pipe(\r\n\t\t\t\t\t\t\t\tconcatMap(x => {\r\n\t\t\t\t\t\t\t\t\treturn this.auth2init$();\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tstatic signin$() {\r\n\t\treturn from(\r\n\t\t\tnew Promise((resolve, reject) => {\r\n\t\t\t\tconst readAccessToken = () => {\r\n\t\t\t\t\t// console.log('GoogleLogin.readAccessToken');\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tconst user = this.instance.currentUser.get().getAuthResponse(true);\r\n\t\t\t\t\t\t// console.log('GoogleLogin.readAccessToken.success', user);\r\n\t\t\t\t\t\tthis.authResponse = user;\r\n\t\t\t\t\t\tLocalStorageService.set('google', user);\r\n\t\t\t\t\t\tresolve({\r\n\t\t\t\t\t\t\tcode: user.access_token,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\tconsole.log('GoogleLogin.readAccessToken.error', error);\r\n\t\t\t\t\t\tLocalStorageService.delete('google');\r\n\t\t\t\t\t\treject(error);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tif (this.instance.isSignedIn && this.instance.isSignedIn.get()) {\r\n\t\t\t\t\treadAccessToken();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.instance.signIn({\r\n\t\t\t\t\t\tscope: 'profile email',\r\n\t\t\t\t\t}).then((signed) => {\r\n\t\t\t\t\t\treadAccessToken();\r\n\t\t\t\t\t}, (error) => {\r\n\t\t\t\t\t\tLocalStorageService.delete('google');\r\n\t\t\t\t\t\treject(error);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic auth2init$() {\r\n\t\treturn from(\r\n\t\t\tnew Promise((resolve, reject) => {\r\n\t\t\t\tthis.gapi.auth2.init({\r\n\t\t\t\t\tclient_id: environment.google.clientId,\r\n\t\t\t\t\tcookiepolicy: 'single_host_origin',\r\n\t\t\t\t\tscope: 'profile email',\r\n\t\t\t\t\tfetch_basic_profile: true,\r\n\t\t\t\t\tux_mode: 'popup',\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\tthis.auth2 = this.gapi.auth2;\r\n\t\t\t\t\t// console.log('Auth2Init.success', this.auth2);\r\n\t\t\t\t\tresolve(this.auth2);\r\n\t\t\t\t}, reject);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic auth2Instance$() {\r\n\t\tif (this.instance) {\r\n\t\t\treturn of(this.instance);\r\n\t\t} else {\r\n\t\t\treturn this.getAuth2$().pipe(\r\n\t\t\t\tconcatMap(x => {\r\n\t\t\t\t\tthis.instance = this.auth2.getAuthInstance();\r\n\t\t\t\t\treturn of(this.instance);\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","\r\n\r\n\r\nimport { from, Observable, of } from 'rxjs';\r\nimport { concatMap, switchMap } from 'rxjs/operators';\r\nimport { environment } from '../../environment';\r\nimport { OnceService } from '../once/once.service';\r\n\r\nexport class GoogleMapsService {\r\n\r\n\tstatic maps;\r\n\r\n\tstatic init() {\r\n\t\tif (!environment.googleMaps || !environment.googleMaps.apiKey) {\r\n\t\t\tthrow new Error('GoogleMapsService.error missing apiKey in environment.googleMaps');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic maps$() {\r\n\t\treturn new Observable().pipe(_ => {\r\n\t\t\tif (this.maps) {\r\n\t\t\t\treturn of(this.maps);\r\n\t\t\t} else {\r\n\t\t\t\treturn this.once$();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tstatic once$() {\r\n\t\tif (!environment.googleMaps || !environment.googleMaps.apiKey) {\r\n\t\t\tthrow new Error('GoogleMapsService.error missing apiKey in environment.googleMaps');\r\n\t\t}\r\n\t\treturn OnceService.script$(`//maps.googleapis.com/maps/api/js?callback={{callback}}&key=${environment.googleMaps.apiKey}&libraries=places`, true).pipe(\r\n\t\t\tconcatMap(_ => {\r\n\t\t\t\tthis.maps = window.google.maps;\r\n\t\t\t\treturn of(this.maps);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic geocode$(data) {\r\n\t\t// console.log('GoogleMapsService.geocode$', data);\r\n\t\treturn GoogleMapsService.maps$().pipe(\r\n\t\t\tswitchMap(maps => {\r\n\t\t\t\t// console.log('GoogleMapsService.geocode$', maps);\r\n\t\t\t\treturn from(new Promise((resolve, reject) => {\r\n\t\t\t\t\tconst geocoder = new maps.Geocoder();\r\n\t\t\t\t\tgeocoder.geocode(data, (results, status) => {\r\n\t\t\t\t\t\t// console.log('GoogleMapsService.geocode$', status, results);\r\n\t\t\t\t\t\tif (status == 'OK') {\r\n\t\t\t\t\t\t\tresolve(results);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treject(results);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}));\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","\r\n\r\n\r\nimport { Subject } from 'rxjs';\r\nimport { switchMap, tap } from 'rxjs/operators';\r\nimport { environment } from '../../environment';\r\nimport { ApiService } from '../api/api.service';\r\nimport { LocalStorageService } from '../storage/local-storage.service';\r\n\r\nexport class LinkedinService {\r\n\r\n\tstatic getAccessToken$(code) {\r\n\t\tconst data = {\r\n\t\t\tgrant_type: 'authorization_code',\r\n\t\t\tcode: code,\r\n\t\t\tclient_id: environment.linkedIn.clientId,\r\n\t\t\tclient_secret: environment.linkedIn.clientSecret,\r\n\t\t\tredirect_uri: `${window.location.origin}/giorgetti/cart.html`,\r\n\t\t}\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.post$('/user/linkedin', data);\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/user/linkedin.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic linkedin$() {\r\n\t\tconst event$ = new Subject();\r\n\t\tconst key = 'linkedin';\r\n\t\tconst state = `${key}-${new Date().getTime()}`;\r\n\t\twindow.onSocialCallback = (social, params) => {\r\n\t\t\tif (social === 'linkedin' && params.state === state) {\r\n\t\t\t\tconsole.log('onSocialCallback', params.code);\r\n\t\t\t\tevent$.next(params.code);\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst width = 375 * 2;\r\n\t\tconst height = 667;\r\n\t\twindow.open(\r\n\t\t\t`https://www.linkedin.com/oauth/v2/authorization?response_type=code&client_id=${environment.linkedIn.clientId}&redirect_uri=${window.location.origin}/giorgetti/cart.html&state=${state}&scope=${environment.linkedIn.scope}`,\r\n\t\t\tkey,\r\n\t\t\t`top=${Math.floor((window.innerHeight - height) / 2)}, left=${Math.floor((window.innerWidth - width) / 2)}, width=${width}, height=${height}, status=no, menubar=no, toolbar=no scrollbars=no`,\r\n\t\t);\r\n\t\t// https://localhost:48481/giorgetti/cart.html?code=AQRqT4xWst4rcKM_sarxRTHP7PJ_eUbiQP30KZuyjGgSuoNQjZzJtSIu6laX6o-R-hy9obrIhzRKA3EshZfkIgo-ErIEahuyyAkY7Lg5PRFCEDdJxiy-cKyz8O9Vl6wVs2hoO_m7QvhLB22YfL_qqtToWqEUvWLwWqVTzRgEbu_U2AWDltOP_mSVNLge3Qc_uRV6VZDPeQqPcY2ICgo&state=foobar\r\n\t\treturn event$.pipe(\r\n\t\t\tswitchMap(code => {\r\n\t\t\t\treturn this.getAccessToken$(code);\r\n\t\t\t}),\r\n\t\t\ttap(accessToken => {\r\n\t\t\t\tLocalStorageService.set('linkedin', accessToken);\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { combineLatest } from 'rxjs';\r\nimport { finalize, first, map, switchMap, takeUntil, tap } from 'rxjs/operators';\r\nimport { FacebookService } from '../../common/facebook/facebook.service';\r\nimport { GoogleService } from '../../common/google/google.service';\r\nimport { GoogleMapsService } from '../../common/googlemaps/googlemaps.service';\r\nimport { LinkedinService } from '../../common/linkedin/linkedin.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalResolveEvent, ModalService } from '../../common/modal/modal.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport RequiredIfValidator from '../../controls/required-if.validator';\r\nimport { environment } from '../../environment';\r\nimport { CartMiniService } from '../../shared/cart-mini/cart-mini.service';\r\nimport { UserService } from '../../shared/user/user.service';\r\nimport { CartService, CartSteps } from './cart.service';\r\n\r\nexport class CartComponent extends Component {\r\n\r\n\tget totalPrice() {\r\n\t\tconst items = this.items || [];\r\n\t\tlet total = items.reduce((p, c, i) => {\r\n\t\t\treturn p + c.price.price * c.qty;\r\n\t\t}, 0);\r\n\t\tif (this.delivery) {\r\n\t\t\ttotal += this.delivery.price;\r\n\t\t}\r\n\t\tif (this.discount) {\r\n\t\t\ttotal += this.discount.price;\r\n\t\t}\r\n\t\treturn total;\r\n\t}\r\n\r\n\tget selectedStore() {\r\n\t\tif (!this.controls || !this.controls.stores || !this.controls.stores.value) {\r\n\t\t\treturn null;\r\n\t\t} else {\r\n\t\t\treturn this.controls.stores.value.find(x => x.id === this.controls.store.value);\r\n\t\t}\r\n\t}\r\n\r\n\tget shipmentCountriesLabel() {\r\n\t\tlet shipmentCountriesLabel = '';\r\n\t\tshipmentCountriesLabel = this.shipmentCountryOptions.map(x => x.label).join(', ');\r\n\t\treturn shipmentCountriesLabel;\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.detectSocialLogin();\r\n\t\tthis.socialBusy = false;\r\n\t\tthis.form = null;\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([CartService.data$()]).pipe(\r\n\t\t\ttap(results => {\r\n\t\t\t\tconst data = results[0];\r\n\t\t\t\tthis.initWithData(data);\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tinitWithData(data) {\r\n\t\tthis.steps = CartSteps;\r\n\t\tthis.step = CartSteps.None;\r\n\t\tthis.errorDelivery = null;\r\n\t\tthis.errorDiscount = null;\r\n\t\tthis.errorPayment = null;\r\n\t\tthis.success = false;\r\n\t\tthis.estimatedDelivery = null;\r\n\t\tthis.items = null;\r\n\t\tthis.items$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(items => {\r\n\t\t\tthis.items = items;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.user = null;\r\n\t\tthis.guest = null;\r\n\t\tthis.shipmentCountryOptions = [];\r\n\t\tthis.countryOptions = [];\r\n\t\tthis.deliveryData = null;\r\n\t\tthis.billingData = null;\r\n\t\tthis.delivery = null;\r\n\t\tthis.discount = null;\r\n\t\tthis.paymentMethod = null;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tstep: this.step,\r\n\t\t\titems: null,\r\n\t\t\tshipmentCountry: new FormControl(114, [Validators.RequiredValidator()]),\r\n\t\t\tuser: null,\r\n\t\t\tguest: null,\r\n\t\t\tdata: new FormGroup({\r\n\t\t\t\tfirstName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tlastName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\t\ttelephone: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\taddress: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tzipCode: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tcity: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tprovince: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tcountry: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tmessage: null,\r\n\t\t\t\tinvoice: null,\r\n\t\t\t\tinvoiceData: new FormGroup({\r\n\t\t\t\t\ttaxNumber: new FormControl(null, [RequiredIfValidator('invoice', getDataGroup)]),\r\n\t\t\t\t\tsdi: new FormControl(null, [RequiredIfValidator('invoice', getDataGroup)]),\r\n\t\t\t\t\tpec: new FormControl(null, [RequiredIfValidator('invoice', getDataGroup)]),\r\n\t\t\t\t}),\r\n\t\t\t\tbilling: null,\r\n\t\t\t\tbillingData: new FormGroup({\r\n\t\t\t\t\tcompany: new FormControl(null, [RequiredIfValidator('billing', getDataGroup)]),\r\n\t\t\t\t\tfirstName: new FormControl(null, [RequiredIfValidator('billing', getDataGroup)]),\r\n\t\t\t\t\tlastName: new FormControl(null, [RequiredIfValidator('billing', getDataGroup)]),\r\n\t\t\t\t\ttelephone: new FormControl(null, [RequiredIfValidator('billing', getDataGroup)]),\r\n\t\t\t\t\taddress: new FormControl(null, [RequiredIfValidator('billing', getDataGroup)]),\r\n\t\t\t\t\tzipCode: new FormControl(null, [RequiredIfValidator('billing', getDataGroup)]),\r\n\t\t\t\t\tcity: new FormControl(null, [RequiredIfValidator('billing', getDataGroup)]),\r\n\t\t\t\t\tprovince: new FormControl(null, [RequiredIfValidator('billing', getDataGroup)]),\r\n\t\t\t\t\tcountry: new FormControl(null, [RequiredIfValidator('billing', getDataGroup)]),\r\n\t\t\t\t}),\r\n\t\t\t\tconditions: new FormControl(null, [Validators.RequiredTrueValidator()]),\r\n\t\t\t\tprivacy: new FormControl(null, [Validators.RequiredTrueValidator()]),\r\n\t\t\t\tnewsletter: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tcommercial: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tpromotion: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\t// terms: null,\r\n\t\t\t}),\r\n\t\t\tdeliveryData: null,\r\n\t\t\tbillingData: null,\r\n\t\t\tdeliveryType: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tdelivery: null,\r\n\t\t\tdiscountCode: null,\r\n\t\t\tdiscount: null,\r\n\t\t\tpaymentMethod: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tstores: null,\r\n\t\t\tstore: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tfunction getDataGroup() {\r\n\t\t\t// console.log(form.controls.data);\r\n\t\t\treturn form.controls.data;\r\n\t\t}\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\t// console.log('form', form.value);\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\r\n\t\t/*\r\n\t\tUserService.me$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(user => this.onUser(user));\r\n\t\t*/\r\n\r\n\t\tconst sortCountry = (a, b) => {\r\n\t\t\tif (a.label.toLowerCase() === 'italia') {\r\n\t\t\t\treturn -1;\r\n\t\t\t} else if (b.label.toLowerCase() === 'italia') {\r\n\t\t\t\treturn 1;\r\n\t\t\t} else {\r\n\t\t\t\treturn a.label - b.label;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tlet shipmentCountryOptions = data.shipmentCountry.options.slice();\r\n\t\tshipmentCountryOptions.sort(sortCountry);\r\n\t\tthis.shipmentCountryOptions = shipmentCountryOptions;\r\n\t\tcontrols.shipmentCountry.options = FormService.toSelectOptions(this.shipmentCountryOptions);\r\n\t\tcontrols.data.controls.country.options = FormService.toSelectOptions(this.shipmentCountryOptions);\r\n\r\n\t\tlet countryOptions = data.country.options.slice();\r\n\t\tcountryOptions.sort(sortCountry);\r\n\t\tthis.countryOptions = countryOptions;\r\n\t\tcontrols.data.controls.billingData.controls.country.options = FormService.toSelectOptions(this.countryOptions);\r\n\r\n\t\t/*\r\n\t\tcontrols.deliveryType.options = data.deliveryType.options.slice().map(x => ({\r\n\t\t\tid: x.value,\r\n\t\t\tname: x.label,\r\n\t\t\tabstract: x.abstract,\r\n\t\t\tdescription: x.description,\r\n\t\t\tprice: x.price,\r\n\t\t\tfullPrice: x.fullPrice,\r\n\t\t}));\r\n\t\t*/\r\n\t\tcontrols.paymentMethod.options = data.paymentMethod.options.slice().map(x => ({\r\n\t\t\tid: x.value,\r\n\t\t\tname: x.label,\r\n\t\t\tdescription: x.description,\r\n\t\t\tinfo: x.info,\r\n\t\t\ticons: x.icons,\r\n\t\t}));\r\n\t\tthis.form.patch({\r\n\t\t\tshipmentCountry: controls.shipmentCountry.options[1].id,\r\n\t\t\t// deliveryType: controls.deliveryType.options[0].id,\r\n\t\t\tpaymentMethod: controls.paymentMethod.options[0].id,\r\n\t\t}, true);\r\n\t\tthis.pushChanges();\r\n\t\tCartService.cart$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(cart => {\r\n\t\t\tif (cart) {\r\n\t\t\t\tthis.step = cart.step;\r\n\t\t\t\tthis.guest = cart.guest;\r\n\t\t\t\tthis.deliveryData = cart.deliveryData;\r\n\t\t\t\tthis.billingData = cart.billingData;\r\n\t\t\t\tthis.delivery = cart.delivery;\r\n\t\t\t\tthis.discount = cart.discount;\r\n\t\t\t\tthis.paymentMethod = cart.paymentMethod;\r\n\t\t\t\tif (cart.stores) {\r\n\t\t\t\t\tcontrols.store.options = cart.stores.slice().map(x => ({\r\n\t\t\t\t\t\tid: x.id,\r\n\t\t\t\t\t\tname: x.name,\r\n\t\t\t\t\t\taddress: x.address,\r\n\t\t\t\t\t\tcity: x.city,\r\n\t\t\t\t\t\tcountry: x.country,\r\n\t\t\t\t\t\tdistance: x.distance,\r\n\t\t\t\t\t}));\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.step = CartSteps.Items;\r\n\t\t\t}\r\n\t\t\tthis.onPatch(cart, true);\r\n\t\t});\r\n\t}\r\n\r\n\ttouchForm() {\r\n\t\tthis.form.touched = true;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst firstInvalidInput = Array.prototype.slice.call(node.querySelectorAll('.invalid')).find((x) => x.hasAttribute('[control]'));\r\n\t\tif (firstInvalidInput) {\r\n\t\t\tLocomotiveScrollService.scrollTo(firstInvalidInput, { offset: -260, duration: 0, disableLerp: true });\r\n\t\t}\r\n\t}\r\n\r\n\tonBack() {\r\n\t\tthis.step--;\r\n\t\tlet patch = null;\r\n\t\tif (this.step === CartSteps.Items) {\r\n\t\t\tthis.user = null;\r\n\t\t\tthis.guest = false;\r\n\t\t\tpatch = { user: null, guest: false };\r\n\t\t}\r\n\t\tthis.onPatch(patch);\r\n\t}\r\n\r\n\tonNext(patch) {\r\n\t\tthis.step++;\r\n\t\tthis.onPatch(patch);\r\n\t}\r\n\r\n\tonPatch(patch = {}, skipUpdate = false) {\r\n\t\tthis.form.patch(Object.assign({}, patch, { step: this.step }));\r\n\t\tswitch (this.step) {\r\n\t\t\tcase CartSteps.Delivery:\r\n\t\t\t\tthis.busy = true;\r\n\t\t\t\tthis.errorDelivery = null;\r\n\t\t\t\tthis.getDeliveryType$().pipe(\r\n\t\t\t\t\tfirst(),\r\n\t\t\t\t\tfinalize(_ => {\r\n\t\t\t\t\t\tthis.busy = false;\r\n\t\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\t}),\r\n\t\t\t\t).subscribe(_ => {\r\n\t\t\t\t\tthis.onAfterPatch(skipUpdate);\r\n\t\t\t\t}, errorDelivery => {\r\n\t\t\t\t\t// console.log('errorDelivery', errorDelivery);\r\n\t\t\t\t\tthis.errorDelivery = errorDelivery;\r\n\t\t\t\t\tthis.onAfterPatch(true);\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthis.onAfterPatch(skipUpdate);\r\n\t\t}\r\n\t}\r\n\r\n\tonAfterPatch(skipUpdate = false) {\r\n\t\tthis.pushChanges();\r\n\t\tLocomotiveScrollService.update();\r\n\t\tconst target = document.querySelector('.section--breadcrumb');\r\n\t\tLocomotiveScrollService.scrollTo(target, { offset: -130, duration: 0, disableLerp: true });\r\n\t\tif (!skipUpdate) {\r\n\t\t\tCartService.setCart(this.form.value);\r\n\t\t}\r\n\t}\r\n\r\n\t// 1. CartSteps.Items\r\n\tonItems(_) {\r\n\t\tUserService.me$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(user => {\r\n\t\t\tthis.onUser(user);\r\n\t\t\tthis.onNext({\r\n\t\t\t\titems: this.items,\r\n\t\t\t});\r\n\t\t});\r\n\t\t/*\r\n\t\tthis.onNext({\r\n\t\t\titems: this.items,\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\tonIncrement(item) {\r\n\t\tCartMiniService.incrementItem$(item).pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tonDecrement(item) {\r\n\t\tCartMiniService.decrementItem$(item).pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tonRemove(item) {\r\n\t\tCartMiniService.removeItem$(item).pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tonEdit(item) {\r\n\t\t// console.log('CartComponent.onEdit', item);\r\n\t\twindow.location.href = `${environment.slug.configureProduct}?productId=${item.id}&code=${item.code}${item.showefy ? `&sl=${item.showefy.product_link.split('&sl=')[1]}` : ''}`;\r\n\t}\r\n\r\n\titems$() {\r\n\t\treturn CartMiniService.items$().pipe(\r\n\t\t\tswitchMap(items => {\r\n\t\t\t\treturn CartService.estimatedDelivery$({ items }).pipe(\r\n\t\t\t\t\tmap(data => {\r\n\t\t\t\t\t\tthis.estimatedDelivery = data.estimatedDelivery;\r\n\t\t\t\t\t\treturn items;\r\n\t\t\t\t\t}),\r\n\t\t\t\t);\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\t// 2. CartSteps.Data\r\n\tonModalSignIn() {\r\n\t\tModalService.open$({ src: environment.template.modal.userModal, data: { view: 1 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('CartComponent.onModalSignIn', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\tthis.onUser(event.data);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonModalSignUp(me) {\r\n\t\tModalService.open$({ src: environment.template.modal.userModal, data: { view: 2, me } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('CartComponent.onModalSignUp', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\tthis.onUser(event.data);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonUser(user) {\r\n\t\t// console.log('CartComponent.onUser', user);\r\n\t\tif (user) {\r\n\t\t\tthis.user = user;\r\n\t\t\tthis.guest = false;\r\n\t\t\tthis.onPatch({\r\n\t\t\t\tuser: user,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tfirstName: user.firstName,\r\n\t\t\t\t\tlastName: user.lastName,\r\n\t\t\t\t\temail: user.email,\r\n\t\t\t\t\t// telephone: null,\r\n\t\t\t\t\t// address: null,\r\n\t\t\t\t\t// zipCode: null,\r\n\t\t\t\t\tcity: user.city,\r\n\t\t\t\t\t// province: null,\r\n\t\t\t\t\tcountry: user.country,\r\n\t\t\t\t\tprivacy: user.privacy,\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tonGuest() {\r\n\t\tthis.user = null;\r\n\t\tthis.guest = true;\r\n\t\tthis.onPatch({ user: null, guest: true });\r\n\t}\r\n\r\n\tonFacebookLogout() {\r\n\t\tFacebookService.logout$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tonSocialLogin(social) {\r\n\t\tswitch (social) {\r\n\t\t\tcase 'facebook':\r\n\t\t\t\tthis.onFacebookLogin();\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'google':\r\n\t\t\t\tthis.onGoogleLogin();\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'linkedin':\r\n\t\t\t\tthis.onLinkedinLogin();\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn;\r\n\t}\r\n\r\n\tonFacebookLogin() {\r\n\t\tconsole.log('onFacebookLogin');\r\n\t\tthis.socialBusy = 'facebook';\r\n\t\tlet socialMe;\r\n\t\tfunction mapMe(data) {\r\n\t\t\t// console.log(data);\r\n\t\t\t/*\r\n\t\t\tauthResponse:\r\n\t\t\t\taccessToken: string\r\n\t\t\t\tdata_access_expiration_time: 1633594543\r\n\t\t\t\texpiresIn: 5164299\r\n\t\t\t\tgraphDomain: \"facebook\"\r\n\t\t\t\tsignedRequest: string\r\n\t\t\t\tuserID: string\r\n\t\t\temail: string\r\n\t\t\tfacebookToken: string\r\n\t\t\tfirst_name: string\r\n\t\t\tid: string\r\n\t\t\tlast_name: string\r\n\t\t\tname: string\r\n\t\t\tpicture:\r\n\t\t\t\tdata:\r\n\t\t\t\t\theight: 50\r\n\t\t\t\t\tis_silhouette: false\r\n\t\t\t\t\turl: string\r\n\t\t\t\t\twidth: 50\r\n\t\t\t*/\r\n\t\t\tconst me = {};\r\n\t\t\tif (data) {\r\n\t\t\t\tme.firstName = data.first_name;\r\n\t\t\t\tme.lastName = data.last_name;\r\n\t\t\t\tme.email = data.email;\r\n\t\t\t\tme.socialPicture = data.picture.data.url;\r\n\t\t\t\tme.socialType = 'facebook';\r\n\t\t\t\tme.socialId = data.id;\r\n\t\t\t\tme.socialToken = data.facebookToken;\r\n\t\t\t\tme.socialTokenExpiresAt = data.authResponse.data_access_expiration_time;\r\n\t\t\t}\r\n\t\t\tconsole.log('CartComponent.onFacebookLogin.mapMe', me);\r\n\t\t\treturn me;\r\n\t\t}\r\n\t\tFacebookService.me$().pipe(\r\n\t\t\tfirst(),\r\n\t\t\ttap(me => socialMe = me),\r\n\t\t\tswitchMap(me => UserService.tryFacebook$(me)),\r\n\t\t\tfinalize(() => this.socialBusy = false),\r\n\t\t).subscribe(user => {\r\n\t\t\tif (user) {\r\n\t\t\t\tthis.onUser(user);\r\n\t\t\t} else {\r\n\t\t\t\tconst me = mapMe(socialMe);\r\n\t\t\t\tthis.onModalSignUp(me);\r\n\t\t\t}\r\n\t\t}, error => {\r\n\t\t\tconsole.log('CartComponent.onFacebookLogin.error', error);\r\n\t\t\tconst me = mapMe(socialMe);\r\n\t\t\tthis.onModalSignUp(me);\r\n\t\t});\r\n\t}\r\n\r\n\tonGoogleLogin() {\r\n\t\tthis.socialBusy = 'google';\r\n\t\tlet socialMe;\r\n\t\tfunction mapMe(data) {\r\n\t\t\t// console.log(data);\r\n\t\t\t/*\r\n\t\t\tauthResponse:\r\n\t\t\t\taccess_token: string\r\n\t\t\t\texpires_at: 1625838392809\r\n\t\t\t\texpires_in: 3599\r\n\t\t\t\tfirst_issued_at: 1625834793809\r\n\t\t\t\tid_token: string\r\n\t\t\t\tidpId: \"google\"\r\n\t\t\t\tlogin_hint: string\r\n\t\t\t\tscope: \"email profile openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile\"\r\n\t\t\t\tsession_state: {extraQueryParams: {…}}\r\n\t\t\t\ttoken_type: \"Bearer\"\r\n\t\t\temail: string\r\n\t\t\tfirstName: string\r\n\t\t\tgoogleToken: string\r\n\t\t\tid: string\r\n\t\t\tlastName: string\r\n\t\t\tname: string\r\n\t\t\tpicture: string\r\n\t\t\t*/\r\n\t\t\tconst me = {};\r\n\t\t\tif (data) {\r\n\t\t\t\tme.firstName = data.firstName;\r\n\t\t\t\tme.lastName = data.lastName;\r\n\t\t\t\tme.email = data.email;\r\n\t\t\t\tme.socialPicture = data.picture;\r\n\t\t\t\tme.socialType = 'google';\r\n\t\t\t\tme.socialId = data.id;\r\n\t\t\t\tme.socialToken = data.googleToken;\r\n\t\t\t\tme.socialTokenExpiresAt = data.authResponse.expires_at;\r\n\t\t\t}\r\n\t\t\tconsole.log('CartComponent.onGoogleLogin.mapMe', me);\r\n\t\t\treturn me;\r\n\t\t}\r\n\t\tGoogleService.me$().pipe(\r\n\t\t\tfirst(),\r\n\t\t\ttap(me => socialMe = me),\r\n\t\t\tswitchMap(me => UserService.tryGoogle$(me)),\r\n\t\t\tfinalize(() => this.socialBusy = false),\r\n\t\t).subscribe(user => {\r\n\t\t\tif (user) {\r\n\t\t\t\tthis.onUser(user);\r\n\t\t\t} else {\r\n\t\t\t\tconst me = mapMe(socialMe);\r\n\t\t\t\tthis.onModalSignUp(me);\r\n\t\t\t}\r\n\t\t}, error => {\r\n\t\t\tconsole.log('CartComponent.onGoogleLogin.error', error);\r\n\t\t\tconst me = mapMe(socialMe);\r\n\t\t\tthis.onModalSignUp(me);\r\n\t\t});\r\n\t}\r\n\r\n\tonLinkedinLogin() {\r\n\t\tLinkedinService.linkedin$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(token => {\r\n\t\t\tconsole.log('CartComponent.onLinkedinLogin', token);\r\n\t\t\tthis.onModalSignUp({ firstName: 'Luca' });\r\n\t\t}, error => {\r\n\t\t\tconsole.log('CartComponent.onLinkedinLogin.error', error);\r\n\t\t\tconst me = mapMe(socialMe);\r\n\t\t\tthis.onModalSignUp(me);\r\n\t\t});\r\n\t}\r\n\r\n\tdetectSocialLogin() {\r\n\t\tif (window.name === 'linkedin' && window.opener) {\r\n\t\t\tconst urlSearchParams = new URLSearchParams(window.location.search);\r\n\t\t\tconst params = Object.fromEntries(urlSearchParams.entries());\r\n\t\t\tconsole.log('window', window.name, params);\r\n\t\t\tif (typeof window.opener.onSocialCallback === 'function') {\r\n\t\t\t\twindow.opener.onSocialCallback(window.name, params);\r\n\t\t\t}\r\n\t\t\tself.close();\r\n\t\t}\r\n\t}\r\n\r\n\tonData(_) {\r\n\t\tconst form = this.form;\r\n\t\t// const controls = this.controls;\r\n\t\t// console.log('CartComponent.onData', form.controls.data.valid);\r\n\t\tif (form.controls.data.valid) {\r\n\t\t\tconst deliveryData = form.value.data;\r\n\t\t\tconst deliveryCountry = this.getCountryById(deliveryData.country);\r\n\t\t\tconst onGeocoder = (latitude = null, longitude = null) => {\r\n\t\t\t\tdeliveryData.latitude = latitude;\r\n\t\t\t\tdeliveryData.longitude = longitude;\r\n\t\t\t\tthis.deliveryData = Object.assign({}, deliveryData, {\r\n\t\t\t\t\tcountry: deliveryCountry,\r\n\t\t\t\t});\r\n\t\t\t\tconst billingData = (form.value.data.billing ? form.value.data.billingData : form.value.data);\r\n\t\t\t\tconst billingCountry = this.getCountryById(billingData.country);\r\n\t\t\t\tthis.billingData = Object.assign({}, billingData, {\r\n\t\t\t\t\tcountry: billingCountry,\r\n\t\t\t\t});\r\n\t\t\t\t// console.log('CartComponent.onData.onGeocoder', latitude, longitude);\r\n\t\t\t\tthis.onNext({ deliveryData, billingData });\r\n\t\t\t}\r\n\t\t\tlet latitude = null, longitude = null;\r\n\t\t\tGoogleMapsService.geocode$({ address: `${deliveryData.address}, ${deliveryData.zipCode} ${deliveryData.city} ${deliveryCountry.name}` }).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(results => {\r\n\t\t\t\tif (results.length) {\r\n\t\t\t\t\t// console.log('CartComponent.onData.geocode', results);\r\n\t\t\t\t\tconst location = results[0].geometry.location;\r\n\t\t\t\t\tlatitude = location.lat();\r\n\t\t\t\t\tlongitude = location.lng();\r\n\t\t\t\t}\r\n\t\t\t\tonGeocoder(latitude, longitude);\r\n\t\t\t}, error => {\r\n\t\t\t\tonGeocoder(latitude, longitude);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.touchForm();\r\n\t\t}\r\n\t}\r\n\r\n\tgetCountryById(countryId) {\r\n\t\treturn FormService.toSelectOptions(this.countryOptions).find(x => x.id === countryId);\r\n\t}\r\n\r\n\ttestData() {\r\n\t\tconst form = this.form;\r\n\t\tconst controls = this.controls;\r\n\t\tconst country = controls.data.controls.country.options.length > 1 ? controls.data.controls.country.options[1].id : null;\r\n\t\tform.patch({\r\n\t\t\tdata: {\r\n\t\t\t\tfirstName: 'Jhon',\r\n\t\t\t\tlastName: 'Appleseed',\r\n\t\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\t\ttelephone: '0721 411112',\r\n\t\t\t\taddress: 'Strada della Campanara, 15',\r\n\t\t\t\tzipCode: '61122',\r\n\t\t\t\tcity: 'Pesaro',\r\n\t\t\t\tprovince: 'Pesaro',\r\n\t\t\t\tcountry: country,\r\n\t\t\t\tmessage: 'Hi!',\r\n\t\t\t\tconditions: true,\r\n\t\t\t\tprivacy: true,\r\n\t\t\t\tnewsletter: false,\r\n\t\t\t\tcommercial: false,\r\n\t\t\t\tpromotion: false,\r\n\t\t\t\t// terms: false,\r\n\t\t\t},\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\tresetData() {\r\n\t\tconst data = this.controls.data;\r\n\t\tdata.reset();\r\n\t}\r\n\r\n\t// 3. CartSteps.Delivery\r\n\tonDelivery(_) {\r\n\t\tconst form = this.form;\r\n\t\tconst controls = this.controls;\r\n\t\tconst delivery = controls.deliveryType.options.find(x => x.id === form.value.deliveryType);\r\n\t\tthis.delivery = delivery;\r\n\t\t// console.log('CartComponent.onDelivery', form.value);\r\n\t\tCartService.getStores$(form.value).pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(stores => {\r\n\t\t\tcontrols.stores.value = stores;\r\n\t\t\tcontrols.store.options = stores.slice().map(x => ({\r\n\t\t\t\tid: x.id,\r\n\t\t\t\tname: x.name,\r\n\t\t\t\taddress: x.address,\r\n\t\t\t\tcity: x.city,\r\n\t\t\t\tcountry: x.country,\r\n\t\t\t\tdistance: x.distance,\r\n\t\t\t}));\r\n\t\t\tconst store = stores[0];\r\n\t\t\tconst storeId = store ? store.id : null;\r\n\t\t\tthis.onNext({ stores, store: storeId, delivery });\r\n\t\t});\r\n\t}\r\n\r\n\tgetDeliveryType$() {\r\n\t\treturn CartService.getDeliveryType$(this.form.value).pipe(\r\n\t\t\ttap(deliveryTypeOptions => {\r\n\t\t\t\tconst controls = this.controls;\r\n\t\t\t\tcontrols.deliveryType.options = deliveryTypeOptions.slice().map(x => ({\r\n\t\t\t\t\tid: x.value,\r\n\t\t\t\t\tname: x.label,\r\n\t\t\t\t\tabstract: x.abstract,\r\n\t\t\t\t\tdescription: x.description,\r\n\t\t\t\t\tprice: x.price,\r\n\t\t\t\t\tfullPrice: x.fullPrice,\r\n\t\t\t\t}));\r\n\t\t\t\tthis.form.patch(Object.assign({}, { deliveryType: controls.deliveryType.options[0].id }), true);\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\t// 4. CartSteps.Recap\r\n\tonDiscountCode(_) {\r\n\t\tconst form = this.form;\r\n\t\t// console.log('CartComponent.onDelivery', form.value);\r\n\t\tthis.errorDiscount = null;\r\n\t\tCartService.getDiscount$({ discountCode: form.value.discountCode }).pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(discount => {\r\n\t\t\tthis.discount = discount;\r\n\t\t\tthis.onPatch({ discount });\r\n\t\t}, errorDiscount => {\r\n\t\t\tthis.errorDiscount = errorDiscount;\r\n\t\t});\r\n\t}\r\n\r\n\tonTimetableToggle(event) {\r\n\t\tif (this.selectedStore) {\r\n\t\t\tthis.selectedStore.showTimetable = !this.selectedStore.showTimetable;\r\n\t\t\tthis.pushChanges();\r\n\t\t}\r\n\t}\r\n\r\n\t// 5. CartSteps.Payment\r\n\tonPayment(_) {\r\n\t\tconst form = this.form;\r\n\t\tconst controls = this.controls;\r\n\t\tconst paymentMethod = controls.paymentMethod.options.find(x => x.id === form.value.paymentMethod);\r\n\t\tthis.paymentMethod = paymentMethod;\r\n\t\tif (form.valid) {\r\n\t\t\tconsole.log('CartComponent.onPayment', form.value);\r\n\t\t\tthis.onComplete(); // !!! fake\r\n\t\t}\r\n\t}\r\n\r\n\t// 6. CartSteps.Complete\r\n\tonComplete() {\r\n\t\tthis.step = CartSteps.Complete;\r\n\t\tthis.onPatch();\r\n\t\tCartService.clear$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n}\r\n\r\nCartComponent.meta = {\r\n\tselector: '[cart]',\r\n};\r\n","import { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport class ContactsService {\r\n\r\n\tstatic data$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/contacts/data.json');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/contacts/data.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic submit$(payload) {\r\n\t\tif (environment.flags.production) {\r\n\t\t\t// !!! convert to .post$\r\n\t\t\treturn ApiService.get$('/contacts/submit.json', payload);\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/contacts/submit.json');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport { ContactsService } from './contacts.service';\r\n\r\nexport class ContactsComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tlastName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\ttelephone: new FormControl(null),\r\n\t\t\tcountry: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcity: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tmessage: new FormControl(null),\r\n\t\t\tprivacy: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tnewsletter: new FormControl(this.flag),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn ContactsService.data$().pipe(\r\n\t\t\ttap(data => {\r\n\t\t\t\tconst controls = this.controls;\r\n\t\t\t\tcontrols.country.options = FormService.toSelectOptions(data.country.options);\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tconst controls = this.controls;\r\n\t\tconst country = controls.country.options.length > 1 ? controls.country.options[1].id : null;\r\n\t\tform.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\ttelephone: '0721 411112',\r\n\t\t\tcountry: country,\r\n\t\t\tcity: 'Pesaro',\r\n\t\t\tmessage: 'Hi!',\r\n\t\t\tprivacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit(model) {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('ContactsComponent.onSubmit', form.value);\r\n\t\t// console.log('ContactsComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (form.valid) {\r\n\t\t\t// console.log('ContactsComponent.onSubmit', form.value);\r\n\t\t\tform.submitted = true;\r\n\t\t\tContactsService.submit$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(_ => {\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tform.reset();\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Contact\",\r\n\t\t\t\t\t'form_name': \"Contatti\"\r\n\t\t\t\t});\r\n\t\t\t\tif (form.value.newsletter) {\r\n\t\t\t\t\tGtmService.push({\r\n\t\t\t\t\t\t'event': \"ContactNewsletter\",\r\n\t\t\t\t\t\t'form_name': \"ContattiNewsletter\"\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('ContactsComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nContactsComponent.meta = {\r\n\tselector: '[contacts]',\r\n};\r\n","import { map } from 'rxjs/operators';\r\nimport { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport class DealersService {\r\n\r\n\tstatic all$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/dealers/all.json').pipe(\r\n\t\t\t\tmap(items => items.sort((a, b) => {\r\n\t\t\t\t\treturn b.regions.length - a.regions.length;\r\n\t\t\t\t})),\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/dealers/all.json').pipe(\r\n\t\t\t\tmap(items => items.sort((a, b) => {\r\n\t\t\t\t\treturn b.regions.length - a.regions.length;\r\n\t\t\t\t})),\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/dealers/filters.json');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/dealers/filters.json');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { combineLatest } from 'rxjs';\r\nimport { FiltersComponent } from '../../shared/filters/filters.component';\r\nimport { DealersService } from './dealers.service';\r\n\r\nexport class DealersComponent extends FiltersComponent {\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tDealersService.all$(),\r\n\t\t\tDealersService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\tdoFilterItem(key, item, value) {\r\n\t\tswitch (key) {\r\n\t\t\tcase 'country':\r\n\t\t\t\treturn item.countries && item.countries.find(x => x.value === value);\r\n\t\t\tcase 'search':\r\n\t\t\t\treturn item.name.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\r\n\t\t\t\t\t// item.address.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\r\n\t\t\t\t\t(item.city && item.city.toLowerCase().indexOf(value.toLowerCase()) !== -1) ||\r\n\t\t\t\t\t(item.countries && item.countries.find(x => x.label.toLowerCase().indexOf(value.toLowerCase()) !== -1))\r\n\t\t\tdefault:\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nDealersComponent.meta = {\r\n\tselector: '[dealers]',\r\n};\r\n","import { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport class DesignersService {\r\n\r\n\tstatic all$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/designers/all');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/designers/all.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/designers/filters');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/designers/filters.json');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { combineLatest } from 'rxjs';\r\nimport { FiltersComponent } from '../../shared/filters/filters.component';\r\nimport { DesignersService } from './designers.service';\r\n\r\nexport class DesignersComponent extends FiltersComponent {\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tDesignersService.all$(),\r\n\t\t\tDesignersService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\tdoFilterItem(key, item, value) {\r\n\t\tswitch (key) {\r\n\t\t\tcase 'category':\r\n\t\t\t\treturn item.category.id === value;\r\n\t\t\tcase 'search':\r\n\t\t\t\treturn item.name.toLowerCase().indexOf(value.toLowerCase()) !== -1;\r\n\t\t\tdefault:\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nDesignersComponent.meta = {\r\n\tselector: '[designers]',\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalOutletComponent } from '../../common/modal/modal-outlet.component';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\n\r\nexport class GenericModalComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tconst data = parentInstance.modal.data;\r\n\t\t\tthis.data = data;\r\n\t\t}\r\n\t\tLocomotiveScrollService.stop();\r\n\t}\r\n\r\n\tonClose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tLocomotiveScrollService.start();\r\n\t}\r\n}\r\n\r\nGenericModalComponent.meta = {\r\n\tselector: '[generic-modal]'\r\n};\r\n","import { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport class MarketsAndLanguagesService {\r\n\r\n\tstatic all$(currentCoId) {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/markets-and-languages/all?currentCoId=' + currentCoId);\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/markets-and-languages/all.json');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { first } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalOutletComponent } from '../../common/modal/modal-outlet.component';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\nimport { environment } from '../../environment';\r\nimport { MarketsAndLanguagesService } from './markets-and-languages.service';\r\n\r\nexport class MarketsAndLanguagesModalComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tconst data = parentInstance.modal.data;\r\n\t\t}\r\n\t\tLocomotiveScrollService.stop();\r\n\t\tthis.currentMarket = environment.currentMarket;\r\n\t\tthis.currentLanguage = environment.currentLanguage;\r\n\t\tthis.markets = [];\r\n\t\tMarketsAndLanguagesService.all$(environment.currentCoId).pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(markets => {\r\n\t\t\tthis.markets = markets;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tsetMarket(market) {\r\n\t\tthis.currentMarket = market.code;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonClose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tLocomotiveScrollService.start();\r\n\t}\r\n}\r\n\r\nMarketsAndLanguagesModalComponent.meta = {\r\n\tselector: '[markets-and-languages-modal]'\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalOutletComponent } from '../../common/modal/modal-outlet.component';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\n\r\nexport class MaterialsModalComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tthis.item = null;\r\n\t\tthis.items = null;\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tconst data = parentInstance.modal.data;\r\n\t\t\tthis.item = data.item;\r\n\t\t\tthis.items = data.items;\r\n\t\t\t// console.log('MaterialsModalComponent.onInit', data);\r\n\t\t}\r\n\t\tLocomotiveScrollService.stop();\r\n\t}\r\n\r\n\thasPrev() {\r\n\t\treturn true;\r\n\t}\r\n\r\n\thasNext() {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tonPrev() {\r\n\t\tlet index = this.items.indexOf(this.item);\r\n\t\tindex--;\r\n\t\tif (index < 0) {\r\n\t\t\tindex = this.items.length - 1;\r\n\t\t}\r\n\t\tthis.item = this.items[index];\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonNext() {\r\n\t\tlet index = this.items.indexOf(this.item);\r\n\t\tindex++;\r\n\t\tif (index === this.items.length) {\r\n\t\t\tindex = 0;\r\n\t\t}\r\n\t\tthis.item = this.items[index];\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonClose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tLocomotiveScrollService.start();\r\n\t}\r\n}\r\n\r\nMaterialsModalComponent.meta = {\r\n\tselector: '[materials-modal]'\r\n};\r\n","// import { combineLatest } from 'rxjs';\r\n// import { map } from 'rxjs/operators';\r\nimport { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport class MaterialsService {\r\n\r\n\tstatic all$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/materials/all');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/materials/all.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/materials/filters');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/materials/filters.json');\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\tstatic fake$() {\r\n\t\treturn combineLatest([MaterialsService.all$(), ApiService.get$('/materials/icons.json')]).pipe(\r\n\t\t\tmap(data => {\r\n\t\t\t\tlet items = data[0];\r\n\t\t\t\tlet icons = data[1];\r\n\t\t\t\titems.forEach(item => {\r\n\t\t\t\t\tif (item.items) {\r\n\t\t\t\t\t\titem.items.forEach(sub => {\r\n\t\t\t\t\t\t\tif (sub.icons) {\r\n\t\t\t\t\t\t\t\tconst set = icons.sets[sub.icons];\r\n\t\t\t\t\t\t\t\tif (set) {\r\n\t\t\t\t\t\t\t\t\tsub.icons = set.map(x => icons.icons.find(icon => icon.id === x)).filter(x => x != null);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tconsole.log(sub.icons);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(JSON.stringify(items));\r\n\t\t\t\treturn items;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\t*/\r\n\r\n\t/*\r\n\tstatic fake$() {\r\n\t\treturn combineLatest([MaterialsService.all$(), ApiService.get$('/materials/all_.json')]).pipe(\r\n\t\t\tmap(data => {\r\n\t\t\t\tlet items = data[0];\r\n\t\t\t\tlet items_ = data[1];\r\n\t\t\t\titems = items.filter(x => x.category.name !== 'Tessuto' || !x.collection);\r\n\t\t\t\titems.forEach(item => {\r\n\t\t\t\t\tif (item.category.name === 'Tessuto') {\r\n\t\t\t\t\t\titem.items = items_.filter(x => x.collection && x.collection.id === item.id);\r\n\t\t\t\t\t\tconsole.log(item.items);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(JSON.stringify(items));\r\n\t\t\t\treturn items;\r\n\t\t\t\t// !!!\r\n\t\t\t\tlet collectionId = 1000;\r\n\t\t\t\tconst fabrics = [];\r\n\t\t\t\tconst collections = [];\r\n\t\t\t\titems_.forEach(item_ => {\r\n\t\t\t\t\tlet collection = collections.find(x => x.name === item_.collection);\r\n\t\t\t\t\tif (!collection) {\r\n\t\t\t\t\t\tcollection = {\r\n\t\t\t\t\t\t\tid: ++collectionId,\r\n\t\t\t\t\t\t\tname: item_.collection,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tcollections.push(collection);\r\n\t\t\t\t\t\tif (item_.category.name === 'Tessuto') {\r\n\t\t\t\t\t\t\tfabrics.push(Object.assign({\r\n\t\t\t\t\t\t\t\timage: `/giorgetti/img/materials/tessuto/${collection.name.toLowerCase().replace(/\\s/g, '_')}_512.jpg`,\r\n\t\t\t\t\t\t\t\tcategory: item_.category,\r\n\t\t\t\t\t\t\t}, collection));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(fabrics);\r\n\t\t\t\titems.forEach((item, i) => {\r\n\t\t\t\t\tconst item_ = items_.find(x => x.id === item.id);\r\n\t\t\t\t\t// if (item_) {\r\n\t\t\t\t\t//\titem.image = item_.image.replace(/\\s/g, '_').toLowerCase();\r\n\t\t\t\t\t//\titem.zoom = item_.zoom.replace(/\\s/g, '_').toLowerCase();\r\n\t\t\t\t\t// }\r\n\t\t\t\t\tconst collection = collections.find(x => x.name === item.collection);\r\n\t\t\t\t\tconsole.log(collection);\r\n\t\t\t\t\tif (collection) {\r\n\t\t\t\t\t\titem.collection = collection;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// item.collection = MaterialsService.toTitleCase(item.collection);\r\n\t\t\t\t\t// item.title = MaterialsService.toTitleCase(item.title);\r\n\t\t\t\t});\r\n\t\t\t\titems = items.concat(fabrics);\r\n\t\t\t\tconsole.log(JSON.stringify(items));\r\n\t\t\t\treturn items;\r\n\t\t\t\t// !!!\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic toTitleCase(sentence, seps = ' _-/') {\r\n\t\tconst capitalize = str => str.length ? str[0].toUpperCase() + str.slice(1).toLowerCase() : '';\r\n\t\tconst escape = str => str.replace(/./g, c => `\\\\${c}`);\r\n\t\tlet wordPattern = new RegExp(`[^${escape(seps)}]+`, 'g');\r\n\t\treturn sentence.replace(wordPattern, capitalize);\r\n\t}\r\n\t*/\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup } from 'rxcomp-form';\r\nimport { combineLatest } from 'rxjs';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { FilterMode } from '../../common/filter/filter-item';\r\nimport { FilterService } from '../../common/filter/filter.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport { environment } from '../../environment';\r\nimport { MaterialsService } from './materials.service';\r\n\r\nexport class MaterialsComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.categories = [];\r\n\t\tthis.selectedItem = null;\r\n\t\tthis.items = [];\r\n\t\tthis.filteredItems = [];\r\n\t\tthis.visibleItems = [];\r\n\t\tthis.filters = {};\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tcategory: new FormControl(null),\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.setFilterByKeyAndValue('category', form.value.category);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(data => {\r\n\t\t\tthis.items = data[0];\r\n\t\t\tthis.filters = data[1];\r\n\t\t\tcontrols.category.options = FormService.toSelectOptions(this.filters.category.options);\r\n\t\t\tthis.onLoad();\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tMaterialsService.all$(),\r\n\t\t\tMaterialsService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\tonLoad() {\r\n\t\tconst items = this.items;\r\n\t\tconst filters = this.filters;\r\n\t\tObject.keys(filters).forEach(key => {\r\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\r\n\t\t});\r\n\t\tconst initialParams = {};\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\tswitch (key) {\r\n\t\t\t\t\t\t\tcase 'category':\r\n\t\t\t\t\t\t\t\treturn item.category.id === value;\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t\tthis.categories = this.filters.category.options.filter(x => x.value);\r\n\t\tconst category = this.filters.category.values.length ? this.filters.category.values[0] : null;\r\n\t\tthis.form.patch({ category, search });\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(filteredItems => {\r\n\t\t\tthis.filteredItems = filteredItems;\r\n\t\t\tthis.visibleItems = this.filteredItems.slice(0, Math.min(16, this.filteredItems.length));\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t\t// console.log('MaterialsComponent.filteredItems', filteredItems.length);\r\n\t\t});\r\n\t}\r\n\r\n\tshowMore(event) {\r\n\t\tconst pageSize = 32;\r\n\t\tif (this.visibleItems.length + pageSize >= this.filteredItems.length) {\r\n\t\t\tthis.visibleItems = this.filteredItems.slice();\r\n\t\t} else {\r\n\t\t\tthis.visibleItems = this.filteredItems.slice(0, Math.min(this.visibleItems.length + pageSize, this.filteredItems.length));\r\n\t\t}\r\n\t\tthis.pushChanges();\r\n\t\tLocomotiveScrollService.update();\r\n\t}\r\n\r\n\tsetFilterByKeyAndValue(key, value) {\r\n\t\tconst filter = this.filters[key];\r\n\t\tif (filter) {\r\n\t\t\tif (filter.mode === FilterMode.QUERY) {\r\n\t\t\t\tfilter.set(value);\r\n\t\t\t} else {\r\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\r\n\t\t\t\t// console.log(filter.options, option);\r\n\t\t\t\tif (option) {\r\n\t\t\t\t\tfilter.set(option);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfilter.clear();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonToggle(item) {\r\n\t\tthis.selectedItem = this.selectedItem === item ? null : item;\r\n\t\t/*\r\n\t\tif (this.selectedItem) {\r\n\t\t\tconst selector = '#cat-' + item.category.id + '-' + item.id;\r\n\t\t\tLocomotiveScrollService.scrollToSelector(selector);\r\n\t\t}\r\n\t\t*/\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonOpenItem(item, items) {\r\n\t\tif (item.items) {\r\n\t\t\tconst active = !item.active;\r\n\t\t\tthis.filteredItems.forEach(item_ => {\r\n\t\t\t\tif (item_ !== item) {\r\n\t\t\t\t\titem_.active = false;\r\n\t\t\t\t\tconst node = document.querySelector(`#material-${item_.id}`);\r\n\t\t\t\t\tif (node) {\r\n\t\t\t\t\t\tnode.style.marginBottom = `0px`;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\titem.active = active;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (active) {\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t}\r\n\t\t\tconst node = document.querySelector(`#material-${item.id}`);\r\n\t\t\tif (node) {\r\n\t\t\t\tconst target = node.querySelector('.group--subitems');\r\n\t\t\t\tif (target) {\r\n\t\t\t\t\tconst targetRect = target.getBoundingClientRect();\r\n\t\t\t\t\tconst height = targetRect.height + 40;\r\n\t\t\t\t\tif (!active) {\r\n\t\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst from = { pow: active ? 0 : 1 };\r\n\t\t\t\t\tgsap.to(from, {\r\n\t\t\t\t\t\tpow: active ? 1 : 0,\r\n\t\t\t\t\t\tduration: height / 5000,\r\n\t\t\t\t\t\tease: Power2.easeOut,\r\n\t\t\t\t\t\tonUpdate: () => {\r\n\t\t\t\t\t\t\tnode.style.marginBottom = `${from.pow * height}px`;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tonComplete: () => {\r\n\t\t\t\t\t\t\tLocomotiveScrollService.scrollToSelector(`#material-${item.id} .group--subitems`);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tModalService.open$({ src: environment.template.modal.materialsModal, data: { item, items } }).pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t\t).subscribe(event => {\r\n\t\t\t\tconsole.log('MaterialComponent.onOpen', event);\r\n\t\t\t\t/*\r\n\t\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\t\twindow.location.href = environment.slug.reservedArea;\r\n\t\t\t\t}\r\n\t\t\t\t*/\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tsetCategory(category, event) {\r\n\t\tif (event) {\r\n\t\t\tevent.preventDefault();\r\n\t\t}\r\n\t\tthis.controls.category.value = category.value;\r\n\t\tsetTimeout(() => {\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t\tLocomotiveScrollService.scrollToSelector('#category-' + category.value, { offset: -240 });\r\n\t\t}, 500);\r\n\t}\r\n\r\n\tclearFilter(event, filter) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopImmediatePropagation();\r\n\t\tfilter.clear();\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nMaterialsComponent.meta = {\r\n\tselector: '[materials]',\r\n};\r\n","import { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport class NewsService {\r\n\r\n\tstatic all$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/news/all');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/news/all.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/news/filters');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/news/filters.json');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { combineLatest } from 'rxjs';\r\nimport { FiltersComponent } from '../../shared/filters/filters.component';\r\nimport { NewsService } from './news.service';\r\n\r\nexport class NewsComponent extends FiltersComponent {\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tNewsService.all$(),\r\n\t\t\tNewsService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\tdoFilterItem(key, item, value) {\r\n\t\tswitch (key) {\r\n\t\t\tcase 'country':\r\n\t\t\t\treturn item.country.id === value;\r\n\t\t\tcase 'search':\r\n\t\t\t\treturn item.title.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\r\n\t\t\t\t\titem.abstract.toLowerCase().indexOf(value.toLowerCase()) !== -1;\r\n\t\t\tdefault:\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nNewsComponent.meta = {\r\n\tselector: '[news]',\r\n};\r\n","import { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport class NewsletterService {\r\n\r\n\tstatic data$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/newsletter/data.json');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/newsletter/data.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic submit$(payload) {\r\n\t\tif (environment.flags.production) {\r\n\t\t\t// !!! convert to .post$\r\n\t\t\treturn ApiService.get$('/newsletter/submit.json', payload);\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/newsletter/submit.json');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocationService } from '../../common/location/location.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport RequiredIfValidator from '../../controls/required-if.validator';\r\nimport { NewsletterService } from './newsletter.service';\r\n\r\nexport class NewsletterComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst email = LocationService.deserialize('email');\r\n\t\t// console.log('NewsletterComponent', email);\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tlastName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\temail: new FormControl(email, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\toccupation: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\ttelephone: new FormControl(null),\r\n\t\t\tcountry: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tregion: new FormControl(null, [new RequiredIfValidator('country', form, 114)]), // required if country === 114, Italy\r\n\t\t\tcity: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tengagement: new FormControl(null),\r\n\t\t\tnewsletter: true,\r\n\t\t\tnewsletterLanguage: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tprivacy: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn NewsletterService.data$().pipe(\r\n\t\t\ttap(data => {\r\n\t\t\t\tconst controls = this.controls;\r\n\t\t\t\tcontrols.occupation.options = FormService.toSelectOptions(data.occupation.options);\r\n\t\t\t\tcontrols.country.options = FormService.toSelectOptions(data.country.options);\r\n\t\t\t\tcontrols.region.options = FormService.toSelectOptions(data.region.options);\r\n\t\t\t\tcontrols.engagement.options = FormService.toSelectOptions(data.engagement.options);\r\n\t\t\t\tcontrols.newsletterLanguage.options = FormService.toSelectOptions(data.newsletterLanguage.options);\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tconst controls = this.controls;\r\n\t\tconst occupation = controls.occupation.options.length > 1 ? controls.occupation.options[1].id : null;\r\n\t\tconst country = controls.country.options.length > 1 ? controls.country.options[1].id : null;\r\n\t\tconst region = controls.region.options.length > 1 ? controls.region.options[1].id : null;\r\n\t\tconst engagement = controls.engagement.options.length > 1 ? controls.engagement.options[1].id : null;\r\n\t\tconst newsletterLanguage = controls.newsletterLanguage.options.length > 1 ? controls.newsletterLanguage.options[1].id : null;\r\n\t\tform.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\ttelephone: '0721 411112',\r\n\t\t\toccupation: occupation,\r\n\t\t\tcountry: country,\r\n\t\t\tregion: region,\r\n\t\t\tcity: 'Pesaro',\r\n\t\t\tengagement: engagement,\r\n\t\t\tnewsletterLanguage: newsletterLanguage,\r\n\t\t\tprivacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit(model) {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('NewsletterComponent.onSubmit', form.value);\r\n\t\t// console.log('NewsletterComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (form.valid) {\r\n\t\t\t// console.log('NewsletterComponent.onSubmit', form.value);\r\n\t\t\tform.submitted = true;\r\n\t\t\tNewsletterService.submit$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(_ => {\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tform.reset();\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Newsletter\",\r\n\t\t\t\t\t'form_name': \"Newsletter\"\r\n\t\t\t\t});\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('NewsletterComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nNewsletterComponent.meta = {\r\n\tselector: '[newsletter]',\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalOutletComponent } from '../../common/modal/modal-outlet.component';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\n\r\nexport class OrdersModalComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tconst data = parentInstance.modal.data;\r\n\t\t\tthis.orderId = data.orderId;\r\n\t\t\t// console.log('OrdersModalComponent.onInit', data);\r\n\t\t}\r\n\t\tLocomotiveScrollService.stop();\r\n\t}\r\n\r\n\tonClose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tLocomotiveScrollService.start();\r\n\t}\r\n}\r\n\r\nOrdersModalComponent.meta = {\r\n\tselector: '[orders-modal]'\r\n};\r\n","import { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport class OrdersService {\r\n\r\n\tstatic all$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/orders/all.json');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/orders/all.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic detail$(item) {\r\n\t\tif (environment.flags.production) {\r\n\t\t\t// !!! convert to .post$\r\n\t\t\treturn ApiService.get$('/orders/detail.json', item);\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/orders/detail.json');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { finalize, first, tap } from 'rxjs/operators';\r\nimport { LocationService } from '../../common/location/location.service';\r\nimport { OrdersModalComponent } from './orders-modal.component';\r\nimport { OrdersService } from './orders.service';\r\n\r\nexport class OrdersDetailComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tthis.busy = false;\r\n\t\tthis.order = null;\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof OrdersModalComponent) {\r\n\t\t\tthis.orderId = parentInstance.orderId;\r\n\t\t} else {\r\n\t\t\tthis.orderId = LocationService.get('orderId');\r\n\t\t}\r\n\t\tif (this.orderId) {\r\n\t\t\tthis.load$().pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe();\r\n\t\t\t// console.log('OrdersDetailComponent.onInit', data);\r\n\t\t} else {\r\n\t\t\tconsole.error('OrdersDetailComponent missing orderId');\r\n\t\t}\r\n\t\tconsole.log(this);\r\n\t}\r\n\r\n\tload$() {\r\n\t\tthis.busy = true;\r\n\t\treturn OrdersService.detail$(this.orderId).pipe(\r\n\t\t\ttap(order => {\r\n\t\t\t\tthis.order = order;\r\n\t\t\t}),\r\n\t\t\tfinalize(_ => {\r\n\t\t\t\tthis.busy = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n}\r\n\r\nOrdersDetailComponent.meta = {\r\n\tselector: '[orders-detail]',\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\nimport { environment } from '../../environment';\r\nimport { OrdersService } from './orders.service';\r\n\r\nexport class OrdersComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.orders = [];\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn OrdersService.all$().pipe(\r\n\t\t\ttap(orders => {\r\n\t\t\t\tthis.orders = orders;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tonOpenOrder(order) {\r\n\t\tModalService.open$({ src: environment.template.modal.ordersModal, data: { orderId: order.id } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tconsole.log('OrdersComponent.onOpenOrder', event);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nOrdersComponent.meta = {\r\n\tselector: '[orders]',\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { first } from 'rxjs/operators';\r\nimport { LocationService } from '../../common/location/location.service';\r\nimport { environment } from '../../environment';\r\nimport { CartMiniService } from '../../shared/cart-mini/cart-mini.service';\r\nimport { CartService } from '../cart/cart.service';\r\n\r\nconst breadcumbStyle = `font-size: .8rem; text-transform: uppercase; letter-spacing: 0.075em; color: #37393b; display: none;`;\r\nconst titleStyle = `letter-spacing: 0; font-family: 'Bauer Bodoni', sans-serif; font-size: 2.9rem; margin: 0;word-wrap: break-word;text-transform: uppercase;color:#37393b;`;\r\nconst designerStyle = `font-size: .8rem; letter-spacing: 0.075em;margin-bottom: 15px;word-wrap: break-word;text-transform: uppercase; display: none;`;\r\nconst descriptionStyle = `font-size: .8rem; text-align: left;margin-bottom: 15px; letter-spacing: 0.05em; display: none;`;\r\n\r\nexport class ProductsConfigureComponent extends Component {\r\n\r\n\tget priceListByMarket() {\r\n\t\t// !!! I listini YY possibili sono: A listino EUR, B listino GB, C listino USA, D listino RMB, E listino Medio oriente\r\n\t\tswitch (environment.currentMarket.toLowerCase()) {\r\n\t\t\tdefault:\r\n\t\t\t\treturn 'A';\r\n\t\t}\r\n\t}\r\n\r\n\tget showefyUrl() {\r\n\t\tif (this.product) {\r\n\t\t\treturn `https://www.showefy.com/showroom/giorgetti/?l=${environment.currentLanguage}&c=${environment.currentMarket.toLowerCase()}&list=${this.priceListByMarket}&codprod=${this.product.code}&autoEnter=1${this.sl ? `&ext&sl=${this.sl}` : ''}`;\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.sl = LocationService.get('sl');\r\n\t\t// console.log(this.code);\r\n\t\tif (!this.product) {\r\n\t\t\tthrow ('ProductsConfigureComponent.error missing product');\r\n\t\t}\r\n\t\tthis.isReady = false;\r\n\t\tthis.isComplete = false;\r\n\t\tthis.isConfiguring = false;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst iframe = this.iframe = node.querySelector('#showefy');\r\n\t\tif (!iframe) {\r\n\t\t\tthrow ('missing iframe');\r\n\t\t}\r\n\t\tthis.onEvent = this.onEvent.bind(this);\r\n\t\tconst sfy = this.sfy = new SFYFrame(iframe, this.token, this.onEvent);\r\n\t\tsfy.init();\r\n\t\tconsole.log('ProductsConfigureComponent.onInit', sfy, iframe);\r\n\t}\r\n\r\n\tgetIframeDocument(iframe) {\r\n\t\tconst content = iframe.contentWindow || iframe.contentDocument\r\n\t\tconst iframeDocument = content.document ? content.document : content;\r\n\t\treturn iframeDocument;\r\n\t}\r\n\r\n\tonEvent(data) {\r\n\t\tconst event = JSON.parse(data);\r\n\t\tconst eventName = event.emit;\r\n\t\tif (event.status == 0) {\r\n\t\t\t// console.log('ProductsConfigureComponent.onEvent', event);\r\n\t\t\tswitch (eventName) {\r\n\t\t\t\tcase 'showefy_ready':\r\n\t\t\t\t\tthis.onReady(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'showefy_complete':\r\n\t\t\t\t\tthis.onShowefyComplete(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'start_configurator':\r\n\t\t\t\t\tthis.onStartConfigurator(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'button_pressed':\r\n\t\t\t\t\tthis.onButtonPressed(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'setButtonStatus':\r\n\t\t\t\t\tthis.onSetButtonStatus(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'getIframeSize':\r\n\t\t\t\t\tthis.onGetIframeSize(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'getProductExtData':\r\n\t\t\t\t\tthis.onGetProductExtData(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'getFastProductExtData':\r\n\t\t\t\t\tthis.onGetFastProductExtData(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconsole.log('ProductsConfigureComponent.onEvent.error', event.status, event.statusTxt, eventName);\r\n\t\t}\r\n\t}\r\n\r\n\tonReady(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onReady', event);\r\n\t\tthis.isReady = true;\r\n\t\t// this.addTexts();\r\n\t\tthis.addButtons();\r\n\t\t// this.addBreadcrumb();\r\n\t}\r\n\r\n\tonShowefyComplete(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onShowefyComplete', event);\r\n\t\tif (this.isConfiguring) {\r\n\t\t\tthis.isComplete = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonStartConfigurator(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onStartConfigurator', event);\r\n\t\tthis.isConfiguring = true;\r\n\t}\r\n\r\n\tonButtonPressed(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onButtonPressed', event, 'buttonId', event.data.id);\r\n\t\tswitch (event.data.id) {\r\n\t\t\tcase 'order':\r\n\t\t\t\tthis.sfy.getProductExtData();\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tonSetButtonStatus(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onSetButtonStatus', event);\r\n\t}\r\n\r\n\tonGetIframeSize(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onGetIframeSize', event);\r\n\t}\r\n\r\n\tonGetProductExtData(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onGetProductExtData', event.status, event.data);\r\n\t\tif (event.status === 0) {\r\n\t\t\tthis.onAddToCart(event.data);\r\n\t\t}\r\n\t}\r\n\r\n\tonGetFastProductExtData(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onGetFastProductExtData', event.status, event.data);\r\n\t\tif (event.status === 0) {\r\n\t\t\tthis.onAddToCart(event.data);\r\n\t\t}\r\n\t}\r\n\r\n\t// methods\r\n\r\n\taddTexts() {\r\n\t\tconst sfy = this.sfy;\r\n\t\tconst html = sfy.HTML;\r\n\t\tlet index = 0;\r\n\t\thtml.text[index++] = /* html */`<h1 style=\"${titleStyle}\">Nome Prodotto</h1>`;\r\n\t\thtml.text[index++] = /* html */`<h5 style=\"${designerStyle}\">Designer</h5>`;\r\n\t\thtml.text[index++] = /* html */`<div style=\"${descriptionStyle}\"><p>Descrizione</p></div>`;\r\n\t\tsfy.printHTML(html);\r\n\t}\r\n\r\n\taddButtons() {\r\n\t\tconst sfy = this.sfy;\r\n\t\tconst buttons = sfy.BUTTONS;\r\n\r\n\t\tlet index = 0;\r\n\t\tbuttons.element[index] = new sfy.PROPERTIES();\r\n\t\tbuttons.element[index].visibility = true;\r\n\t\tbuttons.element[index].id = 'order';\r\n\t\tbuttons.element[index].label = new sfy.LABEL();\r\n\t\tbuttons.element[index].label.it = 'Aggiungi al carrello';\r\n\t\tbuttons.element[index].label.en = 'Add to cart';\r\n\t\tindex++;\r\n\r\n\t\t/*\r\n\t\tbuttons.element[index] = new sfy.PROPERTIES();\r\n\t\tbuttons.element[index].visibility = true;\r\n\t\tbuttons.element[index].id = 'save_configuration';\r\n\t\tbuttons.element[index].label = new sfy.LABEL();\r\n\t\tbuttons.element[index].label.en = 'SAVE CONFIGURATION';\r\n\t\tindex++;\r\n\t\t*/\r\n\r\n\t\tsfy.setButtonStatus(buttons);\r\n\t}\r\n\r\n\taddBreadcrumb() {\r\n\t\tconst sfy = this.sfy;\r\n\t\tconst breadcrumb = sfy.BREADCUMB;\r\n\r\n\t\tlet index = 0;\r\n\r\n\t\tbreadcrumb.element[index] = new sfy.PROPERTIES();\r\n\t\tbreadcrumb.element[index].visibility = true;\r\n\t\tbreadcrumb.element[index].id = 'breadcumb_home';\r\n\t\tbreadcrumb.element[index].label = new sfy.LABEL();\r\n\t\tbreadcrumb.element[index].label.en = /* html */` Home <span aria-hidden='true'>/</span>&nbsp; `;\r\n\t\tbreadcrumb.element[index].style = breadcumbStyle;\r\n\t\tindex++;\r\n\r\n\t\tbreadcrumb.element[index] = new sfy.PROPERTIES();\r\n\t\tbreadcrumb.element[index].visibility = true;\r\n\t\tbreadcrumb.element[index].id = 'breadcumb_products';\r\n\t\tbreadcrumb.element[index].label = new sfy.LABEL();\r\n\t\tbreadcrumb.element[index].label.en = /* html */` Products <span aria-hidden='true'>/</span>&nbsp; `;\r\n\t\tbreadcrumb.element[index].style = breadcumbStyle;\r\n\t\tindex++;\r\n\r\n\t\tbreadcrumb.element[index] = new sfy.PROPERTIES();\r\n\t\tbreadcrumb.element[index].visibility = true;\r\n\t\tbreadcrumb.element[index].id = 'breadcumb_products';\r\n\t\tbreadcrumb.element[index].label = new sfy.LABEL();\r\n\t\tbreadcrumb.element[index].label.en = /* html */` Nome prodotto`;\r\n\t\tbreadcrumb.element[index].style = breadcumbStyle;\r\n\t\tindex++;\r\n\r\n\t\tsfy.printBreadcumb(breadcrumb);\r\n\t}\r\n\r\n\tonAddToCart(data) {\r\n\t\tconst cartItem = this.product;\r\n\t\tcartItem.showefy = data;\r\n\t\tif (data.image) {\r\n\t\t\tcartItem.image = data.image;\r\n\t\t}\r\n\t\tconsole.log('ProductsConfigureComponent.onAddToCart', cartItem);\r\n\t\t// resetting purchase procedure\r\n\t\tCartService.setCart(null);\r\n\t\t// getting showefy price and adding to mini cart\r\n\t\tCartMiniService.getPriceAndAddItem$(cartItem).pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n}\r\n\r\nProductsConfigureComponent.meta = {\r\n\tselector: '[products-configure]',\r\n\tinputs: ['token', 'product'],\r\n};\r\n","import { map } from 'rxjs/operators';\r\nimport { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport class ProductsDetailService {\r\n\r\n\tstatic versions$(productId) {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ProductsDetailService.sort$(ApiService.get$('/products/versions?productId=' + productId));\r\n\t\t} else {\r\n\t\t\treturn ProductsDetailService.sort$(ApiService.get$('/products-detail/versions.json'));\r\n\t\t}\r\n\t}\r\n\r\n\tstatic sort$(items$) {\r\n\t\treturn items$.pipe(\r\n\t\t\tmap(items => {\r\n\t\t\t\titems.sort((a, b) => {\r\n\t\t\t\t\tif (a.configurable !== b.configurable) {\r\n\t\t\t\t\t\treturn a.configurable ? -1 : 1;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn items;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalResolveEvent, ModalService } from '../../common/modal/modal.service';\r\nimport { environment } from '../../environment';\r\nimport { CartMiniService } from '../../shared/cart-mini/cart-mini.service';\r\nimport { HeaderService } from '../../shared/header/header.service';\r\nimport { UserService } from '../../shared/user/user.service';\r\nimport { CartService } from '../cart/cart.service';\r\nimport { ProductsDetailService } from './products-detail.service';\r\n\r\nexport class ProductsDetailComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.items = [];\r\n\t\tthis.visibleItems = [];\r\n\t\tProductsDetailService.versions$(this.product.id).pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(items => {\r\n\t\t\tthis.items = items;\r\n\t\t\tthis.visibleItems = this.items.slice(0, Math.min(4, this.items.length));\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tisAddedToCart(item) {\r\n\t\treturn CartMiniService.hasItem(item);\r\n\t}\r\n\r\n\tonAddToCart(item) {\r\n\t\tif (this.isAddedToCart(item)) {\r\n\t\t\tHeaderService.setHeader('cart');\r\n\t\t} else {\r\n\t\t\t// resetting purchase procedure\r\n\t\t\tCartService.setCart(null);\r\n\t\t\t// getting showefy price and adding to mini cart\r\n\t\t\tCartMiniService.getPriceAndAddItem$(item).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(_ => {\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tscrollTo(id) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = node.querySelector(id);\r\n\t\tif (target) {\r\n\t\t\tLocomotiveScrollService.scrollTo(target, { offset: -200 });\r\n\t\t}\r\n\t}\r\n\r\n\tshowMore(event) {\r\n\t\tconst pageSize = 12;\r\n\t\tif (this.visibleItems.length + pageSize >= this.items.length) {\r\n\t\t\tthis.visibleItems = this.items.slice();\r\n\t\t} else {\r\n\t\t\tthis.visibleItems = this.items.slice(0, Math.min(this.visibleItems.length + pageSize, this.items.length));\r\n\t\t}\r\n\t\tthis.pushChanges();\r\n\t\tLocomotiveScrollService.update();\r\n\t}\r\n\r\n\tconfigureProduct(version) {\r\n\t\twindow.location.href = `${environment.slug.configureProduct}?productId=${version.productId}&code=${version.code}`;\r\n\t}\r\n\r\n\tonReservedArea() {\r\n\t\tUserService.me$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(user => {\r\n\t\t\tif (user) {\r\n\t\t\t\twindow.location.href = environment.slug.reservedArea;\r\n\t\t\t} else {\r\n\t\t\t\tModalService.open$({ src: environment.template.modal.userModal, data: { view: 1 } }).pipe(\r\n\t\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t\t).subscribe(event => {\r\n\t\t\t\t\tconsole.log('ProductsDetailComponent.onLogin', event);\r\n\t\t\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\t\t\twindow.location.href = environment.slug.reservedArea;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nProductsDetailComponent.meta = {\r\n\tselector: '[products-detail]',\r\n\tinputs: ['product'],\r\n};\r\n","// import { combineLatest } from 'rxjs';\r\n// import { map } from 'rxjs/operators';\r\nimport { map } from 'rxjs/operators';\r\nimport { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport class ProductsService {\r\n\r\n\tstatic all$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ProductsService.sort$(ApiService.get$('/products/all'));\r\n\t\t} else {\r\n\t\t\treturn ProductsService.sort$(ApiService.get$('/products/all.json'));\r\n\t\t}\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/products/filters');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/products/filters.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic sort$(items$) {\r\n\t\treturn items$.pipe(\r\n\t\t\tmap(items => {\r\n\t\t\t\titems.sort((a, b) => {\r\n\t\t\t\t\tif (a.configurable !== b.configurable) {\r\n\t\t\t\t\t\treturn a.configurable ? -1 : 1;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn items;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\t/*\r\n\tstatic fake$() {\r\n\t\treturn combineLatest([ProductsService.all$(), ApiService.get$('/products/all_.json')]).pipe(\r\n\t\t\tmap(data => {\r\n\t\t\t\tconst items = data[0];\r\n\t\t\t\tconst items_ = data[1];\r\n\t\t\t\titems.forEach((item, i) => {\r\n\t\t\t\t\tconst other = items_.find(x => x.title === item.title);\r\n\t\t\t\t\tif (other) {\r\n\t\t\t\t\t\titem.category = {\r\n\t\t\t\t\t\t\tid: 1,\r\n\t\t\t\t\t\t\tname: other.url.replace('https://www.giorgettimeda.com/it/prodotti/', '').split('/')[0],\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(JSON.stringify(items));\r\n\t\t\t\treturn items;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\t*/\r\n\r\n}\r\n","import { combineLatest } from 'rxjs';\r\nimport { FiltersComponent } from '../../shared/filters/filters.component';\r\nimport { ProductsService } from './products.service';\r\n\r\nexport class ProductsComponent extends FiltersComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tthis.categoryId = this.categoryId || null;\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tProductsService.all$(),\r\n\t\t\tProductsService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\tsetFiltersParams() {\r\n\t\tif (this.categoryId) {\r\n\t\t\tthis.filters.category.set({ value: this.categoryId });\r\n\t\t}\r\n\t}\r\n\r\n\tdoFilterItem(key, item, value) {\r\n\t\tswitch (key) {\r\n\t\t\tcase 'category':\r\n\t\t\t\treturn item.category.id === value;\r\n\t\t\tcase 'ambience':\r\n\t\t\t\treturn item.ambience.id === value;\r\n\t\t\tcase 'material':\r\n\t\t\t\treturn item.materials.indexOf(value) !== -1;\r\n\t\t\tcase 'designer':\r\n\t\t\t\treturn item.designers.indexOf(value) !== -1;\r\n\t\t\tcase 'search':\r\n\t\t\t\treturn item.title.toLowerCase().indexOf(value.toLowerCase()) !== -1;\r\n\t\t\tdefault:\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nProductsComponent.meta = {\r\n\tselector: '[products]',\r\n\tinputs: ['categoryId'],\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalOutletComponent } from '../../common/modal/modal-outlet.component';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\n\r\nexport class ProjectsRegistrationModalComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tconst data = parentInstance.modal.data;\r\n\t\t}\r\n\t\tLocomotiveScrollService.stop();\r\n\t}\r\n\r\n\tonClose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tLocomotiveScrollService.start();\r\n\t}\r\n}\r\n\r\nProjectsRegistrationModalComponent.meta = {\r\n\tselector: '[projects-registration-modal]'\r\n};\r\n","import { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport class ProjectsRegistrationService {\r\n\r\n\tstatic data$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/projects-registration/data.json');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/projects-registration/data.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic submit$(payload) {\r\n\t\tif (environment.flags.production) {\r\n\t\t\t// !!! convert to .post$\r\n\t\t\treturn ApiService.get$('/projects-registration/submit.json', payload);\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/projects-registration/submit.json');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport { ProjectsRegistrationService } from './projects-registration.service';\r\n\r\nexport class ProjectsRegistrationComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tdealer: new FormGroup({\r\n\t\t\t\tfullName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tcountry: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tcity: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t}),\r\n\t\t\tclient: new FormGroup({\r\n\t\t\t\tfullName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tcountry: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tcity: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t}),\r\n\t\t\tarchitect: new FormGroup({\r\n\t\t\t\tfullName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tcountry: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tcity: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\t\ttelephone: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t}),\r\n\t\t\ttype: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tdestination: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tproducts: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tpicture: new FormControl(null),\r\n\t\t\tprivacy: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn ProjectsRegistrationService.data$().pipe(\r\n\t\t\ttap(data => {\r\n\t\t\t\tconst controls = this.controls;\r\n\t\t\t\tcontrols.dealer.controls.country.options = FormService.toSelectOptions(data.country.options);\r\n\t\t\t\tcontrols.client.controls.country.options = FormService.toSelectOptions(data.country.options);\r\n\t\t\t\tcontrols.architect.controls.country.options = FormService.toSelectOptions(data.country.options);\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tconst controls = this.controls;\r\n\t\tconst country = controls.dealer.controls.country.options.length > 1 ? controls.dealer.controls.country.options[1].id : null;\r\n\t\tform.patch({\r\n\t\t\tdealer: {\r\n\t\t\t\tfullName: 'Agente Jhon Appleseed',\r\n\t\t\t\tcountry: country,\r\n\t\t\t\tcity: 'Pesaro',\r\n\t\t\t},\r\n\t\t\tclient: {\r\n\t\t\t\tfullName: 'Cliente Jhon Appleseed',\r\n\t\t\t\tcountry: country,\r\n\t\t\t\tcity: 'Pesaro',\r\n\t\t\t},\r\n\t\t\tarchitect: {\r\n\t\t\t\tfullName: 'Architetto Jhon Appleseed',\r\n\t\t\t\tcountry: country,\r\n\t\t\t\tcity: 'Pesaro',\r\n\t\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\t\ttelephone: '0721411112',\r\n\t\t\t},\r\n\t\t\ttype: 'Hotel',\r\n\t\t\tdestination: 'Hospitality',\r\n\t\t\tproducts: 'Adam, Clop',\r\n\t\t\tprivacy: true,\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('ProjectsRegistrationComponent.onSubmit', form.value);\r\n\t\tif (form.valid) {\r\n\t\t\tform.submitted = true;\r\n\t\t\tProjectsRegistrationService.submit$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\tconsole.log('ProjectsRegistrationComponent.onSubmit', response);\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Project Registration\",\r\n\t\t\t\t\t'form_name': \"Registrazione Progetto\"\r\n\t\t\t\t});\r\n\t\t\t\tif (!this.isModal) {\r\n\t\t\t\t\tform.reset();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t}\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('ProjectsRegistrationComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tform.submitted = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonClose() {\r\n\t\tthis.close.next(this.form.value);\r\n\t}\r\n}\r\n\r\nProjectsRegistrationComponent.meta = {\r\n\tselector: '[projects-registration]',\r\n\toutputs: ['close'],\r\n\tinputs: ['isModal'],\r\n};\r\n","import { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport class ProjectsService {\r\n\r\n\tstatic all$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/projects/all');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/projects/all.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/projects/filters');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/projects/filters.json');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { combineLatest } from 'rxjs';\r\nimport { FiltersComponent } from '../../shared/filters/filters.component';\r\nimport { ProjectsService } from './projects.service';\r\n\r\nexport class ProjectsComponent extends FiltersComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tthis.categoryId = this.categoryId || null;\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tProjectsService.all$(),\r\n\t\t\tProjectsService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\tsetFiltersParams() {\r\n\t\tif (this.categoryId) {\r\n\t\t\tthis.filters.category.set({ value: this.categoryId });\r\n\t\t}\r\n\t}\r\n\r\n\tdoFilterItem(key, item, value) {\r\n\t\tswitch (key) {\r\n\t\t\tcase 'category':\r\n\t\t\t\treturn item.category.id === value;\r\n\t\t\tcase 'search':\r\n\t\t\t\treturn item.title.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\r\n\t\t\t\t\titem.country.toLowerCase().indexOf(value.toLowerCase()) !== -1;\r\n\t\t\tdefault:\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nProjectsComponent.meta = {\r\n\tselector: '[projects]',\r\n\tinputs: ['categoryId'],\r\n};\r\n","import { BehaviorSubject, of } from 'rxjs';\r\nimport { map, switchMap } from 'rxjs/operators';\r\nimport { LocalStorageService } from '../../common/storage/local-storage.service';\r\n\r\nexport class FilesService {\r\n\r\n\tstatic files$_ = new BehaviorSubject([]);\r\n\r\n\tstatic get currentFiles() {\r\n\t\treturn this.files$_.getValue();\r\n\t}\r\n\r\n\tstatic hasFile(file) {\r\n\t\tconst files = this.currentFiles;\r\n\t\tconst index = files.reduce((p, c, i) => {\r\n\t\t\treturn p !== -1 ? p : (c.id === file.id ? i : p);\r\n\t\t}, -1);\r\n\t\treturn index !== -1;\r\n\t}\r\n\r\n\tstatic setFiles(files) {\r\n\t\tif (files) {\r\n\t\t\tLocalStorageService.set('files', files);\r\n\t\t} else {\r\n\t\t\tLocalStorageService.delete('files');\r\n\t\t}\r\n\t\tthis.files$_.next(files);\r\n\t}\r\n\r\n\tstatic files$() {\r\n\t\tconst localFiles = LocalStorageService.get('files') || [];\r\n\t\treturn of(localFiles).pipe(\r\n\t\t\tswitchMap(files => {\r\n\t\t\t\tthis.setFiles(files);\r\n\t\t\t\treturn this.files$_;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic addFile$(file) {\r\n\t\treturn of(file).pipe(\r\n\t\t\tmap(file => {\r\n\t\t\t\tconst files = this.currentFiles.slice();\r\n\t\t\t\tconst index = files.reduce((p, c, i) => {\r\n\t\t\t\t\treturn p !== -1 ? p : (c.id === file.id ? i : p);\r\n\t\t\t\t}, -1);\r\n\t\t\t\tif (index === -1) {\r\n\t\t\t\t\tfiles.push(file);\r\n\t\t\t\t\tthis.setFiles(files);\r\n\t\t\t\t\treturn file;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic removeFile$(file) {\r\n\t\treturn of(file).pipe(\r\n\t\t\tmap(file => {\r\n\t\t\t\tconst files = this.currentFiles.slice();\r\n\t\t\t\tconst index = files.reduce((p, c, i) => {\r\n\t\t\t\t\treturn p !== -1 ? p : (c.id === file.id ? i : p);\r\n\t\t\t\t}, -1);\r\n\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\tfiles.splice(index, 1);\r\n\t\t\t\t\tthis.setFiles(files);\r\n\t\t\t\t\treturn file;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic removeAll$() {\r\n\t\treturn of([]).pipe(\r\n\t\t\tmap(files => {\r\n\t\t\t\tthis.setFiles(files);\r\n\t\t\t\treturn files;\r\n\t\t\t}),\r\n\t\t)\r\n\t}\r\n\r\n}\r\n","import { combineLatest } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\nimport { FilesService } from '../../shared/files/files.service';\r\n\r\nexport class ReservedAreaService {\r\n\r\n\tstatic all$() {\r\n\t\treturn (\r\n\t\t\tenvironment.flags.production ?\r\n\t\t\t\tApiService.get$(`/reserved-area/all.json`) :\r\n\t\t\t\tApiService.get$(`/reserved-area/all.json`)\r\n\t\t).pipe(\r\n\t\t\tmap(items => {\r\n\t\t\t\titems.forEach(x => {\r\n\t\t\t\t\tx.title = ReservedAreaService.toTitleCase(x.title.replace(/_/g, ' '));\r\n\t\t\t\t});\r\n\t\t\t\treturn items;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic all_$() {\r\n\t\treturn combineLatest([ReservedAreaService.get$(), FilesService.files$()]).pipe(\r\n\t\t\tmap(data => {\r\n\t\t\t\tconst items = data[0];\r\n\t\t\t\tconst files = data[1];\r\n\t\t\t\titems.forEach(item => {\r\n\t\t\t\t\tif (files.find(x => x.id === item.id)) {\r\n\t\t\t\t\t\titem.added = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\titem.added = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn items;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic toTitleCase(sentence, seps = ' _-/') {\r\n\t\tconst capitalize = str => str.length ? str[0].toUpperCase() + str.slice(1).toLowerCase() : '';\r\n\t\tconst escape = str => str.replace(/./g, c => `\\\\${c}`);\r\n\t\tlet wordPattern = new RegExp(`[^${escape(seps)}]+`, 'g');\r\n\t\treturn sentence.replace(wordPattern, capitalize);\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\nimport { environment } from '../../environment';\r\nimport { FilesService } from '../../shared/files/files.service';\r\nimport { UserService } from '../../shared/user/user.service';\r\nimport { ReservedAreaService } from './reserved-area.service';\r\n\r\nexport class ReservedAreaComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.user = undefined;\r\n\t\tthis.items = [];\r\n\t\tthis.tree = [];\r\n\t\tthis.files = [];\r\n\t\tthis.visibleFiles = [];\r\n\t\tthis.item = null;\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t\tUserService.me$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(user => {\r\n\t\t\tconsole.log('ReservedAreaComponent.user', user);\r\n\t\t\tthis.user = user;\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn ReservedAreaService.all$().pipe(\r\n\t\t\ttap(items => {\r\n\t\t\t\tthis.items = items;\r\n\t\t\t\tthis.tree = this.getTree(items);\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tgetTree(items, parentId) {\r\n\t\tlet tree = items.filter(x => x.parentId === parentId && x.type === 'folder').map(x => {\r\n\t\t\tconst item = Object.assign({}, x);\r\n\t\t\titem.items = this.getTree(items, x.id);\r\n\t\t\treturn item;\r\n\t\t});\r\n\t\treturn tree;\r\n\t}\r\n\r\n\tonOpen(item) {\r\n\t\tif (item.active) {\r\n\t\t\tthis.item = item;\r\n\t\t\tthis.files = this.items.filter(x => x.type === 'file' && x.parentId === item.id);\r\n\t\t\tthis.visibleFiles = this.files.slice(0, Math.min(8, this.files.length));\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t}\r\n\t}\r\n\r\n\tshowMore(event) {\r\n\t\tconst pageSize = 32;\r\n\t\tif (this.visibleFiles.length + pageSize >= this.files.length) {\r\n\t\t\tthis.visibleFiles = this.files.slice();\r\n\t\t} else {\r\n\t\t\tthis.visibleFiles = this.files.slice(0, Math.min(this.visibleFiles.length + pageSize, this.files.length));\r\n\t\t}\r\n\t\tthis.pushChanges();\r\n\t\tLocomotiveScrollService.update();\r\n\t}\r\n\r\n\tonProjectRegistration(event) {\r\n\t\tModalService.open$({ src: environment.template.modal.projectsRegistrationModal }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tconsole.log('ReservedAreaComponent.onProjectRegistration', event);\r\n\t\t});\r\n\t}\r\n\r\n\tonToggleFile(file) {\r\n\t\t(this.isAddedToFiles(file) ? FilesService.removeFile$(file) : FilesService.addFile$(file)).pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(_ => {\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tisAddedToFiles(file) {\r\n\t\treturn FilesService.hasFile(file);\r\n\t}\r\n\r\n\tonLogout() {\r\n\t\tUserService.signout$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n}\r\n\r\nReservedAreaComponent.meta = {\r\n\tselector: '[reserved-area]',\r\n};\r\n","import { map } from 'rxjs/operators';\r\nimport { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport class StoreLocatorService {\r\n\r\n\tstatic all$() {\r\n\t\treturn (\r\n\t\t\tenvironment.flags.production ?\r\n\t\t\t\tApiService.get$(`/store-locator/all.json`) :\r\n\t\t\t\tApiService.get$(`/store-locator/all.json`)\r\n\t\t).pipe(\r\n\t\t\tmap(items => items.sort((a, b) => {\r\n\t\t\t\treturn a.rank - b.rank;\r\n\t\t\t})),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/store-locator/filters.json');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/store-locator/filters.json');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { combineLatest } from 'rxjs';\r\nimport { FiltersComponent } from '../../shared/filters/filters.component';\r\nimport { StoreLocatorService } from './store-locator.service';\r\n\r\nexport class StoreLocatorComponent extends FiltersComponent {\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tStoreLocatorService.all$(),\r\n\t\t\tStoreLocatorService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\tdoFilterItem(key, item, value) {\r\n\t\tswitch (key) {\r\n\t\t\tcase 'country':\r\n\t\t\t\treturn item.country && item.country.id === value;\r\n\t\t\tcase 'category':\r\n\t\t\t\treturn item.category && item.category.id === value;\r\n\t\t\tcase 'search':\r\n\t\t\t\treturn item.name.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\r\n\t\t\t\t\t// item.address.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\r\n\t\t\t\t\titem.city.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\r\n\t\t\t\t\titem.country.name.toLowerCase().indexOf(value.toLowerCase()) !== -1;\r\n\t\t\tdefault:\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nStoreLocatorComponent.meta = {\r\n\tselector: '[store-locator]',\r\n};\r\n","/**\n * Copyright 2019 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface OverlayViewSafe extends google.maps.OverlayView {}\n\n/**\n * Extends an object's prototype by another's.\n *\n * @param type1 The Type to be extended.\n * @param type2 The Type to extend with.\n * @ignore\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction extend(type1: any, type2: any): void {\n  // eslint-disable-next-line prefer-const\n  for (let property in type2.prototype) {\n    type1.prototype[property] = type2.prototype[property];\n  }\n}\n\n/**\n * @ignore\n */\nexport class OverlayViewSafe {\n  constructor() {\n    // MarkerClusterer implements google.maps.OverlayView interface. We use the\n    // extend function to extend MarkerClusterer with google.maps.OverlayView\n    // because it might not always be available when the code is defined so we\n    // look for it at the last possible moment. If it doesn't exist now then\n    // there is no point going ahead :)\n    extend(OverlayViewSafe, google.maps.OverlayView);\n  }\n}\n","/**\n * Copyright 2019 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * This class represents the object for values in the `styles` array passed\n * to the {@link MarkerClusterer} constructor. The element in this array that is used to\n * style the cluster icon is determined by calling the `calculator` function.\n */\nimport { Cluster } from \"./cluster\";\nimport { OverlayViewSafe } from \"./overlay-view-safe\";\n\n/**\n *\n * @hidden\n */\nfunction toCssText(styles: { [key: string]: string }): string {\n  return Object.keys(styles)\n    .reduce((acc, key) => {\n      if (styles[key]) {\n        acc.push(key + \":\" + styles[key]);\n      }\n      return acc;\n    }, [])\n    .join(\";\");\n}\n\n/**\n *\n * @hidden\n */\nfunction coercePixels(pixels: number): string {\n  return pixels ? pixels + \"px\" : undefined;\n}\n\nexport interface ClusterIconStyle {\n  /** The URL of the cluster icon image file. If not set, img element will not be created */\n  url?: string;\n  /** The name of the CSS class defining styles for the cluster markers. */\n  className?: string;\n  /** Height The display height (in pixels) of the cluster icon. Required. */\n  height: number;\n  /** Width The display width (in pixels) of the cluster icon. Required. */\n  width: number;\n  /**\n   * The position (in pixels) from the center of the cluster icon to\n   * where the text label is to be centered and drawn. The format is `[yoffset, xoffset]`\n   * where `yoffset` increases as you go down from center and `xoffset`\n   * increases to the right of center. The default is `[0, 0]`.\n   */\n  anchorText?: [number, number];\n  /**\n   * The anchor position (in pixels) of the cluster icon. This is the\n   * spot on the cluster icon that is to be aligned with the cluster position. The format is\n   * `[yoffset, xoffset]` where `yoffset` increases as you go down and\n   * `xoffset` increases to the right of the top-left corner of the icon. The default\n   * anchor position is the center of the cluster icon.\n   */\n  anchorIcon?: [number, number];\n  /**\n   * The color of the label text shown on the cluster icon.\n   * @default `\"black\"`\n   */\n  textColor?: string;\n  /** The size (in pixels) of the label text shown on the cluster icon.\n   * @default `11`\n   */\n  textSize?: number;\n\n  /** The line height (in pixels) of the label text shown on the cluster icon.\n   * @default the same as cluster icon height\n   */\n  textLineHeight?: number;\n  /**\n   * The value of the CSS `text-decoration`\n   * property for the label text shown on the cluster icon.\n   *\n   * @default `\"none\"`\n   */\n  textDecoration?: string;\n  /**\n   * The value of the CSS `font-weight`\n   * property for the label text shown on the cluster icon.\n   *\n   *  @default `\"bold\"`\n   */\n  fontWeight?: string;\n  /**\n   *  The value of the CSS `font-style`\n   *  property for the label text shown on the cluster icon.\n   *\n   *  @default `\"normal\"`\n   */\n  fontStyle?: string;\n  /**\n   *  The value of the CSS `font-family`\n   *  property for the label text shown on the cluster icon.\n   *  @default `\"Arial,sans-serif\"`\n   */\n  fontFamily?: string;\n  /**\n   * The position of the cluster icon image\n   * within the image defined by `url`. The format is `\"xpos ypos\"`\n   * (the same format as for the CSS `background-position` property). You must set\n   * this property appropriately when the image defined by `url` represents a sprite\n   * containing multiple images. Note that the position <i>must</i> be specified in px units.\n   *\n   * @default `\"0 0\"`\n   */\n  backgroundPosition?: string;\n}\n\n/**\n * @description This is an object containing general information about a cluster icon. This is\n *  the object that a `calculator` function returns.\n */\nexport interface ClusterIconInfo {\n  /**\n   * The text of the label to be shown on the cluster icon.\n   */\n  text: string;\n  /**\n   * The index plus 1 of the element in the `styles`\n   */\n  index: number;\n  /**\n   * The tooltip to display when the mouse moves over the cluster icon.\n   * If this value is `undefined` or `\"\"`, `title` is set to the\n   * value of the `title` property passed to the MarkerClusterer.\n   */\n  title: string;\n  /**\n   * An override for dynamic cluster icon url (if not provided, the component will use the default style icon)\n   */\n  url?: string;\n}\n\n/**\n * A cluster icon.\n */\nexport class ClusterIcon extends OverlayViewSafe {\n  private className_: string;\n  private center_: google.maps.LatLng = null;\n  private div_: HTMLDivElement = null;\n  private sums_: ClusterIconInfo = null;\n  private visible_ = false;\n\n  private style: ClusterIconStyle = null;\n\n  private anchorText_: [number, number];\n  private anchorIcon_: [number, number];\n\n  private boundsChangedListener_: google.maps.MapsEventListener;\n\n  /**\n   * @param cluster_ The cluster with which the icon is to be associated.\n   * @param styles_ An array of {@link ClusterIconStyle} defining the cluster icons\n   *  to use for various cluster sizes.\n   */\n  constructor(private cluster_: Cluster, private styles_: ClusterIconStyle[]) {\n    super();\n\n    this.setMap(cluster_.getMap()); // Note: this causes onAdd to be called\n  }\n\n  /**\n   * Adds the icon to the DOM.\n   */\n  onAdd(): void {\n    let cMouseDownInCluster: boolean;\n    let cDraggingMapByCluster: boolean;\n\n    const mc = this.cluster_.getMarkerClusterer();\n\n    const [major, minor] = google.maps.version.split(\".\");\n\n    const gmVersion = parseInt(major, 10) * 100 + parseInt(minor, 10);\n\n    this.div_ = document.createElement(\"div\");\n    if (this.visible_) {\n      this.show();\n    }\n\n    this.getPanes().overlayMouseTarget.appendChild(this.div_);\n\n    // Fix for Issue 157\n    this.boundsChangedListener_ = google.maps.event.addListener(\n      this.getMap(),\n      \"bounds_changed\",\n      () => {\n        cDraggingMapByCluster = cMouseDownInCluster;\n      }\n    );\n\n    google.maps.event.addDomListener(this.div_, \"mousedown\", () => {\n      cMouseDownInCluster = true;\n      cDraggingMapByCluster = false;\n    });\n\n    // March 1, 2018: Fix for this 3.32 exp bug, https://issuetracker.google.com/issues/73571522\n    // But it doesn't work with earlier releases so do a version check.\n    if (gmVersion >= 332) {\n      // Ugly version-dependent code\n      google.maps.event.addDomListener(this.div_, \"touchstart\", (e: Event) => {\n        e.stopPropagation();\n      });\n    }\n\n    google.maps.event.addDomListener(this.div_, \"click\", (e: Event) => {\n      cMouseDownInCluster = false;\n      if (!cDraggingMapByCluster) {\n        /**\n         * This event is fired when a cluster marker is clicked.\n         * @name MarkerClusterer#click\n         * @param {Cluster} c The cluster that was clicked.\n         * @event\n         */\n        google.maps.event.trigger(mc, \"click\", this.cluster_);\n        google.maps.event.trigger(mc, \"clusterclick\", this.cluster_); // deprecated name\n\n        // The default click handler follows. Disable it by setting\n        // the zoomOnClick property to false.\n        if (mc.getZoomOnClick()) {\n          // Zoom into the cluster.\n          const mz = mc.getMaxZoom();\n          const theBounds = this.cluster_.getBounds();\n          (mc.getMap() as google.maps.Map).fitBounds(theBounds);\n          // There is a fix for Issue 170 here:\n          setTimeout(() => {\n            (mc.getMap() as google.maps.Map).fitBounds(theBounds);\n            // Don't zoom beyond the max zoom level\n            if (mz !== null && mc.getMap().getZoom() > mz) {\n              mc.getMap().setZoom(mz + 1);\n            }\n          }, 100);\n        }\n\n        // Prevent event propagation to the map:\n        e.cancelBubble = true;\n        if (e.stopPropagation) {\n          e.stopPropagation();\n        }\n      }\n    });\n\n    google.maps.event.addDomListener(this.div_, \"mouseover\", () => {\n      /**\n       * This event is fired when the mouse moves over a cluster marker.\n       * @name MarkerClusterer#mouseover\n       * @param {Cluster} c The cluster that the mouse moved over.\n       * @event\n       */\n      google.maps.event.trigger(mc, \"mouseover\", this.cluster_);\n    });\n\n    google.maps.event.addDomListener(this.div_, \"mouseout\", () => {\n      /**\n       * This event is fired when the mouse moves out of a cluster marker.\n       * @name MarkerClusterer#mouseout\n       * @param {Cluster} c The cluster that the mouse moved out of.\n       * @event\n       */\n      google.maps.event.trigger(mc, \"mouseout\", this.cluster_);\n    });\n  }\n\n  /**\n   * Removes the icon from the DOM.\n   */\n  onRemove(): void {\n    if (this.div_ && this.div_.parentNode) {\n      this.hide();\n      google.maps.event.removeListener(this.boundsChangedListener_);\n      google.maps.event.clearInstanceListeners(this.div_);\n      this.div_.parentNode.removeChild(this.div_);\n      this.div_ = null;\n    }\n  }\n\n  /**\n   * Draws the icon.\n   */\n  draw(): void {\n    if (this.visible_) {\n      const pos = this.getPosFromLatLng_(this.center_);\n      this.div_.style.top = pos.y + \"px\";\n      this.div_.style.left = pos.x + \"px\";\n    }\n  }\n\n  /**\n   * Hides the icon.\n   */\n  hide(): void {\n    if (this.div_) {\n      this.div_.style.display = \"none\";\n    }\n    this.visible_ = false;\n  }\n\n  /**\n   * Positions and shows the icon.\n   */\n  show(): void {\n    if (this.div_) {\n      this.div_.className = this.className_;\n      this.div_.style.cssText = this.createCss_(\n        this.getPosFromLatLng_(this.center_)\n      );\n\n      this.div_.innerHTML =\n        (this.style.url ? this.getImageElementHtml() : \"\") +\n        this.getLabelDivHtml();\n\n      if (typeof this.sums_.title === \"undefined\" || this.sums_.title === \"\") {\n        this.div_.title = this.cluster_.getMarkerClusterer().getTitle();\n      } else {\n        this.div_.title = this.sums_.title;\n      }\n      this.div_.style.display = \"\";\n    }\n    this.visible_ = true;\n  }\n\n  private getLabelDivHtml(): string {\n    const mc = this.cluster_.getMarkerClusterer();\n    const ariaLabel = mc.ariaLabelFn(this.sums_.text);\n\n    const divStyle: { [key: string]: string } = {\n      position: \"absolute\",\n      top: coercePixels(this.anchorText_[0]),\n      left: coercePixels(this.anchorText_[1]),\n      color: this.style.textColor,\n      \"font-size\": coercePixels(this.style.textSize),\n      \"font-family\": this.style.fontFamily,\n      \"font-weight\": this.style.fontWeight,\n      \"font-style\": this.style.fontStyle,\n      \"text-decoration\": this.style.textDecoration,\n      \"text-align\": \"center\",\n      width: coercePixels(this.style.width),\n      \"line-height\": coercePixels(this.style.textLineHeight),\n    };\n\n    return `\n<div aria-label=\"${ariaLabel}\" style=\"${toCssText(divStyle)}\" tabindex=\"0\">\n  <span aria-hidden=\"true\">${this.sums_.text}</span>\n</div>\n`;\n  }\n\n  private getImageElementHtml(): string {\n    // NOTE: values must be specified in px units\n    const bp = (this.style.backgroundPosition || \"0 0\").split(\" \");\n    const spriteH = parseInt(bp[0].replace(/^\\s+|\\s+$/g, \"\"), 10);\n    const spriteV = parseInt(bp[1].replace(/^\\s+|\\s+$/g, \"\"), 10);\n\n    let dimensions: { [key: string]: string } = {};\n\n    if (this.cluster_.getMarkerClusterer().getEnableRetinaIcons()) {\n      dimensions = {\n        width: coercePixels(this.style.width),\n        height: coercePixels(this.style.height),\n      };\n    } else {\n      const [Y1, X1, Y2, X2] = [\n        -1 * spriteV,\n        -1 * spriteH + this.style.width,\n        -1 * spriteV + this.style.height,\n        -1 * spriteH,\n      ];\n      dimensions = {\n        clip: `rect(${Y1}px, ${X1}px, ${Y2}px, ${X2}px)`,\n      };\n    }\n\n    const overrideDimensionsDynamicIcon = this.sums_.url\n      ? { width: \"100%\", height: \"100%\" }\n      : {};\n\n    const cssText = toCssText({\n      position: \"absolute\",\n      top: coercePixels(spriteV),\n      left: coercePixels(spriteH),\n      ...dimensions,\n      ...overrideDimensionsDynamicIcon,\n    });\n\n    return `<img alt=\"${this.sums_.text}\" aria-hidden=\"true\" src=\"${this.style.url}\" style=\"${cssText}\"/>`;\n  }\n\n  /**\n   * Sets the icon styles to the appropriate element in the styles array.\n   *\n   * @ignore\n   * @param sums The icon label text and styles index.\n   */\n  useStyle(sums: ClusterIconInfo): void {\n    this.sums_ = sums;\n    let index = Math.max(0, sums.index - 1);\n    index = Math.min(this.styles_.length - 1, index);\n    this.style = this.sums_.url\n      ? { ...this.styles_[index], url: this.sums_.url }\n      : this.styles_[index];\n\n    this.anchorText_ = this.style.anchorText || [0, 0];\n    this.anchorIcon_ = this.style.anchorIcon || [\n      Math.floor(this.style.height / 2),\n      Math.floor(this.style.width / 2),\n    ];\n\n    this.className_ =\n      this.cluster_.getMarkerClusterer().getClusterClass() +\n      \" \" +\n      (this.style.className || \"cluster-\" + index);\n  }\n\n  /**\n   * Sets the position at which to center the icon.\n   *\n   * @param center The latlng to set as the center.\n   */\n  setCenter(center: google.maps.LatLng): void {\n    this.center_ = center;\n  }\n\n  /**\n   * Creates the `cssText` style parameter based on the position of the icon.\n   *\n   * @param pos The position of the icon.\n   * @return The CSS style text.\n   */\n  private createCss_(pos: google.maps.Point): string {\n    return toCssText({\n      \"z-index\": `${this.cluster_.getMarkerClusterer().getZIndex()}`,\n      top: coercePixels(pos.y),\n      left: coercePixels(pos.x),\n      width: coercePixels(this.style.width),\n      height: coercePixels(this.style.height),\n      cursor: \"pointer\",\n      position: \"absolute\",\n      \"-webkit-user-select\": \"none\",\n      \"-khtml-user-select\": \"none\",\n      \"-moz-user-select\": \"none\",\n      \"-o-user-select\": \"none\",\n      \"user-select\": \"none\",\n    });\n  }\n\n  /**\n   * Returns the position at which to place the DIV depending on the latlng.\n   *\n   * @param latlng The position in latlng.\n   * @return The position in pixels.\n   */\n  private getPosFromLatLng_(latlng: google.maps.LatLng): google.maps.Point {\n    const pos = this.getProjection().fromLatLngToDivPixel(latlng);\n    pos.x = Math.floor(pos.x - this.anchorIcon_[1]);\n    pos.y = Math.floor(pos.y - this.anchorIcon_[0]);\n    return pos;\n  }\n}\n","/**\n * Copyright 2019 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { MarkerClusterer, ClusterAugmentedMarker } from \"./markerclusterer\";\nimport { ClusterIcon } from \"./cluster-icon\";\n\n/**\n * Creates a single cluster that manages a group of proximate markers.\n *  Used internally, do not call this constructor directly.\n */\nexport class Cluster {\n  private map_ = this.markerClusterer_.getMap() as google.maps.Map;\n  private minClusterSize_: number = this.markerClusterer_.getMinimumClusterSize();\n  private averageCenter_: boolean = this.markerClusterer_.getAverageCenter();\n  private markers_: ClusterAugmentedMarker[] = []; // TODO: type;\n  private center_: google.maps.LatLng = null;\n  private bounds_: google.maps.LatLngBounds = null;\n  private clusterIcon_ = new ClusterIcon(\n    this,\n    this.markerClusterer_.getStyles()\n  );\n\n  /**\n   *\n   * @param markerClusterer_ The `MarkerClusterer` object with which this\n   *  cluster is associated.\n   */\n  constructor(private markerClusterer_: MarkerClusterer) {}\n\n  /**\n   * Returns the number of markers managed by the cluster. You can call this from\n   * a `click`, `mouseover`, or `mouseout` event handler for the `MarkerClusterer` object.\n   *\n   * @return The number of markers in the cluster.\n   */\n  public getSize(): number {\n    return this.markers_.length;\n  }\n\n  /**\n   * Returns the array of markers managed by the cluster. You can call this from\n   * a `click`, `mouseover`, or `mouseout` event handler for the `MarkerClusterer` object.\n   *\n   * @return The array of markers in the cluster.\n   */\n  public getMarkers(): google.maps.Marker[] {\n    return this.markers_;\n  }\n\n  /**\n   * Returns the center of the cluster. You can call this from\n   * a `click`, `mouseover`, or `mouseout` event handler\n   * for the `MarkerClusterer` object.\n   *\n   * @return The center of the cluster.\n   */\n  public getCenter(): google.maps.LatLng {\n    return this.center_;\n  }\n\n  /**\n   * Returns the map with which the cluster is associated.\n   *\n   * @return The map.\n   * @ignore\n   */\n  public getMap(): google.maps.Map {\n    return this.map_;\n  }\n\n  /**\n   * Returns the `MarkerClusterer` object with which the cluster is associated.\n   *\n   * @return The associated marker clusterer.\n   * @ignore\n   */\n  public getMarkerClusterer(): MarkerClusterer {\n    return this.markerClusterer_;\n  }\n\n  /**\n   * Returns the bounds of the cluster.\n   *\n   * @return the cluster bounds.\n   * @ignore\n   */\n  public getBounds(): google.maps.LatLngBounds {\n    const bounds = new google.maps.LatLngBounds(this.center_, this.center_);\n    const markers = this.getMarkers();\n    for (let i = 0; i < markers.length; i++) {\n      bounds.extend(markers[i].getPosition());\n    }\n    return bounds;\n  }\n\n  /**\n   * Removes the cluster from the map.\n   *\n   * @ignore\n   */\n  public remove(): void {\n    this.clusterIcon_.setMap(null);\n    this.markers_ = [];\n    delete this.markers_;\n  }\n\n  /**\n   * Adds a marker to the cluster.\n   *\n   * @param marker The marker to be added.\n   * @return True if the marker was added.\n   * @ignore\n   */\n  public addMarker(\n    marker: google.maps.Marker & { isAdded?: boolean }\n  ): boolean {\n    if (this.isMarkerAlreadyAdded_(marker)) {\n      return false;\n    }\n\n    if (!this.center_) {\n      this.center_ = marker.getPosition();\n      this.calculateBounds_();\n    } else {\n      if (this.averageCenter_) {\n        const l = this.markers_.length + 1;\n        const lat =\n          (this.center_.lat() * (l - 1) + marker.getPosition().lat()) / l;\n        const lng =\n          (this.center_.lng() * (l - 1) + marker.getPosition().lng()) / l;\n        this.center_ = new google.maps.LatLng(lat, lng);\n        this.calculateBounds_();\n      }\n    }\n\n    marker.isAdded = true;\n    this.markers_.push(marker);\n\n    const mCount = this.markers_.length;\n    const mz = this.markerClusterer_.getMaxZoom();\n    if (mz !== null && this.map_.getZoom() > mz) {\n      // Zoomed in past max zoom, so show the marker.\n      if (marker.getMap() !== this.map_) {\n        marker.setMap(this.map_);\n      }\n    } else if (mCount < this.minClusterSize_) {\n      // Min cluster size not reached so show the marker.\n      if (marker.getMap() !== this.map_) {\n        marker.setMap(this.map_);\n      }\n    } else if (mCount === this.minClusterSize_) {\n      // Hide the markers that were showing.\n      for (let i = 0; i < mCount; i++) {\n        this.markers_[i].setMap(null);\n      }\n    } else {\n      marker.setMap(null);\n    }\n\n    return true;\n  }\n\n  /**\n   * Determines if a marker lies within the cluster's bounds.\n   *\n   * @param marker The marker to check.\n   * @return True if the marker lies in the bounds.\n   * @ignore\n   */\n  public isMarkerInClusterBounds(marker: google.maps.Marker): boolean {\n    return this.bounds_.contains(marker.getPosition());\n  }\n\n  /**\n   * Calculates the extended bounds of the cluster with the grid.\n   */\n  private calculateBounds_(): void {\n    const bounds = new google.maps.LatLngBounds(this.center_, this.center_);\n    this.bounds_ = this.markerClusterer_.getExtendedBounds(bounds);\n  }\n\n  /**\n   * Updates the cluster icon.\n   */\n  public updateIcon(): void {\n    const mCount = this.markers_.length;\n    const mz = this.markerClusterer_.getMaxZoom();\n\n    if (mz !== null && this.map_.getZoom() > mz) {\n      this.clusterIcon_.hide();\n      return;\n    }\n\n    if (mCount < this.minClusterSize_) {\n      // Min cluster size not yet reached.\n      this.clusterIcon_.hide();\n      return;\n    }\n\n    const numStyles = this.markerClusterer_.getStyles().length;\n    const sums = this.markerClusterer_.getCalculator()(\n      this.markers_,\n      numStyles\n    );\n    this.clusterIcon_.setCenter(this.center_);\n    this.clusterIcon_.useStyle(sums);\n    this.clusterIcon_.show();\n  }\n\n  /**\n   * Determines if a marker has already been added to the cluster.\n   *\n   * @param marker The marker to check.\n   * @return True if the marker has already been added.\n   */\n  private isMarkerAlreadyAdded_(marker: google.maps.Marker): boolean {\n    if (this.markers_.indexOf) {\n      return this.markers_.indexOf(marker) !== -1;\n    } else {\n      for (let i = 0; i < this.markers_.length; i++) {\n        if (marker === this.markers_[i]) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n}\n","/**\n * Copyright 2019 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @name MarkerClustererPlus for Google Maps V3\n * @author Gary Little\n * @fileoverview\n * The library creates and manages per-zoom-level clusters for large amounts of markers.\n * <p>\n * This is an enhanced V3 implementation of the V2 MarkerClusterer by Xiaoxi Wu. It is\n * based on the V3 MarkerClusterer port by Luke Mahe. MarkerClustererPlus was created\n * by Gary Little.\n * <p>\n * v2.0 release: MarkerClustererPlus v2.0 is backward compatible with MarkerClusterer v1.0. It\n *  adds support for the `ignoreHidden`, `title`, `batchSizeIE`,\n *  and `calculator` properties as well as support for four more events. It also allows\n *  greater control over the styling of the text that appears on the cluster marker. The\n *  documentation has been significantly improved and the overall code has been simplified and\n *  polished. Very large numbers of markers can now be managed without causing Javascript timeout\n *  errors on Internet Explorer. Note that the name of the `clusterclick` event has been\n *  deprecated. The new name is `click`, so please change your application code now.\n */\n\nimport { ClusterIconInfo, ClusterIconStyle } from \"./cluster-icon\";\n\nimport { Cluster } from \"./cluster\";\nimport { OverlayViewSafe } from \"./overlay-view-safe\";\n\n/**\n * @param text The text attribute of the cluster\n */\ntype AriaLabelFn = (text: string) => string;\n\nexport type Calculator = (\n  markers: google.maps.Marker[],\n  clusterIconStylesCount: number\n) => ClusterIconInfo;\n\nexport interface ClusterAugmentedMarker extends google.maps.Marker {\n  isAdded?: boolean;\n}\n\n/**\n * This event is fired on the {@link MarkerClusterer} instance when the `MarkerClusterer` stops clustering markers.\n *\n * Example:\n * ```typescript\n *  mc.addListener('clusteringend', (mc: MarkerClusterer) => {})\n * ```\n *\n * @param mc The MarkerClusterer whose markers are being clustered.\n * @event clusteringend\n */\nexport declare function clusteringend(mc: MarkerClusterer): void;\n\n/**\n * This event is fired on the {@link MarkerClusterer} instance when the `MarkerClusterer` begins clustering markers.\n *\n * Example:\n * ```typescript\n *  mc.addListener('clusteringbegin', (mc: MarkerClusterer) => {})\n * ```\n *\n * @param mc The MarkerClusterer whose markers are being clustered.\n * @event clusteringbegin\n */\nexport declare function clusteringbegin(mc: MarkerClusterer): void;\n\n/**\n * Optional parameter passed to the {@link MarkerClusterer} constructor.\n */\nexport interface MarkerClustererOptions {\n  /**\n   * The grid size of a cluster in pixels. The grid is a square.\n   *\n   * @default `60`\n   */\n  gridSize?: number;\n  /**\n   * The maximum zoom level at which clustering is enabled or\n   * `null` if clustering is to be enabled at all zoom levels.\n   *\n   * @default `null`\n   */\n  maxZoom?: number;\n\n  /**\n   * Whether to zoom the map when a cluster marker is\n   * clicked. You may want to set this to `false` if you have installed a handler\n   * for the `click` event and it deals with zooming on its own.\n   *\n   * @default `true`\n   */\n  zoomOnClick?: boolean;\n  /***\n   * Whether the position of a cluster marker should be\n   * the average position of all markers in the cluster. If set to `false`, the\n   * cluster marker is positioned at the location of the first marker added to the cluster.\n   *\n   * @default `false`\n   */\n  averageCenter?: boolean;\n  /**\n   * The minimum number of markers needed in a cluster\n   * before the markers are hidden and a cluster marker appears.\n   *\n   * @default `2`\n   */\n  minimumClusterSize?: number;\n\n  /**\n   *  the z-index of a cluster.\n   *\n   *  @default `google.maps.Marker.MAX_ZINDEX + 1`\n   */\n  zIndex?: number;\n\n  /**\n   * Whether to ignore hidden markers in clusters. You\n   * may want to set this to `true` to ensure that hidden markers are not included\n   * in the marker count that appears on a cluster marker (this count is the value of the\n   * `text` property of the result returned by the default  {@link calculator}).\n   * If set to `true` and you change the visibility of a marker being clustered, be\n   * sure to also call {@link MarkerClusterer#repaint()}.\n   *\n   * @default `false`\n   */\n  ignoreHidden?: boolean;\n  /**\n   * The tooltip to display when the mouse moves over a cluster\n   * marker. (Alternatively, you can use a custom `calculator` function to specify a\n   * different tooltip for each cluster marker.)\n   *\n   * @default `\"\"`\n   */\n  title?: string;\n  /**\n   * The function used to determine\n   * the text to be displayed on a cluster marker and the index indicating which style to use\n   * for the cluster marker. The input parameters for the function are (1) the array of markers\n   * represented by a cluster marker and (2) the number of cluster icon styles. It returns a\n   * {@link ClusterIconInfo} object. The default `calculator` returns a\n   * `text` property which is the number of markers in the cluster and an\n   * `index` property which is one higher than the lowest integer such that\n   * `10^i` exceeds the number of markers in the cluster, or the size of the styles\n   * array, whichever is less. The `styles` array element used has an index of\n   * `index` minus 1. For example, the default `calculator` returns a\n   * `text` value of `\"125\"` and an `index` of `3`\n   * for a cluster icon representing 125 markers so the element used in the `styles`\n   * array is `2`. A `calculator` may also return a `title`\n   * property that contains the text of the tooltip to be used for the cluster marker. If\n   * `title` is not defined, the tooltip is set to the value of the `title`\n   * property for the MarkerClusterer.\n   *\n   * @default {@link MarkerClusterer.CALCULATOR}\n   */\n  calculator?: Calculator;\n  /**\n   * The name of the CSS class defining general styles\n   * for the cluster markers. Use this class to define CSS styles that are not set up by the code\n   * that processes the `styles` array.\n   *\n   * @default `\"cluster\"`\n   */\n  clusterClass?: string;\n  /**\n   * An array of {@link ClusterIconStyle} elements defining the styles\n   * of the cluster markers to be used. The element to be used to style a given cluster marker\n   * is determined by the function defined by the `calculator` property.\n   * The default is an array of {@link ClusterIconStyle} elements whose properties are derived\n   * from the values for `imagePath`, `imageExtension`, and `imageSizes`.\n   *\n   * @default `styles`\n   */\n  styles?: ClusterIconStyle[];\n  /**\n   * Whether to allow the use of cluster icons that\n   * have sizes that are some multiple (typically double) of their actual display size. Icons such\n   * as these look better when viewed on high-resolution monitors such as Apple's Retina displays.\n   * Note: if this property is `true`, sprites cannot be used as cluster icons.\n   *\n   * @default `false`\n   */\n  enableRetinaIcons?: boolean;\n  /**\n   * Set this property to the number of markers to be processed in a single batch when using\n   * a browser other than Internet Explorer (for Internet Explorer, use the batchSizeIE property instead).\n   *\n   * @default `MarkerClusterer.BATCH_SIZE`\n   */\n  batchSize?: number;\n  /**\n   * When Internet Explorer is\n   * being used, markers are processed in several batches with a small delay inserted between\n   * each batch in an attempt to avoid Javascript timeout errors. Set this property to the\n   * number of markers to be processed in a single batch; select as high a number as you can\n   * without causing a timeout error in the browser. This number might need to be as low as 100\n   * if 15,000 markers are being managed, for example.\n   *\n   * @default `MarkerClusterer.BATCH_SIZE_IE`\n   */\n  batchSizeIE?: number;\n  /**\n   * The full URL of the root name of the group of image files to use for cluster icons.\n   * The complete file name is of the form `imagePath`n.`imageExtension`\n   * where n is the image file number (1, 2, etc.).\n   *\n   * @default `MarkerClusterer.IMAGE_PATH`\n   */\n  imagePath?: string;\n  /**\n   * The extension name for the cluster icon image files (e.g., `\"png\"` or\n   * `\"jpg\"`).\n   *\n   * @default `MarkerClusterer.IMAGE_EXTENSION`\n   */\n  imageExtension?: string;\n  /**\n   * An array of numbers containing the widths of the group of\n   * `imagePath`n.`imageExtension` image files.\n   * (The images are assumed to be square.)\n   *\n   * @default `MarkerClusterer.IMAGE_SIZES`\n   */\n  imageSizes?: number[];\n  /**\n   * A function to take the text attribute associated with the cluster and output a string to attach an\n   * ariaLabel to the cluster\n   */\n  ariaLabelFn?: AriaLabelFn;\n}\n\n/**\n * @ignore\n */\nconst getOption = <T, K extends keyof T>(\n  options: T,\n  prop: K,\n  def: T[K]\n): T[K] => {\n  if (options[prop] !== undefined) {\n    return options[prop];\n  } else {\n    return def;\n  }\n};\n\nexport class MarkerClusterer extends OverlayViewSafe {\n  /**\n   * The number of markers to process in one batch.\n   */\n  static BATCH_SIZE = 2000;\n\n  /**\n   * The number of markers to process in one batch (IE only).\n   */\n  static BATCH_SIZE_IE = 500;\n\n  /**\n   * The default root name for the marker cluster images.\n   */\n  static IMAGE_PATH = \"../images/m\";\n\n  /**\n   * The default extension name for the marker cluster images.\n   */\n  static IMAGE_EXTENSION = \"png\";\n\n  /**\n   * The default array of sizes for the marker cluster images.\n   */\n  static IMAGE_SIZES: number[] = [53, 56, 66, 78, 90];\n\n  private markers_: ClusterAugmentedMarker[] = [];\n  private clusters_: Cluster[] = [];\n  private listeners_: google.maps.MapsEventListener[] = [];\n\n  private activeMap_: google.maps.Map = null;\n  private ready_ = false;\n\n  public ariaLabelFn = this.options.ariaLabelFn || ((): string => \"\");\n\n  private zIndex_ =\n    this.options.zIndex || Number(google.maps.Marker.MAX_ZINDEX) + 1;\n  private gridSize_ = this.options.gridSize || 60;\n  private minClusterSize_ = this.options.minimumClusterSize || 2;\n  private maxZoom_ = this.options.maxZoom || null;\n  private styles_: ClusterIconStyle[] = this.options.styles || [];\n  private title_ = this.options.title || \"\";\n\n  private zoomOnClick_ = getOption(this.options, \"zoomOnClick\", true);\n  private averageCenter_ = getOption(this.options, \"averageCenter\", false);\n\n  private ignoreHidden_ = getOption(this.options, \"ignoreHidden\", false);\n  private enableRetinaIcons_ = getOption(\n    this.options,\n    \"enableRetinaIcons\",\n    false\n  );\n\n  private imagePath_ = this.options.imagePath || MarkerClusterer.IMAGE_PATH;\n  private imageExtension_ =\n    this.options.imageExtension || MarkerClusterer.IMAGE_EXTENSION;\n  private imageSizes_ = this.options.imageSizes || MarkerClusterer.IMAGE_SIZES;\n  private calculator_ = this.options.calculator || MarkerClusterer.CALCULATOR;\n  private batchSize_ = this.options.batchSize || MarkerClusterer.BATCH_SIZE;\n  private batchSizeIE_ =\n    this.options.batchSizeIE || MarkerClusterer.BATCH_SIZE_IE;\n  private clusterClass_ = this.options.clusterClass || \"cluster\";\n\n  private prevZoom_: number;\n  private timerRefStatic: number;\n\n  /**\n   * Creates a MarkerClusterer object with the options specified in {@link MarkerClustererOptions}.\n   * @param map The Google map to attach to.\n   * @param markers The markers to be added to the cluster.\n   * @param options The optional parameters.\n   */\n  constructor(\n    map: google.maps.Map,\n    markers: google.maps.Marker[] = [],\n    private options: MarkerClustererOptions = {}\n  ) {\n    super();\n\n    if (navigator.userAgent.toLowerCase().indexOf(\"msie\") !== -1) {\n      // Try to avoid IE timeout when processing a huge number of markers:\n      this.batchSize_ = this.batchSizeIE_;\n    }\n\n    this.setupStyles_();\n\n    this.addMarkers(markers, true);\n    this.setMap(map); // Note: this causes onAdd to be called\n  }\n\n  /**\n   * Implementation of the onAdd interface method.\n   * @ignore\n   */\n  onAdd(): void {\n    this.activeMap_ = this.getMap() as google.maps.Map;\n    this.ready_ = true;\n\n    this.repaint();\n\n    this.prevZoom_ = this.getMap().getZoom();\n\n    // Add the map event listeners\n    this.listeners_ = [\n      google.maps.event.addListener(this.getMap(), \"zoom_changed\", () => {\n        const map: google.maps.Map & {\n          minZoom: number;\n          maxZoom: number;\n          mapTypes: { [type: string]: google.maps.MapType };\n        } = this.getMap() as any; // eslint-disable-line @typescript-eslint/no-explicit-any\n\n        // Fix for bug #407\n        // Determines map type and prevents illegal zoom levels\n        const minZoom = map.minZoom || 0;\n        const maxZoom = Math.min(\n          map.maxZoom || 100,\n          map.mapTypes[map.getMapTypeId()].maxZoom\n        );\n        const zoom = Math.min(\n          Math.max(this.getMap().getZoom(), minZoom),\n          maxZoom\n        );\n\n        if (this.prevZoom_ != zoom) {\n          this.prevZoom_ = zoom;\n          this.resetViewport_(false);\n        }\n      }),\n      google.maps.event.addListener(this.getMap(), \"idle\", () => {\n        this.redraw_();\n      }),\n    ];\n  }\n\n  /**\n   * Implementation of the onRemove interface method.\n   * Removes map event listeners and all cluster icons from the DOM.\n   * All managed markers are also put back on the map.\n   * @ignore\n   */\n  onRemove(): void {\n    // Put all the managed markers back on the map:\n    for (let i = 0; i < this.markers_.length; i++) {\n      if (this.markers_[i].getMap() !== this.activeMap_) {\n        this.markers_[i].setMap(this.activeMap_);\n      }\n    }\n\n    // Remove all clusters:\n    for (let i = 0; i < this.clusters_.length; i++) {\n      this.clusters_[i].remove();\n    }\n    this.clusters_ = [];\n\n    // Remove map event listeners:\n    for (let i = 0; i < this.listeners_.length; i++) {\n      google.maps.event.removeListener(this.listeners_[i]);\n    }\n    this.listeners_ = [];\n\n    this.activeMap_ = null;\n    this.ready_ = false;\n  }\n\n  /**\n   * Implementation of the draw interface method.\n   * @ignore\n   */\n  draw(): void {}\n\n  /**\n   * Sets up the styles object.\n   */\n  private setupStyles_(): void {\n    if (this.styles_.length > 0) {\n      return;\n    }\n\n    for (let i = 0; i < this.imageSizes_.length; i++) {\n      const size = this.imageSizes_[i];\n      this.styles_.push(\n        MarkerClusterer.withDefaultStyle({\n          url: this.imagePath_ + (i + 1) + \".\" + this.imageExtension_,\n          height: size,\n          width: size,\n        })\n      );\n    }\n  }\n\n  /**\n   *  Fits the map to the bounds of the markers managed by the clusterer.\n   */\n  fitMapToMarkers(padding: number | google.maps.Padding): void {\n    const markers = this.getMarkers();\n    const bounds = new google.maps.LatLngBounds();\n    for (let i = 0; i < markers.length; i++) {\n      // March 3, 2018: Bug fix -- honor the ignoreHidden property\n      if (markers[i].getVisible() || !this.getIgnoreHidden()) {\n        bounds.extend(markers[i].getPosition());\n      }\n    }\n\n    (this.getMap() as google.maps.Map).fitBounds(bounds, padding);\n  }\n\n  /**\n   * Returns the value of the `gridSize` property.\n   *\n   * @return The grid size.\n   */\n  getGridSize(): number {\n    return this.gridSize_;\n  }\n\n  /**\n   * Sets the value of the `gridSize` property.\n   *\n   * @param gridSize The grid size.\n   */\n  setGridSize(gridSize: number): void {\n    this.gridSize_ = gridSize;\n  }\n\n  /**\n   * Returns the value of the `minimumClusterSize` property.\n   *\n   * @return The minimum cluster size.\n   */\n  getMinimumClusterSize(): number {\n    return this.minClusterSize_;\n  }\n\n  /**\n   * Sets the value of the `minimumClusterSize` property.\n   *\n   * @param minimumClusterSize The minimum cluster size.\n   */\n  setMinimumClusterSize(minimumClusterSize: number): void {\n    this.minClusterSize_ = minimumClusterSize;\n  }\n\n  /**\n   *  Returns the value of the `maxZoom` property.\n   *\n   *  @return The maximum zoom level.\n   */\n  getMaxZoom(): number {\n    return this.maxZoom_;\n  }\n\n  /**\n   *  Sets the value of the `maxZoom` property.\n   *\n   *  @param maxZoom The maximum zoom level.\n   */\n  setMaxZoom(maxZoom: number): void {\n    this.maxZoom_ = maxZoom;\n  }\n\n  getZIndex(): number {\n    return this.zIndex_;\n  }\n\n  setZIndex(zIndex: number): void {\n    this.zIndex_ = zIndex;\n  }\n\n  /**\n   *  Returns the value of the `styles` property.\n   *\n   *  @return The array of styles defining the cluster markers to be used.\n   */\n  getStyles(): ClusterIconStyle[] {\n    return this.styles_;\n  }\n\n  /**\n   *  Sets the value of the `styles` property.\n   *\n   *  @param styles The array of styles to use.\n   */\n  setStyles(styles: ClusterIconStyle[]): void {\n    this.styles_ = styles;\n  }\n\n  /**\n   * Returns the value of the `title` property.\n   *\n   * @return The content of the title text.\n   */\n  getTitle(): string {\n    return this.title_;\n  }\n\n  /**\n   *  Sets the value of the `title` property.\n   *\n   *  @param title The value of the title property.\n   */\n  setTitle(title: string): void {\n    this.title_ = title;\n  }\n\n  /**\n   * Returns the value of the `zoomOnClick` property.\n   *\n   * @return True if zoomOnClick property is set.\n   */\n  getZoomOnClick(): boolean {\n    return this.zoomOnClick_;\n  }\n\n  /**\n   *  Sets the value of the `zoomOnClick` property.\n   *\n   *  @param zoomOnClick The value of the zoomOnClick property.\n   */\n  setZoomOnClick(zoomOnClick: boolean): void {\n    this.zoomOnClick_ = zoomOnClick;\n  }\n\n  /**\n   * Returns the value of the `averageCenter` property.\n   *\n   * @return True if averageCenter property is set.\n   */\n  getAverageCenter(): boolean {\n    return this.averageCenter_;\n  }\n\n  /**\n   *  Sets the value of the `averageCenter` property.\n   *\n   *  @param averageCenter The value of the averageCenter property.\n   */\n  setAverageCenter(averageCenter: boolean): void {\n    this.averageCenter_ = averageCenter;\n  }\n\n  /**\n   * Returns the value of the `ignoreHidden` property.\n   *\n   * @return True if ignoreHidden property is set.\n   */\n  getIgnoreHidden(): boolean {\n    return this.ignoreHidden_;\n  }\n\n  /**\n   *  Sets the value of the `ignoreHidden` property.\n   *\n   *  @param ignoreHidden The value of the ignoreHidden property.\n   */\n  setIgnoreHidden(ignoreHidden: boolean): void {\n    this.ignoreHidden_ = ignoreHidden;\n  }\n\n  /**\n   * Returns the value of the `enableRetinaIcons` property.\n   *\n   * @return True if enableRetinaIcons property is set.\n   */\n  getEnableRetinaIcons(): boolean {\n    return this.enableRetinaIcons_;\n  }\n\n  /**\n   *  Sets the value of the `enableRetinaIcons` property.\n   *\n   *  @param enableRetinaIcons The value of the enableRetinaIcons property.\n   */\n  setEnableRetinaIcons(enableRetinaIcons: boolean): void {\n    this.enableRetinaIcons_ = enableRetinaIcons;\n  }\n\n  /**\n   * Returns the value of the `imageExtension` property.\n   *\n   * @return The value of the imageExtension property.\n   */\n  getImageExtension(): string {\n    return this.imageExtension_;\n  }\n\n  /**\n   *  Sets the value of the `imageExtension` property.\n   *\n   *  @param imageExtension The value of the imageExtension property.\n   */\n  setImageExtension(imageExtension: string): void {\n    this.imageExtension_ = imageExtension;\n  }\n\n  /**\n   * Returns the value of the `imagePath` property.\n   *\n   * @return The value of the imagePath property.\n   */\n  getImagePath(): string {\n    return this.imagePath_;\n  }\n\n  /**\n   *  Sets the value of the `imagePath` property.\n   *\n   *  @param imagePath The value of the imagePath property.\n   */\n  setImagePath(imagePath: string): void {\n    this.imagePath_ = imagePath;\n  }\n\n  /**\n   * Returns the value of the `imageSizes` property.\n   *\n   * @return The value of the imageSizes property.\n   */\n  getImageSizes(): number[] {\n    return this.imageSizes_;\n  }\n\n  /**\n   *  Sets the value of the `imageSizes` property.\n   *\n   *  @param imageSizes The value of the imageSizes property.\n   */\n  setImageSizes(imageSizes: number[]): void {\n    this.imageSizes_ = imageSizes;\n  }\n\n  /**\n   * Returns the value of the `calculator` property.\n   *\n   * @return the value of the calculator property.\n   */\n  getCalculator(): Calculator {\n    return this.calculator_;\n  }\n\n  /**\n   * Sets the value of the `calculator` property.\n   *\n   * @param calculator The value of the calculator property.\n   */\n  setCalculator(calculator: Calculator): void {\n    this.calculator_ = calculator;\n  }\n\n  /**\n   * Returns the value of the `batchSizeIE` property.\n   *\n   * @return the value of the batchSizeIE property.\n   */\n  getBatchSizeIE(): number {\n    return this.batchSizeIE_;\n  }\n\n  /**\n   * Sets the value of the `batchSizeIE` property.\n   *\n   *  @param batchSizeIE The value of the batchSizeIE property.\n   */\n  setBatchSizeIE(batchSizeIE: number): void {\n    this.batchSizeIE_ = batchSizeIE;\n  }\n\n  /**\n   * Returns the value of the `clusterClass` property.\n   *\n   * @return the value of the clusterClass property.\n   */\n  getClusterClass(): string {\n    return this.clusterClass_;\n  }\n\n  /**\n   * Sets the value of the `clusterClass` property.\n   *\n   *  @param clusterClass The value of the clusterClass property.\n   */\n  setClusterClass(clusterClass: string): void {\n    this.clusterClass_ = clusterClass;\n  }\n\n  /**\n   *  Returns the array of markers managed by the clusterer.\n   *\n   *  @return The array of markers managed by the clusterer.\n   */\n  getMarkers(): google.maps.Marker[] {\n    return this.markers_;\n  }\n\n  /**\n   *  Returns the number of markers managed by the clusterer.\n   *\n   *  @return The number of markers.\n   */\n  getTotalMarkers(): number {\n    return this.markers_.length;\n  }\n\n  /**\n   * Returns the current array of clusters formed by the clusterer.\n   *\n   * @return The array of clusters formed by the clusterer.\n   */\n  getClusters(): Cluster[] {\n    return this.clusters_;\n  }\n\n  /**\n   * Returns the number of clusters formed by the clusterer.\n   *\n   * @return The number of clusters formed by the clusterer.\n   */\n  getTotalClusters(): number {\n    return this.clusters_.length;\n  }\n\n  /**\n   * Adds a marker to the clusterer. The clusters are redrawn unless\n   *  `nodraw` is set to `true`.\n   *\n   * @param marker The marker to add.\n   * @param nodraw Set to `true` to prevent redrawing.\n   */\n  addMarker(marker: google.maps.Marker, nodraw?: boolean): void {\n    this.pushMarkerTo_(marker);\n    if (!nodraw) {\n      this.redraw_();\n    }\n  }\n\n  /**\n   * Adds an array of markers to the clusterer. The clusters are redrawn unless\n   *  `nodraw` is set to `true`.\n   *\n   * @param markers The markers to add.\n   * @param nodraw Set to `true` to prevent redrawing.\n   */\n  addMarkers(markers: google.maps.Marker[], nodraw?: boolean): void {\n    for (const key in markers) {\n      if (Object.prototype.hasOwnProperty.call(markers, key)) {\n        this.pushMarkerTo_(markers[key]);\n      }\n    }\n    if (!nodraw) {\n      this.redraw_();\n    }\n  }\n\n  /**\n   * Pushes a marker to the clusterer.\n   *\n   * @param marker The marker to add.\n   */\n  private pushMarkerTo_(\n    marker: google.maps.Marker & { isAdded?: boolean }\n  ): void {\n    // If the marker is draggable add a listener so we can update the clusters on the dragend:\n    if (marker.getDraggable()) {\n      google.maps.event.addListener(marker, \"dragend\", () => {\n        if (this.ready_) {\n          marker.isAdded = false;\n          this.repaint();\n        }\n      });\n    }\n    marker.isAdded = false;\n    this.markers_.push(marker);\n  }\n\n  /**\n   * Removes a marker from the cluster.  The clusters are redrawn unless\n   *  `nodraw` is set to `true`. Returns `true` if the\n   *  marker was removed from the clusterer.\n   *\n   * @param marker The marker to remove.\n   * @param nodraw Set to `true` to prevent redrawing.\n   * @return True if the marker was removed from the clusterer.\n   */\n  removeMarker(marker: google.maps.Marker, nodraw?: boolean): boolean {\n    const removed = this.removeMarker_(marker);\n\n    if (!nodraw && removed) {\n      this.repaint();\n    }\n\n    return removed;\n  }\n\n  /**\n   * Removes an array of markers from the cluster. The clusters are redrawn unless\n   *  `nodraw` is set to `true`. Returns `true` if markers were removed from the clusterer.\n   *\n   * @param markers The markers to remove.\n   * @param nodraw Set to `true` to prevent redrawing.\n   * @return True if markers were removed from the clusterer.\n   */\n  removeMarkers(markers: google.maps.Marker[], nodraw?: boolean): boolean {\n    let removed = false;\n\n    for (let i = 0; i < markers.length; i++) {\n      const r = this.removeMarker_(markers[i]);\n      removed = removed || r;\n    }\n\n    if (!nodraw && removed) {\n      this.repaint();\n    }\n\n    return removed;\n  }\n\n  /**\n   * Removes a marker and returns true if removed, false if not.\n   *\n   * @param marker The marker to remove\n   * @return Whether the marker was removed or not\n   */\n  private removeMarker_(marker: google.maps.Marker): boolean {\n    let index = -1;\n    if (this.markers_.indexOf) {\n      index = this.markers_.indexOf(marker);\n    } else {\n      for (let i = 0; i < this.markers_.length; i++) {\n        if (marker === this.markers_[i]) {\n          index = i;\n          break;\n        }\n      }\n    }\n\n    if (index === -1) {\n      // Marker is not in our list of markers, so do nothing:\n      return false;\n    }\n\n    marker.setMap(null);\n    this.markers_.splice(index, 1); // Remove the marker from the list of managed markers\n    return true;\n  }\n\n  /**\n   * Removes all clusters and markers from the map and also removes all markers\n   *  managed by the clusterer.\n   */\n  clearMarkers(): void {\n    this.resetViewport_(true);\n    this.markers_ = [];\n  }\n\n  /**\n   * Recalculates and redraws all the marker clusters from scratch.\n   *  Call this after changing any properties.\n   */\n  repaint(): void {\n    const oldClusters = this.clusters_.slice();\n    this.clusters_ = [];\n    this.resetViewport_(false);\n    this.redraw_();\n\n    // Remove the old clusters.\n    // Do it in a timeout to prevent blinking effect.\n    setTimeout(() => {\n      for (let i = 0; i < oldClusters.length; i++) {\n        oldClusters[i].remove();\n      }\n    }, 0);\n  }\n\n  /**\n   * Returns the current bounds extended by the grid size.\n   *\n   * @param bounds The bounds to extend.\n   * @return The extended bounds.\n   * @ignore\n   */\n  getExtendedBounds(\n    bounds: google.maps.LatLngBounds\n  ): google.maps.LatLngBounds {\n    const projection = this.getProjection();\n\n    // Turn the bounds into latlng.\n    const tr = new google.maps.LatLng(\n      bounds.getNorthEast().lat(),\n      bounds.getNorthEast().lng()\n    );\n    const bl = new google.maps.LatLng(\n      bounds.getSouthWest().lat(),\n      bounds.getSouthWest().lng()\n    );\n\n    // Convert the points to pixels and the extend out by the grid size.\n    const trPix = projection.fromLatLngToDivPixel(tr);\n    trPix.x += this.gridSize_;\n    trPix.y -= this.gridSize_;\n\n    const blPix = projection.fromLatLngToDivPixel(bl);\n    blPix.x -= this.gridSize_;\n    blPix.y += this.gridSize_;\n\n    // Convert the pixel points back to LatLng\n    const ne = projection.fromDivPixelToLatLng(trPix);\n    const sw = projection.fromDivPixelToLatLng(blPix);\n\n    // Extend the bounds to contain the new bounds.\n    bounds.extend(ne);\n    bounds.extend(sw);\n\n    return bounds;\n  }\n\n  /**\n   * Redraws all the clusters.\n   */\n  private redraw_(): void {\n    this.createClusters_(0);\n  }\n\n  /**\n   * Removes all clusters from the map. The markers are also removed from the map\n   *  if `hide` is set to `true`.\n   *\n   * @param hide Set to `true` to also remove the markers from the map.\n   */\n  private resetViewport_(hide?: boolean): void {\n    // Remove all the clusters\n    for (let i = 0; i < this.clusters_.length; i++) {\n      this.clusters_[i].remove();\n    }\n    this.clusters_ = [];\n\n    // Reset the markers to not be added and to be removed from the map.\n    for (let i = 0; i < this.markers_.length; i++) {\n      const marker = this.markers_[i];\n      marker.isAdded = false;\n      if (hide) {\n        marker.setMap(null);\n      }\n    }\n  }\n\n  /**\n   * Calculates the distance between two latlng locations in km.\n   *\n   * @param p1 The first lat lng point.\n   * @param p2 The second lat lng point.\n   * @return The distance between the two points in km.\n   * @link http://www.movable-type.co.uk/scripts/latlong.html\n   */\n  private distanceBetweenPoints_(\n    p1: google.maps.LatLng,\n    p2: google.maps.LatLng\n  ): number {\n    const R = 6371; // Radius of the Earth in km\n    const dLat = ((p2.lat() - p1.lat()) * Math.PI) / 180;\n    const dLon = ((p2.lng() - p1.lng()) * Math.PI) / 180;\n    const a =\n      Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n      Math.cos((p1.lat() * Math.PI) / 180) *\n        Math.cos((p2.lat() * Math.PI) / 180) *\n        Math.sin(dLon / 2) *\n        Math.sin(dLon / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c;\n  }\n\n  /**\n   * Determines if a marker is contained in a bounds.\n   *\n   * @param marker The marker to check.\n   * @param bounds The bounds to check against.\n   * @return True if the marker is in the bounds.\n   */\n  private isMarkerInBounds_(\n    marker: google.maps.Marker,\n    bounds: google.maps.LatLngBounds\n  ): boolean {\n    return bounds.contains(marker.getPosition());\n  }\n\n  /**\n   * Adds a marker to a cluster, or creates a new cluster.\n   *\n   * @param marker The marker to add.\n   */\n  private addToClosestCluster_(marker: google.maps.Marker): void {\n    let distance = 40000; // Some large number\n    let clusterToAddTo = null;\n    for (let i = 0; i < this.clusters_.length; i++) {\n      const cluster = this.clusters_[i];\n      const center = cluster.getCenter();\n      if (center) {\n        const d = this.distanceBetweenPoints_(center, marker.getPosition());\n        if (d < distance) {\n          distance = d;\n          clusterToAddTo = cluster;\n        }\n      }\n    }\n\n    if (clusterToAddTo && clusterToAddTo.isMarkerInClusterBounds(marker)) {\n      clusterToAddTo.addMarker(marker);\n    } else {\n      const cluster = new Cluster(this);\n      cluster.addMarker(marker);\n      this.clusters_.push(cluster);\n    }\n  }\n\n  /**\n   * Creates the clusters. This is done in batches to avoid timeout errors\n   *  in some browsers when there is a huge number of markers.\n   *\n   * @param iFirst The index of the first marker in the batch of\n   *  markers to be added to clusters.\n   */\n  private createClusters_(iFirst: number): void {\n    if (!this.ready_) {\n      return;\n    }\n\n    // Cancel previous batch processing if we're working on the first batch:\n    if (iFirst === 0) {\n      google.maps.event.trigger(this, \"clusteringbegin\", this);\n\n      if (typeof this.timerRefStatic !== \"undefined\") {\n        clearTimeout(this.timerRefStatic);\n        delete this.timerRefStatic;\n      }\n    }\n\n    // Get our current map view bounds.\n    // Create a new bounds object so we don't affect the map.\n    //\n    // See Comments 9 & 11 on Issue 3651 relating to this workaround for a Google Maps bug:\n    let mapBounds: google.maps.LatLngBounds;\n\n    if (this.getMap().getZoom() > 3) {\n      mapBounds = new google.maps.LatLngBounds(\n        (this.getMap() as google.maps.Map).getBounds().getSouthWest(),\n        (this.getMap() as google.maps.Map).getBounds().getNorthEast()\n      );\n    } else {\n      mapBounds = new google.maps.LatLngBounds(\n        new google.maps.LatLng(85.02070771743472, -178.48388434375),\n        new google.maps.LatLng(-85.08136444384544, 178.00048865625)\n      );\n    }\n    const bounds = this.getExtendedBounds(mapBounds);\n\n    const iLast = Math.min(iFirst + this.batchSize_, this.markers_.length);\n\n    for (let i = iFirst; i < iLast; i++) {\n      const marker = this.markers_[i];\n      if (!marker.isAdded && this.isMarkerInBounds_(marker, bounds)) {\n        if (\n          !this.ignoreHidden_ ||\n          (this.ignoreHidden_ && marker.getVisible())\n        ) {\n          this.addToClosestCluster_(marker);\n        }\n      }\n    }\n\n    if (iLast < this.markers_.length) {\n      this.timerRefStatic = window.setTimeout(() => {\n        this.createClusters_(iLast);\n      }, 0);\n    } else {\n      delete this.timerRefStatic;\n      google.maps.event.trigger(this, \"clusteringend\", this);\n\n      for (let i = 0; i < this.clusters_.length; i++) {\n        this.clusters_[i].updateIcon();\n      }\n    }\n  }\n\n  /**\n   * The default function for determining the label text and style\n   * for a cluster icon.\n   *\n   * @param markers The array of markers represented by the cluster.\n   * @param numStyles The number of marker styles available.\n   * @return The information resource for the cluster.\n   */\n  static CALCULATOR(\n    markers: google.maps.Marker[],\n    numStyles: number\n  ): ClusterIconInfo {\n    let index = 0;\n    const count: number = markers.length;\n\n    let dv = count;\n    while (dv !== 0) {\n      dv = Math.floor(dv / 10);\n      index++;\n    }\n\n    index = Math.min(index, numStyles);\n    return {\n      text: count.toString(),\n      index: index,\n      title: \"\",\n    };\n  }\n\n  /**\n   * Generates default styles augmented with user passed values.\n   * Useful when you want to override some default values but keep untouched\n   *\n   * @param overrides override default values\n   */\n  static withDefaultStyle(overrides: ClusterIconStyle): ClusterIconStyle {\n    return {\n      textColor: \"black\",\n      textSize: 11,\n      textDecoration: \"none\",\n      textLineHeight: overrides.height,\n      fontWeight: \"bold\",\n      fontStyle: \"normal\",\n      fontFamily: \"Arial,sans-serif\",\n      backgroundPosition: \"0 0\",\n      ...overrides,\n    };\n  }\n}\n","export const MAP_STYLE = [\r\n\t{\r\n\t\t\"featureType\": \"administrative\",\r\n\t\t\"elementType\": \"labels.text.fill\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"color\": \"#444444\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"landscape\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"color\": \"#f2f2f2\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"poi\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"visibility\": \"off\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"road\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"saturation\": -100\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"lightness\": 45\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"road.highway\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"visibility\": \"simplified\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"road.arterial\",\r\n\t\t\"elementType\": \"labels.icon\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"visibility\": \"off\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"transit\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"visibility\": \"off\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"water\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"color\": \"#e2e0df\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"visibility\": \"on\"\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n];\r\n","import MarkerClusterer from '@googlemaps/markerclustererplus';\r\nimport { Component, getContext } from 'rxcomp';\r\nimport { first } from 'rxjs/operators';\r\nimport { GoogleMapsService } from '../../common/googlemaps/googlemaps.service';\r\nimport { environment } from '../../environment';\r\nimport { MAP_STYLE } from './map.style';\r\n\r\nconst USE_CLUSTERER = true;\r\n\r\nexport class MapComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tGoogleMapsService.maps$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(maps => {\r\n\r\n\t\t\tconst google = window.google;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tconst center = this.center;\r\n\t\t\tconst item = this.items && this.items.length ? this.items[0] : null;\r\n\t\t\tconst position = item ? new google.maps.LatLng(item.latitude, item.longitude) : null;\r\n\r\n\t\t\tconst mapOptions = {\r\n\t\t\t\tzoom: 15, // 9,\r\n\t\t\t\tcenter: position,\r\n\t\t\t\tscrollwheel: false,\r\n\t\t\t\t// mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n\t\t\t\tzoomControlOptions: {\r\n\t\t\t\t\tstyle: google.maps.ZoomControlStyle.DEFAULT\r\n\t\t\t\t},\r\n\t\t\t\t// overviewMapControl: true,\r\n\t\t\t\tscaleControl: false,\r\n\t\t\t\tzoomControl: true,\r\n\t\t\t\tmapTypeControl: false,\r\n\t\t\t\tstreetViewControl: false,\r\n\t\t\t\trotateControl: true,\r\n\t\t\t\tfullscreenControl: true,\r\n\t\t\t\tstyles: MAP_STYLE\r\n\t\t\t};\r\n\r\n\t\t\tconst mapElement = node.querySelector('.map');\r\n\t\t\tconst map = this.map = new google.maps.Map(mapElement, mapOptions);\r\n\t\t\tthis.addMarkers(this.items);\r\n\t\t\tif (!this.items) {\r\n\t\t\t\tmap.fitBounds(this.getItalyBounds());\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tthis.clearMarkers();\r\n\t\tthis.addMarkers(this.items);\r\n\t}\r\n\r\n\tcalculateDistance(lat1, lon1, lat2, lon2, unit) {\r\n\t\tif ((lat1 == lat2) && (lon1 == lon2)) {\r\n\t\t\treturn 0;\r\n\t\t} else {\r\n\t\t\tconst radlat1 = Math.PI * lat1 / 180;\r\n\t\t\tconst radlat2 = Math.PI * lat2 / 180;\r\n\t\t\tconst theta = lon1 - lon2;\r\n\t\t\tconst radtheta = Math.PI * theta / 180;\r\n\t\t\tlet dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);\r\n\t\t\tif (dist > 1) {\r\n\t\t\t\tdist = 1;\r\n\t\t\t}\r\n\t\t\tdist = Math.acos(dist);\r\n\t\t\tdist = dist * 180 / Math.PI;\r\n\t\t\tdist = dist * 60 * 1.1515;\r\n\t\t\tif (unit == \"K\") {\r\n\t\t\t\tdist = dist * 1.609344;\r\n\t\t\t}\r\n\t\t\tif (unit == \"N\") {\r\n\t\t\t\tdist = dist * 0.8684;\r\n\t\t\t}\r\n\t\t\treturn dist;\r\n\t\t}\r\n\t}\r\n\r\n\tclearMarkers() {\r\n\t\tif (this.markerCluster) {\r\n\t\t\tthis.markerCluster.clearMarkers();\r\n\t\t}\r\n\t\tif (this.markers) {\r\n\t\t\tthis.markers.forEach(marker => marker.setMap(null));\r\n\t\t}\r\n\t}\r\n\r\n\taddMarkers(items) {\r\n\t\tconst map = this.map;\r\n\t\tif (map && items) {\r\n\t\t\tconst bounds = new google.maps.LatLngBounds();\r\n\r\n\t\t\tconst markers = items.map((item) => {\r\n\r\n\t\t\t\tconst position = new google.maps.LatLng(item.latitude, item.longitude);\r\n\r\n\t\t\t\tbounds.extend(position);\r\n\r\n\t\t\t\tlet content = /* html */`<div class=\"card--store-locator\">\r\n\t\t\t\t\t<div class=\"card__content\">\r\n\t\t\t\t\t\t<div class=\"card__name\"><span>${item.name}</span></div>\r\n\t\t\t\t\t\t<div class=\"card__address\">${item.address}</div>\r\n\t\t\t\t\t\t<div class=\"card__city\">${item.city}</div>\r\n\t\t\t\t\t\t<div class=\"card__country\">${item.country.name}</div>\r\n\t\t\t\t\t\t${item.phone ? `<a class=\"card__phone\" href=\"tel:${item.phone}\">${item.phone}</a>` : ''}\r\n\t\t\t\t\t\t${item.fax ? `<a class=\"card__fax\" href=\"tel:${item.fax}\">${item.fax}</a>` : ''}\r\n\t\t\t\t\t\t${item.email ? `<a class=\"card__email\" href=\"mailto:${item.email}\">${item.email}</a>` : ''}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>`;\r\n\r\n\t\t\t\t/*\r\n\t\t\t\t`<div class=\"marker__content\">\r\n\t\t\t\t\t<div class=\"title\"><span>${item.name}</span></div>\r\n\t\t\t\t\t<div class=\"group group--info\">\r\n\t\t\t\t\t\t<div class=\"address\">\r\n\t\t\t\t\t\t\t${item.address}<br>\r\n\t\t\t\t\t\t\t${item.city} ${item.country}<br>\r\n\t\t\t\t\t\t\t${item.phone ? `<span><a href=\"tel:${item.phone}\">${item.phone}</a><br></span>` : ''}\r\n\t\t\t\t\t\t\t${item.fax ? `<span><a href=\"tel:${item.fax}\">${item.fax}</a><br></span>` : ''}\r\n\t\t\t\t\t\t\t${item.email ? `<span><a href=\"mailto:${item.email}\">${item.email}</a><br></span>` : ''}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t${item.address !== '' ? `<div class=\"distance\">${this.labels.approximately} <b>${Math.floor(item.distance)} km</b></div>` : ``}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"group group--cta\">\r\n\t\t\t\t\t\t${item.address !== '' ? `<a id=\"locator-marker\" href=\"https://www.google.it/maps/dir/${position.lat()},${position.lng()}/${item.title}/@${item.latitude},${item.longitude}/\" target=\"_blank\" class=\"btn btn--link\"><span>${this.labels.reachStore}</span></a>` : ``}\r\n\t\t\t\t\t\t${item.type === 8 || item.type === 9 ? `<a id=\"contact-item\" href=\"${window.itemLocatorSettings.urlStoreContact}?item=${item.id}\" target=\"_blank\" class=\"btn btn--link\"><span>${this.labels.contactStore}</span></a>` : ''}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>`\r\n\t\t\t\t*/\r\n\r\n\t\t\t\tconst markerImage = new google.maps.MarkerImage(\r\n\t\t\t\t\t`${environment.assets}img/maps/marker-sm.png`,\r\n\t\t\t\t\tnew google.maps.Size(24, 32),\r\n\t\t\t\t);\r\n\r\n\t\t\t\tlet marker = new google.maps.Marker({\r\n\t\t\t\t\tposition: position,\r\n\t\t\t\t\tmap: USE_CLUSTERER ? null : map,\r\n\t\t\t\t\ticon: markerImage,\r\n\t\t\t\t\ttitle: item.title,\r\n\t\t\t\t\titem: item,\r\n\t\t\t\t\tcontent: content,\r\n\t\t\t\t});\r\n\t\t\t\tmarker.addListener('click', () => {\r\n\t\t\t\t\tthis.setMarkerWindow(marker.position, content);\r\n\t\t\t\t\t// this.scrollToStore(item);\r\n\t\t\t\t\t// GtmService.push({ event: 'dealerlocator', action: 'marker-click', label: item.title });\r\n\t\t\t\t});\r\n\t\t\t\titem.marker = marker;\r\n\t\t\t\treturn marker;\r\n\t\t\t});\r\n\r\n\t\t\tif (USE_CLUSTERER) {\r\n\t\t\t\tconst markerCluster = new MarkerClusterer(this.map, markers, {\r\n\t\t\t\t\timagePath: `${environment.assets}img/maps/cluster-`,\r\n\t\t\t\t});\r\n\t\t\t\tconst styles = markerCluster.getStyles();\r\n\t\t\t\tconst sizes = [48, 56, 64, 72, 80];\r\n\t\t\t\tstyles.forEach((style, i) => {\r\n\t\t\t\t\tstyle.width = sizes[i];\r\n\t\t\t\t\tstyle.height = sizes[i];\r\n\t\t\t\t\tstyle.textLineHeight = sizes[i];\r\n\t\t\t\t\tstyle.textSize = Math.floor(style.width / 5);\r\n\t\t\t\t\tstyle.textColor = '#ffffff';\r\n\t\t\t\t});\r\n\t\t\t\tmarkerCluster.setStyles(styles);\r\n\t\t\t\tthis.markerCluster = markerCluster;\r\n\t\t\t}\r\n\r\n\t\t\tthis.markers = markers;\r\n\r\n\t\t\tmap.fitBounds(bounds);\r\n\t\t}\r\n\t}\r\n\r\n\tgetGeolocation(map) {\r\n\t\tthis.error = null;\r\n\t\tthis.busyLocation = true;\r\n\t\tlet position = this.map.getCenter();\r\n\r\n\t\t// Try HTML5 geolocation.\r\n\t\tif (navigator.geolocation) {\r\n\t\t\tnavigator.geolocation.getCurrentPosition((location) => {\r\n\t\t\t\tposition = new google.maps.LatLng(location.coords.latitude, location.coords.longitude);\r\n\t\t\t\tconst geocoder = this.geocoder || new google.maps.Geocoder();\r\n\t\t\t\tthis.geocoder = geocoder;\r\n\t\t\t\tgeocoder.geocode({ 'location': position }, (results, status) => {\r\n\t\t\t\t\tif (status == 'OK') {\r\n\t\t\t\t\t\tconst filteredInfoCity = results.filter(function(address_component) {\r\n\t\t\t\t\t\t\treturn address_component.types.includes(\"locality\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.model.city = filteredInfoCity.length ? filteredInfoCity[0].formatted_address : undefined;\r\n\t\t\t\t\t\tthis.model.address = results[0].formatted_address;\r\n\r\n\t\t\t\t\t\tfor (let i = 0; i < results[0].address_components.length; i++) {\r\n\t\t\t\t\t\t\tif (results[0].address_components[i].types[0] == \"country\" || results[0].address_components[i].types[0] == \"political\") {\r\n\t\t\t\t\t\t\t\tthis.searchCountry = results[0].address_components[i].short_name;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.setInfoWindow(position, 1);\r\n\t\t\t\t\t\tthis.searchPosition(position).finally(() => this.busyLocation = false);\r\n\t\t\t\t\t\tthis.map.setCenter(position);\r\n\t\t\t\t\t\tthis.map.setZoom(ZOOM_LEVEL);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}, () => {\r\n\t\t\t\tthis.setInfoWindow(position, 2);\r\n\t\t\t\tthis.searchPosition(position).finally(() => this.busyLocation = false);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\t// Browser doesn't support Geolocation\r\n\t\t\tthis.setInfoWindow(position, 3);\r\n\t\t\tthis.searchPosition(position).finally(() => this.busyLocation = false);\r\n\t\t}\r\n\t}\r\n\r\n\tfitBounds(items) {\r\n\t\tif (items.length) {\r\n\t\t\tconst bounds = new google.maps.LatLngBounds();\r\n\t\t\titems.forEach((item) => {\r\n\t\t\t\tconst position = new google.maps.LatLng(item.latitude, item.longitude);\r\n\t\t\t\tbounds.extend(position);\r\n\t\t\t});\r\n\t\t\tthis.map.fitBounds(bounds);\r\n\t\t\t// console.log('fitBounds');\r\n\t\t}\r\n\t}\r\n\r\n\tfindNearStores(items, position) {\r\n\t\tif (items) {\r\n\t\t\titems.forEach((item) => {\r\n\t\t\t\titem.distance = this.calculateDistance(item.latitude, item.longitude, position.lat(), position.lng(), 'K');\r\n\t\t\t\titem.visible = (item.cod_stato == window.userCountry || !window.userCountry) && item.distance <= MAX_DISTANCE /* Km */;\r\n\t\t\t\tif (item.visible) {\r\n\t\t\t\t\tif (item.removed) {\r\n\t\t\t\t\t\tthis.markerCluster.addMarker(item.marker);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdelete item.removed;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.markerCluster.removeMarker(item.marker);\r\n\t\t\t\t\titem.removed = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\titems = items.slice();\r\n\t\t\titems.sort((a, b) => {\r\n\t\t\t\treturn a.distance * (a.importante ? 0.5 : 1) - b.distance * (b.importante ? 0.5 : 1);\r\n\t\t\t});\r\n\t\t\tconst visibleStores = items.filter(item => item.visible).slice(0, 50);\r\n\t\t\tthis.$timeout(() => {\r\n\t\t\t\tthis.visibleStores = visibleStores;\r\n\t\t\t}, 1);\r\n\t\t\t// console.log('findNearStores', visibleStores);\r\n\t\t\treturn visibleStores;\r\n\t\t}\r\n\t}\r\n\r\n\tpanTo(item) {\r\n\t\tconst position = new google.maps.LatLng(item.latitude, item.longitude);\r\n\t\tthis.map.setZoom(ZOOM_LEVEL);\r\n\t\tthis.map.panTo(position);\r\n\t\tconst marker = this.markers.find(x => x.item === item);\r\n\t\tthis.setMarkerWindow(marker.position, marker.content);\r\n\t}\r\n\r\n\tsetMarkerWindow(position, content) {\r\n\t\tif (position) {\r\n\t\t\tconst markerWindow = this.markerWindow || new google.maps.InfoWindow({\r\n\t\t\t\tpixelOffset: new google.maps.Size(0, -35)\r\n\t\t\t});\r\n\t\t\tthis.markerWindow = markerWindow;\r\n\t\t\tmarkerWindow.setPosition(position);\r\n\t\t\tmarkerWindow.setContent(content);\r\n\t\t\tmarkerWindow.open(this.map);\r\n\t\t} else {\r\n\t\t\tthis.closeMarkerWindow();\r\n\t\t}\r\n\t}\r\n\r\n\tcloseMarkerWindow() {\r\n\t\tif (this.markerWindow) {\r\n\t\t\tthis.markerWindow.close();\r\n\t\t}\r\n\t}\r\n\r\n\tgetWorldBounds() {\r\n\t\treturn new google.maps.LatLngBounds(\r\n\t\t\tnew google.maps.LatLng(61, 60),\r\n\t\t\tnew google.maps.LatLng(-37, -92)\r\n\t\t);\r\n\t}\r\n\r\n\tgetItalyBounds() {\r\n\t\treturn new google.maps.LatLngBounds(\r\n\t\t\tnew google.maps.LatLng(46.4657567, 5.233972),\r\n\t\t\tnew google.maps.LatLng(36.8257773, 18.963541)\r\n\t\t);\r\n\t}\r\n}\r\n\r\nMapComponent.meta = {\r\n\tselector: '[map]',\r\n\tinputs: ['center', 'items'],\r\n};\r\n","import { SwiperDirective } from '../../common/swiper/swiper.directive';\r\n\r\nexport class SwiperGalleryDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 'auto',\r\n\t\t\tspaceBetween: 40,\r\n\t\t\tspeed: 600,\r\n\t\t\tcenteredSlides: true,\r\n\t\t\tloop: true,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t\t// console.log('SwiperGalleryDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperGalleryDirective.meta = {\r\n\tselector: '[swiper-gallery]'\r\n};\r\n","import { SwiperDirective } from '../../common/swiper/swiper.directive';\r\n\r\nexport class SwiperHomepageDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1,\r\n\t\t\tspaceBetween: 0,\r\n\t\t\tspeed: 600,\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t\t// console.log('SwiperHomepageDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperHomepageDirective.meta = {\r\n\tselector: '[swiper-homepage]'\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { SwiperDirective } from '../../common/swiper/swiper.directive';\r\n\r\nexport class SwiperNewsPropositionDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1,\r\n\t\t\tspaceBetween: 30,\r\n\t\t\tbreakpoints: {\r\n\t\t\t\t768: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 40\r\n\t\t\t\t},\r\n\t\t\t\t1024: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 50\r\n\t\t\t\t},\r\n\t\t\t\t1440: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 60\r\n\t\t\t\t},\r\n\t\t\t\t1920: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 70\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tspeed: 600,\r\n\t\t\tcenteredSlides: false,\r\n\t\t\tloop: false,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = node.querySelector('.swiper-container');\r\n\t\tthis.init_(target);\r\n\t\t// console.log('SwiperNewsPropositionDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperNewsPropositionDirective.meta = {\r\n\tselector: '[swiper-news-proposition]'\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { SwiperDirective } from '../../common/swiper/swiper.directive';\r\n\r\nexport class SwiperProductsPropositionDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1.5,\r\n\t\t\tspaceBetween: 30,\r\n\t\t\tbreakpoints: {\r\n\t\t\t\t768: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 40\r\n\t\t\t\t},\r\n\t\t\t\t1024: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 50\r\n\t\t\t\t},\r\n\t\t\t\t1440: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 60\r\n\t\t\t\t},\r\n\t\t\t\t1920: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 70\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tspeed: 600,\r\n\t\t\tcenteredSlides: false,\r\n\t\t\tloop: false,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = node.querySelector('.swiper-container');\r\n\t\tthis.init_(target);\r\n\t\t// console.log('SwiperProductsPropositionDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperProductsPropositionDirective.meta = {\r\n\tselector: '[swiper-products-proposition]'\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { SwiperDirective } from '../../common/swiper/swiper.directive';\r\n\r\nexport class SwiperProjectsPropositionDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1.5,\r\n\t\t\tspaceBetween: 30,\r\n\t\t\tbreakpoints: {\r\n\t\t\t\t768: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 40\r\n\t\t\t\t},\r\n\t\t\t\t1024: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 50\r\n\t\t\t\t},\r\n\t\t\t\t1440: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 60\r\n\t\t\t\t},\r\n\t\t\t\t1920: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 70\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tspeed: 600,\r\n\t\t\tcenteredSlides: false,\r\n\t\t\tloop: false,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = node.querySelector('.swiper-container');\r\n\t\tthis.init_(target);\r\n\t\t// console.log('SwiperProjectsPropositionDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperProjectsPropositionDirective.meta = {\r\n\tselector: '[swiper-projects-proposition]'\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { environment } from '../../environment';\r\nimport { CartService } from '../../pages/cart/cart.service';\r\nimport { HeaderService } from '../header/header.service';\r\nimport { CartMiniService } from './cart-mini.service';\r\n\r\nexport class CartMiniComponent extends Component {\r\n\r\n\tget totalPrice() {\r\n\t\tconst items = this.items || [];\r\n\t\treturn items.reduce((p, c, i) => {\r\n\t\t\treturn p + c.price.price * c.qty;\r\n\t\t}, 0);\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.items = [];\r\n\t\tCartMiniService.items$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(items => {\r\n\t\t\tthis.items = items;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tonIncrement(item) {\r\n\t\tCartMiniService.incrementItem$(item).pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tonDecrement(item) {\r\n\t\tCartMiniService.decrementItem$(item).pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tonBuy(event) {\r\n\t\tCartService.setCart(null);\r\n\t\twindow.location.href = `${environment.slug.cart}`;\r\n\t}\r\n\r\n\tonEdit(item) {\r\n\t\t// console.log('CartMiniComponent.onEdit', item);\r\n\t\twindow.location.href = `${environment.slug.configureProduct}?productId=${item.id}&code=${item.code}${item.showefy ? `&sl=${item.showefy.product_link.split('&sl=')[1]}` : ''}`;\r\n\t}\r\n\r\n\tonRemoveAll(event) {\r\n\t\tCartMiniService.removeAll$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tonClose(event) {\r\n\t\tHeaderService.onBack();\r\n\t}\r\n}\r\n\r\nCartMiniComponent.meta = {\r\n\tselector: '[cart-mini]',\r\n};\r\n","import { Component } from 'rxcomp';\r\n\r\nexport class ErrorComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.showDetail = false;\r\n\t\t// console.log('ErrorComponent.onInit', this.error);\r\n\t}\r\n\r\n\tonDetailToggle() {\r\n\t\tthis.showDetail = !this.showDetail;\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nErrorComponent.meta = {\r\n\tselector: 'error-component',\r\n\tinputs: ['error'],\r\n\ttemplate: /* html */ `\r\n\t<div class=\"error\" (click)=\"onDetailToggle($event)\">\r\n\t\t<div class=\"status\">Error <span [innerHTML]=\"error.status\"></span></div>\r\n\t\t<div class=\"exception-message\" [innerHTML]=\"error.exceptionMessage\"></div>\r\n\t\t<button type=\"button\" class=\"btn--detail\"><svg class=\"caret-down\"><use xlink:href=\"#caret-down\"></use></svg></button>\r\n\t</div>\r\n\t<div class=\"error-details\" *if=\"showDetail\">\r\n\t\t<div class=\"message\" [innerHTML]=\"error.message\"></div>\r\n\t\t<div class=\"exception-type\" [innerHTML]=\"error.exceptionType\"></div>\r\n\t\t<div class=\"stack-trace\" [innerHTML]=\"error.stackTrace\"></div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { UserService } from '../user/user.service';\r\nimport { FilesService } from './files.service';\r\n\r\nexport class FilesComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.showFiles = false;\r\n\t\tthis.user = null;\r\n\t\tUserService.me$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(user => {\r\n\t\t\tthis.user = user;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.files = [];\r\n\t\tFilesService.files$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(files => {\r\n\t\t\tthis.files = files;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tonToggleFiles(event) {\r\n\t\tthis.showFiles = !this.showFiles;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonToggleFile(file) {\r\n\t\t(this.isAddedToFiles(file) ? FilesService.removeFile$(file) : FilesService.addFile$(file)).pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(_ => {\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tisAddedToFiles(file) {\r\n\t\treturn FilesService.hasFile(file);\r\n\t}\r\n\r\n\tonDownloadAll(event) {\r\n\t\tevent.preventDefault();\r\n\t\tconst { node } = getContext(this);\r\n\t\tFilesService.currentFiles.forEach(file => {\r\n\t\t\tconst link = document.createElement('a');\r\n\t\t\tlink.setAttribute('href', file.url);\r\n\t\t\tlink.setAttribute('download', file.title);\r\n\t\t\tlink.setAttribute('target', '_blank');\r\n\t\t\tlink.click();\r\n\t\t\t/*\r\n\t\t\tconst item = node.querySelector(`[href]=\"${file.url}\"`);\r\n\t\t\tif (item) {\r\n\t\t\t\titem.click();\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t\t// window.open(file.url, '_blank');\r\n\t\t});\r\n\t}\r\n\r\n\tonRemoveAll(event) {\r\n\t\tFilesService.removeAll$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n}\r\n\r\nFilesComponent.meta = {\r\n\tselector: '[files]',\r\n};\r\n","import { BehaviorSubject } from 'rxjs';\r\n\r\nexport class MenuService {\r\n\r\n\tstatic menu$_ = new BehaviorSubject(-1);\r\n\r\n\tstatic get currentMenu() {\r\n\t\treturn this.menu$_.getValue();\r\n\t}\r\n\r\n\tstatic setMenu(id) {\r\n\t\tthis.menu$_.next(id);\r\n\t}\r\n\r\n\tstatic toggleMenu(id) {\r\n\t\tthis.menu$_.next(this.currentMenu === id ? -1 : id);\r\n\t}\r\n\r\n\tstatic onBack() {\r\n\t\tthis.menu$_.next(-1);\r\n\t}\r\n\r\n\tstatic menu$() {\r\n\t\treturn this.menu$_;\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalResolveEvent, ModalService } from '../../common/modal/modal.service';\r\nimport { environment } from '../../environment';\r\nimport { CartMiniService } from '../cart-mini/cart-mini.service';\r\nimport { MenuService } from '../menu/menu.service';\r\nimport { UserService } from '../user/user.service';\r\nimport { HeaderService } from './header.service';\r\n\r\nconst USE_MODAL = false;\r\n\r\nexport class HeaderComponent extends Component {\r\n\r\n\tdirection_ = null;\r\n\tget direction() {\r\n\t\treturn this.direction_;\r\n\t}\r\n\tset direction(direction) {\r\n\t\tif (this.direction_ !== direction) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tnode.classList.remove(`scrolling-${this.direction_}`);\r\n\t\t\tnode.classList.add(`scrolling-${direction}`);\r\n\t\t\tthis.direction_ = direction;\r\n\t\t}\r\n\t}\r\n\r\n\tscrolled_ = null;\r\n\tget scrolled() {\r\n\t\treturn this.scrolled_;\r\n\t}\r\n\tset scrolled(scrolled) {\r\n\t\tif (this.scrolled_ !== scrolled) {\r\n\t\t\tthis.scrolled_ = scrolled;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tscrolled ? node.classList.add(`scrolled`) : node.classList.remove(`scrolled`);\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst body = document.querySelector('body');\r\n\t\tthis.header = HeaderService.currentHeader;\r\n\t\tHeaderService.header$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(header => {\r\n\t\t\tthis.header = header;\r\n\t\t\tthis.pushChanges();\r\n\t\t\tbody.setAttribute('class', header !== -1 ? `${header}-active` : '');\r\n\t\t});\r\n\t\tthis.menu = MenuService.currentMenu;\r\n\t\tMenuService.menu$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(menu => {\r\n\t\t\tthis.menu = menu;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.cart = CartMiniService;\r\n\t\tthis.user = null;\r\n\t\tUserService.me$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(user => {\r\n\t\t\tthis.user = user;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tconst pictogram = document.querySelector('.page > .pictogram');\r\n\t\tLocomotiveScrollService.scroll$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe((event) => {\r\n\t\t\tthis.direction = event.direction;\r\n\t\t\tthis.scrolled = event.scroll.y > 100;\r\n\t\t\tconst opacity = 0.1 - 0.1 * Math.min(1, Math.max(0, (event.scroll.y - window.innerHeight * 3) / window.innerHeight / 3));\r\n\t\t\tgsap.set(pictogram, { opacity });\r\n\t\t\t// console.log('HeaderComponent', event.scroll.y, event.direction, event.speed);\r\n\t\t});\r\n\t}\r\n\r\n\tonOpenMarketAndLanguage() {\r\n\t\tMenuService.onBack();\r\n\t\tHeaderService.onBack();\r\n\t\tModalService.open$({ src: environment.template.modal.marketsAndLanguagesModal }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tconsole.log('HeaderComponent.onOpenMarketAndLanguage', event);\r\n\t\t});\r\n\t}\r\n\r\n\tonLogin() {\r\n\t\tMenuService.onBack();\r\n\t\tHeaderService.onBack();\r\n\t\tif (USE_MODAL) {\r\n\t\t\tModalService.open$({ src: environment.template.modal.userModal, data: { view: 1 } }).pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t\t).subscribe(event => {\r\n\t\t\t\tconsole.log('HeaderComponent.onLogin', event);\r\n\t\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\t\twindow.location.href = environment.slug.reservedArea;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\twindow.location.href = environment.slug.reservedArea;\r\n\t\t}\r\n\t}\r\n\r\n\tonLogout() {\r\n\t\tUserService.signout$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tonToggle(id) {\r\n\t\tMenuService.onBack();\r\n\t\tHeaderService.toggleHeader(id);\r\n\t}\r\n\r\n\tonBack(event) {\r\n\t\tMenuService.onBack();\r\n\t}\r\n}\r\n\r\nHeaderComponent.meta = {\r\n\tselector: '[header]',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { HeaderService } from '../header/header.service';\r\nimport { MenuService } from './menu.service';\r\n\r\nexport class MenuDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = this.target = document.querySelector(`#menu-${this.menu}`);\r\n\t\tconst preview = target.querySelector('[data-target]');\r\n\t\tconst previewSrc = this.previewSrc = preview.src;\r\n\t\tconst container = this.container = target.querySelector(`.container`);\r\n\t\tthis.onClick = this.onClick.bind(this);\r\n\t\tthis.onLeave = this.onLeave.bind(this);\r\n\t\tnode.addEventListener('click', this.onClick);\r\n\t\tMenuService.menu$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(menu_ => {\r\n\t\t\tif (this.menu === menu_) {\r\n\t\t\t\tthis.onEnter();\r\n\t\t\t} else {\r\n\t\t\t\tthis.onExit();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonClick(event) {\r\n\t\tevent.preventDefault();\r\n\t\t// console.log('MenuDirective.onClick', this.menu);\r\n\t\tif (HeaderService.currentHeader !== 'menu') {\r\n\t\t\tHeaderService.onBack();\r\n\t\t}\r\n\t\tMenuService.toggleMenu(this.menu);\r\n\t}\r\n\r\n\tonLeave() {\r\n\t\t// console.log('MenuDirective.onLeave', this.menu);\r\n\t\tMenuService.onBack();\r\n\t\tthis.onExit();\r\n\t}\r\n\r\n\tonEnter() {\r\n\t\t// console.log('MenuDirective.onEnter', this.menu);\r\n\t\tconst target = this.target;\r\n\t\tconst preview = target.querySelector('[data-target]');\r\n\t\tpreview.src = this.previewSrc;\r\n\t\tconst container = this.container;\r\n\t\tcontainer.addEventListener('mouseleave', this.onLeave);\r\n\t}\r\n\r\n\tonExit() {\r\n\t\t// console.log('MenuDirective.onExit', this.menu);\r\n\t\tconst container = this.container;\r\n\t\tcontainer.removeEventListener('mouseleave', this.onLeave);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.onExit();\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.removeEventListener('click', this.onClick);\r\n\t}\r\n}\r\n\r\nMenuDirective.meta = {\r\n\tselector: '[menu]',\r\n\tinputs: ['menu'],\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { LocationService } from '../../common/location/location.service';\r\n\r\nexport class NewsletterPropositionComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tonNewsletter(event) {\r\n\t\tconsole.log('NewsletterPropositionComponent.onNewsletter', this.form.value);\r\n\t\tconst encoded = LocationService.encode('email', this.form.value.email, {});\r\n\t\twindow.location.href = `${this.action}?params=${encoded}`;\r\n\t}\r\n}\r\n\r\nNewsletterPropositionComponent.meta = {\r\n\tselector: '[newsletter-proposition]',\r\n\tinputs: ['action'],\r\n};\r\n","import { of } from 'rxjs';\r\nimport { map, tap } from 'rxjs/operators';\r\nimport { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport class SearchService {\r\n\r\n\tstatic search$_() {\r\n\t\tif (SearchService.items_) {\r\n\t\t\treturn of(SearchService.items_);\r\n\t\t} else {\r\n\t\t\treturn (\r\n\t\t\t\tenvironment.flags.production ?\r\n\t\t\t\t\tApiService.get$(`/search/search.json`) :\r\n\t\t\t\t\tApiService.get$(`/search/search.json`)\r\n\t\t\t).pipe(\r\n\t\t\t\ttap(items => {\r\n\t\t\t\t\titems.forEach(item => {\r\n\t\t\t\t\t\titem.title = SearchService.toTitleCase(item.title);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tSearchService.items_ = items;\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic search$(query) {\r\n\t\tquery = query.toLowerCase();\r\n\t\treturn this.search$_().pipe(\r\n\t\t\tmap(items => {\r\n\t\t\t\titems = items.filter(item => item.title.toLowerCase().indexOf(query) !== -1);\r\n\t\t\t\titems.sort((a, b) => {\r\n\t\t\t\t\treturn a.title.toLowerCase().indexOf(query) - b.title.toLowerCase().indexOf(query);\r\n\t\t\t\t});\r\n\t\t\t\treturn items;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic toTitleCase(sentence, seps = ' _-/') {\r\n\t\tconst capitalize = str => str.length ? str[0].toUpperCase() + str.slice(1).toLowerCase() : '';\r\n\t\tconst escape = str => str.replace(/./g, c => `\\\\${c}`);\r\n\t\tlet wordPattern = new RegExp(`[^${escape(seps)}]+`, 'g');\r\n\t\treturn sentence.replace(wordPattern, capitalize);\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { of } from 'rxjs';\r\nimport { auditTime, map, switchMap, takeUntil } from 'rxjs/operators';\r\nimport { SearchService } from './search.service';\r\n\r\nexport class SearchComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.items = [];\r\n\t\tthis.visibleItems = [];\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tsearch: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tthis.search$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe((items) => {\r\n\t\t\tthis.items = items;\r\n\t\t\tthis.visibleItems = items.slice(0, Math.min(10, items.length));\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tsearch$() {\r\n\t\treturn this.form.changes$.pipe(\r\n\t\t\tauditTime(500),\r\n\t\t\tmap(changes => changes.search),\r\n\t\t\tswitchMap(query => {\r\n\t\t\t\tif (query != null && query.length > 1) {\r\n\t\t\t\t\treturn SearchService.search$(query);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn of([]);\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nSearchComponent.meta = {\r\n\tselector: '[search]',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class SubmenuDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst items = Array.prototype.slice.call(node.querySelectorAll('[data-picture]'));\r\n\t\tconst target = node.querySelector('[data-target]');\r\n\t\tgsap.set(target, { opacity: 1 });\r\n\t\titems.forEach(item => {\r\n\t\t\titem.addEventListener('mouseover', (event) => {\r\n\t\t\t\tconst picture = item.getAttribute('data-picture');\r\n\t\t\t\tgsap.set(target, { opacity: 0 });\r\n\t\t\t\ttarget.onload = () => {\r\n\t\t\t\t\tgsap.to(target, {\r\n\t\t\t\t\t\tduration: 0.5,\r\n\t\t\t\t\t\tdelay: 0.1,\r\n\t\t\t\t\t\topacity: 1,\r\n\t\t\t\t\t\tease: Power4.easeOut,\r\n\t\t\t\t\t\toverwrite: 'all',\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\ttarget.src = picture;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nSubmenuDirective.meta = {\r\n\tselector: '[submenu]'\r\n};\r\n","import { Component } from 'rxcomp';\r\n\r\nexport class TreeComponent extends Component {\r\n\r\n\thasItems(item) {\r\n\t\treturn item.items && item.items.length > 0;\r\n\t}\r\n\r\n\tonClick(item) {\r\n\t\tthis.tree.forEach(x => {\r\n\t\t\tx.active = x.id === item.id ? (this.hasItems(item) ? !item.active : true) : false;\r\n\t\t});\r\n\t\tif (item.active) {\r\n\t\t\tthis.open.next(item);\r\n\t\t}\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonOpen(item) {\r\n\t\tthis.open.next(item);\r\n\t}\r\n\r\n}\r\n\r\nTreeComponent.meta = {\r\n\tselector: '[tree]',\r\n\tinputs: ['tree'],\r\n\toutputs: ['open'],\r\n\ttemplate: /* html */ `\r\n\t\t<li class=\"folder\" [class]=\"{ active: item.active }\" *for=\"let item of tree\">\r\n\t\t\t<span [innerHTML]=\"item.title\" (click)=\"onClick(item)\"></span>\r\n\t\t\t<ul [tree]=\"item.items\" (open)=\"onOpen($event)\"></ul>\r\n\t\t</li>\r\n\t`\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, switchMap, takeUntil } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { UserService } from './user.service';\r\n\r\nexport class UserAccessDataComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tpassword: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tnewPassword: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t\tUserService.me$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(user => {\r\n\t\t\tif (user) {\r\n\t\t\t\tform.patch({ email: user.email }, true);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('UserAccessDataComponent.onSubmit', form.value);\r\n\t\tif (form.valid) {\r\n\t\t\tform.submitted = true;\r\n\t\t\tUserService.accessData$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t\tswitchMap(_ => UserService.signout$())\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\tconsole.log('UserAccessDataComponent.onSubmit', response);\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"AccessData\",\r\n\t\t\t\t\t'form_name': \"AccessData\"\r\n\t\t\t\t});\r\n\t\t\t\tform.reset();\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('UserAccessDataComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tform.submitted = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nUserAccessDataComponent.meta = {\r\n\tselector: '[user-access-data]',\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, switchMap, takeUntil } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { UserService } from './user.service';\r\n\r\nexport class UserDeleteComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tpassword: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t\tUserService.me$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(user => {\r\n\t\t\tif (user) {\r\n\t\t\t\tform.patch({ email: user.email }, true);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('UserDeleteComponent.onSubmit', form.value);\r\n\t\tif (form.valid) {\r\n\t\t\tform.submitted = true;\r\n\t\t\tUserService.delete$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t\tswitchMap(_ => UserService.signout$())\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\tconsole.log('UserDeleteComponent.onSubmit', response);\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"AccessData\",\r\n\t\t\t\t\t'form_name': \"AccessData\"\r\n\t\t\t\t});\r\n\t\t\t\tform.reset();\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('UserDeleteComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tform.submitted = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nUserDeleteComponent.meta = {\r\n\tselector: '[user-delete]',\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { combineLatest } from 'rxjs';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\nimport { environment } from '../../environment';\r\nimport { UserService } from './user.service';\r\n\r\nexport class UserDetailComponent extends Component {\r\n\r\n\tget countryName() {\r\n\t\tlet countryName = null;\r\n\t\tif (this.user && this.countries.length) {\r\n\t\t\tconst country = this.countries.find(x => x.value === this.user.country);\r\n\t\t\tif (country) {\r\n\t\t\t\tcountryName = country.label;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn countryName;\r\n\t}\r\n\r\n\tget occupationName() {\r\n\t\tlet occupationName = null;\r\n\t\tif (this.user && this.occupations.length) {\r\n\t\t\tconst occupation = this.occupations.find(x => x.value === this.user.occupation);\r\n\t\t\tif (occupation) {\r\n\t\t\t\toccupationName = occupation.label;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn occupationName;\r\n\t}\r\n\r\n\tget newsletterLanguageName() {\r\n\t\tlet newsletterLanguageName = null;\r\n\t\tif (this.user && this.newsletterLanguages.length) {\r\n\t\t\tconst newsletterLanguage = this.newsletterLanguages.find(x => x.value === this.user.newsletterLanguage);\r\n\t\t\tif (newsletterLanguage) {\r\n\t\t\t\tnewsletterLanguageName = newsletterLanguage.label;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn newsletterLanguageName;\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.countries = [];\r\n\t\tthis.occupations = [];\r\n\t\tthis.newsletterLanguages = [];\r\n\t\tthis.gdpr = [];\r\n\t\tUserService.me$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(user => {\r\n\t\t\tthis.user = user;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tUserService.data$(),\r\n\t\t\tUserService.gdpr$(),\r\n\t\t]).pipe(\r\n\t\t\ttap(datas => {\r\n\t\t\t\tconst data = datas[0];\r\n\t\t\t\tthis.countries = data.country.options;\r\n\t\t\t\tthis.occupations = data.occupation.options;\r\n\t\t\t\tthis.newsletterLanguages = data.newsletterLanguage.options;\r\n\t\t\t\tconst gdpr = datas[1];\r\n\t\t\t\tthis.gdpr = gdpr;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tonModalUserUpdate(event) {\r\n\t\t// console.log('UserDetailComponent.onModalUserUpdate');\r\n\t\tModalService.open$({ src: environment.template.modal.userModal, data: { view: 4 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('UserDetailComponent.onModalSignUp', event);\r\n\t\t});\r\n\t}\r\n\r\n\tonModalGdpr(legalNote) {\r\n\t\t// console.log('UserDetailComponent.onModalUserUpdate');\r\n\t\tModalService.open$({ src: environment.template.modal.genericModal, data: { title: legalNote.title, description: legalNote.description } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('UserDetailComponent.onModalGdpr', event);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nUserDetailComponent.meta = {\r\n\tselector: '[user-detail]',\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { combineLatest } from 'rxjs';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport RequiredIfValidator from '../../controls/required-if.validator';\r\nimport { UserService } from './user.service';\r\n\r\nexport class UserEditComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.user = null;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tlastName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcountry: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcity: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcompany: new FormControl(null),\r\n\t\t\toccupation: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tprivacy: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tnewsletter: new FormControl(null),\r\n\t\t\tnewsletterLanguage: new FormControl(null, [RequiredIfValidator('newsletter', form)]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([UserService.data$(), UserService.me$()]).pipe(\r\n\t\t\ttap(results => {\r\n\t\t\t\tconst data = results[0];\r\n\t\t\t\tconst controls = this.controls;\r\n\t\t\t\tcontrols.country.options = FormService.toSelectOptions(data.country.options);\r\n\t\t\t\tcontrols.occupation.options = FormService.toSelectOptions(data.occupation.options);\r\n\t\t\t\tcontrols.newsletterLanguage.options = FormService.toSelectOptions(data.newsletterLanguage.options);\r\n\t\t\t\tconst user = results[1];\r\n\t\t\t\tthis.user = user;\r\n\t\t\t\tif (user) {\r\n\t\t\t\t\tconst form = this.form;\r\n\t\t\t\t\tform.patch(user, true);\r\n\t\t\t\t}\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tconst controls = this.controls;\r\n\t\tconst country = controls.country.options.length > 1 ? controls.country.options[1].id : null;\r\n\t\tconst occupation = controls.occupation.options.length > 1 ? controls.occupation.options[1].id : null;\r\n\t\tform.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\tcountry: country,\r\n\t\t\tcity: 'Pesaro',\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\toccupation: occupation,\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tprivacy: true,\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('UserEditComponent.onSubmit', form.value);\r\n\t\tif (form.valid) {\r\n\t\t\tform.submitted = true;\r\n\t\t\tUserService.edit$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\tconsole.log('UserEditComponent.onSubmit', response);\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\t/*\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Registration\",\r\n\t\t\t\t\t'form_name': \"Registrazione\"\r\n\t\t\t\t});\r\n\t\t\t\t*/\r\n\t\t\t\tform.reset();\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('UserEditComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tform.submitted = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nUserEditComponent.meta = {\r\n\tselector: '[user-edit]',\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { UserService } from './user.service';\r\n\r\nexport class UserForgotComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tform.patch({\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('UserForgotComponent.onSubmit', form.value);\r\n\t\tif (form.valid) {\r\n\t\t\tform.submitted = true;\r\n\t\t\tUserService.forgot$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\tconsole.log('UserForgotComponent.onSubmit', response);\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Forgot\",\r\n\t\t\t\t\t'form_name': \"Recupero Password\"\r\n\t\t\t\t});\r\n\t\t\t\tform.reset();\r\n\t\t\t\tthis.forgot.next(true);\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('UserForgotComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tform.submitted = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonSignIn() {\r\n\t\tthis.viewSignIn.next();\r\n\t}\r\n\r\n\tonSignUp() {\r\n\t\tthis.viewSignUp.next();\r\n\t}\r\n}\r\n\r\nUserForgotComponent.meta = {\r\n\tselector: '[user-forgot]',\r\n\toutputs: ['forgot', 'viewSignIn', 'viewSignUp'],\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\nimport { environment } from '../../environment';\r\nimport { UserService, UserViews } from './user.service';\r\n\r\nexport class UserComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.views = UserViews;\r\n\t\tthis.view = this.view || UserViews.SIGN_UP;\r\n\t}\r\n\r\n\tonModalSignIn(event) {\r\n\t\t// console.log('UserComponent.onModalSignIn');\r\n\t\tModalService.open$({ src: environment.template.modal.userModal, data: { view: 1 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tconsole.log('UserComponent.onModalSignIn', event);\r\n\t\t});\r\n\t}\r\n\r\n\tonModalSignUp(event) {\r\n\t\t// console.log('UserComponent.onModalSignUp');\r\n\t\tModalService.open$({ src: environment.template.modal.userModal, data: { view: 2 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tconsole.log('UserComponent.onModalSignUp', event);\r\n\t\t});\r\n\t}\r\n\r\n\tsetView(view) {\r\n\t\tthis.view = view;\r\n\t\tthis.pushChanges();\r\n\t\tconst { node } = getContext(this);\r\n\t\tLocomotiveScrollService.scrollTo(node, { offset: -100 });\r\n\t}\r\n\r\n\tonViewSignIn(event) {\r\n\t\t// console.log('UserComponent.onViewSignIn');\r\n\t\tthis.setView(UserViews.SIGN_IN);\r\n\t}\r\n\r\n\tonViewSignUp(event) {\r\n\t\t// console.log('UserComponent.onViewSignIn');\r\n\t\tthis.setView(UserViews.SIGN_UP);\r\n\t}\r\n\r\n\tonViewForgot(event) {\r\n\t\t// console.log('UserComponent.onViewForgot');\r\n\t\tthis.setView(UserViews.FORGOTTEN);\r\n\t}\r\n\r\n\tonSignIn(user) {\r\n\t\tconsole.log('UserComponent.onSignIn', user);\r\n\t\tUserService.setUser(user);\r\n\t\tif (this.navTo) {\r\n\t\t\twindow.location.href = this.navTo;\r\n\t\t}\r\n\t\t// nav to profile\r\n\t}\r\n\r\n\tonSignUp(user) {\r\n\t\tconsole.log('UserComponent.onSignUp', user);\r\n\t\tUserService.setUser(user);\r\n\t\tif (this.navTo) {\r\n\t\t\twindow.location.href = this.navTo;\r\n\t\t}\r\n\t\t// nav to profile\r\n\t}\r\n\r\n\tonForgot(email) {\r\n\t\t/*\r\n\t\tconsole.log('UserComponent.onForgot', email);\r\n\t\tthis.setView(UserViews.SIGN_IN);\r\n\t\t*/\r\n\t}\r\n}\r\n\r\nUserComponent.meta = {\r\n\tselector: '[user]',\r\n\tinputs: ['navTo', 'view']\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalOutletComponent } from '../../common/modal/modal-outlet.component';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\nimport { UserComponent } from './user.component';\r\nimport { UserViews } from './user.service';\r\n\r\nexport class UserModalComponent extends UserComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tconst data = parentInstance.modal.data;\r\n\t\t\tthis.view = data.view;\r\n\t\t\tthis.me = data.me;\r\n\t\t\t// console.log('UserModalComponent.onInit', data);\r\n\t\t}\r\n\t\tLocomotiveScrollService.stop();\r\n\t}\r\n\r\n\tsetView(view) {\r\n\t\tthis.view = view;\r\n\t\tthis.pushChanges();\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = window.innerWidth >= 1024 ? node.querySelector('.modal__inner') : node;\r\n\t\ttarget.scrollTo(0, 0);\r\n\t}\r\n\r\n\tonViewForgot() {\r\n\t\tconsole.log('UserModalComponent.onViewForgot');\r\n\t\tthis.setView(UserViews.FORGOTTEN);\r\n\t}\r\n\r\n\tonViewSignIn() {\r\n\t\tconsole.log('UserModalComponent.onViewSignIn');\r\n\t\tthis.setView(UserViews.SIGN_IN);\r\n\t}\r\n\r\n\tonViewSignUp() {\r\n\t\tconsole.log('UserModalComponent.onViewSignUp');\r\n\t\tthis.setView(UserViews.SIGN_UP);\r\n\t}\r\n\r\n\tonClose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n\tonSignUp(user) {\r\n\t\t// console.log('UserModalComponent.onSignUp', user);\r\n\t\tModalService.resolve(user);\r\n\t}\r\n\r\n\tonSignIn(user) {\r\n\t\t// console.log('UserModalComponent.onSignIn', user);\r\n\t\tModalService.resolve(user);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tLocomotiveScrollService.start();\r\n\t}\r\n}\r\n\r\nUserModalComponent.meta = {\r\n\tselector: '[user-modal]'\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { UserService } from './user.service';\r\n\r\nexport class UserSigninComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tpassword: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tform.patch({\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tpassword: '********',\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('UserSigninComponent.onSubmit', form.value);\r\n\t\tif (form.valid) {\r\n\t\t\tform.submitted = true;\r\n\t\t\tUserService.signin$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\tconsole.log('UserSigninComponent.onSubmit', response);\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Signin\",\r\n\t\t\t\t\t'form_name': \"Login\"\r\n\t\t\t\t});\r\n\t\t\t\tform.reset();\r\n\t\t\t\tthis.signIn.next(response);\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('UserSigninComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tform.submitted = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonForgot(event) {\r\n\t\tthis.viewForgot.next();\r\n\t}\r\n\r\n\tonSignUp(event) {\r\n\t\tthis.viewSignUp.next();\r\n\t}\r\n}\r\n\r\nUserSigninComponent.meta = {\r\n\tselector: '[user-signin]',\r\n\toutputs: ['signIn', 'viewForgot', 'viewSignUp'],\r\n};\r\n","import { FormValidator } from 'rxcomp-form';\r\n\r\nexport default function MatchValidator(fieldName, formGroup) {\r\n\r\n\treturn new FormValidator((value) => {\r\n\t\tconst field = formGroup ? formGroup.get(fieldName) : null;\r\n\t\tif (!value || !field) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn value !== field.value ? { match: { value: value, match: field.value } } : null;\r\n\t});\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport MatchValidator from '../../controls/match.validator';\r\nimport RequiredIfValidator from '../../controls/required-if.validator';\r\nimport { UserService } from './user.service';\r\n\r\nexport class UserSignupComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.me = this.me || {};\r\n\t\tthis.user = this.user || null;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(this.me.firstName || null, [Validators.RequiredValidator()]),\r\n\t\t\tlastName: new FormControl(this.me.lastName || null, [Validators.RequiredValidator()]),\r\n\t\t\tcountry: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcity: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcompany: new FormControl(null),\r\n\t\t\toccupation: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\temail: new FormControl(this.me.email || null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tpassword: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tpasswordConfirm: new FormControl(null, [Validators.RequiredValidator(), MatchValidator('password', form)]),\r\n\t\t\tprivacy: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tnewsletter: new FormControl(null),\r\n\t\t\tnewsletterLanguage: new FormControl(null, [RequiredIfValidator('newsletter', form)]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn UserService.data$().pipe(\r\n\t\t\ttap(data => {\r\n\t\t\t\tconst controls = this.controls;\r\n\t\t\t\tcontrols.country.options = FormService.toSelectOptions(data.country.options);\r\n\t\t\t\tcontrols.occupation.options = FormService.toSelectOptions(data.occupation.options);\r\n\t\t\t\tcontrols.newsletterLanguage.options = FormService.toSelectOptions(data.newsletterLanguage.options);\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tconst controls = this.controls;\r\n\t\tconst country = controls.country.options.length > 1 ? controls.country.options[1].id : null;\r\n\t\tconst occupation = controls.occupation.options.length > 1 ? controls.occupation.options[1].id : null;\r\n\t\tform.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\tcountry: country,\r\n\t\t\tcity: 'Pesaro',\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\toccupation: occupation,\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tpassword: '********',\r\n\t\t\tpasswordConfirm: '********',\r\n\t\t\tprivacy: true,\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('UserSignupComponent.onSubmit', form.value);\r\n\t\tif (form.valid) {\r\n\t\t\tform.submitted = true;\r\n\t\t\tUserService.signup$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\tconsole.log('UserSignupComponent.onSubmit', response);\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Registration\",\r\n\t\t\t\t\t'form_name': \"Registrazione\"\r\n\t\t\t\t});\r\n\t\t\t\tform.reset();\r\n\t\t\t\tthis.signUp.next(response);\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('UserSignupComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tform.submitted = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonSignIn() {\r\n\t\tthis.viewSignIn.next();\r\n\t}\r\n}\r\n\r\nUserSignupComponent.meta = {\r\n\tselector: '[user-signup]',\r\n\toutputs: ['signUp', 'viewSignIn'],\r\n\tinputs: ['me', 'user'],\r\n};\r\n","import { Module } from 'rxcomp';\r\nimport { MapComponent } from '../partials/map/map.component';\r\nimport { SwiperGalleryDirective } from '../partials/swiper-gallery/swiper-gallery.directive';\r\nimport { SwiperHomepageDirective } from '../partials/swiper-homepage/swiper-homepage.directive';\r\nimport { SwiperNewsPropositionDirective } from '../partials/swiper-news-proposition/swiper-news-proposition.directive';\r\nimport { SwiperProductsPropositionDirective } from '../partials/swiper-products-proposition/swiper-products-proposition.directive';\r\nimport { SwiperProjectsPropositionDirective } from '../partials/swiper-projects-proposition/swiper-projects-proposition.directive';\r\nimport { CartMiniComponent } from './cart-mini/cart-mini.component';\r\nimport { ErrorComponent } from './error/error.component';\r\nimport { FilesComponent } from './files/files.component';\r\nimport { HeaderComponent } from './header/header.component';\r\nimport { MenuDirective } from './menu/menu.directive';\r\nimport { NewsletterPropositionComponent } from './newsletter-proposition/newsletter-proposition.component';\r\nimport { SearchComponent } from './search/search.component';\r\nimport { SubmenuDirective } from './submenu/submenu.directive';\r\nimport { TreeComponent } from './tree/tree.component';\r\nimport { UserAccessDataComponent } from './user/user-access-data.component';\r\nimport { UserDeleteComponent } from './user/user-delete.component';\r\nimport { UserDetailComponent } from './user/user-detail.component';\r\nimport { UserEditComponent } from './user/user-edit.component';\r\nimport { UserForgotComponent } from './user/user-forgot.component';\r\nimport { UserModalComponent } from './user/user-modal.component';\r\nimport { UserSigninComponent } from './user/user-signin.component';\r\nimport { UserSignupComponent } from './user/user-signup.component';\r\nimport { UserComponent } from './user/user.component';\r\n\r\nconst factories = [\r\n\tCartMiniComponent,\r\n\tErrorComponent,\r\n\tFilesComponent,\r\n\tHeaderComponent,\r\n\tMapComponent,\r\n\tMenuDirective,\r\n\tNewsletterPropositionComponent,\r\n\tSearchComponent,\r\n\tSubmenuDirective,\r\n\tSwiperGalleryDirective,\r\n\tSwiperHomepageDirective,\r\n\tSwiperNewsPropositionDirective,\r\n\tSwiperProductsPropositionDirective,\r\n\tSwiperProjectsPropositionDirective,\r\n\tTreeComponent,\r\n\tUserAccessDataComponent,\r\n\tUserComponent,\r\n\tUserDeleteComponent,\r\n\tUserEditComponent,\r\n\tUserForgotComponent,\r\n\tUserModalComponent,\r\n\tUserDetailComponent,\r\n\tUserSigninComponent,\r\n\tUserSignupComponent,\r\n];\r\n\r\nconst pipes = [\r\n];\r\n\r\nexport class SharedModule extends Module { }\r\n\r\nSharedModule.meta = {\r\n\timports: [\r\n\t],\r\n\tdeclarations: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n\texports: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n};\r\n","import { CoreModule, Module } from 'rxcomp';\r\nimport { FormModule } from 'rxcomp-form';\r\nimport { AppComponent } from './app.component';\r\nimport { CommonModule } from './common/common.module';\r\nimport { ControlsModule } from './controls/controls.module';\r\nimport { AmbienceComponent } from './pages/ambience/ambience.component';\r\nimport { AteliersAndStoresComponent } from './pages/ateliers-and-stores/ateliers-and-stores.component';\r\nimport { CareersModalComponent } from './pages/careers/careers-modal.component';\r\nimport { CareersComponent } from './pages/careers/careers.component';\r\nimport { CartComponent } from './pages/cart/cart.component';\r\nimport { ContactsComponent } from './pages/contacts/contacts.component';\r\nimport { DealersComponent } from './pages/dealers/dealers.component';\r\nimport { DesignersComponent } from './pages/designers/designers.component';\r\nimport { GenericModalComponent } from './pages/generic/generic-modal.component';\r\nimport { MarketsAndLanguagesModalComponent } from './pages/markets-and-languages/markets-and-languages-modal.component';\r\nimport { MaterialsModalComponent } from './pages/materials/materials-modal.component';\r\nimport { MaterialsComponent } from './pages/materials/materials.component';\r\nimport { NewsComponent } from './pages/news/news.component';\r\nimport { NewsletterComponent } from './pages/newsletter/newsletter.component';\r\nimport { OrdersDetailComponent } from './pages/orders/orders-detail.component';\r\nimport { OrdersModalComponent } from './pages/orders/orders-modal.component';\r\nimport { OrdersComponent } from './pages/orders/orders.component';\r\nimport { ProductsConfigureComponent } from './pages/products-configure/products-configure.component';\r\nimport { ProductsDetailComponent } from './pages/products-detail/products-detail.component';\r\nimport { ProductsComponent } from './pages/products/products.component';\r\nimport { ProjectsRegistrationModalComponent } from './pages/projects-registration/projects-registration-modal.component';\r\nimport { ProjectsRegistrationComponent } from './pages/projects-registration/projects-registration.component';\r\nimport { ProjectsComponent } from './pages/projects/projects.component';\r\nimport { ReservedAreaComponent } from './pages/reserved-area/reserved-area.component';\r\nimport { StoreLocatorComponent } from './pages/store-locator/store-locator.component';\r\nimport { SharedModule } from './shared/shared.module';\r\n\r\nexport class AppModule extends Module { }\r\n\r\nAppModule.meta = {\r\n\timports: [\r\n\t\tCoreModule,\r\n\t\tFormModule,\r\n\t\tCommonModule,\r\n\t\tControlsModule,\r\n\t\tSharedModule,\r\n\t],\r\n\tdeclarations: [\r\n\t\tAmbienceComponent,\r\n\t\tAteliersAndStoresComponent,\r\n\t\tCareersComponent,\r\n\t\tCareersModalComponent,\r\n\t\tCartComponent,\r\n\t\tContactsComponent,\r\n\t\tDealersComponent,\r\n\t\tDesignersComponent,\r\n\t\tGenericModalComponent,\r\n\t\tMarketsAndLanguagesModalComponent,\r\n\t\tMaterialsComponent,\r\n\t\tMaterialsModalComponent,\r\n\t\tNewsComponent,\r\n\t\tNewsletterComponent,\r\n\t\tOrdersComponent,\r\n\t\tOrdersDetailComponent,\r\n\t\tOrdersModalComponent,\r\n\t\tProductsComponent,\r\n\t\tProductsConfigureComponent,\r\n\t\tProductsDetailComponent,\r\n\t\tProjectsComponent,\r\n\t\tProjectsRegistrationComponent,\r\n\t\tProjectsRegistrationModalComponent,\r\n\t\tReservedAreaComponent,\r\n\t\tStoreLocatorComponent,\r\n\t],\r\n\tbootstrap: AppComponent,\r\n};\r\n","import { Browser } from 'rxcomp';\r\nimport { AppModule } from './app.module';\r\n\r\nBrowser.bootstrap(AppModule);\r\n"]}