{"version":3,"sources":["src/js/main.js","../../src/js/common/modal/modal.service.js","../../src/js/common/utils/utils.js","../../src/js/environment.js","../../src/js/environment.static.js","../../src/js/environment.served.js","../../src/js/common/storage/local-storage.service.js","../../src/js/shared/header/header.service.js","../../src/js/shared/cart/cart.service.js","../../src/js/common/http/http.service.js","../../src/js/common/label/label.pipe.js","../../src/js/common/location/location.service.js","../../src/js/common/language/language.service.js","../../src/js/common/api/api.service.js","../../src/js/common/storage/session-storage.service.js","../../src/js/shared/user/user.service.js","../../src/js/app.component.js","../../src/js/common/download/download.directive.js","../../src/js/common/dropdown/dropdown.directive.js","../../src/js/common/dropdown/dropdown-item.directive.js","../../src/js/common/env/env.pipe.js","../../src/js/common/flag/flag.pipe.js","../../src/js/common/highlight/highlight.pipe.js","../../src/js/common/html/html.pipe.js","../../src/js/common/id/id.directive.js","../../src/js/common/label-for/label-for.directive.js","../../src/js/common/locomotive-scroll/locomotive-scroll.service.js","../../src/js/common/locomotive-scroll/locomotive-scroll-to.directive.js","../../src/js/common/locomotive-scroll/locomotive-scroll.directive.js","../../src/js/common/locomotive-scroll/scroll.directive.js","../../src/js/common/modal/modal-outlet.component.js","../../src/js/common/number/number.pipe.js","../../src/js/common/share/share.directive.js","../../src/js/common/slug/slug.pipe.js","../../src/js/common/svg/svg-icon.structure.js","../../src/js/common/swiper/swiper.directive.js","../../src/js/common/thron/thron.service.js","../../src/js/common/thron/thron.component.js","../../src/js/common/title/title.directive.js","../../src/js/common/common.module.js","../../src/js/controls/control.component.js","../../src/js/controls/control-checkbox.component.js","../../src/js/common/keyboard/keyboard.service.js","../../src/js/controls/control-custom-select.component.js","../../src/js/controls/control-email.component.js","../../src/js/controls/control-file.component.js","../../src/js/controls/control-password.component.js","../../src/js/controls/control-search.component.js","../../src/js/controls/control-text.component.js","../../src/js/controls/control-textarea.component.js","../../src/js/controls/errors.component.js","../../src/js/controls/test.component.js","../../src/js/controls/controls.module.js","../../src/js/common/filter/filter-item.js","../../src/js/common/filter/filter.service.js","../../src/js/controls/form.service.js","../../src/js/pages/ambience/ambience.service.js","../../src/js/pages/ambience/ambience.component.js","../../src/js/pages/ateliers-and-stores/ateliers-and-stores.service.js","../../src/js/pages/ateliers-and-stores/ateliers-and-stores.component.js","../../src/js/common/gtm/gtm.service.js","../../src/js/pages/careers/careers.service.js","../../src/js/pages/careers/careers.component.js","../../src/js/pages/contacts/contacts.service.js","../../src/js/pages/contacts/contacts.component.js","../../src/js/pages/dealers/dealers.service.js","../../src/js/pages/dealers/dealers.component.js","../../src/js/pages/designers/designers.service.js","../../src/js/pages/designers/designers.component.js","../../src/js/pages/markets-and-languages/markets-and-languages.service.js","../../src/js/pages/markets-and-languages/markets-and-languages-modal.component.js","../../src/js/pages/materials/materials-modal.component.js","../../src/js/pages/materials/materials.service.js","../../src/js/pages/materials/materials.component.js","../../src/js/pages/news/news.service.js","../../src/js/pages/news/news.component.js","../../src/js/pages/newsletter/newsletter.service.js","../../src/js/pages/newsletter/newsletter.component.js","../../src/js/pages/products-configure/products-configure.component.js","../../src/js/pages/products-detail/products-detail.service.js","../../src/js/pages/products-detail/products-detail.component.js","../../src/js/pages/products/products.service.js","../../src/js/pages/products/products.component.js","../../src/js/pages/projects-registration/projects-registration-modal.component.js","../../src/js/pages/projects-registration/projects-registration.service.js","../../src/js/pages/projects-registration/projects-registration.component.js","../../src/js/pages/projects/projects.service.js","../../src/js/pages/projects/projects.component.js","../../src/js/shared/files/files.service.js","../../src/js/pages/reserved-area/reserved-area.service.js","../../src/js/pages/reserved-area/reserved-area.component.js","../../src/js/pages/store-locator/store-locator.service.js","../../src/js/pages/store-locator/store-locator.component.js","../../node_modules/@googlemaps/markerclustererplus/src/overlay-view-safe.ts","../../node_modules/@googlemaps/markerclustererplus/src/cluster-icon.ts","../../src/js/partials/map/map.component.js","../../node_modules/@googlemaps/markerclustererplus/src/cluster.ts","../../node_modules/@googlemaps/markerclustererplus/src/markerclusterer.ts","../../src/js/partials/map/map.style.js","../../src/js/partials/swiper-gallery/swiper-gallery.directive.js","../../src/js/partials/swiper-homepage/swiper-homepage.directive.js","../../src/js/partials/swiper-news-proposition/swiper-news-proposition.directive.js","../../src/js/partials/swiper-products-proposition/swiper-products-proposition.directive.js","../../src/js/partials/swiper-projects-proposition/swiper-projects-proposition.directive.js","../../src/js/shared/cart/cart-mini.component.js","../../src/js/shared/files/files.component.js","../../src/js/shared/menu/menu.service.js","../../src/js/shared/header/header.component.js","../../src/js/shared/menu/menu.directive.js","../../src/js/shared/newsletter-proposition/newsletter-proposition.component.js","../../src/js/shared/search/search.service.js","../../src/js/shared/search/search.component.js","../../src/js/shared/submenu/submenu.directive.js","../../src/js/shared/tree/tree.component.js","../../src/js/shared/user/user-forgot.component.js","../../src/js/shared/user/user.component.js","../../src/js/shared/user/user-modal.component.js","../../src/js/shared/user/user-signin.component.js","../../src/js/controls/required-if.validator.js","../../src/js/shared/user/user-signup.component.js","../../src/js/controls/match.validator.js","../../src/js/shared/shared.module.js","../../src/js/app.module.js","../../src/js/main.js"],"names":["g","f","exports","module","require","define","amd","globalThis","self","rxcomp","form","rxjs","operators","this","rxcompForm","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_defineProperty","obj","value","_inheritsLoose","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_assertThisInitialized","ReferenceError","ModalEvent","data","ModalResolveEvent","_ModalEvent","apply","arguments","ModalRejectEvent","_ModalEvent2","ModalService","open$","modal","_this","getTemplate$","src","pipe","map","template","node","getNode","tap","modal$","next","hasModal","switchMap","events$","_","load$","url","from","fetch","then","response","text","div","document","createElement","innerHTML","firstElementChild","reject","resolve","Subject","Utils","merge","source","keys","forEach","Array","isArray","NODE","BASE_HREF","get","URLSearchParams","window","location","search","querySelector","getAttribute","HEROKU","host","indexOf","STATIC","port","DEVELOPMENT","split","ENV","PRODUCTION","Environment","_proto","options","assign","getAbsoluteUrl","path","params","origin","replace","getPath","isLocal","href","set","console","log","githubDocs","defaultOptions","flags","production","heroku","slug","markets","defaultMarket","currentMarket","languages","defaultLanguage","currentLanguage","labels","select","browse","cancel","error_email","error_match","error_required","loading","remove","required","select_file","update","upload","drag_and_drop_images","environmentOptions","api","assets","configureProduct","reservedArea","userModal","projectsRegistrationModal","materialsModal","marketsAndLanguagesModal","googleMaps","apiKey","thron","clientId","workers","image","prefetch","environment","LocalStorageService","delete","name","isLocalStorageSupported","localStorage","removeItem","exist","undefined","JSON","parse","e","cache","json","stringify","push","setItem","supported","HeaderService","setHeader","id","header$_","toggleHeader","currentHeader","onBack","header$","getValue","BehaviorSubject","CartService","hasItem","item","items","currentItems","setItems","items$_","items$","localItems","of","incrementItem$","slice","item_","find","qty","decrementItem$","removeItem$","addItem$","index","splice","removeAll$","match","showefy","product_link","reduce","HttpService","http$","method","format","userPass","response_","headers","Accept","Content-Type","body","credentials","btoa","Headers","typedResponse","contentType","ok","Promise","error","warn","catchError","throwError","getError","get$","query","delete$","post$","put$","patch$","object","status","statusCode","statusMessage","statusText","LabelPipe","_Pipe","transform","labels_","getKeys","_len","_key","x","join","setLabels","LABELS","Pipe","meta","LocationService","has","keyOrValue","pushParams","history","pushState","title","toString","to","replaceState","pathname","state","deserialize","encoded","decode","serialize","encode","decoded","atob","LanguageService","getDefaultLanguages","alternates","getDefaultLanguage","lang","setLanguage","language","selectedLanguage","setLanguage$","html","labelsMatch","exec","Function","call","bhereMatch","bhere","activeLanguage","toggleLanguages","showLanguages","pushChanges","_this2","ApiService","_HttpService","SessionStorageService","isSessionStorageSupported","sessionStorage","UserViews","SIGN_IN","SIGN_UP","FORGOTTEN","User","firstName","substr","toUpperCase","lastName","UserService","setUser","user","user$_","data$","forgot$","payload","me$","sessionUser","mapUser","signin$","signout$","_this3","signup$","_this4","sessionStorage$","mapUsers","users","AppComponent","_Component","onInit","getContext","classList","header","takeUntil","unsubscribe$","subscribe","onOpenMarketAndLanguage","event","onLogin","view","onLogout","first","onProjectRegistration","onAddToCart","onOpenMiniCart","Component","selector","DownloadDirective","_Directive","onChanges","setAttribute","download","Directive","inputs","DROPDOWN_ID","DropdownDirective","trigger","opened","onClick","bind","onDocumentClick","openDropdown","closeDropdown","addListeners","dropdown$","add","contains","addDocumentListeners","dropped","removeDocumentListeners","addEventListener","removeListeners","removeEventListener","onDestroy","nextId","dropdown","id_","outputs","DropdownItemDirective","EnvPipe","keypath","env","k","shift","FlagPipe","HighlightPipe","escapedQuery","escapeRegexChars","regExp","RegExp","b","safeToString","trim","encodeHTML","decodeHTML","HtmlPipe","m","n","String","fromCharCode","parseInt","unescapes","rx","IdDirective","LabelForDirective","labelFor","LocomotiveScrollService","scroll","scroll$","init","useKeyboard","smoothMobile","inertia","smooth","lerp","getDirection","getSpeed","initClass","scrollingClass","draggingClass","smoothClass","scrollbarContainer","scrollbarClass","multiplier","firefoxMultiplier","touchMultiplier","scrollFromAnywhere","gestureDirection","reloadOnContextChange","resetNativeScroll","el","useLocomotiveScroll","instance","LocomotiveScroll","innerWidth","isMacLike","test","navigator","platform","isIOS","isMacOs","toLowerCase","isSafari","vendor","userAgent","init$","fromEvent","delay","on","speed","style","pointerEvents","direction","y","previousY","scrollTop","stop","start","scrollTo","offset","currentTop","distance","getBoundingClientRect","top","pow","gsap","scroll-behavior","duration","Math","abs","ease","Quad","easeOut","overwrite","onUpdate","onComplete","scrollToSelector","ReplaySubject","LocomotiveScrollToDirective","initialFocus","_getContext","expression","outputFunction","makeFunction","scrollTo$","_getContext2","parentInstance","preventDefault","LocomotiveScrollDirective","ScrollDirective","scrollSpeed","parseFloat","wh","innerHeight","wh2","rect","currentY","getProperty","bottom","ModalOutletComponent","modalNode","modal_","removeChild","appendChild","compile","NumberPipe","Intl","NumberFormat","ShareDirective","share","open","encodeURI","encodeURIComponent","c","charCodeAt","facebookUrl","pinterestUrl","linkedInUrl","twitterUrl","whatsappUrl","mailToUrl","shareTitle","shareUrl","SlugPipe","SvgIconStructure","_Structure","name_","parentNode","_element$classList","element","createElementNS","w","width","h","height","setAttributeNS","rxcompId","replaceChild","Structure","SwiperDirective","slidesPerView","spaceBetween","centeredSlides","autoplay","keyboardControl","mousewheelControl","pagination","clickable","keyboard","enabled","onlyInViewport","init_","swiperInitOrUpdate_","removeListeners_","swiperDestroy_","onBeforePrint","slideToIndex","swiper","slideTo","hasPrev","activeIndex","slides","hasNext","slidePrev","slideNext","opacity","slideChange","addListeners_","callback","swiperDirectiveInit","Power2","setTimeout","scope","Swiper","_opening","destroy","matchMedia","matches","ThronService","thron$","THRONContentExperience","THRONPlayer","script","loaded$","shareReplay","head","ID","ThronComponent","args","concat","THRON","media","splitted","controls","hasAttribute","loop","player","muted","displayLinked","noSkin","onReady","onCanPlay","onPlaying","onPlay","onPause","video","mediaContainer","ready","canPlay","off","qualities","qualityLevels","highestQuality","currentQuality","playing","play","pause","complete","playVideo","pauseVideo","toggle","playing_","TitleDirective","title_","removeAttribute","factories","pipes","CommonModule","_Module","Module","imports","declarations","ControlComponent","control","ControlCheckboxComponent","_ControlComponent","label","KeyboardService","keydown$","keydown$_","keyup$","keyup$_","keys$","keys$_","type","startWith","key$","key$_","regexp","filter","typing$","typing$_","typing","clearTimeout","ControlCustomSelectComponent","dropdownId","word","scrollToWord","children","offsetTop","setOption","isMultiple","TypeError","_readOnlyError","change","hasOption","getLabel","v","onDropped","$event","touched","multiple","ControlEmailComponent","ControlFileComponent","file","onReaderComplete","onInputDidChange","files","lastModified","lastModifiedDate","size","reader","FileReader","readAsDataURL","content","result","ControlPasswordComponent","ControlSearchComponent","disabled","ControlTextComponent","ControlTextareaComponent","ErrorsComponent","TestComponent","onTest","onReset","reset","ControlsModule","FilterMode","FilterItem","change$","mode","placeholder","values","unshift","clear","FilterService","initialParams","filters","getParamsCount","locationParams","any","changes","filterItems","updateFilterStates","skipFilter","filteredItems","option","count","FormService","toSelectOptions","AmbienceService","all$","filters$","AmbienceComponent","ambienceId","FormGroup","ambience","FormControl","category","material","designer","changes$","setFilterByKeyAndValue","onLoad","combineLatest","filterService","materials","designers","patch","onSearch","model","clearFilter","stopImmediatePropagation","AteliersAndStoresService","ateliers$","stores$","AteliersAndStoresComponent","types","Atelier","Store","filteredAteliers","filteredStores","country","GtmService","dataLayer","push_","CareersService","submit$","CareersComponent","success","Validators","RequiredValidator","email","EmailValidator","telephone","city","domain","cv","message","privacy","checkRequest","antiforgery","checkField","onSubmit","valid","submitted","form_name","ContactsService","ContactsComponent","newsletter","flag","DealersService","sort","a","regions","DealersComponent","visibleItems","countries","min","showMore","DesignersService","DesignersComponent","MarketsAndLanguagesService","MarketsAndLanguagesModalComponent","setMarket","market","code","onClose","MaterialsModalComponent","onPrev","onNext","MaterialsService","MaterialsComponent","categories","selectedItem","onToggle","onOpenItem","active","marginBottom","setCategory","NewsService","NewsComponent","abstract","NewsletterService","NewsletterComponent","occupation","engagement","newsletterLanguage","breadcumbStyle","ProductsConfigureComponent","codprod","sl","isReady","isComplete","isConfiguring","iframe","onEvent","sfy","SFYFrame","token","getIframeDocument","contentWindow","contentDocument","eventName","emit","onShowefyComplete","onStartConfigurator","onButtonPressed","onSetButtonStatus","onGetIframeSize","onGetProductExtData","onGetFastProductExtData","statusTxt","addButtons","getProductExtData","addTexts","HTML","printHTML","buttons","BUTTONS","PROPERTIES","visibility","LABEL","it","en","setButtonStatus","addBreadcrumb","breadcrumb","BREADCUMB","printBreadcumb","cartItem","product","ProductsDetailService","versions$","ProductsDetailComponent","isAddedToCart","ProductsService","ProductsComponent","categoryId","ProjectsRegistrationModalComponent","ProjectsRegistrationService","ProjectsRegistrationComponent","dealer","fullName","client","architect","destination","products","picture","isModal","close","ProjectsService","ProjectsComponent","FilesService","hasFile","currentFiles","setFiles","files$_","files$","localFiles","addFile$","removeFile$","ReservedAreaService","toTitleCase","all_$","added","sentence","seps","wordPattern","str","ReservedAreaComponent","tree","visibleFiles","getTree","parentId","onOpen","onToggleFile","isAddedToFiles","StoreLocatorService","rank","StoreLocatorComponent","extendStatics","d","hasOwnProperty","__extends","__","__assign","t","s","OverlayViewSafe","type1","type2","property","extend","google","maps","OverlayView","toCssText","styles","acc","coercePixels","pixels","GOOGLE_MAPS","ClusterIcon","_super","cluster_","styles_","center_","div_","sums_","visible_","setMap","getMap","onAdd","cMouseDownInCluster","cDraggingMapByCluster","mc","getMarkerClusterer","_a","version","major","minor","gmVersion","show","getPanes","overlayMouseTarget","boundsChangedListener_","addListener","addDomListener","stopPropagation","getZoomOnClick","mz_1","getMaxZoom","theBounds_1","getBounds","fitBounds","getZoom","setZoom","cancelBubble","onRemove","hide","removeListener","clearInstanceListeners","draw","pos","getPosFromLatLng_","left","display","className","className_","cssText","createCss_","getImageElementHtml","getLabelDivHtml","getTitle","ariaLabelFn","position","anchorText_","color","textColor","font-size","textSize","font-family","fontFamily","font-weight","fontWeight","font-style","fontStyle","text-decoration","textDecoration","text-align","line-height","textLineHeight","bp","backgroundPosition","spriteH","spriteV","dimensions","getEnableRetinaIcons","clip","overrideDimensionsDynamicIcon","useStyle","sums","max","anchorText","anchorIcon_","anchorIcon","floor","getClusterClass","setCenter","center","z-index","getZIndex","cursor","-webkit-user-select","-khtml-user-select","-moz-user-select","-o-user-select","user-select","latlng","getProjection","fromLatLngToDivPixel","Cluster","markerClusterer_","map_","minClusterSize_","getMinimumClusterSize","averageCenter_","getAverageCenter","markers_","bounds_","clusterIcon_","getStyles","getSize","getMarkers","getCenter","bounds","LatLngBounds","markers","getPosition","addMarker","marker","isMarkerAlreadyAdded_","l","lat","lng","LatLng","calculateBounds_","isAdded","mCount","mz","isMarkerInClusterBounds","getExtendedBounds","updateIcon","numStyles","getCalculator","getOption","prop","def","MarkerClusterer","clusters_","listeners_","activeMap_","ready_","zIndex_","zIndex","Number","Marker","MAX_ZINDEX","gridSize_","gridSize","minimumClusterSize","maxZoom_","maxZoom","zoomOnClick_","ignoreHidden_","enableRetinaIcons_","imagePath_","imagePath","IMAGE_PATH","imageExtension_","imageExtension","IMAGE_EXTENSION","imageSizes_","imageSizes","IMAGE_SIZES","calculator_","calculator","CALCULATOR","batchSize_","batchSize","BATCH_SIZE","batchSizeIE_","batchSizeIE","BATCH_SIZE_IE","clusterClass_","clusterClass","setupStyles_","addMarkers","repaint","prevZoom_","minZoom","mapTypes","getMapTypeId","zoom","resetViewport_","redraw_","withDefaultStyle","fitMapToMarkers","padding","getVisible","getIgnoreHidden","getGridSize","setGridSize","setMinimumClusterSize","setMaxZoom","setZIndex","setStyles","setTitle","setZoomOnClick","zoomOnClick","setAverageCenter","averageCenter","setIgnoreHidden","ignoreHidden","setEnableRetinaIcons","enableRetinaIcons","getImageExtension","setImageExtension","getImagePath","setImagePath","getImageSizes","setImageSizes","setCalculator","getBatchSizeIE","setBatchSizeIE","setClusterClass","getTotalMarkers","getClusters","getTotalClusters","nodraw","pushMarkerTo_","getDraggable","removeMarker","removed","removeMarker_","removeMarkers","r","clearMarkers","oldClusters","projection","tr","getNorthEast","bl","getSouthWest","trPix","blPix","ne","fromDivPixelToLatLng","sw","createClusters_","distanceBetweenPoints_","p1","p2","dLat","PI","dLon","sin","cos","atan2","sqrt","isMarkerInBounds_","addToClosestCluster_","clusterToAddTo","cluster","iFirst","mapBounds","timerRefStatic","iLast","dv","overrides","MAP_STYLE","featureType","elementType","stylers","saturation","lightness","MapComponent","initMap","onGoogleMapsLoaded","getElementsByTagName","documentElement","mapOptions","latitude","longitude","scrollwheel","zoomControlOptions","ZoomControlStyle","DEFAULT","scaleControl","zoomControl","mapTypeControl","streetViewControl","rotateControl","fullscreenControl","mapElement","Map","getItalyBounds","calculateDistance","lat1","lon1","lat2","lon2","unit","radlat1","radlat2","theta","radtheta","dist","acos","markerCluster","address","phone","fax","markerImage","MarkerImage","Size","icon","setMarkerWindow","sizes","getGeolocation","busyLocation","geolocation","getCurrentPosition","coords","geocoder","Geocoder","geocode","results","filteredInfoCity","address_component","includes","formatted_address","address_components","searchCountry","short_name","setInfoWindow","searchPosition","finally","ZOOM_LEVEL","findNearStores","visible","cod_stato","userCountry","MAX_DISTANCE","importante","visibleStores","$timeout","panTo","markerWindow","InfoWindow","pixelOffset","setPosition","setContent","closeMarkerWindow","getWorldBounds","SwiperGalleryDirective","_SwiperDirective","loopAdditionalSlides","SwiperHomepageDirective","SwiperNewsPropositionDirective","breakpoints","768","1024","1440","1920","SwiperProductsPropositionDirective","SwiperProjectsPropositionDirective","CartMiniComponent","onIncrement","onDecrement","onEdit","onBuy","onRemoveAll","price","FilesComponent","showFiles","onToggleFiles","onDownloadAll","link","click","MenuService","setMenu","menu$_","toggleMenu","currentMenu","menu$","HeaderComponent","menu","cart","pictogram","scrolled","direction_","scrolled_","MenuDirective","preview","previewSrc","container","onLeave","menu_","onEnter","onExit","NewsletterPropositionComponent","onNewsletter","action","SearchService","search$_","items_","search$","SearchComponent","auditTime","SubmenuDirective","querySelectorAll","onload","Power4","TreeComponent","hasItems","UserForgotComponent","forgot","onSignIn","viewSignIn","onSignUp","viewSignUp","UserComponent","views","setView","onViewForgot","onViewSignIn","onViewSignUp","navTo","onForgot","UserModalComponent","_UserComponent","UserSigninComponent","password","signIn","viewForgot","RequiredIfValidator","fieldName","formGroup","FormValidator","field","requiredIf","UserSignupComponent","company","passwordConfirm","signUp","SharedModule","AppModule","CoreModule","FormModule","bootstrap","Browser"],"mappings":"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","file":"docs\\js\\main.min.js","sourcesContent":[null,"import { from, Subject } from 'rxjs';\r\nimport { map, switchMap, tap } from 'rxjs/operators';\r\n\r\nexport class ModalEvent {\r\n\r\n\tconstructor(data) {\r\n\t\tthis.data = data;\r\n\t}\r\n\r\n}\r\n\r\nexport class ModalResolveEvent extends ModalEvent { }\r\nexport class ModalRejectEvent extends ModalEvent { }\r\n\r\nexport class ModalService {\r\n\r\n\tstatic hasModal = false;\r\n\r\n\tstatic open$(modal) {\r\n\t\treturn this.getTemplate$(modal.src).pipe(\r\n\t\t\tmap(template => {\r\n\t\t\t\treturn { node: this.getNode(template), data: modal.data, modal: modal };\r\n\t\t\t}),\r\n\t\t\ttap(node => {\r\n\t\t\t\tthis.modal$.next(node);\r\n\t\t\t\tthis.hasModal = true;\r\n\t\t\t}),\r\n\t\t\tswitchMap(node => this.events$),\r\n\t\t\ttap(_ => this.hasModal = false)\r\n\t\t)\r\n\t}\r\n\r\n\tstatic load$(modal) {\r\n\r\n\t}\r\n\r\n\tstatic getTemplate$(url) {\r\n\t\treturn from(fetch(url).then(response => {\r\n\t\t\treturn response.text();\r\n\t\t}));\r\n\t}\r\n\r\n\tstatic getNode(template) {\r\n\t\tconst div = document.createElement('div');\r\n\t\tdiv.innerHTML = template;\r\n\t\tconst node = div.firstElementChild;\r\n\t\treturn node;\r\n\t}\r\n\r\n\tstatic reject(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalRejectEvent(data));\r\n\t}\r\n\r\n\tstatic resolve(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalResolveEvent(data));\r\n\t}\r\n\r\n}\r\n\r\nModalService.modal$ = new Subject();\r\nModalService.events$ = new Subject();\r\n","\r\nexport class Utils {\r\n\r\n\tstatic merge(target, source) {\r\n\t\tif (typeof source === 'object') {\r\n\t\t\tObject.keys(source).forEach(key => {\r\n\t\t\t\tconst value = source[key];\r\n\t\t\t\tif (typeof value === 'object' && !Array.isArray(value)) {\r\n\t\t\t\t\ttarget[key] = this.merge(target[key], value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttarget[key] = value;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn target;\r\n\t}\r\n\r\n}\r\n","import { Utils } from './common/utils/utils';\r\nimport { environmentServed } from './environment.served';\r\nimport { environmentStatic } from './environment.static';\r\n\r\nexport const NODE = (typeof module !== 'undefined' && module.exports);\r\nexport const PARAMS = NODE ? { get: () => { } } : new URLSearchParams(window.location.search);\r\nexport const DEBUG = false || (PARAMS.get('debug') != null);\r\nexport const BASE_HREF = NODE ? null : document.querySelector('base').getAttribute('href');\r\nexport const HEROKU = NODE ? false : (window && window.location.host.indexOf('herokuapp') !== -1);\r\nexport const STATIC = NODE ? false : (HEROKU || (window && (window.location.port === '48481' || window.location.port === '5000' || window.location.port === '6443' || window.location.host === 'actarian.github.io')));\r\nexport const DEVELOPMENT = NODE ? false : (window && ['localhost', '127.0.0.1', '0.0.0.0'].indexOf(window.location.host.split(':')[0]) !== -1);\r\nexport const PRODUCTION = !DEVELOPMENT;\r\nexport const ENV = {\r\n\tSTATIC,\r\n\tDEVELOPMENT,\r\n\tPRODUCTION\r\n};\r\n\r\nexport class Environment {\r\n\r\n\tget STATIC() {\r\n\t\treturn ENV.STATIC;\r\n\t}\r\n\tset STATIC(STATIC) {\r\n\t\tENV.STATIC = (STATIC === true || STATIC === 'true');\r\n\t\tconsole.log('Environment.STATIC.set', ENV.STATIC);\r\n\t}\r\n\r\n\tget href() {\r\n\t\tif (HEROKU) {\r\n\t\t\treturn this.githubDocs;\r\n\t\t} else {\r\n\t\t\treturn BASE_HREF;\r\n\t\t}\r\n\t}\r\n\r\n\tgetAbsoluteUrl(path, params) {\r\n\t\tlet url = `${window.location.origin}${path}`;\r\n\t\t// let url = `${window.location.protocol}//${window.location.host}${path}`;\r\n\t\tObject.keys(params).forEach(key => {\r\n\t\t\turl = url.replace(`$${key}`, params[key]);\r\n\t\t});\r\n\t\treturn url;\r\n\t}\r\n\r\n\tgetPath(path) {\r\n\t\treturn this.isLocal(path) ? (this.href + path) : path;\r\n\t}\r\n\r\n\tisLocal(path) {\r\n\t\treturn path.indexOf('://') === -1;\r\n\t}\r\n\r\n\tconstructor(options) {\r\n\t\tif (options) {\r\n\t\t\tObject.assign(this, options);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst defaultOptions = {\r\n\tport: 5000,\r\n\tflags: {\r\n\t\tproduction: false,\r\n\t\theroku: HEROKU,\r\n\t},\r\n\tslug: {},\r\n\tmarkets: ['IT', 'EU', 'AM', 'AS', 'IN'],\r\n\tdefaultMarket: 'IT',\r\n\tcurrentMarket: 'IT',\r\n\tlanguages: ['it', 'en'],\r\n\tdefaultLanguage: 'it',\r\n\tcurrentLanguage: 'it',\r\n\tlabels: {\r\n\t\tselect: 'Seleziona',\r\n\t\tbrowse: 'Sfoglia',\r\n\t\tcancel: 'Annulla',\r\n\t\terror_email: 'Email non valida',\r\n\t\terror_match: 'I campi non corrispondono',\r\n\t\terror_required: 'Campo obbligatorio',\r\n\t\tloading: 'caricamento',\r\n\t\tremove: 'Rimuovi',\r\n\t\trequired: 'Richiesto',\r\n\t\tselect_file: 'Seleziona una file...',\r\n\t\tupdate: 'Aggiorna',\r\n\t\tupload: 'Carica',\r\n\t\tdrag_and_drop_images: 'Drag And Drop your images here',\r\n\t}\r\n};\r\n\r\nconst environmentOptions = window.STATIC ? environmentStatic : environmentServed;\r\n\r\nlet options = Object.assign(defaultOptions, environmentOptions);\r\noptions = Utils.merge(options, window.environment);\r\n\r\nexport const environment = new Environment(options);\r\n\r\nconsole.log('environment', environment);\r\n","\r\nexport const environmentStatic = {\r\n\tflags: {\r\n\t\tproduction: false,\r\n\t},\r\n\tmarkets: ['IT', 'EU', 'AM', 'AS', 'IN'],\r\n\tdefaultMarket: 'IT',\r\n\tcurrentMarket: 'IT',\r\n\tlanguages: ['it', 'en', 'de', 'ch'],\r\n\tdefaultLanguage: 'it',\r\n\tcurrentLanguage: 'it',\r\n\tapi: '/giorgetti/api',\r\n\tassets: '/giorgetti/',\r\n\tslug: {\r\n\t\tconfigureProduct: `/giorgetti/products-configure.html`,\r\n\t\treservedArea: `/giorgetti/reserved-area.html`,\r\n\t},\r\n\ttemplate: {\r\n\t\tmodal: {\r\n\t\t\tuserModal: '/giorgetti/user-modal.html',\r\n\t\t\tprojectsRegistrationModal: '/giorgetti/projects-registration-modal.html',\r\n\t\t\tmaterialsModal: '/giorgetti/materials-modal.html',\r\n\t\t\tmarketsAndLanguagesModal: '/giorgetti/markets-and-languages-modal.html',\r\n\t\t}\r\n\t},\r\n\tgoogleMaps: {\r\n\t\tapiKey: 'AIzaSyAIsa4g8z-HPPwohsf8jzVTbKw-DiI8k5w',\r\n\t},\r\n\tthron: {\r\n\t\tclientId: '',\r\n\t},\r\n\tworkers: {\r\n\t\timage: './js/workers/image.service.worker.js',\r\n\t\tprefetch: './js/workers/prefetch.service.worker.js',\r\n\t},\r\n\tgithubDocs: 'https://raw.githubusercontent.com/actarian/giorgetti/main/docs/',\r\n};\r\n","\r\nexport const environmentServed = {\r\n\tflags: {\r\n\t\tproduction: true,\r\n\t},\r\n\tmarkets: ['IT', 'EU', 'AM', 'AS', 'IN'],\r\n\tdefaultMarket: 'IT',\r\n\tcurrentMarket: 'IT',\r\n\tlanguages: ['it', 'en', 'de', 'ch'],\r\n\tdefaultLanguage: 'it',\r\n\tcurrentLanguage: 'it',\r\n\tapi: '/api',\r\n\tassets: '/Client/docs/',\r\n\tslug: {\r\n\t\tconfigureProduct: `/it/it/products-configure`,\r\n\t\treservedArea: `/it/it/reserved-area`,\r\n\t},\r\n\ttemplate: {\r\n\t\tmodal: {\r\n\t\t\tuserModal: '/template/modals/user-modal.cshtml',\r\n\t\t\tprojectsRegistrationModal: '/template/modals/projects-registration-modal.cshtml',\r\n\t\t\tmaterialsModal: '/template/modals/materials-modal.cshtml',\r\n\t\t\tmarketsAndLanguagesModal: '/template/modals/markets-and-languages-modal.cshtml',\r\n\t\t}\r\n\t},\r\n\tgoogleMaps: {\r\n\t\tapiKey: 'AIzaSyDvGw6iAoKdRv8mmaC9GeT-LWLPQtA8p60',\r\n\t},\r\n\tthron: {\r\n\t\tclientId: '',\r\n\t},\r\n\tworkers: {\r\n\t\timage: '/Client/docs/js/workers/image.service.worker.js',\r\n\t\tprefetch: '/Client/docs/js/workers/prefetch.service.worker.js',\r\n\t},\r\n\tgithubDocs: 'https://raw.githubusercontent.com/actarian/giorgetti/main/docs/',\r\n};\r\n","export class LocalStorageService {\r\n\r\n\tstatic delete(name) {\r\n\t\tif (this.isLocalStorageSupported()) {\r\n\t\t\twindow.localStorage.removeItem(name);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic exist(name) {\r\n\t\tif (this.isLocalStorageSupported()) {\r\n\t\t\treturn window.localStorage[name] !== undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic get(name) {\r\n\t\tlet value = null;\r\n\t\tif (this.isLocalStorageSupported() && window.localStorage[name] !== undefined) {\r\n\t\t\ttry {\r\n\t\t\t\tvalue = JSON.parse(window.localStorage[name]);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('LocalStorageService.get.error parsing', name, e);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tstatic set(name, value) {\r\n\t\tif (this.isLocalStorageSupported()) {\r\n\t\t\ttry {\r\n\t\t\t\tconst cache = [];\r\n\t\t\t\tconst json = JSON.stringify(value, function(key, value) {\r\n\t\t\t\t\tif (typeof value === 'object' && value !== null) {\r\n\t\t\t\t\t\tif (cache.indexOf(value) !== -1) {\r\n\t\t\t\t\t\t\t// Circular reference found, discard key\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcache.push(value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t});\r\n\t\t\t\twindow.localStorage.setItem(name, json);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('LocalStorageService.set.error serializing', name, value, e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic isLocalStorageSupported() {\r\n\t\tif (this.supported) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tlet supported = false;\r\n\t\ttry {\r\n\t\t\tsupported = 'localStorage' in window && window.localStorage !== null;\r\n\t\t\tif (supported) {\r\n\t\t\t\twindow.localStorage.setItem('test', '1');\r\n\t\t\t\twindow.localStorage.removeItem('test');\r\n\t\t\t} else {\r\n\t\t\t\tsupported = false;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tsupported = false;\r\n\t\t}\r\n\t\tthis.supported = supported;\r\n\t\treturn supported;\r\n\t}\r\n}\r\n","import { BehaviorSubject } from 'rxjs';\r\n\r\nexport class HeaderService {\r\n\r\n\tstatic header$_ = new BehaviorSubject(-1);\r\n\r\n\tstatic get currentHeader() {\r\n\t\treturn this.header$_.getValue();\r\n\t}\r\n\r\n\tstatic setHeader(id) {\r\n\t\tthis.header$_.next(id);\r\n\t}\r\n\r\n\tstatic toggleHeader(id) {\r\n\t\tthis.header$_.next(this.currentHeader === id ? -1 : id);\r\n\t}\r\n\r\n\tstatic onBack() {\r\n\t\tthis.header$_.next(-1);\r\n\t}\r\n\r\n\tstatic header$() {\r\n\t\treturn this.header$_;\r\n\t}\r\n\r\n}\r\n","import { BehaviorSubject, of } from 'rxjs';\r\nimport { map, switchMap } from 'rxjs/operators';\r\nimport { LocalStorageService } from '../../common/storage/local-storage.service';\r\nimport { HeaderService } from '../header/header.service';\r\n\r\nexport class CartService {\r\n\r\n\tstatic items$_ = new BehaviorSubject([]);\r\n\r\n\tstatic get currentItems() {\r\n\t\treturn CartService.items$_.getValue();\r\n\t}\r\n\r\n\tstatic get count() {\r\n\t\treturn CartService.currentItems.length;\r\n\t}\r\n\r\n\tstatic hasItem(item) {\r\n\t\tconst items = CartService.currentItems;\r\n\t\tconst index = CartService.indexOf(item, items);\r\n\t\treturn index !== -1;\r\n\t}\r\n\r\n\tstatic setItems(items) {\r\n\t\tif (items) {\r\n\t\t\tLocalStorageService.set('cartItems', items);\r\n\t\t} else {\r\n\t\t\tLocalStorageService.delete('cartItems');\r\n\t\t}\r\n\t\tCartService.items$_.next(items);\r\n\t}\r\n\r\n\tstatic items$() {\r\n\t\tconst localItems = LocalStorageService.get('cartItems') || [];\r\n\t\treturn of(localItems).pipe(\r\n\t\t\tswitchMap(items => {\r\n\t\t\t\tCartService.setItems(items);\r\n\t\t\t\treturn CartService.items$_;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic incrementItem$(item) {\r\n\t\treturn of(item).pipe(\r\n\t\t\tmap(item => {\r\n\t\t\t\tconst items = CartService.currentItems.slice();\r\n\t\t\t\tconst item_ = CartService.find(item, items);\r\n\t\t\t\tif (item_) {\r\n\t\t\t\t\titem_.qty++;\r\n\t\t\t\t\tCartService.setItems(items);\r\n\t\t\t\t\treturn item_;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic decrementItem$(item) {\r\n\t\treturn of(item).pipe(\r\n\t\t\tswitchMap(item => {\r\n\t\t\t\tconst items = CartService.currentItems.slice();\r\n\t\t\t\tconst item_ = CartService.find(item, items);\r\n\t\t\t\tif (item_) {\r\n\t\t\t\t\titem_.qty--;\r\n\t\t\t\t\tif (item_.qty > 0) {\r\n\t\t\t\t\t\tCartService.setItems(items);\r\n\t\t\t\t\t\treturn of(item_);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn CartService.removeItem$(item);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn of(null);\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic addItem$(item) {\r\n\t\treturn of(Object.assign({ qty: 1 }, item)).pipe(\r\n\t\t\tmap(item => {\r\n\t\t\t\tconst items = CartService.currentItems.slice();\r\n\t\t\t\tconst item_ = CartService.find(item, items);\r\n\t\t\t\tif (item_) {\r\n\t\t\t\t\titem_.qty += item.qty;\r\n\t\t\t\t\tCartService.setItems(items);\r\n\t\t\t\t\treturn item_;\r\n\t\t\t\t} else {\r\n\t\t\t\t\titems.push(item);\r\n\t\t\t\t\tCartService.setItems(items);\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic removeItem$(item) {\r\n\t\treturn of(item).pipe(\r\n\t\t\tmap(item => {\r\n\t\t\t\tconst items = CartService.currentItems.slice();\r\n\t\t\t\tconst index = CartService.indexOf(item, items);\r\n\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\titems.splice(index, 1);\r\n\t\t\t\t\tif (items.length === 0) {\r\n\t\t\t\t\t\tHeaderService.onBack();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tCartService.setItems(items);\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic removeAll$() {\r\n\t\treturn of([]).pipe(\r\n\t\t\tmap(items => {\r\n\t\t\t\tHeaderService.onBack();\r\n\t\t\t\tCartService.setItems(items);\r\n\t\t\t\treturn items;\r\n\t\t\t}),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic match(item, item_) {\r\n\t\treturn item_.id === item.id && ((!item_.showefy && !item.showefy) || (item_.showefy && item.showefy && item_.showefy.product_link === item.showefy.product_link));\r\n\t}\r\n\r\n\tstatic find(item, items) {\r\n\t\treturn items.find(item_ => CartService.match(item, item_));\r\n\t}\r\n\r\n\tstatic indexOf(item, items) {\r\n\t\treturn items.reduce((p, item_, i) => {\r\n\t\t\treturn p !== -1 ? p : (CartService.match(item, item_) ? i : p);\r\n\t\t}, -1);\r\n\t}\r\n\r\n}\r\n","import { from, throwError } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\n\r\nexport class HttpResponse {\r\n\r\n\tget static() {\r\n\t\treturn this.url.indexOf('.json') === this.url.length - 5;\r\n\t}\r\n\r\n\tconstructor(response) {\r\n\t\tthis.data = null;\r\n\t\tif (response) {\r\n\t\t\tthis.url = response.url;\r\n\t\t\tthis.status = response.status;\r\n\t\t\tthis.statusText = response.statusText;\r\n\t\t\tthis.ok = response.ok;\r\n\t\t\tthis.redirected = response.redirected;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class HttpService {\r\n\r\n\tstatic http$(method, url, data, format = 'json', userPass = null) {\r\n\t\tconst methods = ['POST', 'PUT', 'PATCH'];\r\n\t\tlet response_ = null;\r\n\t\t// url = this.getUrl(url, format);\r\n\t\tconst options = {\r\n\t\t\tmethod: method,\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: methods.indexOf(method) !== -1 ? JSON.stringify(data) : undefined\r\n\t\t}\r\n\t\tif (userPass) {\r\n\t\t\t// options.mode = 'no-cors';\r\n\t\t\toptions.credentials = 'include';\r\n\t\t\tuserPass = window.btoa(userPass);\r\n\t\t\toptions.headers['Authorization'] = `Basic ${userPass}`;\r\n\t\t}\r\n\t\toptions.headers = new Headers(options.headers);\r\n\t\treturn from(fetch(url, options).then((response) => {\r\n\t\t\tresponse_ = response;\r\n\t\t\t// console.log(response);\r\n\t\t\ttry {\r\n\t\t\t\tconst contentType = response.headers.get('content-type');\r\n\t\t\t\tlet typedResponse;\r\n\t\t\t\tif (contentType && contentType.indexOf('application/json') !== -1) {\r\n\t\t\t\t\ttypedResponse = response.json();\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttypedResponse = response.text();\r\n\t\t\t\t}\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\treturn typedResponse;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn typedResponse.then(data => {\r\n\t\t\t\t\t\treturn Promise.reject(data);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\tconsole.warn('HttpService.http$', 'Cannot parse response');\r\n\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.reject(error);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})).pipe(\r\n\t\t\tcatchError(error => {\r\n\t\t\t\treturn throwError(this.getError(error, response_));\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\t/*\r\n\t// !!! todo mapping response.data\r\n\tstatic http$(method, url, data, format = 'json') {\r\n\t\tconst methods = ['POST', 'PUT', 'PATCH'];\r\n\t\tconst body = (data && methods.indexOf(method) !== -1) ? JSON.stringify(data) : undefined;\r\n\t\tconst queryString = (data && methods.indexOf(method) !== -1) ? Object.keys(data).map(function(key) {\r\n\t\t\treturn key + '=' + encodeURI(data[key]);\r\n\t\t}).join('&') : undefined;\r\n\t\tif (queryString) {\r\n\t\t\turl = `${url}?${queryString}`;\r\n\t\t}\r\n\t\tlet response_ = null;\r\n\t\treturn from(fetch(url, {\r\n\t\t\tmethod: method,\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: body,\r\n\t\t}).then((response) => {\r\n\t\t\tresponse_ = new HttpResponse(response);\r\n\t\t\ttry {\r\n\t\t\t\tconst contentType = response.headers.get('content-type');\r\n\t\t\t\tlet typedResponse;\r\n\t\t\t\tif (contentType && format === 'json' && contentType.indexOf('application/json') !== -1) {\r\n\t\t\t\t\ttypedResponse = response.json();\r\n\t\t\t\t} else if (format === 'blob') {\r\n\t\t\t\t\ttypedResponse = response.blob();\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttypedResponse = response.text();\r\n\t\t\t\t}\r\n\t\t\t\treturn typedResponse.then(data => {\r\n\t\t\t\t\tresponse_.data = data;\r\n\t\t\t\t\tif (response.ok) {\r\n\t\t\t\t\t\treturn Promise.resolve(response_);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn Promise.reject(response_);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} catch(error) {\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\tconsole.warn('HttpService.http$', 'Cannot parse response');\r\n\t\t\t\t\treturn Promise.resolve(response_);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.reject(this.getError(error, response_));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})).pipe(\r\n\t\t\tcatchError(error => {\r\n\t\t\t\treturn throwError(this.getError(error, response_));\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\t*/\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\tconst query = this.query(data);\r\n\t\treturn this.http$('GET', `${url}${query}`, undefined, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn this.http$('DELETE', url);\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn this.http$('POST', url, data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn this.http$('PUT', url, data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn this.http$('PATCH', url, data);\r\n\t}\r\n\r\n\tstatic query(data) {\r\n\t\treturn ''; // todo\r\n\t}\r\n\r\n\tstatic getError(object, response) {\r\n\t\tlet error = typeof object === 'object' ? object : {};\r\n\t\tif (!error.status) {\r\n\t\t\terror.status = response ? response.status : 0;\r\n\t\t}\r\n\t\tif (!error.statusCode) {\r\n\t\t\terror.statusCode = response ? response.status : 0;\r\n\t\t}\r\n\t\tif (!error.statusMessage) {\r\n\t\t\terror.statusMessage = response ? response.statusText : object;\r\n\t\t}\r\n\t\t// console.log('HttpService.getError', error, object);\r\n\t\treturn error;\r\n\t}\r\n\r\n}\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\nimport { Utils } from '../utils/utils';\r\n\r\nexport class LabelPipe extends Pipe {\r\n\r\n\tstatic transform(key) {\r\n\t\tconst labels = LabelPipe.labels_;\r\n\t\treturn labels[key] || key; // `#${key}#`;\r\n\t}\r\n\r\n\tstatic getKeys(...keys) {\r\n\t\treturn LabelPipe.transform(keys.map(x => x.replace('-', '_')).join('_'));\r\n\t}\r\n\r\n\tstatic setLabels() {\r\n\t\tconst LABELS = Utils.merge({\r\n\t\t\tselect: 'Seleziona',\r\n\t\t\tbrowse: 'Sfoglia',\r\n\t\t\tcancel: 'Annulla',\r\n\t\t\terror_email: 'Email non valida',\r\n\t\t\terror_match: 'I campi non corrispondono',\r\n\t\t\terror_required: 'Campo obbligatorio',\r\n\t\t\tloading: 'caricamento',\r\n\t\t\tremove: 'Rimuovi',\r\n\t\t\trequired: 'Richiesto',\r\n\t\t\tselect_file: 'Seleziona una file...',\r\n\t\t\tupdate: 'Aggiorna',\r\n\t\t\tupload: 'Carica',\r\n\t\t\tdrag_and_drop_images: 'Drag And Drop your images here',\r\n\t\t}, environment.labels);\r\n\t\tthis.labels_ = LABELS;\r\n\t}\r\n}\r\n\r\nLabelPipe.setLabels();\r\n\r\nLabelPipe.meta = {\r\n\tname: 'label',\r\n};\r\n","export class LocationService {\r\n\r\n\tstatic has(key) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\t// console.log('LocationService.has', params);\r\n\t\treturn params.has(key);\r\n\t}\r\n\r\n\tstatic get(key) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\t// console.log('LocationService.get', params);\r\n\t\treturn params.get(key);\r\n\t}\r\n\r\n\tstatic set(keyOrValue, value) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams.set(keyOrValue, value);\r\n\t\t} else {\r\n\t\t\tparams.set(keyOrValue, '');\r\n\t\t}\r\n\t\tthis.pushParams(params);\r\n\t\t// console.log('LocationService.set', params, keyOrValue, value);\r\n\t}\r\n\r\n\tstatic pushParams(params) {\r\n\t\tif (window.history && window.history.pushState) {\r\n\t\t\tconst title = document.title;\r\n\t\t\tconst url = `${window.location.href.split('?')[0]}?${params.toString()}`;\r\n\t\t\twindow.history.pushState(params.toString(), title, url);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic replace(from, to) {\r\n\t\tconst history = window.history;\r\n\t\tif (history && history.replaceState) {\r\n\t\t\tconst location = window.location;\r\n\t\t\tconst title = document.title;\r\n\t\t\tif (location.pathname === '/') {\r\n\t\t\t\tconst url = location.origin + to + location.search;\r\n\t\t\t\thistory.replaceState(history.state, title, url);\r\n\t\t\t} else if (location.href.indexOf(from) !== -1) {\r\n\t\t\t\tconst url = location.href.replace(from, to);\r\n\t\t\t\thistory.replaceState(history.state, title, url);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic deserialize(key) {\r\n\t\tconst encoded = this.get('params');\r\n\t\treturn this.decode(key, encoded);\r\n\t}\r\n\r\n\tstatic serialize(keyOrValue, value) {\r\n\t\tconst params = this.deserialize();\r\n\t\tconst encoded = this.encode(keyOrValue, value, params);\r\n\t\tthis.set('params', encoded);\r\n\t}\r\n\r\n\tstatic decode(key, encoded) {\r\n\t\tlet decoded = null;\r\n\t\tif (encoded) {\r\n\t\t\tconst json = window.atob(encoded);\r\n\t\t\tdecoded = JSON.parse(json);\r\n\t\t}\r\n\t\tif (key && decoded) {\r\n\t\t\tdecoded = decoded[key];\r\n\t\t}\r\n\t\treturn decoded || null;\r\n\t}\r\n\r\n\tstatic encode(keyOrValue, value, params) {\r\n\t\tparams = params || {};\r\n\t\tlet encoded = null;\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams[keyOrValue] = value;\r\n\t\t} else {\r\n\t\t\tparams = keyOrValue;\r\n\t\t}\r\n\t\tconst json = JSON.stringify(params);\r\n\t\tencoded = window.btoa(json);\r\n\t\treturn encoded;\r\n\t}\r\n\r\n}\r\n","import { from } from 'rxjs';\r\nimport { tap } from 'rxjs/operators';\r\nimport { environment } from '../../environment';\r\nimport { LabelPipe } from '../label/label.pipe';\r\nimport { LocationService } from '../location/location.service';\r\nimport { Utils } from '../utils/utils';\r\n\r\nexport class LanguageService {\r\n\r\n\tstatic languages = this.getDefaultLanguages();\r\n\tstatic defaultLanguage = this.getDefaultLanguage();\r\n\tstatic selectedLanguage = this.defaultLanguage;\r\n\r\n\tstatic get hasLanguages() {\r\n\t\treturn this.languages.length > 1;\r\n\t}\r\n\r\n\tstatic get activeLanguage() {\r\n\t\treturn this.languages.find(language => language.lang === this.selectedLanguage);\r\n\t}\r\n\r\n\tstatic getDefaultLanguages() {\r\n\t\treturn environment.alternates || [];\r\n\t}\r\n\r\n\tstatic getDefaultLanguage() {\r\n\t\treturn environment.defaultLanguage || (this.languages ? this.languages[0].lang : null);\r\n\t}\r\n\r\n\tstatic setLanguage(language) {\r\n\t\tthis.selectedLanguage = language.lang;\r\n\t}\r\n\r\n\tstatic setLanguage$(language) {\r\n\t\treturn from(fetch(language.href).then(response => {\r\n\t\t\treturn response.text();\r\n\t\t})).pipe(\r\n\t\t\ttap(html => {\r\n\t\t\t\t// console.log('html', html);\r\n\t\t\t\tconst labelsMatch = /(window\\.labels\\s*=\\s*\\n*\\s*\\{((\\{.+?\\})|.)+?\\})/gms.exec(html);\r\n\t\t\t\tif (labelsMatch) {\r\n\t\t\t\t\t// console.log('labels', labelsMatch[0]);\r\n\t\t\t\t\tnew Function(labelsMatch[0]).call(window);\r\n\t\t\t\t\tLabelPipe.setLabels();\r\n\t\t\t\t}\r\n\t\t\t\tconst bhereMatch = /(window\\.bhere\\s*=\\s*\\n*\\s*\\{((\\{.+?\\})|.)+?\\})/gms.exec(html);\r\n\t\t\t\tif (bhereMatch) {\r\n\t\t\t\t\t// console.log('bhere', bhereMatch[0]);\r\n\t\t\t\t\tconst data = {};\r\n\t\t\t\t\tnew Function(bhereMatch[0].replace('window', 'this')).call(data);\r\n\t\t\t\t\tif (data.bhere) {\r\n\t\t\t\t\t\tUtils.merge(environment, data.bhere);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tLocationService.replace(this.activeLanguage.href, language.href);\r\n\t\t\t\t// console.log(window.labels);\r\n\t\t\t\tthis.selectedLanguage = language.lang;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic toggleLanguages() {\r\n\t\tthis.showLanguages = !this.showLanguages;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n}\r\n","import { environment } from '../../environment';\r\nimport { HttpService } from '../http/http.service';\r\nimport { LanguageService } from '../language/language.service';\r\n\r\nexport class ApiService extends HttpService {\r\n\r\n\tstatic currentLanguage = LanguageService.activeLanguage;\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\treturn super.get$(`${environment.api}${url}`, data, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn super.delete$(`${environment.api}${url}`);\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn super.post$(`${environment.api}${url}`, data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn super.put$(`${environment.api}${url}`, data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn super.patch$(`${environment.api}${url}`, data);\r\n\t}\r\n}\r\n","export class SessionStorageService {\r\n\r\n\tstatic delete(name) {\r\n\t\tif (this.isSessionStorageSupported()) {\r\n\t\t\twindow.sessionStorage.removeItem(name);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic exist(name) {\r\n\t\tif (this.isSessionStorageSupported()) {\r\n\t\t\treturn window.sessionStorage[name] !== undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic get(name) {\r\n\t\tlet value = null;\r\n\t\tif (this.isSessionStorageSupported() && window.sessionStorage[name] !== undefined) {\r\n\t\t\ttry {\r\n\t\t\t\tvalue = JSON.parse(window.sessionStorage[name]);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('SessionStorageService.get.error parsing', name, e);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tstatic set(name, value) {\r\n\t\tif (this.isSessionStorageSupported()) {\r\n\t\t\ttry {\r\n\t\t\t\tconst cache = [];\r\n\t\t\t\tconst json = JSON.stringify(value, function(key, value) {\r\n\t\t\t\t\tif (typeof value === 'object' && value !== null) {\r\n\t\t\t\t\t\tif (cache.indexOf(value) !== -1) {\r\n\t\t\t\t\t\t\t// Circular reference found, discard key\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcache.push(value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t});\r\n\t\t\t\twindow.sessionStorage.setItem(name, json);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('SessionStorageService.set.error serializing', name, value, e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic isSessionStorageSupported() {\r\n\t\tif (this.supported) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tlet supported = false;\r\n\t\ttry {\r\n\t\t\tsupported = 'sessionStorage' in window && window.sessionStorage !== null;\r\n\t\t\tif (supported) {\r\n\t\t\t\twindow.sessionStorage.setItem('test', '1');\r\n\t\t\t\twindow.sessionStorage.removeItem('test');\r\n\t\t\t} else {\r\n\t\t\t\tsupported = false;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tsupported = false;\r\n\t\t}\r\n\t\tthis.supported = supported;\r\n\t\treturn supported;\r\n\t}\r\n}\r\n","import { BehaviorSubject, of } from 'rxjs';\r\nimport { catchError, map, switchMap, tap } from 'rxjs/operators';\r\nimport { ApiService } from '../../common/api/api.service';\r\nimport { SessionStorageService } from '../../common/storage/session-storage.service';\r\n\r\nexport const UserViews = {\r\n\tSIGN_IN: 1,\r\n\tSIGN_UP: 2,\r\n\tFORGOTTEN: 3,\r\n};\r\n\r\nexport class User {\r\n\r\n\tget avatar() {\r\n\t\treturn (this.firstName || '?').substr(0, 1).toUpperCase() + (this.lastName || '?').substr(0, 1).toUpperCase();\r\n\t}\r\n\r\n\tget fullName() {\r\n\t\treturn this.firstName + ' ' + this.lastName;\r\n\t}\r\n\r\n\tconstructor(data) {\r\n\t\tif (data) {\r\n\t\t\tObject.assign(this, data);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport class UserService {\r\n\r\n\tstatic user$_ = new BehaviorSubject(null);\r\n\r\n\tstatic get currentUser() {\r\n\t\treturn this.user$_.getValue();\r\n\t}\r\n\r\n\tstatic setUser(user) {\r\n\t\tif (user) {\r\n\t\t\tSessionStorageService.set('user', user);\r\n\t\t} else {\r\n\t\t\tSessionStorageService.delete('user');\r\n\t\t}\r\n\t\tthis.user$_.next(user);\r\n\t}\r\n\r\n\tstatic data$() {\r\n\t\treturn ApiService.get$('/user/data.json');\r\n\t}\r\n\r\n\tstatic forgot$(payload) {\r\n\t\treturn ApiService.get$(`/user/forgot.json`, payload);\r\n\t}\r\n\r\n\tstatic me$() {\r\n\t\tconst sessionUser = SessionStorageService.get('user');\r\n\t\tif (sessionUser) {\r\n\t\t\treturn of(sessionUser).pipe(\r\n\t\t\t\tswitchMap(user => {\r\n\t\t\t\t\tthis.setUser(new User(user));\r\n\t\t\t\t\treturn this.user$_;\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$(`/user/me.json`).pipe(\r\n\t\t\t\tmap((response) => {\r\n\t\t\t\t\tthis.mapUser(response);\r\n\t\t\t\t}),\r\n\t\t\t\tcatchError(_ => of(null)),\r\n\t\t\t\tswitchMap(user => {\r\n\t\t\t\t\tthis.setUser(user);\r\n\t\t\t\t\treturn this.user$_;\r\n\t\t\t\t}),\r\n\t\t\t\tmap(user => user || null),\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic signin$(payload) {\r\n\t\treturn ApiService.get$(`/user/signin.json`, payload).pipe(\r\n\t\t\tmap((response) => this.mapUser(response)),\r\n\t\t\ttap((user) => this.setUser(user)),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic signout$() {\r\n\t\treturn ApiService.get$(`/user/signout.json`).pipe(\r\n\t\t\ttap((_) => this.setUser(null)),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic signup$(payload) {\r\n\t\treturn ApiService.get$(`/user/signup.json`, payload).pipe(\r\n\t\t\tmap((response) => this.mapUser(response)),\r\n\t\t\ttap((user) => this.setUser(user)),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic sessionStorage$() {\r\n\t\treturn of(SessionStorageService.get('user') || null);\r\n\t}\r\n\r\n\tstatic mapUser(user) {\r\n\t\treturn user ? new User(user) : null;\r\n\t}\r\n\r\n\tstatic mapUsers(users) {\r\n\t\treturn users ? users.map(x => UserService.mapUser(x)) : [];\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { ModalResolveEvent, ModalService } from './common/modal/modal.service';\r\nimport { environment } from './environment';\r\nimport { CartService } from './shared/cart/cart.service';\r\nimport { HeaderService } from './shared/header/header.service';\r\nimport { UserService } from './shared/user/user.service';\r\n\r\nexport class AppComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.remove('hidden');\r\n\t\tconsole.log('AppComponent.onInit');\r\n\t\tthis.header = HeaderService.currentHeader;\r\n\t\tHeaderService.header$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(header => {\r\n\t\t\tthis.header = header;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tCartService.items$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(_ => this.pushChanges());\r\n\t}\r\n\r\n\tonOpenMarketAndLanguage() {\r\n\t\tHeaderService.onBack();\r\n\t\tModalService.open$({ src: environment.template.modal.marketsAndLanguagesModal }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tconsole.log('AppComponent.onOpenMarketAndLanguage', event);\r\n\t\t});\r\n\t}\r\n\r\n\tonLogin() {\r\n\t\tHeaderService.onBack();\r\n\t\tModalService.open$({ src: environment.template.modal.userModal, data: { view: 1 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tconsole.log('AppComponent.onLogin', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\twindow.location.href = environment.slug.reservedArea;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonLogout() {\r\n\t\tUserService.signout$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tonProjectRegistration(event) {\r\n\t\tModalService.open$({ src: environment.template.modal.projectsRegistrationModal }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tconsole.log('AppComponent.onProjectRegistration', event);\r\n\t\t\t/*\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\t// window.location.href = environment.slug.reservedArea;\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t});\r\n\t}\r\n\r\n\tonAddToCart(item) {\r\n\t\tCartService.addItem$(item).pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(_ => {\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tonOpenMiniCart() {\r\n\t\tHeaderService.setHeader('cart');\r\n\t}\r\n\r\n}\r\n\r\nAppComponent.meta = {\r\n\tselector: '[app-component]',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class DownloadDirective extends Directive {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('download', this.download);\r\n\t}\r\n\r\n}\r\n\r\nDownloadDirective.meta = {\r\n\tselector: '[download]',\r\n\tinputs: ['download']\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\n\r\nlet DROPDOWN_ID = 1000000;\r\n\r\nexport class DropdownDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this.dropdown || this.id_ || (this.id_ = DropdownDirective.nextId());\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst trigger = node.getAttribute('dropdown-trigger');\r\n\t\tthis.trigger = trigger ? node.querySelector(trigger) : node;\r\n\t\tthis.opened = null;\r\n\t\tthis.onClick = this.onClick.bind(this);\r\n\t\tthis.onDocumentClick = this.onDocumentClick.bind(this);\r\n\t\tthis.openDropdown = this.openDropdown.bind(this);\r\n\t\tthis.closeDropdown = this.closeDropdown.bind(this);\r\n\t\tthis.addListeners();\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.openDropdown();\r\n\t\t} else {\r\n\t\t\tconst dropdownItemNode = node.querySelector('[dropdown-item]');\r\n\t\t\t// console.log('dropdownItemNode', dropdownItemNode);\r\n\t\t\tif (!dropdownItemNode) { // if (this.trigger !== node) {\r\n\t\t\t\tthis.closeDropdown();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDocumentClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst clickedInside = node === event.target || node.contains(event.target);\r\n\t\tif (!clickedInside) {\r\n\t\t\tthis.closeDropdown();\r\n\t\t}\r\n\t}\r\n\r\n\topenDropdown() {\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.opened = true;\r\n\t\t\tthis.addDocumentListeners();\r\n\t\t\tDropdownDirective.dropdown$.next(this.id);\r\n\t\t\tthis.dropped.next(this.id);\r\n\t\t}\r\n\t}\r\n\r\n\tcloseDropdown() {\r\n\t\tif (this.opened !== null) {\r\n\t\t\tthis.removeDocumentListeners();\r\n\t\t\tthis.opened = null;\r\n\t\t\tif (DropdownDirective.dropdown$.getValue() === this.id) {\r\n\t\t\t\tDropdownDirective.dropdown$.next(null);\r\n\t\t\t\tthis.dropped.next(null);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\taddListeners() {\r\n\t\tthis.trigger.addEventListener('click', this.onClick);\r\n\t}\r\n\r\n\taddDocumentListeners() {\r\n\t\tdocument.addEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tremoveListeners() {\r\n\t\tthis.trigger.removeEventListener('click', this.onClick);\r\n\t}\r\n\r\n\tremoveDocumentListeners() {\r\n\t\tdocument.removeEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners();\r\n\t\tthis.removeDocumentListeners();\r\n\t}\r\n\r\n\tstatic nextId() {\r\n\t\treturn DROPDOWN_ID++;\r\n\t}\r\n\r\n}\r\n\r\nDropdownDirective.meta = {\r\n\tselector: '[dropdown]',\r\n\tinputs: ['dropdown', 'dropdown-trigger'],\r\n\toutputs: ['dropped']\r\n};\r\n\r\nDropdownDirective.dropdown$ = new BehaviorSubject(null);\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { DropdownDirective } from './dropdown.directive';\r\n\r\nexport class DropdownItemDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this['dropdown-item'];\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('dropdown-item');\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownItemDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nDropdownItemDirective.meta = {\r\n\tselector: '[dropdown-item], [[dropdown-item]]',\r\n\tinputs: ['dropdown-item']\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nexport class EnvPipe extends Pipe {\r\n\r\n\tstatic transform(keypath) {\r\n\t\tlet env = environment;\r\n\t\tconst keys = keypath.split('.');\r\n\t\tlet k = keys.shift();\r\n\t\twhile (keys.length > 0 && env[k]) {\r\n\t\t\tenv = env[k];\r\n\t\t\tk = keys.shift();\r\n\t\t}\r\n\t\tconst value = env[k] || null;\r\n\t\treturn value;\r\n\t}\r\n\r\n}\r\n\r\nEnvPipe.meta = {\r\n\tname: 'env',\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nexport class FlagPipe extends Pipe {\r\n\r\n\tstatic transform(key) {\r\n\t\tconst flags = environment.flags;\r\n\t\treturn flags[key] || false;\r\n\t}\r\n\r\n}\r\n\r\nFlagPipe.meta = {\r\n\tname: 'flag',\r\n};\r\n","\r\nimport { Pipe } from 'rxcomp';\r\n\r\nexport class HighlightPipe extends Pipe {\r\n\r\n\tstatic transform(text, query) {\r\n\t\tif (!query) {\r\n\t\t\treturn text;\r\n\t\t}\r\n\t\tif (!Array.isArray(query)) {\r\n\t\t\tquery = [query];\r\n\t\t}\r\n\t\t// text = HighlightPipe.encodeHTML(text);\r\n\t\tconst escapedQuery = query.map(x => HighlightPipe.escapeRegexChars(x));\r\n\t\tconst regExp = new RegExp(`(?<!\\<)${escapedQuery.join('(?![\\w\\s]*[\\>])|(?<!\\<)')}(?![\\w\\s]*[\\>])`, 'gmi');\r\n\t\t// const regExp = new RegExp('&[^;]+;|' + escapedQuery.join('|'), 'gi');\r\n\t\ttext = text.replace(regExp, function(match, i, b) {\r\n\t\t\treturn '<b>' + match + '</b>';\r\n\t\t\t// return match.toLowerCase() === x.toLowerCase() ? '<strong>' + match + '</strong>' : match;\r\n\t\t});\r\n\t\t// text = HighlightPipe.decodeHTML(text);\r\n\t\tconsole.log(text);\r\n\t\treturn text;\r\n\t}\r\n\r\n\tstatic escapeRegexChars(text) {\r\n\t\treturn text.replace(/([.?*+^$[\\]\\\\(){}|-])/g, '\\\\$1');\r\n\t}\r\n\r\n\tstatic safeToString(text) {\r\n\t\treturn text === undefined || text === null ? '' : text.toString().trim();\r\n\t}\r\n\r\n\tstatic encodeHTML(text) {\r\n\t\treturn this.safeToString(text)\r\n\t\t\t.replace(/&/g, '&amp;')\r\n\t\t\t.replace(/</g, '&lt;')\r\n\t\t\t.replace(/>/g, '&gt;');\r\n\t}\r\n\r\n\tstatic decodeHTML(text) {\r\n\t\treturn text\r\n\t\t\t.replace(/&amp;/g, '&')\r\n\t\t\t.replace(/&lt;/g, '<')\r\n\t\t\t.replace(/&gt;/g, '>');\r\n\t}\r\n\r\n}\r\n\r\nHighlightPipe.meta = {\r\n\tname: 'highlight',\r\n};\r\n\r\n","import { Pipe } from 'rxcomp';\r\n\r\n/*\r\n['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n['\"', '&', ''', '<', '>', ' ', '¡', '¢', '£', '¤', '¥', '¦', '§', '¨', '©', 'ª', '«', '¬', '­', '®', '¯', '°', '±', '²', '³', '´', 'µ', '¶', '·', '¸', '¹', 'º', '»', '¼', '½', '¾', '¿', 'À', 'Á', 'Â', 'Ã', 'Ä', 'Å', 'Æ', 'Ç', 'È', 'É', 'Ê', 'Ë', 'Ì', 'Í', 'Î', 'Ï', 'Ð', 'Ñ', 'Ò', 'Ó', 'Ô', 'Õ', 'Ö', '×', 'Ø', 'Ù', 'Ú', 'Û', 'Ü', 'Ý', 'Þ', 'ß', 'à', 'á', 'ã', 'ä', 'å', 'æ', 'ç', 'è', 'é', 'ê', 'ë', 'ì', 'í', 'î', 'ï', 'ð', 'ñ', 'ò', 'ó', 'ô', 'õ', 'ö', '÷', 'ø', 'ù', 'ú', 'û', 'ü', 'ý', 'þ', 'ÿ', '&', '•', '°', '∞', '‰', '⋅', '±', '†', '—', '¬', 'µ', '⊥', '∥', '€', '£', '¥', '¢', '©', '®', '™', 'α', 'β', 'γ', 'δ', 'ε', 'ζ', 'η', 'θ', 'ι', 'κ', 'λ', 'μ', 'ν', 'ξ', 'ο', 'π', 'ρ', 'σ', 'τ', 'υ', 'φ', 'χ', 'ψ', 'ω', 'Α', 'Β', 'Γ', 'Δ', 'Ε', 'Ζ', 'Η', 'Θ', 'Ι', 'Κ', 'Λ', 'Μ', 'Ν', 'Ξ', 'Ο', 'Π', 'Ρ', 'Σ', 'Τ', 'Υ', 'Φ', 'Χ', 'Ψ', 'Ω'];\r\n*/\r\n\r\nexport class HtmlPipe extends Pipe {\r\n\r\n\tstatic transform(value) {\r\n\t\tif (value) {\r\n\t\t\tvalue = value.replace(/&#(\\d+);/g, function(m, n) {\r\n\t\t\t\treturn String.fromCharCode(parseInt(n));\r\n\t\t\t});\r\n\t\t\tconst escapes = ['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n\t\t\tconst unescapes = ['\"', '&', '\\'', '<', '>', ' ', '¡', '¢', '£', '¤', '¥', '¦', '§', '¨', '©', 'ª', '«', '¬', '­', '®', '¯', '°', '±', '²', '³', '´', 'µ', '¶', '·', '¸', '¹', 'º', '»', '¼', '½', '¾', '¿', 'À', 'Á', 'Â', 'Ã', 'Ä', 'Å', 'Æ', 'Ç', 'È', 'É', 'Ê', 'Ë', 'Ì', 'Í', 'Î', 'Ï', 'Ð', 'Ñ', 'Ò', 'Ó', 'Ô', 'Õ', 'Ö', '×', 'Ø', 'Ù', 'Ú', 'Û', 'Ü', 'Ý', 'Þ', 'ß', 'à', 'á', 'ã', 'ä', 'å', 'æ', 'ç', 'è', 'é', 'ê', 'ë', 'ì', 'í', 'î', 'ï', 'ð', 'ñ', 'ò', 'ó', 'ô', 'õ', 'ö', '÷', 'ø', 'ù', 'ú', 'û', 'ü', 'ý', 'þ', 'ÿ', '&', '•', '°', '∞', '‰', '⋅', '±', '†', '—', '¬', 'µ', '⊥', '∥', '€', '£', '¥', '¢', '©', '®', '™', 'α', 'β', 'γ', 'δ', 'ε', 'ζ', 'η', 'θ', 'ι', 'κ', 'λ', 'μ', 'ν', 'ξ', 'ο', 'π', 'ρ', 'σ', 'τ', 'υ', 'φ', 'χ', 'ψ', 'ω', 'Α', 'Β', 'Γ', 'Δ', 'Ε', 'Ζ', 'Η', 'Θ', 'Ι', 'Κ', 'Λ', 'Μ', 'Ν', 'Ξ', 'Ο', 'Π', 'Ρ', 'Σ', 'Τ', 'Υ', 'Φ', 'Χ', 'Ψ', 'Ω'];\r\n\t\t\tconst rx = new RegExp(`(&${escapes.join(';)|(&')};)`, 'g');\r\n\t\t\tvalue = value.replace(rx, function() {\r\n\t\t\t\tfor (let i = 1; i < arguments.length; i++) {\r\n\t\t\t\t\tif (arguments[i]) {\r\n\t\t\t\t\t\t// console.log(arguments[i], unescapes[i - 1]);\r\n\t\t\t\t\t\treturn unescapes[i - 1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// console.log(value);\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nHtmlPipe.meta = {\r\n\tname: 'html',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class IdDirective extends Directive {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('id', this.id);\r\n\t}\r\n\r\n}\r\n\r\nIdDirective.meta = {\r\n\tselector: '[id]',\r\n\tinputs: ['id']\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class LabelForDirective extends Directive {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('for', this.labelFor);\r\n\t}\r\n\r\n}\r\n\r\nLabelForDirective.meta = {\r\n\tselector: '[labelFor]',\r\n\tinputs: ['labelFor']\r\n};\r\n","import { fromEvent, ReplaySubject } from 'rxjs';\r\nimport { delay, switchMap } from 'rxjs/operators';\r\n\r\nexport class LocomotiveScrollService {\r\n\r\n\tstatic scroll$ = new ReplaySubject(1);\r\n\tstatic scroll(scroll) {\r\n\t\t// console.log('LocomotiveScrollService.scroll', scroll);\r\n\t\tthis.scroll$.next(scroll);\r\n\t}\r\n\r\n\tstatic init(node, options) {\r\n\t\toptions = Object.assign({\r\n\t\t\tuseKeyboard: true,\r\n\t\t\tsmoothMobile: true,\r\n\t\t\tinertia: 0.5,\r\n\t\t\t// name:'scroll',\r\n\t\t\t// offset: [0,0], // bottom top\r\n\t\t\t// repeat: false,\r\n\t\t\tsmooth: true,\r\n\t\t\t// initPosition: { x: 0, y: 0 }\r\n\t\t\t// direction: 'vertical',\r\n\t\t\tlerp: 0.01,\r\n\t\t\tgetDirection: true, // add direction to scroll event\r\n\t\t\tgetSpeed: true, // add speed to scroll event\r\n\t\t\t// class: 'is-inview',\r\n\t\t\tinitClass: 'has-scroll-init',\r\n\t\t\tscrollingClass: 'has-scroll-scrolling',\r\n\t\t\tdraggingClass: 'has-scroll-dragging',\r\n\t\t\tsmoothClass: 'has-scroll-smooth',\r\n\t\t\tscrollbarContainer: false,\r\n\t\t\tscrollbarClass: 'c-scrollbar',\r\n\t\t\tmultiplier: 1,\r\n\t\t\tfirefoxMultiplier: 50,\r\n\t\t\ttouchMultiplier: 2,\r\n\t\t\tscrollFromAnywhere: true,\r\n\t\t\tgestureDirection: 'vertical',\r\n\t\t\treloadOnContextChange: false,\r\n\t\t\tresetNativeScroll: true,\r\n\t\t}, options, {\r\n\t\t\tel: node,\r\n\t\t});\r\n\t\tif (this.useLocomotiveScroll()) {\r\n\t\t\tconst instance = new LocomotiveScroll(options);\r\n\t\t\tLocomotiveScrollService.instance = instance;\r\n\t\t\treturn instance;\r\n\t\t} else {\r\n\t\t\tdocument.querySelector('html').classList.add('has-scroll-init');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic useLocomotiveScroll() {\r\n\t\treturn window.innerWidth >= 768 && !this.isMacLike();\r\n\t}\r\n\r\n\tstatic isMacLike() {\r\n\t\tconst isMacLike = /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform);\r\n\t\treturn isMacLike;\r\n\t}\r\n\r\n\tstatic isIOS() {\r\n\t\tconst isIOS = /(iPhone|iPod|iPad)/i.test(navigator.platform);\r\n\t\treturn isIOS;\r\n\t}\r\n\r\n\tstatic isMacOs() {\r\n\t\tconst isMacOs = navigator.platform.toLowerCase().indexOf('mac') >= 0;\r\n\t\treturn isMacOs;\r\n\t}\r\n\r\n\tstatic isSafari() {\r\n\t\tconst isSafari = navigator.vendor.match(/apple/i) &&\r\n\t\t\t!navigator.userAgent.match(/crios/i) &&\r\n\t\t\t!navigator.userAgent.match(/fxios/i);\r\n\t\treturn isSafari;\r\n\t}\r\n\r\n\tstatic init$(node) {\r\n\t\treturn fromEvent(window, 'load').pipe(\r\n\t\t\tdelay(1),\r\n\t\t\tswitchMap(_ => {\r\n\t\t\t\t// setTimeout(() => {\r\n\t\t\t\tconst instance = LocomotiveScrollService.init(node);\r\n\t\t\t\tif (instance) {\r\n\t\t\t\t\tconst showefy = document.querySelector('#showefy');\r\n\t\t\t\t\tinstance.on('scroll', instance => {\r\n\t\t\t\t\t\tLocomotiveScrollService.scroll(instance);\r\n\t\t\t\t\t\tif (showefy) {\r\n\t\t\t\t\t\t\tconst isShowefyDisabled = instance.speed > 0.1;\r\n\t\t\t\t\t\t\tif (isShowefyDisabled) {\r\n\t\t\t\t\t\t\t\tif (showefy.style.pointerEvents !== 'none') {\r\n\t\t\t\t\t\t\t\t\tshowefy.style.pointerEvents = 'none';\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (showefy.style.pointerEvents === 'none') {\r\n\t\t\t\t\t\t\t\t\tshowefy.style.pointerEvents = 'auto';\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst event = { direction: null, scroll: { x: 0, y: 0 }, speed: 0 };\r\n\t\t\t\t\tconst body = document.querySelector('body');\r\n\t\t\t\t\tlet previousY = body.scrollTop; // window.pageYOffset; // body.scrollTop;\r\n\t\t\t\t\tbody.addEventListener('scroll', () => {\r\n\t\t\t\t\t\tconst y = body.scrollTop; // window.pageYOffset; // body.scrollTop;\r\n\t\t\t\t\t\tconst direction = y >= previousY ? 'down' : 'up';\r\n\t\t\t\t\t\t// console.log('scroll', y, direction);\r\n\t\t\t\t\t\tpreviousY = y;\r\n\t\t\t\t\t\tevent.direction = direction;\r\n\t\t\t\t\t\tevent.scroll.y = y;\r\n\t\t\t\t\t\tLocomotiveScrollService.scroll(event);\r\n\t\t\t\t\t}, true);\r\n\t\t\t\t}\r\n\t\t\t\treturn LocomotiveScrollService.scroll$;\r\n\t\t\t\t// }, 1);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic update() {\r\n\t\tif (this.instance) {\r\n\t\t\tthis.instance.update();\r\n\t\t}\r\n\t}\r\n\r\n\tstatic stop() {\r\n\t\tif (this.instance) {\r\n\t\t\tthis.instance.stop();\r\n\t\t}\r\n\t}\r\n\r\n\tstatic start() {\r\n\t\tif (this.instance) {\r\n\t\t\tthis.instance.start();\r\n\t\t}\r\n\t}\r\n\r\n\tstatic scrollTo(target, options = { offset: -130 }) {\r\n\t\tif (this.instance) {\r\n\t\t\tthis.instance.scrollTo(target, options);\r\n\t\t} else {\r\n\t\t\tconst body = document.querySelector('body');\r\n\t\t\tconst currentTop = body.scrollTop; // window.pageYOffset; // body.scrollTop;\r\n\t\t\tconst targetTop = currentTop + target.getBoundingClientRect().top + options.offset;\r\n\t\t\tconst distance = targetTop - currentTop;\r\n\t\t\tconst o = { pow: 0 };\r\n\t\t\tgsap.set(body, {\r\n\t\t\t\t'scroll-behavior': 'auto'\r\n\t\t\t});\r\n\t\t\tgsap.to(o, {\r\n\t\t\t\tduration: Math.abs(distance) / 2000,\r\n\t\t\t\tpow: 1,\r\n\t\t\t\tease: Quad.easeOut,\r\n\t\t\t\toverwrite: 'all',\r\n\t\t\t\tonUpdate: () => {\r\n\t\t\t\t\tgsap.set(body, {\r\n\t\t\t\t\t\t'scrollTop': currentTop + distance * o.pow\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// window.scrollTo(0, currentTop + distance * o.pow);\r\n\t\t\t\t},\r\n\t\t\t\tonComplete: () => {\r\n\t\t\t\t\tgsap.set(body, {\r\n\t\t\t\t\t\t'scroll-behavior': 'smooth'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// target.scrollIntoView();\r\n\t\t}\r\n\t}\r\n\r\n\tstatic scrollToSelector(selector, options) {\r\n\t\tconst target = document.querySelector(selector);\r\n\t\tif (target) {\r\n\t\t\tLocomotiveScrollService.scrollTo(target, options);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { takeUntil, tap } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from './locomotive-scroll.service';\r\n\r\nexport class LocomotiveScrollToDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tthis.initialFocus = false;\r\n\t\tconst { module, node } = getContext(this);\r\n\t\tconst expression = this.expression = node.getAttribute(`(locomotiveScrollTo)`);\r\n\t\tthis.outputFunction = module.makeFunction(expression, ['$event']);\r\n\t\tthis.scrollTo$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tscrollTo$() {\r\n\t\tconst { module, node, parentInstance } = getContext(this);\r\n\t\treturn fromEvent(node, 'click').pipe(\r\n\t\t\ttap(event => {\r\n\t\t\t\tif (event) {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t\tconst selector = module.resolve(this.outputFunction, parentInstance, event);\r\n\t\t\t\tif (typeof selector === 'string') {\r\n\t\t\t\t\tconst target = node.querySelector(selector) || document.querySelector(selector);\r\n\t\t\t\t\tif (target) {\r\n\t\t\t\t\t\tconst offset = this.offset;\r\n\t\t\t\t\t\tconst options = offset ? { offset } : undefined;\r\n\t\t\t\t\t\tLocomotiveScrollService.scrollTo(target, options);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nLocomotiveScrollToDirective.meta = {\r\n\tselector: `[(locomotiveScrollTo)]`,\r\n\tinputs: ['offset']\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from './locomotive-scroll.service';\r\n\r\nexport class LocomotiveScrollDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tLocomotiveScrollService.init$(node).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('LocomotiveScrollDirective', event);\r\n\t\t});\r\n\t\t/*\r\n\t\twindow.onload = () => {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tconst instance = LocomotiveScrollService.init(node);\r\n\t\t\t\tif (instance) {\r\n\t\t\t\t\tinstance.on('scroll', instance => {\r\n\t\t\t\t\t\tLocomotiveScrollService.scroll(instance.scroll.y);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst body = document.querySelector('body');\r\n\t\t\t\t\twindow.addEventListener('scroll', () => {\r\n\t\t\t\t\t\tconst y = body.scrollTop; // window.pageYOffset\r\n\t\t\t\t\t\tLocomotiveScrollService.scroll(y);\r\n\t\t\t\t\t}, true);\r\n\t\t\t\t}\r\n\t\t\t}, 1);\r\n\t\t};\r\n\t\t*/\r\n\t}\r\n\r\n}\r\n\r\nLocomotiveScrollDirective.meta = {\r\n\tselector: '[locomotive-scroll],[[locomotive-scroll]]'\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil, tap } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from './locomotive-scroll.service';\r\n\r\nexport class ScrollDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tif (LocomotiveScrollService.useLocomotiveScroll()) {\r\n\t\t\tthis.scroll$().pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(event => {\r\n\t\t\t\t// console.log('ScrollDirective', event);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tscroll$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst speed = this.scrollSpeed ? parseFloat(this.scrollSpeed) : 1.5;\r\n\t\treturn LocomotiveScrollService.scroll$.pipe(\r\n\t\t\ttap(scroll => {\r\n\t\t\t\tconst wh = window.innerHeight;\r\n\t\t\t\tconst wh2 = wh / 2;\r\n\t\t\t\tconst rect = node.getBoundingClientRect();\r\n\t\t\t\tconst currentY = gsap.getProperty(node, 'y');\r\n\t\t\t\tconst top = rect.top - currentY;\r\n\t\t\t\tconst bottom = rect.bottom - currentY;\r\n\t\t\t\tif (top < wh && bottom > 0) {\r\n\t\t\t\t\tconst pow = (top - wh2) / wh2;\r\n\t\t\t\t\tconst y = pow * speed * 40;\r\n\t\t\t\t\tgsap.set(node, { y });\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nScrollDirective.meta = {\r\n\tselector: '[scroll]',\r\n\tinputs: ['scrollSpeed'],\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { ModalService } from './modal.service';\r\n\r\nexport class ModalOutletComponent extends Component {\r\n\tget modal() {\r\n\t\treturn this.modal_;\r\n\t}\r\n\r\n\tset modal(modal) {\r\n\t\t// console.log('ModalOutletComponent set modal', modal, this);\r\n\t\tconst { module } = getContext(this);\r\n\t\tif (this.modal_ && this.modal_.node) {\r\n\t\t\tmodule.remove(this.modal_.node, this);\r\n\t\t\tthis.modalNode.removeChild(this.modal_.node);\r\n\t\t}\r\n\t\tif (modal && modal.node) {\r\n\t\t\tthis.modal_ = modal;\r\n\t\t\tthis.modalNode.appendChild(modal.node);\r\n\t\t\tconst instances = module.compile(modal.node);\r\n\t\t}\r\n\t\tthis.modal_ = modal;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.modalNode = node.querySelector('.modal-outlet__modal');\r\n\t\tModalService.modal$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(modal => {\r\n\t\t\tthis.modal = modal;\r\n\t\t});\r\n\t}\r\n\r\n\treject(event) {\r\n\t\tModalService.reject();\r\n\t}\r\n}\r\n\r\nModalOutletComponent.meta = {\r\n\tselector: '[modal-outlet]',\r\n\ttemplate: /* html */ `\r\n\t<div class=\"modal-outlet__container\" [class]=\"{ active: modal }\">\r\n\t\t<div class=\"modal-outlet__background\" (click)=\"reject($event)\"></div>\r\n\t\t<div class=\"modal-outlet__modal\"></div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Pipe } from 'rxcomp';\r\n\r\nexport class NumberPipe extends Pipe {\r\n\r\n\tstatic transform(value, language = 'en-IN', options = {}) {\r\n\t\tif (value != null) { // !!! keep losing\r\n\t\t\treturn new Intl.NumberFormat(language, options).format(value);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nNumberPipe.meta = {\r\n\tname: 'number',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { takeUntil, tap } from 'rxjs/operators';\r\n\r\nexport default class ShareDirective extends Directive {\r\n\r\n\tget href() {\r\n\t\tswitch (this.share) {\r\n\t\t\tcase 'facebook':\r\n\t\t\t\treturn this.facebookUrl;\r\n\t\t\tcase 'pinterest':\r\n\t\t\t\treturn this.pinterestUrl;\r\n\t\t\tcase 'linkedIn':\r\n\t\t\t\treturn this.linkedInUrl;\r\n\t\t\tcase 'twitter':\r\n\t\t\t\treturn this.twitterUrl;\r\n\t\t\tcase 'whatsapp':\r\n\t\t\t\treturn this.whatsappUrl;\r\n\t\t\tcase 'mailTo':\r\n\t\t\t\treturn this.mailToUrl;\r\n\t\t}\r\n\t}\r\n\r\n\tget facebookUrl() {\r\n\t\treturn `https://www.facebook.com/sharer/sharer.php?u=${this.url}`;\r\n\t}\r\n\r\n\tget pinterestUrl() {\r\n\t\treturn `https://www.pinterest.com/pin/create/button/?url=${this.url}&media=&description=${this.title}`;\r\n\t}\r\n\r\n\tget linkedInUrl() {\r\n\t\treturn `https://www.linkedin.com/shareArticle?mini=true&url=${this.url}&title=${this.title}`;\r\n\t}\r\n\r\n\tget twitterUrl() {\r\n\t\treturn `https://twitter.com/intent/tweet?text=${this.title}%20${this.url}`;\r\n\t}\r\n\r\n\tget whatsappUrl() {\r\n\t\treturn `https://api.whatsapp.com/send?text=${this.url}`;\r\n\t}\r\n\r\n\tget mailToUrl() {\r\n\t\treturn `mailto:?subject=${this.title}&body=${this.url}`;\r\n\t}\r\n\r\n\tget title() {\r\n\t\tconst title = this.shareTitle ? this.shareTitle : document.title;\r\n\t\treturn this.encodeURI(title);\r\n\t}\r\n\r\n\tget url() {\r\n\t\tlet url = this.shareUrl;\r\n\t\tif (url) {\r\n\t\t\tif (url.indexOf(window.location.origin) === -1) {\r\n\t\t\t\turl = window.location.origin + (url.indexOf('/') === 0 ? url : ('/' + url));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\turl = window.location.href;\r\n\t\t}\r\n\t\treturn this.encodeURI(url);\r\n\t}\r\n\r\n\tonInit() {\r\n\t\t// console.log('ShareComponent.onInit', this.share, this.title);\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst href = this.href;\r\n\t\tnode.setAttribute('href', href);\r\n\t\tif (this.share !== 'mailTo') {\r\n\t\t\tnode.setAttribute('target', '_blank');\r\n\t\t\tfromEvent(node, 'click').pipe(\r\n\t\t\t\ttap(event => {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\twindow.open(href, 'ShareWindow', window.innerWidth >= 768 ? 'width=640,height=480' : '');\r\n\t\t\t\t}),\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe();\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\tonChanges() {\r\n\t\tconsole.log('ShareComponent.onChanges', this.share, this.shareTitle);\r\n\t}\r\n\t*/\r\n\r\n\tencodeURI(text) {\r\n\t\treturn encodeURIComponent(text).replace(/[!'()*]/g, function(c) {\r\n\t\t\treturn '%' + c.charCodeAt(0).toString(16);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nShareDirective.meta = {\r\n\tselector: '[share]',\r\n\tinputs: ['share', 'shareUrl', 'shareTitle'],\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nexport class SlugPipe extends Pipe {\r\n\r\n\tstatic transform(key) {\r\n\t\tconst slug = environment.slug;\r\n\t\treturn slug[key] || `#${key}`;\r\n\t}\r\n\r\n}\r\n\r\nSlugPipe.meta = {\r\n\tname: 'slug',\r\n};\r\n","import { getContext, Structure } from 'rxcomp';\r\n\r\nexport class SvgIconStructure extends Structure {\r\n\tonInit() {\r\n\t\tthis.update();\r\n\t}\r\n\tonChanges() {\r\n\t\tthis.update();\r\n\t}\r\n\tupdate() {\r\n\t\tif (this.name_ !== this.name) {\r\n\t\t\tthis.name_ = this.name;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tif (node.parentNode) {\r\n\t\t\t\tconst xmlns = 'http://www.w3.org/2000/svg';\r\n\t\t\t\tconst element = document.createElementNS(xmlns, `svg`);\r\n\t\t\t\tconst w = this.width || 24;\r\n\t\t\t\tconst h = this.height || 24;\r\n\t\t\t\telement.setAttribute('class', `icon--${this.name}`);\r\n\t\t\t\t// element.setAttributeNS(null, 'width', w);\r\n\t\t\t\t// element.setAttributeNS(null, 'height', h);\r\n\t\t\t\telement.setAttributeNS(null, 'viewBox', `0 0 ${w} ${h}`);\r\n\t\t\t\telement.innerHTML = `<use xlink:href=\"#${this.name}\"></use>`;\r\n\t\t\t\telement.rxcompId = node.rxcompId;\r\n\t\t\t\telement.classList.add(...node.classList);\r\n\t\t\t\tnode.parentNode.replaceChild(element, node);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nSvgIconStructure.meta = {\r\n\tselector: 'svg-icon',\r\n\tinputs: ['name', 'width', 'height']\r\n};\r\n\r\n/*\r\n<svg class=\"copy\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><use xlink:href=\"#copy\"></use></svg>\r\n*/\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { Subject } from 'rxjs';\r\n\r\nexport class SwiperDirective extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 'auto',\r\n\t\t\tspaceBetween: 0,\r\n\t\t\tcenteredSlides: true,\r\n\t\t\tspeed: 600,\r\n\t\t\tautoplay: {\r\n\t\t\t\tdelay: 5000,\r\n\t\t\t},\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t}\r\n\r\n\tget enabled() {\r\n\t\treturn !window.matchMedia('print').matches;\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tthis.swiperInitOrUpdate_();\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners_();\r\n\t\tthis.swiperDestroy_();\r\n\t}\r\n\r\n\tonBeforePrint() {\r\n\t\tthis.swiperDestroy_();\r\n\t}\r\n\r\n\tslideToIndex(index) {\r\n\t\t// console.log('SwiperDirective.slideToIndex', index);\r\n\t\tif (this.swiper) {\r\n\t\t\tthis.swiper.slideTo(index);\r\n\t\t}\r\n\t}\r\n\r\n\thasPrev() {\r\n\t\tconst swiper = this.swiper;\r\n\t\tif (swiper && swiper.activeIndex > 0 && swiper.slides.length > swiper.activeIndex) {\r\n\t\t\t// console.log('SwiperDirective.hasPrev', swiper.activeIndex, swiper.realIndex, swiper.slides);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\r\n\thasNext() {\r\n\t\tconst swiper = this.swiper;\r\n\t\tif (swiper) {\r\n\t\t\tconst slidesPerView = swiper.params.slidesPerView || 1;\r\n\t\t\t// console.log('SwiperDirective.hasNext', swiper.slides.length, swiper.params.slidesPerView);\r\n\t\t\tif (swiper.activeIndex < swiper.slides.length - slidesPerView) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tslidePrev() {\r\n\t\tconst swiper = this.swiper;\r\n\t\tif (this.hasPrev()) {\r\n\t\t\t// console.log('SwiperDirective.slidePrev', swiper.activeIndex, swiper.realIndex, swiper.slides);\r\n\t\t\tswiper.slideTo(swiper.activeIndex - 1);\r\n\t\t}\r\n\t}\r\n\r\n\tslideNext() {\r\n\t\tconst swiper = this.swiper;\r\n\t\tif (this.hasNext()) {\r\n\t\t\t// console.log('SwiperDirective.slideNext', swiper.activeIndex, swiper.realIndex, swiper.slides);\r\n\t\t\tswiper.slideTo(swiper.activeIndex + 1);\r\n\t\t}\r\n\t}\r\n\r\n\tinit_(target) {\r\n\t\tthis.events$ = new Subject();\r\n\t\tif (this.enabled) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\ttarget = target || node;\r\n\t\t\tthis.target = target;\r\n\t\t\tgsap.set(target, { opacity: 0 });\r\n\t\t\tthis.index = 0;\r\n\t\t\tconst on = this.options.on || {};\r\n\t\t\ton.slideChange = () => {\r\n\t\t\t\tconst swiper = this.swiper;\r\n\t\t\t\tif (swiper) {\r\n\t\t\t\t\tthis.index = swiper.activeIndex;\r\n\t\t\t\t\tthis.events$.next(this.index);\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.options.on = on;\r\n\t\t\tthis.addListeners_();\r\n\t\t}\r\n\t}\r\n\r\n\taddListeners_() {\r\n\t\tthis.onBeforePrint = this.onBeforePrint.bind(this);\r\n\t\twindow.addEventListener('beforeprint', this.onBeforePrint);\r\n\t\t/*\r\n\t\tscope.$on('onResize', ($scope) => {\r\n\t\t\tthis.onResize(scope, element, attributes);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\tremoveListeners_() {\r\n\t\twindow.removeEventListener('beforeprint', this.onBeforePrint);\r\n\t}\r\n\r\n\tswiperInitOrUpdate_() {\r\n\t\tif (this.enabled) {\r\n\t\t\tconst target = this.target;\r\n\t\t\tif (this.swiper) {\r\n\t\t\t\tthis.swiper.update();\r\n\t\t\t} else {\r\n\t\t\t\tlet swiper;\r\n\t\t\t\tconst on = this.options.on || (this.options.on = {});\r\n\t\t\t\tconst callback = on.init;\r\n\t\t\t\tif (!on.init || !on.init.swiperDirectiveInit) {\r\n\t\t\t\t\ton.init = function() {\r\n\t\t\t\t\t\tgsap.to(target, {\r\n\t\t\t\t\t\t\tduration: 0.4,\r\n\t\t\t\t\t\t\topacity: 1,\r\n\t\t\t\t\t\t\tease: Power2.easeOut,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tif (typeof callback === 'function') {\r\n\t\t\t\t\t\t\t\tcallback.apply(this, [swiper, element, scope]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, 1);\r\n\t\t\t\t\t};\r\n\t\t\t\t\ton.init.swiperDirectiveInit = true;\r\n\t\t\t\t}\r\n\t\t\t\tgsap.set(target, { opacity: 1 });\r\n\t\t\t\tswiper = new Swiper(target, this.options);\r\n\t\t\t\t// console.log(swiper);\r\n\t\t\t\tthis.swiper = swiper;\r\n\t\t\t\tthis.swiper._opening = true;\r\n\t\t\t\ttarget.classList.add('swiper-init');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tswiperDestroy_() {\r\n\t\tif (this.swiper) {\r\n\t\t\tthis.swiper.destroy();\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nSwiperDirective.meta = {\r\n\tselector: '[swiper]',\r\n\tinputs: ['consumer']\r\n};\r\n","import { fromEvent, of } from 'rxjs';\r\nimport { map, shareReplay } from 'rxjs/operators';\r\n\r\n// <!-- <script id=ta_bootstrapper src='https://gruppoconcorde-cdn.thron.com/shared/plugins/tracking/current/bootstrapper-min.js'></script> -->\r\n// <script src='https://gruppoconcorde-cdn.thron.com/shared/ce/bootstrap/1/scripts/embeds-min.js'></script>\r\n\r\nexport class ThronService {\r\n\r\n\tstatic thron$() {\r\n\t\tlet thron = window.THRONContentExperience || window.THRONPlayer;\r\n\t\tif (thron) {\r\n\t\t\treturn of(thron);\r\n\t\t} else {\r\n\t\t\tconst script = document.createElement('script');\r\n\t\t\tscript.setAttribute('type', 'text/javascript');\r\n\t\t\tscript.setAttribute('src', 'https://gruppoconcorde-cdn.thron.com/shared/ce/bootstrap/1/scripts/embeds-min.js')\r\n\t\t\tconst loaded$ = fromEvent(script, 'load').pipe(\r\n\t\t\t\t// tap(event => console.log(event, window.THRONContentExperience || window.THRONPlayer)),\r\n\t\t\t\tmap(event => window.THRONContentExperience || window.THRONPlayer),\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t);\r\n\t\t\treturn document.head.appendChild(script) && loaded$;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { first, tap } from 'rxjs/operators';\r\nimport { ThronService } from './thron.service';\r\n\r\nlet ID = 0;\r\n\r\nexport class ThronComponent extends Component {\r\n\r\n\tplaying_ = false;\r\n\tget playing() {\r\n\t\treturn this.playing_;\r\n\t}\r\n\tset playing(playing) {\r\n\t\tif (this.playing_ !== playing) {\r\n\t\t\tthis.playing_ = playing;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tif (node) {\r\n\t\t\t\tplaying ? node.classList.add('playing') : node.classList.remove('playing');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\t// console.log('ThronComponent.onInit');\r\n\t\tthis.init$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tinit$() {\r\n\t\treturn ThronService.thron$().pipe(\r\n\t\t\ttap(THRON => {\r\n\t\t\t\t// const THRON = window.THRONContentExperience || window.THRONPlayer;\r\n\t\t\t\tif (!THRON) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// console.log('THRONContentExperience', window.THRONContentExperience, 'THRONPlayer', window.THRONPlayer);\r\n\t\t\t\tconst { node } = getContext(this);\r\n\t\t\t\tconst target = this.target = node.querySelector('.video > .thron');\r\n\t\t\t\tconst id = target.id = `thron-${++ID}`;\r\n\t\t\t\tlet media = this.thron;\r\n\t\t\t\tif (media.indexOf('pkey=') === -1) {\r\n\t\t\t\t\tconst splitted = media.split('/');\r\n\t\t\t\t\tconst clientId = splitted[6];\r\n\t\t\t\t\tconst xcontentId = splitted[7];\r\n\t\t\t\t\tconst pkey = splitted[8];\r\n\t\t\t\t\tmedia = `https://gruppoconcorde-view.thron.com/api/xcontents/resources/delivery/getContentDetail?clientId=${clientId}&xcontentId=${xcontentId}&pkey=${pkey}`;\r\n\t\t\t\t}\r\n\t\t\t\tconst controls = this.controls = node.hasAttribute('controls') ? true : false,\r\n\t\t\t\t\tloop = this.loop = node.hasAttribute('loop') ? true : false,\r\n\t\t\t\t\tautoplay = this.autoplay = node.hasAttribute('autoplay') ? true : false;\r\n\t\t\t\tconst player = this.player = THRON(id, {\r\n\t\t\t\t\tmedia: media,\r\n\t\t\t\t\tloop: loop,\r\n\t\t\t\t\tautoplay: autoplay,\r\n\t\t\t\t\tmuted: !controls,\r\n\t\t\t\t\tdisplayLinked: 'close',\r\n\t\t\t\t\tnoSkin: !controls,\r\n\t\t\t\t\t// lockBitrate: 'max',\r\n\t\t\t\t});\r\n\t\t\t\tthis.onReady = this.onReady.bind(this);\r\n\t\t\t\tthis.onCanPlay = this.onCanPlay.bind(this);\r\n\t\t\t\tthis.onPlaying = this.onPlaying.bind(this);\r\n\t\t\t\tthis.onPlay = this.onPlay.bind(this);\r\n\t\t\t\tthis.onPause = this.onPause.bind(this);\r\n\t\t\t\tthis.onComplete = this.onComplete.bind(this);\r\n\t\t\t\tplayer.on('ready', this.onReady);\r\n\t\t\t\tplayer.on('canPlay', this.onCanPlay);\r\n\t\t\t\tplayer.on('playing', this.onPlaying);\r\n\t\t\t\tplayer.on('play', this.onPlay);\r\n\t\t\t\tplayer.on('pause', this.onPause);\r\n\t\t\t\tplayer.on('complete', this.onComplete);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tonReady() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tif (!this.controls) {\r\n\t\t\tconst mediaContainer = player.mediaContainer();\r\n\t\t\tconst video = mediaContainer.querySelector('video');\r\n\t\t\tvideo.setAttribute('playsinline', 'true');\r\n\t\t\tvideo.setAttribute('autoplay', 'true');\r\n\t\t}\r\n\t\tthis.ready.next(id);\r\n\t\t// video.setAttribute('autoplay', 'true');\r\n\t};\r\n\r\n\tonCanPlay() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\t// console.log('ThronDirective.onCanPlay', id);\r\n\t\tthis.canPlay.next(id);\r\n\t}\r\n\r\n\tonPlaying() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tplayer.off('playing', this.onPlaying);\r\n\t\tif (!this.controls) {\r\n\t\t\tconst qualities = player.qualityLevels();\r\n\t\t\t// console.log('ThronDirective.onPlaying', id, qualities);\r\n\t\t\tif (qualities.length) {\r\n\t\t\t\tconst highestQuality = qualities[qualities.length - 1].index;\r\n\t\t\t\tconst lowestQuality = qualities[0].index;\r\n\t\t\t\tplayer.currentQuality(highestQuality);\r\n\t\t\t\t// console.log('ThronDirective.onPlaying', id, 'currentQuality', player.currentQuality());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonPlay() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\t// console.log('ThronDirective.onComplete', id);\r\n\t\tthis.playing = true;\r\n\t\tthis.play.next(id);\r\n\t}\r\n\r\n\tonPause() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\t// console.log('ThronDirective.onComplete', id);\r\n\t\tthis.playing = false;\r\n\t\tthis.pause.next(id);\r\n\t}\r\n\r\n\tonComplete() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\t// console.log('ThronDirective.onComplete', id);\r\n\t\tthis.playing = false;\r\n\t\tthis.complete.next(id);\r\n\t}\r\n\r\n\tplayVideo() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tconst status = player.status();\r\n\t\t// console.log('ThronDirective.playVideo', id, status);\r\n\t\tif (status && !status.playing) {\r\n\t\t\tplayer.play();\r\n\t\t}\r\n\t}\r\n\r\n\tpauseVideo() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tconst status = player.status();\r\n\t\t// console.log('ThronDirective.pauseVideo', id, status);\r\n\t\tif (status && status.playing) {\r\n\t\t\tplayer.pause();\r\n\t\t}\r\n\t}\r\n\r\n\ttoggle() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tconst status = player.status();\r\n\t\t// console.log('ThronDirective.pauseVideo', id, status);\r\n\t\tif (status && status.playing) {\r\n\t\t\tplayer.pause();\r\n\t\t} else {\r\n\t\t\tplayer.play();\r\n\t\t}\r\n\t}\r\n\r\n\tplay(id) {\r\n\t\t// console.log('ThronDirective.play', id, id, id === id);\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (id === this.target.id) {\r\n\t\t\tthis.playVideo();\r\n\t\t}\r\n\t}\r\n\r\n\tpause(id) {\r\n\t\t// console.log('ThronDirective.pause', id, id, id === id);\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (id === this.target.id) {\r\n\t\t\tthis.pauseVideo();\r\n\t\t}\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tconst player = this.player;\r\n\t\tif (player) {\r\n\t\t\tplayer.off('ready', this.onReady);\r\n\t\t\tplayer.off('canPlay', this.onCanPlay);\r\n\t\t\tplayer.off('playing', this.onPlaying);\r\n\t\t\tplayer.off('play', this.onPlay);\r\n\t\t\tplayer.off('pause', this.onPause);\r\n\t\t\tplayer.off('complete', this.onComplete);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nThronComponent.meta = {\r\n\tselector: '[thron],[[thron]]',\r\n\toutputs: ['ready', 'canPlay', 'play', 'pause', 'complete'],\r\n\tinputs: ['thron', 'm3u8'],\r\n\ttemplate: /* html */``,\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class TitleDirective extends Directive {\r\n\tset title(title) {\r\n\t\tif (this.title_ !== title) {\r\n\t\t\tthis.title_ = title;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\ttitle ? node.setAttribute('title', title) : node.removeAttribute('title');\r\n\t\t}\r\n\t}\r\n\tget title() {\r\n\t\treturn this.title_;\r\n\t}\r\n}\r\n\r\nTitleDirective.meta = {\r\n\tselector: '[[title]]',\r\n\tinputs: ['title'],\r\n};\r\n","import { Module } from 'rxcomp';\r\nimport { DownloadDirective } from './download/download.directive';\r\nimport { DropdownItemDirective } from './dropdown/dropdown-item.directive';\r\nimport { DropdownDirective } from './dropdown/dropdown.directive';\r\nimport { EnvPipe } from './env/env.pipe';\r\nimport { FlagPipe } from './flag/flag.pipe';\r\nimport { HighlightPipe } from './highlight/highlight.pipe';\r\nimport { HtmlPipe } from './html/html.pipe';\r\nimport { IdDirective } from './id/id.directive';\r\nimport { LabelForDirective } from './label-for/label-for.directive';\r\nimport { LabelPipe } from './label/label.pipe';\r\nimport { LocomotiveScrollToDirective } from './locomotive-scroll/locomotive-scroll-to.directive';\r\nimport { LocomotiveScrollDirective } from './locomotive-scroll/locomotive-scroll.directive';\r\nimport { ScrollDirective } from './locomotive-scroll/scroll.directive';\r\nimport { ModalOutletComponent } from './modal/modal-outlet.component';\r\nimport { NumberPipe } from './number/number.pipe';\r\nimport ShareDirective from './share/share.directive';\r\nimport { SlugPipe } from './slug/slug.pipe';\r\nimport { SvgIconStructure } from './svg/svg-icon.structure';\r\nimport { SwiperDirective } from './swiper/swiper.directive';\r\nimport { ThronComponent } from './thron/thron.component';\r\nimport { TitleDirective } from './title/title.directive';\r\n\r\nconst factories = [\r\n\tDownloadDirective,\r\n\t// DropDirective,\r\n\tDropdownDirective,\r\n\tDropdownItemDirective,\r\n\t// DropdownItemDirective,\r\n\tIdDirective,\r\n\tLabelForDirective,\r\n\t// LanguageComponent,\r\n\t// LazyDirective,\r\n\tLocomotiveScrollDirective,\r\n\tLocomotiveScrollToDirective,\r\n\t// ModalComponent,\r\n\tModalOutletComponent,\r\n\tScrollDirective,\r\n\tShareDirective,\r\n\tSvgIconStructure,\r\n\tSwiperDirective,\r\n\tThronComponent,\r\n\tTitleDirective,\r\n\t// UploadItemComponent,\r\n\t// VirtualStructure\r\n];\r\n\r\nconst pipes = [\r\n\tEnvPipe,\r\n\tFlagPipe,\r\n\tHighlightPipe,\r\n\tHtmlPipe,\r\n\tLabelPipe,\r\n\tNumberPipe,\r\n\tSlugPipe,\r\n];\r\n\r\nexport class CommonModule extends Module { }\r\n\r\nCommonModule.meta = {\r\n\timports: [\r\n\t],\r\n\tdeclarations: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n\texports: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\n\r\nexport class ControlComponent extends Component {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\t// console.log(this, node, this.control);\r\n\t\tconst control = this.control;\r\n\t\tconst flags = control.flags;\r\n\t\tObject.keys(flags).forEach((key) => {\r\n\t\t\tflags[key] ? node.classList.add(key) : node.classList.remove(key);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nControlComponent.meta = {\r\n\tselector: '[control]',\r\n\tinputs: ['control']\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlCheckboxComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t}\r\n\r\n}\r\n\r\nControlCheckboxComponent.meta = {\r\n\tselector: '[control-checkbox]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--checkbox\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<input type=\"checkbox\" class=\"control--checkbox\" [id]=\"control.name\" [formControl]=\"control\" [value]=\"true\" />\r\n\t\t\t<label [labelFor]=\"control.name\">\r\n\t\t\t\t<svg class=\"icon icon--checkbox\"><use xlink:href=\"#checkbox\"></use></svg>\r\n\t\t\t\t<svg class=\"icon icon--checkbox-checked\"><use xlink:href=\"#checkbox-checked\"></use></svg>\r\n\t\t\t\t<span [innerHTML]=\"label | html\"></span>\r\n\t\t\t</label>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { fromEvent, merge } from 'rxjs';\r\nimport { filter, map, shareReplay, startWith } from 'rxjs/operators';\r\n\r\nexport class KeyboardService {\r\n\r\n\tstatic keys = {};\r\n\r\n\tstatic keydown$() {\r\n\t\tif (!this.keydown$_) {\r\n\t\t\tthis.keydown$_ = fromEvent(window, 'keydown').pipe(\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn this.keydown$_;\r\n\t}\r\n\r\n\tstatic keyup$() {\r\n\t\tif (!this.keyup$_) {\r\n\t\t\tthis.keyup$_ = fromEvent(window, 'keyup').pipe(\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn this.keyup$_;\r\n\t}\r\n\r\n\tstatic keys$() {\r\n\t\tif (!this.keys$_) {\r\n\t\t\tthis.keys$_ = merge(this.keydown$(), this.keyup$()).pipe(\r\n\t\t\t\tmap(event => {\r\n\t\t\t\t\tconst keys = this.keys;\r\n\t\t\t\t\tif (event.type === 'keydown') {\r\n\t\t\t\t\t\tkeys[event.key] = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdelete keys[event.key];\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn this.keys;\r\n\t\t\t\t}),\r\n\t\t\t\tstartWith(this.keys),\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn this.keys$_;\r\n\t}\r\n\r\n\tstatic key$() {\r\n\t\tif (!this.key$_) {\r\n\t\t\tconst regexp = /\\w/;\r\n\t\t\tthis.key$_ = this.keydown$().pipe(\r\n\t\t\t\tfilter(event => event.key && event.key.match(regexp)),\r\n\t\t\t\tmap(event => event.key),\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn this.key$_;\r\n\t}\r\n\r\n\tstatic typing$() {\r\n\t\tif (!this.typing$_) {\r\n\t\t\tlet typing = '',\r\n\t\t\t\tto;\r\n\t\t\tthis.typing$_ = this.key$().pipe(\r\n\t\t\t\tmap(key => {\r\n\t\t\t\t\tif (to) {\r\n\t\t\t\t\t\tclearTimeout(to);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttyping += key;\r\n\t\t\t\t\tto = setTimeout(() => {\r\n\t\t\t\t\t\ttyping = '';\r\n\t\t\t\t\t}, 1500);\r\n\t\t\t\t\treturn typing;\r\n\t\t\t\t}),\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn this.typing$_;\r\n\t}\r\n\r\n}\r\n","import { getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { DropdownDirective } from '../common/dropdown/dropdown.directive';\r\nimport { KeyboardService } from '../common/keyboard/keyboard.service';\r\nimport { ControlComponent } from './control.component';\r\n\r\nexport class ControlCustomSelectComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t\tthis.dropped = false;\r\n\t\tthis.dropdownId = DropdownDirective.nextId();\r\n\t\tKeyboardService.typing$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(word => {\r\n\t\t\tthis.scrollToWord(word);\r\n\t\t});\r\n\t\t/*\r\n\t\tKeyboardService.key$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(key => {\r\n\t\t\tthis.scrollToKey(key);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\t/*\r\n\tonChanges() {\r\n\t\t// console.log('ControlCustomSelectComponent.onChanges');\r\n\t}\r\n\t*/\r\n\r\n\tscrollToWord(word) {\r\n\t\t// console.log('ControlCustomSelectComponent.scrollToWord', word);\r\n\t\tconst items = this.control.options || [];\r\n\t\tlet index = -1;\r\n\t\tfor (let i = 0; i < items.length; i++) {\r\n\t\t\tconst x = items[i];\r\n\t\t\tif (x.name.toLowerCase().indexOf(word.toLowerCase()) === 0) {\r\n\t\t\t\t// console.log(word, x.name);\r\n\t\t\t\tindex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (index !== -1) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tconst dropdown = node.querySelector('.dropdown');\r\n\t\t\tconst navDropdown = node.querySelector('.nav--dropdown');\r\n\t\t\tconst item = navDropdown.children[index];\r\n\t\t\tdropdown.scrollTo(0, item.offsetTop);\r\n\t\t}\r\n\t}\r\n\r\n\tsetOption(item) {\r\n\t\t// console.log('setOption', item, this.isMultiple);\r\n\t\tlet value;\r\n\t\tif (this.isMultiple) {\r\n\t\t\tconst value = this.control.value || [];\r\n\t\t\tconst index = value.indexOf(item.id);\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\t// if (value.length > 1) {\r\n\t\t\t\tvalue.splice(index, 1);\r\n\t\t\t\t// }\r\n\t\t\t} else {\r\n\t\t\t\tvalue.push(item.id);\r\n\t\t\t}\r\n\t\t\tvalue = value.length ? value.slice() : null;\r\n\t\t} else {\r\n\t\t\tvalue = item.id;\r\n\t\t\t// DropdownDirective.dropdown$.next(null);\r\n\t\t}\r\n\t\tthis.control.value = value;\r\n\t\tthis.change.next(value);\r\n\t}\r\n\r\n\thasOption(item) {\r\n\t\tif (this.isMultiple) {\r\n\t\t\tconst values = this.control.value || [];\r\n\t\t\treturn values.indexOf(item.id) !== -1;\r\n\t\t} else {\r\n\t\t\treturn this.control.value === item.id;\r\n\t\t}\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tlet value = this.control.value;\r\n\t\tconst items = this.control.options || [];\r\n\t\tif (this.isMultiple) {\r\n\t\t\tvalue = value || [];\r\n\t\t\tif (value.length) {\r\n\t\t\t\treturn value.map(v => {\r\n\t\t\t\t\tconst item = items.find(x => x.id === v || x.name === v);\r\n\t\t\t\t\treturn item ? item.name : '';\r\n\t\t\t\t}).join(', ');\r\n\t\t\t} else {\r\n\t\t\t\treturn this.select || 'select'; // LabelPipe.transform('select');\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst item = value ? items.find(x => x.id === value || x.name === value) : null;\r\n\t\t\tif (item) {\r\n\t\t\t\treturn item.name;\r\n\t\t\t} else {\r\n\t\t\t\treturn this.select || 'select'; // LabelPipe.transform('select');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDropped($event) {\r\n\t\t// console.log('ControlCustomSelectComponent.onDropped', id);\r\n\t\tif (this.dropped && $event === null) {\r\n\t\t\tthis.control.touched = true;\r\n\t\t}\r\n\t\tthis.dropped = $event === this.dropdownId;\r\n\t}\r\n\r\n\tget isMultiple() {\r\n\t\treturn this.multiple && this.multiple !== false && this.multiple !== 'false';\r\n\t}\r\n\r\n}\r\n\r\nControlCustomSelectComponent.meta = {\r\n\tselector: '[control-custom-select]',\r\n\toutputs: ['change'],\r\n\tinputs: ['control', 'label', 'multiple', 'select'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--select\" [class]=\"{ required: control.validators.length, multiple: isMultiple }\" [dropdown]=\"dropdownId\" (dropped)=\"onDropped($event)\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<span class=\"control--custom-select\" [innerHTML]=\"getLabel() | label\"></span>\r\n\t\t\t<svg class=\"caret-down\"><use xlink:href=\"#caret-down\"></use></svg>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t\t<div class=\"dropdown\" [dropdown-item]=\"dropdownId\">\r\n\t\t\t<div class=\"category\" [innerHTML]=\"label\"></div>\r\n\t\t\t<ul class=\"nav--dropdown\" [class]=\"{ multiple: isMultiple }\">\r\n\t\t\t\t<li (click)=\"setOption(item)\" [class]=\"{ empty: item.id == null }\" *for=\"let item of control.options\">\r\n\t\t\t\t\t<span [class]=\"{ active: hasOption(item) }\" [innerHTML]=\"item.name | label\"></span>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlEmailComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t}\r\n\r\n}\r\n\r\nControlEmailComponent.meta = {\r\n\tselector: '[control-email]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<input type=\"text\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" required email />\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlFileComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t\tthis.labels = window.labels || {};\r\n\t\tthis.file = null;\r\n\t\tthis.onReaderComplete = this.onReaderComplete.bind(this);\r\n\t}\r\n\r\n\tonInputDidChange(event) {\r\n\t\tconst input = event.target;\r\n\t\tconst file = input.files[0];\r\n\t\tthis.file = {\r\n\t\t\tname: file.name,\r\n\t\t\tlastModified: file.lastModified,\r\n\t\t\tlastModifiedDate: file.lastModifiedDate,\r\n\t\t\tsize: file.size,\r\n\t\t\ttype: file.type,\r\n\t\t}\r\n\t\tconst reader = new FileReader();\r\n\t\treader.addEventListener('load', this.onReaderComplete);\r\n\t\treader.readAsDataURL(file);\r\n\t\t// reader.readAsArrayBuffer() // Starts reading the contents of the specified Blob, once finished, the result attribute contains an ArrayBuffer representing the file's data.\r\n\t\t// reader.readAsBinaryString() // Starts reading the contents of the specified Blob, once finished, the result attribute contains the raw binary data from the file as a string.\r\n\t\t// reader.readAsDataURL() // Starts reading the contents of the specified Blob, once finished, the result attribute contains a data: URL representing the file's data.\r\n\t\t// reader.readAsText() // Starts reading the contents of the specified Blob, once finished, the result attribute contains the contents of the file as a text string. An optional encoding name can be specified.\r\n\t}\r\n\r\n\tonReaderComplete(event) {\r\n\t\tconst content = event.target.result;\r\n\t\tthis.file.content = content;\r\n\t\tthis.control.value = this.file;\r\n\t\t// console.log('ControlFileComponent.onReaderComplete', this.file);\r\n\t\t// image/*,\r\n\t}\r\n\r\n}\r\n\r\nControlFileComponent.meta = {\r\n\tselector: '[control-file]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--file\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label for=\"file\" [innerHTML]=\"label\"></label>\r\n\t\t\t<span class=\"control--text\" [innerHTML]=\"file?.name || labels.select_file\"></span>\r\n\t\t\t<svg class=\"upload\"><use xlink:href=\"#upload\"></use></svg>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t\t<input name=\"file\" type=\"file\" accept=\".pdf,.doc,.docx,*.txt\" class=\"control--file\" (change)=\"onInputDidChange($event)\" />\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlPasswordComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t}\r\n\r\n}\r\n\r\nControlPasswordComponent.meta = {\r\n\tselector: '[control-password]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<input type=\"password\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" />\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlSearchComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t\tthis.disabled = this.disabled || false;\r\n\t}\r\n\r\n}\r\n\r\nControlSearchComponent.meta = {\r\n\tselector: '[control-search]',\r\n\tinputs: ['control', 'label', 'disabled'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length, disabled: disabled }\">\r\n\t\t\t<svg class=\"search\"><use xlink:href=\"#search\"></use></svg>\r\n\t\t\t<input type=\"text\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" [disabled]=\"disabled\" />\r\n\t\t</div>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlTextComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t\tthis.disabled = this.disabled || false;\r\n\t}\r\n\r\n}\r\n\r\nControlTextComponent.meta = {\r\n\tselector: '[control-text]',\r\n\tinputs: ['control', 'label', 'disabled'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length, disabled: disabled }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t\t<input type=\"text\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" [disabled]=\"disabled\" />\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlTextareaComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t\tthis.disabled = this.disabled || false;\r\n\t}\r\n\r\n}\r\n\r\nControlTextareaComponent.meta = {\r\n\tselector: '[control-textarea]',\r\n\tinputs: ['control', 'label', 'disabled'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--textarea\" [class]=\"{ required: control.validators.length, disabled: disabled }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<textarea class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" [innerHTML]=\"label\" rows=\"4\" [disabled]=\"disabled\"></textarea>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { LabelPipe } from '../common/label/label.pipe';\r\nimport { ControlComponent } from './control.component';\r\n\r\nexport class ErrorsComponent extends ControlComponent {\r\n\r\n\tgetLabel(key, value) {\r\n\t\tconst label = LabelPipe.transform(`error_${key}`);\r\n\t\treturn label;\r\n\t}\r\n\r\n}\r\n\r\nErrorsComponent.meta = {\r\n\tselector: 'errors-component',\r\n\tinputs: ['control'],\r\n\ttemplate: /* html */ `\r\n\t<div class=\"inner\" [style]=\"{ display: control.invalid && control.touched ? 'block' : 'none' }\">\r\n\t\t<div class=\"error\" *for=\"let [key, value] of control.errors\">\r\n\t\t\t<span [innerHTML]=\"getLabel(key, value)\"></span>\r\n\t\t\t<!-- <span class=\"key\" [innerHTML]=\"key\"></span> <span class=\"value\" [innerHTML]=\"value | json\"></span> -->\r\n\t\t</div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Component } from 'rxcomp';\r\n\r\nexport class TestComponent extends Component {\r\n\r\n\tonTest(event) {\r\n\t\tthis.test.next(event);\r\n\t}\r\n\r\n\tonReset(event) {\r\n\t\tthis.reset.next(event);\r\n\t}\r\n\r\n}\r\n\r\nTestComponent.meta = {\r\n\tselector: 'test-component',\r\n\tinputs: ['form'],\r\n\toutputs: ['test', 'reset'],\r\n\ttemplate: /* html */ `\r\n\t<div class=\"test-component\" *if=\"!('production' | flag)\">\r\n\t\t<div class=\"test-component__title\">development mode</div>\r\n\t\t<code [innerHTML]=\"form.value | json\"></code>\r\n\t\t<button type=\"button\" class=\"btn--submit\" (click)=\"onTest($event)\"><span>test</span></button>\r\n\t\t<button type=\"button\" class=\"btn--submit\" (click)=\"onReset($event)\"><span>reset</span></button>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Module } from 'rxcomp';\r\nimport { ControlCheckboxComponent } from './control-checkbox.component';\r\nimport { ControlCustomSelectComponent } from './control-custom-select.component';\r\nimport { ControlEmailComponent } from './control-email.component';\r\nimport { ControlFileComponent } from './control-file.component';\r\nimport { ControlPasswordComponent } from './control-password.component';\r\nimport { ControlSearchComponent } from './control-search.component';\r\nimport { ControlTextComponent } from './control-text.component';\r\nimport { ControlTextareaComponent } from './control-textarea.component';\r\nimport { ErrorsComponent } from './errors.component';\r\nimport { TestComponent } from './test.component';\r\n\r\nconst factories = [\r\n\tControlCheckboxComponent,\r\n\tControlCustomSelectComponent,\r\n\tControlEmailComponent,\r\n\tControlFileComponent,\r\n\tControlPasswordComponent,\r\n\t// ControlSelectComponent,\r\n\tControlSearchComponent,\r\n\tControlTextareaComponent,\r\n\tControlTextComponent,\r\n\t// DisabledDirective,\r\n\tErrorsComponent,\r\n\tTestComponent,\r\n\t// ValueDirective,\r\n];\r\n\r\nconst pipes = [\r\n];\r\n\r\nexport class ControlsModule extends Module { }\r\n\r\nControlsModule.meta = {\r\n\timports: [\r\n\t],\r\n\tdeclarations: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n\texports: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n};\r\n","import { BehaviorSubject } from 'rxjs';\r\n\r\nexport const FilterMode = {\r\n\tSELECT: 'select',\r\n\tAND: 'and',\r\n\tOR: 'or',\r\n\tQUERY: 'query',\r\n};\r\n\r\nexport class FilterItem {\r\n\r\n\tconstructor(filter) {\r\n\t\tthis.change$ = new BehaviorSubject();\r\n\t\tthis.mode = FilterMode.SELECT;\r\n\t\tthis.filter = 'Filter';\r\n\t\tthis.placeholder = 'Select';\r\n\t\tthis.values = [];\r\n\t\tthis.options = [];\r\n\t\tif (filter) {\r\n\t\t\tObject.assign(this, filter);\r\n\t\t}\r\n\t\tif (filter.mode === FilterMode.SELECT) {\r\n\t\t\tfilter.options.unshift({\r\n\t\t\t\tlabel: filter.placeholder,\r\n\t\t\t\tvalue: undefined,\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfilter(item, value) {\r\n\t\treturn item.options.indexOf(value) !== -1;\r\n\t}\r\n\r\n\tmatch(item) {\r\n\t\tlet match;\r\n\t\tif (this.mode === FilterMode.OR) {\r\n\t\t\tmatch = this.values.length ? false : true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match || this.filter(item, value);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tmatch = true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match && this.filter(item, value);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn match;\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tif (this.mode === FilterMode.SELECT || this.mode === FilterMode.QUERY) {\r\n\t\t\treturn this.placeholder || this.label;\r\n\t\t} else {\r\n\t\t\treturn this.label;\r\n\t\t}\r\n\t}\r\n\r\n\thas(item) {\r\n\t\treturn this.values.indexOf(item.value) !== -1;\r\n\t}\r\n\r\n\tset(item) {\r\n\t\tif (this.mode === FilterMode.QUERY) {\r\n\t\t\tthis.values = item ? [item] : [];\r\n\t\t\tthis.placeholder = item;\r\n\t\t} else {\r\n\t\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\t\tthis.values = [];\r\n\t\t\t}\r\n\t\t\tconst index = this.values.indexOf(item.value);\r\n\t\t\tif (index === -1) {\r\n\t\t\t\tif (item.value !== undefined) {\r\n\t\t\t\t\tthis.values.push(item.value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\t\tthis.placeholder = item.label;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// console.log('FilterItem.set', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\tremove(item) {\r\n\t\tconst index = this.values.indexOf(item.value);\r\n\t\tif (index !== -1) {\r\n\t\t\tthis.values.splice(index, 1);\r\n\t\t}\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst first = this.options[0];\r\n\t\t\tthis.placeholder = first.label;\r\n\t\t}\r\n\t\t// console.log('FilterItem.remove', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\ttoggle(item) {\r\n\t\tif (this.has(item)) {\r\n\t\t\tthis.remove(item);\r\n\t\t} else {\r\n\t\t\tthis.set(item);\r\n\t\t}\r\n\t}\r\n\r\n\tclear() {\r\n\t\tthis.values = [];\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst first = this.options[0];\r\n\t\t\tthis.placeholder = first.label;\r\n\t\t}\r\n\t\tthis.change$.next();\r\n\t}\r\n}\r\n","import { merge } from 'rxjs';\r\nimport { map, tap } from 'rxjs/operators';\r\nimport { LocationService } from '../location/location.service';\r\nimport { FilterItem } from './filter-item';\r\n\r\nexport class FilterService {\r\n\r\n\tconstructor(options, initialParams, callback) {\r\n\t\tconst filters = {};\r\n\t\tif (options) {\r\n\t\t\tObject.keys(options).forEach(key => {\r\n\t\t\t\tconst filter = new FilterItem(options[key]);\r\n\t\t\t\tif (typeof callback === 'function') {\r\n\t\t\t\t\tcallback(key, filter);\r\n\t\t\t\t}\r\n\t\t\t\tfilters[key] = filter;\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.filters = filters;\r\n\t\tthis.deserialize(this.filters, initialParams);\r\n\t}\r\n\r\n\tgetParamsCount(params) {\r\n\t\tif (params) {\r\n\t\t\tconst paramsCount = Object.keys(params).reduce((p, c, i) => {\r\n\t\t\t\tconst values = params[c];\r\n\t\t\t\treturn p + (values ? values.length : 0);\r\n\t\t\t}, 0);\r\n\t\t\treturn paramsCount;\r\n\t\t} else {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t}\r\n\r\n\tdeserialize(filters, initialParams) {\r\n\t\tlet params;\r\n\t\tif (initialParams && this.getParamsCount(initialParams)) {\r\n\t\t\tparams = initialParams;\r\n\t\t}\r\n\t\tconst locationParams = LocationService.deserialize('filters');\r\n\t\tif (locationParams && this.getParamsCount(locationParams)) {\r\n\t\t\tparams = locationParams;\r\n\t\t}\r\n\t\tif (params) {\r\n\t\t\tObject.keys(filters).forEach(key => {\r\n\t\t\t\tfilters[key].values = params[key] || [];\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn filters;\r\n\t}\r\n\r\n\tserialize(filters) {\r\n\t\tlet params = {};\r\n\t\tlet any = false;\r\n\t\tObject.keys(filters).forEach(x => {\r\n\t\t\tconst filter = filters[x];\r\n\t\t\tif (filter.value !== null) {\r\n\t\t\t\tparams[x] = filter.values;\r\n\t\t\t\tany = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (!any) {\r\n\t\t\tparams = null;\r\n\t\t}\r\n\t\t// console.log('ReferenceCtrl.serialize', params);\r\n\t\tLocationService.serialize('filters', params);\r\n\t\treturn params;\r\n\t}\r\n\r\n\titems$(items) {\r\n\t\tconst filters = this.filters;\r\n\t\tconst changes = Object.keys(filters).map(key => filters[key].change$);\r\n\t\treturn merge(...changes).pipe(\r\n\t\t\t// tap(() => console.log(filters)),\r\n\t\t\ttap(() => this.serialize(filters)),\r\n\t\t\tmap(() => this.filterItems(items)),\r\n\t\t\ttap(() => this.updateFilterStates(filters, items))\r\n\t\t);\r\n\t}\r\n\r\n\tfilterItems(items, skipFilter) {\r\n\t\tconst filters = Object.keys(this.filters).map((x) => this.filters[x]).filter(x => x.value !== null);\r\n\t\titems = items.filter(item => {\r\n\t\t\tlet has = true;\r\n\t\t\tfilters.forEach(filter => {\r\n\t\t\t\tif (filter !== skipFilter) {\r\n\t\t\t\t\thas = has && filter.match(item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn has;\r\n\t\t});\r\n\t\treturn items;\r\n\t}\r\n\r\n\tupdateFilterStates(filters, items) {\r\n\t\tObject.keys(filters).forEach(x => {\r\n\t\t\tconst filter = filters[x];\r\n\t\t\tconst filteredItems = this.filterItems(items, filter);\r\n\t\t\tfilter.options.forEach(option => {\r\n\t\t\t\tlet count = 0;\r\n\t\t\t\tif (option.value) {\r\n\t\t\t\t\tlet i = 0;\r\n\t\t\t\t\twhile (i < filteredItems.length) {\r\n\t\t\t\t\t\tconst item = filteredItems[i];\r\n\t\t\t\t\t\tif (filter.filter(item, option.value)) {\r\n\t\t\t\t\t\t\tcount++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ti++;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcount = filteredItems.length;\r\n\t\t\t\t}\r\n\t\t\t\toption.count = count;\r\n\t\t\t\toption.disabled = count === 0;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tlet filter;\r\n\t\tObject.keys(this.filters).forEach(x => {\r\n\t\t\tfilter = this.filters[x];\r\n\t\t\tfilter.values = [];\r\n\t\t});\r\n\t\tif (filter) {\r\n\t\t\tfilter.change$.next();\r\n\t\t}\r\n\t}\r\n}\r\n","\r\nexport class FormService {\r\n\r\n\tstatic toSelectOptions(options) {\r\n\t\toptions = options.slice().map(x => ({ id: x.value, name: x.label }));\r\n\t\toptions.unshift({ id: null, name: 'select' });\r\n\t\treturn options;\r\n\t}\r\n\r\n}\r\n","import { ApiService } from '../../common/api/api.service';\r\n\r\nexport class AmbienceService {\r\n\r\n\tstatic all$() {\r\n\t\treturn ApiService.get$('/ambience/all.json');\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\treturn ApiService.get$('/ambience/filters.json');\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup } from 'rxcomp-form';\r\nimport { combineLatest } from 'rxjs';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { FilterMode } from '../../common/filter/filter-item';\r\nimport { FilterService } from '../../common/filter/filter.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport { AmbienceService } from './ambience.service';\r\n\r\nexport class AmbienceComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.ambienceId = this.ambienceId || null;\r\n\t\tthis.items = [];\r\n\t\tthis.filteredItems = [];\r\n\t\tthis.filters = {};\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tambience: new FormControl(null),\r\n\t\t\tcategory: new FormControl(null),\r\n\t\t\tmaterial: new FormControl(null),\r\n\t\t\tdesigner: new FormControl(null),\r\n\t\t\tsearch: new FormControl(null),\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\t// console.log('AmbienceComponent.changes$', form.value);\r\n\t\t\tthis.setFilterByKeyAndValue('ambience', form.value.ambience);\r\n\t\t\tthis.setFilterByKeyAndValue('category', form.value.category);\r\n\t\t\tthis.setFilterByKeyAndValue('material', form.value.material);\r\n\t\t\tthis.setFilterByKeyAndValue('designer', form.value.designer);\r\n\t\t\tthis.setFilterByKeyAndValue('search', form.value.search);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(data => {\r\n\t\t\tthis.items = data[0];\r\n\t\t\tthis.filters = data[1];\r\n\t\t\tcontrols.ambience.options = FormService.toSelectOptions(this.filters.ambience.options);\r\n\t\t\tcontrols.category.options = FormService.toSelectOptions(this.filters.category.options);\r\n\t\t\tcontrols.material.options = FormService.toSelectOptions(this.filters.material.options);\r\n\t\t\tcontrols.designer.options = FormService.toSelectOptions(this.filters.designer.options);\r\n\t\t\tthis.onLoad();\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tAmbienceService.all$(),\r\n\t\t\tAmbienceService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\tonLoad() {\r\n\t\tconst items = this.items;\r\n\t\tconst filters = this.filters;\r\n\t\tObject.keys(filters).forEach(key => {\r\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\r\n\t\t});\r\n\t\tconst initialParams = {};\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\tswitch (key) {\r\n\t\t\t\t\t\t\tcase 'ambience':\r\n\t\t\t\t\t\t\t\treturn item.ambience.id === value;\r\n\t\t\t\t\t\t\tcase 'category':\r\n\t\t\t\t\t\t\t\treturn item.category.id === value;\r\n\t\t\t\t\t\t\tcase 'material':\r\n\t\t\t\t\t\t\t\treturn item.materials.indexOf(value) !== -1;\r\n\t\t\t\t\t\t\tcase 'designer':\r\n\t\t\t\t\t\t\t\treturn item.designers.indexOf(value) !== -1;\r\n\t\t\t\t\t\t\tcase 'search':\r\n\t\t\t\t\t\t\t\treturn item.title.toLowerCase().indexOf(value.toLowerCase()) !== -1\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t\tconst ambience = this.ambienceId ? this.ambienceId : (this.filters.ambience.values.length ? this.filters.ambience.values[0] : null);\r\n\t\tconst category = this.filters.category.values.length ? this.filters.category.values[0] : null;\r\n\t\tconst material = this.filters.material.values.length ? this.filters.material.values[0] : null;\r\n\t\tconst designer = this.filters.designer.values.length ? this.filters.designer.values[0] : null;\r\n\t\tconst search = this.filters.search.values.length ? this.filters.search.values[0] : null;\r\n\t\tthis.form.patch({ ambience, category, material, designer, search });\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(filteredItems => {\r\n\t\t\tthis.filteredItems = filteredItems;\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t\t// console.log('AmbienceComponent.filteredItems', filteredItems.length);\r\n\t\t});\r\n\t}\r\n\r\n\tsetFilterByKeyAndValue(key, value) {\r\n\t\tconst filter = this.filters[key];\r\n\t\tif (filter) {\r\n\t\t\tif (filter.mode === FilterMode.QUERY) {\r\n\t\t\t\tfilter.set(value);\r\n\t\t\t} else {\r\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\r\n\t\t\t\t// console.log(filter.options, option);\r\n\t\t\t\tif (option) {\r\n\t\t\t\t\tfilter.set(option);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfilter.clear();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonSearch(model) {\r\n\t\t// console.log('AmbienceComponent.onSearch', this.form.value);\r\n\t\tthis.setFilterByKeyAndValue('ambience', this.form.value.ambience);\r\n\t\tthis.setFilterByKeyAndValue('category', this.form.value.category);\r\n\t\tthis.setFilterByKeyAndValue('material', this.form.value.material);\r\n\t\tthis.setFilterByKeyAndValue('designer', this.form.value.designer);\r\n\t\tthis.setFilterByKeyAndValue('search', this.form.value.search);\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tclearFilter(event, filter) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopImmediatePropagation();\r\n\t\tfilter.clear();\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nAmbienceComponent.meta = {\r\n\tselector: '[ambience]',\r\n\tinputs: ['ambienceId'],\r\n};\r\n","import { ApiService } from '../../common/api/api.service';\r\n\r\nexport class AteliersAndStoresService {\r\n\r\n\tstatic all$() {\r\n\t\treturn ApiService.get$('/ateliers-and-stores/all.json');\r\n\t}\r\n\r\n\tstatic ateliers$() {\r\n\t\treturn ApiService.get$('/ateliers-and-stores/ateliers.json');\r\n\t}\r\n\r\n\tstatic stores$() {\r\n\t\treturn ApiService.get$('/ateliers-and-stores/stores.json');\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\treturn ApiService.get$('/ateliers-and-stores/filters.json');\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup } from 'rxcomp-form';\r\nimport { combineLatest } from 'rxjs';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { FilterMode } from '../../common/filter/filter-item';\r\nimport { FilterService } from '../../common/filter/filter.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport { AteliersAndStoresService } from './ateliers-and-stores.service';\r\n\r\nexport class AteliersAndStoresComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.types = {\r\n\t\t\tAtelier: 1,\r\n\t\t\tStore: 2,\r\n\t\t};\r\n\t\tthis.items = [];\r\n\t\tthis.filteredItems = [];\r\n\t\tthis.filteredAteliers = [];\r\n\t\tthis.filteredStores = [];\r\n\t\tthis.filters = {};\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tcountry: new FormControl(null),\r\n\t\t\tsearch: new FormControl(null),\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\t// console.log('AteliersAndStoresComponent.changes$', form.value);\r\n\t\t\tthis.setFilterByKeyAndValue('country', form.value.country);\r\n\t\t\tthis.setFilterByKeyAndValue('search', form.value.search);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(data => {\r\n\t\t\tthis.items = data[0];\r\n\t\t\tthis.filters = data[1];\r\n\t\t\tcontrols.country.options = FormService.toSelectOptions(this.filters.country.options);\r\n\t\t\tthis.onLoad();\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tAteliersAndStoresService.all$(),\r\n\t\t\tAteliersAndStoresService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\tonLoad() {\r\n\t\tconst items = this.items;\r\n\t\tconst filters = this.filters;\r\n\t\tObject.keys(filters).forEach(key => {\r\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\r\n\t\t});\r\n\t\tconst initialParams = {};\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\tswitch (key) {\r\n\t\t\t\t\t\t\tcase 'country':\r\n\t\t\t\t\t\t\t\treturn item.country.id === value;\r\n\t\t\t\t\t\t\tcase 'search':\r\n\t\t\t\t\t\t\t\treturn item.title.toLowerCase().indexOf(value.toLowerCase()) !== -1 || item.country.name.toLowerCase().indexOf(value.toLowerCase()) !== -1\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t\tconst country = this.filters.country.values.length ? this.filters.country.values[0] : null;\r\n\t\tconst search = this.filters.search.values.length ? this.filters.search.values[0] : null;\r\n\t\tthis.form.patch({ country, search });\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(filteredItems => {\r\n\t\t\tthis.filteredItems = filteredItems;\r\n\t\t\tthis.filteredAteliers = filteredItems.filter(x => x.type === this.types.Atelier);\r\n\t\t\tthis.filteredStores = filteredItems.filter(x => x.type === this.types.Store);\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t\t// console.log('AteliersAndStoresComponent.filteredItems', filteredItems.length);\r\n\t\t});\r\n\t}\r\n\r\n\tsetFilterByKeyAndValue(key, value) {\r\n\t\tconst filter = this.filters[key];\r\n\t\tif (filter) {\r\n\t\t\tif (filter.mode === FilterMode.QUERY) {\r\n\t\t\t\tfilter.set(value);\r\n\t\t\t} else {\r\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\r\n\t\t\t\t// console.log(filter.options, option);\r\n\t\t\t\tif (option) {\r\n\t\t\t\t\tfilter.set(option);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfilter.clear();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonSearch(model) {\r\n\t\t// console.log('AteliersAndStoresComponent.onSearch', this.form.value);\r\n\t\tthis.setFilterByKeyAndValue('country', this.form.value.country);\r\n\t\tthis.setFilterByKeyAndValue('search', this.form.value.search);\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tclearFilter(event, filter) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopImmediatePropagation();\r\n\t\tfilter.clear();\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nAteliersAndStoresComponent.meta = {\r\n\tselector: '[ateliers-and-stores]',\r\n};\r\n","function push_(event) {\r\n\tconst dataLayer = window.dataLayer || [];\r\n\tdataLayer.push(event);\r\n\tconsole.log('GtmService.dataLayer', event);\r\n}\r\n\r\nexport class GtmService {\r\n\r\n\tstatic push(event) {\r\n\t\treturn push_(event);\r\n\t}\r\n\r\n}\r\n","import { ApiService } from '../../common/api/api.service';\r\n\r\nexport class CareersService {\r\n\r\n\tstatic data$() {\r\n\t\treturn ApiService.get$('/careers/data.json');\r\n\t}\r\n\r\n\tstatic submit$() {\r\n\t\treturn ApiService.post$('/careers/submit.json');\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport { CareersService } from './careers.service';\r\n\r\nexport class CareersComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tlastName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\ttelephone: new FormControl(null),\r\n\t\t\tcountry: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcity: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tdomain: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcv: new FormControl(null),\r\n\t\t\tmessage: new FormControl(null),\r\n\t\t\tprivacy: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn CareersService.data$().pipe(\r\n\t\t\ttap(data => {\r\n\t\t\t\tconst controls = this.controls;\r\n\t\t\t\tcontrols.country.options = FormService.toSelectOptions(data.country.options);\r\n\t\t\t\tcontrols.domain.options = FormService.toSelectOptions(data.domain.options);\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tconst controls = this.controls;\r\n\t\tconst country = controls.country.options.length > 1 ? controls.country.options[1].id : null;\r\n\t\tconst domain = controls.domain.options.length > 1 ? controls.domain.options[1].id : null;\r\n\t\tform.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\ttelephone: '0721 411112',\r\n\t\t\tcountry: country,\r\n\t\t\tcity: 'Pesaro',\r\n\t\t\tdomain: domain,\r\n\t\t\tmessage: 'Hi!',\r\n\t\t\tprivacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit(model) {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('CareersComponent.onSubmit', form.value);\r\n\t\t// console.log('CareersComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (form.valid) {\r\n\t\t\t// console.log('CareersComponent.onSubmit', form.value);\r\n\t\t\tform.submitted = true;\r\n\t\t\tCareersService.submit$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(_ => {\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tform.reset();\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Careers\",\r\n\t\t\t\t\t'form_name': \"Lavora con noi\"\r\n\t\t\t\t});\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('CareersComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nCareersComponent.meta = {\r\n\tselector: '[careers]',\r\n};\r\n","import { ApiService } from '../../common/api/api.service';\r\n\r\nexport class ContactsService {\r\n\r\n\tstatic data$() {\r\n\t\treturn ApiService.get$('/contacts/data.json');\r\n\t}\r\n\r\n\tstatic submit$() {\r\n\t\treturn ApiService.post$('/contacts/submit.json');\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport { ContactsService } from './contacts.service';\r\n\r\nexport class ContactsComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tlastName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\ttelephone: new FormControl(null),\r\n\t\t\tcountry: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcity: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tmessage: new FormControl(null),\r\n\t\t\tprivacy: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tnewsletter: new FormControl(this.flag),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn ContactsService.data$().pipe(\r\n\t\t\ttap(data => {\r\n\t\t\t\tconst controls = this.controls;\r\n\t\t\t\tcontrols.country.options = FormService.toSelectOptions(data.country.options);\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tconst controls = this.controls;\r\n\t\tconst country = controls.country.options.length > 1 ? controls.country.options[1].id : null;\r\n\t\tform.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\ttelephone: '0721 411112',\r\n\t\t\tcountry: country,\r\n\t\t\tcity: 'Pesaro',\r\n\t\t\tmessage: 'Hi!',\r\n\t\t\tprivacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit(model) {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('ContactsComponent.onSubmit', form.value);\r\n\t\t// console.log('ContactsComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (form.valid) {\r\n\t\t\t// console.log('ContactsComponent.onSubmit', form.value);\r\n\t\t\tform.submitted = true;\r\n\t\t\tContactsService.submit$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(_ => {\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tform.reset();\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Contact\",\r\n\t\t\t\t\t'form_name': \"Contatti\"\r\n\t\t\t\t});\r\n\t\t\t\tif (form.value.newsletter) {\r\n\t\t\t\t\tGtmService.push({\r\n\t\t\t\t\t\t'event': \"ContactNewsletter\",\r\n\t\t\t\t\t\t'form_name': \"ContattiNewsletter\"\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('ContactsComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nContactsComponent.meta = {\r\n\tselector: '[contacts]',\r\n};\r\n","import { map } from 'rxjs/operators';\r\nimport { ApiService } from '../../common/api/api.service';\r\n\r\nexport class DealersService {\r\n\r\n\tstatic all$() {\r\n\t\treturn ApiService.get$('/dealers/all.json').pipe(\r\n\t\t\tmap(items => items.sort((a, b) => {\r\n\t\t\t\treturn b.regions.length - a.regions.length;\r\n\t\t\t})),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\treturn ApiService.get$('/dealers/filters.json');\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup } from 'rxcomp-form';\r\nimport { combineLatest } from 'rxjs';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { FilterMode } from '../../common/filter/filter-item';\r\nimport { FilterService } from '../../common/filter/filter.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport { DealersService } from './dealers.service';\r\n\r\nexport class DealersComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.items = [];\r\n\t\tthis.filteredItems = [];\r\n\t\tthis.visibleItems = [];\r\n\t\tthis.filters = {};\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tcountry: new FormControl(null),\r\n\t\t\tsearch: new FormControl(null),\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\t// console.log('DealersComponent.changes$', form.value);\r\n\t\t\tthis.setFilterByKeyAndValue('country', form.value.country);\r\n\t\t\tthis.setFilterByKeyAndValue('search', form.value.search);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(data => {\r\n\t\t\tthis.items = data[0];\r\n\t\t\tthis.filters = data[1];\r\n\t\t\tcontrols.country.options = FormService.toSelectOptions(this.filters.country.options);\r\n\t\t\tthis.onLoad();\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tDealersService.all$(),\r\n\t\t\tDealersService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\tonLoad() {\r\n\t\tconst items = this.items;\r\n\t\tconst filters = this.filters;\r\n\t\tObject.keys(filters).forEach(key => {\r\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\r\n\t\t});\r\n\t\tconst initialParams = {};\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\tswitch (key) {\r\n\t\t\t\t\t\t\tcase 'country':\r\n\t\t\t\t\t\t\t\treturn item.countries && item.countries.find(x => x.value === value);\r\n\t\t\t\t\t\t\tcase 'search':\r\n\t\t\t\t\t\t\t\treturn item.name.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\r\n\t\t\t\t\t\t\t\t\t// item.address.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\r\n\t\t\t\t\t\t\t\t\t(item.city && item.city.toLowerCase().indexOf(value.toLowerCase()) !== -1) ||\r\n\t\t\t\t\t\t\t\t\t(item.countries && item.countries.find(x => x.label.toLowerCase().indexOf(value.toLowerCase()) !== -1))\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t\tconst country = this.filters.country.values.length ? this.filters.country.values[0] : null;\r\n\t\tconst search = this.filters.search.values.length ? this.filters.search.values[0] : null;\r\n\t\tthis.form.patch({ country, search });\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(filteredItems => {\r\n\t\t\tthis.filteredItems = filteredItems;\r\n\t\t\tthis.visibleItems = filteredItems.slice(0, Math.min(12, filteredItems.length));\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t\t// console.log('DealersComponent.filteredItems', filteredItems.length);\r\n\t\t});\r\n\t}\r\n\r\n\tshowMore(event) {\r\n\t\tconst pageSize = 32;\r\n\t\tif (this.visibleItems.length + pageSize >= this.filteredItems.length) {\r\n\t\t\tthis.visibleItems = this.filteredItems.slice();\r\n\t\t} else {\r\n\t\t\tthis.visibleItems = this.filteredItems.slice(0, Math.min(this.visibleItems.length + pageSize, this.filteredItems.length));\r\n\t\t}\r\n\t\tthis.pushChanges();\r\n\t\tLocomotiveScrollService.update();\r\n\t}\r\n\r\n\tsetFilterByKeyAndValue(key, value) {\r\n\t\tconst filter = this.filters[key];\r\n\t\tif (filter) {\r\n\t\t\tif (filter.mode === FilterMode.QUERY) {\r\n\t\t\t\tfilter.set(value);\r\n\t\t\t} else {\r\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\r\n\t\t\t\t// console.log(filter.options, option);\r\n\t\t\t\tif (option) {\r\n\t\t\t\t\tfilter.set(option);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfilter.clear();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonSearch(model) {\r\n\t\t// console.log('DealersComponent.onSearch', this.form.value);\r\n\t\tthis.setFilterByKeyAndValue('country', this.form.value.country);\r\n\t\tthis.setFilterByKeyAndValue('search', this.form.value.search);\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tclearFilter(event, filter) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopImmediatePropagation();\r\n\t\tfilter.clear();\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nDealersComponent.meta = {\r\n\tselector: '[dealers]',\r\n};\r\n","import { ApiService } from '../../common/api/api.service';\r\n\r\nexport class DesignersService {\r\n\r\n\tstatic all$() {\r\n\t\treturn ApiService.get$('/designers/all.json');\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\treturn ApiService.get$('/designers/filters.json');\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup } from 'rxcomp-form';\r\nimport { combineLatest } from 'rxjs';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { FilterMode } from '../../common/filter/filter-item';\r\nimport { FilterService } from '../../common/filter/filter.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport { DesignersService } from './designers.service';\r\n\r\nexport class DesignersComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.items = [];\r\n\t\tthis.filteredItems = [];\r\n\t\tthis.filters = {};\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tcategory: new FormControl(null),\r\n\t\t\tsearch: new FormControl(null),\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\t// console.log('DesignersComponent.changes$', form.value);\r\n\t\t\tthis.setFilterByKeyAndValue('category', form.value.category);\r\n\t\t\tthis.setFilterByKeyAndValue('search', form.value.search);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(data => {\r\n\t\t\tthis.items = data[0];\r\n\t\t\tthis.filters = data[1];\r\n\t\t\tcontrols.category.options = FormService.toSelectOptions(this.filters.category.options);\r\n\t\t\tthis.onLoad();\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tDesignersService.all$(),\r\n\t\t\tDesignersService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\tonLoad() {\r\n\t\tconst items = this.items;\r\n\t\tconst filters = this.filters;\r\n\t\tObject.keys(filters).forEach(key => {\r\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\r\n\t\t});\r\n\t\tconst initialParams = {};\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\tswitch (key) {\r\n\t\t\t\t\t\t\tcase 'category':\r\n\t\t\t\t\t\t\t\treturn item.category.id === value;\r\n\t\t\t\t\t\t\tcase 'search':\r\n\t\t\t\t\t\t\t\treturn item.name.toLowerCase().indexOf(value.toLowerCase()) !== -1\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t\tconst category = this.filters.category.values.length ? this.filters.category.values[0] : null;\r\n\t\tconst search = this.filters.search.values.length ? this.filters.search.values[0] : null;\r\n\t\tthis.form.patch({ category, search });\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(filteredItems => {\r\n\t\t\tthis.filteredItems = filteredItems;\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t\t// console.log('DesignersComponent.filteredItems', filteredItems.length);\r\n\t\t});\r\n\t}\r\n\r\n\tsetFilterByKeyAndValue(key, value) {\r\n\t\tconst filter = this.filters[key];\r\n\t\tif (filter) {\r\n\t\t\tif (filter.mode === FilterMode.QUERY) {\r\n\t\t\t\tfilter.set(value);\r\n\t\t\t} else {\r\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\r\n\t\t\t\t// console.log(filter.options, option);\r\n\t\t\t\tif (option) {\r\n\t\t\t\t\tfilter.set(option);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfilter.clear();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonSearch(model) {\r\n\t\t// console.log('DesignersComponent.onSearch', this.form.value);\r\n\t\tthis.setFilterByKeyAndValue('category', this.form.value.category);\r\n\t\tthis.setFilterByKeyAndValue('search', this.form.value.search);\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tclearFilter(event, filter) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopImmediatePropagation();\r\n\t\tfilter.clear();\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nDesignersComponent.meta = {\r\n\tselector: '[designers]',\r\n};\r\n","import { ApiService } from '../../common/api/api.service';\r\n\r\nexport class MarketsAndLanguagesService {\r\n\r\n\tstatic all$() {\r\n\t\treturn ApiService.get$('/markets-and-languages/all.json');\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { first } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalOutletComponent } from '../../common/modal/modal-outlet.component';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\nimport { environment } from '../../environment';\r\nimport { MarketsAndLanguagesService } from './markets-and-languages.service';\r\n\r\nexport class MarketsAndLanguagesModalComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tconst data = parentInstance.modal.data;\r\n\t\t}\r\n\t\tLocomotiveScrollService.stop();\r\n\t\tthis.currentMarket = environment.currentMarket;\r\n\t\tthis.currentLanguage = environment.currentLanguage;\r\n\t\tthis.markets = [];\r\n\t\tMarketsAndLanguagesService.all$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(markets => {\r\n\t\t\tthis.markets = markets;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tsetMarket(market) {\r\n\t\tthis.currentMarket = market.code;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonClose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tLocomotiveScrollService.start();\r\n\t}\r\n}\r\n\r\nMarketsAndLanguagesModalComponent.meta = {\r\n\tselector: '[markets-and-languages-modal]'\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalOutletComponent } from '../../common/modal/modal-outlet.component';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\n\r\nexport class MaterialsModalComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tthis.item = null;\r\n\t\tthis.items = null;\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tconst data = parentInstance.modal.data;\r\n\t\t\tthis.item = data.item;\r\n\t\t\tthis.items = data.items;\r\n\t\t\t// console.log('MaterialsModalComponent.onInit', data);\r\n\t\t}\r\n\t\tLocomotiveScrollService.stop();\r\n\t}\r\n\r\n\thasPrev() {\r\n\t\treturn true;\r\n\t}\r\n\r\n\thasNext() {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tonPrev() {\r\n\t\tlet index = this.items.indexOf(this.item);\r\n\t\tindex--;\r\n\t\tif (index < 0) {\r\n\t\t\tindex = this.items.length - 1;\r\n\t\t}\r\n\t\tthis.item = this.items[index];\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonNext() {\r\n\t\tlet index = this.items.indexOf(this.item);\r\n\t\tindex++;\r\n\t\tif (index === this.items.length) {\r\n\t\t\tindex = 0;\r\n\t\t}\r\n\t\tthis.item = this.items[index];\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonClose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tLocomotiveScrollService.start();\r\n\t}\r\n}\r\n\r\nMaterialsModalComponent.meta = {\r\n\tselector: '[materials-modal]'\r\n};\r\n","// import { combineLatest } from 'rxjs';\r\n// import { map } from 'rxjs/operators';\r\nimport { ApiService } from '../../common/api/api.service';\r\n\r\nexport class MaterialsService {\r\n\r\n\tstatic all$() {\r\n\t\treturn ApiService.get$('/materials/all.json');\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\treturn ApiService.get$('/materials/filters.json');\r\n\t}\r\n\r\n\t/*\r\n\tstatic fake$() {\r\n\t\treturn combineLatest([MaterialsService.all$(), ApiService.get$('/materials/icons.json')]).pipe(\r\n\t\t\tmap(data => {\r\n\t\t\t\tlet items = data[0];\r\n\t\t\t\tlet icons = data[1];\r\n\t\t\t\titems.forEach(item => {\r\n\t\t\t\t\tif (item.items) {\r\n\t\t\t\t\t\titem.items.forEach(sub => {\r\n\t\t\t\t\t\t\tif (sub.icons) {\r\n\t\t\t\t\t\t\t\tconst set = icons.sets[sub.icons];\r\n\t\t\t\t\t\t\t\tif (set) {\r\n\t\t\t\t\t\t\t\t\tsub.icons = set.map(x => icons.icons.find(icon => icon.id === x)).filter(x => x != null);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tconsole.log(sub.icons);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(JSON.stringify(items));\r\n\t\t\t\treturn items;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\t*/\r\n\r\n\t/*\r\n\tstatic fake$() {\r\n\t\treturn combineLatest([MaterialsService.all$(), ApiService.get$('/materials/all_.json')]).pipe(\r\n\t\t\tmap(data => {\r\n\t\t\t\tlet items = data[0];\r\n\t\t\t\tlet items_ = data[1];\r\n\t\t\t\titems = items.filter(x => x.category.name !== 'Tessuto' || !x.collection);\r\n\t\t\t\titems.forEach(item => {\r\n\t\t\t\t\tif (item.category.name === 'Tessuto') {\r\n\t\t\t\t\t\titem.items = items_.filter(x => x.collection && x.collection.id === item.id);\r\n\t\t\t\t\t\tconsole.log(item.items);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(JSON.stringify(items));\r\n\t\t\t\treturn items;\r\n\t\t\t\t// !!!\r\n\t\t\t\tlet collectionId = 1000;\r\n\t\t\t\tconst fabrics = [];\r\n\t\t\t\tconst collections = [];\r\n\t\t\t\titems_.forEach(item_ => {\r\n\t\t\t\t\tlet collection = collections.find(x => x.name === item_.collection);\r\n\t\t\t\t\tif (!collection) {\r\n\t\t\t\t\t\tcollection = {\r\n\t\t\t\t\t\t\tid: ++collectionId,\r\n\t\t\t\t\t\t\tname: item_.collection,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tcollections.push(collection);\r\n\t\t\t\t\t\tif (item_.category.name === 'Tessuto') {\r\n\t\t\t\t\t\t\tfabrics.push(Object.assign({\r\n\t\t\t\t\t\t\t\timage: `/giorgetti/img/materials/tessuto/${collection.name.toLowerCase().replace(/\\s/g, '_')}_512.jpg`,\r\n\t\t\t\t\t\t\t\tcategory: item_.category,\r\n\t\t\t\t\t\t\t}, collection));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(fabrics);\r\n\t\t\t\titems.forEach((item, i) => {\r\n\t\t\t\t\tconst item_ = items_.find(x => x.id === item.id);\r\n\t\t\t\t\t// if (item_) {\r\n\t\t\t\t\t//\titem.image = item_.image.replace(/\\s/g, '_').toLowerCase();\r\n\t\t\t\t\t//\titem.zoom = item_.zoom.replace(/\\s/g, '_').toLowerCase();\r\n\t\t\t\t\t// }\r\n\t\t\t\t\tconst collection = collections.find(x => x.name === item.collection);\r\n\t\t\t\t\tconsole.log(collection);\r\n\t\t\t\t\tif (collection) {\r\n\t\t\t\t\t\titem.collection = collection;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// item.collection = MaterialsService.toTitleCase(item.collection);\r\n\t\t\t\t\t// item.title = MaterialsService.toTitleCase(item.title);\r\n\t\t\t\t});\r\n\t\t\t\titems = items.concat(fabrics);\r\n\t\t\t\tconsole.log(JSON.stringify(items));\r\n\t\t\t\treturn items;\r\n\t\t\t\t// !!!\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic toTitleCase(sentence, seps = ' _-/') {\r\n\t\tconst capitalize = str => str.length ? str[0].toUpperCase() + str.slice(1).toLowerCase() : '';\r\n\t\tconst escape = str => str.replace(/./g, c => `\\\\${c}`);\r\n\t\tlet wordPattern = new RegExp(`[^${escape(seps)}]+`, 'g');\r\n\t\treturn sentence.replace(wordPattern, capitalize);\r\n\t}\r\n\t*/\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup } from 'rxcomp-form';\r\nimport { combineLatest } from 'rxjs';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { FilterMode } from '../../common/filter/filter-item';\r\nimport { FilterService } from '../../common/filter/filter.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport { environment } from '../../environment';\r\nimport { MaterialsService } from './materials.service';\r\n\r\nexport class MaterialsComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.categories = [];\r\n\t\tthis.selectedItem = null;\r\n\t\tthis.items = [];\r\n\t\tthis.filteredItems = [];\r\n\t\tthis.visibleItems = [];\r\n\t\tthis.filters = {};\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tcategory: new FormControl(null),\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.setFilterByKeyAndValue('category', form.value.category);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(data => {\r\n\t\t\tthis.items = data[0];\r\n\t\t\tthis.filters = data[1];\r\n\t\t\tcontrols.category.options = FormService.toSelectOptions(this.filters.category.options);\r\n\t\t\tthis.onLoad();\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tMaterialsService.all$(),\r\n\t\t\tMaterialsService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\tonLoad() {\r\n\t\tconst items = this.items;\r\n\t\tconst filters = this.filters;\r\n\t\tObject.keys(filters).forEach(key => {\r\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\r\n\t\t});\r\n\t\tconst initialParams = {};\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\tswitch (key) {\r\n\t\t\t\t\t\t\tcase 'category':\r\n\t\t\t\t\t\t\t\treturn item.category.id === value;\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t\tthis.categories = this.filters.category.options.filter(x => x.value);\r\n\t\tconst category = this.filters.category.values.length ? this.filters.category.values[0] : null;\r\n\t\tthis.form.patch({ category, search });\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(filteredItems => {\r\n\t\t\tthis.filteredItems = filteredItems;\r\n\t\t\tthis.visibleItems = this.filteredItems.slice(0, Math.min(16, this.filteredItems.length));\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t\t// console.log('MaterialsComponent.filteredItems', filteredItems.length);\r\n\t\t});\r\n\t}\r\n\r\n\tshowMore(event) {\r\n\t\tconst pageSize = 32;\r\n\t\tif (this.visibleItems.length + pageSize >= this.filteredItems.length) {\r\n\t\t\tthis.visibleItems = this.filteredItems.slice();\r\n\t\t} else {\r\n\t\t\tthis.visibleItems = this.filteredItems.slice(0, Math.min(this.visibleItems.length + pageSize, this.filteredItems.length));\r\n\t\t}\r\n\t\tthis.pushChanges();\r\n\t\tLocomotiveScrollService.update();\r\n\t}\r\n\r\n\tsetFilterByKeyAndValue(key, value) {\r\n\t\tconst filter = this.filters[key];\r\n\t\tif (filter) {\r\n\t\t\tif (filter.mode === FilterMode.QUERY) {\r\n\t\t\t\tfilter.set(value);\r\n\t\t\t} else {\r\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\r\n\t\t\t\t// console.log(filter.options, option);\r\n\t\t\t\tif (option) {\r\n\t\t\t\t\tfilter.set(option);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfilter.clear();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonToggle(item) {\r\n\t\tthis.selectedItem = this.selectedItem === item ? null : item;\r\n\t\t/*\r\n\t\tif (this.selectedItem) {\r\n\t\t\tconst selector = '#cat-' + item.category.id + '-' + item.id;\r\n\t\t\tLocomotiveScrollService.scrollToSelector(selector);\r\n\t\t}\r\n\t\t*/\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonOpenItem(item, items) {\r\n\t\tif (item.items) {\r\n\t\t\tconst active = !item.active;\r\n\t\t\tthis.filteredItems.forEach(item_ => {\r\n\t\t\t\tif (item_ !== item) {\r\n\t\t\t\t\titem_.active = false;\r\n\t\t\t\t\tconst node = document.querySelector(`#material-${item_.id}`);\r\n\t\t\t\t\tif (node) {\r\n\t\t\t\t\t\tnode.style.marginBottom = `0px`;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\titem.active = active;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (active) {\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t}\r\n\t\t\tconst node = document.querySelector(`#material-${item.id}`);\r\n\t\t\tif (node) {\r\n\t\t\t\tconst target = node.querySelector('.group--subitems');\r\n\t\t\t\tif (target) {\r\n\t\t\t\t\tconst targetRect = target.getBoundingClientRect();\r\n\t\t\t\t\tconst height = targetRect.height + 40;\r\n\t\t\t\t\tif (!active) {\r\n\t\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst from = { pow: active ? 0 : 1 };\r\n\t\t\t\t\tgsap.to(from, {\r\n\t\t\t\t\t\tpow: active ? 1 : 0,\r\n\t\t\t\t\t\tduration: height / 5000,\r\n\t\t\t\t\t\tease: Power2.easeOut,\r\n\t\t\t\t\t\tonUpdate: () => {\r\n\t\t\t\t\t\t\tnode.style.marginBottom = `${from.pow * height}px`;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tonComplete: () => {\r\n\t\t\t\t\t\t\tLocomotiveScrollService.scrollToSelector(`#material-${item.id} .group--subitems`);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tModalService.open$({ src: environment.template.modal.materialsModal, data: { item, items } }).pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t\t).subscribe(event => {\r\n\t\t\t\tconsole.log('MaterialComponent.onOpen', event);\r\n\t\t\t\t/*\r\n\t\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\t\twindow.location.href = environment.slug.reservedArea;\r\n\t\t\t\t}\r\n\t\t\t\t*/\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tsetCategory(category, event) {\r\n\t\tif (event) {\r\n\t\t\tevent.preventDefault();\r\n\t\t}\r\n\t\tthis.controls.category.value = category.value;\r\n\t\tsetTimeout(() => {\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t\tLocomotiveScrollService.scrollToSelector('#category-' + category.value);\r\n\t\t}, 100);\r\n\t}\r\n\r\n\tclearFilter(event, filter) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopImmediatePropagation();\r\n\t\tfilter.clear();\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nMaterialsComponent.meta = {\r\n\tselector: '[materials]',\r\n};\r\n","import { ApiService } from '../../common/api/api.service';\r\n\r\nexport class NewsService {\r\n\r\n\tstatic all$() {\r\n\t\treturn ApiService.get$('/news/all.json');\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\treturn ApiService.get$('/news/filters.json');\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup } from 'rxcomp-form';\r\nimport { combineLatest } from 'rxjs';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { FilterMode } from '../../common/filter/filter-item';\r\nimport { FilterService } from '../../common/filter/filter.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport { NewsService } from './news.service';\r\n\r\nexport class NewsComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.items = [];\r\n\t\tthis.filteredItems = [];\r\n\t\tthis.filters = {};\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tcountry: new FormControl(null),\r\n\t\t\tsearch: new FormControl(null),\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\t// console.log('NewsComponent.changes$', form.value);\r\n\t\t\tthis.setFilterByKeyAndValue('country', form.value.country);\r\n\t\t\tthis.setFilterByKeyAndValue('search', form.value.search);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(data => {\r\n\t\t\tthis.items = data[0];\r\n\t\t\tthis.filters = data[1];\r\n\t\t\tcontrols.country.options = FormService.toSelectOptions(this.filters.country.options);\r\n\t\t\tthis.onLoad();\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tNewsService.all$(),\r\n\t\t\tNewsService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\tonLoad() {\r\n\t\tconst items = this.items;\r\n\t\tconst filters = this.filters;\r\n\t\tObject.keys(filters).forEach(key => {\r\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\r\n\t\t});\r\n\t\tconst initialParams = {};\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\tswitch (key) {\r\n\t\t\t\t\t\t\tcase 'country':\r\n\t\t\t\t\t\t\t\treturn item.country.id === value;\r\n\t\t\t\t\t\t\tcase 'search':\r\n\t\t\t\t\t\t\t\treturn item.title.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\r\n\t\t\t\t\t\t\t\t\titem.abstract.toLowerCase().indexOf(value.toLowerCase()) !== -1\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t\tconst country = this.filters.country.values.length ? this.filters.country.values[0] : null;\r\n\t\tconst search = this.filters.search.values.length ? this.filters.search.values[0] : null;\r\n\t\tthis.form.patch({ country, search });\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(filteredItems => {\r\n\t\t\tthis.filteredItems = filteredItems;\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t\t// console.log('NewsComponent.filteredItems', filteredItems.length);\r\n\t\t});\r\n\t}\r\n\r\n\tsetFilterByKeyAndValue(key, value) {\r\n\t\tconst filter = this.filters[key];\r\n\t\tif (filter) {\r\n\t\t\tif (filter.mode === FilterMode.QUERY) {\r\n\t\t\t\tfilter.set(value);\r\n\t\t\t} else {\r\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\r\n\t\t\t\t// console.log(filter.options, option);\r\n\t\t\t\tif (option) {\r\n\t\t\t\t\tfilter.set(option);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfilter.clear();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonSearch(model) {\r\n\t\t// console.log('NewsComponent.onSearch', this.form.value);\r\n\t\tthis.setFilterByKeyAndValue('country', this.form.value.country);\r\n\t\tthis.setFilterByKeyAndValue('search', this.form.value.search);\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tclearFilter(event, filter) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopImmediatePropagation();\r\n\t\tfilter.clear();\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nNewsComponent.meta = {\r\n\tselector: '[news]',\r\n};\r\n","import { ApiService } from '../../common/api/api.service';\r\n\r\nexport class NewsletterService {\r\n\r\n\tstatic data$() {\r\n\t\treturn ApiService.get$('/newsletter/data.json');\r\n\t}\r\n\r\n\tstatic submit$() {\r\n\t\treturn ApiService.post$('/newsletter/submit.json');\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocationService } from '../../common/location/location.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport { NewsletterService } from './newsletter.service';\r\n\r\nexport class NewsletterComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst email = LocationService.deserialize('email');\r\n\t\t// console.log('NewsletterComponent', email);\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tlastName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\temail: new FormControl(email, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\toccupation: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\ttelephone: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcountry: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcity: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tengagement: new FormControl(null),\r\n\t\t\tnewsletter: true,\r\n\t\t\tnewsletterLanguage: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tprivacy: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn NewsletterService.data$().pipe(\r\n\t\t\ttap(data => {\r\n\t\t\t\tconst controls = this.controls;\r\n\t\t\t\tcontrols.occupation.options = FormService.toSelectOptions(data.occupation.options);\r\n\t\t\t\tcontrols.country.options = FormService.toSelectOptions(data.country.options);\r\n\t\t\t\tcontrols.engagement.options = FormService.toSelectOptions(data.engagement.options);\r\n\t\t\t\tcontrols.newsletterLanguage.options = FormService.toSelectOptions(data.newsletterLanguage.options);\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tconst controls = this.controls;\r\n\t\tconst occupation = controls.occupation.options.length > 1 ? controls.occupation.options[1].id : null;\r\n\t\tconst country = controls.country.options.length > 1 ? controls.country.options[1].id : null;\r\n\t\tconst engagement = controls.engagement.options.length > 1 ? controls.engagement.options[1].id : null;\r\n\t\tconst newsletterLanguage = controls.newsletterLanguage.options.length > 1 ? controls.newsletterLanguage.options[1].id : null;\r\n\t\tform.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\ttelephone: '0721 411112',\r\n\t\t\toccupation: occupation,\r\n\t\t\tcountry: country,\r\n\t\t\tcity: 'Pesaro',\r\n\t\t\tengagement: engagement,\r\n\t\t\tnewsletterLanguage: newsletterLanguage,\r\n\t\t\tprivacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit(model) {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('NewsletterComponent.onSubmit', form.value);\r\n\t\t// console.log('NewsletterComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (form.valid) {\r\n\t\t\t// console.log('NewsletterComponent.onSubmit', form.value);\r\n\t\t\tform.submitted = true;\r\n\t\t\tNewsletterService.submit$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(_ => {\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tform.reset();\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Newsletter\",\r\n\t\t\t\t\t'form_name': \"Newsletter\"\r\n\t\t\t\t});\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('NewsletterComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nNewsletterComponent.meta = {\r\n\tselector: '[newsletter]',\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { first } from 'rxjs/operators';\r\nimport { LocationService } from '../../common/location/location.service';\r\nimport { environment } from '../../environment';\r\nimport { CartService } from '../../shared/cart/cart.service';\r\n\r\nconst breadcumbStyle = `font-size: .8rem; text-transform: uppercase; letter-spacing: 0.075em; color: #37393b; display: none;`;\r\nconst titleStyle = `letter-spacing: 0; font-family: 'Bauer Bodoni', sans-serif; font-size: 2.9rem; margin: 0;word-wrap: break-word;text-transform: uppercase;color:#37393b;`;\r\nconst designerStyle = `font-size: .8rem; letter-spacing: 0.075em;margin-bottom: 15px;word-wrap: break-word;text-transform: uppercase; display: none;`;\r\nconst descriptionStyle = `font-size: .8rem; text-align: left;margin-bottom: 15px; letter-spacing: 0.05em; display: none;`;\r\n\r\nexport class ProductsConfigureComponent extends Component {\r\n\r\n\tget showefyUrl() {\r\n\t\tif (this.codprod) {\r\n\t\t\treturn `https://www.showefy.com/showroom/giorgetti/?l=${environment.currentLanguage}&c=${environment.currentMarket.toLowerCase()}&list=P&codprod=${this.codprod}&autoEnter=1${this.sl ? `&ext&sl=${this.sl}` : ''}`;\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.codprod = LocationService.get('codprod');\r\n\t\tthis.sl = LocationService.get('sl');\r\n\t\tconsole.log(this.codprod);\r\n\t\tif (!this.codprod) {\r\n\t\t\tthrow ('ProductsConfigureComponent.error missing codprod');\r\n\t\t}\r\n\t\tthis.isReady = false;\r\n\t\tthis.isComplete = false;\r\n\t\tthis.isConfiguring = false;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst iframe = this.iframe = node.querySelector('#showefy');\r\n\t\tif (!iframe) {\r\n\t\t\tthrow ('missing iframe');\r\n\t\t}\r\n\t\tthis.onEvent = this.onEvent.bind(this);\r\n\r\n\t\t/*\r\n\t\tHttpService.http$('POST', 'https://www.showefy.com/en/ApiExt/token/v1', { grant_type: 'client_credentials' }, 'json', 'giorgetti:AGdW%Q_8@Pe,2&#').pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(response => {\r\n\t\t\tconsole.log(response);\r\n\t\t});\r\n\t\t*/\r\n\r\n\t\tconst sfy = this.sfy = new SFYFrame(iframe, this.token, this.onEvent);\r\n\t\tsfy.init();\r\n\t\tconsole.log('ProductsConfigureComponent.onInit', sfy, iframe);\r\n\t}\r\n\r\n\tgetIframeDocument(iframe) {\r\n\t\tconst content = iframe.contentWindow || iframe.contentDocument\r\n\t\tconst iframeDocument = content.document ? content.document : content;\r\n\t\treturn iframeDocument;\r\n\t}\r\n\r\n\tonEvent(data) {\r\n\t\tconst event = JSON.parse(data);\r\n\t\tconst eventName = event.emit;\r\n\t\tif (event.status == 0) {\r\n\t\t\t// console.log('ProductsConfigureComponent.onEvent', event);\r\n\t\t\tswitch (eventName) {\r\n\t\t\t\tcase 'showefy_ready':\r\n\t\t\t\t\tthis.onReady(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'showefy_complete':\r\n\t\t\t\t\tthis.onShowefyComplete(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'start_configurator':\r\n\t\t\t\t\tthis.onStartConfigurator(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'button_pressed':\r\n\t\t\t\t\tthis.onButtonPressed(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'setButtonStatus':\r\n\t\t\t\t\tthis.onSetButtonStatus(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'getIframeSize':\r\n\t\t\t\t\tthis.onGetIframeSize(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'getProductExtData':\r\n\t\t\t\t\tthis.onGetProductExtData(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'getFastProductExtData':\r\n\t\t\t\t\tthis.onGetFastProductExtData(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconsole.log('ProductsConfigureComponent.onEvent.error', event.status, event.statusTxt, eventName);\r\n\t\t}\r\n\t}\r\n\r\n\tonReady(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onReady', event);\r\n\t\tthis.isReady = true;\r\n\t\t// this.addTexts();\r\n\t\tthis.addButtons();\r\n\t\t// this.addBreadcrumb();\r\n\t}\r\n\r\n\tonShowefyComplete(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onShowefyComplete', event);\r\n\t\tif (this.isConfiguring) {\r\n\t\t\tthis.isComplete = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonStartConfigurator(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onStartConfigurator', event);\r\n\t\tthis.isConfiguring = true;\r\n\t}\r\n\r\n\tonButtonPressed(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onButtonPressed', event, 'buttonId', event.data.id);\r\n\t\tswitch (event.data.id) {\r\n\t\t\tcase 'order':\r\n\t\t\t\tthis.sfy.getProductExtData();\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tonSetButtonStatus(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onSetButtonStatus', event);\r\n\t}\r\n\r\n\tonGetIframeSize(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onGetIframeSize', event);\r\n\t}\r\n\r\n\tonGetProductExtData(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onGetProductExtData', event.status, event.data);\r\n\t\tif (event.status === 0) {\r\n\t\t\tthis.onAddToCart(event.data);\r\n\t\t}\r\n\t}\r\n\r\n\tonGetFastProductExtData(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onGetFastProductExtData', event.status, event.data);\r\n\t\tif (event.status === 0) {\r\n\t\t\tthis.onAddToCart(event.data);\r\n\t\t}\r\n\t}\r\n\r\n\t// methods\r\n\r\n\taddTexts() {\r\n\t\tconst sfy = this.sfy;\r\n\t\tconst html = sfy.HTML;\r\n\t\tlet index = 0;\r\n\t\thtml.text[index++] = /* html */`<h1 style=\"${titleStyle}\">Nome Prodotto</h1>`;\r\n\t\thtml.text[index++] = /* html */`<h5 style=\"${designerStyle}\">Designer</h5>`;\r\n\t\thtml.text[index++] = /* html */`<div style=\"${descriptionStyle}\"><p>Descrizione</p></div>`;\r\n\t\tsfy.printHTML(html);\r\n\t}\r\n\r\n\taddButtons() {\r\n\t\tconst sfy = this.sfy;\r\n\t\tconst buttons = sfy.BUTTONS;\r\n\r\n\t\tlet index = 0;\r\n\t\tbuttons.element[index] = new sfy.PROPERTIES();\r\n\t\tbuttons.element[index].visibility = true;\r\n\t\tbuttons.element[index].id = 'order';\r\n\t\tbuttons.element[index].label = new sfy.LABEL();\r\n\t\tbuttons.element[index].label.it = 'Aggiungi al carrello';\r\n\t\tbuttons.element[index].label.en = 'Add to cart';\r\n\t\tindex++;\r\n\r\n\t\t/*\r\n\t\tbuttons.element[index] = new sfy.PROPERTIES();\r\n\t\tbuttons.element[index].visibility = true;\r\n\t\tbuttons.element[index].id = 'save_configuration';\r\n\t\tbuttons.element[index].label = new sfy.LABEL();\r\n\t\tbuttons.element[index].label.en = 'SAVE CONFIGURATION';\r\n\t\tindex++;\r\n\t\t*/\r\n\r\n\t\tsfy.setButtonStatus(buttons);\r\n\t}\r\n\r\n\taddBreadcrumb() {\r\n\t\tconst sfy = this.sfy;\r\n\t\tconst breadcrumb = sfy.BREADCUMB;\r\n\r\n\t\tlet index = 0;\r\n\r\n\t\tbreadcrumb.element[index] = new sfy.PROPERTIES();\r\n\t\tbreadcrumb.element[index].visibility = true;\r\n\t\tbreadcrumb.element[index].id = 'breadcumb_home';\r\n\t\tbreadcrumb.element[index].label = new sfy.LABEL();\r\n\t\tbreadcrumb.element[index].label.en = /* html */` Home <span aria-hidden='true'>/</span>&nbsp; `;\r\n\t\tbreadcrumb.element[index].style = breadcumbStyle;\r\n\t\tindex++;\r\n\r\n\t\tbreadcrumb.element[index] = new sfy.PROPERTIES();\r\n\t\tbreadcrumb.element[index].visibility = true;\r\n\t\tbreadcrumb.element[index].id = 'breadcumb_products';\r\n\t\tbreadcrumb.element[index].label = new sfy.LABEL();\r\n\t\tbreadcrumb.element[index].label.en = /* html */` Products <span aria-hidden='true'>/</span>&nbsp; `;\r\n\t\tbreadcrumb.element[index].style = breadcumbStyle;\r\n\t\tindex++;\r\n\r\n\t\tbreadcrumb.element[index] = new sfy.PROPERTIES();\r\n\t\tbreadcrumb.element[index].visibility = true;\r\n\t\tbreadcrumb.element[index].id = 'breadcumb_products';\r\n\t\tbreadcrumb.element[index].label = new sfy.LABEL();\r\n\t\tbreadcrumb.element[index].label.en = /* html */` Nome prodotto`;\r\n\t\tbreadcrumb.element[index].style = breadcumbStyle;\r\n\t\tindex++;\r\n\r\n\t\tsfy.printBreadcumb(breadcrumb);\r\n\t}\r\n\r\n\tonAddToCart(data) {\r\n\t\tconst cartItem = this.product;\r\n\t\tcartItem.showefy = data;\r\n\t\tif (data.image) {\r\n\t\t\tcartItem.image = data.image;\r\n\t\t}\r\n\t\tconsole.log('ProductsConfigureComponent.onAddToCart', cartItem);\r\n\t\tCartService.addItem$(cartItem).pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n}\r\n\r\nProductsConfigureComponent.meta = {\r\n\tselector: '[products-configure]',\r\n\tinputs: ['token', 'product'],\r\n};\r\n","import { ApiService } from '../../common/api/api.service';\r\n\r\nexport class ProductsDetailService {\r\n\r\n\tstatic versions$() {\r\n\t\treturn ApiService.get$('/products-detail/versions.json');\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { first } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { environment } from '../../environment';\r\nimport { CartService } from '../../shared/cart/cart.service';\r\nimport { HeaderService } from '../../shared/header/header.service';\r\nimport { ProductsDetailService } from './products-detail.service';\r\n\r\nexport class ProductsDetailComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.items = [];\r\n\t\tthis.visibleItems = [];\r\n\t\tProductsDetailService.versions$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(items => {\r\n\t\t\tthis.items = items;\r\n\t\t\tthis.visibleItems = this.items.slice(0, Math.min(4, this.items.length));\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tisAddedToCart(item) {\r\n\t\treturn CartService.hasItem(item);\r\n\t}\r\n\r\n\tonAddToCart(item) {\r\n\t\tif (this.isAddedToCart(item)) {\r\n\t\t\tHeaderService.setHeader('cart');\r\n\t\t} else {\r\n\t\t\tCartService.addItem$(item).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(_ => {\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tscrollTo(id) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = node.querySelector(id);\r\n\t\tif (target) {\r\n\t\t\tLocomotiveScrollService.scrollTo(target, { offset: -200 });\r\n\t\t}\r\n\t}\r\n\r\n\tshowMore(event) {\r\n\t\tconst pageSize = 12;\r\n\t\tif (this.visibleItems.length + pageSize >= this.items.length) {\r\n\t\t\tthis.visibleItems = this.items.slice();\r\n\t\t} else {\r\n\t\t\tthis.visibleItems = this.items.slice(0, Math.min(this.visibleItems.length + pageSize, this.items.length));\r\n\t\t}\r\n\t\tthis.pushChanges();\r\n\t\tLocomotiveScrollService.update();\r\n\t}\r\n\r\n\tconfigureProduct(item) {\r\n\t\twindow.location.href = `${environment.slug.configureProduct}?codprod=${this.product.code}`;\r\n\t}\r\n}\r\n\r\nProductsDetailComponent.meta = {\r\n\tselector: '[products-detail]',\r\n\tinputs: ['product'],\r\n};\r\n","// import { combineLatest } from 'rxjs';\r\n// import { map } from 'rxjs/operators';\r\nimport { ApiService } from '../../common/api/api.service';\r\n\r\nexport class ProductsService {\r\n\r\n\tstatic all$() {\r\n\t\treturn ApiService.get$('/products/all.json');\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\treturn ApiService.get$('/products/filters.json');\r\n\t}\r\n\r\n\t/*\r\n\tstatic fake$() {\r\n\t\treturn combineLatest([ProductsService.all$(), ApiService.get$('/products/all_.json')]).pipe(\r\n\t\t\tmap(data => {\r\n\t\t\t\tconst items = data[0];\r\n\t\t\t\tconst items_ = data[1];\r\n\t\t\t\titems.forEach((item, i) => {\r\n\t\t\t\t\tconst other = items_.find(x => x.title === item.title);\r\n\t\t\t\t\tif (other) {\r\n\t\t\t\t\t\titem.category = {\r\n\t\t\t\t\t\t\tid: 1,\r\n\t\t\t\t\t\t\tname: other.url.replace('https://www.giorgettimeda.com/it/prodotti/', '').split('/')[0],\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(JSON.stringify(items));\r\n\t\t\t\treturn items;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\t*/\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup } from 'rxcomp-form';\r\nimport { combineLatest } from 'rxjs';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { FilterMode } from '../../common/filter/filter-item';\r\nimport { FilterService } from '../../common/filter/filter.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport { ProductsService } from './products.service';\r\n\r\nexport class ProductsComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.categoryId = this.categoryId || null;\r\n\t\tthis.items = [];\r\n\t\tthis.filteredItems = [];\r\n\t\tthis.filters = {};\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tcategory: new FormControl(null),\r\n\t\t\tambience: new FormControl(null),\r\n\t\t\tmaterial: new FormControl(null),\r\n\t\t\tdesigner: new FormControl(null),\r\n\t\t\tsearch: new FormControl(null),\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\t// console.log('ProductsComponent.changes$', form.value);\r\n\t\t\tthis.setFilterByKeyAndValue('category', form.value.category);\r\n\t\t\tthis.setFilterByKeyAndValue('ambience', form.value.ambience);\r\n\t\t\tthis.setFilterByKeyAndValue('material', form.value.material);\r\n\t\t\tthis.setFilterByKeyAndValue('designer', form.value.designer);\r\n\t\t\tthis.setFilterByKeyAndValue('search', form.value.search);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(data => {\r\n\t\t\tthis.items = data[0];\r\n\t\t\tthis.filters = data[1];\r\n\t\t\tcontrols.category.options = FormService.toSelectOptions(this.filters.category.options);\r\n\t\t\tcontrols.ambience.options = FormService.toSelectOptions(this.filters.ambience.options);\r\n\t\t\tcontrols.material.options = FormService.toSelectOptions(this.filters.material.options);\r\n\t\t\tcontrols.designer.options = FormService.toSelectOptions(this.filters.designer.options);\r\n\t\t\tthis.onLoad();\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tProductsService.all$(),\r\n\t\t\tProductsService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\tonLoad() {\r\n\t\tconst items = this.items;\r\n\t\tconst filters = this.filters;\r\n\t\tObject.keys(filters).forEach(key => {\r\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\r\n\t\t});\r\n\t\tconst initialParams = {};\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\tswitch (key) {\r\n\t\t\t\t\t\t\tcase 'category':\r\n\t\t\t\t\t\t\t\treturn item.category.id === value;\r\n\t\t\t\t\t\t\tcase 'ambience':\r\n\t\t\t\t\t\t\t\treturn item.ambience.id === value;\r\n\t\t\t\t\t\t\tcase 'material':\r\n\t\t\t\t\t\t\t\treturn item.materials.indexOf(value) !== -1;\r\n\t\t\t\t\t\t\tcase 'designer':\r\n\t\t\t\t\t\t\t\treturn item.designers.indexOf(value) !== -1;\r\n\t\t\t\t\t\t\tcase 'search':\r\n\t\t\t\t\t\t\t\treturn item.title.toLowerCase().indexOf(value.toLowerCase()) !== -1\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t\tconst category = this.categoryId ? this.categoryId : (this.filters.category.values.length ? this.filters.category.values[0] : null);\r\n\t\tconst ambience = this.filters.ambience.values.length ? this.filters.ambience.values[0] : null;\r\n\t\tconst material = this.filters.material.values.length ? this.filters.material.values[0] : null;\r\n\t\tconst designer = this.filters.designer.values.length ? this.filters.designer.values[0] : null;\r\n\t\tconst search = this.filters.search.values.length ? this.filters.search.values[0] : null;\r\n\t\tthis.form.patch({ category, ambience, material, designer, search });\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(filteredItems => {\r\n\t\t\tthis.filteredItems = filteredItems;\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t\t// console.log('ProductsComponent.filteredItems', filteredItems.length);\r\n\t\t});\r\n\t}\r\n\r\n\tsetFilterByKeyAndValue(key, value) {\r\n\t\tconst filter = this.filters[key];\r\n\t\tif (filter) {\r\n\t\t\tif (filter.mode === FilterMode.QUERY) {\r\n\t\t\t\tfilter.set(value);\r\n\t\t\t} else {\r\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\r\n\t\t\t\t// console.log(filter.options, option);\r\n\t\t\t\tif (option) {\r\n\t\t\t\t\tfilter.set(option);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfilter.clear();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonSearch(model) {\r\n\t\t// console.log('ProductsComponent.onSearch', this.form.value);\r\n\t\tthis.setFilterByKeyAndValue('category', this.form.value.category);\r\n\t\tthis.setFilterByKeyAndValue('ambience', this.form.value.ambience);\r\n\t\tthis.setFilterByKeyAndValue('material', this.form.value.material);\r\n\t\tthis.setFilterByKeyAndValue('designer', this.form.value.designer);\r\n\t\tthis.setFilterByKeyAndValue('search', this.form.value.search);\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tclearFilter(event, filter) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopImmediatePropagation();\r\n\t\tfilter.clear();\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nProductsComponent.meta = {\r\n\tselector: '[products]',\r\n\tinputs: ['categoryId'],\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalOutletComponent } from '../../common/modal/modal-outlet.component';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\n\r\nexport class ProjectsRegistrationModalComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tconst data = parentInstance.modal.data;\r\n\t\t}\r\n\t\tLocomotiveScrollService.stop();\r\n\t}\r\n\r\n\tonClose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tLocomotiveScrollService.start();\r\n\t}\r\n}\r\n\r\nProjectsRegistrationModalComponent.meta = {\r\n\tselector: '[projects-registration-modal]'\r\n};\r\n","import { ApiService } from '../../common/api/api.service';\r\n\r\nexport class ProjectsRegistrationService {\r\n\r\n\tstatic data$() {\r\n\t\treturn ApiService.get$('/projects-registration/data.json');\r\n\t}\r\n\r\n\tstatic submit$() {\r\n\t\treturn ApiService.get$('/projects-registration/submit.json');\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport { ProjectsRegistrationService } from './projects-registration.service';\r\n\r\nexport class ProjectsRegistrationComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tdealer: new FormGroup({\r\n\t\t\t\tfullName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tcountry: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tcity: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t}),\r\n\t\t\tclient: new FormGroup({\r\n\t\t\t\tfullName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tcountry: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tcity: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t}),\r\n\t\t\tarchitect: new FormGroup({\r\n\t\t\t\tfullName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tcountry: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tcity: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\t\ttelephone: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t}),\r\n\t\t\ttype: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tdestination: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tproducts: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tpicture: new FormControl(null),\r\n\t\t\tprivacy: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn ProjectsRegistrationService.data$().pipe(\r\n\t\t\ttap(data => {\r\n\t\t\t\tconst controls = this.controls;\r\n\t\t\t\tcontrols.dealer.controls.country.options = FormService.toSelectOptions(data.country.options);\r\n\t\t\t\tcontrols.client.controls.country.options = FormService.toSelectOptions(data.country.options);\r\n\t\t\t\tcontrols.architect.controls.country.options = FormService.toSelectOptions(data.country.options);\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tconst controls = this.controls;\r\n\t\tconst country = controls.dealer.controls.country.options.length > 1 ? controls.dealer.controls.country.options[1].id : null;\r\n\t\tform.patch({\r\n\t\t\tdealer: {\r\n\t\t\t\tfullName: 'Agente Jhon Appleseed',\r\n\t\t\t\tcountry: country,\r\n\t\t\t\tcity: 'Pesaro',\r\n\t\t\t},\r\n\t\t\tclient: {\r\n\t\t\t\tfullName: 'Cliente Jhon Appleseed',\r\n\t\t\t\tcountry: country,\r\n\t\t\t\tcity: 'Pesaro',\r\n\t\t\t},\r\n\t\t\tarchitect: {\r\n\t\t\t\tfullName: 'Architetto Jhon Appleseed',\r\n\t\t\t\tcountry: country,\r\n\t\t\t\tcity: 'Pesaro',\r\n\t\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\t\ttelephone: '0721411112',\r\n\t\t\t},\r\n\t\t\ttype: 'Hotel',\r\n\t\t\tdestination: 'Hospitality',\r\n\t\t\tproducts: 'Adam, Clop',\r\n\t\t\tprivacy: true,\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('ProjectsRegistrationComponent.onSubmit', form.value);\r\n\t\tif (form.valid) {\r\n\t\t\tform.submitted = true;\r\n\t\t\tProjectsRegistrationService.submit$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\tconsole.log('ProjectsRegistrationComponent.onSubmit', response);\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Project Registration\",\r\n\t\t\t\t\t'form_name': \"Registrazione Progetto\"\r\n\t\t\t\t});\r\n\t\t\t\tif (!this.isModal) {\r\n\t\t\t\t\tform.reset();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t}\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('ProjectsRegistrationComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tform.submitted = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonClose() {\r\n\t\tthis.close.next(this.form.value);\r\n\t}\r\n}\r\n\r\nProjectsRegistrationComponent.meta = {\r\n\tselector: '[projects-registration]',\r\n\toutputs: ['close'],\r\n\tinputs: ['isModal'],\r\n};\r\n","import { ApiService } from '../../common/api/api.service';\r\n\r\nexport class ProjectsService {\r\n\r\n\tstatic all$() {\r\n\t\treturn ApiService.get$('/projects/all.json');\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\treturn ApiService.get$('/projects/filters.json');\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup } from 'rxcomp-form';\r\nimport { combineLatest } from 'rxjs';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { FilterMode } from '../../common/filter/filter-item';\r\nimport { FilterService } from '../../common/filter/filter.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport { ProjectsService } from './projects.service';\r\n\r\nexport class ProjectsComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.items = [];\r\n\t\tthis.filteredItems = [];\r\n\t\tthis.filters = {};\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tcategory: new FormControl(null),\r\n\t\t\tsearch: new FormControl(null),\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\t// console.log('ProjectsComponent.changes$', form.value);\r\n\t\t\tthis.setFilterByKeyAndValue('category', form.value.category);\r\n\t\t\tthis.setFilterByKeyAndValue('search', form.value.search);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(data => {\r\n\t\t\tthis.items = data[0];\r\n\t\t\tthis.filters = data[1];\r\n\t\t\tcontrols.category.options = FormService.toSelectOptions(this.filters.category.options);\r\n\t\t\tthis.onLoad();\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tProjectsService.all$(),\r\n\t\t\tProjectsService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\tonLoad() {\r\n\t\tconst items = this.items;\r\n\t\tconst filters = this.filters;\r\n\t\tObject.keys(filters).forEach(key => {\r\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\r\n\t\t});\r\n\t\tconst initialParams = {};\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\tswitch (key) {\r\n\t\t\t\t\t\t\tcase 'category':\r\n\t\t\t\t\t\t\t\treturn item.category.id === value;\r\n\t\t\t\t\t\t\tcase 'search':\r\n\t\t\t\t\t\t\t\treturn item.title.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\r\n\t\t\t\t\t\t\t\t\titem.country.toLowerCase().indexOf(value.toLowerCase()) !== -1\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t\tconst category = this.filters.category.values.length ? this.filters.category.values[0] : null;\r\n\t\tconst search = this.filters.search.values.length ? this.filters.search.values[0] : null;\r\n\t\tthis.form.patch({ category, search });\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(filteredItems => {\r\n\t\t\tthis.filteredItems = filteredItems;\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t\t// console.log('ProjectsComponent.filteredItems', filteredItems.length);\r\n\t\t});\r\n\t}\r\n\r\n\tsetFilterByKeyAndValue(key, value) {\r\n\t\tconst filter = this.filters[key];\r\n\t\tif (filter) {\r\n\t\t\tif (filter.mode === FilterMode.QUERY) {\r\n\t\t\t\tfilter.set(value);\r\n\t\t\t} else {\r\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\r\n\t\t\t\t// console.log(filter.options, option);\r\n\t\t\t\tif (option) {\r\n\t\t\t\t\tfilter.set(option);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfilter.clear();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonSearch(model) {\r\n\t\t// console.log('ProjectsComponent.onSearch', this.form.value);\r\n\t\tthis.setFilterByKeyAndValue('category', this.form.value.category);\r\n\t\tthis.setFilterByKeyAndValue('search', this.form.value.search);\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tclearFilter(event, filter) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopImmediatePropagation();\r\n\t\tfilter.clear();\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nProjectsComponent.meta = {\r\n\tselector: '[projects]',\r\n};\r\n","import { BehaviorSubject, of } from 'rxjs';\r\nimport { map, switchMap } from 'rxjs/operators';\r\nimport { LocalStorageService } from '../../common/storage/local-storage.service';\r\n\r\nexport class FilesService {\r\n\r\n\tstatic files$_ = new BehaviorSubject([]);\r\n\r\n\tstatic get currentFiles() {\r\n\t\treturn this.files$_.getValue();\r\n\t}\r\n\r\n\tstatic hasFile(file) {\r\n\t\tconst files = this.currentFiles;\r\n\t\tconst index = files.reduce((p, c, i) => {\r\n\t\t\treturn p !== -1 ? p : (c.id === file.id ? i : p);\r\n\t\t}, -1);\r\n\t\treturn index !== -1;\r\n\t}\r\n\r\n\tstatic setFiles(files) {\r\n\t\tif (files) {\r\n\t\t\tLocalStorageService.set('files', files);\r\n\t\t} else {\r\n\t\t\tLocalStorageService.delete('files');\r\n\t\t}\r\n\t\tthis.files$_.next(files);\r\n\t}\r\n\r\n\tstatic files$() {\r\n\t\tconst localFiles = LocalStorageService.get('files') || [];\r\n\t\treturn of(localFiles).pipe(\r\n\t\t\tswitchMap(files => {\r\n\t\t\t\tthis.setFiles(files);\r\n\t\t\t\treturn this.files$_;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic addFile$(file) {\r\n\t\treturn of(file).pipe(\r\n\t\t\tmap(file => {\r\n\t\t\t\tconst files = this.currentFiles.slice();\r\n\t\t\t\tconst index = files.reduce((p, c, i) => {\r\n\t\t\t\t\treturn p !== -1 ? p : (c.id === file.id ? i : p);\r\n\t\t\t\t}, -1);\r\n\t\t\t\tif (index === -1) {\r\n\t\t\t\t\tfiles.push(file);\r\n\t\t\t\t\tthis.setFiles(files);\r\n\t\t\t\t\treturn file;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic removeFile$(file) {\r\n\t\treturn of(file).pipe(\r\n\t\t\tmap(file => {\r\n\t\t\t\tconst files = this.currentFiles.slice();\r\n\t\t\t\tconst index = files.reduce((p, c, i) => {\r\n\t\t\t\t\treturn p !== -1 ? p : (c.id === file.id ? i : p);\r\n\t\t\t\t}, -1);\r\n\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\tfiles.splice(index, 1);\r\n\t\t\t\t\tthis.setFiles(files);\r\n\t\t\t\t\treturn file;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic removeAll$() {\r\n\t\treturn of([]).pipe(\r\n\t\t\tmap(files => {\r\n\t\t\t\tthis.setFiles(files);\r\n\t\t\t\treturn files;\r\n\t\t\t}),\r\n\t\t)\r\n\t}\r\n\r\n}\r\n","import { combineLatest } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { ApiService } from '../../common/api/api.service';\r\nimport { FilesService } from '../../shared/files/files.service';\r\n\r\nexport class ReservedAreaService {\r\n\r\n\tstatic all$() {\r\n\t\treturn ApiService.get$('/reserved-area/all.json').pipe(\r\n\t\t\tmap(items => {\r\n\t\t\t\titems.forEach(x => {\r\n\t\t\t\t\tx.title = ReservedAreaService.toTitleCase(x.title.replace(/_/g, ' '));\r\n\t\t\t\t});\r\n\t\t\t\treturn items;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic all_$() {\r\n\t\treturn combineLatest([ReservedAreaService.get$(), FilesService.files$()]).pipe(\r\n\t\t\tmap(data => {\r\n\t\t\t\tconst items = data[0];\r\n\t\t\t\tconst files = data[1];\r\n\t\t\t\titems.forEach(item => {\r\n\t\t\t\t\tif (files.find(x => x.id === item.id)) {\r\n\t\t\t\t\t\titem.added = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\titem.added = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn items;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic toTitleCase(sentence, seps = ' _-/') {\r\n\t\tconst capitalize = str => str.length ? str[0].toUpperCase() + str.slice(1).toLowerCase() : '';\r\n\t\tconst escape = str => str.replace(/./g, c => `\\\\${c}`);\r\n\t\tlet wordPattern = new RegExp(`[^${escape(seps)}]+`, 'g');\r\n\t\treturn sentence.replace(wordPattern, capitalize);\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\nimport { environment } from '../../environment';\r\nimport { FilesService } from '../../shared/files/files.service';\r\nimport { UserService } from '../../shared/user/user.service';\r\nimport { ReservedAreaService } from './reserved-area.service';\r\n\r\nexport class ReservedAreaComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.user = undefined;\r\n\t\tthis.items = [];\r\n\t\tthis.tree = [];\r\n\t\tthis.files = [];\r\n\t\tthis.visibleFiles = [];\r\n\t\tthis.item = null;\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t\tUserService.me$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(user => {\r\n\t\t\tconsole.log('ReservedAreaComponent.user', user);\r\n\t\t\tthis.user = user;\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn ReservedAreaService.all$().pipe(\r\n\t\t\ttap(items => {\r\n\t\t\t\tthis.items = items;\r\n\t\t\t\tthis.tree = this.getTree(items);\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tgetTree(items, parentId) {\r\n\t\tlet tree = items.filter(x => x.parentId === parentId && x.type === 'folder').map(x => {\r\n\t\t\tconst item = Object.assign({}, x);\r\n\t\t\titem.items = this.getTree(items, x.id);\r\n\t\t\treturn item;\r\n\t\t});\r\n\t\treturn tree;\r\n\t}\r\n\r\n\tonOpen(item) {\r\n\t\tif (item.active) {\r\n\t\t\tthis.item = item;\r\n\t\t\tthis.files = this.items.filter(x => x.type === 'file' && x.parentId === item.id);\r\n\t\t\tthis.visibleFiles = this.files.slice(0, Math.min(8, this.files.length));\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t}\r\n\t}\r\n\r\n\tshowMore(event) {\r\n\t\tconst pageSize = 32;\r\n\t\tif (this.visibleFiles.length + pageSize >= this.files.length) {\r\n\t\t\tthis.visibleFiles = this.files.slice();\r\n\t\t} else {\r\n\t\t\tthis.visibleFiles = this.files.slice(0, Math.min(this.visibleFiles.length + pageSize, this.files.length));\r\n\t\t}\r\n\t\tthis.pushChanges();\r\n\t\tLocomotiveScrollService.update();\r\n\t}\r\n\r\n\tonProjectRegistration(event) {\r\n\t\tModalService.open$({ src: environment.template.modal.projectsRegistrationModal }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tconsole.log('ReservedAreaComponent.onProjectRegistration', event);\r\n\t\t});\r\n\t}\r\n\r\n\tonToggleFile(file) {\r\n\t\t(this.isAddedToFiles(file) ? FilesService.removeFile$(file) : FilesService.addFile$(file)).pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(_ => {\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tisAddedToFiles(file) {\r\n\t\treturn FilesService.hasFile(file);\r\n\t}\r\n\r\n}\r\n\r\nReservedAreaComponent.meta = {\r\n\tselector: '[reserved-area]',\r\n};\r\n","import { map } from 'rxjs/operators';\r\nimport { ApiService } from '../../common/api/api.service';\r\n\r\nexport class StoreLocatorService {\r\n\r\n\tstatic all$() {\r\n\t\treturn ApiService.get$('/store-locator/all.json').pipe(\r\n\t\t\tmap(items => items.sort((a, b) => {\r\n\t\t\t\treturn a.rank - b.rank;\r\n\t\t\t})),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\treturn ApiService.get$('/store-locator/filters.json');\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup } from 'rxcomp-form';\r\nimport { combineLatest } from 'rxjs';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { FilterMode } from '../../common/filter/filter-item';\r\nimport { FilterService } from '../../common/filter/filter.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport { StoreLocatorService } from './store-locator.service';\r\n\r\nexport class StoreLocatorComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.items = [];\r\n\t\tthis.filteredItems = [];\r\n\t\tthis.visibleItems = [];\r\n\t\tthis.filters = {};\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tcountry: new FormControl(null),\r\n\t\t\tcategory: new FormControl(null),\r\n\t\t\tsearch: new FormControl(null),\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\t// console.log('StoreLocatorComponent.changes$', form.value);\r\n\t\t\tthis.setFilterByKeyAndValue('country', form.value.country);\r\n\t\t\tthis.setFilterByKeyAndValue('category', form.value.category);\r\n\t\t\tthis.setFilterByKeyAndValue('search', form.value.search);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(data => {\r\n\t\t\tthis.items = data[0];\r\n\t\t\tthis.filters = data[1];\r\n\t\t\tcontrols.country.options = FormService.toSelectOptions(this.filters.country.options);\r\n\t\t\tcontrols.category.options = FormService.toSelectOptions(this.filters.category.options);\r\n\t\t\tthis.onLoad();\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tStoreLocatorService.all$(),\r\n\t\t\tStoreLocatorService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\tonLoad() {\r\n\t\tconst items = this.items;\r\n\t\tconst filters = this.filters;\r\n\t\tObject.keys(filters).forEach(key => {\r\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\r\n\t\t});\r\n\t\tconst initialParams = {};\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\tswitch (key) {\r\n\t\t\t\t\t\t\tcase 'country':\r\n\t\t\t\t\t\t\t\treturn item.country && item.country.id === value;\r\n\t\t\t\t\t\t\tcase 'category':\r\n\t\t\t\t\t\t\t\treturn item.category && item.category.id === value;\r\n\t\t\t\t\t\t\tcase 'search':\r\n\t\t\t\t\t\t\t\treturn item.name.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\r\n\t\t\t\t\t\t\t\t\t// item.address.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\r\n\t\t\t\t\t\t\t\t\titem.city.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\r\n\t\t\t\t\t\t\t\t\titem.country.name.toLowerCase().indexOf(value.toLowerCase()) !== -1\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t\tconst country = this.filters.country.values.length ? this.filters.country.values[0] : null;\r\n\t\tconst category = this.filters.category.values.length ? this.filters.category.values[0] : null;\r\n\t\tconst search = this.filters.search.values.length ? this.filters.search.values[0] : null;\r\n\t\tthis.form.patch({ country, category, search });\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(filteredItems => {\r\n\t\t\tthis.filteredItems = filteredItems;\r\n\t\t\tthis.visibleItems = filteredItems.slice(0, Math.min(12, filteredItems.length));\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t\t// console.log('StoreLocatorComponent.filteredItems', filteredItems.length);\r\n\t\t});\r\n\t}\r\n\r\n\tshowMore(event) {\r\n\t\tconst pageSize = 32;\r\n\t\tif (this.visibleItems.length + pageSize >= this.filteredItems.length) {\r\n\t\t\tthis.visibleItems = this.filteredItems.slice();\r\n\t\t} else {\r\n\t\t\tthis.visibleItems = this.filteredItems.slice(0, Math.min(this.visibleItems.length + pageSize, this.filteredItems.length));\r\n\t\t}\r\n\t\tthis.pushChanges();\r\n\t\tLocomotiveScrollService.update();\r\n\t}\r\n\r\n\tsetFilterByKeyAndValue(key, value) {\r\n\t\tconst filter = this.filters[key];\r\n\t\tif (filter) {\r\n\t\t\tif (filter.mode === FilterMode.QUERY) {\r\n\t\t\t\tfilter.set(value);\r\n\t\t\t} else {\r\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\r\n\t\t\t\t// console.log(filter.options, option);\r\n\t\t\t\tif (option) {\r\n\t\t\t\t\tfilter.set(option);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfilter.clear();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonSearch(model) {\r\n\t\t// console.log('StoreLocatorComponent.onSearch', this.form.value);\r\n\t\tthis.setFilterByKeyAndValue('country', this.form.value.country);\r\n\t\tthis.setFilterByKeyAndValue('category', this.form.value.category);\r\n\t\tthis.setFilterByKeyAndValue('search', this.form.value.search);\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tclearFilter(event, filter) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopImmediatePropagation();\r\n\t\tfilter.clear();\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nStoreLocatorComponent.meta = {\r\n\tselector: '[store-locator]',\r\n};\r\n","/**\n * Copyright 2019 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface OverlayViewSafe extends google.maps.OverlayView {}\n\n/**\n * Extends an object's prototype by another's.\n *\n * @param type1 The Type to be extended.\n * @param type2 The Type to extend with.\n * @ignore\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction extend(type1: any, type2: any): void {\n  // eslint-disable-next-line prefer-const\n  for (let property in type2.prototype) {\n    type1.prototype[property] = type2.prototype[property];\n  }\n}\n\n/**\n * @ignore\n */\nexport class OverlayViewSafe {\n  constructor() {\n    // MarkerClusterer implements google.maps.OverlayView interface. We use the\n    // extend function to extend MarkerClusterer with google.maps.OverlayView\n    // because it might not always be available when the code is defined so we\n    // look for it at the last possible moment. If it doesn't exist now then\n    // there is no point going ahead :)\n    extend(OverlayViewSafe, google.maps.OverlayView);\n  }\n}\n","/**\n * Copyright 2019 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * This class represents the object for values in the `styles` array passed\n * to the {@link MarkerClusterer} constructor. The element in this array that is used to\n * style the cluster icon is determined by calling the `calculator` function.\n */\nimport { Cluster } from \"./cluster\";\nimport { OverlayViewSafe } from \"./overlay-view-safe\";\n\n/**\n *\n * @hidden\n */\nfunction toCssText(styles: { [key: string]: string }): string {\n  return Object.keys(styles)\n    .reduce((acc, key) => {\n      if (styles[key]) {\n        acc.push(key + \":\" + styles[key]);\n      }\n      return acc;\n    }, [])\n    .join(\";\");\n}\n\n/**\n *\n * @hidden\n */\nfunction coercePixels(pixels: number): string {\n  return pixels ? pixels + \"px\" : undefined;\n}\n\nexport interface ClusterIconStyle {\n  /** The URL of the cluster icon image file. If not set, img element will not be created */\n  url?: string;\n  /** The name of the CSS class defining styles for the cluster markers. */\n  className?: string;\n  /** Height The display height (in pixels) of the cluster icon. Required. */\n  height: number;\n  /** Width The display width (in pixels) of the cluster icon. Required. */\n  width: number;\n  /**\n   * The position (in pixels) from the center of the cluster icon to\n   * where the text label is to be centered and drawn. The format is `[yoffset, xoffset]`\n   * where `yoffset` increases as you go down from center and `xoffset`\n   * increases to the right of center. The default is `[0, 0]`.\n   */\n  anchorText?: [number, number];\n  /**\n   * The anchor position (in pixels) of the cluster icon. This is the\n   * spot on the cluster icon that is to be aligned with the cluster position. The format is\n   * `[yoffset, xoffset]` where `yoffset` increases as you go down and\n   * `xoffset` increases to the right of the top-left corner of the icon. The default\n   * anchor position is the center of the cluster icon.\n   */\n  anchorIcon?: [number, number];\n  /**\n   * The color of the label text shown on the cluster icon.\n   * @default `\"black\"`\n   */\n  textColor?: string;\n  /** The size (in pixels) of the label text shown on the cluster icon.\n   * @default `11`\n   */\n  textSize?: number;\n\n  /** The line height (in pixels) of the label text shown on the cluster icon.\n   * @default the same as cluster icon height\n   */\n  textLineHeight?: number;\n  /**\n   * The value of the CSS `text-decoration`\n   * property for the label text shown on the cluster icon.\n   *\n   * @default `\"none\"`\n   */\n  textDecoration?: string;\n  /**\n   * The value of the CSS `font-weight`\n   * property for the label text shown on the cluster icon.\n   *\n   *  @default `\"bold\"`\n   */\n  fontWeight?: string;\n  /**\n   *  The value of the CSS `font-style`\n   *  property for the label text shown on the cluster icon.\n   *\n   *  @default `\"normal\"`\n   */\n  fontStyle?: string;\n  /**\n   *  The value of the CSS `font-family`\n   *  property for the label text shown on the cluster icon.\n   *  @default `\"Arial,sans-serif\"`\n   */\n  fontFamily?: string;\n  /**\n   * The position of the cluster icon image\n   * within the image defined by `url`. The format is `\"xpos ypos\"`\n   * (the same format as for the CSS `background-position` property). You must set\n   * this property appropriately when the image defined by `url` represents a sprite\n   * containing multiple images. Note that the position <i>must</i> be specified in px units.\n   *\n   * @default `\"0 0\"`\n   */\n  backgroundPosition?: string;\n}\n\n/**\n * @description This is an object containing general information about a cluster icon. This is\n *  the object that a `calculator` function returns.\n */\nexport interface ClusterIconInfo {\n  /**\n   * The text of the label to be shown on the cluster icon.\n   */\n  text: string;\n  /**\n   * The index plus 1 of the element in the `styles`\n   */\n  index: number;\n  /**\n   * The tooltip to display when the mouse moves over the cluster icon.\n   * If this value is `undefined` or `\"\"`, `title` is set to the\n   * value of the `title` property passed to the MarkerClusterer.\n   */\n  title: string;\n  /**\n   * An override for dynamic cluster icon url (if not provided, the component will use the default style icon)\n   */\n  url?: string;\n}\n\n/**\n * A cluster icon.\n */\nexport class ClusterIcon extends OverlayViewSafe {\n  private className_: string;\n  private center_: google.maps.LatLng = null;\n  private div_: HTMLDivElement = null;\n  private sums_: ClusterIconInfo = null;\n  private visible_ = false;\n\n  private style: ClusterIconStyle = null;\n\n  private anchorText_: [number, number];\n  private anchorIcon_: [number, number];\n\n  private boundsChangedListener_: google.maps.MapsEventListener;\n\n  /**\n   * @param cluster_ The cluster with which the icon is to be associated.\n   * @param styles_ An array of {@link ClusterIconStyle} defining the cluster icons\n   *  to use for various cluster sizes.\n   */\n  constructor(private cluster_: Cluster, private styles_: ClusterIconStyle[]) {\n    super();\n\n    this.setMap(cluster_.getMap()); // Note: this causes onAdd to be called\n  }\n\n  /**\n   * Adds the icon to the DOM.\n   */\n  onAdd(): void {\n    let cMouseDownInCluster: boolean;\n    let cDraggingMapByCluster: boolean;\n\n    const mc = this.cluster_.getMarkerClusterer();\n\n    const [major, minor] = google.maps.version.split(\".\");\n\n    const gmVersion = parseInt(major, 10) * 100 + parseInt(minor, 10);\n\n    this.div_ = document.createElement(\"div\");\n    if (this.visible_) {\n      this.show();\n    }\n\n    this.getPanes().overlayMouseTarget.appendChild(this.div_);\n\n    // Fix for Issue 157\n    this.boundsChangedListener_ = google.maps.event.addListener(\n      this.getMap(),\n      \"bounds_changed\",\n      () => {\n        cDraggingMapByCluster = cMouseDownInCluster;\n      }\n    );\n\n    google.maps.event.addDomListener(this.div_, \"mousedown\", () => {\n      cMouseDownInCluster = true;\n      cDraggingMapByCluster = false;\n    });\n\n    // March 1, 2018: Fix for this 3.32 exp bug, https://issuetracker.google.com/issues/73571522\n    // But it doesn't work with earlier releases so do a version check.\n    if (gmVersion >= 332) {\n      // Ugly version-dependent code\n      google.maps.event.addDomListener(this.div_, \"touchstart\", (e: Event) => {\n        e.stopPropagation();\n      });\n    }\n\n    google.maps.event.addDomListener(this.div_, \"click\", (e: Event) => {\n      cMouseDownInCluster = false;\n      if (!cDraggingMapByCluster) {\n        /**\n         * This event is fired when a cluster marker is clicked.\n         * @name MarkerClusterer#click\n         * @param {Cluster} c The cluster that was clicked.\n         * @event\n         */\n        google.maps.event.trigger(mc, \"click\", this.cluster_);\n        google.maps.event.trigger(mc, \"clusterclick\", this.cluster_); // deprecated name\n\n        // The default click handler follows. Disable it by setting\n        // the zoomOnClick property to false.\n        if (mc.getZoomOnClick()) {\n          // Zoom into the cluster.\n          const mz = mc.getMaxZoom();\n          const theBounds = this.cluster_.getBounds();\n          (mc.getMap() as google.maps.Map).fitBounds(theBounds);\n          // There is a fix for Issue 170 here:\n          setTimeout(() => {\n            (mc.getMap() as google.maps.Map).fitBounds(theBounds);\n            // Don't zoom beyond the max zoom level\n            if (mz !== null && mc.getMap().getZoom() > mz) {\n              mc.getMap().setZoom(mz + 1);\n            }\n          }, 100);\n        }\n\n        // Prevent event propagation to the map:\n        e.cancelBubble = true;\n        if (e.stopPropagation) {\n          e.stopPropagation();\n        }\n      }\n    });\n\n    google.maps.event.addDomListener(this.div_, \"mouseover\", () => {\n      /**\n       * This event is fired when the mouse moves over a cluster marker.\n       * @name MarkerClusterer#mouseover\n       * @param {Cluster} c The cluster that the mouse moved over.\n       * @event\n       */\n      google.maps.event.trigger(mc, \"mouseover\", this.cluster_);\n    });\n\n    google.maps.event.addDomListener(this.div_, \"mouseout\", () => {\n      /**\n       * This event is fired when the mouse moves out of a cluster marker.\n       * @name MarkerClusterer#mouseout\n       * @param {Cluster} c The cluster that the mouse moved out of.\n       * @event\n       */\n      google.maps.event.trigger(mc, \"mouseout\", this.cluster_);\n    });\n  }\n\n  /**\n   * Removes the icon from the DOM.\n   */\n  onRemove(): void {\n    if (this.div_ && this.div_.parentNode) {\n      this.hide();\n      google.maps.event.removeListener(this.boundsChangedListener_);\n      google.maps.event.clearInstanceListeners(this.div_);\n      this.div_.parentNode.removeChild(this.div_);\n      this.div_ = null;\n    }\n  }\n\n  /**\n   * Draws the icon.\n   */\n  draw(): void {\n    if (this.visible_) {\n      const pos = this.getPosFromLatLng_(this.center_);\n      this.div_.style.top = pos.y + \"px\";\n      this.div_.style.left = pos.x + \"px\";\n    }\n  }\n\n  /**\n   * Hides the icon.\n   */\n  hide(): void {\n    if (this.div_) {\n      this.div_.style.display = \"none\";\n    }\n    this.visible_ = false;\n  }\n\n  /**\n   * Positions and shows the icon.\n   */\n  show(): void {\n    if (this.div_) {\n      this.div_.className = this.className_;\n      this.div_.style.cssText = this.createCss_(\n        this.getPosFromLatLng_(this.center_)\n      );\n\n      this.div_.innerHTML =\n        (this.style.url ? this.getImageElementHtml() : \"\") +\n        this.getLabelDivHtml();\n\n      if (typeof this.sums_.title === \"undefined\" || this.sums_.title === \"\") {\n        this.div_.title = this.cluster_.getMarkerClusterer().getTitle();\n      } else {\n        this.div_.title = this.sums_.title;\n      }\n      this.div_.style.display = \"\";\n    }\n    this.visible_ = true;\n  }\n\n  private getLabelDivHtml(): string {\n    const mc = this.cluster_.getMarkerClusterer();\n    const ariaLabel = mc.ariaLabelFn(this.sums_.text);\n\n    const divStyle: { [key: string]: string } = {\n      position: \"absolute\",\n      top: coercePixels(this.anchorText_[0]),\n      left: coercePixels(this.anchorText_[1]),\n      color: this.style.textColor,\n      \"font-size\": coercePixels(this.style.textSize),\n      \"font-family\": this.style.fontFamily,\n      \"font-weight\": this.style.fontWeight,\n      \"font-style\": this.style.fontStyle,\n      \"text-decoration\": this.style.textDecoration,\n      \"text-align\": \"center\",\n      width: coercePixels(this.style.width),\n      \"line-height\": coercePixels(this.style.textLineHeight),\n    };\n\n    return `\n<div aria-label=\"${ariaLabel}\" style=\"${toCssText(divStyle)}\" tabindex=\"0\">\n  <span aria-hidden=\"true\">${this.sums_.text}</span>\n</div>\n`;\n  }\n\n  private getImageElementHtml(): string {\n    // NOTE: values must be specified in px units\n    const bp = (this.style.backgroundPosition || \"0 0\").split(\" \");\n    const spriteH = parseInt(bp[0].replace(/^\\s+|\\s+$/g, \"\"), 10);\n    const spriteV = parseInt(bp[1].replace(/^\\s+|\\s+$/g, \"\"), 10);\n\n    let dimensions: { [key: string]: string } = {};\n\n    if (this.cluster_.getMarkerClusterer().getEnableRetinaIcons()) {\n      dimensions = {\n        width: coercePixels(this.style.width),\n        height: coercePixels(this.style.height),\n      };\n    } else {\n      const [Y1, X1, Y2, X2] = [\n        -1 * spriteV,\n        -1 * spriteH + this.style.width,\n        -1 * spriteV + this.style.height,\n        -1 * spriteH,\n      ];\n      dimensions = {\n        clip: `rect(${Y1}px, ${X1}px, ${Y2}px, ${X2}px)`,\n      };\n    }\n\n    const overrideDimensionsDynamicIcon = this.sums_.url\n      ? { width: \"100%\", height: \"100%\" }\n      : {};\n\n    const cssText = toCssText({\n      position: \"absolute\",\n      top: coercePixels(spriteV),\n      left: coercePixels(spriteH),\n      ...dimensions,\n      ...overrideDimensionsDynamicIcon,\n    });\n\n    return `<img alt=\"${this.sums_.text}\" aria-hidden=\"true\" src=\"${this.style.url}\" style=\"${cssText}\"/>`;\n  }\n\n  /**\n   * Sets the icon styles to the appropriate element in the styles array.\n   *\n   * @ignore\n   * @param sums The icon label text and styles index.\n   */\n  useStyle(sums: ClusterIconInfo): void {\n    this.sums_ = sums;\n    let index = Math.max(0, sums.index - 1);\n    index = Math.min(this.styles_.length - 1, index);\n    this.style = this.sums_.url\n      ? { ...this.styles_[index], url: this.sums_.url }\n      : this.styles_[index];\n\n    this.anchorText_ = this.style.anchorText || [0, 0];\n    this.anchorIcon_ = this.style.anchorIcon || [\n      Math.floor(this.style.height / 2),\n      Math.floor(this.style.width / 2),\n    ];\n\n    this.className_ =\n      this.cluster_.getMarkerClusterer().getClusterClass() +\n      \" \" +\n      (this.style.className || \"cluster-\" + index);\n  }\n\n  /**\n   * Sets the position at which to center the icon.\n   *\n   * @param center The latlng to set as the center.\n   */\n  setCenter(center: google.maps.LatLng): void {\n    this.center_ = center;\n  }\n\n  /**\n   * Creates the `cssText` style parameter based on the position of the icon.\n   *\n   * @param pos The position of the icon.\n   * @return The CSS style text.\n   */\n  private createCss_(pos: google.maps.Point): string {\n    return toCssText({\n      \"z-index\": `${this.cluster_.getMarkerClusterer().getZIndex()}`,\n      top: coercePixels(pos.y),\n      left: coercePixels(pos.x),\n      width: coercePixels(this.style.width),\n      height: coercePixels(this.style.height),\n      cursor: \"pointer\",\n      position: \"absolute\",\n      \"-webkit-user-select\": \"none\",\n      \"-khtml-user-select\": \"none\",\n      \"-moz-user-select\": \"none\",\n      \"-o-user-select\": \"none\",\n      \"user-select\": \"none\",\n    });\n  }\n\n  /**\n   * Returns the position at which to place the DIV depending on the latlng.\n   *\n   * @param latlng The position in latlng.\n   * @return The position in pixels.\n   */\n  private getPosFromLatLng_(latlng: google.maps.LatLng): google.maps.Point {\n    const pos = this.getProjection().fromLatLngToDivPixel(latlng);\n    pos.x = Math.floor(pos.x - this.anchorIcon_[1]);\n    pos.y = Math.floor(pos.y - this.anchorIcon_[0]);\n    return pos;\n  }\n}\n","import MarkerClusterer from '@googlemaps/markerclustererplus';\r\nimport { Component, getContext } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\nimport { MAP_STYLE } from './map.style';\r\n\r\nconst USE_CLUSTERER = true;\r\n\r\nlet GOOGLE_MAPS;\r\n\r\nexport class MapComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst apiKey = environment.googleMaps.apiKey;\r\n\t\tif (GOOGLE_MAPS != null) {\r\n\t\t\tthis.initMap();\r\n\t\t} else {\r\n\t\t\twindow.onGoogleMapsLoaded = () => {\r\n\t\t\t\tGOOGLE_MAPS = window.google.maps;\r\n\t\t\t\tthis.initMap();\r\n\t\t\t};\r\n\t\t\tconst script = document.createElement('script');\r\n\t\t\tscript.setAttribute('type', 'text/javascript');\r\n\t\t\tscript.setAttribute('src', `https://maps.googleapis.com/maps/api/js?callback=onGoogleMapsLoaded${apiKey ? `&key=${apiKey}` : ''}&libraries=places`);\r\n\t\t\t(document.getElementsByTagName('head')[0] || document.documentElement).appendChild(script);\r\n\t\t}\r\n\t}\r\n\r\n\tinitMap() {\r\n\t\tconst google = window.google;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst center = this.center;\r\n\r\n\t\tconst item = this.items && this.items.length ? this.items[0] : null;\r\n\r\n\t\tconst position = item ? new google.maps.LatLng(item.latitude, item.longitude) : null;\r\n\r\n\t\tconst mapOptions = {\r\n\t\t\tzoom: 15, // 9,\r\n\t\t\tcenter: position,\r\n\r\n\t\t\tscrollwheel: false,\r\n\t\t\t// mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n\t\t\tzoomControlOptions: {\r\n\t\t\t\tstyle: google.maps.ZoomControlStyle.DEFAULT\r\n\t\t\t},\r\n\t\t\t// overviewMapControl: true,\r\n\r\n\t\t\tscaleControl: false,\r\n\t\t\tzoomControl: true,\r\n\t\t\tmapTypeControl: false,\r\n\t\t\tstreetViewControl: false,\r\n\t\t\trotateControl: true,\r\n\t\t\tfullscreenControl: true,\r\n\r\n\t\t\tstyles: MAP_STYLE\r\n\t\t};\r\n\r\n\t\tconst mapElement = node.querySelector('.map');\r\n\r\n\t\tconst map = this.map = new google.maps.Map(mapElement, mapOptions);\r\n\r\n\t\tthis.addMarkers(this.items);\r\n\r\n\t\tif (!this.items) {\r\n\t\t\tmap.fitBounds(this.getItalyBounds());\r\n\t\t}\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tthis.clearMarkers();\r\n\t\tthis.addMarkers(this.items);\r\n\t}\r\n\r\n\tcalculateDistance(lat1, lon1, lat2, lon2, unit) {\r\n\t\tif ((lat1 == lat2) && (lon1 == lon2)) {\r\n\t\t\treturn 0;\r\n\t\t} else {\r\n\t\t\tconst radlat1 = Math.PI * lat1 / 180;\r\n\t\t\tconst radlat2 = Math.PI * lat2 / 180;\r\n\t\t\tconst theta = lon1 - lon2;\r\n\t\t\tconst radtheta = Math.PI * theta / 180;\r\n\t\t\tlet dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);\r\n\t\t\tif (dist > 1) {\r\n\t\t\t\tdist = 1;\r\n\t\t\t}\r\n\t\t\tdist = Math.acos(dist);\r\n\t\t\tdist = dist * 180 / Math.PI;\r\n\t\t\tdist = dist * 60 * 1.1515;\r\n\t\t\tif (unit == \"K\") {\r\n\t\t\t\tdist = dist * 1.609344;\r\n\t\t\t}\r\n\t\t\tif (unit == \"N\") {\r\n\t\t\t\tdist = dist * 0.8684;\r\n\t\t\t}\r\n\t\t\treturn dist;\r\n\t\t}\r\n\t}\r\n\r\n\tclearMarkers() {\r\n\t\tif (this.markerCluster) {\r\n\t\t\tthis.markerCluster.clearMarkers();\r\n\t\t}\r\n\t\tif (this.markers) {\r\n\t\t\tthis.markers.forEach(marker => marker.setMap(null));\r\n\t\t}\r\n\t}\r\n\r\n\taddMarkers(items) {\r\n\t\tconst map = this.map;\r\n\t\tif (map && items) {\r\n\t\t\tconst bounds = new google.maps.LatLngBounds();\r\n\r\n\t\t\tconst markers = items.map((item) => {\r\n\r\n\t\t\t\tconst position = new google.maps.LatLng(item.latitude, item.longitude);\r\n\r\n\t\t\t\tbounds.extend(position);\r\n\r\n\t\t\t\tlet content = /* html */`<div class=\"card--store-locator\">\r\n\t\t\t\t\t<div class=\"card__content\">\r\n\t\t\t\t\t\t<div class=\"card__name\"><span>${item.name}</span></div>\r\n\t\t\t\t\t\t<div class=\"card__address\">${item.address}</div>\r\n\t\t\t\t\t\t<div class=\"card__city\">${item.city}</div>\r\n\t\t\t\t\t\t<div class=\"card__country\">${item.country.name}</div>\r\n\t\t\t\t\t\t${item.phone ? `<a class=\"card__phone\" href=\"tel:${item.phone}\">${item.phone}</a>` : ''}\r\n\t\t\t\t\t\t${item.fax ? `<a class=\"card__fax\" href=\"tel:${item.fax}\">${item.fax}</a>` : ''}\r\n\t\t\t\t\t\t${item.email ? `<a class=\"card__email\" href=\"mailto:${item.email}\">${item.email}</a>` : ''}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>`;\r\n\r\n\t\t\t\t/*\r\n\t\t\t\t`<div class=\"marker__content\">\r\n\t\t\t\t\t<div class=\"title\"><span>${item.name}</span></div>\r\n\t\t\t\t\t<div class=\"group group--info\">\r\n\t\t\t\t\t\t<div class=\"address\">\r\n\t\t\t\t\t\t\t${item.address}<br>\r\n\t\t\t\t\t\t\t${item.city} ${item.country}<br>\r\n\t\t\t\t\t\t\t${item.phone ? `<span><a href=\"tel:${item.phone}\">${item.phone}</a><br></span>` : ''}\r\n\t\t\t\t\t\t\t${item.fax ? `<span><a href=\"tel:${item.fax}\">${item.fax}</a><br></span>` : ''}\r\n\t\t\t\t\t\t\t${item.email ? `<span><a href=\"mailto:${item.email}\">${item.email}</a><br></span>` : ''}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t${item.address !== '' ? `<div class=\"distance\">${this.labels.approximately} <b>${Math.floor(item.distance)} km</b></div>` : ``}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"group group--cta\">\r\n\t\t\t\t\t\t${item.address !== '' ? `<a id=\"locator-marker\" href=\"https://www.google.it/maps/dir/${position.lat()},${position.lng()}/${item.title}/@${item.latitude},${item.longitude}/\" target=\"_blank\" class=\"btn btn--link\"><span>${this.labels.reachStore}</span></a>` : ``}\r\n\t\t\t\t\t\t${item.type === 8 || item.type === 9 ? `<a id=\"contact-item\" href=\"${window.itemLocatorSettings.urlStoreContact}?item=${item.id}\" target=\"_blank\" class=\"btn btn--link\"><span>${this.labels.contactStore}</span></a>` : ''}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>`\r\n\t\t\t\t*/\r\n\r\n\t\t\t\tconst markerImage = new google.maps.MarkerImage(\r\n\t\t\t\t\t`${environment.assets}img/maps/marker-sm.png`,\r\n\t\t\t\t\tnew google.maps.Size(24, 32),\r\n\t\t\t\t);\r\n\r\n\t\t\t\tlet marker = new google.maps.Marker({\r\n\t\t\t\t\tposition: position,\r\n\t\t\t\t\tmap: USE_CLUSTERER ? null : map,\r\n\t\t\t\t\ticon: markerImage,\r\n\t\t\t\t\ttitle: item.title,\r\n\t\t\t\t\titem: item,\r\n\t\t\t\t\tcontent: content,\r\n\t\t\t\t});\r\n\t\t\t\tmarker.addListener('click', () => {\r\n\t\t\t\t\tthis.setMarkerWindow(marker.position, content);\r\n\t\t\t\t\t// this.scrollToStore(item);\r\n\t\t\t\t\t// GtmService.push({ event: 'dealerlocator', action: 'marker-click', label: item.title });\r\n\t\t\t\t});\r\n\t\t\t\titem.marker = marker;\r\n\t\t\t\treturn marker;\r\n\t\t\t});\r\n\r\n\t\t\tif (USE_CLUSTERER) {\r\n\t\t\t\tconst markerCluster = new MarkerClusterer(this.map, markers, {\r\n\t\t\t\t\timagePath: `${environment.assets}img/maps/cluster-`,\r\n\t\t\t\t});\r\n\t\t\t\tconst styles = markerCluster.getStyles();\r\n\t\t\t\tconst sizes = [48, 56, 64, 72, 80];\r\n\t\t\t\tstyles.forEach((style, i) => {\r\n\t\t\t\t\tstyle.width = sizes[i];\r\n\t\t\t\t\tstyle.height = sizes[i];\r\n\t\t\t\t\tstyle.textLineHeight = sizes[i];\r\n\t\t\t\t\tstyle.textSize = Math.floor(style.width / 5);\r\n\t\t\t\t\tstyle.textColor = '#ffffff';\r\n\t\t\t\t});\r\n\t\t\t\tmarkerCluster.setStyles(styles);\r\n\t\t\t\tthis.markerCluster = markerCluster;\r\n\t\t\t}\r\n\r\n\t\t\tthis.markers = markers;\r\n\r\n\t\t\tmap.fitBounds(bounds);\r\n\t\t}\r\n\t}\r\n\r\n\tgetGeolocation(map) {\r\n\t\tthis.error = null;\r\n\t\tthis.busyLocation = true;\r\n\t\tlet position = this.map.getCenter();\r\n\r\n\t\t// Try HTML5 geolocation.\r\n\t\tif (navigator.geolocation) {\r\n\t\t\tnavigator.geolocation.getCurrentPosition((location) => {\r\n\t\t\t\tposition = new google.maps.LatLng(location.coords.latitude, location.coords.longitude);\r\n\r\n\t\t\t\tconst geocoder = this.geocoder || new google.maps.Geocoder();\r\n\t\t\t\tthis.geocoder = geocoder;\r\n\t\t\t\tgeocoder.geocode({ 'location': position }, (results, status) => {\r\n\t\t\t\t\tif (status == 'OK') {\r\n\t\t\t\t\t\tvar filteredInfoCity = results.filter(function(address_component) {\r\n\t\t\t\t\t\t\treturn address_component.types.includes(\"locality\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.model.city = filteredInfoCity.length ? filteredInfoCity[0].formatted_address : undefined;\r\n\t\t\t\t\t\tthis.model.address = results[0].formatted_address;\r\n\r\n\t\t\t\t\t\tfor (let i = 0; i < results[0].address_components.length; i++) {\r\n\t\t\t\t\t\t\tif (results[0].address_components[i].types[0] == \"country\" || results[0].address_components[i].types[0] == \"political\") {\r\n\t\t\t\t\t\t\t\tthis.searchCountry = results[0].address_components[i].short_name;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.setInfoWindow(position, 1);\r\n\t\t\t\t\t\tthis.searchPosition(position).finally(() => this.busyLocation = false);\r\n\t\t\t\t\t\tthis.map.setCenter(position);\r\n\t\t\t\t\t\tthis.map.setZoom(ZOOM_LEVEL);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}, () => {\r\n\t\t\t\tthis.setInfoWindow(position, 2);\r\n\t\t\t\tthis.searchPosition(position).finally(() => this.busyLocation = false);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\t// Browser doesn't support Geolocation\r\n\t\t\tthis.setInfoWindow(position, 3);\r\n\t\t\tthis.searchPosition(position).finally(() => this.busyLocation = false);\r\n\t\t}\r\n\t}\r\n\r\n\tfitBounds(items) {\r\n\t\tif (items.length) {\r\n\t\t\tconst bounds = new google.maps.LatLngBounds();\r\n\t\t\titems.forEach((item) => {\r\n\t\t\t\tconst position = new google.maps.LatLng(item.latitude, item.longitude);\r\n\t\t\t\tbounds.extend(position);\r\n\t\t\t});\r\n\t\t\tthis.map.fitBounds(bounds);\r\n\t\t\t// console.log('fitBounds');\r\n\t\t}\r\n\t}\r\n\r\n\tfindNearStores(items, position) {\r\n\t\tif (items) {\r\n\t\t\titems.forEach((item) => {\r\n\t\t\t\titem.distance = this.calculateDistance(item.latitude, item.longitude, position.lat(), position.lng(), 'K');\r\n\t\t\t\titem.visible = (item.cod_stato == window.userCountry || !window.userCountry) && item.distance <= MAX_DISTANCE /* Km */;\r\n\t\t\t\tif (item.visible) {\r\n\t\t\t\t\tif (item.removed) {\r\n\t\t\t\t\t\tthis.markerCluster.addMarker(item.marker);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdelete item.removed;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.markerCluster.removeMarker(item.marker);\r\n\t\t\t\t\titem.removed = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\titems = items.slice();\r\n\t\t\titems.sort((a, b) => {\r\n\t\t\t\treturn a.distance * (a.importante ? 0.5 : 1) - b.distance * (b.importante ? 0.5 : 1);\r\n\t\t\t});\r\n\t\t\tconst visibleStores = items.filter(item => item.visible).slice(0, 50);\r\n\t\t\tthis.$timeout(() => {\r\n\t\t\t\tthis.visibleStores = visibleStores;\r\n\t\t\t}, 1);\r\n\t\t\t// console.log('findNearStores', visibleStores);\r\n\t\t\treturn visibleStores;\r\n\t\t}\r\n\t}\r\n\r\n\tpanTo(item) {\r\n\t\tconst position = new google.maps.LatLng(item.latitude, item.longitude);\r\n\t\tthis.map.setZoom(ZOOM_LEVEL);\r\n\t\tthis.map.panTo(position);\r\n\t\tconst marker = this.markers.find(x => x.item === item);\r\n\t\tthis.setMarkerWindow(marker.position, marker.content);\r\n\t}\r\n\r\n\tsetMarkerWindow(position, content) {\r\n\t\tif (position) {\r\n\t\t\tconst markerWindow = this.markerWindow || new google.maps.InfoWindow({\r\n\t\t\t\tpixelOffset: new google.maps.Size(0, -35)\r\n\t\t\t});\r\n\t\t\tthis.markerWindow = markerWindow;\r\n\t\t\tmarkerWindow.setPosition(position);\r\n\t\t\tmarkerWindow.setContent(content);\r\n\t\t\tmarkerWindow.open(this.map);\r\n\t\t} else {\r\n\t\t\tthis.closeMarkerWindow();\r\n\t\t}\r\n\t}\r\n\r\n\tcloseMarkerWindow() {\r\n\t\tif (this.markerWindow) {\r\n\t\t\tthis.markerWindow.close();\r\n\t\t}\r\n\t}\r\n\r\n\tgetWorldBounds() {\r\n\t\treturn new google.maps.LatLngBounds(\r\n\t\t\tnew google.maps.LatLng(61, 60),\r\n\t\t\tnew google.maps.LatLng(-37, -92)\r\n\t\t);\r\n\t}\r\n\r\n\tgetItalyBounds() {\r\n\t\treturn new google.maps.LatLngBounds(\r\n\t\t\tnew google.maps.LatLng(46.4657567, 5.233972),\r\n\t\t\tnew google.maps.LatLng(36.8257773, 18.963541)\r\n\t\t);\r\n\t}\r\n}\r\n\r\nMapComponent.meta = {\r\n\tselector: '[map]',\r\n\tinputs: ['center', 'items'],\r\n};\r\n","/**\n * Copyright 2019 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { MarkerClusterer, ClusterAugmentedMarker } from \"./markerclusterer\";\nimport { ClusterIcon } from \"./cluster-icon\";\n\n/**\n * Creates a single cluster that manages a group of proximate markers.\n *  Used internally, do not call this constructor directly.\n */\nexport class Cluster {\n  private map_ = this.markerClusterer_.getMap() as google.maps.Map;\n  private minClusterSize_: number = this.markerClusterer_.getMinimumClusterSize();\n  private averageCenter_: boolean = this.markerClusterer_.getAverageCenter();\n  private markers_: ClusterAugmentedMarker[] = []; // TODO: type;\n  private center_: google.maps.LatLng = null;\n  private bounds_: google.maps.LatLngBounds = null;\n  private clusterIcon_ = new ClusterIcon(\n    this,\n    this.markerClusterer_.getStyles()\n  );\n\n  /**\n   *\n   * @param markerClusterer_ The `MarkerClusterer` object with which this\n   *  cluster is associated.\n   */\n  constructor(private markerClusterer_: MarkerClusterer) {}\n\n  /**\n   * Returns the number of markers managed by the cluster. You can call this from\n   * a `click`, `mouseover`, or `mouseout` event handler for the `MarkerClusterer` object.\n   *\n   * @return The number of markers in the cluster.\n   */\n  public getSize(): number {\n    return this.markers_.length;\n  }\n\n  /**\n   * Returns the array of markers managed by the cluster. You can call this from\n   * a `click`, `mouseover`, or `mouseout` event handler for the `MarkerClusterer` object.\n   *\n   * @return The array of markers in the cluster.\n   */\n  public getMarkers(): google.maps.Marker[] {\n    return this.markers_;\n  }\n\n  /**\n   * Returns the center of the cluster. You can call this from\n   * a `click`, `mouseover`, or `mouseout` event handler\n   * for the `MarkerClusterer` object.\n   *\n   * @return The center of the cluster.\n   */\n  public getCenter(): google.maps.LatLng {\n    return this.center_;\n  }\n\n  /**\n   * Returns the map with which the cluster is associated.\n   *\n   * @return The map.\n   * @ignore\n   */\n  public getMap(): google.maps.Map {\n    return this.map_;\n  }\n\n  /**\n   * Returns the `MarkerClusterer` object with which the cluster is associated.\n   *\n   * @return The associated marker clusterer.\n   * @ignore\n   */\n  public getMarkerClusterer(): MarkerClusterer {\n    return this.markerClusterer_;\n  }\n\n  /**\n   * Returns the bounds of the cluster.\n   *\n   * @return the cluster bounds.\n   * @ignore\n   */\n  public getBounds(): google.maps.LatLngBounds {\n    const bounds = new google.maps.LatLngBounds(this.center_, this.center_);\n    const markers = this.getMarkers();\n    for (let i = 0; i < markers.length; i++) {\n      bounds.extend(markers[i].getPosition());\n    }\n    return bounds;\n  }\n\n  /**\n   * Removes the cluster from the map.\n   *\n   * @ignore\n   */\n  public remove(): void {\n    this.clusterIcon_.setMap(null);\n    this.markers_ = [];\n    delete this.markers_;\n  }\n\n  /**\n   * Adds a marker to the cluster.\n   *\n   * @param marker The marker to be added.\n   * @return True if the marker was added.\n   * @ignore\n   */\n  public addMarker(\n    marker: google.maps.Marker & { isAdded?: boolean }\n  ): boolean {\n    if (this.isMarkerAlreadyAdded_(marker)) {\n      return false;\n    }\n\n    if (!this.center_) {\n      this.center_ = marker.getPosition();\n      this.calculateBounds_();\n    } else {\n      if (this.averageCenter_) {\n        const l = this.markers_.length + 1;\n        const lat =\n          (this.center_.lat() * (l - 1) + marker.getPosition().lat()) / l;\n        const lng =\n          (this.center_.lng() * (l - 1) + marker.getPosition().lng()) / l;\n        this.center_ = new google.maps.LatLng(lat, lng);\n        this.calculateBounds_();\n      }\n    }\n\n    marker.isAdded = true;\n    this.markers_.push(marker);\n\n    const mCount = this.markers_.length;\n    const mz = this.markerClusterer_.getMaxZoom();\n    if (mz !== null && this.map_.getZoom() > mz) {\n      // Zoomed in past max zoom, so show the marker.\n      if (marker.getMap() !== this.map_) {\n        marker.setMap(this.map_);\n      }\n    } else if (mCount < this.minClusterSize_) {\n      // Min cluster size not reached so show the marker.\n      if (marker.getMap() !== this.map_) {\n        marker.setMap(this.map_);\n      }\n    } else if (mCount === this.minClusterSize_) {\n      // Hide the markers that were showing.\n      for (let i = 0; i < mCount; i++) {\n        this.markers_[i].setMap(null);\n      }\n    } else {\n      marker.setMap(null);\n    }\n\n    return true;\n  }\n\n  /**\n   * Determines if a marker lies within the cluster's bounds.\n   *\n   * @param marker The marker to check.\n   * @return True if the marker lies in the bounds.\n   * @ignore\n   */\n  public isMarkerInClusterBounds(marker: google.maps.Marker): boolean {\n    return this.bounds_.contains(marker.getPosition());\n  }\n\n  /**\n   * Calculates the extended bounds of the cluster with the grid.\n   */\n  private calculateBounds_(): void {\n    const bounds = new google.maps.LatLngBounds(this.center_, this.center_);\n    this.bounds_ = this.markerClusterer_.getExtendedBounds(bounds);\n  }\n\n  /**\n   * Updates the cluster icon.\n   */\n  public updateIcon(): void {\n    const mCount = this.markers_.length;\n    const mz = this.markerClusterer_.getMaxZoom();\n\n    if (mz !== null && this.map_.getZoom() > mz) {\n      this.clusterIcon_.hide();\n      return;\n    }\n\n    if (mCount < this.minClusterSize_) {\n      // Min cluster size not yet reached.\n      this.clusterIcon_.hide();\n      return;\n    }\n\n    const numStyles = this.markerClusterer_.getStyles().length;\n    const sums = this.markerClusterer_.getCalculator()(\n      this.markers_,\n      numStyles\n    );\n    this.clusterIcon_.setCenter(this.center_);\n    this.clusterIcon_.useStyle(sums);\n    this.clusterIcon_.show();\n  }\n\n  /**\n   * Determines if a marker has already been added to the cluster.\n   *\n   * @param marker The marker to check.\n   * @return True if the marker has already been added.\n   */\n  private isMarkerAlreadyAdded_(marker: google.maps.Marker): boolean {\n    if (this.markers_.indexOf) {\n      return this.markers_.indexOf(marker) !== -1;\n    } else {\n      for (let i = 0; i < this.markers_.length; i++) {\n        if (marker === this.markers_[i]) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n}\n","/**\n * Copyright 2019 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @name MarkerClustererPlus for Google Maps V3\n * @author Gary Little\n * @fileoverview\n * The library creates and manages per-zoom-level clusters for large amounts of markers.\n * <p>\n * This is an enhanced V3 implementation of the V2 MarkerClusterer by Xiaoxi Wu. It is\n * based on the V3 MarkerClusterer port by Luke Mahe. MarkerClustererPlus was created\n * by Gary Little.\n * <p>\n * v2.0 release: MarkerClustererPlus v2.0 is backward compatible with MarkerClusterer v1.0. It\n *  adds support for the `ignoreHidden`, `title`, `batchSizeIE`,\n *  and `calculator` properties as well as support for four more events. It also allows\n *  greater control over the styling of the text that appears on the cluster marker. The\n *  documentation has been significantly improved and the overall code has been simplified and\n *  polished. Very large numbers of markers can now be managed without causing Javascript timeout\n *  errors on Internet Explorer. Note that the name of the `clusterclick` event has been\n *  deprecated. The new name is `click`, so please change your application code now.\n */\n\nimport { ClusterIconInfo, ClusterIconStyle } from \"./cluster-icon\";\n\nimport { Cluster } from \"./cluster\";\nimport { OverlayViewSafe } from \"./overlay-view-safe\";\n\n/**\n * @param text The text attribute of the cluster\n */\ntype AriaLabelFn = (text: string) => string;\n\nexport type Calculator = (\n  markers: google.maps.Marker[],\n  clusterIconStylesCount: number\n) => ClusterIconInfo;\n\nexport interface ClusterAugmentedMarker extends google.maps.Marker {\n  isAdded?: boolean;\n}\n\n/**\n * This event is fired on the {@link MarkerClusterer} instance when the `MarkerClusterer` stops clustering markers.\n *\n * Example:\n * ```typescript\n *  mc.addListener('clusteringend', (mc: MarkerClusterer) => {})\n * ```\n *\n * @param mc The MarkerClusterer whose markers are being clustered.\n * @event clusteringend\n */\nexport declare function clusteringend(mc: MarkerClusterer): void;\n\n/**\n * This event is fired on the {@link MarkerClusterer} instance when the `MarkerClusterer` begins clustering markers.\n *\n * Example:\n * ```typescript\n *  mc.addListener('clusteringbegin', (mc: MarkerClusterer) => {})\n * ```\n *\n * @param mc The MarkerClusterer whose markers are being clustered.\n * @event clusteringbegin\n */\nexport declare function clusteringbegin(mc: MarkerClusterer): void;\n\n/**\n * Optional parameter passed to the {@link MarkerClusterer} constructor.\n */\nexport interface MarkerClustererOptions {\n  /**\n   * The grid size of a cluster in pixels. The grid is a square.\n   *\n   * @default `60`\n   */\n  gridSize?: number;\n  /**\n   * The maximum zoom level at which clustering is enabled or\n   * `null` if clustering is to be enabled at all zoom levels.\n   *\n   * @default `null`\n   */\n  maxZoom?: number;\n\n  /**\n   * Whether to zoom the map when a cluster marker is\n   * clicked. You may want to set this to `false` if you have installed a handler\n   * for the `click` event and it deals with zooming on its own.\n   *\n   * @default `true`\n   */\n  zoomOnClick?: boolean;\n  /***\n   * Whether the position of a cluster marker should be\n   * the average position of all markers in the cluster. If set to `false`, the\n   * cluster marker is positioned at the location of the first marker added to the cluster.\n   *\n   * @default `false`\n   */\n  averageCenter?: boolean;\n  /**\n   * The minimum number of markers needed in a cluster\n   * before the markers are hidden and a cluster marker appears.\n   *\n   * @default `2`\n   */\n  minimumClusterSize?: number;\n\n  /**\n   *  the z-index of a cluster.\n   *\n   *  @default `google.maps.Marker.MAX_ZINDEX + 1`\n   */\n  zIndex?: number;\n\n  /**\n   * Whether to ignore hidden markers in clusters. You\n   * may want to set this to `true` to ensure that hidden markers are not included\n   * in the marker count that appears on a cluster marker (this count is the value of the\n   * `text` property of the result returned by the default  {@link calculator}).\n   * If set to `true` and you change the visibility of a marker being clustered, be\n   * sure to also call {@link MarkerClusterer#repaint()}.\n   *\n   * @default `false`\n   */\n  ignoreHidden?: boolean;\n  /**\n   * The tooltip to display when the mouse moves over a cluster\n   * marker. (Alternatively, you can use a custom `calculator` function to specify a\n   * different tooltip for each cluster marker.)\n   *\n   * @default `\"\"`\n   */\n  title?: string;\n  /**\n   * The function used to determine\n   * the text to be displayed on a cluster marker and the index indicating which style to use\n   * for the cluster marker. The input parameters for the function are (1) the array of markers\n   * represented by a cluster marker and (2) the number of cluster icon styles. It returns a\n   * {@link ClusterIconInfo} object. The default `calculator` returns a\n   * `text` property which is the number of markers in the cluster and an\n   * `index` property which is one higher than the lowest integer such that\n   * `10^i` exceeds the number of markers in the cluster, or the size of the styles\n   * array, whichever is less. The `styles` array element used has an index of\n   * `index` minus 1. For example, the default `calculator` returns a\n   * `text` value of `\"125\"` and an `index` of `3`\n   * for a cluster icon representing 125 markers so the element used in the `styles`\n   * array is `2`. A `calculator` may also return a `title`\n   * property that contains the text of the tooltip to be used for the cluster marker. If\n   * `title` is not defined, the tooltip is set to the value of the `title`\n   * property for the MarkerClusterer.\n   *\n   * @default {@link MarkerClusterer.CALCULATOR}\n   */\n  calculator?: Calculator;\n  /**\n   * The name of the CSS class defining general styles\n   * for the cluster markers. Use this class to define CSS styles that are not set up by the code\n   * that processes the `styles` array.\n   *\n   * @default `\"cluster\"`\n   */\n  clusterClass?: string;\n  /**\n   * An array of {@link ClusterIconStyle} elements defining the styles\n   * of the cluster markers to be used. The element to be used to style a given cluster marker\n   * is determined by the function defined by the `calculator` property.\n   * The default is an array of {@link ClusterIconStyle} elements whose properties are derived\n   * from the values for `imagePath`, `imageExtension`, and `imageSizes`.\n   *\n   * @default `styles`\n   */\n  styles?: ClusterIconStyle[];\n  /**\n   * Whether to allow the use of cluster icons that\n   * have sizes that are some multiple (typically double) of their actual display size. Icons such\n   * as these look better when viewed on high-resolution monitors such as Apple's Retina displays.\n   * Note: if this property is `true`, sprites cannot be used as cluster icons.\n   *\n   * @default `false`\n   */\n  enableRetinaIcons?: boolean;\n  /**\n   * Set this property to the number of markers to be processed in a single batch when using\n   * a browser other than Internet Explorer (for Internet Explorer, use the batchSizeIE property instead).\n   *\n   * @default `MarkerClusterer.BATCH_SIZE`\n   */\n  batchSize?: number;\n  /**\n   * When Internet Explorer is\n   * being used, markers are processed in several batches with a small delay inserted between\n   * each batch in an attempt to avoid Javascript timeout errors. Set this property to the\n   * number of markers to be processed in a single batch; select as high a number as you can\n   * without causing a timeout error in the browser. This number might need to be as low as 100\n   * if 15,000 markers are being managed, for example.\n   *\n   * @default `MarkerClusterer.BATCH_SIZE_IE`\n   */\n  batchSizeIE?: number;\n  /**\n   * The full URL of the root name of the group of image files to use for cluster icons.\n   * The complete file name is of the form `imagePath`n.`imageExtension`\n   * where n is the image file number (1, 2, etc.).\n   *\n   * @default `MarkerClusterer.IMAGE_PATH`\n   */\n  imagePath?: string;\n  /**\n   * The extension name for the cluster icon image files (e.g., `\"png\"` or\n   * `\"jpg\"`).\n   *\n   * @default `MarkerClusterer.IMAGE_EXTENSION`\n   */\n  imageExtension?: string;\n  /**\n   * An array of numbers containing the widths of the group of\n   * `imagePath`n.`imageExtension` image files.\n   * (The images are assumed to be square.)\n   *\n   * @default `MarkerClusterer.IMAGE_SIZES`\n   */\n  imageSizes?: number[];\n  /**\n   * A function to take the text attribute associated with the cluster and output a string to attach an\n   * ariaLabel to the cluster\n   */\n  ariaLabelFn?: AriaLabelFn;\n}\n\n/**\n * @ignore\n */\nconst getOption = <T, K extends keyof T>(\n  options: T,\n  prop: K,\n  def: T[K]\n): T[K] => {\n  if (options[prop] !== undefined) {\n    return options[prop];\n  } else {\n    return def;\n  }\n};\n\nexport class MarkerClusterer extends OverlayViewSafe {\n  /**\n   * The number of markers to process in one batch.\n   */\n  static BATCH_SIZE = 2000;\n\n  /**\n   * The number of markers to process in one batch (IE only).\n   */\n  static BATCH_SIZE_IE = 500;\n\n  /**\n   * The default root name for the marker cluster images.\n   */\n  static IMAGE_PATH = \"../images/m\";\n\n  /**\n   * The default extension name for the marker cluster images.\n   */\n  static IMAGE_EXTENSION = \"png\";\n\n  /**\n   * The default array of sizes for the marker cluster images.\n   */\n  static IMAGE_SIZES: number[] = [53, 56, 66, 78, 90];\n\n  private markers_: ClusterAugmentedMarker[] = [];\n  private clusters_: Cluster[] = [];\n  private listeners_: google.maps.MapsEventListener[] = [];\n\n  private activeMap_: google.maps.Map = null;\n  private ready_ = false;\n\n  public ariaLabelFn = this.options.ariaLabelFn || ((): string => \"\");\n\n  private zIndex_ =\n    this.options.zIndex || Number(google.maps.Marker.MAX_ZINDEX) + 1;\n  private gridSize_ = this.options.gridSize || 60;\n  private minClusterSize_ = this.options.minimumClusterSize || 2;\n  private maxZoom_ = this.options.maxZoom || null;\n  private styles_: ClusterIconStyle[] = this.options.styles || [];\n  private title_ = this.options.title || \"\";\n\n  private zoomOnClick_ = getOption(this.options, \"zoomOnClick\", true);\n  private averageCenter_ = getOption(this.options, \"averageCenter\", false);\n\n  private ignoreHidden_ = getOption(this.options, \"ignoreHidden\", false);\n  private enableRetinaIcons_ = getOption(\n    this.options,\n    \"enableRetinaIcons\",\n    false\n  );\n\n  private imagePath_ = this.options.imagePath || MarkerClusterer.IMAGE_PATH;\n  private imageExtension_ =\n    this.options.imageExtension || MarkerClusterer.IMAGE_EXTENSION;\n  private imageSizes_ = this.options.imageSizes || MarkerClusterer.IMAGE_SIZES;\n  private calculator_ = this.options.calculator || MarkerClusterer.CALCULATOR;\n  private batchSize_ = this.options.batchSize || MarkerClusterer.BATCH_SIZE;\n  private batchSizeIE_ =\n    this.options.batchSizeIE || MarkerClusterer.BATCH_SIZE_IE;\n  private clusterClass_ = this.options.clusterClass || \"cluster\";\n\n  private prevZoom_: number;\n  private timerRefStatic: number;\n\n  /**\n   * Creates a MarkerClusterer object with the options specified in {@link MarkerClustererOptions}.\n   * @param map The Google map to attach to.\n   * @param markers The markers to be added to the cluster.\n   * @param options The optional parameters.\n   */\n  constructor(\n    map: google.maps.Map,\n    markers: google.maps.Marker[] = [],\n    private options: MarkerClustererOptions = {}\n  ) {\n    super();\n\n    if (navigator.userAgent.toLowerCase().indexOf(\"msie\") !== -1) {\n      // Try to avoid IE timeout when processing a huge number of markers:\n      this.batchSize_ = this.batchSizeIE_;\n    }\n\n    this.setupStyles_();\n\n    this.addMarkers(markers, true);\n    this.setMap(map); // Note: this causes onAdd to be called\n  }\n\n  /**\n   * Implementation of the onAdd interface method.\n   * @ignore\n   */\n  onAdd(): void {\n    this.activeMap_ = this.getMap() as google.maps.Map;\n    this.ready_ = true;\n\n    this.repaint();\n\n    this.prevZoom_ = this.getMap().getZoom();\n\n    // Add the map event listeners\n    this.listeners_ = [\n      google.maps.event.addListener(this.getMap(), \"zoom_changed\", () => {\n        const map: google.maps.Map & {\n          minZoom: number;\n          maxZoom: number;\n          mapTypes: { [type: string]: google.maps.MapType };\n        } = this.getMap() as any; // eslint-disable-line @typescript-eslint/no-explicit-any\n\n        // Fix for bug #407\n        // Determines map type and prevents illegal zoom levels\n        const minZoom = map.minZoom || 0;\n        const maxZoom = Math.min(\n          map.maxZoom || 100,\n          map.mapTypes[map.getMapTypeId()].maxZoom\n        );\n        const zoom = Math.min(\n          Math.max(this.getMap().getZoom(), minZoom),\n          maxZoom\n        );\n\n        if (this.prevZoom_ != zoom) {\n          this.prevZoom_ = zoom;\n          this.resetViewport_(false);\n        }\n      }),\n      google.maps.event.addListener(this.getMap(), \"idle\", () => {\n        this.redraw_();\n      }),\n    ];\n  }\n\n  /**\n   * Implementation of the onRemove interface method.\n   * Removes map event listeners and all cluster icons from the DOM.\n   * All managed markers are also put back on the map.\n   * @ignore\n   */\n  onRemove(): void {\n    // Put all the managed markers back on the map:\n    for (let i = 0; i < this.markers_.length; i++) {\n      if (this.markers_[i].getMap() !== this.activeMap_) {\n        this.markers_[i].setMap(this.activeMap_);\n      }\n    }\n\n    // Remove all clusters:\n    for (let i = 0; i < this.clusters_.length; i++) {\n      this.clusters_[i].remove();\n    }\n    this.clusters_ = [];\n\n    // Remove map event listeners:\n    for (let i = 0; i < this.listeners_.length; i++) {\n      google.maps.event.removeListener(this.listeners_[i]);\n    }\n    this.listeners_ = [];\n\n    this.activeMap_ = null;\n    this.ready_ = false;\n  }\n\n  /**\n   * Implementation of the draw interface method.\n   * @ignore\n   */\n  draw(): void {}\n\n  /**\n   * Sets up the styles object.\n   */\n  private setupStyles_(): void {\n    if (this.styles_.length > 0) {\n      return;\n    }\n\n    for (let i = 0; i < this.imageSizes_.length; i++) {\n      const size = this.imageSizes_[i];\n      this.styles_.push(\n        MarkerClusterer.withDefaultStyle({\n          url: this.imagePath_ + (i + 1) + \".\" + this.imageExtension_,\n          height: size,\n          width: size,\n        })\n      );\n    }\n  }\n\n  /**\n   *  Fits the map to the bounds of the markers managed by the clusterer.\n   */\n  fitMapToMarkers(padding: number | google.maps.Padding): void {\n    const markers = this.getMarkers();\n    const bounds = new google.maps.LatLngBounds();\n    for (let i = 0; i < markers.length; i++) {\n      // March 3, 2018: Bug fix -- honor the ignoreHidden property\n      if (markers[i].getVisible() || !this.getIgnoreHidden()) {\n        bounds.extend(markers[i].getPosition());\n      }\n    }\n\n    (this.getMap() as google.maps.Map).fitBounds(bounds, padding);\n  }\n\n  /**\n   * Returns the value of the `gridSize` property.\n   *\n   * @return The grid size.\n   */\n  getGridSize(): number {\n    return this.gridSize_;\n  }\n\n  /**\n   * Sets the value of the `gridSize` property.\n   *\n   * @param gridSize The grid size.\n   */\n  setGridSize(gridSize: number): void {\n    this.gridSize_ = gridSize;\n  }\n\n  /**\n   * Returns the value of the `minimumClusterSize` property.\n   *\n   * @return The minimum cluster size.\n   */\n  getMinimumClusterSize(): number {\n    return this.minClusterSize_;\n  }\n\n  /**\n   * Sets the value of the `minimumClusterSize` property.\n   *\n   * @param minimumClusterSize The minimum cluster size.\n   */\n  setMinimumClusterSize(minimumClusterSize: number): void {\n    this.minClusterSize_ = minimumClusterSize;\n  }\n\n  /**\n   *  Returns the value of the `maxZoom` property.\n   *\n   *  @return The maximum zoom level.\n   */\n  getMaxZoom(): number {\n    return this.maxZoom_;\n  }\n\n  /**\n   *  Sets the value of the `maxZoom` property.\n   *\n   *  @param maxZoom The maximum zoom level.\n   */\n  setMaxZoom(maxZoom: number): void {\n    this.maxZoom_ = maxZoom;\n  }\n\n  getZIndex(): number {\n    return this.zIndex_;\n  }\n\n  setZIndex(zIndex: number): void {\n    this.zIndex_ = zIndex;\n  }\n\n  /**\n   *  Returns the value of the `styles` property.\n   *\n   *  @return The array of styles defining the cluster markers to be used.\n   */\n  getStyles(): ClusterIconStyle[] {\n    return this.styles_;\n  }\n\n  /**\n   *  Sets the value of the `styles` property.\n   *\n   *  @param styles The array of styles to use.\n   */\n  setStyles(styles: ClusterIconStyle[]): void {\n    this.styles_ = styles;\n  }\n\n  /**\n   * Returns the value of the `title` property.\n   *\n   * @return The content of the title text.\n   */\n  getTitle(): string {\n    return this.title_;\n  }\n\n  /**\n   *  Sets the value of the `title` property.\n   *\n   *  @param title The value of the title property.\n   */\n  setTitle(title: string): void {\n    this.title_ = title;\n  }\n\n  /**\n   * Returns the value of the `zoomOnClick` property.\n   *\n   * @return True if zoomOnClick property is set.\n   */\n  getZoomOnClick(): boolean {\n    return this.zoomOnClick_;\n  }\n\n  /**\n   *  Sets the value of the `zoomOnClick` property.\n   *\n   *  @param zoomOnClick The value of the zoomOnClick property.\n   */\n  setZoomOnClick(zoomOnClick: boolean): void {\n    this.zoomOnClick_ = zoomOnClick;\n  }\n\n  /**\n   * Returns the value of the `averageCenter` property.\n   *\n   * @return True if averageCenter property is set.\n   */\n  getAverageCenter(): boolean {\n    return this.averageCenter_;\n  }\n\n  /**\n   *  Sets the value of the `averageCenter` property.\n   *\n   *  @param averageCenter The value of the averageCenter property.\n   */\n  setAverageCenter(averageCenter: boolean): void {\n    this.averageCenter_ = averageCenter;\n  }\n\n  /**\n   * Returns the value of the `ignoreHidden` property.\n   *\n   * @return True if ignoreHidden property is set.\n   */\n  getIgnoreHidden(): boolean {\n    return this.ignoreHidden_;\n  }\n\n  /**\n   *  Sets the value of the `ignoreHidden` property.\n   *\n   *  @param ignoreHidden The value of the ignoreHidden property.\n   */\n  setIgnoreHidden(ignoreHidden: boolean): void {\n    this.ignoreHidden_ = ignoreHidden;\n  }\n\n  /**\n   * Returns the value of the `enableRetinaIcons` property.\n   *\n   * @return True if enableRetinaIcons property is set.\n   */\n  getEnableRetinaIcons(): boolean {\n    return this.enableRetinaIcons_;\n  }\n\n  /**\n   *  Sets the value of the `enableRetinaIcons` property.\n   *\n   *  @param enableRetinaIcons The value of the enableRetinaIcons property.\n   */\n  setEnableRetinaIcons(enableRetinaIcons: boolean): void {\n    this.enableRetinaIcons_ = enableRetinaIcons;\n  }\n\n  /**\n   * Returns the value of the `imageExtension` property.\n   *\n   * @return The value of the imageExtension property.\n   */\n  getImageExtension(): string {\n    return this.imageExtension_;\n  }\n\n  /**\n   *  Sets the value of the `imageExtension` property.\n   *\n   *  @param imageExtension The value of the imageExtension property.\n   */\n  setImageExtension(imageExtension: string): void {\n    this.imageExtension_ = imageExtension;\n  }\n\n  /**\n   * Returns the value of the `imagePath` property.\n   *\n   * @return The value of the imagePath property.\n   */\n  getImagePath(): string {\n    return this.imagePath_;\n  }\n\n  /**\n   *  Sets the value of the `imagePath` property.\n   *\n   *  @param imagePath The value of the imagePath property.\n   */\n  setImagePath(imagePath: string): void {\n    this.imagePath_ = imagePath;\n  }\n\n  /**\n   * Returns the value of the `imageSizes` property.\n   *\n   * @return The value of the imageSizes property.\n   */\n  getImageSizes(): number[] {\n    return this.imageSizes_;\n  }\n\n  /**\n   *  Sets the value of the `imageSizes` property.\n   *\n   *  @param imageSizes The value of the imageSizes property.\n   */\n  setImageSizes(imageSizes: number[]): void {\n    this.imageSizes_ = imageSizes;\n  }\n\n  /**\n   * Returns the value of the `calculator` property.\n   *\n   * @return the value of the calculator property.\n   */\n  getCalculator(): Calculator {\n    return this.calculator_;\n  }\n\n  /**\n   * Sets the value of the `calculator` property.\n   *\n   * @param calculator The value of the calculator property.\n   */\n  setCalculator(calculator: Calculator): void {\n    this.calculator_ = calculator;\n  }\n\n  /**\n   * Returns the value of the `batchSizeIE` property.\n   *\n   * @return the value of the batchSizeIE property.\n   */\n  getBatchSizeIE(): number {\n    return this.batchSizeIE_;\n  }\n\n  /**\n   * Sets the value of the `batchSizeIE` property.\n   *\n   *  @param batchSizeIE The value of the batchSizeIE property.\n   */\n  setBatchSizeIE(batchSizeIE: number): void {\n    this.batchSizeIE_ = batchSizeIE;\n  }\n\n  /**\n   * Returns the value of the `clusterClass` property.\n   *\n   * @return the value of the clusterClass property.\n   */\n  getClusterClass(): string {\n    return this.clusterClass_;\n  }\n\n  /**\n   * Sets the value of the `clusterClass` property.\n   *\n   *  @param clusterClass The value of the clusterClass property.\n   */\n  setClusterClass(clusterClass: string): void {\n    this.clusterClass_ = clusterClass;\n  }\n\n  /**\n   *  Returns the array of markers managed by the clusterer.\n   *\n   *  @return The array of markers managed by the clusterer.\n   */\n  getMarkers(): google.maps.Marker[] {\n    return this.markers_;\n  }\n\n  /**\n   *  Returns the number of markers managed by the clusterer.\n   *\n   *  @return The number of markers.\n   */\n  getTotalMarkers(): number {\n    return this.markers_.length;\n  }\n\n  /**\n   * Returns the current array of clusters formed by the clusterer.\n   *\n   * @return The array of clusters formed by the clusterer.\n   */\n  getClusters(): Cluster[] {\n    return this.clusters_;\n  }\n\n  /**\n   * Returns the number of clusters formed by the clusterer.\n   *\n   * @return The number of clusters formed by the clusterer.\n   */\n  getTotalClusters(): number {\n    return this.clusters_.length;\n  }\n\n  /**\n   * Adds a marker to the clusterer. The clusters are redrawn unless\n   *  `nodraw` is set to `true`.\n   *\n   * @param marker The marker to add.\n   * @param nodraw Set to `true` to prevent redrawing.\n   */\n  addMarker(marker: google.maps.Marker, nodraw?: boolean): void {\n    this.pushMarkerTo_(marker);\n    if (!nodraw) {\n      this.redraw_();\n    }\n  }\n\n  /**\n   * Adds an array of markers to the clusterer. The clusters are redrawn unless\n   *  `nodraw` is set to `true`.\n   *\n   * @param markers The markers to add.\n   * @param nodraw Set to `true` to prevent redrawing.\n   */\n  addMarkers(markers: google.maps.Marker[], nodraw?: boolean): void {\n    for (const key in markers) {\n      if (Object.prototype.hasOwnProperty.call(markers, key)) {\n        this.pushMarkerTo_(markers[key]);\n      }\n    }\n    if (!nodraw) {\n      this.redraw_();\n    }\n  }\n\n  /**\n   * Pushes a marker to the clusterer.\n   *\n   * @param marker The marker to add.\n   */\n  private pushMarkerTo_(\n    marker: google.maps.Marker & { isAdded?: boolean }\n  ): void {\n    // If the marker is draggable add a listener so we can update the clusters on the dragend:\n    if (marker.getDraggable()) {\n      google.maps.event.addListener(marker, \"dragend\", () => {\n        if (this.ready_) {\n          marker.isAdded = false;\n          this.repaint();\n        }\n      });\n    }\n    marker.isAdded = false;\n    this.markers_.push(marker);\n  }\n\n  /**\n   * Removes a marker from the cluster.  The clusters are redrawn unless\n   *  `nodraw` is set to `true`. Returns `true` if the\n   *  marker was removed from the clusterer.\n   *\n   * @param marker The marker to remove.\n   * @param nodraw Set to `true` to prevent redrawing.\n   * @return True if the marker was removed from the clusterer.\n   */\n  removeMarker(marker: google.maps.Marker, nodraw?: boolean): boolean {\n    const removed = this.removeMarker_(marker);\n\n    if (!nodraw && removed) {\n      this.repaint();\n    }\n\n    return removed;\n  }\n\n  /**\n   * Removes an array of markers from the cluster. The clusters are redrawn unless\n   *  `nodraw` is set to `true`. Returns `true` if markers were removed from the clusterer.\n   *\n   * @param markers The markers to remove.\n   * @param nodraw Set to `true` to prevent redrawing.\n   * @return True if markers were removed from the clusterer.\n   */\n  removeMarkers(markers: google.maps.Marker[], nodraw?: boolean): boolean {\n    let removed = false;\n\n    for (let i = 0; i < markers.length; i++) {\n      const r = this.removeMarker_(markers[i]);\n      removed = removed || r;\n    }\n\n    if (!nodraw && removed) {\n      this.repaint();\n    }\n\n    return removed;\n  }\n\n  /**\n   * Removes a marker and returns true if removed, false if not.\n   *\n   * @param marker The marker to remove\n   * @return Whether the marker was removed or not\n   */\n  private removeMarker_(marker: google.maps.Marker): boolean {\n    let index = -1;\n    if (this.markers_.indexOf) {\n      index = this.markers_.indexOf(marker);\n    } else {\n      for (let i = 0; i < this.markers_.length; i++) {\n        if (marker === this.markers_[i]) {\n          index = i;\n          break;\n        }\n      }\n    }\n\n    if (index === -1) {\n      // Marker is not in our list of markers, so do nothing:\n      return false;\n    }\n\n    marker.setMap(null);\n    this.markers_.splice(index, 1); // Remove the marker from the list of managed markers\n    return true;\n  }\n\n  /**\n   * Removes all clusters and markers from the map and also removes all markers\n   *  managed by the clusterer.\n   */\n  clearMarkers(): void {\n    this.resetViewport_(true);\n    this.markers_ = [];\n  }\n\n  /**\n   * Recalculates and redraws all the marker clusters from scratch.\n   *  Call this after changing any properties.\n   */\n  repaint(): void {\n    const oldClusters = this.clusters_.slice();\n    this.clusters_ = [];\n    this.resetViewport_(false);\n    this.redraw_();\n\n    // Remove the old clusters.\n    // Do it in a timeout to prevent blinking effect.\n    setTimeout(() => {\n      for (let i = 0; i < oldClusters.length; i++) {\n        oldClusters[i].remove();\n      }\n    }, 0);\n  }\n\n  /**\n   * Returns the current bounds extended by the grid size.\n   *\n   * @param bounds The bounds to extend.\n   * @return The extended bounds.\n   * @ignore\n   */\n  getExtendedBounds(\n    bounds: google.maps.LatLngBounds\n  ): google.maps.LatLngBounds {\n    const projection = this.getProjection();\n\n    // Turn the bounds into latlng.\n    const tr = new google.maps.LatLng(\n      bounds.getNorthEast().lat(),\n      bounds.getNorthEast().lng()\n    );\n    const bl = new google.maps.LatLng(\n      bounds.getSouthWest().lat(),\n      bounds.getSouthWest().lng()\n    );\n\n    // Convert the points to pixels and the extend out by the grid size.\n    const trPix = projection.fromLatLngToDivPixel(tr);\n    trPix.x += this.gridSize_;\n    trPix.y -= this.gridSize_;\n\n    const blPix = projection.fromLatLngToDivPixel(bl);\n    blPix.x -= this.gridSize_;\n    blPix.y += this.gridSize_;\n\n    // Convert the pixel points back to LatLng\n    const ne = projection.fromDivPixelToLatLng(trPix);\n    const sw = projection.fromDivPixelToLatLng(blPix);\n\n    // Extend the bounds to contain the new bounds.\n    bounds.extend(ne);\n    bounds.extend(sw);\n\n    return bounds;\n  }\n\n  /**\n   * Redraws all the clusters.\n   */\n  private redraw_(): void {\n    this.createClusters_(0);\n  }\n\n  /**\n   * Removes all clusters from the map. The markers are also removed from the map\n   *  if `hide` is set to `true`.\n   *\n   * @param hide Set to `true` to also remove the markers from the map.\n   */\n  private resetViewport_(hide?: boolean): void {\n    // Remove all the clusters\n    for (let i = 0; i < this.clusters_.length; i++) {\n      this.clusters_[i].remove();\n    }\n    this.clusters_ = [];\n\n    // Reset the markers to not be added and to be removed from the map.\n    for (let i = 0; i < this.markers_.length; i++) {\n      const marker = this.markers_[i];\n      marker.isAdded = false;\n      if (hide) {\n        marker.setMap(null);\n      }\n    }\n  }\n\n  /**\n   * Calculates the distance between two latlng locations in km.\n   *\n   * @param p1 The first lat lng point.\n   * @param p2 The second lat lng point.\n   * @return The distance between the two points in km.\n   * @link http://www.movable-type.co.uk/scripts/latlong.html\n   */\n  private distanceBetweenPoints_(\n    p1: google.maps.LatLng,\n    p2: google.maps.LatLng\n  ): number {\n    const R = 6371; // Radius of the Earth in km\n    const dLat = ((p2.lat() - p1.lat()) * Math.PI) / 180;\n    const dLon = ((p2.lng() - p1.lng()) * Math.PI) / 180;\n    const a =\n      Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n      Math.cos((p1.lat() * Math.PI) / 180) *\n        Math.cos((p2.lat() * Math.PI) / 180) *\n        Math.sin(dLon / 2) *\n        Math.sin(dLon / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c;\n  }\n\n  /**\n   * Determines if a marker is contained in a bounds.\n   *\n   * @param marker The marker to check.\n   * @param bounds The bounds to check against.\n   * @return True if the marker is in the bounds.\n   */\n  private isMarkerInBounds_(\n    marker: google.maps.Marker,\n    bounds: google.maps.LatLngBounds\n  ): boolean {\n    return bounds.contains(marker.getPosition());\n  }\n\n  /**\n   * Adds a marker to a cluster, or creates a new cluster.\n   *\n   * @param marker The marker to add.\n   */\n  private addToClosestCluster_(marker: google.maps.Marker): void {\n    let distance = 40000; // Some large number\n    let clusterToAddTo = null;\n    for (let i = 0; i < this.clusters_.length; i++) {\n      const cluster = this.clusters_[i];\n      const center = cluster.getCenter();\n      if (center) {\n        const d = this.distanceBetweenPoints_(center, marker.getPosition());\n        if (d < distance) {\n          distance = d;\n          clusterToAddTo = cluster;\n        }\n      }\n    }\n\n    if (clusterToAddTo && clusterToAddTo.isMarkerInClusterBounds(marker)) {\n      clusterToAddTo.addMarker(marker);\n    } else {\n      const cluster = new Cluster(this);\n      cluster.addMarker(marker);\n      this.clusters_.push(cluster);\n    }\n  }\n\n  /**\n   * Creates the clusters. This is done in batches to avoid timeout errors\n   *  in some browsers when there is a huge number of markers.\n   *\n   * @param iFirst The index of the first marker in the batch of\n   *  markers to be added to clusters.\n   */\n  private createClusters_(iFirst: number): void {\n    if (!this.ready_) {\n      return;\n    }\n\n    // Cancel previous batch processing if we're working on the first batch:\n    if (iFirst === 0) {\n      google.maps.event.trigger(this, \"clusteringbegin\", this);\n\n      if (typeof this.timerRefStatic !== \"undefined\") {\n        clearTimeout(this.timerRefStatic);\n        delete this.timerRefStatic;\n      }\n    }\n\n    // Get our current map view bounds.\n    // Create a new bounds object so we don't affect the map.\n    //\n    // See Comments 9 & 11 on Issue 3651 relating to this workaround for a Google Maps bug:\n    let mapBounds: google.maps.LatLngBounds;\n\n    if (this.getMap().getZoom() > 3) {\n      mapBounds = new google.maps.LatLngBounds(\n        (this.getMap() as google.maps.Map).getBounds().getSouthWest(),\n        (this.getMap() as google.maps.Map).getBounds().getNorthEast()\n      );\n    } else {\n      mapBounds = new google.maps.LatLngBounds(\n        new google.maps.LatLng(85.02070771743472, -178.48388434375),\n        new google.maps.LatLng(-85.08136444384544, 178.00048865625)\n      );\n    }\n    const bounds = this.getExtendedBounds(mapBounds);\n\n    const iLast = Math.min(iFirst + this.batchSize_, this.markers_.length);\n\n    for (let i = iFirst; i < iLast; i++) {\n      const marker = this.markers_[i];\n      if (!marker.isAdded && this.isMarkerInBounds_(marker, bounds)) {\n        if (\n          !this.ignoreHidden_ ||\n          (this.ignoreHidden_ && marker.getVisible())\n        ) {\n          this.addToClosestCluster_(marker);\n        }\n      }\n    }\n\n    if (iLast < this.markers_.length) {\n      this.timerRefStatic = window.setTimeout(() => {\n        this.createClusters_(iLast);\n      }, 0);\n    } else {\n      delete this.timerRefStatic;\n      google.maps.event.trigger(this, \"clusteringend\", this);\n\n      for (let i = 0; i < this.clusters_.length; i++) {\n        this.clusters_[i].updateIcon();\n      }\n    }\n  }\n\n  /**\n   * The default function for determining the label text and style\n   * for a cluster icon.\n   *\n   * @param markers The array of markers represented by the cluster.\n   * @param numStyles The number of marker styles available.\n   * @return The information resource for the cluster.\n   */\n  static CALCULATOR(\n    markers: google.maps.Marker[],\n    numStyles: number\n  ): ClusterIconInfo {\n    let index = 0;\n    const count: number = markers.length;\n\n    let dv = count;\n    while (dv !== 0) {\n      dv = Math.floor(dv / 10);\n      index++;\n    }\n\n    index = Math.min(index, numStyles);\n    return {\n      text: count.toString(),\n      index: index,\n      title: \"\",\n    };\n  }\n\n  /**\n   * Generates default styles augmented with user passed values.\n   * Useful when you want to override some default values but keep untouched\n   *\n   * @param overrides override default values\n   */\n  static withDefaultStyle(overrides: ClusterIconStyle): ClusterIconStyle {\n    return {\n      textColor: \"black\",\n      textSize: 11,\n      textDecoration: \"none\",\n      textLineHeight: overrides.height,\n      fontWeight: \"bold\",\n      fontStyle: \"normal\",\n      fontFamily: \"Arial,sans-serif\",\n      backgroundPosition: \"0 0\",\n      ...overrides,\n    };\n  }\n}\n","export const MAP_STYLE = [\r\n\t{\r\n\t\t\"featureType\": \"administrative\",\r\n\t\t\"elementType\": \"labels.text.fill\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"color\": \"#444444\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"landscape\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"color\": \"#f2f2f2\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"poi\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"visibility\": \"off\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"road\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"saturation\": -100\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"lightness\": 45\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"road.highway\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"visibility\": \"simplified\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"road.arterial\",\r\n\t\t\"elementType\": \"labels.icon\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"visibility\": \"off\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"transit\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"visibility\": \"off\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"water\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"color\": \"#e2e0df\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"visibility\": \"on\"\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n];\r\n","import { SwiperDirective } from '../../common/swiper/swiper.directive';\r\n\r\nexport class SwiperGalleryDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 'auto',\r\n\t\t\tspaceBetween: 40,\r\n\t\t\tspeed: 600,\r\n\t\t\tcenteredSlides: true,\r\n\t\t\tloop: true,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t\t// console.log('SwiperGalleryDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperGalleryDirective.meta = {\r\n\tselector: '[swiper-gallery]'\r\n};\r\n","import { SwiperDirective } from '../../common/swiper/swiper.directive';\r\n\r\nexport class SwiperHomepageDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1,\r\n\t\t\tspaceBetween: 0,\r\n\t\t\tspeed: 600,\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t\t// console.log('SwiperHomepageDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperHomepageDirective.meta = {\r\n\tselector: '[swiper-homepage]'\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { SwiperDirective } from '../../common/swiper/swiper.directive';\r\n\r\nexport class SwiperNewsPropositionDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1,\r\n\t\t\tspaceBetween: 30,\r\n\t\t\tbreakpoints: {\r\n\t\t\t\t768: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 40\r\n\t\t\t\t},\r\n\t\t\t\t1024: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 50\r\n\t\t\t\t},\r\n\t\t\t\t1440: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 60\r\n\t\t\t\t},\r\n\t\t\t\t1920: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 70\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tspeed: 600,\r\n\t\t\tcenteredSlides: false,\r\n\t\t\tloop: false,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = node.querySelector('.swiper-container');\r\n\t\tthis.init_(target);\r\n\t\t// console.log('SwiperNewsPropositionDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperNewsPropositionDirective.meta = {\r\n\tselector: '[swiper-news-proposition]'\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { SwiperDirective } from '../../common/swiper/swiper.directive';\r\n\r\nexport class SwiperProductsPropositionDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1.5,\r\n\t\t\tspaceBetween: 30,\r\n\t\t\tbreakpoints: {\r\n\t\t\t\t768: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 40\r\n\t\t\t\t},\r\n\t\t\t\t1024: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 50\r\n\t\t\t\t},\r\n\t\t\t\t1440: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 60\r\n\t\t\t\t},\r\n\t\t\t\t1920: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 70\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tspeed: 600,\r\n\t\t\tcenteredSlides: false,\r\n\t\t\tloop: false,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = node.querySelector('.swiper-container');\r\n\t\tthis.init_(target);\r\n\t\t// console.log('SwiperProductsPropositionDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperProductsPropositionDirective.meta = {\r\n\tselector: '[swiper-products-proposition]'\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { SwiperDirective } from '../../common/swiper/swiper.directive';\r\n\r\nexport class SwiperProjectsPropositionDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1.5,\r\n\t\t\tspaceBetween: 30,\r\n\t\t\tbreakpoints: {\r\n\t\t\t\t768: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 40\r\n\t\t\t\t},\r\n\t\t\t\t1024: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 50\r\n\t\t\t\t},\r\n\t\t\t\t1440: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 60\r\n\t\t\t\t},\r\n\t\t\t\t1920: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 70\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tspeed: 600,\r\n\t\t\tcenteredSlides: false,\r\n\t\t\tloop: false,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = node.querySelector('.swiper-container');\r\n\t\tthis.init_(target);\r\n\t\t// console.log('SwiperProjectsPropositionDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperProjectsPropositionDirective.meta = {\r\n\tselector: '[swiper-projects-proposition]'\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { environment } from '../../environment';\r\nimport { HeaderService } from '../header/header.service';\r\nimport { CartService } from './cart.service';\r\n\r\nexport class CartMiniComponent extends Component {\r\n\r\n\tget total() {\r\n\t\tconst items = this.items || [];\r\n\t\treturn items.reduce((p, c, i) => {\r\n\t\t\treturn p + c.price * c.qty;\r\n\t\t}, 0);\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.items = [];\r\n\t\tCartService.items$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(items => {\r\n\t\t\tthis.items = items;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tonIncrement(item) {\r\n\t\tCartService.incrementItem$(item).pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tonDecrement(item) {\r\n\t\tCartService.decrementItem$(item).pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tonEdit(item) {\r\n\t\tconsole.log('CartMiniComponent.onEdit', item);\r\n\t\twindow.location.href = `${environment.slug.configureProduct}?codprod=${item.code}${item.showefy ? `&sl=${item.showefy.product_link.split('&sl=')[1]}` : ''}`;\r\n\t}\r\n\r\n\tonBuy(event) {\r\n\t\tconsole.log('CartMiniComponent.onBuy');\r\n\t}\r\n\r\n\tonRemoveAll(event) {\r\n\t\tCartService.removeAll$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tonClose(event) {\r\n\t\tHeaderService.onBack();\r\n\t}\r\n\r\n}\r\n\r\nCartMiniComponent.meta = {\r\n\tselector: '[cart-mini]',\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { UserService } from '../user/user.service';\r\nimport { FilesService } from './files.service';\r\n\r\nexport class FilesComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.showFiles = false;\r\n\t\tthis.user = null;\r\n\t\tUserService.me$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(user => {\r\n\t\t\tthis.user = user;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.files = [];\r\n\t\tFilesService.files$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(files => {\r\n\t\t\tthis.files = files;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tonToggleFiles(event) {\r\n\t\tthis.showFiles = !this.showFiles;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonToggleFile(file) {\r\n\t\t(this.isAddedToFiles(file) ? FilesService.removeFile$(file) : FilesService.addFile$(file)).pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(_ => {\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tisAddedToFiles(file) {\r\n\t\treturn FilesService.hasFile(file);\r\n\t}\r\n\r\n\tonDownloadAll(event) {\r\n\t\tevent.preventDefault();\r\n\t\tconst { node } = getContext(this);\r\n\t\tFilesService.currentFiles.forEach(file => {\r\n\t\t\tconst link = document.createElement('a');\r\n\t\t\tlink.setAttribute('href', file.url);\r\n\t\t\tlink.setAttribute('download', file.title);\r\n\t\t\tlink.setAttribute('target', '_blank');\r\n\t\t\tlink.click();\r\n\t\t\t/*\r\n\t\t\tconst item = node.querySelector(`[href]=\"${file.url}\"`);\r\n\t\t\tif (item) {\r\n\t\t\t\titem.click();\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t\t// window.open(file.url, '_blank');\r\n\t\t});\r\n\t}\r\n\r\n\tonRemoveAll(event) {\r\n\t\tFilesService.removeAll$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n}\r\n\r\nFilesComponent.meta = {\r\n\tselector: '[files]',\r\n};\r\n","import { BehaviorSubject } from 'rxjs';\r\n\r\nexport class MenuService {\r\n\r\n\tstatic menu$_ = new BehaviorSubject(-1);\r\n\r\n\tstatic get currentMenu() {\r\n\t\treturn this.menu$_.getValue();\r\n\t}\r\n\r\n\tstatic setMenu(id) {\r\n\t\tthis.menu$_.next(id);\r\n\t}\r\n\r\n\tstatic toggleMenu(id) {\r\n\t\tthis.menu$_.next(this.currentMenu === id ? -1 : id);\r\n\t}\r\n\r\n\tstatic onBack() {\r\n\t\tthis.menu$_.next(-1);\r\n\t}\r\n\r\n\tstatic menu$() {\r\n\t\treturn this.menu$_;\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalResolveEvent, ModalService } from '../../common/modal/modal.service';\r\nimport { environment } from '../../environment';\r\nimport { CartService } from '../cart/cart.service';\r\nimport { MenuService } from '../menu/menu.service';\r\nimport { UserService } from '../user/user.service';\r\nimport { HeaderService } from './header.service';\r\n\r\nexport class HeaderComponent extends Component {\r\n\r\n\tdirection_ = null;\r\n\tget direction() {\r\n\t\treturn this.direction_;\r\n\t}\r\n\tset direction(direction) {\r\n\t\tif (this.direction_ !== direction) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tnode.classList.remove(`scrolling-${this.direction_}`);\r\n\t\t\tnode.classList.add(`scrolling-${direction}`);\r\n\t\t\tthis.direction_ = direction;\r\n\t\t}\r\n\t}\r\n\r\n\tscrolled_ = null;\r\n\tget scrolled() {\r\n\t\treturn this.scrolled_;\r\n\t}\r\n\tset scrolled(scrolled) {\r\n\t\tif (this.scrolled_ !== scrolled) {\r\n\t\t\tthis.scrolled_ = scrolled;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tscrolled ? node.classList.add(`scrolled`) : node.classList.remove(`scrolled`);\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst body = document.querySelector('body');\r\n\t\tthis.header = HeaderService.currentHeader;\r\n\t\tHeaderService.header$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(header => {\r\n\t\t\tthis.header = header;\r\n\t\t\tthis.pushChanges();\r\n\t\t\tbody.setAttribute('class', header !== -1 ? `${header}-active` : '');\r\n\t\t});\r\n\t\tthis.menu = MenuService.currentMenu;\r\n\t\tMenuService.menu$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(menu => {\r\n\t\t\tthis.menu = menu;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.cart = CartService;\r\n\t\tthis.user = null;\r\n\t\tUserService.me$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(user => {\r\n\t\t\tthis.user = user;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tconst pictogram = document.querySelector('.page > .pictogram');\r\n\t\tLocomotiveScrollService.scroll$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe((event) => {\r\n\t\t\tthis.direction = event.direction;\r\n\t\t\tthis.scrolled = event.scroll.y > 100;\r\n\t\t\tconst opacity = 0.1 - 0.1 * Math.min(1, Math.max(0, (event.scroll.y - window.innerHeight * 3) / window.innerHeight / 3));\r\n\t\t\tgsap.set(pictogram, { opacity });\r\n\t\t\t// console.log('HeaderComponent', event.scroll.y, event.direction, event.speed);\r\n\t\t});\r\n\t}\r\n\r\n\tonOpenMarketAndLanguage() {\r\n\t\tHeaderService.onBack();\r\n\t\tModalService.open$({ src: environment.template.modal.marketsAndLanguagesModal }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tconsole.log('HeaderComponent.onOpenMarketAndLanguage', event);\r\n\t\t});\r\n\t}\r\n\r\n\tonLogin() {\r\n\t\tHeaderService.onBack();\r\n\t\tModalService.open$({ src: environment.template.modal.userModal, data: { view: 1 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tconsole.log('HeaderComponent.onLogin', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\twindow.location.href = environment.slug.reservedArea;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonLogout() {\r\n\t\tUserService.signout$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tonToggle(id) {\r\n\t\tHeaderService.toggleHeader(id);\r\n\t}\r\n\r\n\tonBack(event) {\r\n\t\tMenuService.onBack();\r\n\t}\r\n}\r\n\r\nHeaderComponent.meta = {\r\n\tselector: '[header]',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { MenuService } from './menu.service';\r\n\r\nexport class MenuDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = this.target = document.querySelector(`#menu-${this.menu}`);\r\n\t\tconst preview = target.querySelector('[data-target]');\r\n\t\tconst previewSrc = this.previewSrc = preview.src;\r\n\t\tconst container = this.container = target.querySelector(`.container`);\r\n\t\tthis.onClick = this.onClick.bind(this);\r\n\t\tthis.onLeave = this.onLeave.bind(this);\r\n\t\tnode.addEventListener('click', this.onClick);\r\n\t\tMenuService.menu$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(menu_ => {\r\n\t\t\tif (this.menu === menu_) {\r\n\t\t\t\tthis.onEnter();\r\n\t\t\t} else {\r\n\t\t\t\tthis.onExit();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonClick(event) {\r\n\t\tevent.preventDefault();\r\n\t\t// console.log('MenuDirective.onClick', this.menu);\r\n\t\tMenuService.toggleMenu(this.menu);\r\n\t}\r\n\r\n\tonLeave() {\r\n\t\t// console.log('MenuDirective.onLeave', this.menu);\r\n\t\tMenuService.onBack();\r\n\t\tthis.onExit();\r\n\t}\r\n\r\n\tonEnter() {\r\n\t\t// console.log('MenuDirective.onEnter', this.menu);\r\n\t\tconst target = this.target;\r\n\t\tconst preview = target.querySelector('[data-target]');\r\n\t\tpreview.src = this.previewSrc;\r\n\t\tconst container = this.container;\r\n\t\tcontainer.addEventListener('mouseleave', this.onLeave);\r\n\t}\r\n\r\n\tonExit() {\r\n\t\t// console.log('MenuDirective.onExit', this.menu);\r\n\t\tconst container = this.container;\r\n\t\tcontainer.removeEventListener('mouseleave', this.onLeave);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.onExit();\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.removeEventListener('click', this.onClick);\r\n\t}\r\n}\r\n\r\nMenuDirective.meta = {\r\n\tselector: '[menu]',\r\n\tinputs: ['menu'],\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { LocationService } from '../../common/location/location.service';\r\n\r\nexport class NewsletterPropositionComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tonNewsletter(event) {\r\n\t\tconsole.log('NewsletterPropositionComponent.onNewsletter', this.form.value);\r\n\t\tconst encoded = LocationService.encode('email', this.form.value.email, {});\r\n\t\twindow.location.href = `${this.action}?params=${encoded}`;\r\n\t}\r\n}\r\n\r\nNewsletterPropositionComponent.meta = {\r\n\tselector: '[newsletter-proposition]',\r\n\tinputs: ['action'],\r\n};\r\n","import { of } from 'rxjs';\r\nimport { map, tap } from 'rxjs/operators';\r\nimport { ApiService } from '../../common/api/api.service';\r\n\r\nexport class SearchService {\r\n\r\n\tstatic search$_() {\r\n\t\tif (SearchService.items_) {\r\n\t\t\treturn of(SearchService.items_);\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/search/search.json').pipe(\r\n\t\t\t\ttap(items => {\r\n\t\t\t\t\titems.forEach(item => {\r\n\t\t\t\t\t\titem.title = SearchService.toTitleCase(item.title);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tSearchService.items_ = items;\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic search$(query) {\r\n\t\tquery = query.toLowerCase();\r\n\t\treturn this.search$_().pipe(\r\n\t\t\tmap(items => {\r\n\t\t\t\titems = items.filter(item => item.title.toLowerCase().indexOf(query) !== -1);\r\n\t\t\t\titems.sort((a, b) => {\r\n\t\t\t\t\treturn a.title.toLowerCase().indexOf(query) - b.title.toLowerCase().indexOf(query);\r\n\t\t\t\t});\r\n\t\t\t\treturn items;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic toTitleCase(sentence, seps = ' _-/') {\r\n\t\tconst capitalize = str => str.length ? str[0].toUpperCase() + str.slice(1).toLowerCase() : '';\r\n\t\tconst escape = str => str.replace(/./g, c => `\\\\${c}`);\r\n\t\tlet wordPattern = new RegExp(`[^${escape(seps)}]+`, 'g');\r\n\t\treturn sentence.replace(wordPattern, capitalize);\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { of } from 'rxjs';\r\nimport { auditTime, map, switchMap, takeUntil } from 'rxjs/operators';\r\nimport { SearchService } from './search.service';\r\n\r\nexport class SearchComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.items = [];\r\n\t\tthis.visibleItems = [];\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tsearch: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tthis.search$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe((items) => {\r\n\t\t\tthis.items = items;\r\n\t\t\tthis.visibleItems = items.slice(0, Math.min(10, items.length));\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tsearch$() {\r\n\t\treturn this.form.changes$.pipe(\r\n\t\t\tauditTime(500),\r\n\t\t\tmap(changes => changes.search),\r\n\t\t\tswitchMap(query => {\r\n\t\t\t\tif (query != null && query.length > 1) {\r\n\t\t\t\t\treturn SearchService.search$(query);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn of([]);\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nSearchComponent.meta = {\r\n\tselector: '[search]',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class SubmenuDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst items = Array.prototype.slice.call(node.querySelectorAll('[data-picture]'));\r\n\t\tconst target = node.querySelector('[data-target]');\r\n\t\tgsap.set(target, { opacity: 1 });\r\n\t\titems.forEach(item => {\r\n\t\t\titem.addEventListener('mouseover', (event) => {\r\n\t\t\t\tconst picture = item.getAttribute('data-picture');\r\n\t\t\t\tgsap.set(target, { opacity: 0 });\r\n\t\t\t\ttarget.onload = () => {\r\n\t\t\t\t\tgsap.to(target, {\r\n\t\t\t\t\t\tduration: 0.5,\r\n\t\t\t\t\t\tdelay: 0.1,\r\n\t\t\t\t\t\topacity: 1,\r\n\t\t\t\t\t\tease: Power4.easeOut,\r\n\t\t\t\t\t\toverwrite: 'all',\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\ttarget.src = picture;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nSubmenuDirective.meta = {\r\n\tselector: '[submenu]'\r\n};\r\n","import { Component } from 'rxcomp';\r\n\r\nexport class TreeComponent extends Component {\r\n\r\n\thasItems(item) {\r\n\t\treturn item.items && item.items.length > 0;\r\n\t}\r\n\r\n\tonClick(item) {\r\n\t\tthis.tree.forEach(x => {\r\n\t\t\tx.active = x.id === item.id ? (this.hasItems(item) ? !item.active : true) : false;\r\n\t\t});\r\n\t\tif (item.active) {\r\n\t\t\tthis.open.next(item);\r\n\t\t}\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonOpen(item) {\r\n\t\tthis.open.next(item);\r\n\t}\r\n\r\n}\r\n\r\nTreeComponent.meta = {\r\n\tselector: '[tree]',\r\n\tinputs: ['tree'],\r\n\toutputs: ['open'],\r\n\ttemplate: /* html */ `\r\n\t\t<li class=\"folder\" [class]=\"{ active: item.active }\" *for=\"let item of tree\">\r\n\t\t\t<span [innerHTML]=\"item.title\" (click)=\"onClick(item)\"></span>\r\n\t\t\t<ul [tree]=\"item.items\" (open)=\"onOpen($event)\"></ul>\r\n\t\t</li>\r\n\t`\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { UserService } from './user.service';\r\n\r\nexport class UserForgotComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tform.patch({\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('UserForgotComponent.onSubmit', form.value);\r\n\t\tif (form.valid) {\r\n\t\t\tform.submitted = true;\r\n\t\t\tUserService.forgot$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\tconsole.log('UserForgotComponent.onSubmit', response);\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Forgot\",\r\n\t\t\t\t\t'form_name': \"Recupero Password\"\r\n\t\t\t\t});\r\n\t\t\t\tform.reset();\r\n\t\t\t\tthis.forgot.next(true);\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('UserForgotComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tform.submitted = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonSignIn() {\r\n\t\tthis.viewSignIn.next();\r\n\t}\r\n\r\n\tonSignUp() {\r\n\t\tthis.viewSignUp.next();\r\n\t}\r\n}\r\n\r\nUserForgotComponent.meta = {\r\n\tselector: '[user-forgot]',\r\n\toutputs: ['forgot', 'viewSignIn', 'viewSignUp'],\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { UserService, UserViews } from './user.service';\r\n\r\nexport class UserComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.views = UserViews;\r\n\t\tthis.view = this.view || UserViews.SIGN_UP;\r\n\t}\r\n\r\n\tsetView(view) {\r\n\t\tthis.view = view;\r\n\t\tthis.pushChanges();\r\n\t\tconst { node } = getContext(this);\r\n\t\tLocomotiveScrollService.scrollTo(node, { offset: -100 });\r\n\t}\r\n\r\n\tonViewForgot(event) {\r\n\t\t// console.log('UserComponent.onForgot');\r\n\t\tthis.setView(UserViews.FORGOTTEN);\r\n\t}\r\n\r\n\tonViewSignIn(event) {\r\n\t\t// console.log('UserComponent.onSignIn');\r\n\t\tthis.setView(UserViews.SIGN_IN);\r\n\t}\r\n\r\n\tonViewSignUp(event) {\r\n\t\t// console.log('UserComponent.onSignUp');\r\n\t\tthis.setView(UserViews.SIGN_UP);\r\n\t}\r\n\r\n\tonSignIn(user) {\r\n\t\tconsole.log('UserComponent.onSignIn', user);\r\n\t\tUserService.setUser(user);\r\n\t\tif (this.navTo) {\r\n\t\t\twindow.location.href = this.navTo;\r\n\t\t}\r\n\t\t// nav to profile\r\n\t}\r\n\r\n\tonSignUp(user) {\r\n\t\tconsole.log('UserComponent.onSignUp', user);\r\n\t\tUserService.setUser(user);\r\n\t\tif (this.navTo) {\r\n\t\t\twindow.location.href = this.navTo;\r\n\t\t}\r\n\t\t// nav to profile\r\n\t}\r\n\r\n\tonForgot(email) {\r\n\t\t/*\r\n\t\tconsole.log('UserComponent.onForgot', email);\r\n\t\tthis.setView(UserViews.SIGN_IN);\r\n\t\t*/\r\n\t}\r\n}\r\n\r\nUserComponent.meta = {\r\n\tselector: '[user]',\r\n\tinputs: ['navTo', 'view']\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalOutletComponent } from '../../common/modal/modal-outlet.component';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\nimport { UserComponent } from './user.component';\r\nimport { UserViews } from './user.service';\r\n\r\nexport class UserModalComponent extends UserComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tconst data = parentInstance.modal.data;\r\n\t\t\tthis.view = data.view;\r\n\t\t\t// console.log('UserModalComponent.onInit', data);\r\n\t\t}\r\n\t\tLocomotiveScrollService.stop();\r\n\t}\r\n\r\n\tsetView(view) {\r\n\t\tthis.view = view;\r\n\t\tthis.pushChanges();\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = window.innerWidth >= 1024 ? node.querySelector('.modal__inner') : node;\r\n\t\ttarget.scrollTo(0, 0);\r\n\t}\r\n\r\n\tonViewForgot() {\r\n\t\tconsole.log('UserModalComponent.onViewForgot');\r\n\t\tthis.setView(UserViews.FORGOTTEN);\r\n\t}\r\n\r\n\tonViewSignIn() {\r\n\t\tconsole.log('UserModalComponent.onViewSignIn');\r\n\t\tthis.setView(UserViews.SIGN_IN);\r\n\t}\r\n\r\n\tonViewSignUp() {\r\n\t\tconsole.log('UserModalComponent.onViewSignUp');\r\n\t\tthis.setView(UserViews.SIGN_UP);\r\n\t}\r\n\r\n\tonClose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n\tonSignUp(user) {\r\n\t\t// console.log('UserModalComponent.onSignUp', user);\r\n\t\tModalService.resolve(user);\r\n\t}\r\n\r\n\tonSignIn(user) {\r\n\t\t// console.log('UserModalComponent.onSignIn', user);\r\n\t\tModalService.resolve(user);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tLocomotiveScrollService.start();\r\n\t}\r\n}\r\n\r\nUserModalComponent.meta = {\r\n\tselector: '[user-modal]'\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { UserService } from './user.service';\r\n\r\nexport class UserSigninComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tpassword: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tform.patch({\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tpassword: '********',\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('UserSigninComponent.onSubmit', form.value);\r\n\t\tif (form.valid) {\r\n\t\t\tform.submitted = true;\r\n\t\t\tUserService.signin$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\tconsole.log('UserSigninComponent.onSubmit', response);\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Signin\",\r\n\t\t\t\t\t'form_name': \"Login\"\r\n\t\t\t\t});\r\n\t\t\t\tform.reset();\r\n\t\t\t\tthis.signIn.next(response);\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('UserSigninComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tform.submitted = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonForgot(event) {\r\n\t\tthis.viewForgot.next();\r\n\t}\r\n\r\n\tonSignUp(event) {\r\n\t\tthis.viewSignUp.next();\r\n\t}\r\n}\r\n\r\nUserSigninComponent.meta = {\r\n\tselector: '[user-signin]',\r\n\toutputs: ['signIn', 'viewForgot', 'viewSignUp'],\r\n};\r\n","import { FormValidator } from 'rxcomp-form';\r\n\r\nexport default function RequiredIfValidator(fieldName, formGroup) {\r\n\r\n\treturn new FormValidator((value) => {\r\n\t\tconst field = formGroup ? formGroup.get(fieldName) : null;\r\n\t\treturn field && field.value && !value ? { required: { value: value, requiredIf: fieldName } } : null;\r\n\t});\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport MatchValidator from '../../controls/match.validator';\r\nimport RequiredIfValidator from '../../controls/required-if.validator';\r\nimport { UserService } from './user.service';\r\n\r\nexport class UserSignupComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tlastName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcountry: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcity: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcompany: new FormControl(null),\r\n\t\t\toccupation: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tpassword: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tpasswordConfirm: new FormControl(null, [Validators.RequiredValidator(), MatchValidator('password', form)]),\r\n\t\t\tprivacy: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tnewsletter: new FormControl(null),\r\n\t\t\tnewsletterLanguage: new FormControl(null, [RequiredIfValidator('newsletter', form)]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn UserService.data$().pipe(\r\n\t\t\ttap(data => {\r\n\t\t\t\tconst controls = this.controls;\r\n\t\t\t\tcontrols.country.options = FormService.toSelectOptions(data.country.options);\r\n\t\t\t\tcontrols.occupation.options = FormService.toSelectOptions(data.occupation.options);\r\n\t\t\t\tcontrols.newsletterLanguage.options = FormService.toSelectOptions(data.newsletterLanguage.options);\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tconst controls = this.controls;\r\n\t\tconst country = controls.country.options.length > 1 ? controls.country.options[1].id : null;\r\n\t\tconst occupation = controls.occupation.options.length > 1 ? controls.occupation.options[1].id : null;\r\n\t\tform.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\tcountry: country,\r\n\t\t\tcity: 'Pesaro',\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\toccupation: occupation,\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tpassword: '********',\r\n\t\t\tpasswordConfirm: '********',\r\n\t\t\tprivacy: true,\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('UserSignupComponent.onSubmit', form.value);\r\n\t\tif (form.valid) {\r\n\t\t\tform.submitted = true;\r\n\t\t\tUserService.signup$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\tconsole.log('UserSignupComponent.onSubmit', response);\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Registration\",\r\n\t\t\t\t\t'form_name': \"Registrazione\"\r\n\t\t\t\t});\r\n\t\t\t\tform.reset();\r\n\t\t\t\tthis.signUp.next(response);\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('UserSignupComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tform.submitted = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonSignIn() {\r\n\t\tthis.viewSignIn.next();\r\n\t}\r\n}\r\n\r\nUserSignupComponent.meta = {\r\n\tselector: '[user-signup]',\r\n\toutputs: ['signUp', 'viewSignIn'],\r\n};\r\n","import { FormValidator } from 'rxcomp-form';\r\n\r\nexport default function MatchValidator(fieldName, formGroup) {\r\n\r\n\treturn new FormValidator((value) => {\r\n\t\tconst field = formGroup ? formGroup.get(fieldName) : null;\r\n\t\tif (!value || !field) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn value !== field.value ? { match: { value: value, match: field.value } } : null;\r\n\t});\r\n\r\n}\r\n","import { Module } from 'rxcomp';\r\nimport { MapComponent } from '../partials/map/map.component';\r\nimport { SwiperGalleryDirective } from '../partials/swiper-gallery/swiper-gallery.directive';\r\nimport { SwiperHomepageDirective } from '../partials/swiper-homepage/swiper-homepage.directive';\r\nimport { SwiperNewsPropositionDirective } from '../partials/swiper-news-proposition/swiper-news-proposition.directive';\r\nimport { SwiperProductsPropositionDirective } from '../partials/swiper-products-proposition/swiper-products-proposition.directive';\r\nimport { SwiperProjectsPropositionDirective } from '../partials/swiper-projects-proposition/swiper-projects-proposition.directive';\r\nimport { CartMiniComponent } from './cart/cart-mini.component';\r\nimport { FilesComponent } from './files/files.component';\r\nimport { HeaderComponent } from './header/header.component';\r\nimport { MenuDirective } from './menu/menu.directive';\r\nimport { NewsletterPropositionComponent } from './newsletter-proposition/newsletter-proposition.component';\r\nimport { SearchComponent } from './search/search.component';\r\nimport { SubmenuDirective } from './submenu/submenu.directive';\r\nimport { TreeComponent } from './tree/tree.component';\r\nimport { UserForgotComponent } from './user/user-forgot.component';\r\nimport { UserModalComponent } from './user/user-modal.component';\r\nimport { UserSigninComponent } from './user/user-signin.component';\r\nimport { UserSignupComponent } from './user/user-signup.component';\r\nimport { UserComponent } from './user/user.component';\r\n\r\nconst factories = [\r\n\tCartMiniComponent,\r\n\tFilesComponent,\r\n\tHeaderComponent,\r\n\tMapComponent,\r\n\tMenuDirective,\r\n\tNewsletterPropositionComponent,\r\n\tSearchComponent,\r\n\tSubmenuDirective,\r\n\tSwiperGalleryDirective,\r\n\tSwiperHomepageDirective,\r\n\tSwiperNewsPropositionDirective,\r\n\tSwiperProductsPropositionDirective,\r\n\tSwiperProjectsPropositionDirective,\r\n\tTreeComponent,\r\n\tUserComponent,\r\n\tUserForgotComponent,\r\n\tUserModalComponent,\r\n\tUserSigninComponent,\r\n\tUserSignupComponent,\r\n];\r\n\r\nconst pipes = [\r\n];\r\n\r\nexport class SharedModule extends Module { }\r\n\r\nSharedModule.meta = {\r\n\timports: [\r\n\t],\r\n\tdeclarations: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n\texports: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n};\r\n","import { CoreModule, Module } from 'rxcomp';\r\nimport { FormModule } from 'rxcomp-form';\r\nimport { AppComponent } from './app.component';\r\nimport { CommonModule } from './common/common.module';\r\nimport { ControlsModule } from './controls/controls.module';\r\nimport { AmbienceComponent } from './pages/ambience/ambience.component';\r\nimport { AteliersAndStoresComponent } from './pages/ateliers-and-stores/ateliers-and-stores.component';\r\nimport { CareersComponent } from './pages/careers/careers.component';\r\nimport { ContactsComponent } from './pages/contacts/contacts.component';\r\nimport { DealersComponent } from './pages/dealers/dealers.component';\r\nimport { DesignersComponent } from './pages/designers/designers.component';\r\nimport { MarketsAndLanguagesModalComponent } from './pages/markets-and-languages/markets-and-languages-modal.component';\r\nimport { MaterialsModalComponent } from './pages/materials/materials-modal.component';\r\nimport { MaterialsComponent } from './pages/materials/materials.component';\r\nimport { NewsComponent } from './pages/news/news.component';\r\nimport { NewsletterComponent } from './pages/newsletter/newsletter.component';\r\nimport { ProductsConfigureComponent } from './pages/products-configure/products-configure.component';\r\nimport { ProductsDetailComponent } from './pages/products-detail/products-detail.component';\r\nimport { ProductsComponent } from './pages/products/products.component';\r\nimport { ProjectsRegistrationModalComponent } from './pages/projects-registration/projects-registration-modal.component';\r\nimport { ProjectsRegistrationComponent } from './pages/projects-registration/projects-registration.component';\r\nimport { ProjectsComponent } from './pages/projects/projects.component';\r\nimport { ReservedAreaComponent } from './pages/reserved-area/reserved-area.component';\r\nimport { StoreLocatorComponent } from './pages/store-locator/store-locator.component';\r\nimport { SharedModule } from './shared/shared.module';\r\n\r\nexport class AppModule extends Module { }\r\n\r\nAppModule.meta = {\r\n\timports: [\r\n\t\tCoreModule,\r\n\t\tFormModule,\r\n\t\tCommonModule,\r\n\t\tControlsModule,\r\n\t\tSharedModule,\r\n\t],\r\n\tdeclarations: [\r\n\t\tAmbienceComponent,\r\n\t\tAteliersAndStoresComponent,\r\n\t\tCareersComponent,\r\n\t\tContactsComponent,\r\n\t\tDealersComponent,\r\n\t\tDesignersComponent,\r\n\t\tMarketsAndLanguagesModalComponent,\r\n\t\tMaterialsComponent,\r\n\t\tMaterialsModalComponent,\r\n\t\tNewsComponent,\r\n\t\tNewsletterComponent,\r\n\t\tProductsComponent,\r\n\t\tProductsConfigureComponent,\r\n\t\tProductsDetailComponent,\r\n\t\tProjectsComponent,\r\n\t\tProjectsRegistrationComponent,\r\n\t\tProjectsRegistrationModalComponent,\r\n\t\tReservedAreaComponent,\r\n\t\tStoreLocatorComponent,\r\n\t],\r\n\tbootstrap: AppComponent,\r\n};\r\n","import { Browser } from 'rxcomp';\r\nimport { AppModule } from './app.module';\r\n\r\nBrowser.bootstrap(AppModule);\r\n"]}