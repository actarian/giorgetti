{"version":3,"sources":["src/js/main.js","../../src/js/common/modal/modal.service.js","../../src/js/common/utils/utils.js","../../src/js/environment.js","../../src/js/environment.static.js","../../src/js/environment.served.js","../../src/js/common/http/http.service.js","../../src/js/common/label/label.pipe.js","../../src/js/common/location/location.service.js","../../src/js/common/language/language.service.js","../../src/js/common/api/api.service.js","../../src/js/common/storage/local-storage.service.js","../../src/js/shared/header/header.service.js","../../src/js/shared/cart-mini/cart-mini.service.js","../../src/js/common/storage/session-storage.service.js","../../src/js/shared/user/user.service.js","../../src/js/app.component.js","../../src/js/common/download/download.directive.js","../../src/js/common/locomotive-scroll/locomotive-scroll.service.js","../../src/js/common/dropdown/dropdown.directive.js","../../src/js/common/dropdown/dropdown-item.directive.js","../../src/js/common/env/env.pipe.js","../../src/js/common/flag/flag.pipe.js","../../src/js/common/highlight/highlight.pipe.js","../../src/js/common/html/html.pipe.js","../../src/js/common/id/id.directive.js","../../src/js/common/label-for/label-for.directive.js","../../src/js/common/locomotive-scroll/locomotive-scroll-sticky.directive.js","../../src/js/common/locomotive-scroll/locomotive-scroll-to.directive.js","../../src/js/common/locomotive-scroll/locomotive-scroll.directive.js","../../src/js/common/locomotive-scroll/scroll.directive.js","../../src/js/common/modal/modal-outlet.component.js","../../src/js/common/number/number.pipe.js","../../src/js/common/share/share.directive.js","../../src/js/common/slug/slug.pipe.js","../../src/js/common/svg/svg-icon.structure.js","../../src/js/common/swiper/swiper.directive.js","../../src/js/common/thron/thron.service.js","../../src/js/common/thron/thron.component.js","../../src/js/common/title/title.directive.js","../../src/js/common/common.module.js","../../src/js/controls/control.component.js","../../src/js/controls/control-checkbox.component.js","../../src/js/common/keyboard/keyboard.service.js","../../src/js/controls/control-custom-select.component.js","../../src/js/controls/control-email.component.js","../../src/js/controls/control-file.component.js","../../src/js/controls/control-password.component.js","../../src/js/controls/control-search.component.js","../../src/js/controls/control-text.component.js","../../src/js/controls/control-textarea.component.js","../../src/js/controls/errors.component.js","../../src/js/controls/test.component.js","../../src/js/controls/controls.module.js","../../src/js/common/filter/filter-item.js","../../src/js/common/filter/filter.service.js","../../src/js/controls/form.service.js","../../src/js/pages/ambience/ambience.service.js","../../src/js/pages/ambience/ambience.component.js","../../src/js/pages/ateliers-and-stores/ateliers-and-stores.service.js","../../src/js/pages/ateliers-and-stores/ateliers-and-stores.component.js","../../src/js/pages/careers/careers-modal.component.js","../../src/js/common/gtm/gtm.service.js","../../src/js/controls/required-if.validator.js","../../src/js/pages/careers/careers.service.js","../../src/js/pages/careers/careers.component.js","../../src/js/common/once/once.service.js","../../src/js/common/facebook/facebook.service.js","../../src/js/common/google/google.service.js","../../src/js/common/linkedin/linkedin.service.js","../../src/js/pages/cart/cart.service.js","../../src/js/pages/cart/cart.component.js","../../src/js/pages/contacts/contacts.service.js","../../src/js/pages/contacts/contacts.component.js","../../src/js/pages/dealers/dealers.service.js","../../src/js/pages/dealers/dealers.component.js","../../src/js/pages/designers/designers.service.js","../../src/js/pages/designers/designers.component.js","../../src/js/pages/markets-and-languages/markets-and-languages.service.js","../../src/js/pages/markets-and-languages/markets-and-languages-modal.component.js","../../src/js/pages/materials/materials-modal.component.js","../../src/js/pages/materials/materials.service.js","../../src/js/pages/materials/materials.component.js","../../src/js/pages/news/news.service.js","../../src/js/pages/news/news.component.js","../../src/js/pages/newsletter/newsletter.service.js","../../src/js/pages/newsletter/newsletter.component.js","../../src/js/pages/products-configure/products-configure.component.js","../../src/js/pages/products-detail/products-detail.service.js","../../src/js/pages/products-detail/products-detail.component.js","../../src/js/pages/products/products.service.js","../../src/js/pages/products/products.component.js","../../src/js/pages/projects-registration/projects-registration-modal.component.js","../../src/js/pages/projects-registration/projects-registration.service.js","../../src/js/pages/projects-registration/projects-registration.component.js","../../src/js/pages/projects/projects.service.js","../../src/js/pages/projects/projects.component.js","../../src/js/shared/files/files.service.js","../../src/js/pages/reserved-area/reserved-area.service.js","../../src/js/pages/reserved-area/reserved-area.component.js","../../src/js/pages/store-locator/store-locator.service.js","../../src/js/pages/store-locator/store-locator.component.js","../../node_modules/@googlemaps/markerclustererplus/src/overlay-view-safe.ts","../../node_modules/@googlemaps/markerclustererplus/src/cluster-icon.ts","../../src/js/partials/map/map.component.js","../../node_modules/@googlemaps/markerclustererplus/src/cluster.ts","../../node_modules/@googlemaps/markerclustererplus/src/markerclusterer.ts","../../src/js/partials/map/map.style.js","../../src/js/partials/swiper-gallery/swiper-gallery.directive.js","../../src/js/partials/swiper-homepage/swiper-homepage.directive.js","../../src/js/partials/swiper-news-proposition/swiper-news-proposition.directive.js","../../src/js/partials/swiper-products-proposition/swiper-products-proposition.directive.js","../../src/js/partials/swiper-projects-proposition/swiper-projects-proposition.directive.js","../../src/js/shared/cart-mini/cart-mini.component.js","../../src/js/shared/files/files.component.js","../../src/js/shared/menu/menu.service.js","../../src/js/shared/header/header.component.js","../../src/js/shared/menu/menu.directive.js","../../src/js/shared/newsletter-proposition/newsletter-proposition.component.js","../../src/js/shared/search/search.service.js","../../src/js/shared/search/search.component.js","../../src/js/shared/submenu/submenu.directive.js","../../src/js/shared/tree/tree.component.js","../../src/js/shared/user/user-forgot.component.js","../../src/js/shared/user/user.component.js","../../src/js/shared/user/user-modal.component.js","../../src/js/shared/user/user-signin.component.js","../../src/js/controls/match.validator.js","../../src/js/shared/user/user-signup.component.js","../../src/js/shared/shared.module.js","../../src/js/app.module.js","../../src/js/main.js"],"names":["g","f","exports","module","require","define","amd","globalThis","self","rxcomp","form","rxjs","operators","this","rxcompForm","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_defineProperty","obj","value","_inheritsLoose","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_assertThisInitialized","ReferenceError","ModalEvent","data","ModalResolveEvent","_ModalEvent","apply","arguments","ModalRejectEvent","_ModalEvent2","ModalService","open$","modal","_this","getTemplate$","src","pipe","map","template","node","getNode","tap","modal$","next","hasModal","switchMap","events$","_","load$","url","from","fetch","then","response","text","div","document","createElement","innerHTML","firstElementChild","reject","resolve","Subject","Utils","merge","source","keys","forEach","Array","isArray","NODE","BASE_HREF","get","URLSearchParams","window","location","search","querySelector","getAttribute","HEROKU","host","indexOf","STATIC","port","DEVELOPMENT","split","ENV","PRODUCTION","Environment","_proto","options","assign","getAbsoluteUrl","path","params","origin","replace","getPath","isLocal","href","set","console","log","githubDocs","defaultOptions","flags","production","heroku","slug","markets","defaultMarket","currentMarket","languages","defaultLanguage","currentLanguage","labels","select","browse","cancel","error_email","error_match","error_required","loading","remove","required","select_file","update","upload","drag_and_drop_images","environmentOptions","api","assets","configureProduct","reservedArea","userModal","careersModal","projectsRegistrationModal","materialsModal","marketsAndLanguagesModal","facebook","appId","fields","scope","tokenClient","version","google","clientId","linkedIn","clientSecret","googleMaps","apiKey","thron","workers","image","prefetch","environment","HttpService","http$","method","format","userPass","response_","headers","Accept","Content-Type","body","JSON","stringify","undefined","credentials","btoa","Headers","typedResponse","contentType","json","ok","Promise","error","warn","catchError","throwError","getError","get$","query","delete$","post$","put$","patch$","object","status","statusCode","statusMessage","statusText","LabelPipe","_Pipe","transform","labels_","getKeys","_len","_key","x","join","setLabels","LABELS","Pipe","meta","name","LocationService","has","keyOrValue","pushParams","history","pushState","title","toString","to","replaceState","pathname","state","deserialize","encoded","decode","serialize","encode","decoded","atob","parse","LanguageService","getDefaultLanguages","alternates","getDefaultLanguage","lang","setLanguage","language","selectedLanguage","setLanguage$","html","labelsMatch","exec","Function","call","bhereMatch","bhere","activeLanguage","toggleLanguages","showLanguages","pushChanges","_this2","find","ApiService","_HttpService","LocalStorageService","delete","isLocalStorageSupported","localStorage","removeItem","exist","e","cache","push","setItem","supported","HeaderService","setHeader","id","header$_","toggleHeader","currentHeader","onBack","header$","getValue","BehaviorSubject","CartMiniService","hasItem","item","items","currentItems","setItems","items$_","items$","localItems","of","incrementItem$","slice","item_","qty","decrementItem$","removeItem$","addItem$","index","splice","removeAll$","getPrice$","getPriceAndAddItem$","match","showefy","product_link","reduce","SessionStorageService","isSessionStorageSupported","sessionStorage","UserViews","SIGN_IN","SIGN_UP","FORGOTTEN","User","firstName","substr","toUpperCase","lastName","UserService","setUser","user","user$_","data$","forgot$","payload","me$","sessionUser","mapUser","signin$","signout$","_this3","signup$","_this4","tryFacebook$","me","tryGoogle$","tryLinkedin$","sessionStorage$","mapUsers","users","AppComponent","_Component","onInit","getContext","classList","header","takeUntil","unsubscribe$","subscribe","onOpenMarketAndLanguage","event","onLogin","view","onLogout","first","onProjectRegistration","onAddToCart","onOpenMiniCart","Component","selector","DownloadDirective","_Directive","onChanges","setAttribute","download","Directive","inputs","LocomotiveScrollService","scroll","scroll$","init","useKeyboard","smoothMobile","inertia","smooth","lerp","getDirection","getSpeed","initClass","scrollingClass","draggingClass","smoothClass","scrollbarContainer","scrollbarClass","multiplier","firefoxMultiplier","touchMultiplier","scrollFromAnywhere","gestureDirection","reloadOnContextChange","resetNativeScroll","el","useLocomotiveScroll","instance","LocomotiveScroll","add","innerWidth","isMacLike","test","navigator","platform","isIOS","isMacOs","toLowerCase","isSafari","vendor","userAgent","init$","fromEvent","delay","on","speed","style","pointerEvents","direction","y","previousY","scrollTop","addEventListener","stop","start","scrollTo","offset","currentTop","distance","getBoundingClientRect","top","pow","gsap","scroll-behavior","disableLerp","duration","Math","abs","ease","Quad","easeOut","overwrite","onUpdate","onComplete","scrollToSelector","ReplaySubject","DROPDOWN_ID","DropdownDirective","trigger","opened","onClick","bind","onDocumentClick","openDropdown","closeDropdown","addListeners","dropdown$","contains","addDocumentListeners","dropped","removeDocumentListeners","removeListeners","removeEventListener","onDestroy","nextId","dropdown","id_","outputs","DropdownItemDirective","enter$","leave$","EnvPipe","keypath","env","k","shift","FlagPipe","HighlightPipe","escapedQuery","escapeRegexChars","regExp","RegExp","b","safeToString","trim","encodeHTML","decodeHTML","HtmlPipe","m","n","String","fromCharCode","parseInt","unescapes","rx","IdDirective","LabelForDirective","labelFor","LocomotiveScrollStickyDirective","args","concat","targetNode","until","sticky$","rect","bottom","innerHeight","offsetHeight","sticked","height","min","sticked_","LocomotiveScrollToDirective","initialFocus","_getContext","expression","outputFunction","makeFunction","scrollTo$","_getContext2","parentInstance","preventDefault","LocomotiveScrollDirective","ResizeObserver","entries","observe","ScrollDirective","scrollSpeed","parseFloat","wh","wh2","currentY","getProperty","ModalOutletComponent","modalNode","modal_","removeChild","appendChild","compile","NumberPipe","Intl","NumberFormat","ShareDirective","share","open","encodeURI","encodeURIComponent","c","charCodeAt","facebookUrl","pinterestUrl","linkedInUrl","twitterUrl","whatsappUrl","mailToUrl","shareTitle","shareUrl","SlugPipe","SvgIconStructure","_Structure","name_","parentNode","_element$classList","element","createElementNS","w","width","h","setAttributeNS","rxcompId","replaceChild","Structure","SwiperDirective","slidesPerView","spaceBetween","centeredSlides","autoplay","keyboardControl","mousewheelControl","pagination","clickable","keyboard","enabled","onlyInViewport","init_","swiperInitOrUpdate_","removeListeners_","swiperDestroy_","onBeforePrint","slideToIndex","swiper","slideTo","hasPrev","activeIndex","slides","hasNext","slidePrev","slideNext","opacity","slideChange","addListeners_","callback","swiperDirectiveInit","Power2","setTimeout","Swiper","_opening","destroy","matchMedia","matches","ThronService","thron$","THRONContentExperience","THRONPlayer","script","loaded$","shareReplay","head","ID","ThronComponent","THRON","media","splitted","controls","hasAttribute","loop","player","muted","displayLinked","noSkin","onReady","onCanPlay","onPlaying","onPlay","onPause","video","mediaContainer","ready","canPlay","off","qualities","qualityLevels","highestQuality","currentQuality","playing","play","pause","complete","playVideo","pauseVideo","toggle","playing_","TitleDirective","title_","removeAttribute","factories","pipes","CommonModule","_Module","Module","imports","declarations","ControlComponent","control","ControlCheckboxComponent","_ControlComponent","label","KeyboardService","keydown$","keydown$_","keyup$","keyup$_","keys$","keys$_","type","startWith","key$","key$_","regexp","filter","typing$","typing$_","typing","clearTimeout","ControlCustomSelectComponent","dropdownId","word","scrollToWord","children","offsetTop","setOption","isMultiple","TypeError","_readOnlyError","change","hasOption","getLabel","v","onDropped","$event","touched","multiple","ControlEmailComponent","ControlFileComponent","file","onReaderComplete","onInputDidChange","files","lastModified","lastModifiedDate","size","reader","FileReader","readAsDataURL","content","result","ControlPasswordComponent","ControlSearchComponent","disabled","ControlTextComponent","ControlTextareaComponent","ErrorsComponent","TestComponent","onTest","onReset","reset","ControlsModule","FilterMode","FilterItem","change$","mode","placeholder","values","unshift","clear","FilterService","initialParams","filters","getParamsCount","locationParams","any","changes","filterItems","updateFilterStates","skipFilter","filteredItems","option","count","FormService","toOptions","toSelectOptions","AmbienceService","all$","filters$","AmbienceComponent","ambienceId","FormGroup","ambience","FormControl","category","material","designer","changes$","setFilterByKeyAndValue","onLoad","combineLatest","filterService","materials","designers","patch","onSearch","model","clearFilter","stopImmediatePropagation","AteliersAndStoresService","ateliers$","stores$","AteliersAndStoresComponent","types","Atelier","Store","filteredAteliers","filteredStores","country","CareersModalComponent","position","onClose","GtmService","dataLayer","push_","RequiredIfValidator","fieldName","formGroup","shouldBe","FormValidator","field","requiredIf","CareersService","positions$","submit$","CareersComponent","success","positions","Validators","RequiredValidator","email","EmailValidator","telephone","region","city","domain","cv","presentationLetter","message","privacy","checkRequest","antiforgery","checkField","results","onSubmit","valid","submitted","form_name","onOpenPosition","close","OnceService","paths","callbackName","callback$","uid","async","scripts","getElementsByTagName","insertBefore","nextSibling","Event","FacebookService","facebook$","protocol","facebook_","concatMap","cookie","xfbml","AppEvents","logPageView","status$","getLoginStatus","authResponse_","authResponse","login$","login","logout$","logout","_this5","l","accessToken","facebookToken","GoogleService","google$","Observable","gapi","once$","profile","currentUser","getBasicProfile","getId","getName","getGivenName","getFamilyName","picture","getImageUrl","getEmail","googleToken","access_token","auth2Instance$","isSignedIn","signOut","signed","getAuth2$","_this6","auth2","auth2init$","load","_this7","readAccessToken","getAuthResponse","code","signIn","_this8","client_id","cookiepolicy","fetch_basic_profile","ux_mode","_this9","getAuthInstance","LinkedinService","getAccessToken$","grant_type","client_secret","redirect_uri","linkedin$","event$","Date","getTime","onSocialCallback","social","floor","CartSteps","Items","Data","Delivery","Recap","Payment","Complete","Error","CartService","setCart","cart","cart$_","cart$","localCart","clear$","getStore$","getStores$","getDiscount$","CartComponent","detectSocialLogin","socialBusy","initWithData","steps","step","errorPayment","errorDiscount","guest","deliveryData","billingData","delivery","discount","paymentMethod","shipmentCountry","address","zipCode","province","invoice","invoiceData","taxNumber","getDataGroup","sdi","pec","billing","company","conditions","RequiredTrueValidator","terms","deliveryType","discountCode","stores","store","abstract","description","price","fullPrice","info","icons","onPatch","touchForm","firstInvalidInput","querySelectorAll","onNext","skipUpdate","onItems","onUser","onIncrement","onDecrement","onRemove","onEdit","onModalSignIn","onModalSignUp","onGuest","onFacebookLogout","onSocialLogin","onFacebookLogin","onGoogleLogin","onLinkedinLogin","socialMe","mapMe","first_name","last_name","socialPicture","socialType","socialId","socialToken","socialTokenExpiresAt","data_access_expiration_time","finalize","expires_at","token","opener","urlSearchParams","fromEntries","onData","testData","resetData","onDelivery","onDiscountCode","_this10","onTimetableToggle","selectedStore","showTimetable","onPayment","total","_this11","ContactsService","ContactsComponent","newsletter","flag","DealersService","sort","a","regions","DealersComponent","visibleItems","countries","showMore","DesignersService","DesignersComponent","MarketsAndLanguagesService","MarketsAndLanguagesModalComponent","setMarket","market","MaterialsModalComponent","onPrev","MaterialsService","MaterialsComponent","categories","selectedItem","onToggle","onOpenItem","active","marginBottom","setCategory","NewsService","NewsComponent","NewsletterService","NewsletterComponent","occupation","engagement","newsletterLanguage","breadcumbStyle","ProductsConfigureComponent","sl","product","isReady","isComplete","isConfiguring","iframe","onEvent","sfy","SFYFrame","getIframeDocument","contentWindow","contentDocument","eventName","emit","onShowefyComplete","onStartConfigurator","onButtonPressed","onSetButtonStatus","onGetIframeSize","onGetProductExtData","onGetFastProductExtData","statusTxt","addButtons","getProductExtData","addTexts","HTML","printHTML","buttons","BUTTONS","PROPERTIES","visibility","LABEL","it","en","setButtonStatus","addBreadcrumb","breadcrumb","BREADCUMB","printBreadcumb","cartItem","ProductsDetailService","versions$","productId","ProductsDetailComponent","isAddedToCart","ProductsService","ProductsComponent","categoryId","ProjectsRegistrationModalComponent","ProjectsRegistrationService","ProjectsRegistrationComponent","dealer","fullName","client","architect","destination","products","isModal","ProjectsService","ProjectsComponent","FilesService","hasFile","currentFiles","setFiles","files$_","files$","localFiles","addFile$","removeFile$","ReservedAreaService","toTitleCase","all_$","added","sentence","seps","wordPattern","str","ReservedAreaComponent","tree","visibleFiles","getTree","parentId","onOpen","onToggleFile","isAddedToFiles","StoreLocatorService","rank","StoreLocatorComponent","extendStatics","d","hasOwnProperty","__extends","__","__assign","t","s","OverlayViewSafe","type1","type2","property","extend","maps","OverlayView","toCssText","styles","acc","coercePixels","pixels","GOOGLE_MAPS","ClusterIcon","_super","cluster_","styles_","center_","div_","sums_","visible_","setMap","getMap","onAdd","cMouseDownInCluster","cDraggingMapByCluster","mc","getMarkerClusterer","_a","major","minor","gmVersion","show","getPanes","overlayMouseTarget","boundsChangedListener_","addListener","addDomListener","stopPropagation","getZoomOnClick","mz_1","getMaxZoom","theBounds_1","getBounds","fitBounds","getZoom","setZoom","cancelBubble","hide","removeListener","clearInstanceListeners","draw","pos","getPosFromLatLng_","left","display","className","className_","cssText","createCss_","getImageElementHtml","getLabelDivHtml","getTitle","ariaLabelFn","anchorText_","color","textColor","font-size","textSize","font-family","fontFamily","font-weight","fontWeight","font-style","fontStyle","text-decoration","textDecoration","text-align","line-height","textLineHeight","bp","backgroundPosition","spriteH","spriteV","dimensions","getEnableRetinaIcons","clip","overrideDimensionsDynamicIcon","useStyle","sums","max","anchorText","anchorIcon_","anchorIcon","getClusterClass","setCenter","center","z-index","getZIndex","cursor","-webkit-user-select","-khtml-user-select","-moz-user-select","-o-user-select","user-select","latlng","getProjection","fromLatLngToDivPixel","Cluster","markerClusterer_","map_","minClusterSize_","getMinimumClusterSize","averageCenter_","getAverageCenter","markers_","bounds_","clusterIcon_","getStyles","getSize","getMarkers","getCenter","bounds","LatLngBounds","markers","getPosition","addMarker","marker","isMarkerAlreadyAdded_","lat","lng","LatLng","calculateBounds_","isAdded","mCount","mz","isMarkerInClusterBounds","getExtendedBounds","updateIcon","numStyles","getCalculator","getOption","prop","def","MarkerClusterer","clusters_","listeners_","activeMap_","ready_","zIndex_","zIndex","Number","Marker","MAX_ZINDEX","gridSize_","gridSize","minimumClusterSize","maxZoom_","maxZoom","zoomOnClick_","ignoreHidden_","enableRetinaIcons_","imagePath_","imagePath","IMAGE_PATH","imageExtension_","imageExtension","IMAGE_EXTENSION","imageSizes_","imageSizes","IMAGE_SIZES","calculator_","calculator","CALCULATOR","batchSize_","batchSize","BATCH_SIZE","batchSizeIE_","batchSizeIE","BATCH_SIZE_IE","clusterClass_","clusterClass","setupStyles_","addMarkers","repaint","prevZoom_","minZoom","mapTypes","getMapTypeId","zoom","resetViewport_","redraw_","withDefaultStyle","fitMapToMarkers","padding","getVisible","getIgnoreHidden","getGridSize","setGridSize","setMinimumClusterSize","setMaxZoom","setZIndex","setStyles","setTitle","setZoomOnClick","zoomOnClick","setAverageCenter","averageCenter","setIgnoreHidden","ignoreHidden","setEnableRetinaIcons","enableRetinaIcons","getImageExtension","setImageExtension","getImagePath","setImagePath","getImageSizes","setImageSizes","setCalculator","getBatchSizeIE","setBatchSizeIE","setClusterClass","getTotalMarkers","getClusters","getTotalClusters","nodraw","pushMarkerTo_","getDraggable","removeMarker","removed","removeMarker_","removeMarkers","r","clearMarkers","oldClusters","projection","tr","getNorthEast","bl","getSouthWest","trPix","blPix","ne","fromDivPixelToLatLng","sw","createClusters_","distanceBetweenPoints_","p1","p2","dLat","PI","dLon","sin","cos","atan2","sqrt","isMarkerInBounds_","addToClosestCluster_","clusterToAddTo","cluster","iFirst","mapBounds","timerRefStatic","iLast","dv","overrides","MAP_STYLE","featureType","elementType","stylers","saturation","lightness","MapComponent","initMap","onGoogleMapsLoaded","documentElement","mapOptions","latitude","longitude","scrollwheel","zoomControlOptions","ZoomControlStyle","DEFAULT","scaleControl","zoomControl","mapTypeControl","streetViewControl","rotateControl","fullscreenControl","mapElement","Map","getItalyBounds","calculateDistance","lat1","lon1","lat2","lon2","unit","radlat1","radlat2","theta","radtheta","dist","acos","markerCluster","phone","fax","markerImage","MarkerImage","Size","icon","setMarkerWindow","sizes","getGeolocation","busyLocation","geolocation","getCurrentPosition","coords","geocoder","Geocoder","geocode","filteredInfoCity","address_component","includes","formatted_address","address_components","searchCountry","short_name","setInfoWindow","searchPosition","finally","ZOOM_LEVEL","findNearStores","visible","cod_stato","userCountry","MAX_DISTANCE","importante","visibleStores","$timeout","panTo","markerWindow","InfoWindow","pixelOffset","setPosition","setContent","closeMarkerWindow","getWorldBounds","SwiperGalleryDirective","_SwiperDirective","loopAdditionalSlides","SwiperHomepageDirective","SwiperNewsPropositionDirective","breakpoints","768","1024","1440","1920","SwiperProductsPropositionDirective","SwiperProjectsPropositionDirective","CartMiniComponent","onRemoveAll","FilesComponent","showFiles","onToggleFiles","onDownloadAll","link","click","MenuService","setMenu","menu$_","toggleMenu","currentMenu","menu$","HeaderComponent","menu","pictogram","scrolled","direction_","scrolled_","MenuDirective","preview","previewSrc","container","onLeave","menu_","onEnter","onExit","NewsletterPropositionComponent","onNewsletter","action","SearchService","search$_","items_","search$","SearchComponent","auditTime","SubmenuDirective","onload","Power4","TreeComponent","hasItems","UserForgotComponent","forgot","onSignIn","viewSignIn","onSignUp","viewSignUp","UserComponent","views","setView","onViewSignIn","onViewSignUp","onViewForgot","navTo","onForgot","UserModalComponent","_UserComponent","UserSigninComponent","password","viewForgot","UserSignupComponent","passwordConfirm","signUp","SharedModule","AppModule","CoreModule","FormModule","bootstrap","Browser"],"mappings":"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","file":"docs\\js\\main.min.js","sourcesContent":[null,"import { from, Subject } from 'rxjs';\r\nimport { map, switchMap, tap } from 'rxjs/operators';\r\n\r\nexport class ModalEvent {\r\n\r\n\tconstructor(data) {\r\n\t\tthis.data = data;\r\n\t}\r\n\r\n}\r\n\r\nexport class ModalResolveEvent extends ModalEvent { }\r\nexport class ModalRejectEvent extends ModalEvent { }\r\n\r\nexport class ModalService {\r\n\r\n\tstatic hasModal = false;\r\n\r\n\tstatic open$(modal) {\r\n\t\treturn this.getTemplate$(modal.src).pipe(\r\n\t\t\tmap(template => {\r\n\t\t\t\treturn { node: this.getNode(template), data: modal.data, modal: modal };\r\n\t\t\t}),\r\n\t\t\ttap(node => {\r\n\t\t\t\tthis.modal$.next(node);\r\n\t\t\t\tthis.hasModal = true;\r\n\t\t\t}),\r\n\t\t\tswitchMap(node => this.events$),\r\n\t\t\ttap(_ => this.hasModal = false)\r\n\t\t)\r\n\t}\r\n\r\n\tstatic load$(modal) {\r\n\r\n\t}\r\n\r\n\tstatic getTemplate$(url) {\r\n\t\treturn from(fetch(url).then(response => {\r\n\t\t\treturn response.text();\r\n\t\t}));\r\n\t}\r\n\r\n\tstatic getNode(template) {\r\n\t\tconst div = document.createElement('div');\r\n\t\tdiv.innerHTML = template;\r\n\t\tconst node = div.firstElementChild;\r\n\t\treturn node;\r\n\t}\r\n\r\n\tstatic reject(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalRejectEvent(data));\r\n\t}\r\n\r\n\tstatic resolve(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalResolveEvent(data));\r\n\t}\r\n\r\n}\r\n\r\nModalService.modal$ = new Subject();\r\nModalService.events$ = new Subject();\r\n","\r\nexport class Utils {\r\n\r\n\tstatic merge(target, source) {\r\n\t\tif (typeof source === 'object') {\r\n\t\t\tObject.keys(source).forEach(key => {\r\n\t\t\t\tconst value = source[key];\r\n\t\t\t\tif (typeof value === 'object' && !Array.isArray(value)) {\r\n\t\t\t\t\ttarget[key] = this.merge(target[key], value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttarget[key] = value;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn target;\r\n\t}\r\n\r\n}\r\n","import { Utils } from './common/utils/utils';\r\nimport { environmentServed } from './environment.served';\r\nimport { environmentStatic } from './environment.static';\r\n\r\nexport const NODE = (typeof module !== 'undefined' && module.exports);\r\nexport const PARAMS = NODE ? { get: () => { } } : new URLSearchParams(window.location.search);\r\nexport const DEBUG = false || (PARAMS.get('debug') != null);\r\nexport const BASE_HREF = NODE ? null : document.querySelector('base').getAttribute('href');\r\nexport const HEROKU = NODE ? false : (window && window.location.host.indexOf('herokuapp') !== -1);\r\nexport const STATIC = NODE ? false : (HEROKU || (window && (window.location.port === '48481' || window.location.port === '5000' || window.location.port === '6443' || window.location.host === 'actarian.github.io')));\r\nexport const DEVELOPMENT = NODE ? false : (window && ['localhost', '127.0.0.1', '0.0.0.0'].indexOf(window.location.host.split(':')[0]) !== -1);\r\nexport const PRODUCTION = !DEVELOPMENT;\r\nexport const ENV = {\r\n\tSTATIC,\r\n\tDEVELOPMENT,\r\n\tPRODUCTION\r\n};\r\n\r\nexport class Environment {\r\n\r\n\tget STATIC() {\r\n\t\treturn ENV.STATIC;\r\n\t}\r\n\tset STATIC(STATIC) {\r\n\t\tENV.STATIC = (STATIC === true || STATIC === 'true');\r\n\t\tconsole.log('Environment.STATIC.set', ENV.STATIC);\r\n\t}\r\n\r\n\tget href() {\r\n\t\tif (HEROKU) {\r\n\t\t\treturn this.githubDocs;\r\n\t\t} else {\r\n\t\t\treturn BASE_HREF;\r\n\t\t}\r\n\t}\r\n\r\n\tgetAbsoluteUrl(path, params) {\r\n\t\tlet url = `${window.location.origin}${path}`;\r\n\t\t// let url = `${window.location.protocol}//${window.location.host}${path}`;\r\n\t\tObject.keys(params).forEach(key => {\r\n\t\t\turl = url.replace(`$${key}`, params[key]);\r\n\t\t});\r\n\t\treturn url;\r\n\t}\r\n\r\n\tgetPath(path) {\r\n\t\treturn this.isLocal(path) ? (this.href + path) : path;\r\n\t}\r\n\r\n\tisLocal(path) {\r\n\t\treturn path.indexOf('://') === -1;\r\n\t}\r\n\r\n\tconstructor(options) {\r\n\t\tif (options) {\r\n\t\t\tObject.assign(this, options);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst defaultOptions = {\r\n\tport: 5000,\r\n\tflags: {\r\n\t\tproduction: false,\r\n\t\theroku: HEROKU,\r\n\t},\r\n\tslug: {},\r\n\tmarkets: ['IT', 'EU', 'AM', 'AS', 'IN'],\r\n\tdefaultMarket: 'IT',\r\n\tcurrentMarket: 'IT',\r\n\tlanguages: ['it', 'en'],\r\n\tdefaultLanguage: 'it',\r\n\tcurrentLanguage: 'it',\r\n\tlabels: {\r\n\t\tselect: 'Seleziona',\r\n\t\tbrowse: 'Sfoglia',\r\n\t\tcancel: 'Annulla',\r\n\t\terror_email: 'Email non valida',\r\n\t\terror_match: 'I campi non corrispondono',\r\n\t\terror_required: 'Campo obbligatorio',\r\n\t\tloading: 'caricamento',\r\n\t\tremove: 'Rimuovi',\r\n\t\trequired: 'Richiesto',\r\n\t\tselect_file: 'Seleziona una file...',\r\n\t\tupdate: 'Aggiorna',\r\n\t\tupload: 'Carica',\r\n\t\tdrag_and_drop_images: 'Drag And Drop your images here',\r\n\t}\r\n};\r\n\r\nconst environmentOptions = window.STATIC ? environmentStatic : environmentServed;\r\n\r\nlet options = Object.assign(defaultOptions, environmentOptions);\r\noptions = Utils.merge(options, window.environment);\r\n\r\nexport const environment = new Environment(options);\r\n\r\n// console.log('environment', environment);\r\n","\r\nexport const environmentStatic = {\r\n\tflags: {\r\n\t\tproduction: false,\r\n\t},\r\n\tmarkets: ['IT', 'EU', 'AM', 'AS', 'IN'],\r\n\tdefaultMarket: 'IT',\r\n\tcurrentMarket: 'IT',\r\n\tlanguages: ['it', 'en', 'de', 'ch'],\r\n\tdefaultLanguage: 'it',\r\n\tcurrentLanguage: 'it',\r\n\tapi: '/giorgetti/api',\r\n\tassets: '/giorgetti/',\r\n\tslug: {\r\n\t\tconfigureProduct: `/giorgetti/products-configure.html`,\r\n\t\treservedArea: `/giorgetti/reserved-area.html`,\r\n\t},\r\n\ttemplate: {\r\n\t\tmodal: {\r\n\t\t\tuserModal: '/giorgetti/user-modal.html',\r\n\t\t\tcareersModal: '/giorgetti/careers-modal.html',\r\n\t\t\tprojectsRegistrationModal: '/giorgetti/projects-registration-modal.html',\r\n\t\t\tmaterialsModal: '/giorgetti/materials-modal.html',\r\n\t\t\tmarketsAndLanguagesModal: '/giorgetti/markets-and-languages-modal.html',\r\n\t\t}\r\n\t},\r\n\tfacebook: {\r\n\t\tappId: 610048027052371,\r\n\t\tfields: 'id,name,first_name,last_name,email,gender,picture,cover,link',\r\n\t\tscope: 'public_profile, email', // publish_stream\r\n\t\ttokenClient: '951b013fe59b05cf471d869aae9ba6ba',\r\n\t\tversion: 'v11.0',\r\n\t},\r\n\tgoogle: {\r\n\t\tclientId: '760742757246-61qknlmthbmr54bh7ch19kjr0sftm4q3.apps.googleusercontent.com',\r\n\t},\r\n\tlinkedIn: {\r\n\t\tclientId: '77cg5ls5lgu3k3',\r\n\t\tclientSecret: 'gfBIl365EdckxCgK',\r\n\t\tscope: 'r_emailaddress r_liteprofile',\r\n\t},\r\n\tgoogleMaps: {\r\n\t\tapiKey: 'AIzaSyAIsa4g8z-HPPwohsf8jzVTbKw-DiI8k5w',\r\n\t},\r\n\tthron: {\r\n\t\tclientId: '',\r\n\t},\r\n\tworkers: {\r\n\t\timage: './js/workers/image.service.worker.js',\r\n\t\tprefetch: './js/workers/prefetch.service.worker.js',\r\n\t},\r\n\tgithubDocs: 'https://raw.githubusercontent.com/actarian/giorgetti/main/docs/',\r\n};\r\n","\r\nexport const environmentServed = {\r\n\tflags: {\r\n\t\tproduction: true,\r\n\t},\r\n\tmarkets: ['IT', 'EU', 'AM', 'AS', 'IN'],\r\n\tdefaultMarket: 'IT',\r\n\tcurrentMarket: 'IT',\r\n\tlanguages: ['it', 'en', 'de', 'ch'],\r\n\tdefaultLanguage: 'it',\r\n\tcurrentLanguage: 'it',\r\n\tapi: '/api',\r\n\tassets: '/Client/docs/',\r\n\tslug: {\r\n\t\tconfigureProduct: `/it/it/products-configure`,\r\n\t\treservedArea: `/it/it/reserved-area`,\r\n\t},\r\n\ttemplate: {\r\n\t\tmodal: {\r\n\t\t\tuserModal: '/template/modals/user-modal.cshtml',\r\n\t\t\tcareersModal: '/template/modals/careers-modal.cshtml',\r\n\t\t\tprojectsRegistrationModal: '/template/modals/projects-registration-modal.cshtml',\r\n\t\t\tmaterialsModal: '/template/modals/materials-modal.cshtml',\r\n\t\t\tmarketsAndLanguagesModal: '/template/modals/markets-and-languages-modal.cshtml',\r\n\t\t}\r\n\t},\r\n\tfacebook: {\r\n\t\tappId: 610048027052371,\r\n\t\tfields: 'id,name,first_name,last_name,email,gender,picture,cover,link',\r\n\t\tscope: 'public_profile, email', // publish_stream\r\n\t\ttokenClient: '951b013fe59b05cf471d869aae9ba6ba',\r\n\t\tversion: 'v11.0',\r\n\t},\r\n\tgoogle: {\r\n\t\tclientId: '760742757246-61qknlmthbmr54bh7ch19kjr0sftm4q3.apps.googleusercontent.com',\r\n\t},\r\n\tlinkedIn: {\r\n\t\tclientId: '77cg5ls5lgu3k3',\r\n\t\tclientSecret: 'gfBIl365EdckxCgK',\r\n\t\tscope: 'r_emailaddress r_liteprofile',\r\n\t},\r\n\tgoogleMaps: {\r\n\t\tapiKey: 'AIzaSyDvGw6iAoKdRv8mmaC9GeT-LWLPQtA8p60',\r\n\t},\r\n\tthron: {\r\n\t\tclientId: '',\r\n\t},\r\n\tworkers: {\r\n\t\timage: '/Client/docs/js/workers/image.service.worker.js',\r\n\t\tprefetch: '/Client/docs/js/workers/prefetch.service.worker.js',\r\n\t},\r\n\tgithubDocs: 'https://raw.githubusercontent.com/actarian/giorgetti/main/docs/',\r\n};\r\n","import { from, throwError } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\n\r\nexport class HttpResponse {\r\n\r\n\tget static() {\r\n\t\treturn this.url.indexOf('.json') === this.url.length - 5;\r\n\t}\r\n\r\n\tconstructor(response) {\r\n\t\tthis.data = null;\r\n\t\tif (response) {\r\n\t\t\tthis.url = response.url;\r\n\t\t\tthis.status = response.status;\r\n\t\t\tthis.statusText = response.statusText;\r\n\t\t\tthis.ok = response.ok;\r\n\t\t\tthis.redirected = response.redirected;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class HttpService {\r\n\r\n\tstatic http$(method, url, data, format = 'json', userPass = null, options = {}) {\r\n\t\tconst methods = ['POST', 'PUT', 'PATCH'];\r\n\t\tlet response_ = null;\r\n\t\t// url = this.getUrl(url, format);\r\n\t\toptions = Object.assign({\r\n\t\t\tmethod: method,\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t}, options, {\r\n\t\t\tbody: methods.indexOf(method) !== -1 ? JSON.stringify(data) : undefined\r\n\t\t});\r\n\t\tif (userPass) {\r\n\t\t\t// options.mode = 'no-cors';\r\n\t\t\toptions.credentials = 'include';\r\n\t\t\tuserPass = window.btoa(userPass);\r\n\t\t\toptions.headers['Authorization'] = `Basic ${userPass}`;\r\n\t\t}\r\n\t\toptions.headers = new Headers(options.headers);\r\n\t\treturn from(fetch(url, options).then((response) => {\r\n\t\t\tresponse_ = response;\r\n\t\t\t// console.log(response);\r\n\t\t\ttry {\r\n\t\t\t\tconst contentType = response.headers.get('content-type');\r\n\t\t\t\tlet typedResponse;\r\n\t\t\t\tif (contentType && contentType.indexOf('application/json') !== -1) {\r\n\t\t\t\t\ttypedResponse = response.json();\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttypedResponse = response.text();\r\n\t\t\t\t}\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\treturn typedResponse;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn typedResponse.then(data => {\r\n\t\t\t\t\t\treturn Promise.reject(data);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\tconsole.warn('HttpService.http$', 'Cannot parse response');\r\n\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.reject(error);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})).pipe(\r\n\t\t\tcatchError(error => {\r\n\t\t\t\treturn throwError(this.getError(error, response_));\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\t/*\r\n\t// !!! todo mapping response.data\r\n\tstatic http$(method, url, data, format = 'json') {\r\n\t\tconst methods = ['POST', 'PUT', 'PATCH'];\r\n\t\tconst body = (data && methods.indexOf(method) !== -1) ? JSON.stringify(data) : undefined;\r\n\t\tconst queryString = (data && methods.indexOf(method) !== -1) ? Object.keys(data).map(function(key) {\r\n\t\t\treturn key + '=' + encodeURI(data[key]);\r\n\t\t}).join('&') : undefined;\r\n\t\tif (queryString) {\r\n\t\t\turl = `${url}?${queryString}`;\r\n\t\t}\r\n\t\tlet response_ = null;\r\n\t\treturn from(fetch(url, {\r\n\t\t\tmethod: method,\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: body,\r\n\t\t}).then((response) => {\r\n\t\t\tresponse_ = new HttpResponse(response);\r\n\t\t\ttry {\r\n\t\t\t\tconst contentType = response.headers.get('content-type');\r\n\t\t\t\tlet typedResponse;\r\n\t\t\t\tif (contentType && format === 'json' && contentType.indexOf('application/json') !== -1) {\r\n\t\t\t\t\ttypedResponse = response.json();\r\n\t\t\t\t} else if (format === 'blob') {\r\n\t\t\t\t\ttypedResponse = response.blob();\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttypedResponse = response.text();\r\n\t\t\t\t}\r\n\t\t\t\treturn typedResponse.then(data => {\r\n\t\t\t\t\tresponse_.data = data;\r\n\t\t\t\t\tif (response.ok) {\r\n\t\t\t\t\t\treturn Promise.resolve(response_);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn Promise.reject(response_);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} catch(error) {\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\tconsole.warn('HttpService.http$', 'Cannot parse response');\r\n\t\t\t\t\treturn Promise.resolve(response_);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.reject(this.getError(error, response_));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})).pipe(\r\n\t\t\tcatchError(error => {\r\n\t\t\t\treturn throwError(this.getError(error, response_));\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\t*/\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\tconst query = this.query(data);\r\n\t\treturn this.http$('GET', `${url}${query}`, undefined, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn this.http$('DELETE', url);\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn this.http$('POST', url, data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn this.http$('PUT', url, data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn this.http$('PATCH', url, data);\r\n\t}\r\n\r\n\tstatic query(data) {\r\n\t\treturn ''; // todo\r\n\t}\r\n\r\n\tstatic getError(object, response) {\r\n\t\tlet error = typeof object === 'object' ? object : {};\r\n\t\tif (!error.status) {\r\n\t\t\terror.status = response ? response.status : 0;\r\n\t\t}\r\n\t\tif (!error.statusCode) {\r\n\t\t\terror.statusCode = response ? response.status : 0;\r\n\t\t}\r\n\t\tif (!error.statusMessage) {\r\n\t\t\terror.statusMessage = response ? response.statusText : object;\r\n\t\t}\r\n\t\t// console.log('HttpService.getError', error, object);\r\n\t\treturn error;\r\n\t}\r\n\r\n}\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\nimport { Utils } from '../utils/utils';\r\n\r\nexport class LabelPipe extends Pipe {\r\n\r\n\tstatic transform(key) {\r\n\t\tconst labels = LabelPipe.labels_;\r\n\t\treturn labels[key] || key; // `#${key}#`;\r\n\t}\r\n\r\n\tstatic getKeys(...keys) {\r\n\t\treturn LabelPipe.transform(keys.map(x => x.replace('-', '_')).join('_'));\r\n\t}\r\n\r\n\tstatic setLabels() {\r\n\t\tconst LABELS = Utils.merge({\r\n\t\t\tselect: 'Seleziona',\r\n\t\t\tbrowse: 'Sfoglia',\r\n\t\t\tcancel: 'Annulla',\r\n\t\t\terror_email: 'Email non valida',\r\n\t\t\terror_match: 'I campi non corrispondono',\r\n\t\t\terror_required: 'Campo obbligatorio',\r\n\t\t\tloading: 'caricamento',\r\n\t\t\tremove: 'Rimuovi',\r\n\t\t\trequired: 'Richiesto',\r\n\t\t\tselect_file: 'Seleziona una file...',\r\n\t\t\tupdate: 'Aggiorna',\r\n\t\t\tupload: 'Carica',\r\n\t\t\tdrag_and_drop_images: 'Drag And Drop your images here',\r\n\t\t}, environment.labels);\r\n\t\tthis.labels_ = LABELS;\r\n\t}\r\n}\r\n\r\nLabelPipe.setLabels();\r\n\r\nLabelPipe.meta = {\r\n\tname: 'label',\r\n};\r\n","export class LocationService {\r\n\r\n\tstatic has(key) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\t// console.log('LocationService.has', params);\r\n\t\treturn params.has(key);\r\n\t}\r\n\r\n\tstatic get(key) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\t// console.log('LocationService.get', params);\r\n\t\treturn params.get(key);\r\n\t}\r\n\r\n\tstatic set(keyOrValue, value) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams.set(keyOrValue, value);\r\n\t\t} else {\r\n\t\t\tparams.set(keyOrValue, '');\r\n\t\t}\r\n\t\tthis.pushParams(params);\r\n\t\t// console.log('LocationService.set', params, keyOrValue, value);\r\n\t}\r\n\r\n\tstatic pushParams(params) {\r\n\t\tif (window.history && window.history.pushState) {\r\n\t\t\tconst title = document.title;\r\n\t\t\tconst url = `${window.location.href.split('?')[0]}?${params.toString()}`;\r\n\t\t\twindow.history.pushState(params.toString(), title, url);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic replace(from, to) {\r\n\t\tconst history = window.history;\r\n\t\tif (history && history.replaceState) {\r\n\t\t\tconst location = window.location;\r\n\t\t\tconst title = document.title;\r\n\t\t\tif (location.pathname === '/') {\r\n\t\t\t\tconst url = location.origin + to + location.search;\r\n\t\t\t\thistory.replaceState(history.state, title, url);\r\n\t\t\t} else if (location.href.indexOf(from) !== -1) {\r\n\t\t\t\tconst url = location.href.replace(from, to);\r\n\t\t\t\thistory.replaceState(history.state, title, url);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic deserialize(key) {\r\n\t\tconst encoded = this.get('params');\r\n\t\treturn this.decode(key, encoded);\r\n\t}\r\n\r\n\tstatic serialize(keyOrValue, value) {\r\n\t\tconst params = this.deserialize();\r\n\t\tconst encoded = this.encode(keyOrValue, value, params);\r\n\t\tthis.set('params', encoded);\r\n\t}\r\n\r\n\tstatic decode(key, encoded) {\r\n\t\tlet decoded = null;\r\n\t\tif (encoded) {\r\n\t\t\tconst json = window.atob(encoded);\r\n\t\t\tdecoded = JSON.parse(json);\r\n\t\t}\r\n\t\tif (key && decoded) {\r\n\t\t\tdecoded = decoded[key];\r\n\t\t}\r\n\t\treturn decoded || null;\r\n\t}\r\n\r\n\tstatic encode(keyOrValue, value, params) {\r\n\t\tparams = params || {};\r\n\t\tlet encoded = null;\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams[keyOrValue] = value;\r\n\t\t} else {\r\n\t\t\tparams = keyOrValue;\r\n\t\t}\r\n\t\tconst json = JSON.stringify(params);\r\n\t\tencoded = window.btoa(json);\r\n\t\treturn encoded;\r\n\t}\r\n\r\n}\r\n","import { from } from 'rxjs';\r\nimport { tap } from 'rxjs/operators';\r\nimport { environment } from '../../environment';\r\nimport { LabelPipe } from '../label/label.pipe';\r\nimport { LocationService } from '../location/location.service';\r\nimport { Utils } from '../utils/utils';\r\n\r\nexport class LanguageService {\r\n\r\n\tstatic languages = this.getDefaultLanguages();\r\n\tstatic defaultLanguage = this.getDefaultLanguage();\r\n\tstatic selectedLanguage = this.defaultLanguage;\r\n\r\n\tstatic get hasLanguages() {\r\n\t\treturn this.languages.length > 1;\r\n\t}\r\n\r\n\tstatic get activeLanguage() {\r\n\t\treturn this.languages.find(language => language.lang === this.selectedLanguage);\r\n\t}\r\n\r\n\tstatic getDefaultLanguages() {\r\n\t\treturn environment.alternates || [];\r\n\t}\r\n\r\n\tstatic getDefaultLanguage() {\r\n\t\treturn environment.defaultLanguage || (this.languages ? this.languages[0].lang : null);\r\n\t}\r\n\r\n\tstatic setLanguage(language) {\r\n\t\tthis.selectedLanguage = language.lang;\r\n\t}\r\n\r\n\tstatic setLanguage$(language) {\r\n\t\treturn from(fetch(language.href).then(response => {\r\n\t\t\treturn response.text();\r\n\t\t})).pipe(\r\n\t\t\ttap(html => {\r\n\t\t\t\t// console.log('html', html);\r\n\t\t\t\tconst labelsMatch = /(window\\.labels\\s*=\\s*\\n*\\s*\\{((\\{.+?\\})|.)+?\\})/gms.exec(html);\r\n\t\t\t\tif (labelsMatch) {\r\n\t\t\t\t\t// console.log('labels', labelsMatch[0]);\r\n\t\t\t\t\tnew Function(labelsMatch[0]).call(window);\r\n\t\t\t\t\tLabelPipe.setLabels();\r\n\t\t\t\t}\r\n\t\t\t\tconst bhereMatch = /(window\\.bhere\\s*=\\s*\\n*\\s*\\{((\\{.+?\\})|.)+?\\})/gms.exec(html);\r\n\t\t\t\tif (bhereMatch) {\r\n\t\t\t\t\t// console.log('bhere', bhereMatch[0]);\r\n\t\t\t\t\tconst data = {};\r\n\t\t\t\t\tnew Function(bhereMatch[0].replace('window', 'this')).call(data);\r\n\t\t\t\t\tif (data.bhere) {\r\n\t\t\t\t\t\tUtils.merge(environment, data.bhere);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tLocationService.replace(this.activeLanguage.href, language.href);\r\n\t\t\t\t// console.log(window.labels);\r\n\t\t\t\tthis.selectedLanguage = language.lang;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic toggleLanguages() {\r\n\t\tthis.showLanguages = !this.showLanguages;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n}\r\n","import { environment } from '../../environment';\r\nimport { HttpService } from '../http/http.service';\r\nimport { LanguageService } from '../language/language.service';\r\n\r\nexport class ApiService extends HttpService {\r\n\r\n\tstatic currentLanguage = LanguageService.activeLanguage;\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\treturn super.get$(`${environment.api}${url}`, data, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn super.delete$(`${environment.api}${url}`);\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn super.post$(`${environment.api}${url}`, data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn super.put$(`${environment.api}${url}`, data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn super.patch$(`${environment.api}${url}`, data);\r\n\t}\r\n}\r\n","export class LocalStorageService {\r\n\r\n\tstatic delete(name) {\r\n\t\tif (this.isLocalStorageSupported()) {\r\n\t\t\twindow.localStorage.removeItem(name);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic exist(name) {\r\n\t\tif (this.isLocalStorageSupported()) {\r\n\t\t\treturn window.localStorage[name] !== undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic get(name) {\r\n\t\tlet value = null;\r\n\t\tif (this.isLocalStorageSupported() && window.localStorage[name] !== undefined) {\r\n\t\t\ttry {\r\n\t\t\t\tvalue = JSON.parse(window.localStorage[name]);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('LocalStorageService.get.error parsing', name, e);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tstatic set(name, value) {\r\n\t\tif (this.isLocalStorageSupported()) {\r\n\t\t\ttry {\r\n\t\t\t\tconst cache = [];\r\n\t\t\t\tconst json = JSON.stringify(value, function(key, value) {\r\n\t\t\t\t\tif (typeof value === 'object' && value !== null) {\r\n\t\t\t\t\t\tif (cache.indexOf(value) !== -1) {\r\n\t\t\t\t\t\t\t// Circular reference found, discard key\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcache.push(value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t});\r\n\t\t\t\twindow.localStorage.setItem(name, json);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('LocalStorageService.set.error serializing', name, value, e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic isLocalStorageSupported() {\r\n\t\tif (this.supported) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tlet supported = false;\r\n\t\ttry {\r\n\t\t\tsupported = 'localStorage' in window && window.localStorage !== null;\r\n\t\t\tif (supported) {\r\n\t\t\t\twindow.localStorage.setItem('test', '1');\r\n\t\t\t\twindow.localStorage.removeItem('test');\r\n\t\t\t} else {\r\n\t\t\t\tsupported = false;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tsupported = false;\r\n\t\t}\r\n\t\tthis.supported = supported;\r\n\t\treturn supported;\r\n\t}\r\n}\r\n","import { BehaviorSubject } from 'rxjs';\r\n\r\nexport class HeaderService {\r\n\r\n\tstatic header$_ = new BehaviorSubject(-1);\r\n\r\n\tstatic get currentHeader() {\r\n\t\treturn this.header$_.getValue();\r\n\t}\r\n\r\n\tstatic setHeader(id) {\r\n\t\tthis.header$_.next(id);\r\n\t}\r\n\r\n\tstatic toggleHeader(id) {\r\n\t\tthis.header$_.next(this.currentHeader === id ? -1 : id);\r\n\t}\r\n\r\n\tstatic onBack() {\r\n\t\tthis.header$_.next(-1);\r\n\t}\r\n\r\n\tstatic header$() {\r\n\t\treturn this.header$_;\r\n\t}\r\n\r\n}\r\n","import { BehaviorSubject, of } from 'rxjs';\r\nimport { map, switchMap } from 'rxjs/operators';\r\nimport { ApiService } from '../../common/api/api.service';\r\nimport { LocalStorageService } from '../../common/storage/local-storage.service';\r\nimport { environment } from '../../environment';\r\nimport { HeaderService } from '../header/header.service';\r\n\r\nexport class CartMiniService {\r\n\r\n\tstatic items$_ = new BehaviorSubject([]);\r\n\r\n\tstatic get currentItems() {\r\n\t\treturn CartMiniService.items$_.getValue();\r\n\t}\r\n\r\n\tstatic get count() {\r\n\t\treturn CartMiniService.currentItems.length;\r\n\t}\r\n\r\n\tstatic hasItem(item) {\r\n\t\tconst items = CartMiniService.currentItems;\r\n\t\tconst index = CartMiniService.indexOf(item, items);\r\n\t\treturn index !== -1;\r\n\t}\r\n\r\n\tstatic setItems(items) {\r\n\t\tif (items) {\r\n\t\t\tLocalStorageService.set('cartItems', items);\r\n\t\t} else {\r\n\t\t\tLocalStorageService.delete('cartItems');\r\n\t\t}\r\n\t\tCartMiniService.items$_.next(items);\r\n\t}\r\n\r\n\tstatic items$() {\r\n\t\tconst localItems = LocalStorageService.get('cartItems') || [];\r\n\t\treturn of(localItems).pipe(\r\n\t\t\tswitchMap(items => {\r\n\t\t\t\tCartMiniService.setItems(items);\r\n\t\t\t\treturn CartMiniService.items$_;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic incrementItem$(item) {\r\n\t\treturn of(item).pipe(\r\n\t\t\tmap(item => {\r\n\t\t\t\tconst items = CartMiniService.currentItems.slice();\r\n\t\t\t\tconst item_ = CartMiniService.find(item, items);\r\n\t\t\t\tif (item_) {\r\n\t\t\t\t\titem_.qty++;\r\n\t\t\t\t\tCartMiniService.setItems(items);\r\n\t\t\t\t\treturn item_;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic decrementItem$(item) {\r\n\t\treturn of(item).pipe(\r\n\t\t\tswitchMap(item => {\r\n\t\t\t\tconst items = CartMiniService.currentItems.slice();\r\n\t\t\t\tconst item_ = CartMiniService.find(item, items);\r\n\t\t\t\tif (item_) {\r\n\t\t\t\t\titem_.qty--;\r\n\t\t\t\t\tif (item_.qty > 0) {\r\n\t\t\t\t\t\tCartMiniService.setItems(items);\r\n\t\t\t\t\t\treturn of(item_);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn CartMiniService.removeItem$(item);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn of(null);\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic addItem$(item) {\r\n\t\treturn of(Object.assign({ qty: 1 }, item)).pipe(\r\n\t\t\tmap(item => {\r\n\t\t\t\tconst items = CartMiniService.currentItems.slice();\r\n\t\t\t\tconst item_ = CartMiniService.find(item, items);\r\n\t\t\t\tif (item_) {\r\n\t\t\t\t\titem_.qty += item.qty;\r\n\t\t\t\t\tCartMiniService.setItems(items);\r\n\t\t\t\t\treturn item_;\r\n\t\t\t\t} else {\r\n\t\t\t\t\titems.push(item);\r\n\t\t\t\t\tCartMiniService.setItems(items);\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic removeItem$(item) {\r\n\t\treturn of(item).pipe(\r\n\t\t\tmap(item => {\r\n\t\t\t\tconst items = CartMiniService.currentItems.slice();\r\n\t\t\t\tconst index = CartMiniService.indexOf(item, items);\r\n\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\titems.splice(index, 1);\r\n\t\t\t\t\tif (items.length === 0) {\r\n\t\t\t\t\t\tHeaderService.onBack();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tCartMiniService.setItems(items);\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic removeAll$() {\r\n\t\treturn of([]).pipe(\r\n\t\t\tmap(items => {\r\n\t\t\t\tHeaderService.onBack();\r\n\t\t\t\tCartMiniService.setItems(items);\r\n\t\t\t\treturn items;\r\n\t\t\t}),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic getPrice$(item) {\r\n\t\tif (environment.flags.production) {\r\n\t\t\t/*\r\n\t\t\t!!! implementare la post a /api/cart-mini/price per ottenere il prezzo da showefy\r\n\t\t\til payload è { showefy: { internalstr: \"string...\" } }\r\n\t\t\til payload completo e l'output si trovano qui /api/cart-mini/price.json\r\n\t\t\t*/\r\n\t\t\t// return ApiService.post$('/cart-mini/price', item);\r\n\t\t\treturn ApiService.get$('/cart-mini/price.json');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/cart-mini/price.json');\r\n\t\t\t// return of(Object.assign(item, { price: 899 }));\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getPriceAndAddItem$(item) {\r\n\t\treturn this.getPrice$(item).pipe(\r\n\t\t\tswitchMap(item => this.addItem$(item)),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic match(item, item_) {\r\n\t\treturn item_.id === item.id && ((!item_.showefy && !item.showefy) || (item_.showefy && item.showefy && item_.showefy.product_link === item.showefy.product_link));\r\n\t}\r\n\r\n\tstatic find(item, items) {\r\n\t\treturn items.find(item_ => CartMiniService.match(item, item_));\r\n\t}\r\n\r\n\tstatic indexOf(item, items) {\r\n\t\treturn items.reduce((p, item_, i) => {\r\n\t\t\treturn p !== -1 ? p : (CartMiniService.match(item, item_) ? i : p);\r\n\t\t}, -1);\r\n\t}\r\n}\r\n","export class SessionStorageService {\r\n\r\n\tstatic delete(name) {\r\n\t\tif (this.isSessionStorageSupported()) {\r\n\t\t\twindow.sessionStorage.removeItem(name);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic exist(name) {\r\n\t\tif (this.isSessionStorageSupported()) {\r\n\t\t\treturn window.sessionStorage[name] !== undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic get(name) {\r\n\t\tlet value = null;\r\n\t\tif (this.isSessionStorageSupported() && window.sessionStorage[name] !== undefined) {\r\n\t\t\ttry {\r\n\t\t\t\tvalue = JSON.parse(window.sessionStorage[name]);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('SessionStorageService.get.error parsing', name, e);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tstatic set(name, value) {\r\n\t\tif (this.isSessionStorageSupported()) {\r\n\t\t\ttry {\r\n\t\t\t\tconst cache = [];\r\n\t\t\t\tconst json = JSON.stringify(value, function(key, value) {\r\n\t\t\t\t\tif (typeof value === 'object' && value !== null) {\r\n\t\t\t\t\t\tif (cache.indexOf(value) !== -1) {\r\n\t\t\t\t\t\t\t// Circular reference found, discard key\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcache.push(value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t});\r\n\t\t\t\twindow.sessionStorage.setItem(name, json);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('SessionStorageService.set.error serializing', name, value, e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic isSessionStorageSupported() {\r\n\t\tif (this.supported) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tlet supported = false;\r\n\t\ttry {\r\n\t\t\tsupported = 'sessionStorage' in window && window.sessionStorage !== null;\r\n\t\t\tif (supported) {\r\n\t\t\t\twindow.sessionStorage.setItem('test', '1');\r\n\t\t\t\twindow.sessionStorage.removeItem('test');\r\n\t\t\t} else {\r\n\t\t\t\tsupported = false;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tsupported = false;\r\n\t\t}\r\n\t\tthis.supported = supported;\r\n\t\treturn supported;\r\n\t}\r\n}\r\n","import { BehaviorSubject, of } from 'rxjs';\r\nimport { catchError, map, switchMap, tap } from 'rxjs/operators';\r\nimport { ApiService } from '../../common/api/api.service';\r\nimport { SessionStorageService } from '../../common/storage/session-storage.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport const UserViews = {\r\n\tSIGN_IN: 1,\r\n\tSIGN_UP: 2,\r\n\tFORGOTTEN: 3,\r\n};\r\n\r\nexport class User {\r\n\r\n\tget avatar() {\r\n\t\treturn (this.firstName || '?').substr(0, 1).toUpperCase() + (this.lastName || '?').substr(0, 1).toUpperCase();\r\n\t}\r\n\r\n\tget fullName() {\r\n\t\treturn this.firstName + ' ' + this.lastName;\r\n\t}\r\n\r\n\tconstructor(data) {\r\n\t\tif (data) {\r\n\t\t\tObject.assign(this, data);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport class UserService {\r\n\r\n\tstatic user$_ = new BehaviorSubject(null);\r\n\r\n\tstatic get currentUser() {\r\n\t\treturn this.user$_.getValue();\r\n\t}\r\n\r\n\tstatic setUser(user) {\r\n\t\tif (user) {\r\n\t\t\tSessionStorageService.set('user', user);\r\n\t\t} else {\r\n\t\t\tSessionStorageService.delete('user');\r\n\t\t}\r\n\t\tthis.user$_.next(user);\r\n\t}\r\n\r\n\tstatic data$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/user/data.json');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/user/data.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic forgot$(payload) {\r\n\t\tif (environment.flags.production) {\r\n\t\t\t// !!! convert to .post$\r\n\t\t\treturn ApiService.get$(`/user/forgot.json`, payload);\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$(`/user/forgot.json`);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic me$() {\r\n\t\tconst sessionUser = SessionStorageService.get('user');\r\n\t\tif (sessionUser) {\r\n\t\t\treturn of(sessionUser).pipe(\r\n\t\t\t\tswitchMap(user => {\r\n\t\t\t\t\tthis.setUser(new User(user));\r\n\t\t\t\t\treturn this.user$_;\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn (\r\n\t\t\t\tenvironment.flags.production ?\r\n\t\t\t\t\tApiService.get$(`/user/me.json`) :\r\n\t\t\t\t\tApiService.get$(`/user/me.json`)\r\n\t\t\t).pipe(\r\n\t\t\t\tmap((response) => {\r\n\t\t\t\t\tthis.mapUser(response);\r\n\t\t\t\t}),\r\n\t\t\t\tcatchError(_ => of(null)),\r\n\t\t\t\tswitchMap(user => {\r\n\t\t\t\t\tthis.setUser(user);\r\n\t\t\t\t\treturn this.user$_;\r\n\t\t\t\t}),\r\n\t\t\t\tmap(user => user || null),\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic signin$(payload) {\r\n\t\treturn (\r\n\t\t\tenvironment.flags.production ?\r\n\t\t\t\t// !!! convert to .post$\r\n\t\t\t\tApiService.get$(`/user/signin.json`, payload) :\r\n\t\t\t\tApiService.get$(`/user/signin.json`)\r\n\t\t).pipe(\r\n\t\t\tmap((response) => this.mapUser(response)),\r\n\t\t\ttap((user) => this.setUser(user)),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic signout$() {\r\n\t\treturn (\r\n\t\t\tenvironment.flags.production ?\r\n\t\t\t\tApiService.get$(`/user/signout.json`) :\r\n\t\t\t\tApiService.get$(`/user/signout.json`)\r\n\t\t).pipe(\r\n\t\t\ttap((_) => this.setUser(null)),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic signup$(payload) {\r\n\t\treturn (\r\n\t\t\tenvironment.flags.production ?\r\n\t\t\t\t// !!! convert to .post$\r\n\t\t\t\tApiService.get$(`/user/signup.json`, payload) :\r\n\t\t\t\tApiService.get$(`/user/signup.json`)\r\n\t\t).pipe(\r\n\t\t\tmap((response) => this.mapUser(response)),\r\n\t\t\ttap((user) => this.setUser(user)),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic tryFacebook$(me) {\r\n\t\treturn of(null);\r\n\t}\r\n\r\n\tstatic tryGoogle$(me) {\r\n\t\treturn of(null);\r\n\t}\r\n\r\n\tstatic tryLinkedin$(me) {\r\n\t\treturn of(null);\r\n\t}\r\n\r\n\tstatic sessionStorage$() {\r\n\t\treturn of(SessionStorageService.get('user') || null);\r\n\t}\r\n\r\n\tstatic mapUser(user) {\r\n\t\treturn user ? new User(user) : null;\r\n\t}\r\n\r\n\tstatic mapUsers(users) {\r\n\t\treturn users ? users.map(x => UserService.mapUser(x)) : [];\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { ModalResolveEvent, ModalService } from './common/modal/modal.service';\r\nimport { environment } from './environment';\r\nimport { CartMiniService } from './shared/cart-mini/cart-mini.service';\r\nimport { HeaderService } from './shared/header/header.service';\r\nimport { UserService } from './shared/user/user.service';\r\n\r\nexport class AppComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.remove('hidden');\r\n\t\t// console.log('AppComponent.onInit');\r\n\t\tthis.header = HeaderService.currentHeader;\r\n\t\tHeaderService.header$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(header => {\r\n\t\t\tthis.header = header;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tCartMiniService.items$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(_ => this.pushChanges());\r\n\t}\r\n\r\n\tonOpenMarketAndLanguage() {\r\n\t\tHeaderService.onBack();\r\n\t\tModalService.open$({ src: environment.template.modal.marketsAndLanguagesModal }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tconsole.log('AppComponent.onOpenMarketAndLanguage', event);\r\n\t\t});\r\n\t}\r\n\r\n\tonLogin() {\r\n\t\tHeaderService.onBack();\r\n\t\tModalService.open$({ src: environment.template.modal.userModal, data: { view: 1 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tconsole.log('AppComponent.onLogin', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\twindow.location.href = environment.slug.reservedArea;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonLogout() {\r\n\t\tUserService.signout$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tonProjectRegistration(event) {\r\n\t\tModalService.open$({ src: environment.template.modal.projectsRegistrationModal }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tconsole.log('AppComponent.onProjectRegistration', event);\r\n\t\t\t/*\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\t// window.location.href = environment.slug.reservedArea;\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t});\r\n\t}\r\n\r\n\tonAddToCart(item) {\r\n\t\tCartMiniService.getPriceAndAddItem$(item).pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(_ => {\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tonOpenMiniCart() {\r\n\t\tHeaderService.setHeader('cart');\r\n\t}\r\n\r\n}\r\n\r\nAppComponent.meta = {\r\n\tselector: '[app-component]',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class DownloadDirective extends Directive {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('download', this.download);\r\n\t}\r\n\r\n}\r\n\r\nDownloadDirective.meta = {\r\n\tselector: '[download]',\r\n\tinputs: ['download']\r\n};\r\n","import { fromEvent, ReplaySubject } from 'rxjs';\r\nimport { delay, switchMap } from 'rxjs/operators';\r\n\r\nexport class LocomotiveScrollService {\r\n\r\n\tstatic scroll$ = new ReplaySubject(1);\r\n\tstatic scroll(scroll) {\r\n\t\t// console.log('LocomotiveScrollService.scroll', scroll);\r\n\t\tthis.scroll$.next(scroll);\r\n\t}\r\n\r\n\tstatic init(node, options) {\r\n\t\toptions = Object.assign({\r\n\t\t\tuseKeyboard: true,\r\n\t\t\tsmoothMobile: true,\r\n\t\t\tinertia: 0.5,\r\n\t\t\t// name:'scroll',\r\n\t\t\t// offset: [0,0], // bottom top\r\n\t\t\t// repeat: false,\r\n\t\t\tsmooth: true,\r\n\t\t\t// initPosition: { x: 0, y: 0 }\r\n\t\t\t// direction: 'vertical',\r\n\t\t\tlerp: 0.01,\r\n\t\t\tgetDirection: true, // add direction to scroll event\r\n\t\t\tgetSpeed: true, // add speed to scroll event\r\n\t\t\t// class: 'is-inview',\r\n\t\t\tinitClass: 'has-scroll-init',\r\n\t\t\tscrollingClass: 'has-scroll-scrolling',\r\n\t\t\tdraggingClass: 'has-scroll-dragging',\r\n\t\t\tsmoothClass: 'has-scroll-smooth',\r\n\t\t\tscrollbarContainer: false,\r\n\t\t\tscrollbarClass: 'c-scrollbar',\r\n\t\t\tmultiplier: 1,\r\n\t\t\tfirefoxMultiplier: 50,\r\n\t\t\ttouchMultiplier: 2,\r\n\t\t\tscrollFromAnywhere: true,\r\n\t\t\tgestureDirection: 'vertical',\r\n\t\t\treloadOnContextChange: false,\r\n\t\t\tresetNativeScroll: true,\r\n\t\t}, options, {\r\n\t\t\tel: node,\r\n\t\t});\r\n\t\tif (this.useLocomotiveScroll()) {\r\n\t\t\tconst instance = new LocomotiveScroll(options);\r\n\t\t\tLocomotiveScrollService.instance = instance;\r\n\t\t\treturn instance;\r\n\t\t} else {\r\n\t\t\tdocument.querySelector('html').classList.add('has-scroll-init');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic useLocomotiveScroll() {\r\n\t\treturn window.innerWidth >= 768 && !this.isMacLike();\r\n\t}\r\n\r\n\tstatic isMacLike() {\r\n\t\tconst isMacLike = /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform);\r\n\t\treturn isMacLike;\r\n\t}\r\n\r\n\tstatic isIOS() {\r\n\t\tconst isIOS = /(iPhone|iPod|iPad)/i.test(navigator.platform);\r\n\t\treturn isIOS;\r\n\t}\r\n\r\n\tstatic isMacOs() {\r\n\t\tconst isMacOs = navigator.platform.toLowerCase().indexOf('mac') >= 0;\r\n\t\treturn isMacOs;\r\n\t}\r\n\r\n\tstatic isSafari() {\r\n\t\tconst isSafari = navigator.vendor.match(/apple/i) &&\r\n\t\t\t!navigator.userAgent.match(/crios/i) &&\r\n\t\t\t!navigator.userAgent.match(/fxios/i);\r\n\t\treturn isSafari;\r\n\t}\r\n\r\n\tstatic init$(node) {\r\n\t\treturn fromEvent(window, 'DOMContentLoaded').pipe(\r\n\t\t\tdelay(1),\r\n\t\t\tswitchMap(_ => {\r\n\t\t\t\t// setTimeout(() => {\r\n\t\t\t\tconst instance = LocomotiveScrollService.init(node);\r\n\t\t\t\tif (instance) {\r\n\t\t\t\t\tconst showefy = document.querySelector('#showefy');\r\n\t\t\t\t\tinstance.on('scroll', instance => {\r\n\t\t\t\t\t\tLocomotiveScrollService.scroll(instance);\r\n\t\t\t\t\t\tif (showefy) {\r\n\t\t\t\t\t\t\tconst isShowefyDisabled = instance.speed > 0.1;\r\n\t\t\t\t\t\t\tif (isShowefyDisabled) {\r\n\t\t\t\t\t\t\t\tif (showefy.style.pointerEvents !== 'none') {\r\n\t\t\t\t\t\t\t\t\tshowefy.style.pointerEvents = 'none';\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (showefy.style.pointerEvents === 'none') {\r\n\t\t\t\t\t\t\t\t\tshowefy.style.pointerEvents = 'auto';\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst event = { direction: null, scroll: { x: 0, y: 0 }, speed: 0 };\r\n\t\t\t\t\tconst body = document.querySelector('body');\r\n\t\t\t\t\tlet previousY = body.scrollTop; // window.pageYOffset; // body.scrollTop;\r\n\t\t\t\t\tbody.addEventListener('scroll', () => {\r\n\t\t\t\t\t\tconst y = body.scrollTop; // window.pageYOffset; // body.scrollTop;\r\n\t\t\t\t\t\tconst direction = y >= previousY ? 'down' : 'up';\r\n\t\t\t\t\t\t// console.log('scroll', y, direction);\r\n\t\t\t\t\t\tpreviousY = y;\r\n\t\t\t\t\t\tevent.direction = direction;\r\n\t\t\t\t\t\tevent.scroll.y = y;\r\n\t\t\t\t\t\tLocomotiveScrollService.scroll(event);\r\n\t\t\t\t\t}, true);\r\n\t\t\t\t}\r\n\t\t\t\treturn LocomotiveScrollService.scroll$;\r\n\t\t\t\t// }, 1);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic update() {\r\n\t\tif (this.instance) {\r\n\t\t\tthis.instance.update();\r\n\t\t}\r\n\t}\r\n\r\n\tstatic stop() {\r\n\t\tif (this.instance) {\r\n\t\t\tthis.instance.stop();\r\n\t\t}\r\n\t}\r\n\r\n\tstatic start() {\r\n\t\tif (this.instance) {\r\n\t\t\tthis.instance.start();\r\n\t\t}\r\n\t}\r\n\r\n\tstatic scrollTo(target, options = { offset: -130 }) {\r\n\t\tif (this.instance) {\r\n\t\t\tthis.instance.scrollTo(target, options);\r\n\t\t} else {\r\n\t\t\tconst body = document.querySelector('body');\r\n\t\t\tconst currentTop = body.scrollTop; // window.pageYOffset; // body.scrollTop;\r\n\t\t\tconst targetTop = currentTop + target.getBoundingClientRect().top + options.offset;\r\n\t\t\tconst distance = targetTop - currentTop;\r\n\t\t\tconst o = { pow: 0 };\r\n\t\t\tgsap.set(body, {\r\n\t\t\t\t'scroll-behavior': 'auto'\r\n\t\t\t});\r\n\t\t\tif (options.disableLerp) {\r\n\t\t\t\tgsap.set(body, {\r\n\t\t\t\t\t'scrollTop': currentTop + distance\r\n\t\t\t\t});\r\n\t\t\t\tgsap.set(body, {\r\n\t\t\t\t\t'scroll-behavior': 'smooth'\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tgsap.to(o, {\r\n\t\t\t\t\tduration: Math.abs(distance) / 2000,\r\n\t\t\t\t\tpow: 1,\r\n\t\t\t\t\tease: Quad.easeOut,\r\n\t\t\t\t\toverwrite: 'all',\r\n\t\t\t\t\tonUpdate: () => {\r\n\t\t\t\t\t\tgsap.set(body, {\r\n\t\t\t\t\t\t\t'scrollTop': currentTop + distance * o.pow\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// window.scrollTo(0, currentTop + distance * o.pow);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonComplete: () => {\r\n\t\t\t\t\t\tgsap.set(body, {\r\n\t\t\t\t\t\t\t'scroll-behavior': 'smooth'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t// target.scrollIntoView();\r\n\t\t}\r\n\t}\r\n\r\n\tstatic scrollToSelector(selector, options) {\r\n\t\tconst target = document.querySelector(selector);\r\n\t\tif (target) {\r\n\t\t\tLocomotiveScrollService.scrollTo(target, options);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\n\r\nlet DROPDOWN_ID = 1000000;\r\n\r\nexport class DropdownDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this.dropdown || this.id_ || (this.id_ = DropdownDirective.nextId());\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst trigger = node.getAttribute('dropdown-trigger');\r\n\t\tthis.trigger = trigger ? node.querySelector(trigger) : node;\r\n\t\tthis.opened = null;\r\n\t\tthis.onClick = this.onClick.bind(this);\r\n\t\tthis.onDocumentClick = this.onDocumentClick.bind(this);\r\n\t\tthis.openDropdown = this.openDropdown.bind(this);\r\n\t\tthis.closeDropdown = this.closeDropdown.bind(this);\r\n\t\tthis.addListeners();\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.openDropdown();\r\n\t\t} else {\r\n\t\t\tconst dropdownItemNode = node.querySelector('[dropdown-item]');\r\n\t\t\t// console.log('dropdownItemNode', dropdownItemNode);\r\n\t\t\tif (!dropdownItemNode) { // if (this.trigger !== node) {\r\n\t\t\t\tthis.closeDropdown();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDocumentClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst clickedInside = node === event.target || node.contains(event.target);\r\n\t\tif (!clickedInside) {\r\n\t\t\tthis.closeDropdown();\r\n\t\t}\r\n\t}\r\n\r\n\topenDropdown() {\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.opened = true;\r\n\t\t\tthis.addDocumentListeners();\r\n\t\t\tDropdownDirective.dropdown$.next(this.id);\r\n\t\t\tthis.dropped.next(this.id);\r\n\t\t}\r\n\t}\r\n\r\n\tcloseDropdown() {\r\n\t\tif (this.opened !== null) {\r\n\t\t\tthis.removeDocumentListeners();\r\n\t\t\tthis.opened = null;\r\n\t\t\tif (DropdownDirective.dropdown$.getValue() === this.id) {\r\n\t\t\t\tDropdownDirective.dropdown$.next(null);\r\n\t\t\t\tthis.dropped.next(null);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\taddListeners() {\r\n\t\tthis.trigger.addEventListener('click', this.onClick);\r\n\t}\r\n\r\n\taddDocumentListeners() {\r\n\t\tdocument.addEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tremoveListeners() {\r\n\t\tthis.trigger.removeEventListener('click', this.onClick);\r\n\t}\r\n\r\n\tremoveDocumentListeners() {\r\n\t\tdocument.removeEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners();\r\n\t\tthis.removeDocumentListeners();\r\n\t}\r\n\r\n\tstatic nextId() {\r\n\t\treturn DROPDOWN_ID++;\r\n\t}\r\n\r\n}\r\n\r\nDropdownDirective.meta = {\r\n\tselector: '[dropdown]',\r\n\tinputs: ['dropdown', 'dropdown-trigger'],\r\n\toutputs: ['dropped']\r\n};\r\n\r\nDropdownDirective.dropdown$ = new BehaviorSubject(null);\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { takeUntil, tap } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from '../locomotive-scroll/locomotive-scroll.service';\r\nimport { DropdownDirective } from './dropdown.directive';\r\n\r\nexport class DropdownItemDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this['dropdown-item'];\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('dropdown-item');\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownItemDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t\t// LocomotiveScrollService.stop();\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t\t// LocomotiveScrollService.start();\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.enter$(node).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t\tthis.leave$(node).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t\t// this.addListeners();\r\n\t}\r\n\r\n\tenter$(node) {\r\n\t\t// const { node } = getContext(this);\r\n\t\treturn fromEvent(node, 'mouseenter').pipe(\r\n\t\t\ttap(event => {\r\n\t\t\t\tLocomotiveScrollService.stop();\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tleave$(node) {\r\n\t\t// const { node } = getContext(this);\r\n\t\treturn fromEvent(node, 'mouseleave').pipe(\r\n\t\t\ttap(event => {\r\n\t\t\t\tLocomotiveScrollService.start();\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\t/*\r\n\tonDestroy() {\r\n\t\tthis.removeListeners();\r\n\t}\r\n\r\n\tonEnter(event) {\r\n\t\tLocomotiveScrollService.stop();\r\n\t}\r\n\r\n\tonLeave(event) {\r\n\t\tLocomotiveScrollService.start();\r\n\t}\r\n\r\n\taddListeners() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.addEventListener('mouseenter', this.onEnter);\r\n\t\tnode.addEventListener('mouseleave', this.onLeave);\r\n\t}\r\n\r\n\tremoveListeners() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.removeEventListener('mouseenter', this.onEnter);\r\n\t\tnode.removeEventListener('mouseleave', this.onLeave);\r\n\t}\r\n\t*/\r\n}\r\n\r\nDropdownItemDirective.meta = {\r\n\tselector: '[dropdown-item], [[dropdown-item]]',\r\n\tinputs: ['dropdown-item']\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nexport class EnvPipe extends Pipe {\r\n\r\n\tstatic transform(keypath) {\r\n\t\tlet env = environment;\r\n\t\tconst keys = keypath.split('.');\r\n\t\tlet k = keys.shift();\r\n\t\twhile (keys.length > 0 && env[k]) {\r\n\t\t\tenv = env[k];\r\n\t\t\tk = keys.shift();\r\n\t\t}\r\n\t\tconst value = env[k] || null;\r\n\t\treturn value;\r\n\t}\r\n\r\n}\r\n\r\nEnvPipe.meta = {\r\n\tname: 'env',\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nexport class FlagPipe extends Pipe {\r\n\r\n\tstatic transform(key) {\r\n\t\tconst flags = environment.flags;\r\n\t\treturn flags[key] || false;\r\n\t}\r\n\r\n}\r\n\r\nFlagPipe.meta = {\r\n\tname: 'flag',\r\n};\r\n","\r\nimport { Pipe } from 'rxcomp';\r\n\r\nexport class HighlightPipe extends Pipe {\r\n\r\n\tstatic transform(text, query) {\r\n\t\tif (!query) {\r\n\t\t\treturn text;\r\n\t\t}\r\n\t\tif (!Array.isArray(query)) {\r\n\t\t\tquery = [query];\r\n\t\t}\r\n\t\t// text = HighlightPipe.encodeHTML(text);\r\n\t\tconst escapedQuery = query.map(x => HighlightPipe.escapeRegexChars(x));\r\n\t\tconst regExp = new RegExp(`(?<!\\<)${escapedQuery.join('(?![\\w\\s]*[\\>])|(?<!\\<)')}(?![\\w\\s]*[\\>])`, 'gmi');\r\n\t\t// const regExp = new RegExp('&[^;]+;|' + escapedQuery.join('|'), 'gi');\r\n\t\ttext = text.replace(regExp, function(match, i, b) {\r\n\t\t\treturn '<b>' + match + '</b>';\r\n\t\t\t// return match.toLowerCase() === x.toLowerCase() ? '<strong>' + match + '</strong>' : match;\r\n\t\t});\r\n\t\t// text = HighlightPipe.decodeHTML(text);\r\n\t\tconsole.log(text);\r\n\t\treturn text;\r\n\t}\r\n\r\n\tstatic escapeRegexChars(text) {\r\n\t\treturn text.replace(/([.?*+^$[\\]\\\\(){}|-])/g, '\\\\$1');\r\n\t}\r\n\r\n\tstatic safeToString(text) {\r\n\t\treturn text === undefined || text === null ? '' : text.toString().trim();\r\n\t}\r\n\r\n\tstatic encodeHTML(text) {\r\n\t\treturn this.safeToString(text)\r\n\t\t\t.replace(/&/g, '&amp;')\r\n\t\t\t.replace(/</g, '&lt;')\r\n\t\t\t.replace(/>/g, '&gt;');\r\n\t}\r\n\r\n\tstatic decodeHTML(text) {\r\n\t\treturn text\r\n\t\t\t.replace(/&amp;/g, '&')\r\n\t\t\t.replace(/&lt;/g, '<')\r\n\t\t\t.replace(/&gt;/g, '>');\r\n\t}\r\n\r\n}\r\n\r\nHighlightPipe.meta = {\r\n\tname: 'highlight',\r\n};\r\n\r\n","import { Pipe } from 'rxcomp';\r\n\r\n/*\r\n['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n['\"', '&', ''', '<', '>', ' ', '¡', '¢', '£', '¤', '¥', '¦', '§', '¨', '©', 'ª', '«', '¬', '­', '®', '¯', '°', '±', '²', '³', '´', 'µ', '¶', '·', '¸', '¹', 'º', '»', '¼', '½', '¾', '¿', 'À', 'Á', 'Â', 'Ã', 'Ä', 'Å', 'Æ', 'Ç', 'È', 'É', 'Ê', 'Ë', 'Ì', 'Í', 'Î', 'Ï', 'Ð', 'Ñ', 'Ò', 'Ó', 'Ô', 'Õ', 'Ö', '×', 'Ø', 'Ù', 'Ú', 'Û', 'Ü', 'Ý', 'Þ', 'ß', 'à', 'á', 'ã', 'ä', 'å', 'æ', 'ç', 'è', 'é', 'ê', 'ë', 'ì', 'í', 'î', 'ï', 'ð', 'ñ', 'ò', 'ó', 'ô', 'õ', 'ö', '÷', 'ø', 'ù', 'ú', 'û', 'ü', 'ý', 'þ', 'ÿ', '&', '•', '°', '∞', '‰', '⋅', '±', '†', '—', '¬', 'µ', '⊥', '∥', '€', '£', '¥', '¢', '©', '®', '™', 'α', 'β', 'γ', 'δ', 'ε', 'ζ', 'η', 'θ', 'ι', 'κ', 'λ', 'μ', 'ν', 'ξ', 'ο', 'π', 'ρ', 'σ', 'τ', 'υ', 'φ', 'χ', 'ψ', 'ω', 'Α', 'Β', 'Γ', 'Δ', 'Ε', 'Ζ', 'Η', 'Θ', 'Ι', 'Κ', 'Λ', 'Μ', 'Ν', 'Ξ', 'Ο', 'Π', 'Ρ', 'Σ', 'Τ', 'Υ', 'Φ', 'Χ', 'Ψ', 'Ω'];\r\n*/\r\n\r\nexport class HtmlPipe extends Pipe {\r\n\r\n\tstatic transform(value) {\r\n\t\tif (value) {\r\n\t\t\tvalue = value.replace(/&#(\\d+);/g, function(m, n) {\r\n\t\t\t\treturn String.fromCharCode(parseInt(n));\r\n\t\t\t});\r\n\t\t\tconst escapes = ['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n\t\t\tconst unescapes = ['\"', '&', '\\'', '<', '>', ' ', '¡', '¢', '£', '¤', '¥', '¦', '§', '¨', '©', 'ª', '«', '¬', '­', '®', '¯', '°', '±', '²', '³', '´', 'µ', '¶', '·', '¸', '¹', 'º', '»', '¼', '½', '¾', '¿', 'À', 'Á', 'Â', 'Ã', 'Ä', 'Å', 'Æ', 'Ç', 'È', 'É', 'Ê', 'Ë', 'Ì', 'Í', 'Î', 'Ï', 'Ð', 'Ñ', 'Ò', 'Ó', 'Ô', 'Õ', 'Ö', '×', 'Ø', 'Ù', 'Ú', 'Û', 'Ü', 'Ý', 'Þ', 'ß', 'à', 'á', 'ã', 'ä', 'å', 'æ', 'ç', 'è', 'é', 'ê', 'ë', 'ì', 'í', 'î', 'ï', 'ð', 'ñ', 'ò', 'ó', 'ô', 'õ', 'ö', '÷', 'ø', 'ù', 'ú', 'û', 'ü', 'ý', 'þ', 'ÿ', '&', '•', '°', '∞', '‰', '⋅', '±', '†', '—', '¬', 'µ', '⊥', '∥', '€', '£', '¥', '¢', '©', '®', '™', 'α', 'β', 'γ', 'δ', 'ε', 'ζ', 'η', 'θ', 'ι', 'κ', 'λ', 'μ', 'ν', 'ξ', 'ο', 'π', 'ρ', 'σ', 'τ', 'υ', 'φ', 'χ', 'ψ', 'ω', 'Α', 'Β', 'Γ', 'Δ', 'Ε', 'Ζ', 'Η', 'Θ', 'Ι', 'Κ', 'Λ', 'Μ', 'Ν', 'Ξ', 'Ο', 'Π', 'Ρ', 'Σ', 'Τ', 'Υ', 'Φ', 'Χ', 'Ψ', 'Ω'];\r\n\t\t\tconst rx = new RegExp(`(&${escapes.join(';)|(&')};)`, 'g');\r\n\t\t\tvalue = value.replace(rx, function() {\r\n\t\t\t\tfor (let i = 1; i < arguments.length; i++) {\r\n\t\t\t\t\tif (arguments[i]) {\r\n\t\t\t\t\t\t// console.log(arguments[i], unescapes[i - 1]);\r\n\t\t\t\t\t\treturn unescapes[i - 1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// console.log(value);\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nHtmlPipe.meta = {\r\n\tname: 'html',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class IdDirective extends Directive {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('id', this.id);\r\n\t}\r\n\r\n}\r\n\r\nIdDirective.meta = {\r\n\tselector: '[id]',\r\n\tinputs: ['id']\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class LabelForDirective extends Directive {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('for', this.labelFor);\r\n\t}\r\n\r\n}\r\n\r\nLabelForDirective.meta = {\r\n\tselector: '[labelFor]',\r\n\tinputs: ['labelFor']\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil, tap } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from './locomotive-scroll.service';\r\n\r\nexport class LocomotiveScrollStickyDirective extends Directive {\r\n\r\n\tsticked_ = false;\r\n\tget sticked() {\r\n\t\treturn this.sticked_;\r\n\t}\r\n\tset sticked(sticked) {\r\n\t\tif (this.sticked_ !== sticked) {\r\n\t\t\tthis.sticked_ = sticked;\r\n\t\t\tif (this.targetNode) {\r\n\t\t\t\tsticked ? this.targetNode.classList.add('sticked') : this.targetNode.classList.remove('sticked');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.targetNode = (this.target ? (node.querySelector(this.target) || node) : node);\r\n\t\tthis.until = this.until ? document.querySelector(this.until) : null;\r\n\t\tthis.sticky$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('LocomotiveScrollStickyDirective', event);\r\n\t\t});\r\n\t}\r\n\r\n\tsticky$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst targetNode = this.targetNode;\r\n\t\tconst until = this.until;\r\n\t\treturn LocomotiveScrollService.scroll$.pipe(\r\n\t\t\ttap(event => {\r\n\t\t\t\tconst rect = node.getBoundingClientRect();\r\n\t\t\t\tlet y = 0;\r\n\t\t\t\tif (this.bottom) {\r\n\t\t\t\t\tconst bottom = window.innerHeight - targetNode.offsetHeight;\r\n\t\t\t\t\tif (window.innerWidth >= 1024 && rect.y > bottom) {\r\n\t\t\t\t\t\ty = bottom - rect.y;\r\n\t\t\t\t\t\tthis.sticked = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.sticked = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst top = event.direction === 'down' ? 80 : 135;\r\n\t\t\t\t\tif (window.innerWidth >= 1024 && rect.y < top) {\r\n\t\t\t\t\t\ty = top - rect.y;\r\n\t\t\t\t\t\tif (until) {\r\n\t\t\t\t\t\t\tconst untilRect = until.getBoundingClientRect();\r\n\t\t\t\t\t\t\tconst height = untilRect.y - rect.y;\r\n\t\t\t\t\t\t\ty = Math.min(height, y);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.sticked = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.sticked = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// console.log(rect.height - targetNode.offsetHeight);\r\n\t\t\t\tgsap.set(targetNode, { y });\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nLocomotiveScrollStickyDirective.meta = {\r\n\tselector: '[locomotive-scroll-sticky],[[locomotive-scroll-sticky]]',\r\n\tinputs: ['target', 'until', 'bottom'],\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { takeUntil, tap } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from './locomotive-scroll.service';\r\n\r\nexport class LocomotiveScrollToDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tthis.initialFocus = false;\r\n\t\tconst { module, node } = getContext(this);\r\n\t\tconst expression = this.expression = node.getAttribute(`(locomotiveScrollTo)`);\r\n\t\tthis.outputFunction = module.makeFunction(expression, ['$event']);\r\n\t\tthis.scrollTo$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tscrollTo$() {\r\n\t\tconst { module, node, parentInstance } = getContext(this);\r\n\t\treturn fromEvent(node, 'click').pipe(\r\n\t\t\ttap(event => {\r\n\t\t\t\tif (event) {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t\tconst selector = module.resolve(this.outputFunction, parentInstance, event);\r\n\t\t\t\tif (typeof selector === 'string') {\r\n\t\t\t\t\tconst target = node.querySelector(selector) || document.querySelector(selector);\r\n\t\t\t\t\tif (target) {\r\n\t\t\t\t\t\tconst offset = this.offset;\r\n\t\t\t\t\t\tconst options = offset ? { offset } : undefined;\r\n\t\t\t\t\t\tLocomotiveScrollService.scrollTo(target, options);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nLocomotiveScrollToDirective.meta = {\r\n\tselector: `[(locomotiveScrollTo)]`,\r\n\tinputs: ['offset']\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from './locomotive-scroll.service';\r\n\r\nexport class LocomotiveScrollDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tLocomotiveScrollService.init$(node).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('LocomotiveScrollDirective', event);\r\n\t\t});\r\n\t\tif ('ResizeObserver' in window) {\r\n\t\t\tconst resizeObserver = new ResizeObserver(entries => {\r\n\t\t\t\t// console.log('LocomotiveScrollDirective.ResizeObserver', entries[0].target.clientHeight);\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t\tresizeObserver.observe(node);\r\n\t\t}\r\n\t\t/*\r\n\t\tconst images = Array.prototype.slice.call(document.querySelectorAll('img'));\r\n\t\timages.forEach(image => {\r\n\t\t\timage.onload = () => {\r\n\t\t\t\tconsole.log(update);\r\n\t\t\t\tinstance.update();\r\n\t\t\t};\r\n\t\t});\r\n\t\t*/\r\n\t\t/*\r\n\t\twindow.onload = () => {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tconst instance = LocomotiveScrollService.init(node);\r\n\t\t\t\tif (instance) {\r\n\t\t\t\t\tinstance.on('scroll', instance => {\r\n\t\t\t\t\t\tLocomotiveScrollService.scroll(instance.scroll.y);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst body = document.querySelector('body');\r\n\t\t\t\t\twindow.addEventListener('scroll', () => {\r\n\t\t\t\t\t\tconst y = body.scrollTop; // window.pageYOffset\r\n\t\t\t\t\t\tLocomotiveScrollService.scroll(y);\r\n\t\t\t\t\t}, true);\r\n\t\t\t\t}\r\n\t\t\t}, 1);\r\n\t\t};\r\n\t\t*/\r\n\t}\r\n\r\n}\r\n\r\nLocomotiveScrollDirective.meta = {\r\n\tselector: '[locomotive-scroll],[[locomotive-scroll]]'\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil, tap } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from './locomotive-scroll.service';\r\n\r\nexport class ScrollDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tif (LocomotiveScrollService.useLocomotiveScroll()) {\r\n\t\t\tthis.scroll$().pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(event => {\r\n\t\t\t\t// console.log('ScrollDirective', event);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tscroll$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst speed = this.scrollSpeed ? parseFloat(this.scrollSpeed) : 1.5;\r\n\t\treturn LocomotiveScrollService.scroll$.pipe(\r\n\t\t\ttap(scroll => {\r\n\t\t\t\tconst wh = window.innerHeight;\r\n\t\t\t\tconst wh2 = wh / 2;\r\n\t\t\t\tconst rect = node.getBoundingClientRect();\r\n\t\t\t\tconst currentY = gsap.getProperty(node, 'y');\r\n\t\t\t\tconst top = rect.top - currentY;\r\n\t\t\t\tconst bottom = rect.bottom - currentY;\r\n\t\t\t\tif (top < wh && bottom > 0) {\r\n\t\t\t\t\tconst pow = (top - wh2) / wh2;\r\n\t\t\t\t\tconst y = pow * speed * 40;\r\n\t\t\t\t\tgsap.set(node, { y });\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nScrollDirective.meta = {\r\n\tselector: '[scroll]',\r\n\tinputs: ['scrollSpeed'],\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { ModalService } from './modal.service';\r\n\r\nexport class ModalOutletComponent extends Component {\r\n\tget modal() {\r\n\t\treturn this.modal_;\r\n\t}\r\n\r\n\tset modal(modal) {\r\n\t\t// console.log('ModalOutletComponent set modal', modal, this);\r\n\t\tconst { module } = getContext(this);\r\n\t\tif (this.modal_ && this.modal_.node) {\r\n\t\t\tmodule.remove(this.modal_.node, this);\r\n\t\t\tthis.modalNode.removeChild(this.modal_.node);\r\n\t\t}\r\n\t\tif (modal && modal.node) {\r\n\t\t\tthis.modal_ = modal;\r\n\t\t\tthis.modalNode.appendChild(modal.node);\r\n\t\t\tconst instances = module.compile(modal.node);\r\n\t\t}\r\n\t\tthis.modal_ = modal;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.modalNode = node.querySelector('.modal-outlet__modal');\r\n\t\tModalService.modal$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(modal => {\r\n\t\t\tthis.modal = modal;\r\n\t\t});\r\n\t}\r\n\r\n\treject(event) {\r\n\t\tModalService.reject();\r\n\t}\r\n}\r\n\r\nModalOutletComponent.meta = {\r\n\tselector: '[modal-outlet]',\r\n\ttemplate: /* html */ `\r\n\t<div class=\"modal-outlet__container\" [class]=\"{ active: modal }\">\r\n\t\t<div class=\"modal-outlet__background\" (click)=\"reject($event)\"></div>\r\n\t\t<div class=\"modal-outlet__modal\"></div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Pipe } from 'rxcomp';\r\n\r\nexport class NumberPipe extends Pipe {\r\n\r\n\tstatic transform(value, language = 'en-IN', options = {}) {\r\n\t\tif (value != null) { // !!! keep losing\r\n\t\t\treturn new Intl.NumberFormat(language, options).format(value);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nNumberPipe.meta = {\r\n\tname: 'number',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { takeUntil, tap } from 'rxjs/operators';\r\n\r\nexport default class ShareDirective extends Directive {\r\n\r\n\tget href() {\r\n\t\tswitch (this.share) {\r\n\t\t\tcase 'facebook':\r\n\t\t\t\treturn this.facebookUrl;\r\n\t\t\tcase 'pinterest':\r\n\t\t\t\treturn this.pinterestUrl;\r\n\t\t\tcase 'linkedIn':\r\n\t\t\t\treturn this.linkedInUrl;\r\n\t\t\tcase 'twitter':\r\n\t\t\t\treturn this.twitterUrl;\r\n\t\t\tcase 'whatsapp':\r\n\t\t\t\treturn this.whatsappUrl;\r\n\t\t\tcase 'mailTo':\r\n\t\t\t\treturn this.mailToUrl;\r\n\t\t}\r\n\t}\r\n\r\n\tget facebookUrl() {\r\n\t\treturn `https://www.facebook.com/sharer/sharer.php?u=${this.url}`;\r\n\t}\r\n\r\n\tget pinterestUrl() {\r\n\t\treturn `https://www.pinterest.com/pin/create/button/?url=${this.url}&media=&description=${this.title}`;\r\n\t}\r\n\r\n\tget linkedInUrl() {\r\n\t\treturn `https://www.linkedin.com/shareArticle?mini=true&url=${this.url}&title=${this.title}`;\r\n\t}\r\n\r\n\tget twitterUrl() {\r\n\t\treturn `https://twitter.com/intent/tweet?text=${this.title}%20${this.url}`;\r\n\t}\r\n\r\n\tget whatsappUrl() {\r\n\t\treturn `https://api.whatsapp.com/send?text=${this.url}`;\r\n\t}\r\n\r\n\tget mailToUrl() {\r\n\t\treturn `mailto:?subject=${this.title}&body=${this.url}`;\r\n\t}\r\n\r\n\tget title() {\r\n\t\tconst title = this.shareTitle ? this.shareTitle : document.title;\r\n\t\treturn this.encodeURI(title);\r\n\t}\r\n\r\n\tget url() {\r\n\t\tlet url = this.shareUrl;\r\n\t\tif (url) {\r\n\t\t\tif (url.indexOf(window.location.origin) === -1) {\r\n\t\t\t\turl = window.location.origin + (url.indexOf('/') === 0 ? url : ('/' + url));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\turl = window.location.href;\r\n\t\t}\r\n\t\treturn this.encodeURI(url);\r\n\t}\r\n\r\n\tonInit() {\r\n\t\t// console.log('ShareComponent.onInit', this.share, this.title);\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst href = this.href;\r\n\t\tnode.setAttribute('href', href);\r\n\t\tif (this.share !== 'mailTo') {\r\n\t\t\tnode.setAttribute('target', '_blank');\r\n\t\t\tfromEvent(node, 'click').pipe(\r\n\t\t\t\ttap(event => {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\twindow.open(href, 'ShareWindow', window.innerWidth >= 768 ? 'width=640,height=480' : '');\r\n\t\t\t\t}),\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe();\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\tonChanges() {\r\n\t\tconsole.log('ShareComponent.onChanges', this.share, this.shareTitle);\r\n\t}\r\n\t*/\r\n\r\n\tencodeURI(text) {\r\n\t\treturn encodeURIComponent(text).replace(/[!'()*]/g, function(c) {\r\n\t\t\treturn '%' + c.charCodeAt(0).toString(16);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nShareDirective.meta = {\r\n\tselector: '[share]',\r\n\tinputs: ['share', 'shareUrl', 'shareTitle'],\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nexport class SlugPipe extends Pipe {\r\n\r\n\tstatic transform(key) {\r\n\t\tconst slug = environment.slug;\r\n\t\treturn slug[key] || `#${key}`;\r\n\t}\r\n\r\n}\r\n\r\nSlugPipe.meta = {\r\n\tname: 'slug',\r\n};\r\n","import { getContext, Structure } from 'rxcomp';\r\n\r\nexport class SvgIconStructure extends Structure {\r\n\tonInit() {\r\n\t\tthis.update();\r\n\t}\r\n\tonChanges() {\r\n\t\tthis.update();\r\n\t}\r\n\tupdate() {\r\n\t\tif (this.name_ !== this.name) {\r\n\t\t\tthis.name_ = this.name;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tif (node.parentNode) {\r\n\t\t\t\tconst xmlns = 'http://www.w3.org/2000/svg';\r\n\t\t\t\tconst element = document.createElementNS(xmlns, `svg`);\r\n\t\t\t\tconst w = this.width || 24;\r\n\t\t\t\tconst h = this.height || 24;\r\n\t\t\t\telement.setAttribute('class', `icon--${this.name}`);\r\n\t\t\t\t// element.setAttributeNS(null, 'width', w);\r\n\t\t\t\t// element.setAttributeNS(null, 'height', h);\r\n\t\t\t\telement.setAttributeNS(null, 'viewBox', `0 0 ${w} ${h}`);\r\n\t\t\t\telement.innerHTML = `<use xlink:href=\"#${this.name}\"></use>`;\r\n\t\t\t\telement.rxcompId = node.rxcompId;\r\n\t\t\t\telement.classList.add(...node.classList);\r\n\t\t\t\tnode.parentNode.replaceChild(element, node);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nSvgIconStructure.meta = {\r\n\tselector: 'svg-icon',\r\n\tinputs: ['name', 'width', 'height']\r\n};\r\n\r\n/*\r\n<svg class=\"copy\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><use xlink:href=\"#copy\"></use></svg>\r\n*/\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { Subject } from 'rxjs';\r\n\r\nexport class SwiperDirective extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 'auto',\r\n\t\t\tspaceBetween: 0,\r\n\t\t\tcenteredSlides: true,\r\n\t\t\tspeed: 600,\r\n\t\t\tautoplay: {\r\n\t\t\t\tdelay: 5000,\r\n\t\t\t},\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t}\r\n\r\n\tget enabled() {\r\n\t\treturn !window.matchMedia('print').matches;\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tthis.swiperInitOrUpdate_();\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners_();\r\n\t\tthis.swiperDestroy_();\r\n\t}\r\n\r\n\tonBeforePrint() {\r\n\t\tthis.swiperDestroy_();\r\n\t}\r\n\r\n\tslideToIndex(index) {\r\n\t\t// console.log('SwiperDirective.slideToIndex', index);\r\n\t\tif (this.swiper) {\r\n\t\t\tthis.swiper.slideTo(index);\r\n\t\t}\r\n\t}\r\n\r\n\thasPrev() {\r\n\t\tconst swiper = this.swiper;\r\n\t\tif (swiper && swiper.activeIndex > 0 && swiper.slides.length > swiper.activeIndex) {\r\n\t\t\t// console.log('SwiperDirective.hasPrev', swiper.activeIndex, swiper.realIndex, swiper.slides);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\r\n\thasNext() {\r\n\t\tconst swiper = this.swiper;\r\n\t\tif (swiper) {\r\n\t\t\tconst slidesPerView = swiper.params.slidesPerView || 1;\r\n\t\t\t// console.log('SwiperDirective.hasNext', swiper.slides.length, swiper.params.slidesPerView);\r\n\t\t\tif (swiper.activeIndex < swiper.slides.length - slidesPerView) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tslidePrev() {\r\n\t\tconst swiper = this.swiper;\r\n\t\tif (this.hasPrev()) {\r\n\t\t\t// console.log('SwiperDirective.slidePrev', swiper.activeIndex, swiper.realIndex, swiper.slides);\r\n\t\t\tswiper.slideTo(swiper.activeIndex - 1);\r\n\t\t}\r\n\t}\r\n\r\n\tslideNext() {\r\n\t\tconst swiper = this.swiper;\r\n\t\tif (this.hasNext()) {\r\n\t\t\t// console.log('SwiperDirective.slideNext', swiper.activeIndex, swiper.realIndex, swiper.slides);\r\n\t\t\tswiper.slideTo(swiper.activeIndex + 1);\r\n\t\t}\r\n\t}\r\n\r\n\tinit_(target) {\r\n\t\tthis.events$ = new Subject();\r\n\t\tif (this.enabled) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\ttarget = target || node;\r\n\t\t\tthis.target = target;\r\n\t\t\tgsap.set(target, { opacity: 0 });\r\n\t\t\tthis.index = 0;\r\n\t\t\tconst on = this.options.on || {};\r\n\t\t\ton.slideChange = () => {\r\n\t\t\t\tconst swiper = this.swiper;\r\n\t\t\t\tif (swiper) {\r\n\t\t\t\t\tthis.index = swiper.activeIndex;\r\n\t\t\t\t\tthis.events$.next(this.index);\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.options.on = on;\r\n\t\t\tthis.addListeners_();\r\n\t\t}\r\n\t}\r\n\r\n\taddListeners_() {\r\n\t\tthis.onBeforePrint = this.onBeforePrint.bind(this);\r\n\t\twindow.addEventListener('beforeprint', this.onBeforePrint);\r\n\t\t/*\r\n\t\tscope.$on('onResize', ($scope) => {\r\n\t\t\tthis.onResize(scope, element, attributes);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\tremoveListeners_() {\r\n\t\twindow.removeEventListener('beforeprint', this.onBeforePrint);\r\n\t}\r\n\r\n\tswiperInitOrUpdate_() {\r\n\t\tif (this.enabled) {\r\n\t\t\tconst target = this.target;\r\n\t\t\tif (this.swiper) {\r\n\t\t\t\tthis.swiper.update();\r\n\t\t\t} else {\r\n\t\t\t\tlet swiper;\r\n\t\t\t\tconst on = this.options.on || (this.options.on = {});\r\n\t\t\t\tconst callback = on.init;\r\n\t\t\t\tif (!on.init || !on.init.swiperDirectiveInit) {\r\n\t\t\t\t\ton.init = function() {\r\n\t\t\t\t\t\tgsap.to(target, {\r\n\t\t\t\t\t\t\tduration: 0.4,\r\n\t\t\t\t\t\t\topacity: 1,\r\n\t\t\t\t\t\t\tease: Power2.easeOut,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tif (typeof callback === 'function') {\r\n\t\t\t\t\t\t\t\tcallback.apply(this, [swiper, element, scope]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, 1);\r\n\t\t\t\t\t};\r\n\t\t\t\t\ton.init.swiperDirectiveInit = true;\r\n\t\t\t\t}\r\n\t\t\t\tgsap.set(target, { opacity: 1 });\r\n\t\t\t\tswiper = new Swiper(target, this.options);\r\n\t\t\t\t// console.log(swiper);\r\n\t\t\t\tthis.swiper = swiper;\r\n\t\t\t\tthis.swiper._opening = true;\r\n\t\t\t\ttarget.classList.add('swiper-init');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tswiperDestroy_() {\r\n\t\tif (this.swiper) {\r\n\t\t\tthis.swiper.destroy();\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nSwiperDirective.meta = {\r\n\tselector: '[swiper]',\r\n\tinputs: ['consumer']\r\n};\r\n","import { fromEvent, of } from 'rxjs';\r\nimport { map, shareReplay } from 'rxjs/operators';\r\n\r\n// <!-- <script id=ta_bootstrapper src='https://gruppoconcorde-cdn.thron.com/shared/plugins/tracking/current/bootstrapper-min.js'></script> -->\r\n// <script src='https://gruppoconcorde-cdn.thron.com/shared/ce/bootstrap/1/scripts/embeds-min.js'></script>\r\n\r\nexport class ThronService {\r\n\r\n\tstatic thron$() {\r\n\t\tlet thron = window.THRONContentExperience || window.THRONPlayer;\r\n\t\tif (thron) {\r\n\t\t\treturn of(thron);\r\n\t\t} else {\r\n\t\t\tconst script = document.createElement('script');\r\n\t\t\tscript.setAttribute('type', 'text/javascript');\r\n\t\t\tscript.setAttribute('src', 'https://gruppoconcorde-cdn.thron.com/shared/ce/bootstrap/1/scripts/embeds-min.js')\r\n\t\t\tconst loaded$ = fromEvent(script, 'load').pipe(\r\n\t\t\t\t// tap(event => console.log(event, window.THRONContentExperience || window.THRONPlayer)),\r\n\t\t\t\tmap(event => window.THRONContentExperience || window.THRONPlayer),\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t);\r\n\t\t\treturn document.head.appendChild(script) && loaded$;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { first, tap } from 'rxjs/operators';\r\nimport { ThronService } from './thron.service';\r\n\r\nlet ID = 0;\r\n\r\nexport class ThronComponent extends Component {\r\n\r\n\tplaying_ = false;\r\n\tget playing() {\r\n\t\treturn this.playing_;\r\n\t}\r\n\tset playing(playing) {\r\n\t\tif (this.playing_ !== playing) {\r\n\t\t\tthis.playing_ = playing;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tif (node) {\r\n\t\t\t\tplaying ? node.classList.add('playing') : node.classList.remove('playing');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\t// console.log('ThronComponent.onInit');\r\n\t\tthis.init$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tinit$() {\r\n\t\treturn ThronService.thron$().pipe(\r\n\t\t\ttap(THRON => {\r\n\t\t\t\t// const THRON = window.THRONContentExperience || window.THRONPlayer;\r\n\t\t\t\tif (!THRON) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// console.log('THRONContentExperience', window.THRONContentExperience, 'THRONPlayer', window.THRONPlayer);\r\n\t\t\t\tconst { node } = getContext(this);\r\n\t\t\t\tconst target = this.target = node.querySelector('.video > .thron');\r\n\t\t\t\tconst id = target.id = `thron-${++ID}`;\r\n\t\t\t\tlet media = this.thron;\r\n\t\t\t\tif (media.indexOf('pkey=') === -1) {\r\n\t\t\t\t\tconst splitted = media.split('/');\r\n\t\t\t\t\tconst clientId = splitted[6];\r\n\t\t\t\t\tconst xcontentId = splitted[7];\r\n\t\t\t\t\tconst pkey = splitted[8];\r\n\t\t\t\t\tmedia = `https://gruppoconcorde-view.thron.com/api/xcontents/resources/delivery/getContentDetail?clientId=${clientId}&xcontentId=${xcontentId}&pkey=${pkey}`;\r\n\t\t\t\t}\r\n\t\t\t\tconst controls = this.controls = node.hasAttribute('controls') ? true : false,\r\n\t\t\t\t\tloop = this.loop = node.hasAttribute('loop') ? true : false,\r\n\t\t\t\t\tautoplay = this.autoplay = node.hasAttribute('autoplay') ? true : false;\r\n\t\t\t\tconst player = this.player = THRON(id, {\r\n\t\t\t\t\tmedia: media,\r\n\t\t\t\t\tloop: loop,\r\n\t\t\t\t\tautoplay: autoplay,\r\n\t\t\t\t\tmuted: !controls,\r\n\t\t\t\t\tdisplayLinked: 'close',\r\n\t\t\t\t\tnoSkin: !controls,\r\n\t\t\t\t\t// lockBitrate: 'max',\r\n\t\t\t\t});\r\n\t\t\t\tthis.onReady = this.onReady.bind(this);\r\n\t\t\t\tthis.onCanPlay = this.onCanPlay.bind(this);\r\n\t\t\t\tthis.onPlaying = this.onPlaying.bind(this);\r\n\t\t\t\tthis.onPlay = this.onPlay.bind(this);\r\n\t\t\t\tthis.onPause = this.onPause.bind(this);\r\n\t\t\t\tthis.onComplete = this.onComplete.bind(this);\r\n\t\t\t\tplayer.on('ready', this.onReady);\r\n\t\t\t\tplayer.on('canPlay', this.onCanPlay);\r\n\t\t\t\tplayer.on('playing', this.onPlaying);\r\n\t\t\t\tplayer.on('play', this.onPlay);\r\n\t\t\t\tplayer.on('pause', this.onPause);\r\n\t\t\t\tplayer.on('complete', this.onComplete);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tonReady() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tif (!this.controls) {\r\n\t\t\tconst mediaContainer = player.mediaContainer();\r\n\t\t\tconst video = mediaContainer.querySelector('video');\r\n\t\t\tvideo.setAttribute('playsinline', 'true');\r\n\t\t\tvideo.setAttribute('autoplay', 'true');\r\n\t\t}\r\n\t\tthis.ready.next(id);\r\n\t\t// video.setAttribute('autoplay', 'true');\r\n\t};\r\n\r\n\tonCanPlay() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\t// console.log('ThronDirective.onCanPlay', id);\r\n\t\tthis.canPlay.next(id);\r\n\t}\r\n\r\n\tonPlaying() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tplayer.off('playing', this.onPlaying);\r\n\t\tif (!this.controls) {\r\n\t\t\tconst qualities = player.qualityLevels();\r\n\t\t\t// console.log('ThronDirective.onPlaying', id, qualities);\r\n\t\t\tif (qualities.length) {\r\n\t\t\t\tconst highestQuality = qualities[qualities.length - 1].index;\r\n\t\t\t\tconst lowestQuality = qualities[0].index;\r\n\t\t\t\tplayer.currentQuality(highestQuality);\r\n\t\t\t\t// console.log('ThronDirective.onPlaying', id, 'currentQuality', player.currentQuality());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonPlay() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\t// console.log('ThronDirective.onComplete', id);\r\n\t\tthis.playing = true;\r\n\t\tthis.play.next(id);\r\n\t}\r\n\r\n\tonPause() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\t// console.log('ThronDirective.onComplete', id);\r\n\t\tthis.playing = false;\r\n\t\tthis.pause.next(id);\r\n\t}\r\n\r\n\tonComplete() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\t// console.log('ThronDirective.onComplete', id);\r\n\t\tthis.playing = false;\r\n\t\tthis.complete.next(id);\r\n\t}\r\n\r\n\tplayVideo() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tconst status = player.status();\r\n\t\t// console.log('ThronDirective.playVideo', id, status);\r\n\t\tif (status && !status.playing) {\r\n\t\t\tplayer.play();\r\n\t\t}\r\n\t}\r\n\r\n\tpauseVideo() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tconst status = player.status();\r\n\t\t// console.log('ThronDirective.pauseVideo', id, status);\r\n\t\tif (status && status.playing) {\r\n\t\t\tplayer.pause();\r\n\t\t}\r\n\t}\r\n\r\n\ttoggle() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tconst status = player.status();\r\n\t\t// console.log('ThronDirective.pauseVideo', id, status);\r\n\t\tif (status && status.playing) {\r\n\t\t\tplayer.pause();\r\n\t\t} else {\r\n\t\t\tplayer.play();\r\n\t\t}\r\n\t}\r\n\r\n\tplay(id) {\r\n\t\t// console.log('ThronDirective.play', id, id, id === id);\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (id === this.target.id) {\r\n\t\t\tthis.playVideo();\r\n\t\t}\r\n\t}\r\n\r\n\tpause(id) {\r\n\t\t// console.log('ThronDirective.pause', id, id, id === id);\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (id === this.target.id) {\r\n\t\t\tthis.pauseVideo();\r\n\t\t}\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tconst player = this.player;\r\n\t\tif (player) {\r\n\t\t\tplayer.off('ready', this.onReady);\r\n\t\t\tplayer.off('canPlay', this.onCanPlay);\r\n\t\t\tplayer.off('playing', this.onPlaying);\r\n\t\t\tplayer.off('play', this.onPlay);\r\n\t\t\tplayer.off('pause', this.onPause);\r\n\t\t\tplayer.off('complete', this.onComplete);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nThronComponent.meta = {\r\n\tselector: '[thron],[[thron]]',\r\n\toutputs: ['ready', 'canPlay', 'play', 'pause', 'complete'],\r\n\tinputs: ['thron', 'm3u8'],\r\n\ttemplate: /* html */``,\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class TitleDirective extends Directive {\r\n\tset title(title) {\r\n\t\tif (this.title_ !== title) {\r\n\t\t\tthis.title_ = title;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\ttitle ? node.setAttribute('title', title) : node.removeAttribute('title');\r\n\t\t}\r\n\t}\r\n\tget title() {\r\n\t\treturn this.title_;\r\n\t}\r\n}\r\n\r\nTitleDirective.meta = {\r\n\tselector: '[[title]]',\r\n\tinputs: ['title'],\r\n};\r\n","import { Module } from 'rxcomp';\r\nimport { DownloadDirective } from './download/download.directive';\r\nimport { DropdownItemDirective } from './dropdown/dropdown-item.directive';\r\nimport { DropdownDirective } from './dropdown/dropdown.directive';\r\nimport { EnvPipe } from './env/env.pipe';\r\nimport { FlagPipe } from './flag/flag.pipe';\r\nimport { HighlightPipe } from './highlight/highlight.pipe';\r\nimport { HtmlPipe } from './html/html.pipe';\r\nimport { IdDirective } from './id/id.directive';\r\nimport { LabelForDirective } from './label-for/label-for.directive';\r\nimport { LabelPipe } from './label/label.pipe';\r\nimport { LocomotiveScrollStickyDirective } from './locomotive-scroll/locomotive-scroll-sticky.directive';\r\nimport { LocomotiveScrollToDirective } from './locomotive-scroll/locomotive-scroll-to.directive';\r\nimport { LocomotiveScrollDirective } from './locomotive-scroll/locomotive-scroll.directive';\r\nimport { ScrollDirective } from './locomotive-scroll/scroll.directive';\r\nimport { ModalOutletComponent } from './modal/modal-outlet.component';\r\nimport { NumberPipe } from './number/number.pipe';\r\nimport ShareDirective from './share/share.directive';\r\nimport { SlugPipe } from './slug/slug.pipe';\r\nimport { SvgIconStructure } from './svg/svg-icon.structure';\r\nimport { SwiperDirective } from './swiper/swiper.directive';\r\nimport { ThronComponent } from './thron/thron.component';\r\nimport { TitleDirective } from './title/title.directive';\r\n\r\nconst factories = [\r\n\tDownloadDirective,\r\n\t// DropDirective,\r\n\tDropdownDirective,\r\n\tDropdownItemDirective,\r\n\t// DropdownItemDirective,\r\n\tIdDirective,\r\n\tLabelForDirective,\r\n\t// LanguageComponent,\r\n\t// LazyDirective,\r\n\tLocomotiveScrollDirective,\r\n\tLocomotiveScrollStickyDirective,\r\n\tLocomotiveScrollToDirective,\r\n\t// ModalComponent,\r\n\tModalOutletComponent,\r\n\tScrollDirective,\r\n\tShareDirective,\r\n\tSvgIconStructure,\r\n\tSwiperDirective,\r\n\tThronComponent,\r\n\tTitleDirective,\r\n\t// UploadItemComponent,\r\n\t// VirtualStructure\r\n];\r\n\r\nconst pipes = [\r\n\tEnvPipe,\r\n\tFlagPipe,\r\n\tHighlightPipe,\r\n\tHtmlPipe,\r\n\tLabelPipe,\r\n\tNumberPipe,\r\n\tSlugPipe,\r\n];\r\n\r\nexport class CommonModule extends Module { }\r\n\r\nCommonModule.meta = {\r\n\timports: [\r\n\t],\r\n\tdeclarations: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n\texports: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\n\r\nexport class ControlComponent extends Component {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\t// console.log(this, node, this.control);\r\n\t\tconst control = this.control;\r\n\t\tconst flags = control.flags;\r\n\t\tObject.keys(flags).forEach((key) => {\r\n\t\t\tflags[key] ? node.classList.add(key) : node.classList.remove(key);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nControlComponent.meta = {\r\n\tselector: '[control]',\r\n\tinputs: ['control']\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlCheckboxComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t}\r\n\r\n}\r\n\r\nControlCheckboxComponent.meta = {\r\n\tselector: '[control-checkbox]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--checkbox\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<input [id]=\"control.name\" type=\"checkbox\" class=\"control--checkbox\" [formControl]=\"control\" [value]=\"true\" />\r\n\t\t\t<label [labelFor]=\"control.name\">\r\n\t\t\t\t<svg class=\"icon icon--checkbox\"><use xlink:href=\"#checkbox\"></use></svg>\r\n\t\t\t\t<svg class=\"icon icon--checkbox-checked\"><use xlink:href=\"#checkbox-checked\"></use></svg>\r\n\t\t\t\t<span [innerHTML]=\"label | html\"></span>\r\n\t\t\t\t<span class=\"required__sign\">*</span>\r\n\t\t\t</label>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { fromEvent, merge } from 'rxjs';\r\nimport { filter, map, shareReplay, startWith } from 'rxjs/operators';\r\n\r\nexport class KeyboardService {\r\n\r\n\tstatic keys = {};\r\n\r\n\tstatic keydown$() {\r\n\t\tif (!this.keydown$_) {\r\n\t\t\tthis.keydown$_ = fromEvent(window, 'keydown').pipe(\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn this.keydown$_;\r\n\t}\r\n\r\n\tstatic keyup$() {\r\n\t\tif (!this.keyup$_) {\r\n\t\t\tthis.keyup$_ = fromEvent(window, 'keyup').pipe(\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn this.keyup$_;\r\n\t}\r\n\r\n\tstatic keys$() {\r\n\t\tif (!this.keys$_) {\r\n\t\t\tthis.keys$_ = merge(this.keydown$(), this.keyup$()).pipe(\r\n\t\t\t\tmap(event => {\r\n\t\t\t\t\tconst keys = this.keys;\r\n\t\t\t\t\tif (event.type === 'keydown') {\r\n\t\t\t\t\t\tkeys[event.key] = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdelete keys[event.key];\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn this.keys;\r\n\t\t\t\t}),\r\n\t\t\t\tstartWith(this.keys),\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn this.keys$_;\r\n\t}\r\n\r\n\tstatic key$() {\r\n\t\tif (!this.key$_) {\r\n\t\t\tconst regexp = /\\w/;\r\n\t\t\tthis.key$_ = this.keydown$().pipe(\r\n\t\t\t\tfilter(event => event.key && event.key.match(regexp)),\r\n\t\t\t\tmap(event => event.key),\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn this.key$_;\r\n\t}\r\n\r\n\tstatic typing$() {\r\n\t\tif (!this.typing$_) {\r\n\t\t\tlet typing = '',\r\n\t\t\t\tto;\r\n\t\t\tthis.typing$_ = this.key$().pipe(\r\n\t\t\t\tmap(key => {\r\n\t\t\t\t\tif (to) {\r\n\t\t\t\t\t\tclearTimeout(to);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttyping += key;\r\n\t\t\t\t\tto = setTimeout(() => {\r\n\t\t\t\t\t\ttyping = '';\r\n\t\t\t\t\t}, 1500);\r\n\t\t\t\t\treturn typing;\r\n\t\t\t\t}),\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn this.typing$_;\r\n\t}\r\n\r\n}\r\n","import { getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { DropdownDirective } from '../common/dropdown/dropdown.directive';\r\nimport { KeyboardService } from '../common/keyboard/keyboard.service';\r\nimport { ControlComponent } from './control.component';\r\n\r\nexport class ControlCustomSelectComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t\tthis.dropped = false;\r\n\t\tthis.dropdownId = DropdownDirective.nextId();\r\n\t\tKeyboardService.typing$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(word => {\r\n\t\t\tthis.scrollToWord(word);\r\n\t\t});\r\n\t\t/*\r\n\t\tKeyboardService.key$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(key => {\r\n\t\t\tthis.scrollToKey(key);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\t/*\r\n\tonChanges() {\r\n\t\t// console.log('ControlCustomSelectComponent.onChanges');\r\n\t}\r\n\t*/\r\n\r\n\tscrollToWord(word) {\r\n\t\t// console.log('ControlCustomSelectComponent.scrollToWord', word);\r\n\t\tconst items = this.control.options || [];\r\n\t\tlet index = -1;\r\n\t\tfor (let i = 0; i < items.length; i++) {\r\n\t\t\tconst x = items[i];\r\n\t\t\tif (x.name.toLowerCase().indexOf(word.toLowerCase()) === 0) {\r\n\t\t\t\t// console.log(word, x.name);\r\n\t\t\t\tindex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (index !== -1) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tconst dropdown = node.querySelector('.dropdown');\r\n\t\t\tconst navDropdown = node.querySelector('.nav--dropdown');\r\n\t\t\tconst item = navDropdown.children[index];\r\n\t\t\tdropdown.scrollTo(0, item.offsetTop);\r\n\t\t}\r\n\t}\r\n\r\n\tsetOption(item) {\r\n\t\t// console.log('setOption', item, this.isMultiple);\r\n\t\tlet value;\r\n\t\tif (this.isMultiple) {\r\n\t\t\tconst value = this.control.value || [];\r\n\t\t\tconst index = value.indexOf(item.id);\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\t// if (value.length > 1) {\r\n\t\t\t\tvalue.splice(index, 1);\r\n\t\t\t\t// }\r\n\t\t\t} else {\r\n\t\t\t\tvalue.push(item.id);\r\n\t\t\t}\r\n\t\t\tvalue = value.length ? value.slice() : null;\r\n\t\t} else {\r\n\t\t\tvalue = item.id;\r\n\t\t\t// DropdownDirective.dropdown$.next(null);\r\n\t\t}\r\n\t\tthis.control.value = value;\r\n\t\tthis.change.next(value);\r\n\t}\r\n\r\n\thasOption(item) {\r\n\t\tif (this.isMultiple) {\r\n\t\t\tconst values = this.control.value || [];\r\n\t\t\treturn values.indexOf(item.id) !== -1;\r\n\t\t} else {\r\n\t\t\treturn this.control.value === item.id;\r\n\t\t}\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tlet value = this.control.value;\r\n\t\tconst items = this.control.options || [];\r\n\t\tif (this.isMultiple) {\r\n\t\t\tvalue = value || [];\r\n\t\t\tif (value.length) {\r\n\t\t\t\treturn value.map(v => {\r\n\t\t\t\t\tconst item = items.find(x => x.id === v || x.name === v);\r\n\t\t\t\t\treturn item ? item.name : '';\r\n\t\t\t\t}).join(', ');\r\n\t\t\t} else {\r\n\t\t\t\treturn this.select || 'select'; // LabelPipe.transform('select');\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst item = value ? items.find(x => x.id === value || x.name === value) : null;\r\n\t\t\tif (item) {\r\n\t\t\t\treturn item.name;\r\n\t\t\t} else {\r\n\t\t\t\treturn this.select || 'select'; // LabelPipe.transform('select');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDropped($event) {\r\n\t\t// console.log('ControlCustomSelectComponent.onDropped', id);\r\n\t\tif (this.dropped && $event === null) {\r\n\t\t\tthis.control.touched = true;\r\n\t\t}\r\n\t\tthis.dropped = $event === this.dropdownId;\r\n\t}\r\n\r\n\tget isMultiple() {\r\n\t\treturn this.multiple && this.multiple !== false && this.multiple !== 'false';\r\n\t}\r\n\r\n}\r\n\r\nControlCustomSelectComponent.meta = {\r\n\tselector: '[control-custom-select]',\r\n\toutputs: ['change'],\r\n\tinputs: ['control', 'label', 'multiple', 'select'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--select\" [class]=\"{ required: control.validators.length, multiple: isMultiple }\" [dropdown]=\"dropdownId\" (dropped)=\"onDropped($event)\">\r\n\t\t\t<label><span [innerHTML]=\"label\"></span> <span class=\"required__sign\">*</span></label>\r\n\t\t\t<span class=\"control--custom-select\" [innerHTML]=\"getLabel() | label\"></span>\r\n\t\t\t<svg class=\"caret-down\"><use xlink:href=\"#caret-down\"></use></svg>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t\t<div class=\"dropdown\" [dropdown-item]=\"dropdownId\">\r\n\t\t\t<div class=\"category\" [innerHTML]=\"label\"></div>\r\n\t\t\t<ul class=\"nav--dropdown\" [class]=\"{ multiple: isMultiple }\">\r\n\t\t\t\t<li (click)=\"setOption(item)\" [class]=\"{ empty: item.id == null }\" *for=\"let item of control.options\">\r\n\t\t\t\t\t<span [class]=\"{ active: hasOption(item) }\" [innerHTML]=\"item.name | label\"></span>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlEmailComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t}\r\n\r\n}\r\n\r\nControlEmailComponent.meta = {\r\n\tselector: '[control-email]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [labelFor]=\"control.name\"><span [innerHTML]=\"label\"></span> <span class=\"required__sign\">*</span></label>\r\n\t\t\t<input [id]=\"control.name\" type=\"text\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" required email />\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlFileComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t\tthis.labels = window.labels || {};\r\n\t\tthis.file = null;\r\n\t\tthis.onReaderComplete = this.onReaderComplete.bind(this);\r\n\t}\r\n\r\n\tonInputDidChange(event) {\r\n\t\tconst input = event.target;\r\n\t\tconst file = input.files[0];\r\n\t\tthis.file = {\r\n\t\t\tname: file.name,\r\n\t\t\tlastModified: file.lastModified,\r\n\t\t\tlastModifiedDate: file.lastModifiedDate,\r\n\t\t\tsize: file.size,\r\n\t\t\ttype: file.type,\r\n\t\t}\r\n\t\tconst reader = new FileReader();\r\n\t\treader.addEventListener('load', this.onReaderComplete);\r\n\t\treader.readAsDataURL(file);\r\n\t\t// reader.readAsArrayBuffer() // Starts reading the contents of the specified Blob, once finished, the result attribute contains an ArrayBuffer representing the file's data.\r\n\t\t// reader.readAsBinaryString() // Starts reading the contents of the specified Blob, once finished, the result attribute contains the raw binary data from the file as a string.\r\n\t\t// reader.readAsDataURL() // Starts reading the contents of the specified Blob, once finished, the result attribute contains a data: URL representing the file's data.\r\n\t\t// reader.readAsText() // Starts reading the contents of the specified Blob, once finished, the result attribute contains the contents of the file as a text string. An optional encoding name can be specified.\r\n\t}\r\n\r\n\tonReaderComplete(event) {\r\n\t\tconst content = event.target.result;\r\n\t\tthis.file.content = content;\r\n\t\tthis.control.value = this.file;\r\n\t\t// console.log('ControlFileComponent.onReaderComplete', this.file);\r\n\t\t// image/*,\r\n\t}\r\n\r\n}\r\n\r\nControlFileComponent.meta = {\r\n\tselector: '[control-file]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--file\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label for=\"file\"><span [innerHTML]=\"label\"></span> <span class=\"required__sign\">*</span></label>\r\n\t\t\t<span class=\"control--text\" [innerHTML]=\"file?.name || labels.select_file\"></span>\r\n\t\t\t<svg class=\"upload\"><use xlink:href=\"#upload\"></use></svg>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t\t<input name=\"file\" type=\"file\" accept=\".pdf,.doc,.docx,*.txt\" class=\"control--file\" (change)=\"onInputDidChange($event)\" />\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlPasswordComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t}\r\n\r\n}\r\n\r\nControlPasswordComponent.meta = {\r\n\tselector: '[control-password]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [labelFor]=\"control.name\"><span [innerHTML]=\"label\"></span> <span class=\"required__sign\">*</span></label>\r\n\t\t\t<input [id]=\"control.name\" type=\"password\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" />\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlSearchComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t\tthis.disabled = this.disabled || false;\r\n\t}\r\n\r\n}\r\n\r\nControlSearchComponent.meta = {\r\n\tselector: '[control-search]',\r\n\tinputs: ['control', 'label', 'disabled'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length, disabled: disabled }\">\r\n\t\t\t<svg class=\"search\"><use xlink:href=\"#search\"></use></svg>\r\n\t\t\t<input type=\"text\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" [disabled]=\"disabled\" />\r\n\t\t</div>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlTextComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t\tthis.disabled = this.disabled || false;\r\n\t}\r\n\r\n}\r\n\r\nControlTextComponent.meta = {\r\n\tselector: '[control-text]',\r\n\tinputs: ['control', 'label', 'disabled'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length, disabled: disabled }\">\r\n\t\t\t<label [labelFor]=\"control.name\"><span [innerHTML]=\"label\"></span> <span class=\"required__sign\">*</span></label>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t\t<input [id]=\"control.name\" type=\"text\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" [disabled]=\"disabled\" />\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlTextareaComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t\tthis.disabled = this.disabled || false;\r\n\t}\r\n\r\n}\r\n\r\nControlTextareaComponent.meta = {\r\n\tselector: '[control-textarea]',\r\n\tinputs: ['control', 'label', 'disabled'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--textarea\" [class]=\"{ required: control.validators.length, disabled: disabled }\">\r\n\t\t\t<label [labelFor]=\"control.name\"><span [innerHTML]=\"label\"></span> <span class=\"required__sign\">*</span></label>\r\n\t\t\t<textarea [id]=\"control.name\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" [innerHTML]=\"label\" rows=\"4\" [disabled]=\"disabled\"></textarea>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { LabelPipe } from '../common/label/label.pipe';\r\nimport { ControlComponent } from './control.component';\r\n\r\nexport class ErrorsComponent extends ControlComponent {\r\n\r\n\tgetLabel(key, value) {\r\n\t\tconst label = LabelPipe.transform(`error_${key}`);\r\n\t\treturn label;\r\n\t}\r\n\r\n}\r\n\r\nErrorsComponent.meta = {\r\n\tselector: 'errors-component',\r\n\tinputs: ['control'],\r\n\ttemplate: /* html */ `\r\n\t<div class=\"inner\" [style]=\"{ display: control.invalid && control.touched ? 'block' : 'none' }\">\r\n\t\t<div class=\"error\" *for=\"let [key, value] of control.errors\">\r\n\t\t\t<span [innerHTML]=\"getLabel(key, value)\"></span>\r\n\t\t\t<!-- <span class=\"key\" [innerHTML]=\"key\"></span> <span class=\"value\" [innerHTML]=\"value | json\"></span> -->\r\n\t\t</div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Component } from 'rxcomp';\r\n\r\nexport class TestComponent extends Component {\r\n\r\n\tonTest(event) {\r\n\t\tthis.test.next(event);\r\n\t}\r\n\r\n\tonReset(event) {\r\n\t\tthis.reset.next(event);\r\n\t}\r\n\r\n}\r\n\r\nTestComponent.meta = {\r\n\tselector: 'test-component',\r\n\tinputs: ['form'],\r\n\toutputs: ['test', 'reset'],\r\n\ttemplate: /* html */ `\r\n\t<div class=\"test-component\" *if=\"!('production' | flag)\">\r\n\t\t<div class=\"test-component__title\">development mode</div>\r\n\t\t<code [innerHTML]=\"form.value | json\"></code>\r\n\t\t<button type=\"button\" class=\"btn--submit\" (click)=\"onTest($event)\"><span>test</span></button>\r\n\t\t<button type=\"button\" class=\"btn--submit\" (click)=\"onReset($event)\"><span>reset</span></button>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Module } from 'rxcomp';\r\nimport { ControlCheckboxComponent } from './control-checkbox.component';\r\nimport { ControlCustomSelectComponent } from './control-custom-select.component';\r\nimport { ControlEmailComponent } from './control-email.component';\r\nimport { ControlFileComponent } from './control-file.component';\r\nimport { ControlPasswordComponent } from './control-password.component';\r\nimport { ControlSearchComponent } from './control-search.component';\r\nimport { ControlTextComponent } from './control-text.component';\r\nimport { ControlTextareaComponent } from './control-textarea.component';\r\nimport { ErrorsComponent } from './errors.component';\r\nimport { TestComponent } from './test.component';\r\n\r\nconst factories = [\r\n\tControlCheckboxComponent,\r\n\tControlCustomSelectComponent,\r\n\tControlEmailComponent,\r\n\tControlFileComponent,\r\n\tControlPasswordComponent,\r\n\t// ControlSelectComponent,\r\n\tControlSearchComponent,\r\n\tControlTextareaComponent,\r\n\tControlTextComponent,\r\n\t// DisabledDirective,\r\n\tErrorsComponent,\r\n\tTestComponent,\r\n\t// ValueDirective,\r\n];\r\n\r\nconst pipes = [\r\n];\r\n\r\nexport class ControlsModule extends Module { }\r\n\r\nControlsModule.meta = {\r\n\timports: [\r\n\t],\r\n\tdeclarations: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n\texports: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n};\r\n","import { BehaviorSubject } from 'rxjs';\r\n\r\nexport const FilterMode = {\r\n\tSELECT: 'select',\r\n\tAND: 'and',\r\n\tOR: 'or',\r\n\tQUERY: 'query',\r\n};\r\n\r\nexport class FilterItem {\r\n\r\n\tconstructor(filter) {\r\n\t\tthis.change$ = new BehaviorSubject();\r\n\t\tthis.mode = FilterMode.SELECT;\r\n\t\tthis.filter = 'Filter';\r\n\t\tthis.placeholder = 'Select';\r\n\t\tthis.values = [];\r\n\t\tthis.options = [];\r\n\t\tif (filter) {\r\n\t\t\tObject.assign(this, filter);\r\n\t\t}\r\n\t\tif (filter.mode === FilterMode.SELECT) {\r\n\t\t\tfilter.options.unshift({\r\n\t\t\t\tlabel: filter.placeholder,\r\n\t\t\t\tvalue: undefined,\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfilter(item, value) {\r\n\t\treturn item.options.indexOf(value) !== -1;\r\n\t}\r\n\r\n\tmatch(item) {\r\n\t\tlet match;\r\n\t\tif (this.mode === FilterMode.OR) {\r\n\t\t\tmatch = this.values.length ? false : true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match || this.filter(item, value);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tmatch = true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match && this.filter(item, value);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn match;\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tif (this.mode === FilterMode.SELECT || this.mode === FilterMode.QUERY) {\r\n\t\t\treturn this.placeholder || this.label;\r\n\t\t} else {\r\n\t\t\treturn this.label;\r\n\t\t}\r\n\t}\r\n\r\n\thas(item) {\r\n\t\treturn this.values.indexOf(item.value) !== -1;\r\n\t}\r\n\r\n\tset(item) {\r\n\t\tif (this.mode === FilterMode.QUERY) {\r\n\t\t\tthis.values = item ? [item] : [];\r\n\t\t\tthis.placeholder = item;\r\n\t\t} else {\r\n\t\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\t\tthis.values = [];\r\n\t\t\t}\r\n\t\t\tconst index = this.values.indexOf(item.value);\r\n\t\t\tif (index === -1) {\r\n\t\t\t\tif (item.value !== undefined) {\r\n\t\t\t\t\tthis.values.push(item.value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\t\tthis.placeholder = item.label;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// console.log('FilterItem.set', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\tremove(item) {\r\n\t\tconst index = this.values.indexOf(item.value);\r\n\t\tif (index !== -1) {\r\n\t\t\tthis.values.splice(index, 1);\r\n\t\t}\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst first = this.options[0];\r\n\t\t\tthis.placeholder = first.label;\r\n\t\t}\r\n\t\t// console.log('FilterItem.remove', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\ttoggle(item) {\r\n\t\tif (this.has(item)) {\r\n\t\t\tthis.remove(item);\r\n\t\t} else {\r\n\t\t\tthis.set(item);\r\n\t\t}\r\n\t}\r\n\r\n\tclear() {\r\n\t\tthis.values = [];\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst first = this.options[0];\r\n\t\t\tthis.placeholder = first.label;\r\n\t\t}\r\n\t\tthis.change$.next();\r\n\t}\r\n}\r\n","import { merge } from 'rxjs';\r\nimport { map, tap } from 'rxjs/operators';\r\nimport { LocationService } from '../location/location.service';\r\nimport { FilterItem } from './filter-item';\r\n\r\nexport class FilterService {\r\n\r\n\tconstructor(options, initialParams, callback) {\r\n\t\tconst filters = {};\r\n\t\tif (options) {\r\n\t\t\tObject.keys(options).forEach(key => {\r\n\t\t\t\tconst filter = new FilterItem(options[key]);\r\n\t\t\t\tif (typeof callback === 'function') {\r\n\t\t\t\t\tcallback(key, filter);\r\n\t\t\t\t}\r\n\t\t\t\tfilters[key] = filter;\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.filters = filters;\r\n\t\tthis.deserialize(this.filters, initialParams);\r\n\t}\r\n\r\n\tgetParamsCount(params) {\r\n\t\tif (params) {\r\n\t\t\tconst paramsCount = Object.keys(params).reduce((p, c, i) => {\r\n\t\t\t\tconst values = params[c];\r\n\t\t\t\treturn p + (values ? values.length : 0);\r\n\t\t\t}, 0);\r\n\t\t\treturn paramsCount;\r\n\t\t} else {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t}\r\n\r\n\tdeserialize(filters, initialParams) {\r\n\t\tlet params;\r\n\t\tif (initialParams && this.getParamsCount(initialParams)) {\r\n\t\t\tparams = initialParams;\r\n\t\t}\r\n\t\tconst locationParams = LocationService.deserialize('filters');\r\n\t\tif (locationParams && this.getParamsCount(locationParams)) {\r\n\t\t\tparams = locationParams;\r\n\t\t}\r\n\t\tif (params) {\r\n\t\t\tObject.keys(filters).forEach(key => {\r\n\t\t\t\tfilters[key].values = params[key] || [];\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn filters;\r\n\t}\r\n\r\n\tserialize(filters) {\r\n\t\tlet params = {};\r\n\t\tlet any = false;\r\n\t\tObject.keys(filters).forEach(x => {\r\n\t\t\tconst filter = filters[x];\r\n\t\t\tif (filter.value !== null) {\r\n\t\t\t\tparams[x] = filter.values;\r\n\t\t\t\tany = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (!any) {\r\n\t\t\tparams = null;\r\n\t\t}\r\n\t\t// console.log('ReferenceCtrl.serialize', params);\r\n\t\tLocationService.serialize('filters', params);\r\n\t\treturn params;\r\n\t}\r\n\r\n\titems$(items) {\r\n\t\tconst filters = this.filters;\r\n\t\tconst changes = Object.keys(filters).map(key => filters[key].change$);\r\n\t\treturn merge(...changes).pipe(\r\n\t\t\t// tap(() => console.log(filters)),\r\n\t\t\ttap(() => this.serialize(filters)),\r\n\t\t\tmap(() => this.filterItems(items)),\r\n\t\t\ttap(() => this.updateFilterStates(filters, items))\r\n\t\t);\r\n\t}\r\n\r\n\tfilterItems(items, skipFilter) {\r\n\t\tconst filters = Object.keys(this.filters).map((x) => this.filters[x]).filter(x => x.value !== null);\r\n\t\titems = items.filter(item => {\r\n\t\t\tlet has = true;\r\n\t\t\tfilters.forEach(filter => {\r\n\t\t\t\tif (filter !== skipFilter) {\r\n\t\t\t\t\thas = has && filter.match(item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn has;\r\n\t\t});\r\n\t\treturn items;\r\n\t}\r\n\r\n\tupdateFilterStates(filters, items) {\r\n\t\tObject.keys(filters).forEach(x => {\r\n\t\t\tconst filter = filters[x];\r\n\t\t\tconst filteredItems = this.filterItems(items, filter);\r\n\t\t\tfilter.options.forEach(option => {\r\n\t\t\t\tlet count = 0;\r\n\t\t\t\tif (option.value) {\r\n\t\t\t\t\tlet i = 0;\r\n\t\t\t\t\twhile (i < filteredItems.length) {\r\n\t\t\t\t\t\tconst item = filteredItems[i];\r\n\t\t\t\t\t\tif (filter.filter(item, option.value)) {\r\n\t\t\t\t\t\t\tcount++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ti++;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcount = filteredItems.length;\r\n\t\t\t\t}\r\n\t\t\t\toption.count = count;\r\n\t\t\t\toption.disabled = count === 0;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tlet filter;\r\n\t\tObject.keys(this.filters).forEach(x => {\r\n\t\t\tfilter = this.filters[x];\r\n\t\t\tfilter.values = [];\r\n\t\t});\r\n\t\tif (filter) {\r\n\t\t\tfilter.change$.next();\r\n\t\t}\r\n\t}\r\n}\r\n","\r\nexport class FormService {\r\n\r\n\tstatic toOptions(options) {\r\n\t\toptions = options.slice().map(x => ({ id: x.value, name: x.label }));\r\n\t\treturn options;\r\n\t}\r\n\r\n\tstatic toSelectOptions(options) {\r\n\t\toptions = options.slice().map(x => ({ id: x.value, name: x.label }));\r\n\t\toptions.unshift({ id: null, name: 'select' });\r\n\t\treturn options;\r\n\t}\r\n\r\n}\r\n","import { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport class AmbienceService {\r\n\r\n\tstatic all$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/ambience/all');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/ambience/all.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/ambience/filters');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/ambience/filters.json');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup } from 'rxcomp-form';\r\nimport { combineLatest } from 'rxjs';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { FilterMode } from '../../common/filter/filter-item';\r\nimport { FilterService } from '../../common/filter/filter.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport { AmbienceService } from './ambience.service';\r\n\r\nexport class AmbienceComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.ambienceId = this.ambienceId || null;\r\n\t\tthis.items = [];\r\n\t\tthis.filteredItems = [];\r\n\t\tthis.filters = {};\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tambience: new FormControl(null),\r\n\t\t\tcategory: new FormControl(null),\r\n\t\t\tmaterial: new FormControl(null),\r\n\t\t\tdesigner: new FormControl(null),\r\n\t\t\tsearch: new FormControl(null),\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\t// console.log('AmbienceComponent.changes$', form.value);\r\n\t\t\tthis.setFilterByKeyAndValue('ambience', form.value.ambience);\r\n\t\t\tthis.setFilterByKeyAndValue('category', form.value.category);\r\n\t\t\tthis.setFilterByKeyAndValue('material', form.value.material);\r\n\t\t\tthis.setFilterByKeyAndValue('designer', form.value.designer);\r\n\t\t\tthis.setFilterByKeyAndValue('search', form.value.search);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(data => {\r\n\t\t\tthis.items = data[0];\r\n\t\t\tthis.filters = data[1];\r\n\t\t\tcontrols.ambience.options = FormService.toSelectOptions(this.filters.ambience.options);\r\n\t\t\tcontrols.category.options = FormService.toSelectOptions(this.filters.category.options);\r\n\t\t\tcontrols.material.options = FormService.toSelectOptions(this.filters.material.options);\r\n\t\t\tcontrols.designer.options = FormService.toSelectOptions(this.filters.designer.options);\r\n\t\t\tthis.onLoad();\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tAmbienceService.all$(),\r\n\t\t\tAmbienceService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\tonLoad() {\r\n\t\tconst items = this.items;\r\n\t\tconst filters = this.filters;\r\n\t\tObject.keys(filters).forEach(key => {\r\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\r\n\t\t});\r\n\t\tconst initialParams = {};\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\tswitch (key) {\r\n\t\t\t\t\t\t\tcase 'ambience':\r\n\t\t\t\t\t\t\t\treturn item.ambience.id === value;\r\n\t\t\t\t\t\t\tcase 'category':\r\n\t\t\t\t\t\t\t\treturn item.category.id === value;\r\n\t\t\t\t\t\t\tcase 'material':\r\n\t\t\t\t\t\t\t\treturn item.materials.indexOf(value) !== -1;\r\n\t\t\t\t\t\t\tcase 'designer':\r\n\t\t\t\t\t\t\t\treturn item.designers.indexOf(value) !== -1;\r\n\t\t\t\t\t\t\tcase 'search':\r\n\t\t\t\t\t\t\t\treturn item.title.toLowerCase().indexOf(value.toLowerCase()) !== -1\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t\tconst ambience = this.ambienceId ? this.ambienceId : (this.filters.ambience.values.length ? this.filters.ambience.values[0] : null);\r\n\t\tconst category = this.filters.category.values.length ? this.filters.category.values[0] : null;\r\n\t\tconst material = this.filters.material.values.length ? this.filters.material.values[0] : null;\r\n\t\tconst designer = this.filters.designer.values.length ? this.filters.designer.values[0] : null;\r\n\t\tconst search = this.filters.search.values.length ? this.filters.search.values[0] : null;\r\n\t\tthis.form.patch({ ambience, category, material, designer, search });\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(filteredItems => {\r\n\t\t\tthis.filteredItems = filteredItems;\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t\t// console.log('AmbienceComponent.filteredItems', filteredItems.length);\r\n\t\t});\r\n\t}\r\n\r\n\tsetFilterByKeyAndValue(key, value) {\r\n\t\tconst filter = this.filters[key];\r\n\t\tif (filter) {\r\n\t\t\tif (filter.mode === FilterMode.QUERY) {\r\n\t\t\t\tfilter.set(value);\r\n\t\t\t} else {\r\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\r\n\t\t\t\t// console.log(filter.options, option);\r\n\t\t\t\tif (option) {\r\n\t\t\t\t\tfilter.set(option);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfilter.clear();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonSearch(model) {\r\n\t\t// console.log('AmbienceComponent.onSearch', this.form.value);\r\n\t\tthis.setFilterByKeyAndValue('ambience', this.form.value.ambience);\r\n\t\tthis.setFilterByKeyAndValue('category', this.form.value.category);\r\n\t\tthis.setFilterByKeyAndValue('material', this.form.value.material);\r\n\t\tthis.setFilterByKeyAndValue('designer', this.form.value.designer);\r\n\t\tthis.setFilterByKeyAndValue('search', this.form.value.search);\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tclearFilter(event, filter) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopImmediatePropagation();\r\n\t\tfilter.clear();\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nAmbienceComponent.meta = {\r\n\tselector: '[ambience]',\r\n\tinputs: ['ambienceId'],\r\n};\r\n","import { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport class AteliersAndStoresService {\r\n\r\n\tstatic all$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/ateliers-and-stores/all');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/ateliers-and-stores/all.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic ateliers$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/ateliers-and-stores/ateliers.json');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/ateliers-and-stores/ateliers.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic stores$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/ateliers-and-stores/stores.json');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/ateliers-and-stores/stores.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/ateliers-and-stores/filters');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/ateliers-and-stores/filters.json');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup } from 'rxcomp-form';\r\nimport { combineLatest } from 'rxjs';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { FilterMode } from '../../common/filter/filter-item';\r\nimport { FilterService } from '../../common/filter/filter.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport { AteliersAndStoresService } from './ateliers-and-stores.service';\r\n\r\nexport class AteliersAndStoresComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.types = {\r\n\t\t\tAtelier: 1,\r\n\t\t\tStore: 2,\r\n\t\t};\r\n\t\tthis.items = [];\r\n\t\tthis.filteredItems = [];\r\n\t\tthis.filteredAteliers = [];\r\n\t\tthis.filteredStores = [];\r\n\t\tthis.filters = {};\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tcountry: new FormControl(null),\r\n\t\t\tsearch: new FormControl(null),\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\t// console.log('AteliersAndStoresComponent.changes$', form.value);\r\n\t\t\tthis.setFilterByKeyAndValue('country', form.value.country);\r\n\t\t\tthis.setFilterByKeyAndValue('search', form.value.search);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(data => {\r\n\t\t\tthis.items = data[0];\r\n\t\t\tthis.filters = data[1];\r\n\t\t\tcontrols.country.options = FormService.toSelectOptions(this.filters.country.options);\r\n\t\t\tthis.onLoad();\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tAteliersAndStoresService.all$(),\r\n\t\t\tAteliersAndStoresService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\tonLoad() {\r\n\t\tconst items = this.items;\r\n\t\tconst filters = this.filters;\r\n\t\tObject.keys(filters).forEach(key => {\r\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\r\n\t\t});\r\n\t\tconst initialParams = {};\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\tswitch (key) {\r\n\t\t\t\t\t\t\tcase 'country':\r\n\t\t\t\t\t\t\t\treturn item.country.id === value;\r\n\t\t\t\t\t\t\tcase 'search':\r\n\t\t\t\t\t\t\t\treturn item.title.toLowerCase().indexOf(value.toLowerCase()) !== -1 || item.country.name.toLowerCase().indexOf(value.toLowerCase()) !== -1\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t\tconst country = this.filters.country.values.length ? this.filters.country.values[0] : null;\r\n\t\tconst search = this.filters.search.values.length ? this.filters.search.values[0] : null;\r\n\t\tthis.form.patch({ country, search });\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(filteredItems => {\r\n\t\t\tthis.filteredItems = filteredItems;\r\n\t\t\tthis.filteredAteliers = filteredItems.filter(x => x.type === this.types.Atelier);\r\n\t\t\tthis.filteredStores = filteredItems.filter(x => x.type === this.types.Store);\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t\t// console.log('AteliersAndStoresComponent.filteredItems', filteredItems.length);\r\n\t\t});\r\n\t}\r\n\r\n\tsetFilterByKeyAndValue(key, value) {\r\n\t\tconst filter = this.filters[key];\r\n\t\tif (filter) {\r\n\t\t\tif (filter.mode === FilterMode.QUERY) {\r\n\t\t\t\tfilter.set(value);\r\n\t\t\t} else {\r\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\r\n\t\t\t\t// console.log(filter.options, option);\r\n\t\t\t\tif (option) {\r\n\t\t\t\t\tfilter.set(option);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfilter.clear();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonSearch(model) {\r\n\t\t// console.log('AteliersAndStoresComponent.onSearch', this.form.value);\r\n\t\tthis.setFilterByKeyAndValue('country', this.form.value.country);\r\n\t\tthis.setFilterByKeyAndValue('search', this.form.value.search);\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tclearFilter(event, filter) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopImmediatePropagation();\r\n\t\tfilter.clear();\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nAteliersAndStoresComponent.meta = {\r\n\tselector: '[ateliers-and-stores]',\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalOutletComponent } from '../../common/modal/modal-outlet.component';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\n\r\nexport class CareersModalComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tconst data = parentInstance.modal.data;\r\n\t\t\tthis.position = data.position;\r\n\t\t\t// console.log('CareersModalComponent.onInit', data);\r\n\t\t}\r\n\t\tLocomotiveScrollService.stop();\r\n\t}\r\n\r\n\tonClose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tLocomotiveScrollService.start();\r\n\t}\r\n}\r\n\r\nCareersModalComponent.meta = {\r\n\tselector: '[careers-modal]'\r\n};\r\n","function push_(event) {\r\n\tconst dataLayer = window.dataLayer || [];\r\n\tdataLayer.push(event);\r\n\tconsole.log('GtmService.dataLayer', event);\r\n}\r\n\r\nexport class GtmService {\r\n\r\n\tstatic push(event) {\r\n\t\treturn push_(event);\r\n\t}\r\n\r\n}\r\n","import { FormValidator } from 'rxcomp-form';\r\n\r\nexport default function RequiredIfValidator(fieldName, formGroup, shouldBe) {\r\n\r\n\treturn new FormValidator((value) => {\r\n\t\tlet field = null;\r\n\t\tif (typeof formGroup === 'function') {\r\n\t\t\tfield = formGroup().get(fieldName);\r\n\t\t} else if (formGroup) {\r\n\t\t\tfield = formGroup.get(fieldName);\r\n\t\t}\r\n\t\treturn (!value && field && (shouldBe != null ? field.value === shouldBe : field.value != null)) ? { required: { value: value, requiredIf: fieldName } } : null;\r\n\t});\r\n\r\n}\r\n","import { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport class CareersService {\r\n\r\n\tstatic data$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/careers/data.json');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/careers/data.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic positions$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/careers/positions.json');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/careers/positions.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic submit$(payload) {\r\n\t\tif (environment.flags.production) {\r\n\t\t\t// !!! convert to .post$\r\n\t\t\treturn ApiService.get$('/careers/submit.json', payload);\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/careers/submit.json');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { combineLatest } from 'rxjs';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport RequiredIfValidator from '../../controls/required-if.validator';\r\nimport { environment } from '../../environment';\r\nimport { CareersService } from './careers.service';\r\n\r\nexport class CareersComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tthis.positions = [];\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tlastName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\ttelephone: new FormControl(null),\r\n\t\t\tcountry: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tregion: new FormControl(null, [new RequiredIfValidator('country', form, 114)]), // required if country === 114, Italy\r\n\t\t\tcity: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tdomain: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcv: new FormControl(null),\r\n\t\t\tpresentationLetter: new FormControl(null),\r\n\t\t\tmessage: new FormControl(null),\r\n\t\t\tprivacy: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([CareersService.data$(), CareersService.positions$()]).pipe(\r\n\t\t\ttap(results => {\r\n\t\t\t\tconst data = results[0];\r\n\t\t\t\tconst controls = this.controls;\r\n\t\t\t\tcontrols.country.options = FormService.toSelectOptions(data.country.options);\r\n\t\t\t\tcontrols.region.options = FormService.toSelectOptions(data.region.options);\r\n\t\t\t\tcontrols.domain.options = FormService.toSelectOptions(data.domain.options);\r\n\t\t\t\tconst positions = results[1];\r\n\t\t\t\tthis.positions = positions;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tconst controls = this.controls;\r\n\t\tconst country = controls.country.options.length > 1 ? controls.country.options[1].id : null;\r\n\t\tconst region = controls.region.options.length > 1 ? controls.region.options[1].id : null;\r\n\t\tconst domain = controls.domain.options.length > 1 ? controls.domain.options[1].id : null;\r\n\t\tform.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\ttelephone: '0721 411112',\r\n\t\t\tcountry: country,\r\n\t\t\tregion: region,\r\n\t\t\tcity: 'Pesaro',\r\n\t\t\tdomain: domain,\r\n\t\t\tmessage: 'Hi!',\r\n\t\t\tprivacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit(model) {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('CareersComponent.onSubmit', form.value);\r\n\t\t// console.log('CareersComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (form.valid) {\r\n\t\t\t// console.log('CareersComponent.onSubmit', form.value);\r\n\t\t\tform.submitted = true;\r\n\t\t\tCareersService.submit$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(_ => {\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tform.reset();\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Careers\",\r\n\t\t\t\t\t'form_name': \"Lavora con noi\"\r\n\t\t\t\t});\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('CareersComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonOpenPosition(position) {\r\n\t\tModalService.open$({ src: environment.template.modal.careersModal, data: { position } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tconsole.log('CareersComponent.onOpenPosition', event);\r\n\t\t});\r\n\t}\r\n\r\n\tonClose() {\r\n\t\tthis.close.next(this.form.value);\r\n\t}\r\n}\r\n\r\nCareersComponent.meta = {\r\n\tselector: '[careers]',\r\n\toutputs: ['close'],\r\n\tinputs: ['isModal', 'position'],\r\n};\r\n","\r\nimport { from, fromEvent, of } from 'rxjs';\r\nimport { map, switchMap } from 'rxjs/operators';\r\n\r\nexport class OnceService {\r\n\r\n\tstatic uid = 0;\r\n\tstatic paths = [];\r\n\r\n\tstatic script(url, callback) {\r\n\t\tif (this.paths.indexOf(url) === -1) {\r\n\t\t\tthis.paths.push(url);\r\n\t\t\tlet callbackName;\r\n\t\t\tif (callback === true) {\r\n\t\t\t\tcallbackName = 'OnceCallback' + (++this.uid);\r\n\t\t\t\turl = url.split('{{callback}}').join(callbackName);\r\n\t\t\t} else {\r\n\t\t\t\tcallbackName = callback;\r\n\t\t\t}\r\n\t\t\tlet callback$;\r\n\t\t\tconst element = document.createElement('script');\r\n\t\t\telement.type = 'text/javascript';\r\n\t\t\tif (callback) {\r\n\t\t\t\tcallback$ = from(\r\n\t\t\t\t\tnew Promise((resolve, reject) => {\r\n\t\t\t\t\t\twindow[callbackName] = function(data) {\r\n\t\t\t\t\t\t\tresolve(data);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\telement.async = true;\r\n\t\t\t\tcallback$ = fromEvent(element, 'load').pipe(\r\n\t\t\t\t\tmap(x => x)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tconst scripts = document.getElementsByTagName('script');\r\n\t\t\tif (scripts.length) {\r\n\t\t\t\tconst script = scripts[scripts.length - 1];\r\n\t\t\t\tscript.parentNode.insertBefore(element, script.nextSibling);\r\n\t\t\t}\r\n\t\t\treturn of(true).pipe(\r\n\t\t\t\tswitchMap(x => {\r\n\t\t\t\t\telement.src = url;\r\n\t\t\t\t\treturn callback$;\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn of(new Event('loaded!'));\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","\r\n/*\r\n<script>\r\n  window.fbAsyncInit = function() {\r\n\tFB.init({\r\n\t  appId      : '{your-app-id}',\r\n\t  cookie     : true,\r\n\t  xfbml      : true,\r\n\t  version    : '{api-version}'\r\n\t});\r\n\r\n\tFB.AppEvents.logPageView();\r\n\r\n  };\r\n\r\n  (function(d, s, id){\r\n\t var js, fjs = d.getElementsByTagName(s)[0];\r\n\t if (d.getElementById(id)) {return;}\r\n\t js = d.createElement(s); js.id = id;\r\n\t js.src = \"https://connect.facebook.net/en_US/sdk.js\";\r\n\t fjs.parentNode.insertBefore(js, fjs);\r\n   }(document, 'script', 'facebook-jssdk'));\r\n</script>\r\n\r\n\r\n1. check status (already logged?)\r\nFB.getLoginStatus(function(response) {\r\n\tstatusChangeCallback(response);\r\n\t{\r\n\t\tstatus: 'connected',\r\n\t\tauthResponse: {\r\n\t\t\taccessToken: '...',\r\n\t\t\texpiresIn:'...',\r\n\t\t\tsignedRequest:'...',\r\n\t\t\tuserID:'...'\r\n\t\t}\r\n\t}\r\n});\r\n\r\n2. login\r\nFB.login(function(response) {\r\n  if (response.status === 'connected') {\r\n\t// Logged into your webpage and Facebook.\r\n  } else {\r\n\t// The person is not logged into your webpage or we are unable to tell.\r\n  }\r\n}, {scope: 'public_profile,email'});\r\n\r\n3. logout\r\nFB.logout(function(response) {\r\n   // Person is now logged out\r\n});\r\n\r\n\r\nfunction statusChangeCallback(response) {  // Called with the results from FB.getLoginStatus().\r\n\tconsole.log('statusChangeCallback');\r\n\tconsole.log(response);                   // The current login status of the person.\r\n\tif (response.status === 'connected') {   // Logged into your webpage and Facebook.\r\n\t  testAPI();\r\n\t} else {                                 // Not logged into your webpage or we are unable to tell.\r\n\t  document.getElementById('status').innerHTML = 'Please log ' +\r\n\t\t'into this webpage.';\r\n\t}\r\n  }\r\n\r\nfunction testAPI() {                      // Testing Graph API after login.  See statusChangeCallback() for when this call is made.\r\n\tconsole.log('Welcome!  Fetching your information.... ');\r\n\tFB.api('/me', function(response) {\r\n\t  console.log('Successful login for: ' + response.name);\r\n\t  document.getElementById('status').innerHTML =\r\n\t\t'Thanks for logging in, ' + response.name + '!';\r\n\t});\r\n  }\r\n\r\n*/\r\n\r\n/*\r\nstatic init(document, tagName, id) {\r\n\tlet script;\r\n\tlet firstTagName = document.getElementsByTagName(tagName)[0];\r\n\tif (document.getElementById(id)) {\r\n\t\treturn;\r\n\t}\r\n\tscript = document.createElement(tagName);\r\n\tscript.id = id;\r\n\tscript.src = 'https://connect.facebook.net/en_US/sdk.js';\r\n\tfirstTagName.parentNode.insertBefore(script, firstTagName);\r\n}\r\n*/\r\n\r\nimport { from, of } from \"rxjs\";\r\nimport { catchError, concatMap, filter, switchMap } from \"rxjs/operators\";\r\nimport { environment } from \"../../environment\";\r\nimport { OnceService } from \"../once/once.service\";\r\nimport { LocalStorageService } from \"../storage/local-storage.service\";\r\n\r\nexport class FacebookService {\r\n\r\n\tstatic facebook_ = null;\r\n\tstatic authResponse_ = null;\r\n\r\n\tstatic facebook$() {\r\n\t\tif (window.location.protocol.indexOf('https') !== -1) {\r\n\t\t\tif (this.facebook_) {\r\n\t\t\t\treturn of(this.facebook_);\r\n\t\t\t} else {\r\n\t\t\t\treturn OnceService.script('//connect.facebook.net/' + environment.currentLanguage + '/sdk.js', 'fbAsyncInit').pipe(\r\n\t\t\t\t\tconcatMap(x => {\r\n\t\t\t\t\t\tconst facebook = window['FB'];\r\n\t\t\t\t\t\tfacebook.init({\r\n\t\t\t\t\t\t\tappId: environment.facebook.appId,\r\n\t\t\t\t\t\t\t// status: true,\r\n\t\t\t\t\t\t\tcookie: true,\r\n\t\t\t\t\t\t\txfbml: true,\r\n\t\t\t\t\t\t\tversion: environment.facebook.version,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tfacebook.AppEvents.logPageView();\r\n\t\t\t\t\t\tthis.facebook_ = facebook;\r\n\t\t\t\t\t\treturn of(facebook);\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn of(null);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic status$() {\r\n\t\treturn this.facebook$().pipe(\r\n\t\t\tfilter(facebook => facebook !== null),\r\n\t\t\tconcatMap(facebook => {\r\n\t\t\t\treturn from(new Promise((resolve, reject) => {\r\n\t\t\t\t\tfacebook.getLoginStatus((response) => {\r\n\t\t\t\t\t\tthis.authResponse_ = null;\r\n\t\t\t\t\t\tif (response.status === 'connected') {\r\n\t\t\t\t\t\t\tthis.authResponse_ = response.authResponse;\r\n\t\t\t\t\t\t\tLocalStorageService.set('facebook', response.authResponse);\r\n\t\t\t\t\t\t\tresolve(response);\r\n\t\t\t\t\t\t} else if (response.status === 'not_authorized') {\r\n\t\t\t\t\t\t\tLocalStorageService.delete('facebook');\r\n\t\t\t\t\t\t\treject(response);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treject(response);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, { scope: environment.facebook.scope });\r\n\t\t\t\t}));\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic login$() {\r\n\t\treturn this.facebook$().pipe(\r\n\t\t\tfilter(facebook => facebook !== null),\r\n\t\t\tconcatMap(facebook => {\r\n\t\t\t\treturn from(new Promise((resolve, reject) => {\r\n\t\t\t\t\tfacebook.login((response) => {\r\n\t\t\t\t\t\tthis.authResponse_ = null;\r\n\t\t\t\t\t\tif (response.status === 'connected') {\r\n\t\t\t\t\t\t\tthis.authResponse_ = response.authResponse;\r\n\t\t\t\t\t\t\tLocalStorageService.set('facebook', response.authResponse);\r\n\t\t\t\t\t\t\tresolve(response);\r\n\t\t\t\t\t\t} else if (response.status === 'not_authorized') {\r\n\t\t\t\t\t\t\tLocalStorageService.delete('facebook');\r\n\t\t\t\t\t\t\treject(response);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treject(response);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, { scope: environment.facebook.scope });\r\n\t\t\t\t}));\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic logout$() {\r\n\t\treturn this.status$().pipe(\r\n\t\t\tcatchError(error => {\r\n\t\t\t\tLocalStorageService.delete('facebook');\r\n\t\t\t\treturn of(null);\r\n\t\t\t}),\r\n\t\t\tswitchMap(_ => {\r\n\t\t\t\treturn from(new Promise((resolve, reject) => {\r\n\t\t\t\t\tthis.facebook_.logout(response => {\r\n\t\t\t\t\t\tresolve(response);\r\n\t\t\t\t\t\tLocalStorageService.delete('facebook');\r\n\t\t\t\t\t});\r\n\t\t\t\t}));\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic me$(fields) {\r\n\t\treturn this.status$().pipe(\r\n\t\t\tcatchError(error => {\r\n\t\t\t\treturn this.login$();\r\n\t\t\t}),\r\n\t\t\tconcatMap(l => {\r\n\t\t\t\treturn from(new Promise((resolve, reject) => {\r\n\t\t\t\t\tfields = fields || environment.facebook.fields;\r\n\t\t\t\t\tthis.facebook_.api('/me', {\r\n\t\t\t\t\t\tfields: fields,\r\n\t\t\t\t\t\taccessToken: environment.facebook.tokenClient,\r\n\t\t\t\t\t}, (response) => {\r\n\t\t\t\t\t\tif (!response || response.error) {\r\n\t\t\t\t\t\t\tconst error = response ? response.error : 'error';\r\n\t\t\t\t\t\t\tconsole.log('FacebookService.getMe.error', error);\r\n\t\t\t\t\t\t\treject(response.error);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconst user = response;\r\n\t\t\t\t\t\t\tuser.authResponse = this.authResponse_;\r\n\t\t\t\t\t\t\tuser.facebookToken = this.authResponse_.accessToken;\r\n\t\t\t\t\t\t\tresolve(user);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}));\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","\r\n\r\n\r\nimport { from, Observable, of } from 'rxjs';\r\nimport { concatMap } from 'rxjs/operators';\r\nimport { environment } from '../../environment';\r\nimport { OnceService } from '../once/once.service';\r\nimport { LocalStorageService } from '../storage/local-storage.service';\r\n\r\n/*\r\nexport class GoogleConfig {\r\n\tpublic clientId: string;\r\n\tpublic cookiepolicy?: string = 'single_host_origin';\r\n\tpublic scope?: string = 'profile email';\r\n\tpublic fetch_basic_profile?: boolean = true;\r\n\tpublic ux_mode?: string = 'popup';\r\n}\r\n\r\nexport class GoogleAuthResponse {\r\n\ttoken_type: string;\r\n\taccess_token: string;\r\n\tscope: string;\r\n\tlogin_hint: string;\r\n\texpires_in: number;\r\n\texpires_at: number;\r\n\tfirst_issued_at: number;\r\n\tid_token: string;\r\n\tidpId: string;\r\n\tsignedRequest: string;\r\n\tuserID: string;\r\n}\r\n\r\nexport class GoogleUser {\r\n\temail: string;\r\n\tfirstName: string;\r\n\tid: string;\r\n\tlastName: string;\r\n\tname: string;\r\n\tpicture: string;\r\n\tauthResponse?: GoogleAuthResponse;\r\n\tgoogleToken?: string;\r\n}\r\n*/\r\n\r\nexport class GoogleService {\r\n\r\n\tstatic authResponse;\r\n\tstatic storage;\r\n\tstatic gapi;\r\n\tstatic auth2;\r\n\tstatic instance;\r\n\r\n\tstatic init() {\r\n\t\t/*\r\n\t\tif (!environment['plugins'] && !environment['plugins']['google']) {\r\n\t\t\tthrow new Error('GoogleService.error missing config object in environment.plugins.google');\r\n\t\t}\r\n\t\t*/\r\n\t\tthis.authResponse = LocalStorageService.get('google');\r\n\t\t// console.log('GoogleService.authResponse', this.authResponse);\r\n\t}\r\n\r\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\r\n\t*  call GoogleService.google on component OnInit to avoid popup blockers via asyncronous loading *\r\n\t* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\r\n\r\n\tstatic google$() {\r\n\t\treturn new Observable().pipe(x => {\r\n\t\t\tif (this.gapi) {\r\n\t\t\t\treturn of(this.gapi);\r\n\t\t\t} else {\r\n\t\t\t\treturn this.once$();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tstatic once$() {\r\n\t\treturn OnceService.script('//apis.google.com/js/api:client.js?onload={{callback}}', true).pipe(\r\n\t\t\tconcatMap(x => {\r\n\t\t\t\tthis.gapi = window['gapi'];\r\n\t\t\t\treturn of(this.gapi);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic me$() {\r\n\t\treturn this.login$().pipe(\r\n\t\t\tconcatMap(x => {\r\n\t\t\t\tconst profile = this.instance.currentUser.get().getBasicProfile();\r\n\t\t\t\tconst user = {\r\n\t\t\t\t\tid: profile.getId(),\r\n\t\t\t\t\tname: profile.getName(),\r\n\t\t\t\t\tfirstName: profile.getGivenName(),\r\n\t\t\t\t\tlastName: profile.getFamilyName(),\r\n\t\t\t\t\tpicture: profile.getImageUrl(),\r\n\t\t\t\t\temail: profile.getEmail(),\r\n\t\t\t\t\tauthResponse: this.authResponse,\r\n\t\t\t\t\tgoogleToken: this.authResponse.access_token,\r\n\t\t\t\t};\r\n\t\t\t\treturn of(user);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic login$() {\r\n\t\treturn this.auth2Instance$().pipe(\r\n\t\t\tconcatMap(x => {\r\n\t\t\t\treturn this.signin$();\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic logout$() {\r\n\t\treturn this.auth2Instance$().pipe(\r\n\t\t\tconcatMap(x => {\r\n\t\t\t\treturn from(\r\n\t\t\t\t\tnew Promise((resolve, reject) => {\r\n\t\t\t\t\t\tif (this.instance.isSignedIn && this.instance.isSignedIn.get()) {\r\n\t\t\t\t\t\t\tthis.instance.signOut().then((signed) => {\r\n\t\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t\t}, reject);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic getAuth2$() {\r\n\t\treturn new Observable().pipe(x => {\r\n\t\t\tif (this.auth2) {\r\n\t\t\t\treturn of(this.auth2);\r\n\t\t\t} else {\r\n\t\t\t\treturn this.google$().pipe(\r\n\t\t\t\t\tconcatMap(x => {\r\n\t\t\t\t\t\tif (this.gapi.auth2) {\r\n\t\t\t\t\t\t\treturn this.auth2init$();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn from(\r\n\t\t\t\t\t\t\t\tnew Promise((resolve, reject) => {\r\n\t\t\t\t\t\t\t\t\tthis.gapi.load('auth2', () => {\r\n\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t\t\t\t\t}, 200);\r\n\t\t\t\t\t\t\t\t\t}, reject);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t).pipe(\r\n\t\t\t\t\t\t\t\tconcatMap(x => {\r\n\t\t\t\t\t\t\t\t\treturn this.auth2init$();\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tstatic signin$() {\r\n\t\treturn from(\r\n\t\t\tnew Promise((resolve, reject) => {\r\n\t\t\t\tconst readAccessToken = () => {\r\n\t\t\t\t\t// console.log('GoogleLogin.readAccessToken');\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tconst user = this.instance.currentUser.get().getAuthResponse(true);\r\n\t\t\t\t\t\t// console.log('GoogleLogin.readAccessToken.success', user);\r\n\t\t\t\t\t\tthis.authResponse = user;\r\n\t\t\t\t\t\tLocalStorageService.set('google', user);\r\n\t\t\t\t\t\tresolve({\r\n\t\t\t\t\t\t\tcode: user.access_token,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\tconsole.log('GoogleLogin.readAccessToken.error', error);\r\n\t\t\t\t\t\tLocalStorageService.delete('google');\r\n\t\t\t\t\t\treject(error);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tif (this.instance.isSignedIn && this.instance.isSignedIn.get()) {\r\n\t\t\t\t\treadAccessToken();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.instance.signIn({\r\n\t\t\t\t\t\tscope: 'profile email',\r\n\t\t\t\t\t}).then((signed) => {\r\n\t\t\t\t\t\treadAccessToken();\r\n\t\t\t\t\t}, (error) => {\r\n\t\t\t\t\t\tLocalStorageService.delete('google');\r\n\t\t\t\t\t\treject(error);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic auth2init$() {\r\n\t\treturn from(\r\n\t\t\tnew Promise((resolve, reject) => {\r\n\t\t\t\tthis.gapi.auth2.init({\r\n\t\t\t\t\tclient_id: environment.google.clientId,\r\n\t\t\t\t\tcookiepolicy: 'single_host_origin',\r\n\t\t\t\t\tscope: 'profile email',\r\n\t\t\t\t\tfetch_basic_profile: true,\r\n\t\t\t\t\tux_mode: 'popup',\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\tthis.auth2 = this.gapi.auth2;\r\n\t\t\t\t\t// console.log('Auth2Init.success', this.auth2);\r\n\t\t\t\t\tresolve(this.auth2);\r\n\t\t\t\t}, reject);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic auth2Instance$() {\r\n\t\tif (this.instance) {\r\n\t\t\treturn of(this.instance);\r\n\t\t} else {\r\n\t\t\treturn this.getAuth2$().pipe(\r\n\t\t\t\tconcatMap(x => {\r\n\t\t\t\t\tthis.instance = this.auth2.getAuthInstance();\r\n\t\t\t\t\treturn of(this.instance);\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","\r\n\r\n\r\nimport { Subject } from 'rxjs';\r\nimport { switchMap, tap } from 'rxjs/operators';\r\nimport { environment } from '../../environment';\r\nimport { ApiService } from '../api/api.service';\r\nimport { LocalStorageService } from '../storage/local-storage.service';\r\n\r\nexport class LinkedinService {\r\n\r\n\tstatic getAccessToken$(code) {\r\n\t\tconst data = {\r\n\t\t\tgrant_type: 'authorization_code',\r\n\t\t\tcode: code,\r\n\t\t\tclient_id: environment.linkedIn.clientId,\r\n\t\t\tclient_secret: environment.linkedIn.clientSecret,\r\n\t\t\tredirect_uri: `${window.location.origin}/giorgetti/cart.html`,\r\n\t\t}\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.post$('/user/linkedin', data);\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/user/linkedin.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic linkedin$() {\r\n\t\tconst event$ = new Subject();\r\n\t\tconst key = 'linkedin';\r\n\t\tconst state = `${key}-${new Date().getTime()}`;\r\n\t\twindow.onSocialCallback = (social, params) => {\r\n\t\t\tif (social === 'linkedin' && params.state === state) {\r\n\t\t\t\tconsole.log('onSocialCallback', params.code);\r\n\t\t\t\tevent$.next(params.code);\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst width = 375 * 2;\r\n\t\tconst height = 667;\r\n\t\twindow.open(\r\n\t\t\t`https://www.linkedin.com/oauth/v2/authorization?response_type=code&client_id=${environment.linkedIn.clientId}&redirect_uri=${window.location.origin}/giorgetti/cart.html&state=${state}&scope=${environment.linkedIn.scope}`,\r\n\t\t\tkey,\r\n\t\t\t`top=${Math.floor((window.innerHeight - height) / 2)}, left=${Math.floor((window.innerWidth - width) / 2)}, width=${width}, height=${height}, status=no, menubar=no, toolbar=no scrollbars=no`,\r\n\t\t);\r\n\t\t// https://localhost:48481/giorgetti/cart.html?code=AQRqT4xWst4rcKM_sarxRTHP7PJ_eUbiQP30KZuyjGgSuoNQjZzJtSIu6laX6o-R-hy9obrIhzRKA3EshZfkIgo-ErIEahuyyAkY7Lg5PRFCEDdJxiy-cKyz8O9Vl6wVs2hoO_m7QvhLB22YfL_qqtToWqEUvWLwWqVTzRgEbu_U2AWDltOP_mSVNLge3Qc_uRV6VZDPeQqPcY2ICgo&state=foobar\r\n\t\treturn event$.pipe(\r\n\t\t\tswitchMap(code => {\r\n\t\t\t\treturn this.getAccessToken$(code);\r\n\t\t\t}),\r\n\t\t\ttap(accessToken => {\r\n\t\t\t\tLocalStorageService.set('linkedin', accessToken);\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","import { BehaviorSubject, of } from 'rxjs';\r\nimport { map, switchMap } from 'rxjs/operators';\r\nimport { ApiService } from '../../common/api/api.service';\r\nimport { LocalStorageService } from '../../common/storage/local-storage.service';\r\nimport { environment } from '../../environment';\r\nimport { CartMiniService } from '../../shared/cart-mini/cart-mini.service';\r\n\r\nexport const CartSteps = {\r\n\tItems: 1,\r\n\tData: 2,\r\n\tDelivery: 3,\r\n\tRecap: 4,\r\n\tPayment: 5,\r\n\tComplete: 6,\r\n\tError: -1,\r\n};\r\n\r\n/*\r\nexport class Cart {\r\n\tconstructor() {\r\n\t\tthis.step = CartSteps.Items; // number\r\n\t\tthis.items = []; // CartItem[]\r\n\t\tthis.shipmentCountry = null; // number\r\n\t\tthis.user = null; // User\r\n\t\tthis.guest = null; // boolean\r\n\t\tthis.data = {\r\n\t\t\tfirstName: null, // string\r\n\t\t\tlastName: null, // string\r\n\t\t\temail: null, // string\r\n\t\t\ttelephone: null, // string\r\n\t\t\taddress: null, // string\r\n\t\t\tzipCode: null, // string\r\n\t\t\tcity: null, // string\r\n\t\t\tprovince: null, // string\r\n\t\t\tcountry: null, // number\r\n\t\t\tmessage: null, // string\r\n\t\t\tinvoice: null, // boolean\r\n\t\t\tinvoiceData: {\r\n\t\t\t\ttaxNumber: null, // string\r\n\t\t\t\tsdi: null, // string\r\n\t\t\t\tpec: null, // string\r\n\t\t\t},\r\n\t\t\tbilling: null, // boolean\r\n\t\t\tbillingData: {\r\n\t\t\t\tcompany: null, // string\r\n\t\t\t\tfirstName: null, // string\r\n\t\t\t\tlastName: null, // string\r\n\t\t\t\ttelephone: null, // string\r\n\t\t\t\taddress: null, // string\r\n\t\t\t\tzipCode: null, // string\r\n\t\t\t\tcity: null, // string\r\n\t\t\t\tprovince: null, // string\r\n\t\t\t\tcountry: null, // number\r\n\t\t\t},\r\n\t\t\tconditions: false, // boolean\r\n\t\t\tprivacy: false, // boolean\r\n\t\t\tterms: false, // boolean\r\n\t\t};\r\n\t\tthis.deliveryData = null; // {\r\n\t\t\tfirstName: null, // string\r\n\t\t\tlastName: null, // string\r\n\t\t\temail: null, // string\r\n\t\t\ttelephone: null, // string\r\n\t\t\taddress: null, // string\r\n\t\t\tzipCode: null, // string\r\n\t\t\tcity: null, // string\r\n\t\t\tprovince: null, // string\r\n\t\t\tcountry: null, // { id: number, name: string }\r\n\t\t}\r\n\t\tthis.billingData = null; // {\r\n\t\t\tfirstName: null, // string\r\n\t\t\tlastName: null, // string\r\n\t\t\taddress: null, // string\r\n\t\t\tzipCode: null, // string\r\n\t\t\tcity: null, // string\r\n\t\t\tprovince: null, // string\r\n\t\t\tcountry: null, // { id: number, name: string }\r\n\t\t}\r\n\t\tthis.deliveryType = null; // number\r\n\t\tthis.delivery = null; // { id: number, name: string }\r\n\t\tthis.discountCode = null; // string\r\n\t\tthis.discount = null; // { code: string, price: number }\r\n\t\tthis.paymentMethod = null; // number\r\n\t\tthis.store = null; // Store\r\n\t}\r\n}\r\n*/\r\n\r\nexport class CartService {\r\n\r\n\tstatic cart$_ = new BehaviorSubject(null);\r\n\r\n\tstatic get currentCart() {\r\n\t\treturn CartService.cart$_.getValue();\r\n\t}\r\n\r\n\tstatic setCart(cart) {\r\n\t\tif (cart) {\r\n\t\t\tLocalStorageService.set('cart', cart);\r\n\t\t} else {\r\n\t\t\tLocalStorageService.delete('cart');\r\n\t\t}\r\n\t\tCartService.cart$_.next(cart);\r\n\t}\r\n\r\n\tstatic cart$() {\r\n\t\tconst localCart = LocalStorageService.get('cart') || null;\r\n\t\treturn of(localCart).pipe(\r\n\t\t\tswitchMap(cart => {\r\n\t\t\t\tCartService.setCart(cart);\r\n\t\t\t\treturn CartService.cart$_;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic clear$() {\r\n\t\treturn of(null).pipe(\r\n\t\t\tmap(cart => {\r\n\t\t\t\tCartMiniService.setItems([]);\r\n\t\t\t\tCartService.setCart(cart);\r\n\t\t\t\treturn cart;\r\n\t\t\t}),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic data$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/cart/data.json');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/cart/data.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getStore$(payload) {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/cart/store.json');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/cart/store.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getStores$(payload) {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/cart/stores.json');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/cart/stores.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getDiscount$(payload) {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/cart/discount.json');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/cart/discount.json');\r\n\t\t}\r\n\t}\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { combineLatest } from 'rxjs';\r\nimport { finalize, first, switchMap, takeUntil, tap } from 'rxjs/operators';\r\nimport { FacebookService } from '../../common/facebook/facebook.service';\r\nimport { GoogleService } from '../../common/google/google.service';\r\nimport { LinkedinService } from '../../common/linkedin/linkedin.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalResolveEvent, ModalService } from '../../common/modal/modal.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport RequiredIfValidator from '../../controls/required-if.validator';\r\nimport { environment } from '../../environment';\r\nimport { CartMiniService } from '../../shared/cart-mini/cart-mini.service';\r\nimport { UserService } from '../../shared/user/user.service';\r\nimport { CartService, CartSteps } from './cart.service';\r\n\r\nexport class CartComponent extends Component {\r\n\r\n\tget totalPrice() {\r\n\t\tconst items = this.items || [];\r\n\t\tlet total = items.reduce((p, c, i) => {\r\n\t\t\treturn p + c.price * c.qty;\r\n\t\t}, 0);\r\n\t\tif (this.delivery) {\r\n\t\t\ttotal += this.delivery.price;\r\n\t\t}\r\n\t\tif (this.discount) {\r\n\t\t\ttotal += this.discount.price;\r\n\t\t}\r\n\t\treturn total;\r\n\t}\r\n\r\n\tget selectedStore() {\r\n\t\tif (!this.controls || !this.controls.stores || !this.controls.stores.value) {\r\n\t\t\treturn null;\r\n\t\t} else {\r\n\t\t\treturn this.controls.stores.value.find(x => x.id === this.controls.store.value);\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.detectSocialLogin();\r\n\t\tthis.socialBusy = false;\r\n\t\tthis.form = null;\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([CartService.data$()]).pipe(\r\n\t\t\ttap(results => {\r\n\t\t\t\tconst data = results[0];\r\n\t\t\t\tthis.initWithData(data);\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tinitWithData(data) {\r\n\t\tthis.steps = CartSteps;\r\n\t\tthis.step = CartSteps.Items;\r\n\t\tthis.errorPayment = null;\r\n\t\tthis.errorDiscount = null;\r\n\t\tthis.success = false;\r\n\t\tthis.items = [];\r\n\t\tCartMiniService.items$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(items => {\r\n\t\t\tthis.items = items;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.user = null;\r\n\t\tthis.guest = null;\r\n\t\tthis.deliveryData = null;\r\n\t\tthis.billingData = null;\r\n\t\tthis.delivery = null;\r\n\t\tthis.discount = null;\r\n\t\tthis.paymentMethod = null;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tstep: this.step,\r\n\t\t\titems: null,\r\n\t\t\tshipmentCountry: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tuser: null,\r\n\t\t\tguest: null,\r\n\t\t\tdata: new FormGroup({\r\n\t\t\t\tfirstName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tlastName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\t\ttelephone: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\taddress: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tzipCode: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tcity: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tprovince: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tcountry: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tmessage: null,\r\n\t\t\t\tinvoice: null,\r\n\t\t\t\tinvoiceData: new FormGroup({\r\n\t\t\t\t\ttaxNumber: new FormControl(null, [RequiredIfValidator('invoice', getDataGroup)]),\r\n\t\t\t\t\tsdi: new FormControl(null, [RequiredIfValidator('invoice', getDataGroup)]),\r\n\t\t\t\t\tpec: new FormControl(null, [RequiredIfValidator('invoice', getDataGroup)]),\r\n\t\t\t\t}),\r\n\t\t\t\tbilling: null,\r\n\t\t\t\tbillingData: new FormGroup({\r\n\t\t\t\t\tcompany: new FormControl(null, [RequiredIfValidator('billing', getDataGroup)]),\r\n\t\t\t\t\tfirstName: new FormControl(null, [RequiredIfValidator('billing', getDataGroup)]),\r\n\t\t\t\t\tlastName: new FormControl(null, [RequiredIfValidator('billing', getDataGroup)]),\r\n\t\t\t\t\ttelephone: new FormControl(null, [RequiredIfValidator('billing', getDataGroup)]),\r\n\t\t\t\t\taddress: new FormControl(null, [RequiredIfValidator('billing', getDataGroup)]),\r\n\t\t\t\t\tzipCode: new FormControl(null, [RequiredIfValidator('billing', getDataGroup)]),\r\n\t\t\t\t\tcity: new FormControl(null, [RequiredIfValidator('billing', getDataGroup)]),\r\n\t\t\t\t\tprovince: new FormControl(null, [RequiredIfValidator('billing', getDataGroup)]),\r\n\t\t\t\t\tcountry: new FormControl(null, [RequiredIfValidator('billing', getDataGroup)]),\r\n\t\t\t\t}),\r\n\t\t\t\tconditions: new FormControl(null, [Validators.RequiredTrueValidator()]),\r\n\t\t\t\tprivacy: new FormControl(null, [Validators.RequiredTrueValidator()]),\r\n\t\t\t\tterms: new FormControl(null, [Validators.RequiredTrueValidator()]),\r\n\t\t\t}),\r\n\t\t\tdeliveryData: null,\r\n\t\t\tbillingData: null,\r\n\t\t\tdeliveryType: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tdelivery: null,\r\n\t\t\tdiscountCode: null,\r\n\t\t\tdiscount: null,\r\n\t\t\tpaymentMethod: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tstores: null,\r\n\t\t\tstore: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tfunction getDataGroup() {\r\n\t\t\t// console.log(form.controls.data);\r\n\t\t\treturn form.controls.data;\r\n\t\t}\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\t// console.log('form', form.value);\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t\t/*\r\n\t\tUserService.me$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(user => this.onUser(user));\r\n\t\t*/\r\n\t\tcontrols.shipmentCountry.options = FormService.toSelectOptions(data.shipmentCountry.options);\r\n\t\tcontrols.data.controls.country.options = FormService.toSelectOptions(data.country.options);\r\n\t\tcontrols.data.controls.billingData.controls.country.options = FormService.toSelectOptions(data.country.options);\r\n\t\tcontrols.deliveryType.options = data.deliveryType.options.slice().map(x => ({\r\n\t\t\tid: x.value,\r\n\t\t\tname: x.label,\r\n\t\t\tabstract: x.abstract,\r\n\t\t\tdescription: x.description,\r\n\t\t\tprice: x.price,\r\n\t\t\tfullPrice: x.fullPrice,\r\n\t\t}));\r\n\t\tcontrols.paymentMethod.options = data.paymentMethod.options.slice().map(x => ({\r\n\t\t\tid: x.value,\r\n\t\t\tname: x.label,\r\n\t\t\tdescription: x.description,\r\n\t\t\tinfo: x.info,\r\n\t\t\ticons: x.icons,\r\n\t\t}));\r\n\t\tthis.form.patch({\r\n\t\t\tshipmentCountry: controls.shipmentCountry.options[1].id,\r\n\t\t\tdeliveryType: controls.deliveryType.options[0].id,\r\n\t\t\tpaymentMethod: controls.paymentMethod.options[0].id,\r\n\t\t}, true);\r\n\t\tthis.pushChanges();\r\n\t\tCartService.cart$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(cart => {\r\n\t\t\tif (cart) {\r\n\t\t\t\tthis.step = cart.step;\r\n\t\t\t\tthis.guest = cart.guest;\r\n\t\t\t\tthis.deliveryData = cart.deliveryData;\r\n\t\t\t\tthis.billingData = cart.billingData;\r\n\t\t\t\tthis.delivery = cart.delivery;\r\n\t\t\t\tthis.discount = cart.discount;\r\n\t\t\t\tthis.paymentMethod = cart.paymentMethod;\r\n\t\t\t\tif (cart.stores) {\r\n\t\t\t\t\tcontrols.store.options = cart.stores.slice().map(x => ({\r\n\t\t\t\t\t\tid: x.id,\r\n\t\t\t\t\t\tname: x.name,\r\n\t\t\t\t\t\taddress: x.address,\r\n\t\t\t\t\t\tcity: x.city,\r\n\t\t\t\t\t\tcountry: x.country,\r\n\t\t\t\t\t\tdistance: x.distance,\r\n\t\t\t\t\t}));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.onPatch(cart, true);\r\n\t\t});\r\n\t}\r\n\r\n\ttouchForm() {\r\n\t\tthis.form.touched = true;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst firstInvalidInput = Array.prototype.slice.call(node.querySelectorAll('.invalid')).find((x) => x.hasAttribute('[control]'));\r\n\t\tif (firstInvalidInput) {\r\n\t\t\tLocomotiveScrollService.scrollTo(firstInvalidInput, { offset: -180, duration: 0, disableLerp: true });\r\n\t\t}\r\n\t}\r\n\r\n\tonBack() {\r\n\t\tthis.step--;\r\n\t\tlet patch = null;\r\n\t\tif (this.step === CartSteps.Items) {\r\n\t\t\tthis.user = null;\r\n\t\t\tthis.guest = false;\r\n\t\t\tpatch = { user: null, guest: false };\r\n\t\t}\r\n\t\tthis.onPatch(patch);\r\n\t}\r\n\r\n\tonNext(patch) {\r\n\t\tthis.step++;\r\n\t\tthis.onPatch(patch);\r\n\t}\r\n\r\n\tonPatch(patch = {}, skipUpdate) {\r\n\t\tthis.form.patch(Object.assign({}, patch, { step: this.step }));\r\n\t\tthis.pushChanges();\r\n\t\tLocomotiveScrollService.update();\r\n\t\tconst target = document.querySelector('.section--breadcrumb');\r\n\t\tLocomotiveScrollService.scrollTo(target, { offset: -130, duration: 0, disableLerp: true });\r\n\t\tif (!skipUpdate) {\r\n\t\t\tCartService.setCart(this.form.value);\r\n\t\t}\r\n\t}\r\n\r\n\t// 1. CartSteps.Items\r\n\tonItems(_) {\r\n\t\tUserService.me$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(user => {\r\n\t\t\tthis.onUser(user);\r\n\t\t\tthis.onNext({\r\n\t\t\t\titems: this.items,\r\n\t\t\t});\r\n\t\t});\r\n\t\t/*\r\n\t\tthis.onNext({\r\n\t\t\titems: this.items,\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\tonIncrement(item) {\r\n\t\tCartMiniService.incrementItem$(item).pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tonDecrement(item) {\r\n\t\tCartMiniService.decrementItem$(item).pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tonRemove(item) {\r\n\t\tCartMiniService.removeItem$(item).pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tonEdit(item) {\r\n\t\t// console.log('CartComponent.onEdit', item);\r\n\t\twindow.location.href = `${environment.slug.configureProduct}?productId=${item.id}&code=${item.code}${item.showefy ? `&sl=${item.showefy.product_link.split('&sl=')[1]}` : ''}`;\r\n\t}\r\n\r\n\t// 2. CartSteps.Data\r\n\tonModalSignIn() {\r\n\t\tModalService.open$({ src: environment.template.modal.userModal, data: { view: 1 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('CartComponent.onModalSignIn', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\tthis.onUser(event.data);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonModalSignUp(me) {\r\n\t\tModalService.open$({ src: environment.template.modal.userModal, data: { view: 2, me } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('CartComponent.onModalSignUp', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\tthis.onUser(event.data);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonUser(user) {\r\n\t\t// console.log('CartComponent.onUser', user);\r\n\t\tif (user) {\r\n\t\t\tthis.user = user;\r\n\t\t\tthis.guest = false;\r\n\t\t\tthis.onPatch({\r\n\t\t\t\tuser: user,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tfirstName: user.firstName,\r\n\t\t\t\t\tlastName: user.lastName,\r\n\t\t\t\t\temail: user.email,\r\n\t\t\t\t\t// telephone: null,\r\n\t\t\t\t\t// address: null,\r\n\t\t\t\t\t// zipCode: null,\r\n\t\t\t\t\tcity: user.city,\r\n\t\t\t\t\t// province: null,\r\n\t\t\t\t\tcountry: user.country,\r\n\t\t\t\t\tprivacy: user.privacy,\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tonGuest() {\r\n\t\tthis.user = null;\r\n\t\tthis.guest = true;\r\n\t\tthis.onPatch({ user: null, guest: true });\r\n\t}\r\n\r\n\tonFacebookLogout() {\r\n\t\tFacebookService.logout$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tonSocialLogin(social) {\r\n\t\tswitch (social) {\r\n\t\t\tcase 'facebook':\r\n\t\t\t\tthis.onFacebookLogin();\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'google':\r\n\t\t\t\tthis.onGoogleLogin();\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'linkedin':\r\n\t\t\t\tthis.onLinkedinLogin();\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn;\r\n\t}\r\n\r\n\tonFacebookLogin() {\r\n\t\tconsole.log('onFacebookLogin');\r\n\t\tthis.socialBusy = 'facebook';\r\n\t\tlet socialMe;\r\n\t\tfunction mapMe(data) {\r\n\t\t\t// console.log(data);\r\n\t\t\t/*\r\n\t\t\tauthResponse:\r\n\t\t\t\taccessToken: string\r\n\t\t\t\tdata_access_expiration_time: 1633594543\r\n\t\t\t\texpiresIn: 5164299\r\n\t\t\t\tgraphDomain: \"facebook\"\r\n\t\t\t\tsignedRequest: string\r\n\t\t\t\tuserID: string\r\n\t\t\temail: string\r\n\t\t\tfacebookToken: string\r\n\t\t\tfirst_name: string\r\n\t\t\tid: string\r\n\t\t\tlast_name: string\r\n\t\t\tname: string\r\n\t\t\tpicture:\r\n\t\t\t\tdata:\r\n\t\t\t\t\theight: 50\r\n\t\t\t\t\tis_silhouette: false\r\n\t\t\t\t\turl: string\r\n\t\t\t\t\twidth: 50\r\n\t\t\t*/\r\n\t\t\tconst me = {};\r\n\t\t\tif (data) {\r\n\t\t\t\tme.firstName = data.first_name;\r\n\t\t\t\tme.lastName = data.last_name;\r\n\t\t\t\tme.email = data.email;\r\n\t\t\t\tme.socialPicture = data.picture.data.url;\r\n\t\t\t\tme.socialType = 'facebook';\r\n\t\t\t\tme.socialId = data.id;\r\n\t\t\t\tme.socialToken = data.facebookToken;\r\n\t\t\t\tme.socialTokenExpiresAt = data.authResponse.data_access_expiration_time;\r\n\t\t\t}\r\n\t\t\tconsole.log('CartComponent.onFacebookLogin.mapMe', me);\r\n\t\t\treturn me;\r\n\t\t}\r\n\t\tFacebookService.me$().pipe(\r\n\t\t\tfirst(),\r\n\t\t\ttap(me => socialMe = me),\r\n\t\t\tswitchMap(me => UserService.tryFacebook$(me)),\r\n\t\t\tfinalize(() => this.socialBusy = false),\r\n\t\t).subscribe(user => {\r\n\t\t\tif (user) {\r\n\t\t\t\tthis.onUser(user);\r\n\t\t\t} else {\r\n\t\t\t\tconst me = mapMe(socialMe);\r\n\t\t\t\tthis.onModalSignUp(me);\r\n\t\t\t}\r\n\t\t}, error => {\r\n\t\t\tconsole.log('CartComponent.onFacebookLogin.error', error);\r\n\t\t\tconst me = mapMe(socialMe);\r\n\t\t\tthis.onModalSignUp(me);\r\n\t\t});\r\n\t}\r\n\r\n\tonGoogleLogin() {\r\n\t\tthis.socialBusy = 'google';\r\n\t\tlet socialMe;\r\n\t\tfunction mapMe(data) {\r\n\t\t\t// console.log(data);\r\n\t\t\t/*\r\n\t\t\tauthResponse:\r\n\t\t\t\taccess_token: string\r\n\t\t\t\texpires_at: 1625838392809\r\n\t\t\t\texpires_in: 3599\r\n\t\t\t\tfirst_issued_at: 1625834793809\r\n\t\t\t\tid_token: string\r\n\t\t\t\tidpId: \"google\"\r\n\t\t\t\tlogin_hint: string\r\n\t\t\t\tscope: \"email profile openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile\"\r\n\t\t\t\tsession_state: {extraQueryParams: {…}}\r\n\t\t\t\ttoken_type: \"Bearer\"\r\n\t\t\temail: string\r\n\t\t\tfirstName: string\r\n\t\t\tgoogleToken: string\r\n\t\t\tid: string\r\n\t\t\tlastName: string\r\n\t\t\tname: string\r\n\t\t\tpicture: string\r\n\t\t\t*/\r\n\t\t\tconst me = {};\r\n\t\t\tif (data) {\r\n\t\t\t\tme.firstName = data.firstName;\r\n\t\t\t\tme.lastName = data.lastName;\r\n\t\t\t\tme.email = data.email;\r\n\t\t\t\tme.socialPicture = data.picture;\r\n\t\t\t\tme.socialType = 'google';\r\n\t\t\t\tme.socialId = data.id;\r\n\t\t\t\tme.socialToken = data.googleToken;\r\n\t\t\t\tme.socialTokenExpiresAt = data.authResponse.expires_at;\r\n\t\t\t}\r\n\t\t\tconsole.log('CartComponent.onGoogleLogin.mapMe', me);\r\n\t\t\treturn me;\r\n\t\t}\r\n\t\tGoogleService.me$().pipe(\r\n\t\t\tfirst(),\r\n\t\t\ttap(me => socialMe = me),\r\n\t\t\tswitchMap(me => UserService.tryGoogle$(me)),\r\n\t\t\tfinalize(() => this.socialBusy = false),\r\n\t\t).subscribe(user => {\r\n\t\t\tif (user) {\r\n\t\t\t\tthis.onUser(user);\r\n\t\t\t} else {\r\n\t\t\t\tconst me = mapMe(socialMe);\r\n\t\t\t\tthis.onModalSignUp(me);\r\n\t\t\t}\r\n\t\t}, error => {\r\n\t\t\tconsole.log('CartComponent.onGoogleLogin.error', error);\r\n\t\t\tconst me = mapMe(socialMe);\r\n\t\t\tthis.onModalSignUp(me);\r\n\t\t});\r\n\t}\r\n\r\n\tonLinkedinLogin() {\r\n\t\tLinkedinService.linkedin$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(token => {\r\n\t\t\tconsole.log('CartComponent.onLinkedinLogin', token);\r\n\t\t\tthis.onModalSignUp({ firstName: 'Luca' });\r\n\t\t}, error => {\r\n\t\t\tconsole.log('CartComponent.onLinkedinLogin.error', error);\r\n\t\t\tconst me = mapMe(socialMe);\r\n\t\t\tthis.onModalSignUp(me);\r\n\t\t});\r\n\t}\r\n\r\n\tdetectSocialLogin() {\r\n\t\tif (window.name === 'linkedin' && window.opener) {\r\n\t\t\tconst urlSearchParams = new URLSearchParams(window.location.search);\r\n\t\t\tconst params = Object.fromEntries(urlSearchParams.entries());\r\n\t\t\tconsole.log('window', window.name, params);\r\n\t\t\tif (typeof window.opener.onSocialCallback === 'function') {\r\n\t\t\t\twindow.opener.onSocialCallback(window.name, params);\r\n\t\t\t}\r\n\t\t\tself.close();\r\n\t\t}\r\n\t}\r\n\r\n\tonData(_) {\r\n\t\tconst form = this.form;\r\n\t\tconst controls = this.controls;\r\n\t\tconsole.log('CartComponent.onData');\r\n\t\tif (form.controls.data.valid) {\r\n\t\t\tconst deliveryData = form.value.data;\r\n\t\t\tthis.deliveryData = Object.assign({}, deliveryData, {\r\n\t\t\t\tcountry: controls.data.controls.country.options.find(x => x.id === deliveryData.country),\r\n\t\t\t});\r\n\t\t\tconst billingData = (form.value.data.billing ? form.value.data.billingData : form.value.data);\r\n\t\t\tthis.billingData = Object.assign({}, billingData, {\r\n\t\t\t\tcountry: controls.data.controls.country.options.find(x => x.id === billingData.country),\r\n\t\t\t});\r\n\t\t\tthis.onNext({ deliveryData, billingData });\r\n\t\t} else {\r\n\t\t\tthis.touchForm();\r\n\t\t}\r\n\t}\r\n\r\n\ttestData() {\r\n\t\tconst form = this.form;\r\n\t\tconst controls = this.controls;\r\n\t\tconst country = controls.data.controls.country.options.length > 1 ? controls.data.controls.country.options[1].id : null;\r\n\t\tform.patch({\r\n\t\t\tdata: {\r\n\t\t\t\tfirstName: 'Jhon',\r\n\t\t\t\tlastName: 'Appleseed',\r\n\t\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\t\ttelephone: '0721 411112',\r\n\t\t\t\taddress: 'Strada della Campanara, 15',\r\n\t\t\t\tzipCode: '61122',\r\n\t\t\t\tcity: 'Pesaro',\r\n\t\t\t\tprovince: 'Pesaro',\r\n\t\t\t\tcountry: country,\r\n\t\t\t\tmessage: 'Hi!',\r\n\t\t\t\tconditions: true,\r\n\t\t\t\tprivacy: true,\r\n\t\t\t\tterms: true,\r\n\t\t\t},\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\tresetData() {\r\n\t\tconst data = this.controls.data;\r\n\t\tdata.reset();\r\n\t}\r\n\r\n\t// 3. CartSteps.Delivery\r\n\tonDelivery(_) {\r\n\t\tconst form = this.form;\r\n\t\tconst controls = this.controls;\r\n\t\tconst delivery = controls.deliveryType.options.find(x => x.id === form.value.deliveryType);\r\n\t\tthis.delivery = delivery;\r\n\t\t// console.log('CartComponent.onDelivery', form.value);\r\n\t\tCartService.getStores$(form.value).pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(stores => {\r\n\t\t\tcontrols.stores.value = stores;\r\n\t\t\tcontrols.store.options = stores.slice().map(x => ({\r\n\t\t\t\tid: x.id,\r\n\t\t\t\tname: x.name,\r\n\t\t\t\taddress: x.address,\r\n\t\t\t\tcity: x.city,\r\n\t\t\t\tcountry: x.country,\r\n\t\t\t\tdistance: x.distance,\r\n\t\t\t}));\r\n\t\t\tconst store = stores[0];\r\n\t\t\tthis.onNext({ stores, store: store.id, delivery });\r\n\t\t});\r\n\t}\r\n\r\n\t// 4. CartSteps.Recap\r\n\tonDiscountCode(_) {\r\n\t\tconst form = this.form;\r\n\t\t// console.log('CartComponent.onDelivery', form.value);\r\n\t\tthis.errorDiscount = null;\r\n\t\tCartService.getDiscount$({ discountCode: form.value.discountCode }).pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(discount => {\r\n\t\t\tthis.discount = discount;\r\n\t\t\tthis.onPatch({ discount });\r\n\t\t}, _ => {\r\n\t\t\tthis.errorDiscount = true;\r\n\t\t});\r\n\t}\r\n\r\n\tonTimetableToggle(event) {\r\n\t\tif (this.selectedStore) {\r\n\t\t\tthis.selectedStore.showTimetable = !this.selectedStore.showTimetable;\r\n\t\t\tthis.pushChanges();\r\n\t\t}\r\n\t}\r\n\r\n\t// 5. CartSteps.Payment\r\n\tonPayment(_) {\r\n\t\tconst form = this.form;\r\n\t\tconst controls = this.controls;\r\n\t\tconst paymentMethod = controls.paymentMethod.options.find(x => x.id === form.value.paymentMethod);\r\n\t\tthis.paymentMethod = paymentMethod;\r\n\t\tif (form.valid) {\r\n\t\t\tconsole.log('CartComponent.onPayment', form.value);\r\n\t\t\tthis.onComplete(); // !!! fake\r\n\t\t}\r\n\t}\r\n\r\n\t// 6. CartSteps.Complete\r\n\tonComplete() {\r\n\t\tthis.step = CartSteps.Complete;\r\n\t\tthis.onPatch();\r\n\t\tCartService.clear$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n}\r\n\r\nCartComponent.meta = {\r\n\tselector: '[cart]',\r\n};\r\n","import { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport class ContactsService {\r\n\r\n\tstatic data$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/contacts/data.json');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/contacts/data.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic submit$(payload) {\r\n\t\tif (environment.flags.production) {\r\n\t\t\t// !!! convert to .post$\r\n\t\t\treturn ApiService.get$('/contacts/submit.json', payload);\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/contacts/submit.json');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport { ContactsService } from './contacts.service';\r\n\r\nexport class ContactsComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tlastName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\ttelephone: new FormControl(null),\r\n\t\t\tcountry: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcity: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tmessage: new FormControl(null),\r\n\t\t\tprivacy: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tnewsletter: new FormControl(this.flag),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn ContactsService.data$().pipe(\r\n\t\t\ttap(data => {\r\n\t\t\t\tconst controls = this.controls;\r\n\t\t\t\tcontrols.country.options = FormService.toSelectOptions(data.country.options);\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tconst controls = this.controls;\r\n\t\tconst country = controls.country.options.length > 1 ? controls.country.options[1].id : null;\r\n\t\tform.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\ttelephone: '0721 411112',\r\n\t\t\tcountry: country,\r\n\t\t\tcity: 'Pesaro',\r\n\t\t\tmessage: 'Hi!',\r\n\t\t\tprivacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit(model) {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('ContactsComponent.onSubmit', form.value);\r\n\t\t// console.log('ContactsComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (form.valid) {\r\n\t\t\t// console.log('ContactsComponent.onSubmit', form.value);\r\n\t\t\tform.submitted = true;\r\n\t\t\tContactsService.submit$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(_ => {\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tform.reset();\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Contact\",\r\n\t\t\t\t\t'form_name': \"Contatti\"\r\n\t\t\t\t});\r\n\t\t\t\tif (form.value.newsletter) {\r\n\t\t\t\t\tGtmService.push({\r\n\t\t\t\t\t\t'event': \"ContactNewsletter\",\r\n\t\t\t\t\t\t'form_name': \"ContattiNewsletter\"\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('ContactsComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nContactsComponent.meta = {\r\n\tselector: '[contacts]',\r\n};\r\n","import { map } from 'rxjs/operators';\r\nimport { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport class DealersService {\r\n\r\n\tstatic all$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/dealers/all.json').pipe(\r\n\t\t\t\tmap(items => items.sort((a, b) => {\r\n\t\t\t\t\treturn b.regions.length - a.regions.length;\r\n\t\t\t\t})),\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/dealers/all.json').pipe(\r\n\t\t\t\tmap(items => items.sort((a, b) => {\r\n\t\t\t\t\treturn b.regions.length - a.regions.length;\r\n\t\t\t\t})),\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/dealers/filters.json');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/dealers/filters.json');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup } from 'rxcomp-form';\r\nimport { combineLatest } from 'rxjs';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { FilterMode } from '../../common/filter/filter-item';\r\nimport { FilterService } from '../../common/filter/filter.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport { DealersService } from './dealers.service';\r\n\r\nexport class DealersComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.items = [];\r\n\t\tthis.filteredItems = [];\r\n\t\tthis.visibleItems = [];\r\n\t\tthis.filters = {};\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tcountry: new FormControl(null),\r\n\t\t\tsearch: new FormControl(null),\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\t// console.log('DealersComponent.changes$', form.value);\r\n\t\t\tthis.setFilterByKeyAndValue('country', form.value.country);\r\n\t\t\tthis.setFilterByKeyAndValue('search', form.value.search);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(data => {\r\n\t\t\tthis.items = data[0];\r\n\t\t\tthis.filters = data[1];\r\n\t\t\tcontrols.country.options = FormService.toSelectOptions(this.filters.country.options);\r\n\t\t\tthis.onLoad();\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tDealersService.all$(),\r\n\t\t\tDealersService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\tonLoad() {\r\n\t\tconst items = this.items;\r\n\t\tconst filters = this.filters;\r\n\t\tObject.keys(filters).forEach(key => {\r\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\r\n\t\t});\r\n\t\tconst initialParams = {};\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\tswitch (key) {\r\n\t\t\t\t\t\t\tcase 'country':\r\n\t\t\t\t\t\t\t\treturn item.countries && item.countries.find(x => x.value === value);\r\n\t\t\t\t\t\t\tcase 'search':\r\n\t\t\t\t\t\t\t\treturn item.name.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\r\n\t\t\t\t\t\t\t\t\t// item.address.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\r\n\t\t\t\t\t\t\t\t\t(item.city && item.city.toLowerCase().indexOf(value.toLowerCase()) !== -1) ||\r\n\t\t\t\t\t\t\t\t\t(item.countries && item.countries.find(x => x.label.toLowerCase().indexOf(value.toLowerCase()) !== -1))\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t\tconst country = this.filters.country.values.length ? this.filters.country.values[0] : null;\r\n\t\tconst search = this.filters.search.values.length ? this.filters.search.values[0] : null;\r\n\t\tthis.form.patch({ country, search });\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(filteredItems => {\r\n\t\t\tthis.filteredItems = filteredItems;\r\n\t\t\tthis.visibleItems = filteredItems.slice(0, Math.min(12, filteredItems.length));\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t\t// console.log('DealersComponent.filteredItems', filteredItems.length);\r\n\t\t});\r\n\t}\r\n\r\n\tshowMore(event) {\r\n\t\tconst pageSize = 32;\r\n\t\tif (this.visibleItems.length + pageSize >= this.filteredItems.length) {\r\n\t\t\tthis.visibleItems = this.filteredItems.slice();\r\n\t\t} else {\r\n\t\t\tthis.visibleItems = this.filteredItems.slice(0, Math.min(this.visibleItems.length + pageSize, this.filteredItems.length));\r\n\t\t}\r\n\t\tthis.pushChanges();\r\n\t\tLocomotiveScrollService.update();\r\n\t}\r\n\r\n\tsetFilterByKeyAndValue(key, value) {\r\n\t\tconst filter = this.filters[key];\r\n\t\tif (filter) {\r\n\t\t\tif (filter.mode === FilterMode.QUERY) {\r\n\t\t\t\tfilter.set(value);\r\n\t\t\t} else {\r\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\r\n\t\t\t\t// console.log(filter.options, option);\r\n\t\t\t\tif (option) {\r\n\t\t\t\t\tfilter.set(option);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfilter.clear();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonSearch(model) {\r\n\t\t// console.log('DealersComponent.onSearch', this.form.value);\r\n\t\tthis.setFilterByKeyAndValue('country', this.form.value.country);\r\n\t\tthis.setFilterByKeyAndValue('search', this.form.value.search);\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tclearFilter(event, filter) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopImmediatePropagation();\r\n\t\tfilter.clear();\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nDealersComponent.meta = {\r\n\tselector: '[dealers]',\r\n};\r\n","import { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport class DesignersService {\r\n\r\n\tstatic all$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/designers/all.json');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/designers/all.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/designers/filters.json');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/designers/filters.json');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup } from 'rxcomp-form';\r\nimport { combineLatest } from 'rxjs';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { FilterMode } from '../../common/filter/filter-item';\r\nimport { FilterService } from '../../common/filter/filter.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport { DesignersService } from './designers.service';\r\n\r\nexport class DesignersComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.items = [];\r\n\t\tthis.filteredItems = [];\r\n\t\tthis.filters = {};\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tcategory: new FormControl(null),\r\n\t\t\tsearch: new FormControl(null),\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\t// console.log('DesignersComponent.changes$', form.value);\r\n\t\t\tthis.setFilterByKeyAndValue('category', form.value.category);\r\n\t\t\tthis.setFilterByKeyAndValue('search', form.value.search);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(data => {\r\n\t\t\tthis.items = data[0];\r\n\t\t\tthis.filters = data[1];\r\n\t\t\tcontrols.category.options = FormService.toSelectOptions(this.filters.category.options);\r\n\t\t\tthis.onLoad();\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tDesignersService.all$(),\r\n\t\t\tDesignersService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\tonLoad() {\r\n\t\tconst items = this.items;\r\n\t\tconst filters = this.filters;\r\n\t\tObject.keys(filters).forEach(key => {\r\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\r\n\t\t});\r\n\t\tconst initialParams = {};\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\tswitch (key) {\r\n\t\t\t\t\t\t\tcase 'category':\r\n\t\t\t\t\t\t\t\treturn item.category.id === value;\r\n\t\t\t\t\t\t\tcase 'search':\r\n\t\t\t\t\t\t\t\treturn item.name.toLowerCase().indexOf(value.toLowerCase()) !== -1\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t\tconst category = this.filters.category.values.length ? this.filters.category.values[0] : null;\r\n\t\tconst search = this.filters.search.values.length ? this.filters.search.values[0] : null;\r\n\t\tthis.form.patch({ category, search });\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(filteredItems => {\r\n\t\t\tthis.filteredItems = filteredItems;\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t\t// console.log('DesignersComponent.filteredItems', filteredItems.length);\r\n\t\t});\r\n\t}\r\n\r\n\tsetFilterByKeyAndValue(key, value) {\r\n\t\tconst filter = this.filters[key];\r\n\t\tif (filter) {\r\n\t\t\tif (filter.mode === FilterMode.QUERY) {\r\n\t\t\t\tfilter.set(value);\r\n\t\t\t} else {\r\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\r\n\t\t\t\t// console.log(filter.options, option);\r\n\t\t\t\tif (option) {\r\n\t\t\t\t\tfilter.set(option);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfilter.clear();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonSearch(model) {\r\n\t\t// console.log('DesignersComponent.onSearch', this.form.value);\r\n\t\tthis.setFilterByKeyAndValue('category', this.form.value.category);\r\n\t\tthis.setFilterByKeyAndValue('search', this.form.value.search);\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tclearFilter(event, filter) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopImmediatePropagation();\r\n\t\tfilter.clear();\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nDesignersComponent.meta = {\r\n\tselector: '[designers]',\r\n};\r\n","import { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport class MarketsAndLanguagesService {\r\n\r\n\tstatic all$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/markets-and-languages/all.json');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/markets-and-languages/all.json');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { first } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalOutletComponent } from '../../common/modal/modal-outlet.component';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\nimport { environment } from '../../environment';\r\nimport { MarketsAndLanguagesService } from './markets-and-languages.service';\r\n\r\nexport class MarketsAndLanguagesModalComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tconst data = parentInstance.modal.data;\r\n\t\t}\r\n\t\tLocomotiveScrollService.stop();\r\n\t\tthis.currentMarket = environment.currentMarket;\r\n\t\tthis.currentLanguage = environment.currentLanguage;\r\n\t\tthis.markets = [];\r\n\t\tMarketsAndLanguagesService.all$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(markets => {\r\n\t\t\tthis.markets = markets;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tsetMarket(market) {\r\n\t\tthis.currentMarket = market.code;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonClose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tLocomotiveScrollService.start();\r\n\t}\r\n}\r\n\r\nMarketsAndLanguagesModalComponent.meta = {\r\n\tselector: '[markets-and-languages-modal]'\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalOutletComponent } from '../../common/modal/modal-outlet.component';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\n\r\nexport class MaterialsModalComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tthis.item = null;\r\n\t\tthis.items = null;\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tconst data = parentInstance.modal.data;\r\n\t\t\tthis.item = data.item;\r\n\t\t\tthis.items = data.items;\r\n\t\t\t// console.log('MaterialsModalComponent.onInit', data);\r\n\t\t}\r\n\t\tLocomotiveScrollService.stop();\r\n\t}\r\n\r\n\thasPrev() {\r\n\t\treturn true;\r\n\t}\r\n\r\n\thasNext() {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tonPrev() {\r\n\t\tlet index = this.items.indexOf(this.item);\r\n\t\tindex--;\r\n\t\tif (index < 0) {\r\n\t\t\tindex = this.items.length - 1;\r\n\t\t}\r\n\t\tthis.item = this.items[index];\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonNext() {\r\n\t\tlet index = this.items.indexOf(this.item);\r\n\t\tindex++;\r\n\t\tif (index === this.items.length) {\r\n\t\t\tindex = 0;\r\n\t\t}\r\n\t\tthis.item = this.items[index];\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonClose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tLocomotiveScrollService.start();\r\n\t}\r\n}\r\n\r\nMaterialsModalComponent.meta = {\r\n\tselector: '[materials-modal]'\r\n};\r\n","// import { combineLatest } from 'rxjs';\r\n// import { map } from 'rxjs/operators';\r\nimport { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport class MaterialsService {\r\n\r\n\tstatic all$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/materials/all');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/materials/all.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/materials/filters');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/materials/filters.json');\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\tstatic fake$() {\r\n\t\treturn combineLatest([MaterialsService.all$(), ApiService.get$('/materials/icons.json')]).pipe(\r\n\t\t\tmap(data => {\r\n\t\t\t\tlet items = data[0];\r\n\t\t\t\tlet icons = data[1];\r\n\t\t\t\titems.forEach(item => {\r\n\t\t\t\t\tif (item.items) {\r\n\t\t\t\t\t\titem.items.forEach(sub => {\r\n\t\t\t\t\t\t\tif (sub.icons) {\r\n\t\t\t\t\t\t\t\tconst set = icons.sets[sub.icons];\r\n\t\t\t\t\t\t\t\tif (set) {\r\n\t\t\t\t\t\t\t\t\tsub.icons = set.map(x => icons.icons.find(icon => icon.id === x)).filter(x => x != null);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tconsole.log(sub.icons);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(JSON.stringify(items));\r\n\t\t\t\treturn items;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\t*/\r\n\r\n\t/*\r\n\tstatic fake$() {\r\n\t\treturn combineLatest([MaterialsService.all$(), ApiService.get$('/materials/all_.json')]).pipe(\r\n\t\t\tmap(data => {\r\n\t\t\t\tlet items = data[0];\r\n\t\t\t\tlet items_ = data[1];\r\n\t\t\t\titems = items.filter(x => x.category.name !== 'Tessuto' || !x.collection);\r\n\t\t\t\titems.forEach(item => {\r\n\t\t\t\t\tif (item.category.name === 'Tessuto') {\r\n\t\t\t\t\t\titem.items = items_.filter(x => x.collection && x.collection.id === item.id);\r\n\t\t\t\t\t\tconsole.log(item.items);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(JSON.stringify(items));\r\n\t\t\t\treturn items;\r\n\t\t\t\t// !!!\r\n\t\t\t\tlet collectionId = 1000;\r\n\t\t\t\tconst fabrics = [];\r\n\t\t\t\tconst collections = [];\r\n\t\t\t\titems_.forEach(item_ => {\r\n\t\t\t\t\tlet collection = collections.find(x => x.name === item_.collection);\r\n\t\t\t\t\tif (!collection) {\r\n\t\t\t\t\t\tcollection = {\r\n\t\t\t\t\t\t\tid: ++collectionId,\r\n\t\t\t\t\t\t\tname: item_.collection,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tcollections.push(collection);\r\n\t\t\t\t\t\tif (item_.category.name === 'Tessuto') {\r\n\t\t\t\t\t\t\tfabrics.push(Object.assign({\r\n\t\t\t\t\t\t\t\timage: `/giorgetti/img/materials/tessuto/${collection.name.toLowerCase().replace(/\\s/g, '_')}_512.jpg`,\r\n\t\t\t\t\t\t\t\tcategory: item_.category,\r\n\t\t\t\t\t\t\t}, collection));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(fabrics);\r\n\t\t\t\titems.forEach((item, i) => {\r\n\t\t\t\t\tconst item_ = items_.find(x => x.id === item.id);\r\n\t\t\t\t\t// if (item_) {\r\n\t\t\t\t\t//\titem.image = item_.image.replace(/\\s/g, '_').toLowerCase();\r\n\t\t\t\t\t//\titem.zoom = item_.zoom.replace(/\\s/g, '_').toLowerCase();\r\n\t\t\t\t\t// }\r\n\t\t\t\t\tconst collection = collections.find(x => x.name === item.collection);\r\n\t\t\t\t\tconsole.log(collection);\r\n\t\t\t\t\tif (collection) {\r\n\t\t\t\t\t\titem.collection = collection;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// item.collection = MaterialsService.toTitleCase(item.collection);\r\n\t\t\t\t\t// item.title = MaterialsService.toTitleCase(item.title);\r\n\t\t\t\t});\r\n\t\t\t\titems = items.concat(fabrics);\r\n\t\t\t\tconsole.log(JSON.stringify(items));\r\n\t\t\t\treturn items;\r\n\t\t\t\t// !!!\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic toTitleCase(sentence, seps = ' _-/') {\r\n\t\tconst capitalize = str => str.length ? str[0].toUpperCase() + str.slice(1).toLowerCase() : '';\r\n\t\tconst escape = str => str.replace(/./g, c => `\\\\${c}`);\r\n\t\tlet wordPattern = new RegExp(`[^${escape(seps)}]+`, 'g');\r\n\t\treturn sentence.replace(wordPattern, capitalize);\r\n\t}\r\n\t*/\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup } from 'rxcomp-form';\r\nimport { combineLatest } from 'rxjs';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { FilterMode } from '../../common/filter/filter-item';\r\nimport { FilterService } from '../../common/filter/filter.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport { environment } from '../../environment';\r\nimport { MaterialsService } from './materials.service';\r\n\r\nexport class MaterialsComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.categories = [];\r\n\t\tthis.selectedItem = null;\r\n\t\tthis.items = [];\r\n\t\tthis.filteredItems = [];\r\n\t\tthis.visibleItems = [];\r\n\t\tthis.filters = {};\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tcategory: new FormControl(null),\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.setFilterByKeyAndValue('category', form.value.category);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(data => {\r\n\t\t\tthis.items = data[0];\r\n\t\t\tthis.filters = data[1];\r\n\t\t\tcontrols.category.options = FormService.toSelectOptions(this.filters.category.options);\r\n\t\t\tthis.onLoad();\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tMaterialsService.all$(),\r\n\t\t\tMaterialsService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\tonLoad() {\r\n\t\tconst items = this.items;\r\n\t\tconst filters = this.filters;\r\n\t\tObject.keys(filters).forEach(key => {\r\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\r\n\t\t});\r\n\t\tconst initialParams = {};\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\tswitch (key) {\r\n\t\t\t\t\t\t\tcase 'category':\r\n\t\t\t\t\t\t\t\treturn item.category.id === value;\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t\tthis.categories = this.filters.category.options.filter(x => x.value);\r\n\t\tconst category = this.filters.category.values.length ? this.filters.category.values[0] : null;\r\n\t\tthis.form.patch({ category, search });\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(filteredItems => {\r\n\t\t\tthis.filteredItems = filteredItems;\r\n\t\t\tthis.visibleItems = this.filteredItems.slice(0, Math.min(16, this.filteredItems.length));\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t\t// console.log('MaterialsComponent.filteredItems', filteredItems.length);\r\n\t\t});\r\n\t}\r\n\r\n\tshowMore(event) {\r\n\t\tconst pageSize = 32;\r\n\t\tif (this.visibleItems.length + pageSize >= this.filteredItems.length) {\r\n\t\t\tthis.visibleItems = this.filteredItems.slice();\r\n\t\t} else {\r\n\t\t\tthis.visibleItems = this.filteredItems.slice(0, Math.min(this.visibleItems.length + pageSize, this.filteredItems.length));\r\n\t\t}\r\n\t\tthis.pushChanges();\r\n\t\tLocomotiveScrollService.update();\r\n\t}\r\n\r\n\tsetFilterByKeyAndValue(key, value) {\r\n\t\tconst filter = this.filters[key];\r\n\t\tif (filter) {\r\n\t\t\tif (filter.mode === FilterMode.QUERY) {\r\n\t\t\t\tfilter.set(value);\r\n\t\t\t} else {\r\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\r\n\t\t\t\t// console.log(filter.options, option);\r\n\t\t\t\tif (option) {\r\n\t\t\t\t\tfilter.set(option);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfilter.clear();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonToggle(item) {\r\n\t\tthis.selectedItem = this.selectedItem === item ? null : item;\r\n\t\t/*\r\n\t\tif (this.selectedItem) {\r\n\t\t\tconst selector = '#cat-' + item.category.id + '-' + item.id;\r\n\t\t\tLocomotiveScrollService.scrollToSelector(selector);\r\n\t\t}\r\n\t\t*/\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonOpenItem(item, items) {\r\n\t\tif (item.items) {\r\n\t\t\tconst active = !item.active;\r\n\t\t\tthis.filteredItems.forEach(item_ => {\r\n\t\t\t\tif (item_ !== item) {\r\n\t\t\t\t\titem_.active = false;\r\n\t\t\t\t\tconst node = document.querySelector(`#material-${item_.id}`);\r\n\t\t\t\t\tif (node) {\r\n\t\t\t\t\t\tnode.style.marginBottom = `0px`;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\titem.active = active;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (active) {\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t}\r\n\t\t\tconst node = document.querySelector(`#material-${item.id}`);\r\n\t\t\tif (node) {\r\n\t\t\t\tconst target = node.querySelector('.group--subitems');\r\n\t\t\t\tif (target) {\r\n\t\t\t\t\tconst targetRect = target.getBoundingClientRect();\r\n\t\t\t\t\tconst height = targetRect.height + 40;\r\n\t\t\t\t\tif (!active) {\r\n\t\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst from = { pow: active ? 0 : 1 };\r\n\t\t\t\t\tgsap.to(from, {\r\n\t\t\t\t\t\tpow: active ? 1 : 0,\r\n\t\t\t\t\t\tduration: height / 5000,\r\n\t\t\t\t\t\tease: Power2.easeOut,\r\n\t\t\t\t\t\tonUpdate: () => {\r\n\t\t\t\t\t\t\tnode.style.marginBottom = `${from.pow * height}px`;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tonComplete: () => {\r\n\t\t\t\t\t\t\tLocomotiveScrollService.scrollToSelector(`#material-${item.id} .group--subitems`);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tModalService.open$({ src: environment.template.modal.materialsModal, data: { item, items } }).pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t\t).subscribe(event => {\r\n\t\t\t\tconsole.log('MaterialComponent.onOpen', event);\r\n\t\t\t\t/*\r\n\t\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\t\twindow.location.href = environment.slug.reservedArea;\r\n\t\t\t\t}\r\n\t\t\t\t*/\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tsetCategory(category, event) {\r\n\t\tif (event) {\r\n\t\t\tevent.preventDefault();\r\n\t\t}\r\n\t\tthis.controls.category.value = category.value;\r\n\t\tsetTimeout(() => {\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t\tLocomotiveScrollService.scrollToSelector('#category-' + category.value, { offset: -240 });\r\n\t\t}, 500);\r\n\t}\r\n\r\n\tclearFilter(event, filter) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopImmediatePropagation();\r\n\t\tfilter.clear();\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nMaterialsComponent.meta = {\r\n\tselector: '[materials]',\r\n};\r\n","import { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport class NewsService {\r\n\r\n\tstatic all$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/news/all');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/news/all.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/news/filters');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/news/filters.json');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup } from 'rxcomp-form';\r\nimport { combineLatest } from 'rxjs';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { FilterMode } from '../../common/filter/filter-item';\r\nimport { FilterService } from '../../common/filter/filter.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport { NewsService } from './news.service';\r\n\r\nexport class NewsComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.items = [];\r\n\t\tthis.filteredItems = [];\r\n\t\tthis.filters = {};\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tcountry: new FormControl(null),\r\n\t\t\tsearch: new FormControl(null),\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\t// console.log('NewsComponent.changes$', form.value);\r\n\t\t\tthis.setFilterByKeyAndValue('country', form.value.country);\r\n\t\t\tthis.setFilterByKeyAndValue('search', form.value.search);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(data => {\r\n\t\t\tthis.items = data[0];\r\n\t\t\tthis.filters = data[1];\r\n\t\t\tcontrols.country.options = FormService.toSelectOptions(this.filters.country.options);\r\n\t\t\tthis.onLoad();\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tNewsService.all$(),\r\n\t\t\tNewsService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\tonLoad() {\r\n\t\tconst items = this.items;\r\n\t\tconst filters = this.filters;\r\n\t\tObject.keys(filters).forEach(key => {\r\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\r\n\t\t});\r\n\t\tconst initialParams = {};\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\tswitch (key) {\r\n\t\t\t\t\t\t\tcase 'country':\r\n\t\t\t\t\t\t\t\treturn item.country.id === value;\r\n\t\t\t\t\t\t\tcase 'search':\r\n\t\t\t\t\t\t\t\treturn item.title.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\r\n\t\t\t\t\t\t\t\t\titem.abstract.toLowerCase().indexOf(value.toLowerCase()) !== -1\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t\tconst country = this.filters.country.values.length ? this.filters.country.values[0] : null;\r\n\t\tconst search = this.filters.search.values.length ? this.filters.search.values[0] : null;\r\n\t\tthis.form.patch({ country, search });\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(filteredItems => {\r\n\t\t\tthis.filteredItems = filteredItems;\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t\t// console.log('NewsComponent.filteredItems', filteredItems.length);\r\n\t\t});\r\n\t}\r\n\r\n\tsetFilterByKeyAndValue(key, value) {\r\n\t\tconst filter = this.filters[key];\r\n\t\tif (filter) {\r\n\t\t\tif (filter.mode === FilterMode.QUERY) {\r\n\t\t\t\tfilter.set(value);\r\n\t\t\t} else {\r\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\r\n\t\t\t\t// console.log(filter.options, option);\r\n\t\t\t\tif (option) {\r\n\t\t\t\t\tfilter.set(option);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfilter.clear();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonSearch(model) {\r\n\t\t// console.log('NewsComponent.onSearch', this.form.value);\r\n\t\tthis.setFilterByKeyAndValue('country', this.form.value.country);\r\n\t\tthis.setFilterByKeyAndValue('search', this.form.value.search);\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tclearFilter(event, filter) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopImmediatePropagation();\r\n\t\tfilter.clear();\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nNewsComponent.meta = {\r\n\tselector: '[news]',\r\n};\r\n","import { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport class NewsletterService {\r\n\r\n\tstatic data$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/newsletter/data.json');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/newsletter/data.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic submit$(payload) {\r\n\t\tif (environment.flags.production) {\r\n\t\t\t// !!! convert to .post$\r\n\t\t\treturn ApiService.get$('/newsletter/submit.json', payload);\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/newsletter/submit.json');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocationService } from '../../common/location/location.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport RequiredIfValidator from '../../controls/required-if.validator';\r\nimport { NewsletterService } from './newsletter.service';\r\n\r\nexport class NewsletterComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst email = LocationService.deserialize('email');\r\n\t\t// console.log('NewsletterComponent', email);\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tlastName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\temail: new FormControl(email, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\toccupation: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\ttelephone: new FormControl(null),\r\n\t\t\tcountry: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tregion: new FormControl(null, [new RequiredIfValidator('country', form, 114)]), // required if country === 114, Italy\r\n\t\t\tcity: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tengagement: new FormControl(null),\r\n\t\t\tnewsletter: true,\r\n\t\t\tnewsletterLanguage: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tprivacy: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn NewsletterService.data$().pipe(\r\n\t\t\ttap(data => {\r\n\t\t\t\tconst controls = this.controls;\r\n\t\t\t\tcontrols.occupation.options = FormService.toSelectOptions(data.occupation.options);\r\n\t\t\t\tcontrols.country.options = FormService.toSelectOptions(data.country.options);\r\n\t\t\t\tcontrols.region.options = FormService.toSelectOptions(data.region.options);\r\n\t\t\t\tcontrols.engagement.options = FormService.toSelectOptions(data.engagement.options);\r\n\t\t\t\tcontrols.newsletterLanguage.options = FormService.toSelectOptions(data.newsletterLanguage.options);\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tconst controls = this.controls;\r\n\t\tconst occupation = controls.occupation.options.length > 1 ? controls.occupation.options[1].id : null;\r\n\t\tconst country = controls.country.options.length > 1 ? controls.country.options[1].id : null;\r\n\t\tconst region = controls.region.options.length > 1 ? controls.region.options[1].id : null;\r\n\t\tconst engagement = controls.engagement.options.length > 1 ? controls.engagement.options[1].id : null;\r\n\t\tconst newsletterLanguage = controls.newsletterLanguage.options.length > 1 ? controls.newsletterLanguage.options[1].id : null;\r\n\t\tform.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\ttelephone: '0721 411112',\r\n\t\t\toccupation: occupation,\r\n\t\t\tcountry: country,\r\n\t\t\tregion: region,\r\n\t\t\tcity: 'Pesaro',\r\n\t\t\tengagement: engagement,\r\n\t\t\tnewsletterLanguage: newsletterLanguage,\r\n\t\t\tprivacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit(model) {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('NewsletterComponent.onSubmit', form.value);\r\n\t\t// console.log('NewsletterComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (form.valid) {\r\n\t\t\t// console.log('NewsletterComponent.onSubmit', form.value);\r\n\t\t\tform.submitted = true;\r\n\t\t\tNewsletterService.submit$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(_ => {\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tform.reset();\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Newsletter\",\r\n\t\t\t\t\t'form_name': \"Newsletter\"\r\n\t\t\t\t});\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('NewsletterComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nNewsletterComponent.meta = {\r\n\tselector: '[newsletter]',\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { first } from 'rxjs/operators';\r\nimport { LocationService } from '../../common/location/location.service';\r\nimport { environment } from '../../environment';\r\nimport { CartMiniService } from '../../shared/cart-mini/cart-mini.service';\r\n\r\nconst breadcumbStyle = `font-size: .8rem; text-transform: uppercase; letter-spacing: 0.075em; color: #37393b; display: none;`;\r\nconst titleStyle = `letter-spacing: 0; font-family: 'Bauer Bodoni', sans-serif; font-size: 2.9rem; margin: 0;word-wrap: break-word;text-transform: uppercase;color:#37393b;`;\r\nconst designerStyle = `font-size: .8rem; letter-spacing: 0.075em;margin-bottom: 15px;word-wrap: break-word;text-transform: uppercase; display: none;`;\r\nconst descriptionStyle = `font-size: .8rem; text-align: left;margin-bottom: 15px; letter-spacing: 0.05em; display: none;`;\r\n\r\nexport class ProductsConfigureComponent extends Component {\r\n\r\n\tget showefyUrl() {\r\n\t\tif (this.product) {\r\n\t\t\treturn `https://www.showefy.com/showroom/giorgetti/?l=${environment.currentLanguage}&c=${environment.currentMarket.toLowerCase()}&list=P&codprod=${this.product.code}&autoEnter=1${this.sl ? `&ext&sl=${this.sl}` : ''}`;\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.sl = LocationService.get('sl');\r\n\t\t// console.log(this.code);\r\n\t\tif (!this.product) {\r\n\t\t\tthrow ('ProductsConfigureComponent.error missing product');\r\n\t\t}\r\n\t\tthis.isReady = false;\r\n\t\tthis.isComplete = false;\r\n\t\tthis.isConfiguring = false;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst iframe = this.iframe = node.querySelector('#showefy');\r\n\t\tif (!iframe) {\r\n\t\t\tthrow ('missing iframe');\r\n\t\t}\r\n\t\tthis.onEvent = this.onEvent.bind(this);\r\n\t\tconst sfy = this.sfy = new SFYFrame(iframe, this.token, this.onEvent);\r\n\t\tsfy.init();\r\n\t\tconsole.log('ProductsConfigureComponent.onInit', sfy, iframe);\r\n\t}\r\n\r\n\tgetIframeDocument(iframe) {\r\n\t\tconst content = iframe.contentWindow || iframe.contentDocument\r\n\t\tconst iframeDocument = content.document ? content.document : content;\r\n\t\treturn iframeDocument;\r\n\t}\r\n\r\n\tonEvent(data) {\r\n\t\tconst event = JSON.parse(data);\r\n\t\tconst eventName = event.emit;\r\n\t\tif (event.status == 0) {\r\n\t\t\t// console.log('ProductsConfigureComponent.onEvent', event);\r\n\t\t\tswitch (eventName) {\r\n\t\t\t\tcase 'showefy_ready':\r\n\t\t\t\t\tthis.onReady(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'showefy_complete':\r\n\t\t\t\t\tthis.onShowefyComplete(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'start_configurator':\r\n\t\t\t\t\tthis.onStartConfigurator(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'button_pressed':\r\n\t\t\t\t\tthis.onButtonPressed(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'setButtonStatus':\r\n\t\t\t\t\tthis.onSetButtonStatus(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'getIframeSize':\r\n\t\t\t\t\tthis.onGetIframeSize(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'getProductExtData':\r\n\t\t\t\t\tthis.onGetProductExtData(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'getFastProductExtData':\r\n\t\t\t\t\tthis.onGetFastProductExtData(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconsole.log('ProductsConfigureComponent.onEvent.error', event.status, event.statusTxt, eventName);\r\n\t\t}\r\n\t}\r\n\r\n\tonReady(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onReady', event);\r\n\t\tthis.isReady = true;\r\n\t\t// this.addTexts();\r\n\t\tthis.addButtons();\r\n\t\t// this.addBreadcrumb();\r\n\t}\r\n\r\n\tonShowefyComplete(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onShowefyComplete', event);\r\n\t\tif (this.isConfiguring) {\r\n\t\t\tthis.isComplete = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonStartConfigurator(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onStartConfigurator', event);\r\n\t\tthis.isConfiguring = true;\r\n\t}\r\n\r\n\tonButtonPressed(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onButtonPressed', event, 'buttonId', event.data.id);\r\n\t\tswitch (event.data.id) {\r\n\t\t\tcase 'order':\r\n\t\t\t\tthis.sfy.getProductExtData();\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tonSetButtonStatus(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onSetButtonStatus', event);\r\n\t}\r\n\r\n\tonGetIframeSize(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onGetIframeSize', event);\r\n\t}\r\n\r\n\tonGetProductExtData(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onGetProductExtData', event.status, event.data);\r\n\t\tif (event.status === 0) {\r\n\t\t\tthis.onAddToCart(event.data);\r\n\t\t}\r\n\t}\r\n\r\n\tonGetFastProductExtData(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onGetFastProductExtData', event.status, event.data);\r\n\t\tif (event.status === 0) {\r\n\t\t\tthis.onAddToCart(event.data);\r\n\t\t}\r\n\t}\r\n\r\n\t// methods\r\n\r\n\taddTexts() {\r\n\t\tconst sfy = this.sfy;\r\n\t\tconst html = sfy.HTML;\r\n\t\tlet index = 0;\r\n\t\thtml.text[index++] = /* html */`<h1 style=\"${titleStyle}\">Nome Prodotto</h1>`;\r\n\t\thtml.text[index++] = /* html */`<h5 style=\"${designerStyle}\">Designer</h5>`;\r\n\t\thtml.text[index++] = /* html */`<div style=\"${descriptionStyle}\"><p>Descrizione</p></div>`;\r\n\t\tsfy.printHTML(html);\r\n\t}\r\n\r\n\taddButtons() {\r\n\t\tconst sfy = this.sfy;\r\n\t\tconst buttons = sfy.BUTTONS;\r\n\r\n\t\tlet index = 0;\r\n\t\tbuttons.element[index] = new sfy.PROPERTIES();\r\n\t\tbuttons.element[index].visibility = true;\r\n\t\tbuttons.element[index].id = 'order';\r\n\t\tbuttons.element[index].label = new sfy.LABEL();\r\n\t\tbuttons.element[index].label.it = 'Aggiungi al carrello';\r\n\t\tbuttons.element[index].label.en = 'Add to cart';\r\n\t\tindex++;\r\n\r\n\t\t/*\r\n\t\tbuttons.element[index] = new sfy.PROPERTIES();\r\n\t\tbuttons.element[index].visibility = true;\r\n\t\tbuttons.element[index].id = 'save_configuration';\r\n\t\tbuttons.element[index].label = new sfy.LABEL();\r\n\t\tbuttons.element[index].label.en = 'SAVE CONFIGURATION';\r\n\t\tindex++;\r\n\t\t*/\r\n\r\n\t\tsfy.setButtonStatus(buttons);\r\n\t}\r\n\r\n\taddBreadcrumb() {\r\n\t\tconst sfy = this.sfy;\r\n\t\tconst breadcrumb = sfy.BREADCUMB;\r\n\r\n\t\tlet index = 0;\r\n\r\n\t\tbreadcrumb.element[index] = new sfy.PROPERTIES();\r\n\t\tbreadcrumb.element[index].visibility = true;\r\n\t\tbreadcrumb.element[index].id = 'breadcumb_home';\r\n\t\tbreadcrumb.element[index].label = new sfy.LABEL();\r\n\t\tbreadcrumb.element[index].label.en = /* html */` Home <span aria-hidden='true'>/</span>&nbsp; `;\r\n\t\tbreadcrumb.element[index].style = breadcumbStyle;\r\n\t\tindex++;\r\n\r\n\t\tbreadcrumb.element[index] = new sfy.PROPERTIES();\r\n\t\tbreadcrumb.element[index].visibility = true;\r\n\t\tbreadcrumb.element[index].id = 'breadcumb_products';\r\n\t\tbreadcrumb.element[index].label = new sfy.LABEL();\r\n\t\tbreadcrumb.element[index].label.en = /* html */` Products <span aria-hidden='true'>/</span>&nbsp; `;\r\n\t\tbreadcrumb.element[index].style = breadcumbStyle;\r\n\t\tindex++;\r\n\r\n\t\tbreadcrumb.element[index] = new sfy.PROPERTIES();\r\n\t\tbreadcrumb.element[index].visibility = true;\r\n\t\tbreadcrumb.element[index].id = 'breadcumb_products';\r\n\t\tbreadcrumb.element[index].label = new sfy.LABEL();\r\n\t\tbreadcrumb.element[index].label.en = /* html */` Nome prodotto`;\r\n\t\tbreadcrumb.element[index].style = breadcumbStyle;\r\n\t\tindex++;\r\n\r\n\t\tsfy.printBreadcumb(breadcrumb);\r\n\t}\r\n\r\n\tonAddToCart(data) {\r\n\t\tconst cartItem = this.product;\r\n\t\tcartItem.showefy = data;\r\n\t\tif (data.image) {\r\n\t\t\tcartItem.image = data.image;\r\n\t\t}\r\n\t\tconsole.log('ProductsConfigureComponent.onAddToCart', cartItem);\r\n\t\tCartMiniService.getPriceAndAddItem$(cartItem).pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n}\r\n\r\nProductsConfigureComponent.meta = {\r\n\tselector: '[products-configure]',\r\n\tinputs: ['token', 'product'],\r\n};\r\n","import { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport class ProductsDetailService {\r\n\r\n\tstatic versions$(productId) {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/products/versions?productId=' + productId);\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/products-detail/versions.json');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { first } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { environment } from '../../environment';\r\nimport { CartMiniService } from '../../shared/cart-mini/cart-mini.service';\r\nimport { HeaderService } from '../../shared/header/header.service';\r\nimport { ProductsDetailService } from './products-detail.service';\r\n\r\nexport class ProductsDetailComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.items = [];\r\n\t\tthis.visibleItems = [];\r\n\t\tProductsDetailService.versions$(this.product.id).pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(items => {\r\n\t\t\tthis.items = items;\r\n\t\t\tthis.visibleItems = this.items.slice(0, Math.min(4, this.items.length));\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tisAddedToCart(item) {\r\n\t\treturn CartMiniService.hasItem(item);\r\n\t}\r\n\r\n\tonAddToCart(item) {\r\n\t\tif (this.isAddedToCart(item)) {\r\n\t\t\tHeaderService.setHeader('cart');\r\n\t\t} else {\r\n\t\t\tCartMiniService.getPriceAndAddItem$(item).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(_ => {\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tscrollTo(id) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = node.querySelector(id);\r\n\t\tif (target) {\r\n\t\t\tLocomotiveScrollService.scrollTo(target, { offset: -200 });\r\n\t\t}\r\n\t}\r\n\r\n\tshowMore(event) {\r\n\t\tconst pageSize = 12;\r\n\t\tif (this.visibleItems.length + pageSize >= this.items.length) {\r\n\t\t\tthis.visibleItems = this.items.slice();\r\n\t\t} else {\r\n\t\t\tthis.visibleItems = this.items.slice(0, Math.min(this.visibleItems.length + pageSize, this.items.length));\r\n\t\t}\r\n\t\tthis.pushChanges();\r\n\t\tLocomotiveScrollService.update();\r\n\t}\r\n\r\n\tconfigureProduct(version) {\r\n\t\twindow.location.href = `${environment.slug.configureProduct}?productId=${version.productId}&code=${version.code}`;\r\n\t}\r\n}\r\n\r\nProductsDetailComponent.meta = {\r\n\tselector: '[products-detail]',\r\n\tinputs: ['product'],\r\n};\r\n","// import { combineLatest } from 'rxjs';\r\n// import { map } from 'rxjs/operators';\r\nimport { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport class ProductsService {\r\n\r\n\tstatic all$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/products/all');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/products/all.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/products/filters');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/products/filters.json');\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\tstatic fake$() {\r\n\t\treturn combineLatest([ProductsService.all$(), ApiService.get$('/products/all_.json')]).pipe(\r\n\t\t\tmap(data => {\r\n\t\t\t\tconst items = data[0];\r\n\t\t\t\tconst items_ = data[1];\r\n\t\t\t\titems.forEach((item, i) => {\r\n\t\t\t\t\tconst other = items_.find(x => x.title === item.title);\r\n\t\t\t\t\tif (other) {\r\n\t\t\t\t\t\titem.category = {\r\n\t\t\t\t\t\t\tid: 1,\r\n\t\t\t\t\t\t\tname: other.url.replace('https://www.giorgettimeda.com/it/prodotti/', '').split('/')[0],\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(JSON.stringify(items));\r\n\t\t\t\treturn items;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\t*/\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup } from 'rxcomp-form';\r\nimport { combineLatest } from 'rxjs';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { FilterMode } from '../../common/filter/filter-item';\r\nimport { FilterService } from '../../common/filter/filter.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport { ProductsService } from './products.service';\r\n\r\nexport class ProductsComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.categoryId = this.categoryId || null;\r\n\t\tthis.items = [];\r\n\t\tthis.filteredItems = [];\r\n\t\tthis.filters = {};\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tcategory: new FormControl(null),\r\n\t\t\tambience: new FormControl(null),\r\n\t\t\tmaterial: new FormControl(null),\r\n\t\t\tdesigner: new FormControl(null),\r\n\t\t\tsearch: new FormControl(null),\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\t// console.log('ProductsComponent.changes$', form.value);\r\n\t\t\tthis.setFilterByKeyAndValue('category', form.value.category);\r\n\t\t\tthis.setFilterByKeyAndValue('ambience', form.value.ambience);\r\n\t\t\tthis.setFilterByKeyAndValue('material', form.value.material);\r\n\t\t\tthis.setFilterByKeyAndValue('designer', form.value.designer);\r\n\t\t\tthis.setFilterByKeyAndValue('search', form.value.search);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(data => {\r\n\t\t\tthis.items = data[0];\r\n\t\t\tthis.filters = data[1];\r\n\t\t\tcontrols.category.options = FormService.toSelectOptions(this.filters.category.options);\r\n\t\t\tcontrols.ambience.options = FormService.toSelectOptions(this.filters.ambience.options);\r\n\t\t\tcontrols.material.options = FormService.toSelectOptions(this.filters.material.options);\r\n\t\t\tcontrols.designer.options = FormService.toSelectOptions(this.filters.designer.options);\r\n\t\t\tthis.onLoad();\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tProductsService.all$(),\r\n\t\t\tProductsService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\tonLoad() {\r\n\t\tconst items = this.items;\r\n\t\tconst filters = this.filters;\r\n\t\tObject.keys(filters).forEach(key => {\r\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\r\n\t\t});\r\n\t\tconst initialParams = {};\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\tswitch (key) {\r\n\t\t\t\t\t\t\tcase 'category':\r\n\t\t\t\t\t\t\t\treturn item.category.id === value;\r\n\t\t\t\t\t\t\tcase 'ambience':\r\n\t\t\t\t\t\t\t\treturn item.ambience.id === value;\r\n\t\t\t\t\t\t\tcase 'material':\r\n\t\t\t\t\t\t\t\treturn item.materials.indexOf(value) !== -1;\r\n\t\t\t\t\t\t\tcase 'designer':\r\n\t\t\t\t\t\t\t\treturn item.designers.indexOf(value) !== -1;\r\n\t\t\t\t\t\t\tcase 'search':\r\n\t\t\t\t\t\t\t\treturn item.title.toLowerCase().indexOf(value.toLowerCase()) !== -1\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t\tconst category = this.categoryId ? this.categoryId : (this.filters.category.values.length ? this.filters.category.values[0] : null);\r\n\t\tconst ambience = this.filters.ambience.values.length ? this.filters.ambience.values[0] : null;\r\n\t\tconst material = this.filters.material.values.length ? this.filters.material.values[0] : null;\r\n\t\tconst designer = this.filters.designer.values.length ? this.filters.designer.values[0] : null;\r\n\t\tconst search = this.filters.search.values.length ? this.filters.search.values[0] : null;\r\n\t\tthis.form.patch({ category, ambience, material, designer, search });\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(filteredItems => {\r\n\t\t\tthis.filteredItems = filteredItems;\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t\t// console.log('ProductsComponent.filteredItems', filteredItems.length);\r\n\t\t});\r\n\t}\r\n\r\n\tsetFilterByKeyAndValue(key, value) {\r\n\t\tconst filter = this.filters[key];\r\n\t\tif (filter) {\r\n\t\t\tif (filter.mode === FilterMode.QUERY) {\r\n\t\t\t\tfilter.set(value);\r\n\t\t\t} else {\r\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\r\n\t\t\t\t// console.log(filter.options, option);\r\n\t\t\t\tif (option) {\r\n\t\t\t\t\tfilter.set(option);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfilter.clear();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonSearch(model) {\r\n\t\t// console.log('ProductsComponent.onSearch', this.form.value);\r\n\t\tthis.setFilterByKeyAndValue('category', this.form.value.category);\r\n\t\tthis.setFilterByKeyAndValue('ambience', this.form.value.ambience);\r\n\t\tthis.setFilterByKeyAndValue('material', this.form.value.material);\r\n\t\tthis.setFilterByKeyAndValue('designer', this.form.value.designer);\r\n\t\tthis.setFilterByKeyAndValue('search', this.form.value.search);\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tclearFilter(event, filter) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopImmediatePropagation();\r\n\t\tfilter.clear();\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nProductsComponent.meta = {\r\n\tselector: '[products]',\r\n\tinputs: ['categoryId'],\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalOutletComponent } from '../../common/modal/modal-outlet.component';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\n\r\nexport class ProjectsRegistrationModalComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tconst data = parentInstance.modal.data;\r\n\t\t}\r\n\t\tLocomotiveScrollService.stop();\r\n\t}\r\n\r\n\tonClose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tLocomotiveScrollService.start();\r\n\t}\r\n}\r\n\r\nProjectsRegistrationModalComponent.meta = {\r\n\tselector: '[projects-registration-modal]'\r\n};\r\n","import { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport class ProjectsRegistrationService {\r\n\r\n\tstatic data$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/projects-registration/data.json');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/projects-registration/data.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic submit$(payload) {\r\n\t\tif (environment.flags.production) {\r\n\t\t\t// !!! convert to .post$\r\n\t\t\treturn ApiService.get$('/projects-registration/submit.json', payload);\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/projects-registration/submit.json');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport { ProjectsRegistrationService } from './projects-registration.service';\r\n\r\nexport class ProjectsRegistrationComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tdealer: new FormGroup({\r\n\t\t\t\tfullName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tcountry: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tcity: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t}),\r\n\t\t\tclient: new FormGroup({\r\n\t\t\t\tfullName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tcountry: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tcity: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t}),\r\n\t\t\tarchitect: new FormGroup({\r\n\t\t\t\tfullName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tcountry: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tcity: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\t\ttelephone: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t}),\r\n\t\t\ttype: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tdestination: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tproducts: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tpicture: new FormControl(null),\r\n\t\t\tprivacy: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn ProjectsRegistrationService.data$().pipe(\r\n\t\t\ttap(data => {\r\n\t\t\t\tconst controls = this.controls;\r\n\t\t\t\tcontrols.dealer.controls.country.options = FormService.toSelectOptions(data.country.options);\r\n\t\t\t\tcontrols.client.controls.country.options = FormService.toSelectOptions(data.country.options);\r\n\t\t\t\tcontrols.architect.controls.country.options = FormService.toSelectOptions(data.country.options);\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tconst controls = this.controls;\r\n\t\tconst country = controls.dealer.controls.country.options.length > 1 ? controls.dealer.controls.country.options[1].id : null;\r\n\t\tform.patch({\r\n\t\t\tdealer: {\r\n\t\t\t\tfullName: 'Agente Jhon Appleseed',\r\n\t\t\t\tcountry: country,\r\n\t\t\t\tcity: 'Pesaro',\r\n\t\t\t},\r\n\t\t\tclient: {\r\n\t\t\t\tfullName: 'Cliente Jhon Appleseed',\r\n\t\t\t\tcountry: country,\r\n\t\t\t\tcity: 'Pesaro',\r\n\t\t\t},\r\n\t\t\tarchitect: {\r\n\t\t\t\tfullName: 'Architetto Jhon Appleseed',\r\n\t\t\t\tcountry: country,\r\n\t\t\t\tcity: 'Pesaro',\r\n\t\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\t\ttelephone: '0721411112',\r\n\t\t\t},\r\n\t\t\ttype: 'Hotel',\r\n\t\t\tdestination: 'Hospitality',\r\n\t\t\tproducts: 'Adam, Clop',\r\n\t\t\tprivacy: true,\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('ProjectsRegistrationComponent.onSubmit', form.value);\r\n\t\tif (form.valid) {\r\n\t\t\tform.submitted = true;\r\n\t\t\tProjectsRegistrationService.submit$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\tconsole.log('ProjectsRegistrationComponent.onSubmit', response);\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Project Registration\",\r\n\t\t\t\t\t'form_name': \"Registrazione Progetto\"\r\n\t\t\t\t});\r\n\t\t\t\tif (!this.isModal) {\r\n\t\t\t\t\tform.reset();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t}\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('ProjectsRegistrationComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tform.submitted = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonClose() {\r\n\t\tthis.close.next(this.form.value);\r\n\t}\r\n}\r\n\r\nProjectsRegistrationComponent.meta = {\r\n\tselector: '[projects-registration]',\r\n\toutputs: ['close'],\r\n\tinputs: ['isModal'],\r\n};\r\n","import { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport class ProjectsService {\r\n\r\n\tstatic all$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/projects/all');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/projects/all.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/projects/filters');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/projects/filters.json');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup } from 'rxcomp-form';\r\nimport { combineLatest } from 'rxjs';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { FilterMode } from '../../common/filter/filter-item';\r\nimport { FilterService } from '../../common/filter/filter.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport { ProjectsService } from './projects.service';\r\n\r\nexport class ProjectsComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.categoryId = this.categoryId || null;\r\n\t\tthis.items = [];\r\n\t\tthis.filteredItems = [];\r\n\t\tthis.filters = {};\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tcategory: new FormControl(null),\r\n\t\t\tsearch: new FormControl(null),\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\t// console.log('ProjectsComponent.changes$', form.value);\r\n\t\t\tthis.setFilterByKeyAndValue('category', form.value.category);\r\n\t\t\tthis.setFilterByKeyAndValue('search', form.value.search);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(data => {\r\n\t\t\tthis.items = data[0];\r\n\t\t\tthis.filters = data[1];\r\n\t\t\tcontrols.category.options = FormService.toSelectOptions(this.filters.category.options);\r\n\t\t\tthis.onLoad();\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tProjectsService.all$(),\r\n\t\t\tProjectsService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\tonLoad() {\r\n\t\tconst items = this.items;\r\n\t\tconst filters = this.filters;\r\n\t\tObject.keys(filters).forEach(key => {\r\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\r\n\t\t});\r\n\t\tconst initialParams = {};\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\tswitch (key) {\r\n\t\t\t\t\t\t\tcase 'category':\r\n\t\t\t\t\t\t\t\treturn item.category.id === value;\r\n\t\t\t\t\t\t\tcase 'search':\r\n\t\t\t\t\t\t\t\treturn item.title.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\r\n\t\t\t\t\t\t\t\t\titem.country.toLowerCase().indexOf(value.toLowerCase()) !== -1\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t\tconst category = this.categoryId ? this.categoryId : (this.filters.category.values.length ? this.filters.category.values[0] : null);\r\n\t\t// const category = window.categoryId != null ? window.categoryId : (this.filters.category.values.length ? this.filters.category.values[0] : null);\r\n\t\tconst search = this.filters.search.values.length ? this.filters.search.values[0] : null;\r\n\t\tthis.form.patch({ category, search });\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(filteredItems => {\r\n\t\t\tthis.filteredItems = filteredItems;\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t\t// console.log('ProjectsComponent.filteredItems', filteredItems.length);\r\n\t\t});\r\n\t}\r\n\r\n\tsetFilterByKeyAndValue(key, value) {\r\n\t\tconst filter = this.filters[key];\r\n\t\tif (filter) {\r\n\t\t\tif (filter.mode === FilterMode.QUERY) {\r\n\t\t\t\tfilter.set(value);\r\n\t\t\t} else {\r\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\r\n\t\t\t\t// console.log(filter.options, option);\r\n\t\t\t\tif (option) {\r\n\t\t\t\t\tfilter.set(option);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfilter.clear();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonSearch(model) {\r\n\t\t// console.log('ProjectsComponent.onSearch', this.form.value);\r\n\t\tthis.setFilterByKeyAndValue('category', this.form.value.category);\r\n\t\tthis.setFilterByKeyAndValue('search', this.form.value.search);\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tclearFilter(event, filter) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopImmediatePropagation();\r\n\t\tfilter.clear();\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nProjectsComponent.meta = {\r\n\tselector: '[projects]',\r\n\tinputs: ['categoryId'],\r\n};\r\n","import { BehaviorSubject, of } from 'rxjs';\r\nimport { map, switchMap } from 'rxjs/operators';\r\nimport { LocalStorageService } from '../../common/storage/local-storage.service';\r\n\r\nexport class FilesService {\r\n\r\n\tstatic files$_ = new BehaviorSubject([]);\r\n\r\n\tstatic get currentFiles() {\r\n\t\treturn this.files$_.getValue();\r\n\t}\r\n\r\n\tstatic hasFile(file) {\r\n\t\tconst files = this.currentFiles;\r\n\t\tconst index = files.reduce((p, c, i) => {\r\n\t\t\treturn p !== -1 ? p : (c.id === file.id ? i : p);\r\n\t\t}, -1);\r\n\t\treturn index !== -1;\r\n\t}\r\n\r\n\tstatic setFiles(files) {\r\n\t\tif (files) {\r\n\t\t\tLocalStorageService.set('files', files);\r\n\t\t} else {\r\n\t\t\tLocalStorageService.delete('files');\r\n\t\t}\r\n\t\tthis.files$_.next(files);\r\n\t}\r\n\r\n\tstatic files$() {\r\n\t\tconst localFiles = LocalStorageService.get('files') || [];\r\n\t\treturn of(localFiles).pipe(\r\n\t\t\tswitchMap(files => {\r\n\t\t\t\tthis.setFiles(files);\r\n\t\t\t\treturn this.files$_;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic addFile$(file) {\r\n\t\treturn of(file).pipe(\r\n\t\t\tmap(file => {\r\n\t\t\t\tconst files = this.currentFiles.slice();\r\n\t\t\t\tconst index = files.reduce((p, c, i) => {\r\n\t\t\t\t\treturn p !== -1 ? p : (c.id === file.id ? i : p);\r\n\t\t\t\t}, -1);\r\n\t\t\t\tif (index === -1) {\r\n\t\t\t\t\tfiles.push(file);\r\n\t\t\t\t\tthis.setFiles(files);\r\n\t\t\t\t\treturn file;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic removeFile$(file) {\r\n\t\treturn of(file).pipe(\r\n\t\t\tmap(file => {\r\n\t\t\t\tconst files = this.currentFiles.slice();\r\n\t\t\t\tconst index = files.reduce((p, c, i) => {\r\n\t\t\t\t\treturn p !== -1 ? p : (c.id === file.id ? i : p);\r\n\t\t\t\t}, -1);\r\n\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\tfiles.splice(index, 1);\r\n\t\t\t\t\tthis.setFiles(files);\r\n\t\t\t\t\treturn file;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic removeAll$() {\r\n\t\treturn of([]).pipe(\r\n\t\t\tmap(files => {\r\n\t\t\t\tthis.setFiles(files);\r\n\t\t\t\treturn files;\r\n\t\t\t}),\r\n\t\t)\r\n\t}\r\n\r\n}\r\n","import { combineLatest } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\nimport { FilesService } from '../../shared/files/files.service';\r\n\r\nexport class ReservedAreaService {\r\n\r\n\tstatic all$() {\r\n\t\treturn (\r\n\t\t\tenvironment.flags.production ?\r\n\t\t\t\tApiService.get$(`/reserved-area/all.json`) :\r\n\t\t\t\tApiService.get$(`/reserved-area/all.json`)\r\n\t\t).pipe(\r\n\t\t\tmap(items => {\r\n\t\t\t\titems.forEach(x => {\r\n\t\t\t\t\tx.title = ReservedAreaService.toTitleCase(x.title.replace(/_/g, ' '));\r\n\t\t\t\t});\r\n\t\t\t\treturn items;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic all_$() {\r\n\t\treturn combineLatest([ReservedAreaService.get$(), FilesService.files$()]).pipe(\r\n\t\t\tmap(data => {\r\n\t\t\t\tconst items = data[0];\r\n\t\t\t\tconst files = data[1];\r\n\t\t\t\titems.forEach(item => {\r\n\t\t\t\t\tif (files.find(x => x.id === item.id)) {\r\n\t\t\t\t\t\titem.added = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\titem.added = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn items;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic toTitleCase(sentence, seps = ' _-/') {\r\n\t\tconst capitalize = str => str.length ? str[0].toUpperCase() + str.slice(1).toLowerCase() : '';\r\n\t\tconst escape = str => str.replace(/./g, c => `\\\\${c}`);\r\n\t\tlet wordPattern = new RegExp(`[^${escape(seps)}]+`, 'g');\r\n\t\treturn sentence.replace(wordPattern, capitalize);\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\nimport { environment } from '../../environment';\r\nimport { FilesService } from '../../shared/files/files.service';\r\nimport { UserService } from '../../shared/user/user.service';\r\nimport { ReservedAreaService } from './reserved-area.service';\r\n\r\nexport class ReservedAreaComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.user = undefined;\r\n\t\tthis.items = [];\r\n\t\tthis.tree = [];\r\n\t\tthis.files = [];\r\n\t\tthis.visibleFiles = [];\r\n\t\tthis.item = null;\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t\tUserService.me$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(user => {\r\n\t\t\tconsole.log('ReservedAreaComponent.user', user);\r\n\t\t\tthis.user = user;\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn ReservedAreaService.all$().pipe(\r\n\t\t\ttap(items => {\r\n\t\t\t\tthis.items = items;\r\n\t\t\t\tthis.tree = this.getTree(items);\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tgetTree(items, parentId) {\r\n\t\tlet tree = items.filter(x => x.parentId === parentId && x.type === 'folder').map(x => {\r\n\t\t\tconst item = Object.assign({}, x);\r\n\t\t\titem.items = this.getTree(items, x.id);\r\n\t\t\treturn item;\r\n\t\t});\r\n\t\treturn tree;\r\n\t}\r\n\r\n\tonOpen(item) {\r\n\t\tif (item.active) {\r\n\t\t\tthis.item = item;\r\n\t\t\tthis.files = this.items.filter(x => x.type === 'file' && x.parentId === item.id);\r\n\t\t\tthis.visibleFiles = this.files.slice(0, Math.min(8, this.files.length));\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t}\r\n\t}\r\n\r\n\tshowMore(event) {\r\n\t\tconst pageSize = 32;\r\n\t\tif (this.visibleFiles.length + pageSize >= this.files.length) {\r\n\t\t\tthis.visibleFiles = this.files.slice();\r\n\t\t} else {\r\n\t\t\tthis.visibleFiles = this.files.slice(0, Math.min(this.visibleFiles.length + pageSize, this.files.length));\r\n\t\t}\r\n\t\tthis.pushChanges();\r\n\t\tLocomotiveScrollService.update();\r\n\t}\r\n\r\n\tonProjectRegistration(event) {\r\n\t\tModalService.open$({ src: environment.template.modal.projectsRegistrationModal }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tconsole.log('ReservedAreaComponent.onProjectRegistration', event);\r\n\t\t});\r\n\t}\r\n\r\n\tonToggleFile(file) {\r\n\t\t(this.isAddedToFiles(file) ? FilesService.removeFile$(file) : FilesService.addFile$(file)).pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(_ => {\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tisAddedToFiles(file) {\r\n\t\treturn FilesService.hasFile(file);\r\n\t}\r\n\r\n\tonLogout() {\r\n\t\tUserService.signout$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n}\r\n\r\nReservedAreaComponent.meta = {\r\n\tselector: '[reserved-area]',\r\n};\r\n","import { map } from 'rxjs/operators';\r\nimport { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport class StoreLocatorService {\r\n\r\n\tstatic all$() {\r\n\t\treturn (\r\n\t\t\tenvironment.flags.production ?\r\n\t\t\t\tApiService.get$(`/store-locator/all.json`) :\r\n\t\t\t\tApiService.get$(`/store-locator/all.json`)\r\n\t\t).pipe(\r\n\t\t\tmap(items => items.sort((a, b) => {\r\n\t\t\t\treturn a.rank - b.rank;\r\n\t\t\t})),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/store-locator/filters.json');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/store-locator/filters.json');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup } from 'rxcomp-form';\r\nimport { combineLatest } from 'rxjs';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { FilterMode } from '../../common/filter/filter-item';\r\nimport { FilterService } from '../../common/filter/filter.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport { StoreLocatorService } from './store-locator.service';\r\n\r\nexport class StoreLocatorComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.items = [];\r\n\t\tthis.filteredItems = [];\r\n\t\tthis.visibleItems = [];\r\n\t\tthis.filters = {};\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tcountry: new FormControl(null),\r\n\t\t\tcategory: new FormControl(null),\r\n\t\t\tsearch: new FormControl(null),\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\t// console.log('StoreLocatorComponent.changes$', form.value);\r\n\t\t\tthis.setFilterByKeyAndValue('country', form.value.country);\r\n\t\t\tthis.setFilterByKeyAndValue('category', form.value.category);\r\n\t\t\tthis.setFilterByKeyAndValue('search', form.value.search);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(data => {\r\n\t\t\tthis.items = data[0];\r\n\t\t\tthis.filters = data[1];\r\n\t\t\tcontrols.country.options = FormService.toSelectOptions(this.filters.country.options);\r\n\t\t\tcontrols.category.options = FormService.toSelectOptions(this.filters.category.options);\r\n\t\t\tthis.onLoad();\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tStoreLocatorService.all$(),\r\n\t\t\tStoreLocatorService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\tonLoad() {\r\n\t\tconst items = this.items;\r\n\t\tconst filters = this.filters;\r\n\t\tObject.keys(filters).forEach(key => {\r\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\r\n\t\t});\r\n\t\tconst initialParams = {};\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\tswitch (key) {\r\n\t\t\t\t\t\t\tcase 'country':\r\n\t\t\t\t\t\t\t\treturn item.country && item.country.id === value;\r\n\t\t\t\t\t\t\tcase 'category':\r\n\t\t\t\t\t\t\t\treturn item.category && item.category.id === value;\r\n\t\t\t\t\t\t\tcase 'search':\r\n\t\t\t\t\t\t\t\treturn item.name.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\r\n\t\t\t\t\t\t\t\t\t// item.address.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\r\n\t\t\t\t\t\t\t\t\titem.city.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\r\n\t\t\t\t\t\t\t\t\titem.country.name.toLowerCase().indexOf(value.toLowerCase()) !== -1\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t\tconst country = this.filters.country.values.length ? this.filters.country.values[0] : null;\r\n\t\tconst category = this.filters.category.values.length ? this.filters.category.values[0] : null;\r\n\t\tconst search = this.filters.search.values.length ? this.filters.search.values[0] : null;\r\n\t\tthis.form.patch({ country, category, search });\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(filteredItems => {\r\n\t\t\tthis.filteredItems = filteredItems;\r\n\t\t\tthis.visibleItems = filteredItems.slice(0, Math.min(12, filteredItems.length));\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t\t// console.log('StoreLocatorComponent.filteredItems', filteredItems.length);\r\n\t\t});\r\n\t}\r\n\r\n\tshowMore(event) {\r\n\t\tconst pageSize = 32;\r\n\t\tif (this.visibleItems.length + pageSize >= this.filteredItems.length) {\r\n\t\t\tthis.visibleItems = this.filteredItems.slice();\r\n\t\t} else {\r\n\t\t\tthis.visibleItems = this.filteredItems.slice(0, Math.min(this.visibleItems.length + pageSize, this.filteredItems.length));\r\n\t\t}\r\n\t\tthis.pushChanges();\r\n\t\tLocomotiveScrollService.update();\r\n\t}\r\n\r\n\tsetFilterByKeyAndValue(key, value) {\r\n\t\tconst filter = this.filters[key];\r\n\t\tif (filter) {\r\n\t\t\tif (filter.mode === FilterMode.QUERY) {\r\n\t\t\t\tfilter.set(value);\r\n\t\t\t} else {\r\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\r\n\t\t\t\t// console.log(filter.options, option);\r\n\t\t\t\tif (option) {\r\n\t\t\t\t\tfilter.set(option);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfilter.clear();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonSearch(model) {\r\n\t\t// console.log('StoreLocatorComponent.onSearch', this.form.value);\r\n\t\tthis.setFilterByKeyAndValue('country', this.form.value.country);\r\n\t\tthis.setFilterByKeyAndValue('category', this.form.value.category);\r\n\t\tthis.setFilterByKeyAndValue('search', this.form.value.search);\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tclearFilter(event, filter) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopImmediatePropagation();\r\n\t\tfilter.clear();\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nStoreLocatorComponent.meta = {\r\n\tselector: '[store-locator]',\r\n};\r\n","/**\n * Copyright 2019 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface OverlayViewSafe extends google.maps.OverlayView {}\n\n/**\n * Extends an object's prototype by another's.\n *\n * @param type1 The Type to be extended.\n * @param type2 The Type to extend with.\n * @ignore\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction extend(type1: any, type2: any): void {\n  // eslint-disable-next-line prefer-const\n  for (let property in type2.prototype) {\n    type1.prototype[property] = type2.prototype[property];\n  }\n}\n\n/**\n * @ignore\n */\nexport class OverlayViewSafe {\n  constructor() {\n    // MarkerClusterer implements google.maps.OverlayView interface. We use the\n    // extend function to extend MarkerClusterer with google.maps.OverlayView\n    // because it might not always be available when the code is defined so we\n    // look for it at the last possible moment. If it doesn't exist now then\n    // there is no point going ahead :)\n    extend(OverlayViewSafe, google.maps.OverlayView);\n  }\n}\n","/**\n * Copyright 2019 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * This class represents the object for values in the `styles` array passed\n * to the {@link MarkerClusterer} constructor. The element in this array that is used to\n * style the cluster icon is determined by calling the `calculator` function.\n */\nimport { Cluster } from \"./cluster\";\nimport { OverlayViewSafe } from \"./overlay-view-safe\";\n\n/**\n *\n * @hidden\n */\nfunction toCssText(styles: { [key: string]: string }): string {\n  return Object.keys(styles)\n    .reduce((acc, key) => {\n      if (styles[key]) {\n        acc.push(key + \":\" + styles[key]);\n      }\n      return acc;\n    }, [])\n    .join(\";\");\n}\n\n/**\n *\n * @hidden\n */\nfunction coercePixels(pixels: number): string {\n  return pixels ? pixels + \"px\" : undefined;\n}\n\nexport interface ClusterIconStyle {\n  /** The URL of the cluster icon image file. If not set, img element will not be created */\n  url?: string;\n  /** The name of the CSS class defining styles for the cluster markers. */\n  className?: string;\n  /** Height The display height (in pixels) of the cluster icon. Required. */\n  height: number;\n  /** Width The display width (in pixels) of the cluster icon. Required. */\n  width: number;\n  /**\n   * The position (in pixels) from the center of the cluster icon to\n   * where the text label is to be centered and drawn. The format is `[yoffset, xoffset]`\n   * where `yoffset` increases as you go down from center and `xoffset`\n   * increases to the right of center. The default is `[0, 0]`.\n   */\n  anchorText?: [number, number];\n  /**\n   * The anchor position (in pixels) of the cluster icon. This is the\n   * spot on the cluster icon that is to be aligned with the cluster position. The format is\n   * `[yoffset, xoffset]` where `yoffset` increases as you go down and\n   * `xoffset` increases to the right of the top-left corner of the icon. The default\n   * anchor position is the center of the cluster icon.\n   */\n  anchorIcon?: [number, number];\n  /**\n   * The color of the label text shown on the cluster icon.\n   * @default `\"black\"`\n   */\n  textColor?: string;\n  /** The size (in pixels) of the label text shown on the cluster icon.\n   * @default `11`\n   */\n  textSize?: number;\n\n  /** The line height (in pixels) of the label text shown on the cluster icon.\n   * @default the same as cluster icon height\n   */\n  textLineHeight?: number;\n  /**\n   * The value of the CSS `text-decoration`\n   * property for the label text shown on the cluster icon.\n   *\n   * @default `\"none\"`\n   */\n  textDecoration?: string;\n  /**\n   * The value of the CSS `font-weight`\n   * property for the label text shown on the cluster icon.\n   *\n   *  @default `\"bold\"`\n   */\n  fontWeight?: string;\n  /**\n   *  The value of the CSS `font-style`\n   *  property for the label text shown on the cluster icon.\n   *\n   *  @default `\"normal\"`\n   */\n  fontStyle?: string;\n  /**\n   *  The value of the CSS `font-family`\n   *  property for the label text shown on the cluster icon.\n   *  @default `\"Arial,sans-serif\"`\n   */\n  fontFamily?: string;\n  /**\n   * The position of the cluster icon image\n   * within the image defined by `url`. The format is `\"xpos ypos\"`\n   * (the same format as for the CSS `background-position` property). You must set\n   * this property appropriately when the image defined by `url` represents a sprite\n   * containing multiple images. Note that the position <i>must</i> be specified in px units.\n   *\n   * @default `\"0 0\"`\n   */\n  backgroundPosition?: string;\n}\n\n/**\n * @description This is an object containing general information about a cluster icon. This is\n *  the object that a `calculator` function returns.\n */\nexport interface ClusterIconInfo {\n  /**\n   * The text of the label to be shown on the cluster icon.\n   */\n  text: string;\n  /**\n   * The index plus 1 of the element in the `styles`\n   */\n  index: number;\n  /**\n   * The tooltip to display when the mouse moves over the cluster icon.\n   * If this value is `undefined` or `\"\"`, `title` is set to the\n   * value of the `title` property passed to the MarkerClusterer.\n   */\n  title: string;\n  /**\n   * An override for dynamic cluster icon url (if not provided, the component will use the default style icon)\n   */\n  url?: string;\n}\n\n/**\n * A cluster icon.\n */\nexport class ClusterIcon extends OverlayViewSafe {\n  private className_: string;\n  private center_: google.maps.LatLng = null;\n  private div_: HTMLDivElement = null;\n  private sums_: ClusterIconInfo = null;\n  private visible_ = false;\n\n  private style: ClusterIconStyle = null;\n\n  private anchorText_: [number, number];\n  private anchorIcon_: [number, number];\n\n  private boundsChangedListener_: google.maps.MapsEventListener;\n\n  /**\n   * @param cluster_ The cluster with which the icon is to be associated.\n   * @param styles_ An array of {@link ClusterIconStyle} defining the cluster icons\n   *  to use for various cluster sizes.\n   */\n  constructor(private cluster_: Cluster, private styles_: ClusterIconStyle[]) {\n    super();\n\n    this.setMap(cluster_.getMap()); // Note: this causes onAdd to be called\n  }\n\n  /**\n   * Adds the icon to the DOM.\n   */\n  onAdd(): void {\n    let cMouseDownInCluster: boolean;\n    let cDraggingMapByCluster: boolean;\n\n    const mc = this.cluster_.getMarkerClusterer();\n\n    const [major, minor] = google.maps.version.split(\".\");\n\n    const gmVersion = parseInt(major, 10) * 100 + parseInt(minor, 10);\n\n    this.div_ = document.createElement(\"div\");\n    if (this.visible_) {\n      this.show();\n    }\n\n    this.getPanes().overlayMouseTarget.appendChild(this.div_);\n\n    // Fix for Issue 157\n    this.boundsChangedListener_ = google.maps.event.addListener(\n      this.getMap(),\n      \"bounds_changed\",\n      () => {\n        cDraggingMapByCluster = cMouseDownInCluster;\n      }\n    );\n\n    google.maps.event.addDomListener(this.div_, \"mousedown\", () => {\n      cMouseDownInCluster = true;\n      cDraggingMapByCluster = false;\n    });\n\n    // March 1, 2018: Fix for this 3.32 exp bug, https://issuetracker.google.com/issues/73571522\n    // But it doesn't work with earlier releases so do a version check.\n    if (gmVersion >= 332) {\n      // Ugly version-dependent code\n      google.maps.event.addDomListener(this.div_, \"touchstart\", (e: Event) => {\n        e.stopPropagation();\n      });\n    }\n\n    google.maps.event.addDomListener(this.div_, \"click\", (e: Event) => {\n      cMouseDownInCluster = false;\n      if (!cDraggingMapByCluster) {\n        /**\n         * This event is fired when a cluster marker is clicked.\n         * @name MarkerClusterer#click\n         * @param {Cluster} c The cluster that was clicked.\n         * @event\n         */\n        google.maps.event.trigger(mc, \"click\", this.cluster_);\n        google.maps.event.trigger(mc, \"clusterclick\", this.cluster_); // deprecated name\n\n        // The default click handler follows. Disable it by setting\n        // the zoomOnClick property to false.\n        if (mc.getZoomOnClick()) {\n          // Zoom into the cluster.\n          const mz = mc.getMaxZoom();\n          const theBounds = this.cluster_.getBounds();\n          (mc.getMap() as google.maps.Map).fitBounds(theBounds);\n          // There is a fix for Issue 170 here:\n          setTimeout(() => {\n            (mc.getMap() as google.maps.Map).fitBounds(theBounds);\n            // Don't zoom beyond the max zoom level\n            if (mz !== null && mc.getMap().getZoom() > mz) {\n              mc.getMap().setZoom(mz + 1);\n            }\n          }, 100);\n        }\n\n        // Prevent event propagation to the map:\n        e.cancelBubble = true;\n        if (e.stopPropagation) {\n          e.stopPropagation();\n        }\n      }\n    });\n\n    google.maps.event.addDomListener(this.div_, \"mouseover\", () => {\n      /**\n       * This event is fired when the mouse moves over a cluster marker.\n       * @name MarkerClusterer#mouseover\n       * @param {Cluster} c The cluster that the mouse moved over.\n       * @event\n       */\n      google.maps.event.trigger(mc, \"mouseover\", this.cluster_);\n    });\n\n    google.maps.event.addDomListener(this.div_, \"mouseout\", () => {\n      /**\n       * This event is fired when the mouse moves out of a cluster marker.\n       * @name MarkerClusterer#mouseout\n       * @param {Cluster} c The cluster that the mouse moved out of.\n       * @event\n       */\n      google.maps.event.trigger(mc, \"mouseout\", this.cluster_);\n    });\n  }\n\n  /**\n   * Removes the icon from the DOM.\n   */\n  onRemove(): void {\n    if (this.div_ && this.div_.parentNode) {\n      this.hide();\n      google.maps.event.removeListener(this.boundsChangedListener_);\n      google.maps.event.clearInstanceListeners(this.div_);\n      this.div_.parentNode.removeChild(this.div_);\n      this.div_ = null;\n    }\n  }\n\n  /**\n   * Draws the icon.\n   */\n  draw(): void {\n    if (this.visible_) {\n      const pos = this.getPosFromLatLng_(this.center_);\n      this.div_.style.top = pos.y + \"px\";\n      this.div_.style.left = pos.x + \"px\";\n    }\n  }\n\n  /**\n   * Hides the icon.\n   */\n  hide(): void {\n    if (this.div_) {\n      this.div_.style.display = \"none\";\n    }\n    this.visible_ = false;\n  }\n\n  /**\n   * Positions and shows the icon.\n   */\n  show(): void {\n    if (this.div_) {\n      this.div_.className = this.className_;\n      this.div_.style.cssText = this.createCss_(\n        this.getPosFromLatLng_(this.center_)\n      );\n\n      this.div_.innerHTML =\n        (this.style.url ? this.getImageElementHtml() : \"\") +\n        this.getLabelDivHtml();\n\n      if (typeof this.sums_.title === \"undefined\" || this.sums_.title === \"\") {\n        this.div_.title = this.cluster_.getMarkerClusterer().getTitle();\n      } else {\n        this.div_.title = this.sums_.title;\n      }\n      this.div_.style.display = \"\";\n    }\n    this.visible_ = true;\n  }\n\n  private getLabelDivHtml(): string {\n    const mc = this.cluster_.getMarkerClusterer();\n    const ariaLabel = mc.ariaLabelFn(this.sums_.text);\n\n    const divStyle: { [key: string]: string } = {\n      position: \"absolute\",\n      top: coercePixels(this.anchorText_[0]),\n      left: coercePixels(this.anchorText_[1]),\n      color: this.style.textColor,\n      \"font-size\": coercePixels(this.style.textSize),\n      \"font-family\": this.style.fontFamily,\n      \"font-weight\": this.style.fontWeight,\n      \"font-style\": this.style.fontStyle,\n      \"text-decoration\": this.style.textDecoration,\n      \"text-align\": \"center\",\n      width: coercePixels(this.style.width),\n      \"line-height\": coercePixels(this.style.textLineHeight),\n    };\n\n    return `\n<div aria-label=\"${ariaLabel}\" style=\"${toCssText(divStyle)}\" tabindex=\"0\">\n  <span aria-hidden=\"true\">${this.sums_.text}</span>\n</div>\n`;\n  }\n\n  private getImageElementHtml(): string {\n    // NOTE: values must be specified in px units\n    const bp = (this.style.backgroundPosition || \"0 0\").split(\" \");\n    const spriteH = parseInt(bp[0].replace(/^\\s+|\\s+$/g, \"\"), 10);\n    const spriteV = parseInt(bp[1].replace(/^\\s+|\\s+$/g, \"\"), 10);\n\n    let dimensions: { [key: string]: string } = {};\n\n    if (this.cluster_.getMarkerClusterer().getEnableRetinaIcons()) {\n      dimensions = {\n        width: coercePixels(this.style.width),\n        height: coercePixels(this.style.height),\n      };\n    } else {\n      const [Y1, X1, Y2, X2] = [\n        -1 * spriteV,\n        -1 * spriteH + this.style.width,\n        -1 * spriteV + this.style.height,\n        -1 * spriteH,\n      ];\n      dimensions = {\n        clip: `rect(${Y1}px, ${X1}px, ${Y2}px, ${X2}px)`,\n      };\n    }\n\n    const overrideDimensionsDynamicIcon = this.sums_.url\n      ? { width: \"100%\", height: \"100%\" }\n      : {};\n\n    const cssText = toCssText({\n      position: \"absolute\",\n      top: coercePixels(spriteV),\n      left: coercePixels(spriteH),\n      ...dimensions,\n      ...overrideDimensionsDynamicIcon,\n    });\n\n    return `<img alt=\"${this.sums_.text}\" aria-hidden=\"true\" src=\"${this.style.url}\" style=\"${cssText}\"/>`;\n  }\n\n  /**\n   * Sets the icon styles to the appropriate element in the styles array.\n   *\n   * @ignore\n   * @param sums The icon label text and styles index.\n   */\n  useStyle(sums: ClusterIconInfo): void {\n    this.sums_ = sums;\n    let index = Math.max(0, sums.index - 1);\n    index = Math.min(this.styles_.length - 1, index);\n    this.style = this.sums_.url\n      ? { ...this.styles_[index], url: this.sums_.url }\n      : this.styles_[index];\n\n    this.anchorText_ = this.style.anchorText || [0, 0];\n    this.anchorIcon_ = this.style.anchorIcon || [\n      Math.floor(this.style.height / 2),\n      Math.floor(this.style.width / 2),\n    ];\n\n    this.className_ =\n      this.cluster_.getMarkerClusterer().getClusterClass() +\n      \" \" +\n      (this.style.className || \"cluster-\" + index);\n  }\n\n  /**\n   * Sets the position at which to center the icon.\n   *\n   * @param center The latlng to set as the center.\n   */\n  setCenter(center: google.maps.LatLng): void {\n    this.center_ = center;\n  }\n\n  /**\n   * Creates the `cssText` style parameter based on the position of the icon.\n   *\n   * @param pos The position of the icon.\n   * @return The CSS style text.\n   */\n  private createCss_(pos: google.maps.Point): string {\n    return toCssText({\n      \"z-index\": `${this.cluster_.getMarkerClusterer().getZIndex()}`,\n      top: coercePixels(pos.y),\n      left: coercePixels(pos.x),\n      width: coercePixels(this.style.width),\n      height: coercePixels(this.style.height),\n      cursor: \"pointer\",\n      position: \"absolute\",\n      \"-webkit-user-select\": \"none\",\n      \"-khtml-user-select\": \"none\",\n      \"-moz-user-select\": \"none\",\n      \"-o-user-select\": \"none\",\n      \"user-select\": \"none\",\n    });\n  }\n\n  /**\n   * Returns the position at which to place the DIV depending on the latlng.\n   *\n   * @param latlng The position in latlng.\n   * @return The position in pixels.\n   */\n  private getPosFromLatLng_(latlng: google.maps.LatLng): google.maps.Point {\n    const pos = this.getProjection().fromLatLngToDivPixel(latlng);\n    pos.x = Math.floor(pos.x - this.anchorIcon_[1]);\n    pos.y = Math.floor(pos.y - this.anchorIcon_[0]);\n    return pos;\n  }\n}\n","import MarkerClusterer from '@googlemaps/markerclustererplus';\r\nimport { Component, getContext } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\nimport { MAP_STYLE } from './map.style';\r\n\r\nconst USE_CLUSTERER = true;\r\n\r\nlet GOOGLE_MAPS;\r\n\r\nexport class MapComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst apiKey = environment.googleMaps.apiKey;\r\n\t\tif (GOOGLE_MAPS != null) {\r\n\t\t\tthis.initMap();\r\n\t\t} else {\r\n\t\t\twindow.onGoogleMapsLoaded = () => {\r\n\t\t\t\tGOOGLE_MAPS = window.google.maps;\r\n\t\t\t\tthis.initMap();\r\n\t\t\t};\r\n\t\t\tconst script = document.createElement('script');\r\n\t\t\tscript.setAttribute('type', 'text/javascript');\r\n\t\t\tscript.setAttribute('src', `https://maps.googleapis.com/maps/api/js?callback=onGoogleMapsLoaded${apiKey ? `&key=${apiKey}` : ''}&libraries=places`);\r\n\t\t\t(document.getElementsByTagName('head')[0] || document.documentElement).appendChild(script);\r\n\t\t}\r\n\t}\r\n\r\n\tinitMap() {\r\n\t\tconst google = window.google;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst center = this.center;\r\n\r\n\t\tconst item = this.items && this.items.length ? this.items[0] : null;\r\n\r\n\t\tconst position = item ? new google.maps.LatLng(item.latitude, item.longitude) : null;\r\n\r\n\t\tconst mapOptions = {\r\n\t\t\tzoom: 15, // 9,\r\n\t\t\tcenter: position,\r\n\r\n\t\t\tscrollwheel: false,\r\n\t\t\t// mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n\t\t\tzoomControlOptions: {\r\n\t\t\t\tstyle: google.maps.ZoomControlStyle.DEFAULT\r\n\t\t\t},\r\n\t\t\t// overviewMapControl: true,\r\n\r\n\t\t\tscaleControl: false,\r\n\t\t\tzoomControl: true,\r\n\t\t\tmapTypeControl: false,\r\n\t\t\tstreetViewControl: false,\r\n\t\t\trotateControl: true,\r\n\t\t\tfullscreenControl: true,\r\n\r\n\t\t\tstyles: MAP_STYLE\r\n\t\t};\r\n\r\n\t\tconst mapElement = node.querySelector('.map');\r\n\r\n\t\tconst map = this.map = new google.maps.Map(mapElement, mapOptions);\r\n\r\n\t\tthis.addMarkers(this.items);\r\n\r\n\t\tif (!this.items) {\r\n\t\t\tmap.fitBounds(this.getItalyBounds());\r\n\t\t}\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tthis.clearMarkers();\r\n\t\tthis.addMarkers(this.items);\r\n\t}\r\n\r\n\tcalculateDistance(lat1, lon1, lat2, lon2, unit) {\r\n\t\tif ((lat1 == lat2) && (lon1 == lon2)) {\r\n\t\t\treturn 0;\r\n\t\t} else {\r\n\t\t\tconst radlat1 = Math.PI * lat1 / 180;\r\n\t\t\tconst radlat2 = Math.PI * lat2 / 180;\r\n\t\t\tconst theta = lon1 - lon2;\r\n\t\t\tconst radtheta = Math.PI * theta / 180;\r\n\t\t\tlet dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);\r\n\t\t\tif (dist > 1) {\r\n\t\t\t\tdist = 1;\r\n\t\t\t}\r\n\t\t\tdist = Math.acos(dist);\r\n\t\t\tdist = dist * 180 / Math.PI;\r\n\t\t\tdist = dist * 60 * 1.1515;\r\n\t\t\tif (unit == \"K\") {\r\n\t\t\t\tdist = dist * 1.609344;\r\n\t\t\t}\r\n\t\t\tif (unit == \"N\") {\r\n\t\t\t\tdist = dist * 0.8684;\r\n\t\t\t}\r\n\t\t\treturn dist;\r\n\t\t}\r\n\t}\r\n\r\n\tclearMarkers() {\r\n\t\tif (this.markerCluster) {\r\n\t\t\tthis.markerCluster.clearMarkers();\r\n\t\t}\r\n\t\tif (this.markers) {\r\n\t\t\tthis.markers.forEach(marker => marker.setMap(null));\r\n\t\t}\r\n\t}\r\n\r\n\taddMarkers(items) {\r\n\t\tconst map = this.map;\r\n\t\tif (map && items) {\r\n\t\t\tconst bounds = new google.maps.LatLngBounds();\r\n\r\n\t\t\tconst markers = items.map((item) => {\r\n\r\n\t\t\t\tconst position = new google.maps.LatLng(item.latitude, item.longitude);\r\n\r\n\t\t\t\tbounds.extend(position);\r\n\r\n\t\t\t\tlet content = /* html */`<div class=\"card--store-locator\">\r\n\t\t\t\t\t<div class=\"card__content\">\r\n\t\t\t\t\t\t<div class=\"card__name\"><span>${item.name}</span></div>\r\n\t\t\t\t\t\t<div class=\"card__address\">${item.address}</div>\r\n\t\t\t\t\t\t<div class=\"card__city\">${item.city}</div>\r\n\t\t\t\t\t\t<div class=\"card__country\">${item.country.name}</div>\r\n\t\t\t\t\t\t${item.phone ? `<a class=\"card__phone\" href=\"tel:${item.phone}\">${item.phone}</a>` : ''}\r\n\t\t\t\t\t\t${item.fax ? `<a class=\"card__fax\" href=\"tel:${item.fax}\">${item.fax}</a>` : ''}\r\n\t\t\t\t\t\t${item.email ? `<a class=\"card__email\" href=\"mailto:${item.email}\">${item.email}</a>` : ''}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>`;\r\n\r\n\t\t\t\t/*\r\n\t\t\t\t`<div class=\"marker__content\">\r\n\t\t\t\t\t<div class=\"title\"><span>${item.name}</span></div>\r\n\t\t\t\t\t<div class=\"group group--info\">\r\n\t\t\t\t\t\t<div class=\"address\">\r\n\t\t\t\t\t\t\t${item.address}<br>\r\n\t\t\t\t\t\t\t${item.city} ${item.country}<br>\r\n\t\t\t\t\t\t\t${item.phone ? `<span><a href=\"tel:${item.phone}\">${item.phone}</a><br></span>` : ''}\r\n\t\t\t\t\t\t\t${item.fax ? `<span><a href=\"tel:${item.fax}\">${item.fax}</a><br></span>` : ''}\r\n\t\t\t\t\t\t\t${item.email ? `<span><a href=\"mailto:${item.email}\">${item.email}</a><br></span>` : ''}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t${item.address !== '' ? `<div class=\"distance\">${this.labels.approximately} <b>${Math.floor(item.distance)} km</b></div>` : ``}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"group group--cta\">\r\n\t\t\t\t\t\t${item.address !== '' ? `<a id=\"locator-marker\" href=\"https://www.google.it/maps/dir/${position.lat()},${position.lng()}/${item.title}/@${item.latitude},${item.longitude}/\" target=\"_blank\" class=\"btn btn--link\"><span>${this.labels.reachStore}</span></a>` : ``}\r\n\t\t\t\t\t\t${item.type === 8 || item.type === 9 ? `<a id=\"contact-item\" href=\"${window.itemLocatorSettings.urlStoreContact}?item=${item.id}\" target=\"_blank\" class=\"btn btn--link\"><span>${this.labels.contactStore}</span></a>` : ''}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>`\r\n\t\t\t\t*/\r\n\r\n\t\t\t\tconst markerImage = new google.maps.MarkerImage(\r\n\t\t\t\t\t`${environment.assets}img/maps/marker-sm.png`,\r\n\t\t\t\t\tnew google.maps.Size(24, 32),\r\n\t\t\t\t);\r\n\r\n\t\t\t\tlet marker = new google.maps.Marker({\r\n\t\t\t\t\tposition: position,\r\n\t\t\t\t\tmap: USE_CLUSTERER ? null : map,\r\n\t\t\t\t\ticon: markerImage,\r\n\t\t\t\t\ttitle: item.title,\r\n\t\t\t\t\titem: item,\r\n\t\t\t\t\tcontent: content,\r\n\t\t\t\t});\r\n\t\t\t\tmarker.addListener('click', () => {\r\n\t\t\t\t\tthis.setMarkerWindow(marker.position, content);\r\n\t\t\t\t\t// this.scrollToStore(item);\r\n\t\t\t\t\t// GtmService.push({ event: 'dealerlocator', action: 'marker-click', label: item.title });\r\n\t\t\t\t});\r\n\t\t\t\titem.marker = marker;\r\n\t\t\t\treturn marker;\r\n\t\t\t});\r\n\r\n\t\t\tif (USE_CLUSTERER) {\r\n\t\t\t\tconst markerCluster = new MarkerClusterer(this.map, markers, {\r\n\t\t\t\t\timagePath: `${environment.assets}img/maps/cluster-`,\r\n\t\t\t\t});\r\n\t\t\t\tconst styles = markerCluster.getStyles();\r\n\t\t\t\tconst sizes = [48, 56, 64, 72, 80];\r\n\t\t\t\tstyles.forEach((style, i) => {\r\n\t\t\t\t\tstyle.width = sizes[i];\r\n\t\t\t\t\tstyle.height = sizes[i];\r\n\t\t\t\t\tstyle.textLineHeight = sizes[i];\r\n\t\t\t\t\tstyle.textSize = Math.floor(style.width / 5);\r\n\t\t\t\t\tstyle.textColor = '#ffffff';\r\n\t\t\t\t});\r\n\t\t\t\tmarkerCluster.setStyles(styles);\r\n\t\t\t\tthis.markerCluster = markerCluster;\r\n\t\t\t}\r\n\r\n\t\t\tthis.markers = markers;\r\n\r\n\t\t\tmap.fitBounds(bounds);\r\n\t\t}\r\n\t}\r\n\r\n\tgetGeolocation(map) {\r\n\t\tthis.error = null;\r\n\t\tthis.busyLocation = true;\r\n\t\tlet position = this.map.getCenter();\r\n\r\n\t\t// Try HTML5 geolocation.\r\n\t\tif (navigator.geolocation) {\r\n\t\t\tnavigator.geolocation.getCurrentPosition((location) => {\r\n\t\t\t\tposition = new google.maps.LatLng(location.coords.latitude, location.coords.longitude);\r\n\r\n\t\t\t\tconst geocoder = this.geocoder || new google.maps.Geocoder();\r\n\t\t\t\tthis.geocoder = geocoder;\r\n\t\t\t\tgeocoder.geocode({ 'location': position }, (results, status) => {\r\n\t\t\t\t\tif (status == 'OK') {\r\n\t\t\t\t\t\tvar filteredInfoCity = results.filter(function(address_component) {\r\n\t\t\t\t\t\t\treturn address_component.types.includes(\"locality\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.model.city = filteredInfoCity.length ? filteredInfoCity[0].formatted_address : undefined;\r\n\t\t\t\t\t\tthis.model.address = results[0].formatted_address;\r\n\r\n\t\t\t\t\t\tfor (let i = 0; i < results[0].address_components.length; i++) {\r\n\t\t\t\t\t\t\tif (results[0].address_components[i].types[0] == \"country\" || results[0].address_components[i].types[0] == \"political\") {\r\n\t\t\t\t\t\t\t\tthis.searchCountry = results[0].address_components[i].short_name;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.setInfoWindow(position, 1);\r\n\t\t\t\t\t\tthis.searchPosition(position).finally(() => this.busyLocation = false);\r\n\t\t\t\t\t\tthis.map.setCenter(position);\r\n\t\t\t\t\t\tthis.map.setZoom(ZOOM_LEVEL);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}, () => {\r\n\t\t\t\tthis.setInfoWindow(position, 2);\r\n\t\t\t\tthis.searchPosition(position).finally(() => this.busyLocation = false);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\t// Browser doesn't support Geolocation\r\n\t\t\tthis.setInfoWindow(position, 3);\r\n\t\t\tthis.searchPosition(position).finally(() => this.busyLocation = false);\r\n\t\t}\r\n\t}\r\n\r\n\tfitBounds(items) {\r\n\t\tif (items.length) {\r\n\t\t\tconst bounds = new google.maps.LatLngBounds();\r\n\t\t\titems.forEach((item) => {\r\n\t\t\t\tconst position = new google.maps.LatLng(item.latitude, item.longitude);\r\n\t\t\t\tbounds.extend(position);\r\n\t\t\t});\r\n\t\t\tthis.map.fitBounds(bounds);\r\n\t\t\t// console.log('fitBounds');\r\n\t\t}\r\n\t}\r\n\r\n\tfindNearStores(items, position) {\r\n\t\tif (items) {\r\n\t\t\titems.forEach((item) => {\r\n\t\t\t\titem.distance = this.calculateDistance(item.latitude, item.longitude, position.lat(), position.lng(), 'K');\r\n\t\t\t\titem.visible = (item.cod_stato == window.userCountry || !window.userCountry) && item.distance <= MAX_DISTANCE /* Km */;\r\n\t\t\t\tif (item.visible) {\r\n\t\t\t\t\tif (item.removed) {\r\n\t\t\t\t\t\tthis.markerCluster.addMarker(item.marker);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdelete item.removed;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.markerCluster.removeMarker(item.marker);\r\n\t\t\t\t\titem.removed = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\titems = items.slice();\r\n\t\t\titems.sort((a, b) => {\r\n\t\t\t\treturn a.distance * (a.importante ? 0.5 : 1) - b.distance * (b.importante ? 0.5 : 1);\r\n\t\t\t});\r\n\t\t\tconst visibleStores = items.filter(item => item.visible).slice(0, 50);\r\n\t\t\tthis.$timeout(() => {\r\n\t\t\t\tthis.visibleStores = visibleStores;\r\n\t\t\t}, 1);\r\n\t\t\t// console.log('findNearStores', visibleStores);\r\n\t\t\treturn visibleStores;\r\n\t\t}\r\n\t}\r\n\r\n\tpanTo(item) {\r\n\t\tconst position = new google.maps.LatLng(item.latitude, item.longitude);\r\n\t\tthis.map.setZoom(ZOOM_LEVEL);\r\n\t\tthis.map.panTo(position);\r\n\t\tconst marker = this.markers.find(x => x.item === item);\r\n\t\tthis.setMarkerWindow(marker.position, marker.content);\r\n\t}\r\n\r\n\tsetMarkerWindow(position, content) {\r\n\t\tif (position) {\r\n\t\t\tconst markerWindow = this.markerWindow || new google.maps.InfoWindow({\r\n\t\t\t\tpixelOffset: new google.maps.Size(0, -35)\r\n\t\t\t});\r\n\t\t\tthis.markerWindow = markerWindow;\r\n\t\t\tmarkerWindow.setPosition(position);\r\n\t\t\tmarkerWindow.setContent(content);\r\n\t\t\tmarkerWindow.open(this.map);\r\n\t\t} else {\r\n\t\t\tthis.closeMarkerWindow();\r\n\t\t}\r\n\t}\r\n\r\n\tcloseMarkerWindow() {\r\n\t\tif (this.markerWindow) {\r\n\t\t\tthis.markerWindow.close();\r\n\t\t}\r\n\t}\r\n\r\n\tgetWorldBounds() {\r\n\t\treturn new google.maps.LatLngBounds(\r\n\t\t\tnew google.maps.LatLng(61, 60),\r\n\t\t\tnew google.maps.LatLng(-37, -92)\r\n\t\t);\r\n\t}\r\n\r\n\tgetItalyBounds() {\r\n\t\treturn new google.maps.LatLngBounds(\r\n\t\t\tnew google.maps.LatLng(46.4657567, 5.233972),\r\n\t\t\tnew google.maps.LatLng(36.8257773, 18.963541)\r\n\t\t);\r\n\t}\r\n}\r\n\r\nMapComponent.meta = {\r\n\tselector: '[map]',\r\n\tinputs: ['center', 'items'],\r\n};\r\n","/**\n * Copyright 2019 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { MarkerClusterer, ClusterAugmentedMarker } from \"./markerclusterer\";\nimport { ClusterIcon } from \"./cluster-icon\";\n\n/**\n * Creates a single cluster that manages a group of proximate markers.\n *  Used internally, do not call this constructor directly.\n */\nexport class Cluster {\n  private map_ = this.markerClusterer_.getMap() as google.maps.Map;\n  private minClusterSize_: number = this.markerClusterer_.getMinimumClusterSize();\n  private averageCenter_: boolean = this.markerClusterer_.getAverageCenter();\n  private markers_: ClusterAugmentedMarker[] = []; // TODO: type;\n  private center_: google.maps.LatLng = null;\n  private bounds_: google.maps.LatLngBounds = null;\n  private clusterIcon_ = new ClusterIcon(\n    this,\n    this.markerClusterer_.getStyles()\n  );\n\n  /**\n   *\n   * @param markerClusterer_ The `MarkerClusterer` object with which this\n   *  cluster is associated.\n   */\n  constructor(private markerClusterer_: MarkerClusterer) {}\n\n  /**\n   * Returns the number of markers managed by the cluster. You can call this from\n   * a `click`, `mouseover`, or `mouseout` event handler for the `MarkerClusterer` object.\n   *\n   * @return The number of markers in the cluster.\n   */\n  public getSize(): number {\n    return this.markers_.length;\n  }\n\n  /**\n   * Returns the array of markers managed by the cluster. You can call this from\n   * a `click`, `mouseover`, or `mouseout` event handler for the `MarkerClusterer` object.\n   *\n   * @return The array of markers in the cluster.\n   */\n  public getMarkers(): google.maps.Marker[] {\n    return this.markers_;\n  }\n\n  /**\n   * Returns the center of the cluster. You can call this from\n   * a `click`, `mouseover`, or `mouseout` event handler\n   * for the `MarkerClusterer` object.\n   *\n   * @return The center of the cluster.\n   */\n  public getCenter(): google.maps.LatLng {\n    return this.center_;\n  }\n\n  /**\n   * Returns the map with which the cluster is associated.\n   *\n   * @return The map.\n   * @ignore\n   */\n  public getMap(): google.maps.Map {\n    return this.map_;\n  }\n\n  /**\n   * Returns the `MarkerClusterer` object with which the cluster is associated.\n   *\n   * @return The associated marker clusterer.\n   * @ignore\n   */\n  public getMarkerClusterer(): MarkerClusterer {\n    return this.markerClusterer_;\n  }\n\n  /**\n   * Returns the bounds of the cluster.\n   *\n   * @return the cluster bounds.\n   * @ignore\n   */\n  public getBounds(): google.maps.LatLngBounds {\n    const bounds = new google.maps.LatLngBounds(this.center_, this.center_);\n    const markers = this.getMarkers();\n    for (let i = 0; i < markers.length; i++) {\n      bounds.extend(markers[i].getPosition());\n    }\n    return bounds;\n  }\n\n  /**\n   * Removes the cluster from the map.\n   *\n   * @ignore\n   */\n  public remove(): void {\n    this.clusterIcon_.setMap(null);\n    this.markers_ = [];\n    delete this.markers_;\n  }\n\n  /**\n   * Adds a marker to the cluster.\n   *\n   * @param marker The marker to be added.\n   * @return True if the marker was added.\n   * @ignore\n   */\n  public addMarker(\n    marker: google.maps.Marker & { isAdded?: boolean }\n  ): boolean {\n    if (this.isMarkerAlreadyAdded_(marker)) {\n      return false;\n    }\n\n    if (!this.center_) {\n      this.center_ = marker.getPosition();\n      this.calculateBounds_();\n    } else {\n      if (this.averageCenter_) {\n        const l = this.markers_.length + 1;\n        const lat =\n          (this.center_.lat() * (l - 1) + marker.getPosition().lat()) / l;\n        const lng =\n          (this.center_.lng() * (l - 1) + marker.getPosition().lng()) / l;\n        this.center_ = new google.maps.LatLng(lat, lng);\n        this.calculateBounds_();\n      }\n    }\n\n    marker.isAdded = true;\n    this.markers_.push(marker);\n\n    const mCount = this.markers_.length;\n    const mz = this.markerClusterer_.getMaxZoom();\n    if (mz !== null && this.map_.getZoom() > mz) {\n      // Zoomed in past max zoom, so show the marker.\n      if (marker.getMap() !== this.map_) {\n        marker.setMap(this.map_);\n      }\n    } else if (mCount < this.minClusterSize_) {\n      // Min cluster size not reached so show the marker.\n      if (marker.getMap() !== this.map_) {\n        marker.setMap(this.map_);\n      }\n    } else if (mCount === this.minClusterSize_) {\n      // Hide the markers that were showing.\n      for (let i = 0; i < mCount; i++) {\n        this.markers_[i].setMap(null);\n      }\n    } else {\n      marker.setMap(null);\n    }\n\n    return true;\n  }\n\n  /**\n   * Determines if a marker lies within the cluster's bounds.\n   *\n   * @param marker The marker to check.\n   * @return True if the marker lies in the bounds.\n   * @ignore\n   */\n  public isMarkerInClusterBounds(marker: google.maps.Marker): boolean {\n    return this.bounds_.contains(marker.getPosition());\n  }\n\n  /**\n   * Calculates the extended bounds of the cluster with the grid.\n   */\n  private calculateBounds_(): void {\n    const bounds = new google.maps.LatLngBounds(this.center_, this.center_);\n    this.bounds_ = this.markerClusterer_.getExtendedBounds(bounds);\n  }\n\n  /**\n   * Updates the cluster icon.\n   */\n  public updateIcon(): void {\n    const mCount = this.markers_.length;\n    const mz = this.markerClusterer_.getMaxZoom();\n\n    if (mz !== null && this.map_.getZoom() > mz) {\n      this.clusterIcon_.hide();\n      return;\n    }\n\n    if (mCount < this.minClusterSize_) {\n      // Min cluster size not yet reached.\n      this.clusterIcon_.hide();\n      return;\n    }\n\n    const numStyles = this.markerClusterer_.getStyles().length;\n    const sums = this.markerClusterer_.getCalculator()(\n      this.markers_,\n      numStyles\n    );\n    this.clusterIcon_.setCenter(this.center_);\n    this.clusterIcon_.useStyle(sums);\n    this.clusterIcon_.show();\n  }\n\n  /**\n   * Determines if a marker has already been added to the cluster.\n   *\n   * @param marker The marker to check.\n   * @return True if the marker has already been added.\n   */\n  private isMarkerAlreadyAdded_(marker: google.maps.Marker): boolean {\n    if (this.markers_.indexOf) {\n      return this.markers_.indexOf(marker) !== -1;\n    } else {\n      for (let i = 0; i < this.markers_.length; i++) {\n        if (marker === this.markers_[i]) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n}\n","/**\n * Copyright 2019 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @name MarkerClustererPlus for Google Maps V3\n * @author Gary Little\n * @fileoverview\n * The library creates and manages per-zoom-level clusters for large amounts of markers.\n * <p>\n * This is an enhanced V3 implementation of the V2 MarkerClusterer by Xiaoxi Wu. It is\n * based on the V3 MarkerClusterer port by Luke Mahe. MarkerClustererPlus was created\n * by Gary Little.\n * <p>\n * v2.0 release: MarkerClustererPlus v2.0 is backward compatible with MarkerClusterer v1.0. It\n *  adds support for the `ignoreHidden`, `title`, `batchSizeIE`,\n *  and `calculator` properties as well as support for four more events. It also allows\n *  greater control over the styling of the text that appears on the cluster marker. The\n *  documentation has been significantly improved and the overall code has been simplified and\n *  polished. Very large numbers of markers can now be managed without causing Javascript timeout\n *  errors on Internet Explorer. Note that the name of the `clusterclick` event has been\n *  deprecated. The new name is `click`, so please change your application code now.\n */\n\nimport { ClusterIconInfo, ClusterIconStyle } from \"./cluster-icon\";\n\nimport { Cluster } from \"./cluster\";\nimport { OverlayViewSafe } from \"./overlay-view-safe\";\n\n/**\n * @param text The text attribute of the cluster\n */\ntype AriaLabelFn = (text: string) => string;\n\nexport type Calculator = (\n  markers: google.maps.Marker[],\n  clusterIconStylesCount: number\n) => ClusterIconInfo;\n\nexport interface ClusterAugmentedMarker extends google.maps.Marker {\n  isAdded?: boolean;\n}\n\n/**\n * This event is fired on the {@link MarkerClusterer} instance when the `MarkerClusterer` stops clustering markers.\n *\n * Example:\n * ```typescript\n *  mc.addListener('clusteringend', (mc: MarkerClusterer) => {})\n * ```\n *\n * @param mc The MarkerClusterer whose markers are being clustered.\n * @event clusteringend\n */\nexport declare function clusteringend(mc: MarkerClusterer): void;\n\n/**\n * This event is fired on the {@link MarkerClusterer} instance when the `MarkerClusterer` begins clustering markers.\n *\n * Example:\n * ```typescript\n *  mc.addListener('clusteringbegin', (mc: MarkerClusterer) => {})\n * ```\n *\n * @param mc The MarkerClusterer whose markers are being clustered.\n * @event clusteringbegin\n */\nexport declare function clusteringbegin(mc: MarkerClusterer): void;\n\n/**\n * Optional parameter passed to the {@link MarkerClusterer} constructor.\n */\nexport interface MarkerClustererOptions {\n  /**\n   * The grid size of a cluster in pixels. The grid is a square.\n   *\n   * @default `60`\n   */\n  gridSize?: number;\n  /**\n   * The maximum zoom level at which clustering is enabled or\n   * `null` if clustering is to be enabled at all zoom levels.\n   *\n   * @default `null`\n   */\n  maxZoom?: number;\n\n  /**\n   * Whether to zoom the map when a cluster marker is\n   * clicked. You may want to set this to `false` if you have installed a handler\n   * for the `click` event and it deals with zooming on its own.\n   *\n   * @default `true`\n   */\n  zoomOnClick?: boolean;\n  /***\n   * Whether the position of a cluster marker should be\n   * the average position of all markers in the cluster. If set to `false`, the\n   * cluster marker is positioned at the location of the first marker added to the cluster.\n   *\n   * @default `false`\n   */\n  averageCenter?: boolean;\n  /**\n   * The minimum number of markers needed in a cluster\n   * before the markers are hidden and a cluster marker appears.\n   *\n   * @default `2`\n   */\n  minimumClusterSize?: number;\n\n  /**\n   *  the z-index of a cluster.\n   *\n   *  @default `google.maps.Marker.MAX_ZINDEX + 1`\n   */\n  zIndex?: number;\n\n  /**\n   * Whether to ignore hidden markers in clusters. You\n   * may want to set this to `true` to ensure that hidden markers are not included\n   * in the marker count that appears on a cluster marker (this count is the value of the\n   * `text` property of the result returned by the default  {@link calculator}).\n   * If set to `true` and you change the visibility of a marker being clustered, be\n   * sure to also call {@link MarkerClusterer#repaint()}.\n   *\n   * @default `false`\n   */\n  ignoreHidden?: boolean;\n  /**\n   * The tooltip to display when the mouse moves over a cluster\n   * marker. (Alternatively, you can use a custom `calculator` function to specify a\n   * different tooltip for each cluster marker.)\n   *\n   * @default `\"\"`\n   */\n  title?: string;\n  /**\n   * The function used to determine\n   * the text to be displayed on a cluster marker and the index indicating which style to use\n   * for the cluster marker. The input parameters for the function are (1) the array of markers\n   * represented by a cluster marker and (2) the number of cluster icon styles. It returns a\n   * {@link ClusterIconInfo} object. The default `calculator` returns a\n   * `text` property which is the number of markers in the cluster and an\n   * `index` property which is one higher than the lowest integer such that\n   * `10^i` exceeds the number of markers in the cluster, or the size of the styles\n   * array, whichever is less. The `styles` array element used has an index of\n   * `index` minus 1. For example, the default `calculator` returns a\n   * `text` value of `\"125\"` and an `index` of `3`\n   * for a cluster icon representing 125 markers so the element used in the `styles`\n   * array is `2`. A `calculator` may also return a `title`\n   * property that contains the text of the tooltip to be used for the cluster marker. If\n   * `title` is not defined, the tooltip is set to the value of the `title`\n   * property for the MarkerClusterer.\n   *\n   * @default {@link MarkerClusterer.CALCULATOR}\n   */\n  calculator?: Calculator;\n  /**\n   * The name of the CSS class defining general styles\n   * for the cluster markers. Use this class to define CSS styles that are not set up by the code\n   * that processes the `styles` array.\n   *\n   * @default `\"cluster\"`\n   */\n  clusterClass?: string;\n  /**\n   * An array of {@link ClusterIconStyle} elements defining the styles\n   * of the cluster markers to be used. The element to be used to style a given cluster marker\n   * is determined by the function defined by the `calculator` property.\n   * The default is an array of {@link ClusterIconStyle} elements whose properties are derived\n   * from the values for `imagePath`, `imageExtension`, and `imageSizes`.\n   *\n   * @default `styles`\n   */\n  styles?: ClusterIconStyle[];\n  /**\n   * Whether to allow the use of cluster icons that\n   * have sizes that are some multiple (typically double) of their actual display size. Icons such\n   * as these look better when viewed on high-resolution monitors such as Apple's Retina displays.\n   * Note: if this property is `true`, sprites cannot be used as cluster icons.\n   *\n   * @default `false`\n   */\n  enableRetinaIcons?: boolean;\n  /**\n   * Set this property to the number of markers to be processed in a single batch when using\n   * a browser other than Internet Explorer (for Internet Explorer, use the batchSizeIE property instead).\n   *\n   * @default `MarkerClusterer.BATCH_SIZE`\n   */\n  batchSize?: number;\n  /**\n   * When Internet Explorer is\n   * being used, markers are processed in several batches with a small delay inserted between\n   * each batch in an attempt to avoid Javascript timeout errors. Set this property to the\n   * number of markers to be processed in a single batch; select as high a number as you can\n   * without causing a timeout error in the browser. This number might need to be as low as 100\n   * if 15,000 markers are being managed, for example.\n   *\n   * @default `MarkerClusterer.BATCH_SIZE_IE`\n   */\n  batchSizeIE?: number;\n  /**\n   * The full URL of the root name of the group of image files to use for cluster icons.\n   * The complete file name is of the form `imagePath`n.`imageExtension`\n   * where n is the image file number (1, 2, etc.).\n   *\n   * @default `MarkerClusterer.IMAGE_PATH`\n   */\n  imagePath?: string;\n  /**\n   * The extension name for the cluster icon image files (e.g., `\"png\"` or\n   * `\"jpg\"`).\n   *\n   * @default `MarkerClusterer.IMAGE_EXTENSION`\n   */\n  imageExtension?: string;\n  /**\n   * An array of numbers containing the widths of the group of\n   * `imagePath`n.`imageExtension` image files.\n   * (The images are assumed to be square.)\n   *\n   * @default `MarkerClusterer.IMAGE_SIZES`\n   */\n  imageSizes?: number[];\n  /**\n   * A function to take the text attribute associated with the cluster and output a string to attach an\n   * ariaLabel to the cluster\n   */\n  ariaLabelFn?: AriaLabelFn;\n}\n\n/**\n * @ignore\n */\nconst getOption = <T, K extends keyof T>(\n  options: T,\n  prop: K,\n  def: T[K]\n): T[K] => {\n  if (options[prop] !== undefined) {\n    return options[prop];\n  } else {\n    return def;\n  }\n};\n\nexport class MarkerClusterer extends OverlayViewSafe {\n  /**\n   * The number of markers to process in one batch.\n   */\n  static BATCH_SIZE = 2000;\n\n  /**\n   * The number of markers to process in one batch (IE only).\n   */\n  static BATCH_SIZE_IE = 500;\n\n  /**\n   * The default root name for the marker cluster images.\n   */\n  static IMAGE_PATH = \"../images/m\";\n\n  /**\n   * The default extension name for the marker cluster images.\n   */\n  static IMAGE_EXTENSION = \"png\";\n\n  /**\n   * The default array of sizes for the marker cluster images.\n   */\n  static IMAGE_SIZES: number[] = [53, 56, 66, 78, 90];\n\n  private markers_: ClusterAugmentedMarker[] = [];\n  private clusters_: Cluster[] = [];\n  private listeners_: google.maps.MapsEventListener[] = [];\n\n  private activeMap_: google.maps.Map = null;\n  private ready_ = false;\n\n  public ariaLabelFn = this.options.ariaLabelFn || ((): string => \"\");\n\n  private zIndex_ =\n    this.options.zIndex || Number(google.maps.Marker.MAX_ZINDEX) + 1;\n  private gridSize_ = this.options.gridSize || 60;\n  private minClusterSize_ = this.options.minimumClusterSize || 2;\n  private maxZoom_ = this.options.maxZoom || null;\n  private styles_: ClusterIconStyle[] = this.options.styles || [];\n  private title_ = this.options.title || \"\";\n\n  private zoomOnClick_ = getOption(this.options, \"zoomOnClick\", true);\n  private averageCenter_ = getOption(this.options, \"averageCenter\", false);\n\n  private ignoreHidden_ = getOption(this.options, \"ignoreHidden\", false);\n  private enableRetinaIcons_ = getOption(\n    this.options,\n    \"enableRetinaIcons\",\n    false\n  );\n\n  private imagePath_ = this.options.imagePath || MarkerClusterer.IMAGE_PATH;\n  private imageExtension_ =\n    this.options.imageExtension || MarkerClusterer.IMAGE_EXTENSION;\n  private imageSizes_ = this.options.imageSizes || MarkerClusterer.IMAGE_SIZES;\n  private calculator_ = this.options.calculator || MarkerClusterer.CALCULATOR;\n  private batchSize_ = this.options.batchSize || MarkerClusterer.BATCH_SIZE;\n  private batchSizeIE_ =\n    this.options.batchSizeIE || MarkerClusterer.BATCH_SIZE_IE;\n  private clusterClass_ = this.options.clusterClass || \"cluster\";\n\n  private prevZoom_: number;\n  private timerRefStatic: number;\n\n  /**\n   * Creates a MarkerClusterer object with the options specified in {@link MarkerClustererOptions}.\n   * @param map The Google map to attach to.\n   * @param markers The markers to be added to the cluster.\n   * @param options The optional parameters.\n   */\n  constructor(\n    map: google.maps.Map,\n    markers: google.maps.Marker[] = [],\n    private options: MarkerClustererOptions = {}\n  ) {\n    super();\n\n    if (navigator.userAgent.toLowerCase().indexOf(\"msie\") !== -1) {\n      // Try to avoid IE timeout when processing a huge number of markers:\n      this.batchSize_ = this.batchSizeIE_;\n    }\n\n    this.setupStyles_();\n\n    this.addMarkers(markers, true);\n    this.setMap(map); // Note: this causes onAdd to be called\n  }\n\n  /**\n   * Implementation of the onAdd interface method.\n   * @ignore\n   */\n  onAdd(): void {\n    this.activeMap_ = this.getMap() as google.maps.Map;\n    this.ready_ = true;\n\n    this.repaint();\n\n    this.prevZoom_ = this.getMap().getZoom();\n\n    // Add the map event listeners\n    this.listeners_ = [\n      google.maps.event.addListener(this.getMap(), \"zoom_changed\", () => {\n        const map: google.maps.Map & {\n          minZoom: number;\n          maxZoom: number;\n          mapTypes: { [type: string]: google.maps.MapType };\n        } = this.getMap() as any; // eslint-disable-line @typescript-eslint/no-explicit-any\n\n        // Fix for bug #407\n        // Determines map type and prevents illegal zoom levels\n        const minZoom = map.minZoom || 0;\n        const maxZoom = Math.min(\n          map.maxZoom || 100,\n          map.mapTypes[map.getMapTypeId()].maxZoom\n        );\n        const zoom = Math.min(\n          Math.max(this.getMap().getZoom(), minZoom),\n          maxZoom\n        );\n\n        if (this.prevZoom_ != zoom) {\n          this.prevZoom_ = zoom;\n          this.resetViewport_(false);\n        }\n      }),\n      google.maps.event.addListener(this.getMap(), \"idle\", () => {\n        this.redraw_();\n      }),\n    ];\n  }\n\n  /**\n   * Implementation of the onRemove interface method.\n   * Removes map event listeners and all cluster icons from the DOM.\n   * All managed markers are also put back on the map.\n   * @ignore\n   */\n  onRemove(): void {\n    // Put all the managed markers back on the map:\n    for (let i = 0; i < this.markers_.length; i++) {\n      if (this.markers_[i].getMap() !== this.activeMap_) {\n        this.markers_[i].setMap(this.activeMap_);\n      }\n    }\n\n    // Remove all clusters:\n    for (let i = 0; i < this.clusters_.length; i++) {\n      this.clusters_[i].remove();\n    }\n    this.clusters_ = [];\n\n    // Remove map event listeners:\n    for (let i = 0; i < this.listeners_.length; i++) {\n      google.maps.event.removeListener(this.listeners_[i]);\n    }\n    this.listeners_ = [];\n\n    this.activeMap_ = null;\n    this.ready_ = false;\n  }\n\n  /**\n   * Implementation of the draw interface method.\n   * @ignore\n   */\n  draw(): void {}\n\n  /**\n   * Sets up the styles object.\n   */\n  private setupStyles_(): void {\n    if (this.styles_.length > 0) {\n      return;\n    }\n\n    for (let i = 0; i < this.imageSizes_.length; i++) {\n      const size = this.imageSizes_[i];\n      this.styles_.push(\n        MarkerClusterer.withDefaultStyle({\n          url: this.imagePath_ + (i + 1) + \".\" + this.imageExtension_,\n          height: size,\n          width: size,\n        })\n      );\n    }\n  }\n\n  /**\n   *  Fits the map to the bounds of the markers managed by the clusterer.\n   */\n  fitMapToMarkers(padding: number | google.maps.Padding): void {\n    const markers = this.getMarkers();\n    const bounds = new google.maps.LatLngBounds();\n    for (let i = 0; i < markers.length; i++) {\n      // March 3, 2018: Bug fix -- honor the ignoreHidden property\n      if (markers[i].getVisible() || !this.getIgnoreHidden()) {\n        bounds.extend(markers[i].getPosition());\n      }\n    }\n\n    (this.getMap() as google.maps.Map).fitBounds(bounds, padding);\n  }\n\n  /**\n   * Returns the value of the `gridSize` property.\n   *\n   * @return The grid size.\n   */\n  getGridSize(): number {\n    return this.gridSize_;\n  }\n\n  /**\n   * Sets the value of the `gridSize` property.\n   *\n   * @param gridSize The grid size.\n   */\n  setGridSize(gridSize: number): void {\n    this.gridSize_ = gridSize;\n  }\n\n  /**\n   * Returns the value of the `minimumClusterSize` property.\n   *\n   * @return The minimum cluster size.\n   */\n  getMinimumClusterSize(): number {\n    return this.minClusterSize_;\n  }\n\n  /**\n   * Sets the value of the `minimumClusterSize` property.\n   *\n   * @param minimumClusterSize The minimum cluster size.\n   */\n  setMinimumClusterSize(minimumClusterSize: number): void {\n    this.minClusterSize_ = minimumClusterSize;\n  }\n\n  /**\n   *  Returns the value of the `maxZoom` property.\n   *\n   *  @return The maximum zoom level.\n   */\n  getMaxZoom(): number {\n    return this.maxZoom_;\n  }\n\n  /**\n   *  Sets the value of the `maxZoom` property.\n   *\n   *  @param maxZoom The maximum zoom level.\n   */\n  setMaxZoom(maxZoom: number): void {\n    this.maxZoom_ = maxZoom;\n  }\n\n  getZIndex(): number {\n    return this.zIndex_;\n  }\n\n  setZIndex(zIndex: number): void {\n    this.zIndex_ = zIndex;\n  }\n\n  /**\n   *  Returns the value of the `styles` property.\n   *\n   *  @return The array of styles defining the cluster markers to be used.\n   */\n  getStyles(): ClusterIconStyle[] {\n    return this.styles_;\n  }\n\n  /**\n   *  Sets the value of the `styles` property.\n   *\n   *  @param styles The array of styles to use.\n   */\n  setStyles(styles: ClusterIconStyle[]): void {\n    this.styles_ = styles;\n  }\n\n  /**\n   * Returns the value of the `title` property.\n   *\n   * @return The content of the title text.\n   */\n  getTitle(): string {\n    return this.title_;\n  }\n\n  /**\n   *  Sets the value of the `title` property.\n   *\n   *  @param title The value of the title property.\n   */\n  setTitle(title: string): void {\n    this.title_ = title;\n  }\n\n  /**\n   * Returns the value of the `zoomOnClick` property.\n   *\n   * @return True if zoomOnClick property is set.\n   */\n  getZoomOnClick(): boolean {\n    return this.zoomOnClick_;\n  }\n\n  /**\n   *  Sets the value of the `zoomOnClick` property.\n   *\n   *  @param zoomOnClick The value of the zoomOnClick property.\n   */\n  setZoomOnClick(zoomOnClick: boolean): void {\n    this.zoomOnClick_ = zoomOnClick;\n  }\n\n  /**\n   * Returns the value of the `averageCenter` property.\n   *\n   * @return True if averageCenter property is set.\n   */\n  getAverageCenter(): boolean {\n    return this.averageCenter_;\n  }\n\n  /**\n   *  Sets the value of the `averageCenter` property.\n   *\n   *  @param averageCenter The value of the averageCenter property.\n   */\n  setAverageCenter(averageCenter: boolean): void {\n    this.averageCenter_ = averageCenter;\n  }\n\n  /**\n   * Returns the value of the `ignoreHidden` property.\n   *\n   * @return True if ignoreHidden property is set.\n   */\n  getIgnoreHidden(): boolean {\n    return this.ignoreHidden_;\n  }\n\n  /**\n   *  Sets the value of the `ignoreHidden` property.\n   *\n   *  @param ignoreHidden The value of the ignoreHidden property.\n   */\n  setIgnoreHidden(ignoreHidden: boolean): void {\n    this.ignoreHidden_ = ignoreHidden;\n  }\n\n  /**\n   * Returns the value of the `enableRetinaIcons` property.\n   *\n   * @return True if enableRetinaIcons property is set.\n   */\n  getEnableRetinaIcons(): boolean {\n    return this.enableRetinaIcons_;\n  }\n\n  /**\n   *  Sets the value of the `enableRetinaIcons` property.\n   *\n   *  @param enableRetinaIcons The value of the enableRetinaIcons property.\n   */\n  setEnableRetinaIcons(enableRetinaIcons: boolean): void {\n    this.enableRetinaIcons_ = enableRetinaIcons;\n  }\n\n  /**\n   * Returns the value of the `imageExtension` property.\n   *\n   * @return The value of the imageExtension property.\n   */\n  getImageExtension(): string {\n    return this.imageExtension_;\n  }\n\n  /**\n   *  Sets the value of the `imageExtension` property.\n   *\n   *  @param imageExtension The value of the imageExtension property.\n   */\n  setImageExtension(imageExtension: string): void {\n    this.imageExtension_ = imageExtension;\n  }\n\n  /**\n   * Returns the value of the `imagePath` property.\n   *\n   * @return The value of the imagePath property.\n   */\n  getImagePath(): string {\n    return this.imagePath_;\n  }\n\n  /**\n   *  Sets the value of the `imagePath` property.\n   *\n   *  @param imagePath The value of the imagePath property.\n   */\n  setImagePath(imagePath: string): void {\n    this.imagePath_ = imagePath;\n  }\n\n  /**\n   * Returns the value of the `imageSizes` property.\n   *\n   * @return The value of the imageSizes property.\n   */\n  getImageSizes(): number[] {\n    return this.imageSizes_;\n  }\n\n  /**\n   *  Sets the value of the `imageSizes` property.\n   *\n   *  @param imageSizes The value of the imageSizes property.\n   */\n  setImageSizes(imageSizes: number[]): void {\n    this.imageSizes_ = imageSizes;\n  }\n\n  /**\n   * Returns the value of the `calculator` property.\n   *\n   * @return the value of the calculator property.\n   */\n  getCalculator(): Calculator {\n    return this.calculator_;\n  }\n\n  /**\n   * Sets the value of the `calculator` property.\n   *\n   * @param calculator The value of the calculator property.\n   */\n  setCalculator(calculator: Calculator): void {\n    this.calculator_ = calculator;\n  }\n\n  /**\n   * Returns the value of the `batchSizeIE` property.\n   *\n   * @return the value of the batchSizeIE property.\n   */\n  getBatchSizeIE(): number {\n    return this.batchSizeIE_;\n  }\n\n  /**\n   * Sets the value of the `batchSizeIE` property.\n   *\n   *  @param batchSizeIE The value of the batchSizeIE property.\n   */\n  setBatchSizeIE(batchSizeIE: number): void {\n    this.batchSizeIE_ = batchSizeIE;\n  }\n\n  /**\n   * Returns the value of the `clusterClass` property.\n   *\n   * @return the value of the clusterClass property.\n   */\n  getClusterClass(): string {\n    return this.clusterClass_;\n  }\n\n  /**\n   * Sets the value of the `clusterClass` property.\n   *\n   *  @param clusterClass The value of the clusterClass property.\n   */\n  setClusterClass(clusterClass: string): void {\n    this.clusterClass_ = clusterClass;\n  }\n\n  /**\n   *  Returns the array of markers managed by the clusterer.\n   *\n   *  @return The array of markers managed by the clusterer.\n   */\n  getMarkers(): google.maps.Marker[] {\n    return this.markers_;\n  }\n\n  /**\n   *  Returns the number of markers managed by the clusterer.\n   *\n   *  @return The number of markers.\n   */\n  getTotalMarkers(): number {\n    return this.markers_.length;\n  }\n\n  /**\n   * Returns the current array of clusters formed by the clusterer.\n   *\n   * @return The array of clusters formed by the clusterer.\n   */\n  getClusters(): Cluster[] {\n    return this.clusters_;\n  }\n\n  /**\n   * Returns the number of clusters formed by the clusterer.\n   *\n   * @return The number of clusters formed by the clusterer.\n   */\n  getTotalClusters(): number {\n    return this.clusters_.length;\n  }\n\n  /**\n   * Adds a marker to the clusterer. The clusters are redrawn unless\n   *  `nodraw` is set to `true`.\n   *\n   * @param marker The marker to add.\n   * @param nodraw Set to `true` to prevent redrawing.\n   */\n  addMarker(marker: google.maps.Marker, nodraw?: boolean): void {\n    this.pushMarkerTo_(marker);\n    if (!nodraw) {\n      this.redraw_();\n    }\n  }\n\n  /**\n   * Adds an array of markers to the clusterer. The clusters are redrawn unless\n   *  `nodraw` is set to `true`.\n   *\n   * @param markers The markers to add.\n   * @param nodraw Set to `true` to prevent redrawing.\n   */\n  addMarkers(markers: google.maps.Marker[], nodraw?: boolean): void {\n    for (const key in markers) {\n      if (Object.prototype.hasOwnProperty.call(markers, key)) {\n        this.pushMarkerTo_(markers[key]);\n      }\n    }\n    if (!nodraw) {\n      this.redraw_();\n    }\n  }\n\n  /**\n   * Pushes a marker to the clusterer.\n   *\n   * @param marker The marker to add.\n   */\n  private pushMarkerTo_(\n    marker: google.maps.Marker & { isAdded?: boolean }\n  ): void {\n    // If the marker is draggable add a listener so we can update the clusters on the dragend:\n    if (marker.getDraggable()) {\n      google.maps.event.addListener(marker, \"dragend\", () => {\n        if (this.ready_) {\n          marker.isAdded = false;\n          this.repaint();\n        }\n      });\n    }\n    marker.isAdded = false;\n    this.markers_.push(marker);\n  }\n\n  /**\n   * Removes a marker from the cluster.  The clusters are redrawn unless\n   *  `nodraw` is set to `true`. Returns `true` if the\n   *  marker was removed from the clusterer.\n   *\n   * @param marker The marker to remove.\n   * @param nodraw Set to `true` to prevent redrawing.\n   * @return True if the marker was removed from the clusterer.\n   */\n  removeMarker(marker: google.maps.Marker, nodraw?: boolean): boolean {\n    const removed = this.removeMarker_(marker);\n\n    if (!nodraw && removed) {\n      this.repaint();\n    }\n\n    return removed;\n  }\n\n  /**\n   * Removes an array of markers from the cluster. The clusters are redrawn unless\n   *  `nodraw` is set to `true`. Returns `true` if markers were removed from the clusterer.\n   *\n   * @param markers The markers to remove.\n   * @param nodraw Set to `true` to prevent redrawing.\n   * @return True if markers were removed from the clusterer.\n   */\n  removeMarkers(markers: google.maps.Marker[], nodraw?: boolean): boolean {\n    let removed = false;\n\n    for (let i = 0; i < markers.length; i++) {\n      const r = this.removeMarker_(markers[i]);\n      removed = removed || r;\n    }\n\n    if (!nodraw && removed) {\n      this.repaint();\n    }\n\n    return removed;\n  }\n\n  /**\n   * Removes a marker and returns true if removed, false if not.\n   *\n   * @param marker The marker to remove\n   * @return Whether the marker was removed or not\n   */\n  private removeMarker_(marker: google.maps.Marker): boolean {\n    let index = -1;\n    if (this.markers_.indexOf) {\n      index = this.markers_.indexOf(marker);\n    } else {\n      for (let i = 0; i < this.markers_.length; i++) {\n        if (marker === this.markers_[i]) {\n          index = i;\n          break;\n        }\n      }\n    }\n\n    if (index === -1) {\n      // Marker is not in our list of markers, so do nothing:\n      return false;\n    }\n\n    marker.setMap(null);\n    this.markers_.splice(index, 1); // Remove the marker from the list of managed markers\n    return true;\n  }\n\n  /**\n   * Removes all clusters and markers from the map and also removes all markers\n   *  managed by the clusterer.\n   */\n  clearMarkers(): void {\n    this.resetViewport_(true);\n    this.markers_ = [];\n  }\n\n  /**\n   * Recalculates and redraws all the marker clusters from scratch.\n   *  Call this after changing any properties.\n   */\n  repaint(): void {\n    const oldClusters = this.clusters_.slice();\n    this.clusters_ = [];\n    this.resetViewport_(false);\n    this.redraw_();\n\n    // Remove the old clusters.\n    // Do it in a timeout to prevent blinking effect.\n    setTimeout(() => {\n      for (let i = 0; i < oldClusters.length; i++) {\n        oldClusters[i].remove();\n      }\n    }, 0);\n  }\n\n  /**\n   * Returns the current bounds extended by the grid size.\n   *\n   * @param bounds The bounds to extend.\n   * @return The extended bounds.\n   * @ignore\n   */\n  getExtendedBounds(\n    bounds: google.maps.LatLngBounds\n  ): google.maps.LatLngBounds {\n    const projection = this.getProjection();\n\n    // Turn the bounds into latlng.\n    const tr = new google.maps.LatLng(\n      bounds.getNorthEast().lat(),\n      bounds.getNorthEast().lng()\n    );\n    const bl = new google.maps.LatLng(\n      bounds.getSouthWest().lat(),\n      bounds.getSouthWest().lng()\n    );\n\n    // Convert the points to pixels and the extend out by the grid size.\n    const trPix = projection.fromLatLngToDivPixel(tr);\n    trPix.x += this.gridSize_;\n    trPix.y -= this.gridSize_;\n\n    const blPix = projection.fromLatLngToDivPixel(bl);\n    blPix.x -= this.gridSize_;\n    blPix.y += this.gridSize_;\n\n    // Convert the pixel points back to LatLng\n    const ne = projection.fromDivPixelToLatLng(trPix);\n    const sw = projection.fromDivPixelToLatLng(blPix);\n\n    // Extend the bounds to contain the new bounds.\n    bounds.extend(ne);\n    bounds.extend(sw);\n\n    return bounds;\n  }\n\n  /**\n   * Redraws all the clusters.\n   */\n  private redraw_(): void {\n    this.createClusters_(0);\n  }\n\n  /**\n   * Removes all clusters from the map. The markers are also removed from the map\n   *  if `hide` is set to `true`.\n   *\n   * @param hide Set to `true` to also remove the markers from the map.\n   */\n  private resetViewport_(hide?: boolean): void {\n    // Remove all the clusters\n    for (let i = 0; i < this.clusters_.length; i++) {\n      this.clusters_[i].remove();\n    }\n    this.clusters_ = [];\n\n    // Reset the markers to not be added and to be removed from the map.\n    for (let i = 0; i < this.markers_.length; i++) {\n      const marker = this.markers_[i];\n      marker.isAdded = false;\n      if (hide) {\n        marker.setMap(null);\n      }\n    }\n  }\n\n  /**\n   * Calculates the distance between two latlng locations in km.\n   *\n   * @param p1 The first lat lng point.\n   * @param p2 The second lat lng point.\n   * @return The distance between the two points in km.\n   * @link http://www.movable-type.co.uk/scripts/latlong.html\n   */\n  private distanceBetweenPoints_(\n    p1: google.maps.LatLng,\n    p2: google.maps.LatLng\n  ): number {\n    const R = 6371; // Radius of the Earth in km\n    const dLat = ((p2.lat() - p1.lat()) * Math.PI) / 180;\n    const dLon = ((p2.lng() - p1.lng()) * Math.PI) / 180;\n    const a =\n      Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n      Math.cos((p1.lat() * Math.PI) / 180) *\n        Math.cos((p2.lat() * Math.PI) / 180) *\n        Math.sin(dLon / 2) *\n        Math.sin(dLon / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c;\n  }\n\n  /**\n   * Determines if a marker is contained in a bounds.\n   *\n   * @param marker The marker to check.\n   * @param bounds The bounds to check against.\n   * @return True if the marker is in the bounds.\n   */\n  private isMarkerInBounds_(\n    marker: google.maps.Marker,\n    bounds: google.maps.LatLngBounds\n  ): boolean {\n    return bounds.contains(marker.getPosition());\n  }\n\n  /**\n   * Adds a marker to a cluster, or creates a new cluster.\n   *\n   * @param marker The marker to add.\n   */\n  private addToClosestCluster_(marker: google.maps.Marker): void {\n    let distance = 40000; // Some large number\n    let clusterToAddTo = null;\n    for (let i = 0; i < this.clusters_.length; i++) {\n      const cluster = this.clusters_[i];\n      const center = cluster.getCenter();\n      if (center) {\n        const d = this.distanceBetweenPoints_(center, marker.getPosition());\n        if (d < distance) {\n          distance = d;\n          clusterToAddTo = cluster;\n        }\n      }\n    }\n\n    if (clusterToAddTo && clusterToAddTo.isMarkerInClusterBounds(marker)) {\n      clusterToAddTo.addMarker(marker);\n    } else {\n      const cluster = new Cluster(this);\n      cluster.addMarker(marker);\n      this.clusters_.push(cluster);\n    }\n  }\n\n  /**\n   * Creates the clusters. This is done in batches to avoid timeout errors\n   *  in some browsers when there is a huge number of markers.\n   *\n   * @param iFirst The index of the first marker in the batch of\n   *  markers to be added to clusters.\n   */\n  private createClusters_(iFirst: number): void {\n    if (!this.ready_) {\n      return;\n    }\n\n    // Cancel previous batch processing if we're working on the first batch:\n    if (iFirst === 0) {\n      google.maps.event.trigger(this, \"clusteringbegin\", this);\n\n      if (typeof this.timerRefStatic !== \"undefined\") {\n        clearTimeout(this.timerRefStatic);\n        delete this.timerRefStatic;\n      }\n    }\n\n    // Get our current map view bounds.\n    // Create a new bounds object so we don't affect the map.\n    //\n    // See Comments 9 & 11 on Issue 3651 relating to this workaround for a Google Maps bug:\n    let mapBounds: google.maps.LatLngBounds;\n\n    if (this.getMap().getZoom() > 3) {\n      mapBounds = new google.maps.LatLngBounds(\n        (this.getMap() as google.maps.Map).getBounds().getSouthWest(),\n        (this.getMap() as google.maps.Map).getBounds().getNorthEast()\n      );\n    } else {\n      mapBounds = new google.maps.LatLngBounds(\n        new google.maps.LatLng(85.02070771743472, -178.48388434375),\n        new google.maps.LatLng(-85.08136444384544, 178.00048865625)\n      );\n    }\n    const bounds = this.getExtendedBounds(mapBounds);\n\n    const iLast = Math.min(iFirst + this.batchSize_, this.markers_.length);\n\n    for (let i = iFirst; i < iLast; i++) {\n      const marker = this.markers_[i];\n      if (!marker.isAdded && this.isMarkerInBounds_(marker, bounds)) {\n        if (\n          !this.ignoreHidden_ ||\n          (this.ignoreHidden_ && marker.getVisible())\n        ) {\n          this.addToClosestCluster_(marker);\n        }\n      }\n    }\n\n    if (iLast < this.markers_.length) {\n      this.timerRefStatic = window.setTimeout(() => {\n        this.createClusters_(iLast);\n      }, 0);\n    } else {\n      delete this.timerRefStatic;\n      google.maps.event.trigger(this, \"clusteringend\", this);\n\n      for (let i = 0; i < this.clusters_.length; i++) {\n        this.clusters_[i].updateIcon();\n      }\n    }\n  }\n\n  /**\n   * The default function for determining the label text and style\n   * for a cluster icon.\n   *\n   * @param markers The array of markers represented by the cluster.\n   * @param numStyles The number of marker styles available.\n   * @return The information resource for the cluster.\n   */\n  static CALCULATOR(\n    markers: google.maps.Marker[],\n    numStyles: number\n  ): ClusterIconInfo {\n    let index = 0;\n    const count: number = markers.length;\n\n    let dv = count;\n    while (dv !== 0) {\n      dv = Math.floor(dv / 10);\n      index++;\n    }\n\n    index = Math.min(index, numStyles);\n    return {\n      text: count.toString(),\n      index: index,\n      title: \"\",\n    };\n  }\n\n  /**\n   * Generates default styles augmented with user passed values.\n   * Useful when you want to override some default values but keep untouched\n   *\n   * @param overrides override default values\n   */\n  static withDefaultStyle(overrides: ClusterIconStyle): ClusterIconStyle {\n    return {\n      textColor: \"black\",\n      textSize: 11,\n      textDecoration: \"none\",\n      textLineHeight: overrides.height,\n      fontWeight: \"bold\",\n      fontStyle: \"normal\",\n      fontFamily: \"Arial,sans-serif\",\n      backgroundPosition: \"0 0\",\n      ...overrides,\n    };\n  }\n}\n","export const MAP_STYLE = [\r\n\t{\r\n\t\t\"featureType\": \"administrative\",\r\n\t\t\"elementType\": \"labels.text.fill\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"color\": \"#444444\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"landscape\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"color\": \"#f2f2f2\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"poi\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"visibility\": \"off\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"road\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"saturation\": -100\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"lightness\": 45\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"road.highway\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"visibility\": \"simplified\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"road.arterial\",\r\n\t\t\"elementType\": \"labels.icon\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"visibility\": \"off\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"transit\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"visibility\": \"off\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"water\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"color\": \"#e2e0df\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"visibility\": \"on\"\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n];\r\n","import { SwiperDirective } from '../../common/swiper/swiper.directive';\r\n\r\nexport class SwiperGalleryDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 'auto',\r\n\t\t\tspaceBetween: 40,\r\n\t\t\tspeed: 600,\r\n\t\t\tcenteredSlides: true,\r\n\t\t\tloop: true,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t\t// console.log('SwiperGalleryDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperGalleryDirective.meta = {\r\n\tselector: '[swiper-gallery]'\r\n};\r\n","import { SwiperDirective } from '../../common/swiper/swiper.directive';\r\n\r\nexport class SwiperHomepageDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1,\r\n\t\t\tspaceBetween: 0,\r\n\t\t\tspeed: 600,\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t\t// console.log('SwiperHomepageDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperHomepageDirective.meta = {\r\n\tselector: '[swiper-homepage]'\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { SwiperDirective } from '../../common/swiper/swiper.directive';\r\n\r\nexport class SwiperNewsPropositionDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1,\r\n\t\t\tspaceBetween: 30,\r\n\t\t\tbreakpoints: {\r\n\t\t\t\t768: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 40\r\n\t\t\t\t},\r\n\t\t\t\t1024: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 50\r\n\t\t\t\t},\r\n\t\t\t\t1440: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 60\r\n\t\t\t\t},\r\n\t\t\t\t1920: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 70\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tspeed: 600,\r\n\t\t\tcenteredSlides: false,\r\n\t\t\tloop: false,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = node.querySelector('.swiper-container');\r\n\t\tthis.init_(target);\r\n\t\t// console.log('SwiperNewsPropositionDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperNewsPropositionDirective.meta = {\r\n\tselector: '[swiper-news-proposition]'\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { SwiperDirective } from '../../common/swiper/swiper.directive';\r\n\r\nexport class SwiperProductsPropositionDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1.5,\r\n\t\t\tspaceBetween: 30,\r\n\t\t\tbreakpoints: {\r\n\t\t\t\t768: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 40\r\n\t\t\t\t},\r\n\t\t\t\t1024: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 50\r\n\t\t\t\t},\r\n\t\t\t\t1440: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 60\r\n\t\t\t\t},\r\n\t\t\t\t1920: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 70\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tspeed: 600,\r\n\t\t\tcenteredSlides: false,\r\n\t\t\tloop: false,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = node.querySelector('.swiper-container');\r\n\t\tthis.init_(target);\r\n\t\t// console.log('SwiperProductsPropositionDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperProductsPropositionDirective.meta = {\r\n\tselector: '[swiper-products-proposition]'\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { SwiperDirective } from '../../common/swiper/swiper.directive';\r\n\r\nexport class SwiperProjectsPropositionDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1.5,\r\n\t\t\tspaceBetween: 30,\r\n\t\t\tbreakpoints: {\r\n\t\t\t\t768: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 40\r\n\t\t\t\t},\r\n\t\t\t\t1024: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 50\r\n\t\t\t\t},\r\n\t\t\t\t1440: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 60\r\n\t\t\t\t},\r\n\t\t\t\t1920: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 70\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tspeed: 600,\r\n\t\t\tcenteredSlides: false,\r\n\t\t\tloop: false,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = node.querySelector('.swiper-container');\r\n\t\tthis.init_(target);\r\n\t\t// console.log('SwiperProjectsPropositionDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperProjectsPropositionDirective.meta = {\r\n\tselector: '[swiper-projects-proposition]'\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { environment } from '../../environment';\r\nimport { HeaderService } from '../header/header.service';\r\nimport { CartMiniService } from './cart-mini.service';\r\n\r\nexport class CartMiniComponent extends Component {\r\n\r\n\tget totalPrice() {\r\n\t\tconst items = this.items || [];\r\n\t\treturn items.reduce((p, c, i) => {\r\n\t\t\treturn p + c.price * c.qty;\r\n\t\t}, 0);\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.items = [];\r\n\t\tCartMiniService.items$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(items => {\r\n\t\t\tthis.items = items;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tonIncrement(item) {\r\n\t\tCartMiniService.incrementItem$(item).pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tonDecrement(item) {\r\n\t\tCartMiniService.decrementItem$(item).pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tonEdit(item) {\r\n\t\t// console.log('CartMiniComponent.onEdit', item);\r\n\t\twindow.location.href = `${environment.slug.configureProduct}?productId=${item.id}&code=${item.code}${item.showefy ? `&sl=${item.showefy.product_link.split('&sl=')[1]}` : ''}`;\r\n\t}\r\n\r\n\tonRemoveAll(event) {\r\n\t\tCartMiniService.removeAll$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tonClose(event) {\r\n\t\tHeaderService.onBack();\r\n\t}\r\n\r\n}\r\n\r\nCartMiniComponent.meta = {\r\n\tselector: '[cart-mini]',\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { UserService } from '../user/user.service';\r\nimport { FilesService } from './files.service';\r\n\r\nexport class FilesComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.showFiles = false;\r\n\t\tthis.user = null;\r\n\t\tUserService.me$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(user => {\r\n\t\t\tthis.user = user;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.files = [];\r\n\t\tFilesService.files$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(files => {\r\n\t\t\tthis.files = files;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tonToggleFiles(event) {\r\n\t\tthis.showFiles = !this.showFiles;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonToggleFile(file) {\r\n\t\t(this.isAddedToFiles(file) ? FilesService.removeFile$(file) : FilesService.addFile$(file)).pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(_ => {\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tisAddedToFiles(file) {\r\n\t\treturn FilesService.hasFile(file);\r\n\t}\r\n\r\n\tonDownloadAll(event) {\r\n\t\tevent.preventDefault();\r\n\t\tconst { node } = getContext(this);\r\n\t\tFilesService.currentFiles.forEach(file => {\r\n\t\t\tconst link = document.createElement('a');\r\n\t\t\tlink.setAttribute('href', file.url);\r\n\t\t\tlink.setAttribute('download', file.title);\r\n\t\t\tlink.setAttribute('target', '_blank');\r\n\t\t\tlink.click();\r\n\t\t\t/*\r\n\t\t\tconst item = node.querySelector(`[href]=\"${file.url}\"`);\r\n\t\t\tif (item) {\r\n\t\t\t\titem.click();\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t\t// window.open(file.url, '_blank');\r\n\t\t});\r\n\t}\r\n\r\n\tonRemoveAll(event) {\r\n\t\tFilesService.removeAll$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n}\r\n\r\nFilesComponent.meta = {\r\n\tselector: '[files]',\r\n};\r\n","import { BehaviorSubject } from 'rxjs';\r\n\r\nexport class MenuService {\r\n\r\n\tstatic menu$_ = new BehaviorSubject(-1);\r\n\r\n\tstatic get currentMenu() {\r\n\t\treturn this.menu$_.getValue();\r\n\t}\r\n\r\n\tstatic setMenu(id) {\r\n\t\tthis.menu$_.next(id);\r\n\t}\r\n\r\n\tstatic toggleMenu(id) {\r\n\t\tthis.menu$_.next(this.currentMenu === id ? -1 : id);\r\n\t}\r\n\r\n\tstatic onBack() {\r\n\t\tthis.menu$_.next(-1);\r\n\t}\r\n\r\n\tstatic menu$() {\r\n\t\treturn this.menu$_;\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalResolveEvent, ModalService } from '../../common/modal/modal.service';\r\nimport { environment } from '../../environment';\r\nimport { CartMiniService } from '../cart-mini/cart-mini.service';\r\nimport { MenuService } from '../menu/menu.service';\r\nimport { UserService } from '../user/user.service';\r\nimport { HeaderService } from './header.service';\r\n\r\nconst USE_MODAL = false;\r\n\r\nexport class HeaderComponent extends Component {\r\n\r\n\tdirection_ = null;\r\n\tget direction() {\r\n\t\treturn this.direction_;\r\n\t}\r\n\tset direction(direction) {\r\n\t\tif (this.direction_ !== direction) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tnode.classList.remove(`scrolling-${this.direction_}`);\r\n\t\t\tnode.classList.add(`scrolling-${direction}`);\r\n\t\t\tthis.direction_ = direction;\r\n\t\t}\r\n\t}\r\n\r\n\tscrolled_ = null;\r\n\tget scrolled() {\r\n\t\treturn this.scrolled_;\r\n\t}\r\n\tset scrolled(scrolled) {\r\n\t\tif (this.scrolled_ !== scrolled) {\r\n\t\t\tthis.scrolled_ = scrolled;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tscrolled ? node.classList.add(`scrolled`) : node.classList.remove(`scrolled`);\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst body = document.querySelector('body');\r\n\t\tthis.header = HeaderService.currentHeader;\r\n\t\tHeaderService.header$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(header => {\r\n\t\t\tthis.header = header;\r\n\t\t\tthis.pushChanges();\r\n\t\t\tbody.setAttribute('class', header !== -1 ? `${header}-active` : '');\r\n\t\t});\r\n\t\tthis.menu = MenuService.currentMenu;\r\n\t\tMenuService.menu$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(menu => {\r\n\t\t\tthis.menu = menu;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.cart = CartMiniService;\r\n\t\tthis.user = null;\r\n\t\tUserService.me$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(user => {\r\n\t\t\tthis.user = user;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tconst pictogram = document.querySelector('.page > .pictogram');\r\n\t\tLocomotiveScrollService.scroll$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe((event) => {\r\n\t\t\tthis.direction = event.direction;\r\n\t\t\tthis.scrolled = event.scroll.y > 100;\r\n\t\t\tconst opacity = 0.1 - 0.1 * Math.min(1, Math.max(0, (event.scroll.y - window.innerHeight * 3) / window.innerHeight / 3));\r\n\t\t\tgsap.set(pictogram, { opacity });\r\n\t\t\t// console.log('HeaderComponent', event.scroll.y, event.direction, event.speed);\r\n\t\t});\r\n\t}\r\n\r\n\tonOpenMarketAndLanguage() {\r\n\t\tMenuService.onBack();\r\n\t\tHeaderService.onBack();\r\n\t\tModalService.open$({ src: environment.template.modal.marketsAndLanguagesModal }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tconsole.log('HeaderComponent.onOpenMarketAndLanguage', event);\r\n\t\t});\r\n\t}\r\n\r\n\tonLogin() {\r\n\t\tMenuService.onBack();\r\n\t\tHeaderService.onBack();\r\n\t\tif (USE_MODAL) {\r\n\t\t\tModalService.open$({ src: environment.template.modal.userModal, data: { view: 1 } }).pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t\t).subscribe(event => {\r\n\t\t\t\tconsole.log('HeaderComponent.onLogin', event);\r\n\t\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\t\twindow.location.href = environment.slug.reservedArea;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\twindow.location.href = environment.slug.reservedArea;\r\n\t\t}\r\n\t}\r\n\r\n\tonLogout() {\r\n\t\tUserService.signout$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tonToggle(id) {\r\n\t\tMenuService.onBack();\r\n\t\tHeaderService.toggleHeader(id);\r\n\t}\r\n\r\n\tonBack(event) {\r\n\t\tMenuService.onBack();\r\n\t}\r\n}\r\n\r\nHeaderComponent.meta = {\r\n\tselector: '[header]',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { HeaderService } from '../header/header.service';\r\nimport { MenuService } from './menu.service';\r\n\r\nexport class MenuDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = this.target = document.querySelector(`#menu-${this.menu}`);\r\n\t\tconst preview = target.querySelector('[data-target]');\r\n\t\tconst previewSrc = this.previewSrc = preview.src;\r\n\t\tconst container = this.container = target.querySelector(`.container`);\r\n\t\tthis.onClick = this.onClick.bind(this);\r\n\t\tthis.onLeave = this.onLeave.bind(this);\r\n\t\tnode.addEventListener('click', this.onClick);\r\n\t\tMenuService.menu$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(menu_ => {\r\n\t\t\tif (this.menu === menu_) {\r\n\t\t\t\tthis.onEnter();\r\n\t\t\t} else {\r\n\t\t\t\tthis.onExit();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonClick(event) {\r\n\t\tevent.preventDefault();\r\n\t\t// console.log('MenuDirective.onClick', this.menu);\r\n\t\tif (HeaderService.currentHeader !== 'menu') {\r\n\t\t\tHeaderService.onBack();\r\n\t\t}\r\n\t\tMenuService.toggleMenu(this.menu);\r\n\t}\r\n\r\n\tonLeave() {\r\n\t\t// console.log('MenuDirective.onLeave', this.menu);\r\n\t\tMenuService.onBack();\r\n\t\tthis.onExit();\r\n\t}\r\n\r\n\tonEnter() {\r\n\t\t// console.log('MenuDirective.onEnter', this.menu);\r\n\t\tconst target = this.target;\r\n\t\tconst preview = target.querySelector('[data-target]');\r\n\t\tpreview.src = this.previewSrc;\r\n\t\tconst container = this.container;\r\n\t\tcontainer.addEventListener('mouseleave', this.onLeave);\r\n\t}\r\n\r\n\tonExit() {\r\n\t\t// console.log('MenuDirective.onExit', this.menu);\r\n\t\tconst container = this.container;\r\n\t\tcontainer.removeEventListener('mouseleave', this.onLeave);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.onExit();\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.removeEventListener('click', this.onClick);\r\n\t}\r\n}\r\n\r\nMenuDirective.meta = {\r\n\tselector: '[menu]',\r\n\tinputs: ['menu'],\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { LocationService } from '../../common/location/location.service';\r\n\r\nexport class NewsletterPropositionComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tonNewsletter(event) {\r\n\t\tconsole.log('NewsletterPropositionComponent.onNewsletter', this.form.value);\r\n\t\tconst encoded = LocationService.encode('email', this.form.value.email, {});\r\n\t\twindow.location.href = `${this.action}?params=${encoded}`;\r\n\t}\r\n}\r\n\r\nNewsletterPropositionComponent.meta = {\r\n\tselector: '[newsletter-proposition]',\r\n\tinputs: ['action'],\r\n};\r\n","import { of } from 'rxjs';\r\nimport { map, tap } from 'rxjs/operators';\r\nimport { ApiService } from '../../common/api/api.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport class SearchService {\r\n\r\n\tstatic search$_() {\r\n\t\tif (SearchService.items_) {\r\n\t\t\treturn of(SearchService.items_);\r\n\t\t} else {\r\n\t\t\treturn (\r\n\t\t\t\tenvironment.flags.production ?\r\n\t\t\t\t\tApiService.get$(`/search/search.json`) :\r\n\t\t\t\t\tApiService.get$(`/search/search.json`)\r\n\t\t\t).pipe(\r\n\t\t\t\ttap(items => {\r\n\t\t\t\t\titems.forEach(item => {\r\n\t\t\t\t\t\titem.title = SearchService.toTitleCase(item.title);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tSearchService.items_ = items;\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic search$(query) {\r\n\t\tquery = query.toLowerCase();\r\n\t\treturn this.search$_().pipe(\r\n\t\t\tmap(items => {\r\n\t\t\t\titems = items.filter(item => item.title.toLowerCase().indexOf(query) !== -1);\r\n\t\t\t\titems.sort((a, b) => {\r\n\t\t\t\t\treturn a.title.toLowerCase().indexOf(query) - b.title.toLowerCase().indexOf(query);\r\n\t\t\t\t});\r\n\t\t\t\treturn items;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic toTitleCase(sentence, seps = ' _-/') {\r\n\t\tconst capitalize = str => str.length ? str[0].toUpperCase() + str.slice(1).toLowerCase() : '';\r\n\t\tconst escape = str => str.replace(/./g, c => `\\\\${c}`);\r\n\t\tlet wordPattern = new RegExp(`[^${escape(seps)}]+`, 'g');\r\n\t\treturn sentence.replace(wordPattern, capitalize);\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { of } from 'rxjs';\r\nimport { auditTime, map, switchMap, takeUntil } from 'rxjs/operators';\r\nimport { SearchService } from './search.service';\r\n\r\nexport class SearchComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.items = [];\r\n\t\tthis.visibleItems = [];\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tsearch: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tthis.search$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe((items) => {\r\n\t\t\tthis.items = items;\r\n\t\t\tthis.visibleItems = items.slice(0, Math.min(10, items.length));\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tsearch$() {\r\n\t\treturn this.form.changes$.pipe(\r\n\t\t\tauditTime(500),\r\n\t\t\tmap(changes => changes.search),\r\n\t\t\tswitchMap(query => {\r\n\t\t\t\tif (query != null && query.length > 1) {\r\n\t\t\t\t\treturn SearchService.search$(query);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn of([]);\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nSearchComponent.meta = {\r\n\tselector: '[search]',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class SubmenuDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst items = Array.prototype.slice.call(node.querySelectorAll('[data-picture]'));\r\n\t\tconst target = node.querySelector('[data-target]');\r\n\t\tgsap.set(target, { opacity: 1 });\r\n\t\titems.forEach(item => {\r\n\t\t\titem.addEventListener('mouseover', (event) => {\r\n\t\t\t\tconst picture = item.getAttribute('data-picture');\r\n\t\t\t\tgsap.set(target, { opacity: 0 });\r\n\t\t\t\ttarget.onload = () => {\r\n\t\t\t\t\tgsap.to(target, {\r\n\t\t\t\t\t\tduration: 0.5,\r\n\t\t\t\t\t\tdelay: 0.1,\r\n\t\t\t\t\t\topacity: 1,\r\n\t\t\t\t\t\tease: Power4.easeOut,\r\n\t\t\t\t\t\toverwrite: 'all',\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\ttarget.src = picture;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nSubmenuDirective.meta = {\r\n\tselector: '[submenu]'\r\n};\r\n","import { Component } from 'rxcomp';\r\n\r\nexport class TreeComponent extends Component {\r\n\r\n\thasItems(item) {\r\n\t\treturn item.items && item.items.length > 0;\r\n\t}\r\n\r\n\tonClick(item) {\r\n\t\tthis.tree.forEach(x => {\r\n\t\t\tx.active = x.id === item.id ? (this.hasItems(item) ? !item.active : true) : false;\r\n\t\t});\r\n\t\tif (item.active) {\r\n\t\t\tthis.open.next(item);\r\n\t\t}\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonOpen(item) {\r\n\t\tthis.open.next(item);\r\n\t}\r\n\r\n}\r\n\r\nTreeComponent.meta = {\r\n\tselector: '[tree]',\r\n\tinputs: ['tree'],\r\n\toutputs: ['open'],\r\n\ttemplate: /* html */ `\r\n\t\t<li class=\"folder\" [class]=\"{ active: item.active }\" *for=\"let item of tree\">\r\n\t\t\t<span [innerHTML]=\"item.title\" (click)=\"onClick(item)\"></span>\r\n\t\t\t<ul [tree]=\"item.items\" (open)=\"onOpen($event)\"></ul>\r\n\t\t</li>\r\n\t`\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { UserService } from './user.service';\r\n\r\nexport class UserForgotComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tform.patch({\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('UserForgotComponent.onSubmit', form.value);\r\n\t\tif (form.valid) {\r\n\t\t\tform.submitted = true;\r\n\t\t\tUserService.forgot$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\tconsole.log('UserForgotComponent.onSubmit', response);\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Forgot\",\r\n\t\t\t\t\t'form_name': \"Recupero Password\"\r\n\t\t\t\t});\r\n\t\t\t\tform.reset();\r\n\t\t\t\tthis.forgot.next(true);\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('UserForgotComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tform.submitted = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonSignIn() {\r\n\t\tthis.viewSignIn.next();\r\n\t}\r\n\r\n\tonSignUp() {\r\n\t\tthis.viewSignUp.next();\r\n\t}\r\n}\r\n\r\nUserForgotComponent.meta = {\r\n\tselector: '[user-forgot]',\r\n\toutputs: ['forgot', 'viewSignIn', 'viewSignUp'],\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\nimport { environment } from '../../environment';\r\nimport { UserService, UserViews } from './user.service';\r\n\r\nexport class UserComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.views = UserViews;\r\n\t\tthis.view = this.view || UserViews.SIGN_UP;\r\n\t}\r\n\r\n\tonModalSignIn(event) {\r\n\t\t// console.log('UserComponent.onModalSignIn');\r\n\t\tModalService.open$({ src: environment.template.modal.userModal, data: { view: 1 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tconsole.log('UserComponent.onModalSignIn', event);\r\n\t\t});\r\n\t}\r\n\r\n\tonModalSignUp(event) {\r\n\t\t// console.log('UserComponent.onModalSignUp');\r\n\t\tModalService.open$({ src: environment.template.modal.userModal, data: { view: 2 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tconsole.log('UserComponent.onModalSignUp', event);\r\n\t\t});\r\n\t}\r\n\r\n\tsetView(view) {\r\n\t\tthis.view = view;\r\n\t\tthis.pushChanges();\r\n\t\tconst { node } = getContext(this);\r\n\t\tLocomotiveScrollService.scrollTo(node, { offset: -100 });\r\n\t}\r\n\r\n\tonViewSignIn(event) {\r\n\t\t// console.log('UserComponent.onViewSignIn');\r\n\t\tthis.setView(UserViews.SIGN_IN);\r\n\t}\r\n\r\n\tonViewSignUp(event) {\r\n\t\t// console.log('UserComponent.onViewSignIn');\r\n\t\tthis.setView(UserViews.SIGN_UP);\r\n\t}\r\n\r\n\tonViewForgot(event) {\r\n\t\t// console.log('UserComponent.onViewForgot');\r\n\t\tthis.setView(UserViews.FORGOTTEN);\r\n\t}\r\n\r\n\tonSignIn(user) {\r\n\t\tconsole.log('UserComponent.onSignIn', user);\r\n\t\tUserService.setUser(user);\r\n\t\tif (this.navTo) {\r\n\t\t\twindow.location.href = this.navTo;\r\n\t\t}\r\n\t\t// nav to profile\r\n\t}\r\n\r\n\tonSignUp(user) {\r\n\t\tconsole.log('UserComponent.onSignUp', user);\r\n\t\tUserService.setUser(user);\r\n\t\tif (this.navTo) {\r\n\t\t\twindow.location.href = this.navTo;\r\n\t\t}\r\n\t\t// nav to profile\r\n\t}\r\n\r\n\tonForgot(email) {\r\n\t\t/*\r\n\t\tconsole.log('UserComponent.onForgot', email);\r\n\t\tthis.setView(UserViews.SIGN_IN);\r\n\t\t*/\r\n\t}\r\n}\r\n\r\nUserComponent.meta = {\r\n\tselector: '[user]',\r\n\tinputs: ['navTo', 'view']\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalOutletComponent } from '../../common/modal/modal-outlet.component';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\nimport { UserComponent } from './user.component';\r\nimport { UserViews } from './user.service';\r\n\r\nexport class UserModalComponent extends UserComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tconst data = parentInstance.modal.data;\r\n\t\t\tthis.view = data.view;\r\n\t\t\tthis.me = data.me;\r\n\t\t\t// console.log('UserModalComponent.onInit', data);\r\n\t\t}\r\n\t\tLocomotiveScrollService.stop();\r\n\t}\r\n\r\n\tsetView(view) {\r\n\t\tthis.view = view;\r\n\t\tthis.pushChanges();\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = window.innerWidth >= 1024 ? node.querySelector('.modal__inner') : node;\r\n\t\ttarget.scrollTo(0, 0);\r\n\t}\r\n\r\n\tonViewForgot() {\r\n\t\tconsole.log('UserModalComponent.onViewForgot');\r\n\t\tthis.setView(UserViews.FORGOTTEN);\r\n\t}\r\n\r\n\tonViewSignIn() {\r\n\t\tconsole.log('UserModalComponent.onViewSignIn');\r\n\t\tthis.setView(UserViews.SIGN_IN);\r\n\t}\r\n\r\n\tonViewSignUp() {\r\n\t\tconsole.log('UserModalComponent.onViewSignUp');\r\n\t\tthis.setView(UserViews.SIGN_UP);\r\n\t}\r\n\r\n\tonClose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n\tonSignUp(user) {\r\n\t\t// console.log('UserModalComponent.onSignUp', user);\r\n\t\tModalService.resolve(user);\r\n\t}\r\n\r\n\tonSignIn(user) {\r\n\t\t// console.log('UserModalComponent.onSignIn', user);\r\n\t\tModalService.resolve(user);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tLocomotiveScrollService.start();\r\n\t}\r\n}\r\n\r\nUserModalComponent.meta = {\r\n\tselector: '[user-modal]'\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { UserService } from './user.service';\r\n\r\nexport class UserSigninComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tpassword: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tform.patch({\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tpassword: '********',\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('UserSigninComponent.onSubmit', form.value);\r\n\t\tif (form.valid) {\r\n\t\t\tform.submitted = true;\r\n\t\t\tUserService.signin$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\tconsole.log('UserSigninComponent.onSubmit', response);\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Signin\",\r\n\t\t\t\t\t'form_name': \"Login\"\r\n\t\t\t\t});\r\n\t\t\t\tform.reset();\r\n\t\t\t\tthis.signIn.next(response);\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('UserSigninComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tform.submitted = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonForgot(event) {\r\n\t\tthis.viewForgot.next();\r\n\t}\r\n\r\n\tonSignUp(event) {\r\n\t\tthis.viewSignUp.next();\r\n\t}\r\n}\r\n\r\nUserSigninComponent.meta = {\r\n\tselector: '[user-signin]',\r\n\toutputs: ['signIn', 'viewForgot', 'viewSignUp'],\r\n};\r\n","import { FormValidator } from 'rxcomp-form';\r\n\r\nexport default function MatchValidator(fieldName, formGroup) {\r\n\r\n\treturn new FormValidator((value) => {\r\n\t\tconst field = formGroup ? formGroup.get(fieldName) : null;\r\n\t\tif (!value || !field) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn value !== field.value ? { match: { value: value, match: field.value } } : null;\r\n\t});\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport MatchValidator from '../../controls/match.validator';\r\nimport RequiredIfValidator from '../../controls/required-if.validator';\r\nimport { UserService } from './user.service';\r\n\r\nexport class UserSignupComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.me = this.me || {};\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(this.me.firstName || null, [Validators.RequiredValidator()]),\r\n\t\t\tlastName: new FormControl(this.me.lastName || null, [Validators.RequiredValidator()]),\r\n\t\t\tcountry: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcity: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcompany: new FormControl(null),\r\n\t\t\toccupation: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\temail: new FormControl(this.me.email || null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tpassword: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tpasswordConfirm: new FormControl(null, [Validators.RequiredValidator(), MatchValidator('password', form)]),\r\n\t\t\tprivacy: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tnewsletter: new FormControl(null),\r\n\t\t\tnewsletterLanguage: new FormControl(null, [RequiredIfValidator('newsletter', form)]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn UserService.data$().pipe(\r\n\t\t\ttap(data => {\r\n\t\t\t\tconst controls = this.controls;\r\n\t\t\t\tcontrols.country.options = FormService.toSelectOptions(data.country.options);\r\n\t\t\t\tcontrols.occupation.options = FormService.toSelectOptions(data.occupation.options);\r\n\t\t\t\tcontrols.newsletterLanguage.options = FormService.toSelectOptions(data.newsletterLanguage.options);\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tconst controls = this.controls;\r\n\t\tconst country = controls.country.options.length > 1 ? controls.country.options[1].id : null;\r\n\t\tconst occupation = controls.occupation.options.length > 1 ? controls.occupation.options[1].id : null;\r\n\t\tform.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\tcountry: country,\r\n\t\t\tcity: 'Pesaro',\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\toccupation: occupation,\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tpassword: '********',\r\n\t\t\tpasswordConfirm: '********',\r\n\t\t\tprivacy: true,\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('UserSignupComponent.onSubmit', form.value);\r\n\t\tif (form.valid) {\r\n\t\t\tform.submitted = true;\r\n\t\t\tUserService.signup$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\tconsole.log('UserSignupComponent.onSubmit', response);\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Registration\",\r\n\t\t\t\t\t'form_name': \"Registrazione\"\r\n\t\t\t\t});\r\n\t\t\t\tform.reset();\r\n\t\t\t\tthis.signUp.next(response);\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('UserSignupComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tform.submitted = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonSignIn() {\r\n\t\tthis.viewSignIn.next();\r\n\t}\r\n}\r\n\r\nUserSignupComponent.meta = {\r\n\tselector: '[user-signup]',\r\n\toutputs: ['signUp', 'viewSignIn'],\r\n\tinputs: ['me'],\r\n};\r\n","import { Module } from 'rxcomp';\r\nimport { MapComponent } from '../partials/map/map.component';\r\nimport { SwiperGalleryDirective } from '../partials/swiper-gallery/swiper-gallery.directive';\r\nimport { SwiperHomepageDirective } from '../partials/swiper-homepage/swiper-homepage.directive';\r\nimport { SwiperNewsPropositionDirective } from '../partials/swiper-news-proposition/swiper-news-proposition.directive';\r\nimport { SwiperProductsPropositionDirective } from '../partials/swiper-products-proposition/swiper-products-proposition.directive';\r\nimport { SwiperProjectsPropositionDirective } from '../partials/swiper-projects-proposition/swiper-projects-proposition.directive';\r\nimport { CartMiniComponent } from './cart-mini/cart-mini.component';\r\nimport { FilesComponent } from './files/files.component';\r\nimport { HeaderComponent } from './header/header.component';\r\nimport { MenuDirective } from './menu/menu.directive';\r\nimport { NewsletterPropositionComponent } from './newsletter-proposition/newsletter-proposition.component';\r\nimport { SearchComponent } from './search/search.component';\r\nimport { SubmenuDirective } from './submenu/submenu.directive';\r\nimport { TreeComponent } from './tree/tree.component';\r\nimport { UserForgotComponent } from './user/user-forgot.component';\r\nimport { UserModalComponent } from './user/user-modal.component';\r\nimport { UserSigninComponent } from './user/user-signin.component';\r\nimport { UserSignupComponent } from './user/user-signup.component';\r\nimport { UserComponent } from './user/user.component';\r\n\r\nconst factories = [\r\n\tCartMiniComponent,\r\n\tFilesComponent,\r\n\tHeaderComponent,\r\n\tMapComponent,\r\n\tMenuDirective,\r\n\tNewsletterPropositionComponent,\r\n\tSearchComponent,\r\n\tSubmenuDirective,\r\n\tSwiperGalleryDirective,\r\n\tSwiperHomepageDirective,\r\n\tSwiperNewsPropositionDirective,\r\n\tSwiperProductsPropositionDirective,\r\n\tSwiperProjectsPropositionDirective,\r\n\tTreeComponent,\r\n\tUserComponent,\r\n\tUserForgotComponent,\r\n\tUserModalComponent,\r\n\tUserSigninComponent,\r\n\tUserSignupComponent,\r\n];\r\n\r\nconst pipes = [\r\n];\r\n\r\nexport class SharedModule extends Module { }\r\n\r\nSharedModule.meta = {\r\n\timports: [\r\n\t],\r\n\tdeclarations: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n\texports: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n};\r\n","import { CoreModule, Module } from 'rxcomp';\r\nimport { FormModule } from 'rxcomp-form';\r\nimport { AppComponent } from './app.component';\r\nimport { CommonModule } from './common/common.module';\r\nimport { ControlsModule } from './controls/controls.module';\r\nimport { AmbienceComponent } from './pages/ambience/ambience.component';\r\nimport { AteliersAndStoresComponent } from './pages/ateliers-and-stores/ateliers-and-stores.component';\r\nimport { CareersModalComponent } from './pages/careers/careers-modal.component';\r\nimport { CareersComponent } from './pages/careers/careers.component';\r\nimport { CartComponent } from './pages/cart/cart.component';\r\nimport { ContactsComponent } from './pages/contacts/contacts.component';\r\nimport { DealersComponent } from './pages/dealers/dealers.component';\r\nimport { DesignersComponent } from './pages/designers/designers.component';\r\nimport { MarketsAndLanguagesModalComponent } from './pages/markets-and-languages/markets-and-languages-modal.component';\r\nimport { MaterialsModalComponent } from './pages/materials/materials-modal.component';\r\nimport { MaterialsComponent } from './pages/materials/materials.component';\r\nimport { NewsComponent } from './pages/news/news.component';\r\nimport { NewsletterComponent } from './pages/newsletter/newsletter.component';\r\nimport { ProductsConfigureComponent } from './pages/products-configure/products-configure.component';\r\nimport { ProductsDetailComponent } from './pages/products-detail/products-detail.component';\r\nimport { ProductsComponent } from './pages/products/products.component';\r\nimport { ProjectsRegistrationModalComponent } from './pages/projects-registration/projects-registration-modal.component';\r\nimport { ProjectsRegistrationComponent } from './pages/projects-registration/projects-registration.component';\r\nimport { ProjectsComponent } from './pages/projects/projects.component';\r\nimport { ReservedAreaComponent } from './pages/reserved-area/reserved-area.component';\r\nimport { StoreLocatorComponent } from './pages/store-locator/store-locator.component';\r\nimport { SharedModule } from './shared/shared.module';\r\n\r\nexport class AppModule extends Module { }\r\n\r\nAppModule.meta = {\r\n\timports: [\r\n\t\tCoreModule,\r\n\t\tFormModule,\r\n\t\tCommonModule,\r\n\t\tControlsModule,\r\n\t\tSharedModule,\r\n\t],\r\n\tdeclarations: [\r\n\t\tAmbienceComponent,\r\n\t\tAteliersAndStoresComponent,\r\n\t\tCareersComponent,\r\n\t\tCareersModalComponent,\r\n\t\tCartComponent,\r\n\t\tContactsComponent,\r\n\t\tDealersComponent,\r\n\t\tDesignersComponent,\r\n\t\tMarketsAndLanguagesModalComponent,\r\n\t\tMaterialsComponent,\r\n\t\tMaterialsModalComponent,\r\n\t\tNewsComponent,\r\n\t\tNewsletterComponent,\r\n\t\tProductsComponent,\r\n\t\tProductsConfigureComponent,\r\n\t\tProductsDetailComponent,\r\n\t\tProjectsComponent,\r\n\t\tProjectsRegistrationComponent,\r\n\t\tProjectsRegistrationModalComponent,\r\n\t\tReservedAreaComponent,\r\n\t\tStoreLocatorComponent,\r\n\t],\r\n\tbootstrap: AppComponent,\r\n};\r\n","import { Browser } from 'rxcomp';\r\nimport { AppModule } from './app.module';\r\n\r\nBrowser.bootstrap(AppModule);\r\n"]}