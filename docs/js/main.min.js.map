{"version":3,"sources":["src/js/main.js","../../src/js/environment.served.js","../../src/js/shared/utils/utils.js","../../src/js/environment.js","../../src/js/environment.static.js","../../src/js/shared/http/http.service.js","../../src/js/shared/label/label.pipe.js","../../src/js/shared/location/location.service.js","../../src/js/shared/language/language.service.js","../../src/js/shared/api/api.service.js","../../src/js/shared/storage/session-storage.service.js","../../src/js/pages/user/user.service.js","../../src/js/shared/modal/modal.service.js","../../src/js/app.component.js","../../src/js/shared/filter/filter-item.js","../../src/js/shared/filter/filter.service.js","../../src/js/shared/forms/form.service.js","../../src/js/shared/locomotive-scroll/locomotive-scroll.service.js","../../src/js/pages/ambience/ambience.service.js","../../src/js/pages/ambience/ambience.component.js","../../src/js/pages/ateliers-and-stores/ateliers-and-stores.service.js","../../src/js/pages/ateliers-and-stores/ateliers-and-stores.component.js","../../src/js/shared/gtm/gtm.service.js","../../src/js/pages/contacts/contacts.service.js","../../src/js/pages/contacts/contacts.component.js","../../src/js/pages/designers/designers.service.js","../../src/js/pages/designers/designers.component.js","../../src/js/pages/header/header.component.js","../../node_modules/@googlemaps/markerclustererplus/src/overlay-view-safe.ts","../../node_modules/@googlemaps/markerclustererplus/src/cluster-icon.ts","../../src/js/pages/map/map.component.js","../../node_modules/@googlemaps/markerclustererplus/src/cluster.ts","../../node_modules/@googlemaps/markerclustererplus/src/markerclusterer.ts","../../src/js/pages/map/map.style.js","../../src/js/pages/materials/materials.service.js","../../src/js/pages/materials/materials.component.js","../../src/js/pages/menu/menu.directive.js","../../src/js/pages/news/news.service.js","../../src/js/pages/news/news.component.js","../../src/js/pages/newsletter/newsletter-proposition.component.js","../../src/js/pages/products-configure/products-configure.component.js","../../src/js/pages/products-detail/products-detail.service.js","../../src/js/pages/products-detail/products-detail.component.js","../../src/js/pages/products/products.service.js","../../src/js/pages/products/products.component.js","../../src/js/pages/projects/projects.service.js","../../src/js/pages/projects/projects.component.js","../../src/js/pages/reserved-area/reserved-area.service.js","../../src/js/pages/reserved-area/reserved-area.component.js","../../src/js/pages/store-locator/store-locator.service.js","../../src/js/pages/store-locator/store-locator.component.js","../../src/js/pages/submenu/submenu.directive.js","../../src/js/shared/swiper/swiper.directive.js","../../src/js/pages/swiper-gallery/swiper-gallery.directive.js","../../src/js/pages/swiper-homepage/swiper-homepage.directive.js","../../src/js/pages/swiper-news-proposition/swiper-news-proposition.directive.js","../../src/js/pages/swiper-products-proposition/swiper-products-proposition.directive.js","../../src/js/pages/swiper-projects-proposition/swiper-projects-proposition.directive.js","../../src/js/pages/tree/tree.component.js","../../src/js/pages/user/user-forgot.component.js","../../src/js/shared/modal/modal-outlet.component.js","../../src/js/pages/user/user.component.js","../../src/js/pages/user/user-modal.component.js","../../src/js/pages/user/user-signin.component.js","../../src/js/shared/forms/required-if.validator.js","../../src/js/pages/user/user-signup.component.js","../../src/js/shared/forms/match.validator.js","../../src/js/shared/dropdown/dropdown.directive.js","../../src/js/shared/dropdown/dropdown-item.directive.js","../../src/js/shared/env/env.pipe.js","../../src/js/shared/flag/flag.pipe.js","../../src/js/shared/forms/control.component.js","../../src/js/shared/forms/control-checkbox.component.js","../../src/js/shared/keyboard/keyboard.service.js","../../src/js/shared/forms/control-custom-select.component.js","../../src/js/shared/forms/control-email.component.js","../../src/js/shared/forms/control-password.component.js","../../src/js/shared/forms/control-search.component.js","../../src/js/shared/forms/control-text.component.js","../../src/js/shared/forms/control-textarea.component.js","../../src/js/shared/forms/errors.component.js","../../src/js/shared/forms/test.component.js","../../src/js/shared/html/html.pipe.js","../../src/js/shared/id/id.directive.js","../../src/js/shared/label-for/label-for.directive.js","../../src/js/shared/locomotive-scroll/locomotive-scroll.directive.js","../../src/js/shared/locomotive-scroll/scroll.directive.js","../../src/js/shared/slug/slug.pipe.js","../../src/js/shared/thron/thron.component.js","../../src/js/shared/title/title.directive.js","../../src/js/shared/shared.module.js","../../src/js/app.module.js","../../src/js/main.js"],"names":["g","f","exports","module","require","define","amd","globalThis","self","rxcomp","form","rxjs","operators","this","rxcompForm","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_defineProperty","obj","value","_inheritsLoose","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_assertThisInitialized","ReferenceError","Utils","merge","source","_this","keys","forEach","Array","isArray","NODE","BASE_HREF","get","URLSearchParams","window","location","search","document","querySelector","getAttribute","HEROKU","host","indexOf","STATIC","port","DEVELOPMENT","split","ENV","PRODUCTION","Environment","_proto","options","assign","getAbsoluteUrl","path","params","url","origin","replace","getPath","isLocal","href","set","console","log","githubDocs","defaultOptions","flags","production","heroku","slug","languages","defaultLanguage","labels","select","browse","cancel","error_email","error_match","error_required","loading","remove","required","select_file","update","upload","drag_and_drop_images","environmentOptions","api","assets","workers","image","prefetch","configureProduct","reservedArea","template","modal","userModal","googleMaps","apiKey","environment","HttpService","http$","method","data","format","userPass","response_","headers","Accept","Content-Type","body","JSON","stringify","undefined","credentials","btoa","Headers","from","fetch","then","response","typedResponse","contentType","json","text","ok","Promise","reject","error","warn","resolve","pipe","catchError","throwError","getError","get$","query","delete$","post$","put$","patch$","object","status","statusCode","statusMessage","statusText","LabelPipe","_Pipe","apply","arguments","transform","labels_","getKeys","_len","_key","map","x","join","setLabels","LABELS","Pipe","meta","name","LocationService","has","keyOrValue","pushParams","history","pushState","title","toString","to","replaceState","pathname","state","deserialize","encoded","decode","serialize","encode","decoded","atob","parse","LanguageService","getDefaultLanguages","alternates","getDefaultLanguage","lang","setLanguage","language","selectedLanguage","setLanguage$","tap","html","labelsMatch","exec","Function","call","bhereMatch","bhere","activeLanguage","toggleLanguages","showLanguages","pushChanges","_this2","find","ApiService","_HttpService","SessionStorageService","delete","isSessionStorageSupported","sessionStorage","removeItem","exist","e","cache","push","setItem","supported","UserViews","SIGN_IN","SIGN_UP","FORGOTTEN","User","firstName","substr","toUpperCase","lastName","UserService","setUser","user","user$_","next","data$","forgot$","payload","me$","sessionUser","of","switchMap","mapUser","_","signin$","signout$","_this3","signup$","_this4","sessionStorage$","mapUsers","users","getValue","BehaviorSubject","ModalEvent","ModalResolveEvent","_ModalEvent","ModalRejectEvent","_ModalEvent2","ModalService","open$","getTemplate$","src","node","getNode","modal$","hasModal","events$","load$","div","createElement","innerHTML","firstElementChild","Subject","AppComponent","_Component","onInit","getContext","classList","onLogin","view","takeUntil","unsubscribe$","subscribe","event","onLogout","first","Component","selector","FilterMode","FilterItem","filter","change$","mode","placeholder","values","unshift","label","item","match","getLabel","index","splice","toggle","clear","FilterService","initialParams","callback","filters","getParamsCount","reduce","c","locationParams","any","items$","items","changes","filterItems","updateFilterStates","skipFilter","filteredItems","option","count","disabled","reset","FormService","toSelectOptions","slice","id","LocomotiveScrollService","scroll","scroll$","init","useKeyboard","smoothMobile","inertia","smooth","lerp","getDirection","getSpeed","initClass","scrollingClass","draggingClass","smoothClass","scrollbarContainer","scrollbarClass","multiplier","firefoxMultiplier","touchMultiplier","scrollFromAnywhere","gestureDirection","reloadOnContextChange","resetNativeScroll","el","useLocomotiveScroll","instance","LocomotiveScroll","add","innerWidth","isMacLike","test","navigator","platform","isIOS","isMacOs","toLowerCase","isSafari","vendor","userAgent","init$","fromEvent","delay","on","direction","y","speed","previousY","scrollTop","addEventListener","stop","start","scrollTo","scrollIntoView","ReplaySubject","AmbienceService","all$","filters$","AmbienceComponent","ambienceId","FormGroup","ambience","FormControl","material","designer","controls","changes$","setFilterByKeyAndValue","onLoad","combineLatest","filterService","materials","designers","patch","onSearch","model","clearFilter","preventDefault","stopImmediatePropagation","inputs","AteliersAndStoresService","ateliers$","stores$","AteliersAndStoresComponent","types","Atelier","Store","filteredAteliers","filteredStores","country","type","GtmService","dataLayer","push_","ContactsService","submit$","ContactsComponent","success","Validators","RequiredValidator","email","EmailValidator","telephone","city","message","privacy","newsletter","flag","checkRequest","antiforgery","checkField","onSubmit","valid","submitted","form_name","touched","DesignersService","DesignersComponent","category","HeaderMode","HeaderComponent","args","concat","show","pictogram","scrolled","opacity","Math","min","max","innerHeight","gsap","onToggleMenu","onToggleSearch","onToggleCart","direction_","scrolled_","extendStatics","d","b","hasOwnProperty","__extends","TypeError","String","__","__assign","t","s","n","OverlayViewSafe","type1","type2","property","extend","google","maps","OverlayView","toCssText","styles","acc","coercePixels","pixels","GOOGLE_MAPS","ClusterIcon","_super","cluster_","styles_","center_","div_","sums_","visible_","style","setMap","getMap","onAdd","cMouseDownInCluster","cDraggingMapByCluster","mc","getMarkerClusterer","_a","version","major","minor","gmVersion","parseInt","getPanes","overlayMouseTarget","appendChild","boundsChangedListener_","addListener","addDomListener","stopPropagation","trigger","getZoomOnClick","mz_1","getMaxZoom","theBounds_1","getBounds","fitBounds","setTimeout","getZoom","setZoom","cancelBubble","onRemove","parentNode","hide","removeListener","clearInstanceListeners","removeChild","draw","pos","getPosFromLatLng_","top","left","display","className","className_","cssText","createCss_","getImageElementHtml","getLabelDivHtml","getTitle","ariaLabelFn","position","anchorText_","color","textColor","font-size","textSize","font-family","fontFamily","font-weight","fontWeight","font-style","fontStyle","text-decoration","textDecoration","text-align","width","line-height","textLineHeight","bp","backgroundPosition","spriteH","spriteV","dimensions","getEnableRetinaIcons","height","clip","overrideDimensionsDynamicIcon","useStyle","sums","anchorText","anchorIcon_","anchorIcon","floor","getClusterClass","setCenter","center","z-index","getZIndex","cursor","-webkit-user-select","-khtml-user-select","-moz-user-select","-o-user-select","user-select","latlng","getProjection","fromLatLngToDivPixel","Cluster","markerClusterer_","map_","minClusterSize_","getMinimumClusterSize","averageCenter_","getAverageCenter","markers_","bounds_","clusterIcon_","getStyles","getSize","getMarkers","getCenter","bounds","LatLngBounds","markers","getPosition","addMarker","marker","isMarkerAlreadyAdded_","l","lat","lng","LatLng","calculateBounds_","isAdded","mCount","mz","isMarkerInClusterBounds","contains","getExtendedBounds","updateIcon","numStyles","getCalculator","getOption","prop","def","MarkerClusterer","clusters_","listeners_","activeMap_","ready_","zIndex_","zIndex","Number","Marker","MAX_ZINDEX","gridSize_","gridSize","minimumClusterSize","maxZoom_","maxZoom","title_","zoomOnClick_","ignoreHidden_","enableRetinaIcons_","imagePath_","imagePath","IMAGE_PATH","imageExtension_","imageExtension","IMAGE_EXTENSION","imageSizes_","imageSizes","IMAGE_SIZES","calculator_","calculator","CALCULATOR","batchSize_","batchSize","BATCH_SIZE","batchSizeIE_","batchSizeIE","BATCH_SIZE_IE","clusterClass_","clusterClass","setupStyles_","addMarkers","repaint","prevZoom_","minZoom","mapTypes","getMapTypeId","zoom","resetViewport_","redraw_","size","withDefaultStyle","fitMapToMarkers","padding","getVisible","getIgnoreHidden","getGridSize","setGridSize","setMinimumClusterSize","setMaxZoom","setZIndex","setStyles","setTitle","setZoomOnClick","zoomOnClick","setAverageCenter","averageCenter","setIgnoreHidden","ignoreHidden","setEnableRetinaIcons","enableRetinaIcons","getImageExtension","setImageExtension","getImagePath","setImagePath","getImageSizes","setImageSizes","setCalculator","getBatchSizeIE","setBatchSizeIE","setClusterClass","getTotalMarkers","getClusters","getTotalClusters","nodraw","pushMarkerTo_","getDraggable","removeMarker","removed","removeMarker_","removeMarkers","r","clearMarkers","oldClusters","projection","tr","getNorthEast","bl","getSouthWest","trPix","blPix","ne","fromDivPixelToLatLng","sw","createClusters_","distanceBetweenPoints_","p1","p2","dLat","PI","dLon","a","sin","cos","atan2","sqrt","isMarkerInBounds_","addToClosestCluster_","distance","clusterToAddTo","cluster","iFirst","mapBounds","timerRefStatic","clearTimeout","iLast","dv","overrides","MAP_STYLE","featureType","elementType","stylers","visibility","saturation","lightness","MapComponent","initMap","onGoogleMapsLoaded","script","setAttribute","getElementsByTagName","documentElement","mapOptions","latitude","longitude","scrollwheel","zoomControlOptions","ZoomControlStyle","DEFAULT","scaleControl","zoomControl","mapTypeControl","streetViewControl","rotateControl","fullscreenControl","mapElement","Map","getItalyBounds","onChanges","calculateDistance","lat1","lon1","lat2","lon2","unit","radlat1","radlat2","theta","radtheta","dist","acos","markerCluster","content","address","phone","fax","markerImage","MarkerImage","Size","icon","setMarkerWindow","sizes","getGeolocation","busyLocation","geolocation","getCurrentPosition","coords","geocoder","Geocoder","geocode","results","filteredInfoCity","address_component","includes","formatted_address","address_components","searchCountry","short_name","setInfoWindow","searchPosition","finally","ZOOM_LEVEL","findNearStores","visible","cod_stato","userCountry","MAX_DISTANCE","sort","importante","visibleStores","$timeout","panTo","markerWindow","InfoWindow","pixelOffset","setPosition","setContent","open","closeMarkerWindow","close","getWorldBounds","MaterialsService","MaterialsComponent","selectedItem","onToggle","offset","MENUS","MenuDirective","_Directive","submenus","menu","container","onOver","bind","onLeave","keepBackground","removeEventListener","onDestroy","Directive","NewsService","NewsComponent","abstract","NewsletterPropositionComponent","onNewsletter","breadcumbStyle","ProductsConfigureComponent","isReady","isComplete","isConfiguring","iframe","onEvent","grant_type","sfy","SFYFrame","getIframeDocument","contentWindow","contentDocument","eventName","emit","onReady","onShowefyComplete","onStartConfigurator","onButtonPressed","onSetButtonStatus","onGetIframeSize","onGetProductExtData","onGetFastProductExtData","statusTxt","addTexts","addButtons","addBreadcrumb","findPos","curtop","offsetParent","offsetTop","HTML","printHTML","buttons","BUTTONS","element","PROPERTIES","LABEL","en","setButtonStatus","breadcrumb","BREADCUMB","printBreadcumb","getCartData","getProductExtData","getFastData","getFastProductExtData","ProductsDetailService","versions$","ProductsDetailComponent","visibleItems","showVersions","ProductsService","ProductsComponent","categoryId","ProjectsService","ProjectsComponent","ReservedAreaService","toTitleCase","sentence","seps","wordPattern","RegExp","str","ReservedAreaComponent","tree","files","visibleFiles","getTree","parentId","onOpen","active","showMore","onProjectRegistration","StoreLocatorService","rank","StoreLocatorComponent","SubmenuDirective","querySelectorAll","picture","onload","duration","ease","Power4","easeOut","overwrite","SwiperDirective","slidesPerView","spaceBetween","centeredSlides","autoplay","keyboardControl","mousewheelControl","pagination","clickable","keyboard","enabled","onlyInViewport","init_","swiperInitOrUpdate_","removeListeners_","swiperDestroy_","onBeforePrint","slideToIndex","swiper","slideTo","hasPrev","activeIndex","slides","hasNext","slidePrev","slideNext","slideChange","addListeners_","swiperDirectiveInit","Power2","scope","Swiper","_opening","destroy","matchMedia","matches","SwiperGalleryDirective","_SwiperDirective","loop","loopAdditionalSlides","SwiperHomepageDirective","SwiperNewsPropositionDirective","breakpoints","768","1024","1440","1920","SwiperProductsPropositionDirective","SwiperProjectsPropositionDirective","TreeComponent","hasItems","onClick","outputs","UserForgotComponent","forgot","onSignIn","viewSignIn","onSignUp","viewSignUp","ModalOutletComponent","modalNode","modal_","compile","UserComponent","views","setView","onViewForgot","onViewSignIn","onViewSignUp","navTo","onForgot","UserModalComponent","_UserComponent","parentInstance","onClose","UserSigninComponent","password","signIn","viewForgot","RequiredIfValidator","fieldName","formGroup","FormValidator","field","requiredIf","UserSignupComponent","company","occupation","passwordConfirm","newsletterLanguage","signUp","DROPDOWN_ID","DropdownDirective","opened","onDocumentClick","openDropdown","closeDropdown","addListeners","dropdown$","addDocumentListeners","dropped","removeDocumentListeners","removeListeners","nextId","dropdown","id_","DropdownItemDirective","EnvPipe","keypath","env","k","shift","FlagPipe","ControlComponent","control","ControlCheckboxComponent","_ControlComponent","KeyboardService","keydown$","keydown$_","shareReplay","keyup$","keyup$_","keys$","keys$_","startWith","key$","key$_","regexp","typing$","typing$_","typing","ControlCustomSelectComponent","dropdownId","word","scrollToWord","children","setOption","isMultiple","_readOnlyError","change","hasOption","v","onDropped","$event","multiple","ControlEmailComponent","ControlPasswordComponent","ControlSearchComponent","ControlTextComponent","ControlTextareaComponent","ErrorsComponent","TestComponent","onTest","onReset","HtmlPipe","m","fromCharCode","unescapes","rx","IdDirective","LabelForDirective","labelFor","LocomotiveScrollDirective","ScrollDirective","scrollSpeed","parseFloat","wh","wh2","rect","getBoundingClientRect","currentY","getProperty","bottom","SlugPipe","ID","ThronComponent","THRON","THRONContentExperience","THRONPlayer","media","thron","splitted","hasAttribute","player","muted","displayLinked","noSkin","onCanPlay","onPlaying","onPlay","onPause","onComplete","video","mediaContainer","ready","canPlay","off","qualities","qualityLevels","highestQuality","currentQuality","playing","play","pause","complete","playVideo","pauseVideo","playing_","TitleDirective","removeAttribute","factories","pipes","SharedModule","_Module","Module","imports","declarations","AppModule","CoreModule","FormModule","bootstrap","Browser"],"mappings":";;;;;CAMC,SAASA,EAAEC,GAAoB,iBAAVC,SAAoC,oBAATC,OAAqBF,EAAEG,QAAQ,UAAUA,QAAQ,eAAeA,QAAQ,kBAAkBA,QAAQ,SAAyB,mBAATC,QAAqBA,OAAOC,IAAID,OAAO,CAAC,SAAS,cAAc,iBAAiB,QAAQJ,GAAyDA,GAArDD,EAAsB,oBAAbO,WAAyBA,WAAWP,GAAGQ,MAASC,OAAOT,EAAES,OAAOC,KAAKV,EAAEW,KAAKC,UAAUZ,EAAEW,MAAhW,CAAyWE,MAAK,SAAUJ,EAAQK,EAAYF,EAAWD,GAAM,aAAa,SAASI,EAAkBC,EAAQC,GAC3c,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CACrC,IAAIE,EAAaH,EAAMC,GACvBE,EAAWC,WAAaD,EAAWC,aAAc,EACjDD,EAAWE,cAAe,EACtB,UAAWF,IAAYA,EAAWG,UAAW,GACjDC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAIlD,SAASO,EAAaC,EAAaC,EAAYC,GAG7C,OAFID,GAAYd,EAAkBa,EAAYG,UAAWF,GACrDC,GAAaf,EAAkBa,EAAaE,GACzCF,EAGT,SAASI,EAAgBC,EAAKP,EAAKQ,GAYjC,OAXIR,KAAOO,EACTT,OAAOC,eAAeQ,EAAKP,EAAK,CAC9BQ,MAAOA,EACPb,YAAY,EACZC,cAAc,EACdC,UAAU,IAGZU,EAAIP,GAAOQ,EAGND,EAGT,SAASE,EAAeC,EAAUC,GAChCD,EAASL,UAAYP,OAAOc,OAAOD,EAAWN,WAC9CK,EAASL,UAAUQ,YAAcH,EAEjCI,EAAgBJ,EAAUC,GAG5B,SAASG,EAAgBC,EAAGC,GAM1B,OALAF,EAAkBhB,OAAOmB,gBAAkB,SAAyBF,EAAGC,GAErE,OADAD,EAAEG,UAAYF,EACPD,IAGcA,EAAGC,GAG5B,SAASG,EAAuBrC,GAC9B,QAAa,IAATA,EACF,MAAM,IAAIsC,eAAe,6DAG3B,OAAOtC,ECzDF,ICAMuC,EAAb,WAAA,SAAAA,KAAA,OAAAA,EAEQC,MAAP,SAAahC,EAAQiC,GAAQ,IAAAC,EAAArC,KAW5B,MAVsB,iBAAXoC,GACVzB,OAAO2B,KAAKF,GAAQG,SAAQ,SAAA1B,GAC3B,IAAMQ,EAAQe,EAAOvB,GACA,iBAAVQ,GAAuBmB,MAAMC,QAAQpB,GAG/ClB,EAAOU,GAAOQ,EAFdlB,EAAOU,GAAOwB,EAAKF,MAAMhC,EAAOU,GAAMQ,MAMlClB,GAbT+B,EAAA,GCGaQ,EAA0B,oBAAXpD,QAA0BA,OAAOD,QAGhDsD,IAFSD,EAAO,CAAEE,IAAK,cAAc,IAAIC,gBAAgBC,OAAOC,SAASC,SAChDJ,IAAI,SACjBF,EAAO,KAAOO,SAASC,cAAc,QAAQC,aAAa,SACtEC,GAASV,IAAgBI,SAAyD,IAA/CA,OAAOC,SAASM,KAAKC,QAAQ,cAChEC,GAASb,IAAgBU,GAAWN,SAAoC,UAAzBA,OAAOC,SAASS,MAA6C,SAAzBV,OAAOC,SAASS,MAA4C,SAAzBV,OAAOC,SAASS,MAA4C,uBAAzBV,OAAOC,SAASM,OACzKI,GAAcf,IAAgBI,SAAiG,IAAvF,CAAC,YAAa,YAAa,WAAWQ,QAAQR,OAAOC,SAASM,KAAKK,MAAM,KAAK,KAEtHC,EAAM,CAClBJ,OAAAA,EACAE,YAAAA,EACAG,YAJ0BH,GAOdI,EAAb,WAAA,IAAAC,EAAAD,EAAA3C,UAmCC,SAAA2C,EAAYE,GACPA,GACHpD,OAAOqD,OAAOhE,KAAM+D,GArCvB,OAAAD,EAkBCG,eAAA,SAAeC,EAAMC,GACpB,IAAIC,EAAG,GAAMtB,OAAOC,SAASsB,OAASH,EAKtC,OAHAvD,OAAO2B,KAAK6B,GAAQ5B,SAAQ,SAAA1B,GAC3BuD,EAAMA,EAAIE,QAAJ,IAAgBzD,EAAOsD,EAAOtD,OAE9BuD,GAxBTN,EA2BCS,QAAA,SAAQL,GACP,OAAOlE,KAAKwE,QAAQN,GAASlE,KAAKyE,KAAOP,EAAQA,GA5BnDJ,EA+BCU,QAAA,SAAQN,GACP,OAAgC,IAAzBA,EAAKZ,QAAQ,QAhCtBxC,EAAA+C,EAAA,CAAA,CAAAhD,IAAA,SAAA+B,IAEC,WACC,OAAOe,EAAIJ,QAHbmB,IAKC,SAAWnB,GACVI,EAAIJ,QAAqB,IAAXA,GAA8B,SAAXA,EACjCoB,QAAQC,IAAI,yBAA0BjB,EAAIJ,UAP5C,CAAA1C,IAAA,OAAA+B,IAUC,WACC,OAAIQ,EACIpD,KAAK6E,WAELlC,MAdVkB,EAAA,GA0CMiB,EAAiB,CACtBtB,KAAM,IACNuB,MAAO,CACNC,YAAY,EACZC,OAAQ7B,GAET8B,KAAM,GACNC,UAAW,CAAC,KAAM,MAClBC,gBAAiB,KACjBC,OAAQ,CACPC,OAAQ,YACRC,OAAQ,UACRC,OAAQ,UACRC,YAAa,mBACbC,YAAa,4BACbC,eAAgB,qBAChBC,QAAS,cACTC,OAAQ,UACRC,SAAU,YACVC,YAAa,wBACbC,OAAQ,WACRC,OAAQ,SACRC,qBAAsB,mCAIlBC,EAAqBrD,OAAOS,OCrFD,CAChCwB,MAAO,CACNC,YAAY,GAEboB,IAAK,iBACLC,OAAQ,cACRC,QAAS,CACRC,MAAO,uCACPC,SAAU,2CAEX3B,WAAY,kEACZK,KAAM,CACLuB,iBAAgB,qCAChBC,aAAY,iCAEbC,SAAU,CACTC,MAAO,CACNC,UAAW,+BAGbC,WAAY,CACXC,OAAQ,4CHrBuB,CAChChC,MAAO,CACNC,YAAY,GAEboB,IAAK,OACLC,OAAQ,gBACRC,QAAS,CACRC,MAAO,kDACPC,SAAU,sDAEX3B,WAAY,kEACZK,KAAM,CACLuB,iBAAgB,uCAChBC,aAAY,mCAEbC,SAAU,CACTC,MAAO,CACNC,UAAW,uCAGbC,WAAY,CACXC,OAAQ,4CEkENhD,EAAUpD,OAAOqD,OAAOc,EAAgBqB,GAG/Ba,EAAc,IAAInD,EAF/BE,EAAU7B,EAAMC,MAAM4B,EAASjB,OAAOkE,cAItCrC,QAAQC,IAAI,cAAeoC,GAA3B,IExEaC,EAAb,WAAA,SAAAA,KAAA,OAAAA,EAEQC,MAAP,SAAaC,EAAQ/C,EAAKgD,EAAMC,EAAiBC,GAAiB,IAAAjF,EAAArC,UAAA,IAAjBsH,IAAAA,EAAW,MAC3D,IACIC,EAAY,KAEVxD,EAAU,CACfoD,OAAQA,EACRK,QAAS,CACRC,OAAU,mBACVC,eAAgB,oBAEjBC,MAAmC,IATpB,CAAC,OAAQ,MAAO,SASjBrE,QAAQ6D,GAAiBS,KAAKC,UAAUT,QAAQU,GAS/D,OAPIR,IAEHvD,EAAQgE,YAAc,UACtBT,EAAWxE,OAAOkF,KAAKV,GACvBvD,EAAQyD,QAAR,cAAA,SAA4CF,GAE7CvD,EAAQyD,QAAU,IAAIS,QAAQlE,EAAQyD,SAC/BU,EAAAA,KAAKC,MAAM/D,EAAKL,GAASqE,MAAK,SAACC,GACrCd,EAAYc,EAEZ,IACC,IACIC,EADEC,EAAcF,EAASb,QAAQ5E,IAAI,gBAOzC,OAJC0F,EADGC,IAA4D,IAA7CA,EAAYjF,QAAQ,oBACtB+E,EAASG,OAETH,EAASI,OAEtBJ,EAASK,GACLJ,EAEAA,EAAcF,MAAK,SAAAhB,GACzB,OAAOuB,QAAQC,OAAOxB,MAGvB,MAAOyB,GACR,OAAIR,EAASK,IACZ/D,QAAQmE,KAAK,oBAAqB,yBAC3BH,QAAQI,WAERJ,QAAQC,OAAOC,QAGrBG,KACHC,EAAAA,YAAW,SAAAJ,GACV,OAAOK,EAAAA,WAAW7G,EAAK8G,SAASN,EAAOtB,SAjD3CN,EA6GQmC,KAAP,SAAYhF,EAAKgD,EAAMC,GACtB,IAAMgC,EAAQrJ,KAAKqJ,MAAMjC,GACzB,OAAOpH,KAAKkH,MAAM,MAAX,GAAqB9C,EAAMiF,OAASvB,EAAWT,IA/GxDJ,EAkHQqC,QAAP,SAAelF,GACd,OAAOpE,KAAKkH,MAAM,SAAU9C,IAnH9B6C,EAsHQsC,MAAP,SAAanF,EAAKgD,GACjB,OAAOpH,KAAKkH,MAAM,OAAQ9C,EAAKgD,IAvHjCH,EA0HQuC,KAAP,SAAYpF,EAAKgD,GAChB,OAAOpH,KAAKkH,MAAM,MAAO9C,EAAKgD,IA3HhCH,EA8HQwC,OAAP,SAAcrF,EAAKgD,GAClB,OAAOpH,KAAKkH,MAAM,QAAS9C,EAAKgD,IA/HlCH,EAkIQoC,MAAP,SAAajC,GACZ,MAAO,IAnITH,EAsIQkC,SAAP,SAAgBO,EAAQrB,GACvB,IAAIQ,EAA0B,iBAAXa,EAAsBA,EAAS,GAWlD,OAVKb,EAAMc,SACVd,EAAMc,OAAStB,EAAWA,EAASsB,OAAS,GAExCd,EAAMe,aACVf,EAAMe,WAAavB,EAAWA,EAASsB,OAAS,GAE5Cd,EAAMgB,gBACVhB,EAAMgB,cAAgBxB,EAAWA,EAASyB,WAAaJ,GAGjDb,GAlJT5B,EAAA,GCjBa8C,EAAb,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAAC,MAAAjK,KAAAkK,YAAAlK,KAAA,OAAAsB,EAAAyI,EAAAC,GAAAD,EAEQI,UAAP,SAAiBtJ,GAEhB,OADekJ,EAAUK,QACXvJ,IAAQA,GAJxBkJ,EAOQM,QAAP,WAAwB,IAAA,IAAAC,EAAAJ,UAAA5J,OAANgC,EAAM,IAAAE,MAAA8H,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAANjI,EAAMiI,GAAAL,UAAAK,GACvB,OAAOR,EAAUI,UAAU7H,EAAKkI,KAAI,SAAAC,GAAC,OAAIA,EAAEnG,QAAQ,IAAK,QAAMoG,KAAK,OARrEX,EAWQY,UAAP,WACC,IAAMC,EAAS1I,EAAMC,MAAM,CAC1BmD,OAAQ,YACRC,OAAQ,UACRC,OAAQ,UACRC,YAAa,mBACbC,YAAa,4BACbC,eAAgB,qBAChBC,QAAS,cACTC,OAAQ,UACRC,SAAU,YACVC,YAAa,wBACbC,OAAQ,WACRC,OAAQ,SACRC,qBAAsB,kCACpBc,EAAY3B,QACfrF,KAAKoK,QAAUQ,GA3BjBb,EAAA,CAA+Bc,EAAAA,MA+B/Bd,EAAUY,YAEVZ,EAAUe,KAAO,CAChBC,KAAM,SADP,ICrCaC,EAAb,WAAA,SAAAA,KAAA,OAAAA,EAEQC,IAAP,SAAWpK,GAGV,OAFe,IAAIgC,gBAAgBC,OAAOC,SAASC,QAErCiI,IAAIpK,IALpBmK,EAQQpI,IAAP,SAAW/B,GAGV,OAFe,IAAIgC,gBAAgBC,OAAOC,SAASC,QAErCJ,IAAI/B,IAXpBmK,EAcQtG,IAAP,SAAWwG,EAAY7J,GACtB,IAAM8C,EAAS,IAAItB,gBAAgBC,OAAOC,SAASC,QACzB,iBAAfkI,EACV/G,EAAOO,IAAIwG,EAAY7J,GAEvB8C,EAAOO,IAAIwG,EAAY,IAExBlL,KAAKmL,WAAWhH,IArBlB6G,EAyBQG,WAAP,SAAkBhH,GACjB,GAAIrB,OAAOsI,SAAWtI,OAAOsI,QAAQC,UAAW,CAC/C,IAAMC,EAAQrI,SAASqI,MACjBlH,EAAStB,OAAOC,SAAS0B,KAAKf,MAAM,KAAK,GAAtC,IAA4CS,EAAOoH,WAC5DzI,OAAOsI,QAAQC,UAAUlH,EAAOoH,WAAYD,EAAOlH,KA7BtD4G,EAiCQ1G,QAAP,SAAe4D,EAAMsD,GACpB,IAAMJ,EAAUtI,OAAOsI,QACvB,GAAIA,GAAWA,EAAQK,aAAc,CACpC,IAAM1I,EAAWD,OAAOC,SAClBuI,EAAQrI,SAASqI,MACvB,GAA0B,MAAtBvI,EAAS2I,SAAkB,CAC9B,IAAMtH,EAAMrB,EAASsB,OAASmH,EAAKzI,EAASC,OAC5CoI,EAAQK,aAAaL,EAAQO,MAAOL,EAAOlH,QACrC,IAAqC,IAAjCrB,EAAS0B,KAAKnB,QAAQ4E,GAAc,CAC9C,IAAM9D,EAAMrB,EAAS0B,KAAKH,QAAQ4D,EAAMsD,GACxCJ,EAAQK,aAAaL,EAAQO,MAAOL,EAAOlH,MA3C/C4G,EAgDQY,YAAP,SAAmB/K,GAClB,IAAMgL,EAAU7L,KAAK4C,IAAI,UACzB,OAAO5C,KAAK8L,OAAOjL,EAAKgL,IAlD1Bb,EAqDQe,UAAP,SAAiBb,EAAY7J,GAC5B,IAAM8C,EAASnE,KAAK4L,cACdC,EAAU7L,KAAKgM,OAAOd,EAAY7J,EAAO8C,GAC/CnE,KAAK0E,IAAI,SAAUmH,IAxDrBb,EA2DQc,OAAP,SAAcjL,EAAKgL,GAClB,IAAII,EAAU,KACd,GAAIJ,EAAS,CACZ,IAAMrD,EAAO1F,OAAOoJ,KAAKL,GACzBI,EAAUrE,KAAKuE,MAAM3D,GAKtB,OAHI3H,GAAOoL,IACVA,EAAUA,EAAQpL,IAEZoL,GAAW,MApEpBjB,EAuEQgB,OAAP,SAAcd,EAAY7J,EAAO8C,GAChCA,EAASA,GAAU,GAEO,iBAAf+G,EACV/G,EAAO+G,GAAc7J,EAErB8C,EAAS+G,EAEV,IAAM1C,EAAOZ,KAAKC,UAAU1D,GAE5B,OADUrB,OAAOkF,KAAKQ,IAhFxBwC,EAAA,GCOaoB,EAAb,WAAA,SAAAA,KAAA,OAAAA,EAcQC,oBAAP,WACC,OAAOrF,EAAYsF,YAAc,IAfnCF,EAkBQG,mBAAP,WACC,OAAOvF,EAAY5B,kBAAoBpF,KAAKmF,UAAYnF,KAAKmF,UAAU,GAAGqH,KAAO,OAnBnFJ,EAsBQK,YAAP,SAAmBC,GAClB1M,KAAK2M,iBAAmBD,EAASF,MAvBnCJ,EA0BQQ,aAAP,SAAoBF,GAAU,IAAArK,EAAArC,KAC7B,OAAOkI,EAAAA,KAAKC,MAAMuE,EAASjI,MAAM2D,MAAK,SAAAC,GACrC,OAAOA,EAASI,WACbO,KACH6D,EAAAA,KAAI,SAAAC,GAEH,IAAMC,EAAc,kQAAsDC,KAAKF,GAC3EC,IAEH,IAAIE,SAASF,EAAY,IAAIG,KAAKpK,QAClCiH,EAAUY,aAEX,IAAMwC,EAAa,iQAAqDH,KAAKF,GAC7E,GAAIK,EAAY,CAEf,IAAM/F,EAAO,GACb,IAAI6F,SAASE,EAAW,GAAG7I,QAAQ,SAAU,SAAS4I,KAAK9F,GACvDA,EAAKgG,OACRlL,EAAMC,MAAM6E,EAAaI,EAAKgG,OAGhCpC,EAAgB1G,QAAQjC,EAAKgL,eAAe5I,KAAMiI,EAASjI,MAE3DpC,EAAKsK,iBAAmBD,EAASF,UAjDrCJ,EAsDQkB,gBAAP,WACCtN,KAAKuN,eAAiBvN,KAAKuN,cAC3BvN,KAAKwN,eAxDP1M,EAAAsL,EAAA,KAAA,CAAA,CAAAvL,IAAA,eAAA+B,IAMC,WACC,OAAO5C,KAAKmF,UAAU7E,OAAS,IAPjC,CAAAO,IAAA,iBAAA+B,IAUC,WAA4B,IAAA6K,EAAAzN,KAC3B,OAAOA,KAAKmF,UAAUuI,MAAK,SAAAhB,GAAQ,OAAIA,EAASF,OAASiB,EAAKd,wBAXhEP,EAAA,GRglBAjL,EQhlBaiL,EAAAA,YAAAA,EAEYC,uBRglBzBlL,EQllBaiL,EAAAA,kBAAAA,EAGkBG,sBRilB/BpL,EQplBaiL,EAAAA,mBAAAA,EAImBhH,iBAAAA,ICPnBuI,EAAb,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAA3D,MAAAjK,KAAAkK,YAAAlK,KAAA,OAAAsB,EAAAqM,EAAAC,GAAAD,EAIQvE,KAAP,SAAYhF,EAAKgD,EAAMC,GACtB,OAAAuG,EAAaxE,KAAb8D,KAAAlN,KAAA,GAAqBgH,EAAYZ,IAAMhC,EAAOgD,EAAMC,IALtDsG,EAQQrE,QAAP,SAAelF,GACd,OAAAwJ,EAAatE,QAAb4D,KAAAlN,KAAA,GAAwBgH,EAAYZ,IAAMhC,IAT5CuJ,EAYQpE,MAAP,SAAanF,EAAKgD,GACjB,OAAAwG,EAAarE,MAAb2D,KAAAlN,KAAA,GAAsBgH,EAAYZ,IAAMhC,EAAOgD,IAbjDuG,EAgBQnE,KAAP,SAAYpF,EAAKgD,GAChB,OAAAwG,EAAapE,KAAb0D,KAAAlN,KAAA,GAAqBgH,EAAYZ,IAAMhC,EAAOgD,IAjBhDuG,EAoBQlE,OAAP,SAAcrF,EAAKgD,GAClB,OAAAwG,EAAanE,OAAbyD,KAAAlN,KAAA,GAAuBgH,EAAYZ,IAAMhC,EAAOgD,IArBlDuG,EAAA,CAAgC1G,GTqnBhC9F,ESrnBawM,EAAAA,kBAEavB,EAAgBiB,gBAAAA,ICN7BQ,EAAb,WAAA,SAAAA,KAAA,OAAAA,EAEQC,OAAP,SAAc/C,GACT/K,KAAK+N,6BACRjL,OAAOkL,eAAeC,WAAWlD,IAJpC8C,EAQQK,MAAP,SAAanD,GACZ,GAAI/K,KAAK+N,4BACR,YAAuCjG,IAAhChF,OAAOkL,eAAejD,IAVhC8C,EAcQjL,IAAP,SAAWmI,GACV,IAAI1J,EAAQ,KACZ,GAAIrB,KAAK+N,kCAA+DjG,IAAhChF,OAAOkL,eAAejD,GAC7D,IACC1J,EAAQuG,KAAKuE,MAAMrJ,OAAOkL,eAAejD,IACxC,MAAOoD,GACRxJ,QAAQC,IAAI,0CAA2CmG,EAAMoD,GAG/D,OAAO9M,GAvBTwM,EA0BQnJ,IAAP,SAAWqG,EAAM1J,GAChB,GAAIrB,KAAK+N,4BACR,IACC,IAAMK,EAAQ,GACR5F,EAAOZ,KAAKC,UAAUxG,GAAO,SAASR,EAAKQ,GAChD,GAAqB,iBAAVA,GAAgC,OAAVA,EAAgB,CAChD,IAA8B,IAA1B+M,EAAM9K,QAAQjC,GAEjB,OAED+M,EAAMC,KAAKhN,GAEZ,OAAOA,KAERyB,OAAOkL,eAAeM,QAAQvD,EAAMvC,GACnC,MAAO2F,GACRxJ,QAAQC,IAAI,8CAA+CmG,EAAM1J,EAAO8M,KA1C5EN,EA+CQE,0BAAP,WACC,GAAI/N,KAAKuO,UACR,OAAO,EAER,IAAIA,GAAY,EAChB,KACCA,EAAY,mBAAoBzL,QAAoC,OAA1BA,OAAOkL,iBAEhDlL,OAAOkL,eAAeM,QAAQ,OAAQ,KACtCxL,OAAOkL,eAAeC,WAAW,SAEjCM,GAAY,EAEZ,MAAOJ,GACRI,GAAY,EAGb,OADAvO,KAAKuO,UAAYA,EACVA,GAhETV,EAAA,GCKaW,EAAY,CACxBC,QAAS,EACTC,QAAS,EACTC,UAAW,GAGCC,EAAb,WAUC,SAAAA,EAAYxH,GACPA,GACHzG,OAAOqD,OAAOhE,KAAMoH,GAZvB,OAAAtG,EAAA8N,EAAA,CAAA,CAAA/N,IAAA,SAAA+B,IAEC,WACC,OAAQ5C,KAAK6O,WAAa,KAAKC,OAAO,EAAG,GAAGC,eAAiB/O,KAAKgP,UAAY,KAAKF,OAAO,EAAG,GAAGC,gBAHlG,CAAAlO,IAAA,WAAA+B,IAMC,WACC,OAAO5C,KAAK6O,UAAY,IAAM7O,KAAKgP,aAPrCJ,EAAA,GAkBaK,EAAb,WAAA,SAAAA,KAAA,OAAAA,EAQQC,QAAP,SAAeC,GACVA,EACHtB,EAAsBnJ,IAAI,OAAQyK,GAElCtB,EAAsBC,OAAO,QAE9B9N,KAAKoP,OAAOC,KAAKF,IAdnBF,EAiBQK,MAAP,WACC,OAAO3B,EAAWvE,KAAK,oBAlBzB6F,EAqBQM,QAAP,SAAeC,GACd,OAAO7B,EAAWvE,KAAX,oBAAqCoG,IAtB9CP,EAyBQQ,IAAP,WAAa,IAAApN,EAAArC,KACN0P,EAAc7B,EAAsBjL,IAAI,QAC9C,OAAI8M,EACIC,EAAAA,GAAGD,GAAa1G,KACtB4G,EAAAA,WAAU,SAAAT,GAET,OADA9M,EAAK6M,QAAQ,IAAIN,EAAKO,IACf9M,EAAK+M,WAIPzB,EAAWvE,KAAX,iBAAiCJ,KACvCwB,EAAAA,KAAI,SAACnC,GACJhG,EAAKwN,QAAQxH,MAEdY,EAAAA,YAAW,SAAA6G,GAAC,OAAIH,EAAAA,GAAG,SACnBC,EAAAA,WAAU,SAAAT,GAET,OADA9M,EAAK6M,QAAQC,GACN9M,EAAK+M,UAEb5E,EAAAA,KAAI,SAAA2E,GAAI,OAAIA,GAAQ,UA5CxBF,EAiDQc,QAAP,SAAeP,GAAS,IAAA/B,EAAAzN,KACvB,OAAO2N,EAAWvE,KAAX,oBAAqCoG,GAASxG,KACpDwB,EAAAA,KAAI,SAACnC,GAAD,OAAcoF,EAAKoC,QAAQxH,MAC/BwE,EAAAA,KAAI,SAACsC,GAAD,OAAU1B,EAAKyB,QAAQC,QApD9BF,EAwDQe,SAAP,WAAkB,IAAAC,EAAAjQ,KACjB,OAAO2N,EAAWvE,KAAX,sBAAsCJ,KAC5C6D,EAAAA,KAAI,SAACiD,GAAD,OAAOG,EAAKf,QAAQ,WA1D3BD,EA8DQiB,QAAP,SAAeV,GAAS,IAAAW,EAAAnQ,KACvB,OAAO2N,EAAWvE,KAAX,oBAAqCoG,GAASxG,KACpDwB,EAAAA,KAAI,SAACnC,GAAD,OAAc8H,EAAKN,QAAQxH,MAC/BwE,EAAAA,KAAI,SAACsC,GAAD,OAAUgB,EAAKjB,QAAQC,QAjE9BF,EAqEQmB,gBAAP,WACC,OAAOT,EAAAA,GAAG9B,EAAsBjL,IAAI,SAAW,OAtEjDqM,EAyEQY,QAAP,SAAeV,GACd,OAAOA,EAAO,IAAIP,EAAKO,GAAQ,MA1EjCF,EA6EQoB,SAAP,SAAgBC,GACf,OAAOA,EAAQA,EAAM9F,KAAI,SAAAC,GAAC,OAAIwE,EAAYY,QAAQpF,MAAM,IA9E1D3J,EAAAmO,EAAA,KAAA,CAAA,CAAApO,IAAA,cAAA+B,IAIC,WACC,OAAO5C,KAAKoP,OAAOmB,eALrBtB,EAAA,GXsyBA9N,EWtyBa8N,EAAAA,SAEI,IAAIuB,EAAAA,gBAAgB,OAApB,IC5BJC,EAEZ,SAAYrJ,GACXpH,KAAKoH,KAAOA,GAKDsJ,EAAb,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAA1G,MAAAjK,KAAAkK,YAAAlK,KAAA,OAAAsB,EAAAoP,EAAAC,GAAAD,EAAA,CAAuCD,GAC1BG,EAAb,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAA5G,MAAAjK,KAAAkK,YAAAlK,KAAA,OAAAsB,EAAAsP,EAAAC,GAAAD,EAAA,CAAsCH,GAEzBK,EAAb,WAAA,SAAAA,KAAA,OAAAA,EAIQC,MAAP,SAAanK,GAAO,IAAAvE,EAAArC,KACnB,OAAOA,KAAKgR,aAAapK,EAAMqK,KAAKjI,KACnCwB,EAAAA,KAAI,SAAA7D,GACH,MAAO,CAAEuK,KAAM7O,EAAK8O,QAAQxK,GAAWS,KAAMR,EAAMQ,KAAMR,MAAOA,MAEjEiG,EAAAA,KAAI,SAAAqE,GACH7O,EAAK+O,OAAO/B,KAAK6B,GACjB7O,EAAKgP,UAAW,KAEjBzB,EAAAA,WAAU,SAAAsB,GAAI,OAAI7O,EAAKiP,WACvBzE,EAAAA,KAAI,SAAAiD,GAAC,OAAIzN,EAAKgP,UAAW,OAd5BP,EAkBQS,MAAP,SAAa3K,KAlBdkK,EAsBQE,aAAP,SAAoB5M,GACnB,OAAO8D,EAAAA,KAAKC,MAAM/D,GAAKgE,MAAK,SAAAC,GAC3B,OAAOA,EAASI,YAxBnBqI,EA4BQK,QAAP,SAAexK,GACd,IAAM6K,EAAMvO,SAASwO,cAAc,OAGnC,OAFAD,EAAIE,UAAY/K,EACH6K,EAAIG,mBA/BnBb,EAmCQlI,OAAP,SAAcxB,GACbpH,KAAKoR,OAAO/B,KAAK,MACjBrP,KAAKsR,QAAQjC,KAAK,IAAIuB,EAAiBxJ,KArCzC0J,EAwCQ/H,QAAP,SAAe3B,GACdpH,KAAKoR,OAAO/B,KAAK,MACjBrP,KAAKsR,QAAQjC,KAAK,IAAIqB,EAAkBtJ,KA1C1C0J,EAAA,GZ63BA3P,EY73Ba2P,EAAAA,YAEM,GA6CnBA,EAAaM,OAAS,IAAIQ,EAAAA,QAC1Bd,EAAaQ,QAAU,IAAIM,EAAAA,QAA3B,ICxDaC,EAAb,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAA7H,MAAAjK,KAAAkK,YAAAlK,KAAAsB,EAAAuQ,EAAAC,GAAA,IAAAhO,EAAA+N,EAAA3Q,UAAA,OAAA4C,EAECiO,OAAA,WACkBC,EAAAA,WAAWhS,MAApBkR,KACHe,UAAUpM,OAAO,UACtBlB,QAAQC,IAAI,wBALdd,EAQCoO,QAAA,WACCpB,EAAaC,MAAM,CAAEE,IAAKjK,EAAYL,SAASC,MAAMC,UAAWO,KAAM,CAAE+K,KAAM,KAAOnJ,KACpFoJ,EAAAA,UAAUpS,KAAKqS,eACdC,WAAU,SAAAC,GACX5N,QAAQC,IAAI,uBAAwB2N,GAChCA,aAAiB7B,IACpB5N,OAAOC,SAAS0B,KAAOuC,EAAY9B,KAAKwB,kBAd5C5C,EAmBC0O,SAAA,WACCvD,EAAYe,WAAWhH,KACtByJ,SACCH,aAtBJT,EAAA,CAAkCa,EAAAA,WA0BlCb,EAAa/G,KAAO,CACnB6H,SAAU,mBC/BJ,IAAMC,EACJ,SADIA,EAGR,KAHQA,EAIL,QAGKC,EAAb,WAEC,SAAAA,EAAYC,GACX9S,KAAK+S,QAAU,IAAIvC,EAAAA,gBACnBxQ,KAAKgT,KAAOJ,EACZ5S,KAAK8S,OAAS,SACd9S,KAAKiT,YAAc,SACnBjT,KAAKkT,OAAS,GACdlT,KAAK+D,QAAU,GACX+O,GACHnS,OAAOqD,OAAOhE,KAAM8S,GAEjBA,EAAOE,OAASJ,GACnBE,EAAO/O,QAAQoP,QAAQ,CACtBC,MAAON,EAAOG,YACd5R,WAAOyG,IAfX,IAAAhE,EAAA+O,EAAA3R,UAAA,OAAA4C,EAoBCgP,OAAA,SAAOO,EAAMhS,GACZ,OAAwC,IAAjCgS,EAAKtP,QAAQT,QAAQjC,IArB9ByC,EAwBCwP,MAAA,SAAMD,GAAM,IACPC,EADOjR,EAAArC,KAaX,OAXIA,KAAKgT,OAASJ,GACjBU,GAAQtT,KAAKkT,OAAO5S,OACpBN,KAAKkT,OAAO3Q,SAAQ,SAAAlB,GACnBiS,EAAQA,GAASjR,EAAKyQ,OAAOO,EAAMhS,QAGpCiS,GAAQ,EACRtT,KAAKkT,OAAO3Q,SAAQ,SAAAlB,GACnBiS,EAAQA,GAASjR,EAAKyQ,OAAOO,EAAMhS,OAG9BiS,GArCTxP,EAwCCyP,SAAA,WACC,OAAIvT,KAAKgT,OAASJ,GAAqB5S,KAAKgT,OAASJ,IAC7C5S,KAAKiT,aAELjT,KAAKoT,OA5CftP,EAgDCmH,IAAA,SAAIoI,GACH,OAA4C,IAArCrT,KAAKkT,OAAO5P,QAAQ+P,EAAKhS,QAjDlCyC,EAoDCY,IAAA,SAAI2O,GACCrT,KAAKgT,OAASJ,GACjB5S,KAAKkT,OAASG,EAAO,CAACA,GAAQ,GAC9BrT,KAAKiT,YAAcI,IAEfrT,KAAKgT,OAASJ,IACjB5S,KAAKkT,OAAS,KAGA,IADDlT,KAAKkT,OAAO5P,QAAQ+P,EAAKhS,aAEnByG,IAAfuL,EAAKhS,OACRrB,KAAKkT,OAAO7E,KAAKgF,EAAKhS,OAGpBrB,KAAKgT,OAASJ,IACjB5S,KAAKiT,YAAcI,EAAKD,QAI1BpT,KAAK+S,QAAQ1D,QAvEfvL,EA0EC+B,OAAA,SAAOwN,GACN,IAAMG,EAAQxT,KAAKkT,OAAO5P,QAAQ+P,EAAKhS,OAIvC,IAHe,IAAXmS,GACHxT,KAAKkT,OAAOO,OAAOD,EAAO,GAEvBxT,KAAKgT,OAASJ,EAAmB,CACpC,IAAMH,EAAQzS,KAAK+D,QAAQ,GAC3B/D,KAAKiT,YAAcR,EAAMW,MAG1BpT,KAAK+S,QAAQ1D,QApFfvL,EAuFC4P,OAAA,SAAOL,GACFrT,KAAKiL,IAAIoI,GACZrT,KAAK6F,OAAOwN,GAEZrT,KAAK0E,IAAI2O,IA3FZvP,EA+FC6P,MAAA,WAEC,GADA3T,KAAKkT,OAAS,GACVlT,KAAKgT,OAASJ,EAAmB,CACpC,IAAMH,EAAQzS,KAAK+D,QAAQ,GAC3B/D,KAAKiT,YAAcR,EAAMW,MAE1BpT,KAAK+S,QAAQ1D,QArGfwD,EAAA,GCJae,EAAb,WAEC,SAAAA,EAAY7P,EAAS8P,EAAeC,GACnC,IAAMC,EAAU,GACZhQ,GACHpD,OAAO2B,KAAKyB,GAASxB,SAAQ,SAAA1B,GAC5B,IAAMiS,EAAS,IAAID,EAAW9O,EAAQlD,IACd,mBAAbiT,GACVA,EAASjT,EAAKiS,GAEfiB,EAAQlT,GAAOiS,KAGjB9S,KAAK+T,QAAUA,EACf/T,KAAK4L,YAAY5L,KAAK+T,QAASF,GAdjC,IAAA/P,EAAA8P,EAAA1S,UAAA,OAAA4C,EAiBCkQ,eAAA,SAAe7P,GACd,OAAIA,EACiBxD,OAAO2B,KAAK6B,GAAQ8P,QAAO,SAACpS,EAAGqS,EAAG7T,GACrD,IAAM6S,EAAS/O,EAAO+P,GACtB,OAAOrS,GAAKqR,EAASA,EAAO5S,OAAS,KACnC,GAGI,GAzBVwD,EA6BC8H,YAAA,SAAYmI,EAASF,GACpB,IAAI1P,EACA0P,GAAiB7T,KAAKgU,eAAeH,KACxC1P,EAAS0P,GAEV,IAAMM,EAAiBnJ,EAAgBY,YAAY,WASnD,OARIuI,GAAkBnU,KAAKgU,eAAeG,KACzChQ,EAASgQ,GAENhQ,GACHxD,OAAO2B,KAAKyR,GAASxR,SAAQ,SAAA1B,GAC5BkT,EAAQlT,GAAKqS,OAAS/O,EAAOtD,IAAQ,MAGhCkT,GA3CTjQ,EA8CCiI,UAAA,SAAUgI,GACT,IAAI5P,EAAS,GACTiQ,GAAM,EAaV,OAZAzT,OAAO2B,KAAKyR,GAASxR,SAAQ,SAAAkI,GAC5B,IAAMqI,EAASiB,EAAQtJ,GACF,OAAjBqI,EAAOzR,QACV8C,EAAOsG,GAAKqI,EAAOI,OACnBkB,GAAM,MAGHA,IACJjQ,EAAS,MAGV6G,EAAgBe,UAAU,UAAW5H,GAC9BA,GA7DTL,EAgECuQ,OAAA,SAAOC,GAAO,IAAAjS,EAAArC,KACP+T,EAAU/T,KAAK+T,QACfQ,EAAU5T,OAAO2B,KAAKyR,GAASvJ,KAAI,SAAA3J,GAAG,OAAIkT,EAAQlT,GAAKkS,WAC7D,OAAO5Q,EAAAA,MAAK8H,WAAL,EAASsK,GAASvL,KAExB6D,EAAAA,KAAI,WAAA,OAAMxK,EAAK0J,UAAUgI,MACzBvJ,EAAAA,KAAI,WAAA,OAAMnI,EAAKmS,YAAYF,MAC3BzH,EAAAA,KAAI,WAAA,OAAMxK,EAAKoS,mBAAmBV,EAASO,QAvE9CxQ,EA2EC0Q,YAAA,SAAYF,EAAOI,GAAY,IAAAjH,EAAAzN,KACxB+T,EAAUpT,OAAO2B,KAAKtC,KAAK+T,SAASvJ,KAAI,SAACC,GAAD,OAAOgD,EAAKsG,QAAQtJ,MAAIqI,QAAO,SAAArI,GAAC,OAAgB,OAAZA,EAAEpJ,SAUpF,OATAiT,EAAQA,EAAMxB,QAAO,SAAAO,GACpB,IAAIpI,GAAM,EAMV,OALA8I,EAAQxR,SAAQ,SAAAuQ,GACXA,IAAW4B,IACdzJ,EAAMA,GAAO6H,EAAOQ,MAAMD,OAGrBpI,MApFVnH,EAyFC2Q,mBAAA,SAAmBV,EAASO,GAAO,IAAArE,EAAAjQ,KAClCW,OAAO2B,KAAKyR,GAASxR,SAAQ,SAAAkI,GAC5B,IAAMqI,EAASiB,EAAQtJ,GACjBkK,EAAgB1E,EAAKuE,YAAYF,EAAOxB,GAC9CA,EAAO/O,QAAQxB,SAAQ,SAAAqS,GACtB,IAAIC,EAAQ,EACZ,GAAID,EAAOvT,MAEV,IADA,IAAIhB,EAAI,EACDA,EAAIsU,EAAcrU,QAAQ,CAChC,IAAM+S,EAAOsB,EAActU,GACvByS,EAAOA,OAAOO,EAAMuB,EAAOvT,QAC9BwT,IAEDxU,SAGDwU,EAAQF,EAAcrU,OAEvBsU,EAAOC,MAAQA,EACfD,EAAOE,SAAqB,IAAVD,SA5GtB/Q,EAiHCiR,MAAA,WAAQ,IACHjC,EADG3C,EAAAnQ,KAEPW,OAAO2B,KAAKtC,KAAK+T,SAASxR,SAAQ,SAAAkI,IACjCqI,EAAS3C,EAAK4D,QAAQtJ,IACfyI,OAAS,MAEbJ,GACHA,EAAOC,QAAQ1D,QAxHlBuE,EAAA,GCJaoB,EAAb,WAAA,SAAAA,KAAA,OAAAA,EAEQC,gBAAP,SAAuBlR,GAGtB,OAFAA,EAAUA,EAAQmR,QAAQ1K,KAAI,SAAAC,GAAC,MAAK,CAAE0K,GAAI1K,EAAEpJ,MAAO0J,KAAMN,EAAE2I,WACnDD,QAAQ,CAAEgC,GAAI,KAAMpK,KAAM,WAC3BhH,GALTiR,EAAA,GCEaI,EAAb,WAAA,SAAAA,KAAA,OAAAA,EAGQC,OAAP,SAAcA,GAEbrV,KAAKsV,QAAQjG,KAAKgG,IALpBD,EAQQG,KAAP,SAAYrE,EAAMnN,GA+BjB,GA9BAA,EAAUpD,OAAOqD,OAAO,CACvBwR,aAAa,EACbC,cAAc,EACdC,QAAS,GAITC,QAAQ,EAGRC,KAAM,IACNC,cAAc,EACdC,UAAU,EAEVC,UAAW,kBACXC,eAAgB,uBAChBC,cAAe,sBACfC,YAAa,oBACbC,oBAAoB,EACpBC,eAAgB,cAChBC,WAAY,EACZC,kBAAmB,GACnBC,gBAAiB,EACjBC,oBAAoB,EACpBC,iBAAkB,WAClBC,uBAAuB,EACvBC,mBAAmB,GACjB5S,EAAS,CACX6S,GAAI1F,IAEDlR,KAAK6W,sBAAuB,CAC/B,IAAMC,EAAW,IAAIC,iBAAiBhT,GAEtC,OADAqR,EAAwB0B,SAAWA,EAC5BA,EAEP7T,SAASC,cAAc,QAAQ+O,UAAU+E,IAAI,oBA5ChD5B,EAgDQyB,oBAAP,WACC,OAAO/T,OAAOmU,YAAc,MAAQjX,KAAKkX,aAjD3C9B,EAoDQ8B,UAAP,WACC,IAAMA,EAAY,0BAA0BC,KAAKC,UAAUC,UAC3D,OAAOH,GAtDT9B,EAyDQkC,MAAP,WACC,IAAMA,EAAQ,sBAAsBH,KAAKC,UAAUC,UACnD,OAAOC,GA3DTlC,EA8DQmC,QAAP,WACC,IAAMA,EAAUH,UAAUC,SAASG,cAAclU,QAAQ,QAAU,EACnE,OAAOiU,GAhETnC,EAmEQqC,SAAP,WACC,IAAMA,EAAWL,UAAUM,OAAOpE,MAAM,YACtC8D,UAAUO,UAAUrE,MAAM,YAC1B8D,UAAUO,UAAUrE,MAAM,UAC5B,OAAOmE,GAvETrC,EA0EQwC,MAAP,SAAa1G,GACZ,OAAO2G,EAAAA,UAAU/U,OAAQ,QAAQkG,KAChC8O,EAAAA,MAAM,GACNlI,EAAAA,WAAU,SAAAE,GAET,IAAMgH,EAAW1B,EAAwBG,KAAKrE,GAC9C,GAAI4F,EACHA,EAASiB,GAAG,UAAU,SAAAjB,GACrB1B,EAAwBC,OAAOyB,UAE1B,CACN,IAAMvE,EAAQ,CAAEyF,UAAW,KAAM3C,OAAQ,CAAE5K,EAAG,EAAGwN,EAAG,GAAKC,MAAO,GAC1DvQ,EAAO1E,SAASC,cAAc,QAChCiV,EAAYxQ,EAAKyQ,UACrBzQ,EAAK0Q,iBAAiB,UAAU,WAC/B,IAAMJ,EAAItQ,EAAKyQ,UACTJ,EAAYC,EAAIE,EAAY,OAAS,KAE3CA,EAAYF,EACZ1F,EAAMyF,UAAYA,EAClBzF,EAAM8C,OAAO4C,EAAIA,EACjB7C,EAAwBC,OAAO9C,MAC7B,GAEJ,OAAO6C,EAAwBE,aAlGnCF,EAwGQpP,OAAP,WACKhG,KAAK8W,UACR9W,KAAK8W,SAAS9Q,UA1GjBoP,EA8GQkD,KAAP,WACKtY,KAAK8W,UACR9W,KAAK8W,SAASwB,QAhHjBlD,EAoHQmD,MAAP,WACKvY,KAAK8W,UACR9W,KAAK8W,SAASyB,SAtHjBnD,EA0HQoD,SAAP,SAAgBrY,EAAQ4D,GACnB/D,KAAK8W,SACR9W,KAAK8W,SAAS0B,SAASrY,EAAQ4D,GAE/B5D,EAAOsY,kBA9HVrD,EAAA,GjBm3CAjU,EiBn3CaiU,EAAAA,UAEK,IAAIsD,EAAAA,cAAc,IAAlB,ICHLC,EAAb,WAAA,SAAAA,KAAA,OAAAA,EAEQC,KAAP,WACC,OAAOjL,EAAWvE,KAAK,uBAHzBuP,EAMQE,SAAP,WACC,OAAOlL,EAAWvE,KAAK,2BAPzBuP,EAAA,GCQaG,EAAb,SAAAhH,GAAA,SAAAgH,IAAA,OAAAhH,EAAA7H,MAAAjK,KAAAkK,YAAAlK,KAAAsB,EAAAwX,EAAAhH,GAAA,IAAAhO,EAAAgV,EAAA5X,UAAA,OAAA4C,EAECiO,OAAA,WAAS,IAAA1P,EAAArC,KACRA,KAAK+Y,WAAa/Y,KAAK+Y,YAAc,KACrC/Y,KAAKsU,MAAQ,GACbtU,KAAK2U,cAAgB,GACrB3U,KAAK+T,QAAU,GACf,IAAMlU,EAAOG,KAAKH,KAAO,IAAImZ,EAAAA,UAAU,CACtCC,SAAU,IAAIC,EAAAA,YAAY,MAC1BC,SAAU,IAAID,EAAAA,YAAY,MAC1BE,SAAU,IAAIF,EAAAA,YAAY,MAC1BlW,OAAQ,IAAIkW,EAAAA,YAAY,QAEnBG,EAAWrZ,KAAKqZ,SAAWxZ,EAAKwZ,SACtCxZ,EAAKyZ,SAAStQ,KACboJ,EAAAA,UAAUpS,KAAKqS,eACdC,WAAU,SAACxC,GAEZzN,EAAKkX,uBAAuB,WAAY1Z,EAAKwB,MAAM4X,UACnD5W,EAAKkX,uBAAuB,WAAY1Z,EAAKwB,MAAM8X,UACnD9W,EAAKkX,uBAAuB,WAAY1Z,EAAKwB,MAAM+X,UACnD/W,EAAKkX,uBAAuB,SAAU1Z,EAAKwB,MAAM2B,QACjDX,EAAKmL,iBAENxN,KAAKuR,QAAQvI,KACZyJ,EAAAA,SACCH,WAAU,SAAAlL,GACX/E,EAAKiS,MAAQlN,EAAK,GAClB/E,EAAK0R,QAAU3M,EAAK,GACpBiS,EAASJ,SAASlV,QAAUiR,EAAYC,gBAAgB5S,EAAK0R,QAAQkF,SAASlV,SAC9EsV,EAASF,SAASpV,QAAUiR,EAAYC,gBAAgB5S,EAAK0R,QAAQoF,SAASpV,SAC9EsV,EAASD,SAASrV,QAAUiR,EAAYC,gBAAgB5S,EAAK0R,QAAQqF,SAASrV,SAC9E1B,EAAKmX,SACLnX,EAAKmL,kBAjCR1J,EAqCCyN,MAAA,WACC,OAAOkI,EAAAA,cAAc,CACpBd,EAAgBC,OAChBD,EAAgBE,cAxCnB/U,EA4CC0V,OAAA,WAAS,IAAA/L,EAAAzN,KACFsU,EAAQtU,KAAKsU,MACbP,EAAU/T,KAAK+T,QACrBpT,OAAO2B,KAAKyR,GAASxR,SAAQ,SAAA1B,GAC5BkT,EAAQlT,GAAKmS,KAAOe,EAAQlT,GAAKmS,MAAQJ,KAE1C,IACM8G,EAAgB,IAAI9F,EAAcG,EADlB,IAC0C,SAAClT,EAAKiS,GAGnEA,EAAOA,OAAS,SAACO,EAAMhS,GACtB,OAAQR,GACP,IAAK,WACJ,OAAOwS,EAAK4F,SAAS9D,KAAO9T,EAC7B,IAAK,WACJ,OAA0C,IAAnCgS,EAAKsG,UAAUrW,QAAQjC,GAC/B,IAAK,WACJ,OAA0C,IAAnCgS,EAAKuG,UAAUtW,QAAQjC,GAC/B,IAAK,SACJ,OAAkE,IAA3DgS,EAAK/H,MAAMkM,cAAclU,QAAQjC,EAAMmW,oBAMpDxX,KAAK0Z,cAAgBA,EACrB1Z,KAAK+T,QAAU2F,EAAc3F,QAC7B,IAAMkF,EAAWjZ,KAAK+Y,WAAa/Y,KAAK+Y,WAAc/Y,KAAK+T,QAAQkF,SAAS/F,OAAO5S,OAASN,KAAK+T,QAAQkF,SAAS/F,OAAO,GAAK,KACxHiG,EAAWnZ,KAAK+T,QAAQoF,SAASjG,OAAO5S,OAASN,KAAK+T,QAAQoF,SAASjG,OAAO,GAAK,KACnFkG,EAAWpZ,KAAK+T,QAAQqF,SAASlG,OAAO5S,OAASN,KAAK+T,QAAQqF,SAASlG,OAAO,GAAK,KACnFlQ,EAAShD,KAAK+T,QAAQ/Q,OAAOkQ,OAAO5S,OAASN,KAAK+T,QAAQ/Q,OAAOkQ,OAAO,GAAK,KACnFlT,KAAKH,KAAKga,MAAM,CAAEZ,SAAAA,EAAUE,SAAAA,EAAUC,SAAAA,EAAUpW,OAAAA,IAChD0W,EAAcrF,OAAOC,GAAOtL,KAC3BoJ,EAAAA,UAAUpS,KAAKqS,eACdC,WAAU,SAAAqC,GACXlH,EAAKkH,cAAgBA,EACrBlH,EAAKD,cACL4H,EAAwBpP,aAjF3BlC,EAsFCyV,uBAAA,SAAuB1Y,EAAKQ,GAC3B,IAAMyR,EAAS9S,KAAK+T,QAAQlT,GAC5B,GAAIiS,EACH,GAAIA,EAAOE,OAASJ,EACnBE,EAAOpO,IAAIrD,OACL,CACN,IAAMuT,EAAS9B,EAAO/O,QAAQ2J,MAAK,SAAAjD,GAAC,OAAIA,EAAEpJ,QAAUA,KAEhDuT,EACH9B,EAAOpO,IAAIkQ,GAEX9B,EAAOa,UAjGZ7P,EAuGCgW,SAAA,SAASC,GAER/Z,KAAKuZ,uBAAuB,WAAYvZ,KAAKH,KAAKwB,MAAM4X,UACxDjZ,KAAKuZ,uBAAuB,WAAYvZ,KAAKH,KAAKwB,MAAM8X,UACxDnZ,KAAKuZ,uBAAuB,WAAYvZ,KAAKH,KAAKwB,MAAM+X,UACxDpZ,KAAKuZ,uBAAuB,SAAUvZ,KAAKH,KAAKwB,MAAM2B,QACtDhD,KAAKwN,eA7GP1J,EAgHCkW,YAAA,SAAYzH,EAAOO,GAClBP,EAAM0H,iBACN1H,EAAM2H,2BACNpH,EAAOa,QACP3T,KAAKwN,eApHPsL,EAAA,CAAuCpG,EAAAA,WAwHvCoG,EAAkBhO,KAAO,CACxB6H,SAAU,aACVwH,OAAQ,CAAC,eAFV,IChIaC,EAAb,WAAA,SAAAA,KAAA,OAAAA,EAEQxB,KAAP,WACC,OAAOjL,EAAWvE,KAAK,kCAHzBgR,EAMQC,UAAP,WACC,OAAO1M,EAAWvE,KAAK,uCAPzBgR,EAUQE,QAAP,WACC,OAAO3M,EAAWvE,KAAK,qCAXzBgR,EAcQvB,SAAP,WACC,OAAOlL,EAAWvE,KAAK,sCAfzBgR,EAAA,GCQaG,EAAb,SAAAzI,GAAA,SAAAyI,IAAA,OAAAzI,EAAA7H,MAAAjK,KAAAkK,YAAAlK,KAAAsB,EAAAiZ,EAAAzI,GAAA,IAAAhO,EAAAyW,EAAArZ,UAAA,OAAA4C,EAECiO,OAAA,WAAS,IAAA1P,EAAArC,KACRA,KAAKwa,MAAQ,CACZC,QAAS,EACTC,MAAO,GAER1a,KAAKsU,MAAQ,GACbtU,KAAK2U,cAAgB,GACrB3U,KAAK2a,iBAAmB,GACxB3a,KAAK4a,eAAiB,GACtB5a,KAAK+T,QAAU,GACf,IAAMlU,EAAOG,KAAKH,KAAO,IAAImZ,EAAAA,UAAU,CACtC6B,QAAS,IAAI3B,EAAAA,YAAY,MACzBlW,OAAQ,IAAIkW,EAAAA,YAAY,QAEnBG,EAAWrZ,KAAKqZ,SAAWxZ,EAAKwZ,SACtCxZ,EAAKyZ,SAAStQ,KACboJ,EAAAA,UAAUpS,KAAKqS,eACdC,WAAU,SAACxC,GAEZzN,EAAKkX,uBAAuB,UAAW1Z,EAAKwB,MAAMwZ,SAClDxY,EAAKkX,uBAAuB,SAAU1Z,EAAKwB,MAAM2B,QACjDX,EAAKmL,iBAENxN,KAAKuR,QAAQvI,KACZyJ,EAAAA,SACCH,WAAU,SAAAlL,GACX/E,EAAKiS,MAAQlN,EAAK,GAClB/E,EAAK0R,QAAU3M,EAAK,GACpBiS,EAASwB,QAAQ9W,QAAUiR,EAAYC,gBAAgB5S,EAAK0R,QAAQ8G,QAAQ9W,SAC5E1B,EAAKmX,SACLnX,EAAKmL,kBAhCR1J,EAoCCyN,MAAA,WACC,OAAOkI,EAAAA,cAAc,CACpBW,EAAyBxB,OACzBwB,EAAyBvB,cAvC5B/U,EA2CC0V,OAAA,WAAS,IAAA/L,EAAAzN,KACFsU,EAAQtU,KAAKsU,MACbP,EAAU/T,KAAK+T,QACrBpT,OAAO2B,KAAKyR,GAASxR,SAAQ,SAAA1B,GAC5BkT,EAAQlT,GAAKmS,KAAOe,EAAQlT,GAAKmS,MAAQJ,KAE1C,IACM8G,EAAgB,IAAI9F,EAAcG,EADlB,IAC0C,SAAClT,EAAKiS,GAGnEA,EAAOA,OAAS,SAACO,EAAMhS,GACtB,OAAQR,GACP,IAAK,UACJ,OAAOwS,EAAKwH,QAAQ1F,KAAO9T,EAC5B,IAAK,SACJ,OAAkE,IAA3DgS,EAAK/H,MAAMkM,cAAclU,QAAQjC,EAAMmW,iBAA2F,IAAlEnE,EAAKwH,QAAQ9P,KAAKyM,cAAclU,QAAQjC,EAAMmW,oBAM3HxX,KAAK0Z,cAAgBA,EACrB1Z,KAAK+T,QAAU2F,EAAc3F,QAC7B,IAAM8G,EAAU7a,KAAK+T,QAAQ8G,QAAQ3H,OAAO5S,OAASN,KAAK+T,QAAQ8G,QAAQ3H,OAAO,GAAK,KAChFlQ,EAAShD,KAAK+T,QAAQ/Q,OAAOkQ,OAAO5S,OAASN,KAAK+T,QAAQ/Q,OAAOkQ,OAAO,GAAK,KACnFlT,KAAKH,KAAKga,MAAM,CAAEgB,QAAAA,EAAS7X,OAAAA,IAC3B0W,EAAcrF,OAAOC,GAAOtL,KAC3BoJ,EAAAA,UAAUpS,KAAKqS,eACdC,WAAU,SAAAqC,GACXlH,EAAKkH,cAAgBA,EACrBlH,EAAKkN,iBAAmBhG,EAAc7B,QAAO,SAAArI,GAAC,OAAIA,EAAEqQ,OAASrN,EAAK+M,MAAMC,WACxEhN,EAAKmN,eAAiBjG,EAAc7B,QAAO,SAAArI,GAAC,OAAIA,EAAEqQ,OAASrN,EAAK+M,MAAME,SACtEjN,EAAKD,cACL4H,EAAwBpP,aA5E3BlC,EAiFCyV,uBAAA,SAAuB1Y,EAAKQ,GAC3B,IAAMyR,EAAS9S,KAAK+T,QAAQlT,GAC5B,GAAIiS,EACH,GAAIA,EAAOE,OAASJ,EACnBE,EAAOpO,IAAIrD,OACL,CACN,IAAMuT,EAAS9B,EAAO/O,QAAQ2J,MAAK,SAAAjD,GAAC,OAAIA,EAAEpJ,QAAUA,KAEhDuT,EACH9B,EAAOpO,IAAIkQ,GAEX9B,EAAOa,UA5FZ7P,EAkGCgW,SAAA,SAASC,GAER/Z,KAAKuZ,uBAAuB,UAAWvZ,KAAKH,KAAKwB,MAAMwZ,SACvD7a,KAAKuZ,uBAAuB,SAAUvZ,KAAKH,KAAKwB,MAAM2B,QACtDhD,KAAKwN,eAtGP1J,EAyGCkW,YAAA,SAAYzH,EAAOO,GAClBP,EAAM0H,iBACN1H,EAAM2H,2BACNpH,EAAOa,QACP3T,KAAKwN,eA7GP+M,EAAA,CAAgD7H,EAAAA,WAiHhD6H,EAA2BzP,KAAO,CACjC6H,SAAU,yBrBsjDX,IsB5qDaoI,EAAb,WAAA,SAAAA,KAAA,OAAAA,EAEQ1M,KAAP,SAAYkE,GACX,OATF,SAAeA,IACIzP,OAAOkY,WAAa,IAC5B3M,KAAKkE,GACf5N,QAAQC,IAAI,uBAAwB2N,GAM5B0I,CAAM1I,IAHfwI,EAAA,GCJaG,EAAb,WAAA,SAAAA,KAAA,OAAAA,EAEQ5L,MAAP,WACC,OAAO3B,EAAWvE,KAAK,wBAHzB8R,EAMQC,QAAP,WACC,OAAOxN,EAAWpE,MAAM,0BAP1B2R,EAAA,GCMaE,EAAb,SAAAtJ,GAAA,SAAAsJ,IAAA,OAAAtJ,EAAA7H,MAAAjK,KAAAkK,YAAAlK,KAAAsB,EAAA8Z,EAAAtJ,GAAA,IAAAhO,EAAAsX,EAAAla,UAAA,OAAA4C,EAECiO,OAAA,WAAS,IAAA1P,EAAArC,KACRA,KAAK6I,MAAQ,KACb7I,KAAKqb,SAAU,EACf,IAAMxb,EAAOG,KAAKH,KAAO,IAAImZ,EAAAA,UAAU,CACtCnK,UAAW,IAAIqK,EAAAA,YAAY,KAAM,CAACoC,EAAAA,WAAWC,sBAC7CvM,SAAU,IAAIkK,EAAAA,YAAY,KAAM,CAACoC,EAAAA,WAAWC,sBAC5CC,MAAO,IAAItC,EAAAA,YAAY,KAAM,CAACoC,EAAAA,WAAWC,oBAAqBD,EAAAA,WAAWG,mBACzEC,UAAW,IAAIxC,EAAAA,YAAY,MAC3B2B,QAAS,IAAI3B,EAAAA,YAAY,KAAM,CAACoC,EAAAA,WAAWC,sBAC3CI,KAAM,IAAIzC,EAAAA,YAAY,KAAM,CAACoC,EAAAA,WAAWC,sBACxCK,QAAS,IAAI1C,EAAAA,YAAY,MACzB2C,QAAS,IAAI3C,EAAAA,YAAY,KAAM,CAACoC,EAAAA,WAAWC,sBAC3CO,WAAY,IAAI5C,EAAAA,YAAYlZ,KAAK+b,MACjCC,aAAclZ,OAAOmZ,YACrBC,WAAY,KAEIlc,KAAKqZ,SAAWxZ,EAAKwZ,SACtCxZ,EAAKyZ,SAAStQ,KACboJ,EAAAA,UAAUpS,KAAKqS,eACdC,WAAU,SAACxC,GACZzN,EAAKmL,cACL4H,EAAwBpP,YAEzBhG,KAAKuR,QAAQvI,KACZyJ,EAAAA,SACCH,aA3BJxO,EA8BCyN,MAAA,WAAQ,IAAA9D,EAAAzN,KACP,OAAOkb,EAAgB5L,QAAQtG,KAC9B6D,EAAAA,KAAI,SAAAzF,GACcqG,EAAK4L,SACbwB,QAAQ9W,QAAUiR,EAAYC,gBAAgB7N,EAAKyT,QAAQ9W,SACpE0J,EAAKD,mBAnCT1J,EAwCCqT,KAAA,WACC,IAAMtX,EAAOG,KAAKH,KACZwZ,EAAWrZ,KAAKqZ,SAChBwB,EAAUxB,EAASwB,QAAQ9W,QAAQzD,OAAS,EAAI+Y,EAASwB,QAAQ9W,QAAQ,GAAGoR,GAAK,KACvFtV,EAAKga,MAAM,CACVhL,UAAW,OACXG,SAAU,YACVwM,MAAO,0BACPE,UAAW,cACXb,QAASA,EACTc,KAAM,SACNC,QAAS,MACTC,SAAS,EACTG,aAAclZ,OAAOmZ,YACrBC,WAAY,MAtDfpY,EA0DCiR,MAAA,WACc/U,KAAKH,KACbkV,SA5DPjR,EA+DCqY,SAAA,SAASpC,GAAO,IAAA9J,EAAAjQ,KACTH,EAAOG,KAAKH,KAClB8E,QAAQC,IAAI,6BAA8B/E,EAAKwB,OAE3CxB,EAAKuc,OAERvc,EAAKwc,WAAY,EACjBnB,EAAgBC,QAAQtb,EAAKwB,OAAO2H,KACnCyJ,EAAAA,SACCH,WAAU,SAAAxC,GACXG,EAAKoL,SAAU,EACfxb,EAAKkV,QACLgG,EAAW1M,KAAK,CACfkE,MAAS,UACT+J,UAAa,aAEVzc,EAAKwB,MAAMya,YACdf,EAAW1M,KAAK,CACfkE,MAAS,oBACT+J,UAAa,0BAGb,SAAAzT,GACFlE,QAAQC,IAAI,0BAA2BiE,GACvCoH,EAAKpH,MAAQA,EACboH,EAAKzC,cACL4H,EAAwBpP,aAGzBnG,EAAK0c,SAAU,GA5FlBnB,EAAA,CAAuC1I,EAAAA,WAiGvC0I,EAAkBtQ,KAAO,CACxB6H,SAAU,cADX,ICvGa6J,EAAb,WAAA,SAAAA,KAAA,OAAAA,EAEQ5D,KAAP,WACC,OAAOjL,EAAWvE,KAAK,wBAHzBoT,EAMQ3D,SAAP,WACC,OAAOlL,EAAWvE,KAAK,4BAPzBoT,EAAA,GCQaC,EAAb,SAAA3K,GAAA,SAAA2K,IAAA,OAAA3K,EAAA7H,MAAAjK,KAAAkK,YAAAlK,KAAAsB,EAAAmb,EAAA3K,GAAA,IAAAhO,EAAA2Y,EAAAvb,UAAA,OAAA4C,EAECiO,OAAA,WAAS,IAAA1P,EAAArC,KACRA,KAAKsU,MAAQ,GACbtU,KAAK2U,cAAgB,GACrB3U,KAAK+T,QAAU,GACf,IAAMlU,EAAOG,KAAKH,KAAO,IAAImZ,EAAAA,UAAU,CACtC0D,SAAU,IAAIxD,EAAAA,YAAY,MAC1BlW,OAAQ,IAAIkW,EAAAA,YAAY,QAEnBG,EAAWrZ,KAAKqZ,SAAWxZ,EAAKwZ,SACtCxZ,EAAKyZ,SAAStQ,KACboJ,EAAAA,UAAUpS,KAAKqS,eACdC,WAAU,SAACxC,GAEZzN,EAAKkX,uBAAuB,WAAY1Z,EAAKwB,MAAMqb,UACnDra,EAAKkX,uBAAuB,SAAU1Z,EAAKwB,MAAM2B,QACjDX,EAAKmL,iBAENxN,KAAKuR,QAAQvI,KACZyJ,EAAAA,SACCH,WAAU,SAAAlL,GACX/E,EAAKiS,MAAQlN,EAAK,GAClB/E,EAAK0R,QAAU3M,EAAK,GACpBiS,EAASqD,SAAS3Y,QAAUiR,EAAYC,gBAAgB5S,EAAK0R,QAAQ2I,SAAS3Y,SAC9E1B,EAAKmX,SACLnX,EAAKmL,kBA1BR1J,EA8BCyN,MAAA,WACC,OAAOkI,EAAAA,cAAc,CACpB+C,EAAiB5D,OACjB4D,EAAiB3D,cAjCpB/U,EAqCC0V,OAAA,WAAS,IAAA/L,EAAAzN,KACFsU,EAAQtU,KAAKsU,MACbP,EAAU/T,KAAK+T,QACrBpT,OAAO2B,KAAKyR,GAASxR,SAAQ,SAAA1B,GAC5BkT,EAAQlT,GAAKmS,KAAOe,EAAQlT,GAAKmS,MAAQJ,KAE1C,IACM8G,EAAgB,IAAI9F,EAAcG,EADlB,IAC0C,SAAClT,EAAKiS,GAGnEA,EAAOA,OAAS,SAACO,EAAMhS,GACtB,OAAQR,GACP,IAAK,WACJ,OAAOwS,EAAKqJ,SAASvH,KAAO9T,EAC7B,IAAK,SACJ,OAAiE,IAA1DgS,EAAKtI,KAAKyM,cAAclU,QAAQjC,EAAMmW,oBAMnDxX,KAAK0Z,cAAgBA,EACrB1Z,KAAK+T,QAAU2F,EAAc3F,QAC7B,IAAM2I,EAAW1c,KAAK+T,QAAQ2I,SAASxJ,OAAO5S,OAASN,KAAK+T,QAAQ2I,SAASxJ,OAAO,GAAK,KACnFlQ,EAAShD,KAAK+T,QAAQ/Q,OAAOkQ,OAAO5S,OAASN,KAAK+T,QAAQ/Q,OAAOkQ,OAAO,GAAK,KACnFlT,KAAKH,KAAKga,MAAM,CAAE6C,SAAAA,EAAU1Z,OAAAA,IAC5B0W,EAAcrF,OAAOC,GAAOtL,KAC3BoJ,EAAAA,UAAUpS,KAAKqS,eACdC,WAAU,SAAAqC,GACXlH,EAAKkH,cAAgBA,EACrBlH,EAAKD,cACL4H,EAAwBpP,aApE3BlC,EAyECyV,uBAAA,SAAuB1Y,EAAKQ,GAC3B,IAAMyR,EAAS9S,KAAK+T,QAAQlT,GAC5B,GAAIiS,EACH,GAAIA,EAAOE,OAASJ,EACnBE,EAAOpO,IAAIrD,OACL,CACN,IAAMuT,EAAS9B,EAAO/O,QAAQ2J,MAAK,SAAAjD,GAAC,OAAIA,EAAEpJ,QAAUA,KAEhDuT,EACH9B,EAAOpO,IAAIkQ,GAEX9B,EAAOa,UApFZ7P,EA0FCgW,SAAA,SAASC,GAER/Z,KAAKuZ,uBAAuB,WAAYvZ,KAAKH,KAAKwB,MAAMqb,UACxD1c,KAAKuZ,uBAAuB,SAAUvZ,KAAKH,KAAKwB,MAAM2B,QACtDhD,KAAKwN,eA9FP1J,EAiGCkW,YAAA,SAAYzH,EAAOO,GAClBP,EAAM0H,iBACN1H,EAAM2H,2BACNpH,EAAOa,QACP3T,KAAKwN,eArGPiP,EAAA,CAAwC/J,EAAAA,WAyGxC+J,EAAmB3R,KAAO,CACzB6H,SAAU,eC7GJ,IAAMgK,EACN,OADMA,EAEN,OAFMA,GAGJ,SAHIA,GAIN,OAGMC,GAAb,SAAA9K,GAAA,SAAA8K,IAAA,IAAA,IAAAva,EAAAiI,EAAAJ,UAAA5J,OAAAuc,EAAA,IAAAra,MAAA8H,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAAsS,EAAAtS,GAAAL,UAAAK,GAAA,OAAApJ,EAAAa,EAAAK,EAAAyP,EAAA5E,KAAAjD,MAAA6H,EAAA,CAAA9R,MAAA8c,OAAAD,KAAA7c,MAAA,aAEc,MAFdmB,EAAAa,EAAAK,GAAA,YAea,MAfbA,EAAAf,EAAAsb,EAAA9K,GAAA,IAAAhO,EAAA8Y,EAAA1b,UAAA,OAAA4C,EA2BCiO,OAAA,WAAS,IAAAtE,EAAAzN,KACRA,KAAK+c,KAAOJ,EACZ,IAAMK,EAAY/Z,SAASC,cAAc,sBACzCkS,EAAwBE,QAAQtM,KAC/BoJ,EAAAA,UAAUpS,KAAKqS,eACdC,WAAU,SAACC,GACZ9E,EAAKuK,UAAYzF,EAAMyF,UACvBvK,EAAKwP,SAAW1K,EAAM8C,OAAO4C,EAAI,IACjC,IAAMiF,EAAU,GAAM,GAAMC,KAAKC,IAAI,EAAGD,KAAKE,IAAI,GAAI9K,EAAM8C,OAAO4C,EAAyB,EAArBnV,OAAOwa,aAAmBxa,OAAOwa,YAAc,IACrHC,KAAK7Y,IAAIsY,EAAW,CAAEE,QAAAA,OAGvBld,KAAKmP,KAAO,KACZF,EAAYQ,MAAMzG,KACjBoJ,EAAAA,UAAUpS,KAAKqS,eACdC,WAAU,SAAAnD,GACX1B,EAAK0B,KAAOA,EACZ1B,EAAKD,kBA5CR1J,EAgDCoO,QAAA,WACCpB,EAAaC,MAAM,CAAEE,IAAKjK,EAAYL,SAASC,MAAMC,UAAWO,KAAM,CAAE+K,KAAM,KAAOnJ,KACpFoJ,EAAAA,UAAUpS,KAAKqS,eACdC,WAAU,SAAAC,GACX5N,QAAQC,IAAI,0BAA2B2N,GACnCA,aAAiB7B,IACpB5N,OAAOC,SAAS0B,KAAOuC,EAAY9B,KAAKwB,kBAtD5C5C,EA2DC0O,SAAA,WACCvD,EAAYe,WAAWhH,KACtByJ,EAAAA,SACCH,aA9DJxO,EAiEC0Z,aAAA,WACCxd,KAAK+c,KAAO/c,KAAK+c,OAASJ,EAAkBA,EAAkBA,EAC9D3c,KAAKwN,eAnEP1J,EAsEC2Z,eAAA,WACCzd,KAAK+c,KAAO/c,KAAK+c,OAASJ,GAAoBA,EAAkBA,GAChE3c,KAAKwN,eAxEP1J,EA2EC4Z,aAAA,WACC1d,KAAK+c,KAAO/c,KAAK+c,OAASJ,GAAkBA,EAAkBA,GAC9D3c,KAAKwN,eA7EP1M,EAAA8b,EAAA,CAAA,CAAA/b,IAAA,YAAA+B,IAGC,WACC,OAAO5C,KAAK2d,YAJdjZ,IAMC,SAAcsT,GACb,GAAIhY,KAAK2d,aAAe3F,EAAW,CAClC,IAAQ9G,EAASc,EAAAA,WAAWhS,MAApBkR,KACRA,EAAKe,UAAUpM,OAAf,aAAmC7F,KAAK2d,YACxCzM,EAAKe,UAAU+E,IAAf,aAAgCgB,GAChChY,KAAK2d,WAAa3F,KAXrB,CAAAnX,IAAA,WAAA+B,IAgBC,WACC,OAAO5C,KAAK4d,WAjBdlZ,IAmBC,SAAauY,GACZ,GAAIjd,KAAK4d,YAAcX,EAAU,CAChCjd,KAAK4d,UAAYX,EACjB,IAAQ/L,EAASc,EAAAA,WAAWhS,MAApBkR,KACR+L,EAAW/L,EAAKe,UAAU+E,IAAf,YAAiC9F,EAAKe,UAAUpM,OAAf,iBAvB/C+W,EAAA,CAAqClK,EAAAA,WAiFrCkK,GAAgB9R,KAAO,CACtB6H,SAAU;;;;;;;;;;;;;;;A3Bg+DX,IAAIkL,GAAgB,SAASC,EAAGC,GAI5B,OAHAF,GAAgBld,OAAOmB,gBAClB,CAAEC,UAAW,cAAgBS,OAAS,SAAUsb,EAAGC,GAAKD,EAAE/b,UAAYgc,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIlc,KAAKkc,EAAOpd,OAAOO,UAAU8c,eAAe9Q,KAAK6Q,EAAGlc,KAAIic,EAAEjc,GAAKkc,EAAElc,MAC3Eic,EAAGC,IAG5B,SAASE,GAAUH,EAAGC,GAClB,GAAiB,mBAANA,GAA0B,OAANA,EAC3B,MAAM,IAAIG,UAAU,uBAAyBC,OAAOJ,GAAK,iCAE7D,SAASK,IAAOpe,KAAK0B,YAAcoc,EADnCD,GAAcC,EAAGC,GAEjBD,EAAE5c,UAAkB,OAAN6c,EAAapd,OAAOc,OAAOsc,IAAMK,EAAGld,UAAY6c,EAAE7c,UAAW,IAAIkd,GAGnF,IAAIC,GAAW,WAQX,OAPAA,GAAW1d,OAAOqD,QAAU,SAAkBsa,GAC1C,IAAK,IAAIC,EAAGle,EAAI,EAAGme,EAAItU,UAAU5J,OAAQD,EAAIme,EAAGne,IAE5C,IAAK,IAAIwB,KADT0c,EAAIrU,UAAU7J,GACOM,OAAOO,UAAU8c,eAAe9Q,KAAKqR,EAAG1c,KAAIyc,EAAEzc,GAAK0c,EAAE1c,IAE9E,OAAOyc,IAEKrU,MAAMjK,KAAMkK,Y4BljEhC,IAAAuU,GACE,SAAAA,KAXF,SAAgBC,EAAYC,GAE1B,IAAK,IAAIC,KAAYD,EAAMzd,UACzBwd,EAAMxd,UAAU0d,GAAYD,EAAMzd,UAAU0d,GAc5CC,CAAOJ,EAAiBK,OAAOC,KAAKC,cChBxC,SAASC,GAAUC,GACjB,OAAOve,OAAO2B,KAAK4c,GAChBjL,QAAO,SAACkL,EAAKte,GAIZ,OAHIqe,EAAOre,IACTse,EAAI9Q,KAAKxN,EAAM,IAAMqe,EAAOre,IAEvBse,IACN,IACFzU,KAAK,KAOV,SAAS0U,GAAaC,GACpB,OAAOA,EAASA,EAAS,UAAOvX,EA4GlC,ICjJIwX,GDiJJC,GAAA,SAAAC,GAmBE,SAAAD,EAAoBE,EAA2BC,GAA/C,IAAArd,EACEmd,EAAAtS,KAAAlN,OAAOA,K7BkhEH,O6BnhEcqC,EAAAod,SAAAA,EAA2Bpd,EAAAqd,QAAAA,EAjBvCrd,EAAAsd,QAA8B,KAC9Btd,EAAAud,KAAuB,KACvBvd,EAAAwd,MAAyB,KACzBxd,EAAAyd,UAAW,EAEXzd,EAAA0d,MAA0B,KAehC1d,EAAK2d,OAAOP,EAASQ,U7BghEV5d,E6BtuDf,OAhUiC4b,GAAAsB,EAAAC,GA4B/BD,EAAAre,UAAAgf,MAAA,WAAA,IACMC,EACAC,EAFN/d,EAAArC,KAIQqgB,EAAKrgB,KAAKyf,SAASa,qBAEnBC,EAAiBzB,OAAOC,KAAKyB,QAAQ9c,MAAM,KAA1C+c,EAAKF,EAAA,GAAEG,EAAKH,EAAA,GAEbI,EAAkC,IAAtBC,SAASH,EAAO,IAAYG,SAASF,EAAO,IAE9D1gB,KAAK4f,KAAO3c,SAASwO,cAAc,OAC/BzR,KAAK8f,UACP9f,KAAK+c,OAGP/c,KAAK6gB,WAAWC,mBAAmBC,YAAY/gB,KAAK4f,MAGpD5f,KAAKghB,uBAAyBlC,OAAOC,KAAKxM,MAAM0O,YAC9CjhB,KAAKigB,SACL,kBACA,WACEG,EAAwBD,KAI5BrB,OAAOC,KAAKxM,MAAM2O,eAAelhB,KAAK4f,KAAM,aAAa,WACvDO,GAAsB,EACtBC,GAAwB,KAKtBO,GAAa,KAEf7B,OAAOC,KAAKxM,MAAM2O,eAAelhB,KAAK4f,KAAM,cAAc,SAACzR,GACzDA,EAAEgT,qBAINrC,OAAOC,KAAKxM,MAAM2O,eAAelhB,KAAK4f,KAAM,SAAS,SAACzR,GAEpD,GADAgS,GAAsB,GACjBC,EAAuB,CAY1B,GALAtB,OAAOC,KAAKxM,MAAM6O,QAAQf,EAAI,QAAShe,EAAKod,UAC5CX,OAAOC,KAAKxM,MAAM6O,QAAQf,EAAI,eAAgBhe,EAAKod,UAI/CY,EAAGgB,iBAAkB,CAEvB,IAAMC,EAAKjB,EAAGkB,aACRC,EAAYnf,EAAKod,SAASgC,YAC/BpB,EAAGJ,SAA6ByB,UAAUF,GAE3CG,YAAW,WACRtB,EAAGJ,SAA6ByB,UAAUF,GAEhC,OAAPF,GAAejB,EAAGJ,SAAS2B,UAAYN,GACzCjB,EAAGJ,SAAS4B,QAAQP,EAAK,KAE1B,KAILnT,EAAE2T,cAAe,EACb3T,EAAEgT,iBACJhT,EAAEgT,sBAKRrC,OAAOC,KAAKxM,MAAM2O,eAAelhB,KAAK4f,KAAM,aAAa,WAOvDd,OAAOC,KAAKxM,MAAM6O,QAAQf,EAAI,YAAahe,EAAKod,aAGlDX,OAAOC,KAAKxM,MAAM2O,eAAelhB,KAAK4f,KAAM,YAAY,WAOtDd,OAAOC,KAAKxM,MAAM6O,QAAQf,EAAI,WAAYhe,EAAKod,cAOnDF,EAAAre,UAAA6gB,SAAA,WACM/hB,KAAK4f,MAAQ5f,KAAK4f,KAAKoC,aACzBhiB,KAAKiiB,OACLnD,OAAOC,KAAKxM,MAAM2P,eAAeliB,KAAKghB,wBACtClC,OAAOC,KAAKxM,MAAM4P,uBAAuBniB,KAAK4f,MAC9C5f,KAAK4f,KAAKoC,WAAWI,YAAYpiB,KAAK4f,MACtC5f,KAAK4f,KAAO,OAOhBL,EAAAre,UAAAmhB,KAAA,WACE,GAAIriB,KAAK8f,SAAU,CACjB,IAAMwC,EAAMtiB,KAAKuiB,kBAAkBviB,KAAK2f,SACxC3f,KAAK4f,KAAKG,MAAMyC,IAAMF,EAAIrK,EAAI,KAC9BjY,KAAK4f,KAAKG,MAAM0C,KAAOH,EAAI7X,EAAI,OAOnC8U,EAAAre,UAAA+gB,KAAA,WACMjiB,KAAK4f,OACP5f,KAAK4f,KAAKG,MAAM2C,QAAU,QAE5B1iB,KAAK8f,UAAW,GAMlBP,EAAAre,UAAA6b,KAAA,WACM/c,KAAK4f,OACP5f,KAAK4f,KAAK+C,UAAY3iB,KAAK4iB,WAC3B5iB,KAAK4f,KAAKG,MAAM8C,QAAU7iB,KAAK8iB,WAC7B9iB,KAAKuiB,kBAAkBviB,KAAK2f,UAG9B3f,KAAK4f,KAAKlO,WACP1R,KAAK+f,MAAM3b,IAAMpE,KAAK+iB,sBAAwB,IAC/C/iB,KAAKgjB,uBAEyB,IAArBhjB,KAAK6f,MAAMvU,OAA8C,KAArBtL,KAAK6f,MAAMvU,MACxDtL,KAAK4f,KAAKtU,MAAQtL,KAAKyf,SAASa,qBAAqB2C,WAErDjjB,KAAK4f,KAAKtU,MAAQtL,KAAK6f,MAAMvU,MAE/BtL,KAAK4f,KAAKG,MAAM2C,QAAU,IAE5B1iB,KAAK8f,UAAW,GAGVP,EAAAre,UAAA8hB,gBAAR,WAmBE,MAAO,sBAlBIhjB,KAAKyf,SAASa,qBACJ4C,YAAYljB,KAAK6f,MAAMpX,MAkBpB,YAAYwW,GAhBQ,CAC1CkE,SAAU,WACVX,IAAKpD,GAAapf,KAAKojB,YAAY,IACnCX,KAAMrD,GAAapf,KAAKojB,YAAY,IACpCC,MAAOrjB,KAAK+f,MAAMuD,UAClBC,YAAanE,GAAapf,KAAK+f,MAAMyD,UACrCC,cAAezjB,KAAK+f,MAAM2D,WAC1BC,cAAe3jB,KAAK+f,MAAM6D,WAC1BC,aAAc7jB,KAAK+f,MAAM+D,UACzBC,kBAAmB/jB,KAAK+f,MAAMiE,eAC9BC,aAAc,SACdC,MAAO9E,GAAapf,KAAK+f,MAAMmE,OAC/BC,cAAe/E,GAAapf,KAAK+f,MAAMqE,kBAIc,+CAC9BpkB,KAAK6f,MAAMpX,KAAI,qBAKlC8W,EAAAre,UAAA6hB,oBAAR,WAEE,IAAMsB,GAAMrkB,KAAK+f,MAAMuE,oBAAsB,OAAO5gB,MAAM,KACpD6gB,EAAU3D,SAASyD,EAAG,GAAG/f,QAAQ,aAAc,IAAK,IACpDkgB,EAAU5D,SAASyD,EAAG,GAAG/f,QAAQ,aAAc,IAAK,IAEtDmgB,EAAwC,GAE5C,GAAIzkB,KAAKyf,SAASa,qBAAqBoE,uBACrCD,EAAa,CACXP,MAAO9E,GAAapf,KAAK+f,MAAMmE,OAC/BS,OAAQvF,GAAapf,KAAK+f,MAAM4E,aAE7B,CACC,IAAApE,EAAmB,EACtB,EAAIiE,GACJ,EAAID,EAAUvkB,KAAK+f,MAAMmE,OACzB,EAAIM,EAAUxkB,KAAK+f,MAAM4E,QACzB,EAAIJ,GAEPE,EAAa,CACXG,KAAM,QAPCrE,EAAA,GAOS,OAPLA,EAAA,GAOc,OAPVA,EAAA,GAOmB,OAPfA,EAAA,GAOwB,OAI/C,IAAMsE,EAAgC7kB,KAAK6f,MAAMzb,IAC7C,CAAE8f,MAAO,OAAQS,OAAQ,QACzB,GAEE9B,EAAU5D,GAASZ,GAAAA,GAAA,CACvB8E,SAAU,WACVX,IAAKpD,GAAaoF,GAClB/B,KAAMrD,GAAamF,IAChBE,GACAI,IAGL,MAAO,aAAa7kB,KAAK6f,MAAMpX,KAAI,6BAA6BzI,KAAK+f,MAAM3b,IAAG,YAAYye,EAAO,OASnGtD,EAAAre,UAAA4jB,SAAA,SAASC,GACP/kB,KAAK6f,MAAQkF,EACb,IAAIvR,EAAQ2J,KAAKE,IAAI,EAAG0H,EAAKvR,MAAQ,GACrCA,EAAQ2J,KAAKC,IAAIpd,KAAK0f,QAAQpf,OAAS,EAAGkT,GAC1CxT,KAAK+f,MAAQ/f,KAAK6f,MAAMzb,I7Bs+Ddia,GAASA,GAAS,G6Br+DnBre,KAAK0f,QAAQlM,IAAM,CAAEpP,IAAKpE,KAAK6f,MAAMzb,MAC1CpE,KAAK0f,QAAQlM,GAEjBxT,KAAKojB,YAAcpjB,KAAK+f,MAAMiF,YAAc,CAAC,EAAG,GAChDhlB,KAAKilB,YAAcjlB,KAAK+f,MAAMmF,YAAc,CAC1C/H,KAAKgI,MAAMnlB,KAAK+f,MAAM4E,OAAS,GAC/BxH,KAAKgI,MAAMnlB,KAAK+f,MAAMmE,MAAQ,IAGhClkB,KAAK4iB,WACH5iB,KAAKyf,SAASa,qBAAqB8E,kBACnC,KACCplB,KAAK+f,MAAM4C,WAAa,WAAanP,IAQ1C+L,EAAAre,UAAAmkB,UAAA,SAAUC,GACRtlB,KAAK2f,QAAU2F,GAST/F,EAAAre,UAAA4hB,WAAR,SAAmBR,GACjB,OAAOrD,GAAU,CACfsG,UAAW,GAAGvlB,KAAKyf,SAASa,qBAAqBkF,YACjDhD,IAAKpD,GAAakD,EAAIrK,GACtBwK,KAAMrD,GAAakD,EAAI7X,GACvByZ,MAAO9E,GAAapf,KAAK+f,MAAMmE,OAC/BS,OAAQvF,GAAapf,KAAK+f,MAAM4E,QAChCc,OAAQ,UACRtC,SAAU,WACVuC,sBAAuB,OACvBC,qBAAsB,OACtBC,mBAAoB,OACpBC,iBAAkB,OAClBC,cAAe,UAUXvG,EAAAre,UAAAqhB,kBAAR,SAA0BwD,GACxB,IAAMzD,EAAMtiB,KAAKgmB,gBAAgBC,qBAAqBF,GAGtD,OAFAzD,EAAI7X,EAAI0S,KAAKgI,MAAM7C,EAAI7X,EAAIzK,KAAKilB,YAAY,IAC5C3C,EAAIrK,EAAIkF,KAAKgI,MAAM7C,EAAIrK,EAAIjY,KAAKilB,YAAY,IACrC3C,GAEX/C,EAhUA,CAAiCd,IEjIjCyH,GAAA,WAiBE,SAAAA,EAAoBC,GAAAnmB,KAAAmmB,iBAAAA,EAhBZnmB,KAAAomB,KAAOpmB,KAAKmmB,iBAAiBlG,SAC7BjgB,KAAAqmB,gBAA0BrmB,KAAKmmB,iBAAiBG,wBAChDtmB,KAAAumB,eAA0BvmB,KAAKmmB,iBAAiBK,mBAChDxmB,KAAAymB,SAAqC,GACrCzmB,KAAA2f,QAA8B,KAC9B3f,KAAA0mB,QAAoC,KACpC1mB,KAAA2mB,aAAe,IAAIpH,GACzBvf,KACAA,KAAKmmB,iBAAiBS,aAgN1B,OAhMSV,EAAAhlB,UAAA2lB,QAAP,WACE,OAAO7mB,KAAKymB,SAASnmB,QAShB4lB,EAAAhlB,UAAA4lB,WAAP,WACE,OAAO9mB,KAAKymB,UAUPP,EAAAhlB,UAAA6lB,UAAP,WACE,OAAO/mB,KAAK2f,SASPuG,EAAAhlB,UAAA+e,OAAP,WACE,OAAOjgB,KAAKomB,MASPF,EAAAhlB,UAAAof,mBAAP,WACE,OAAOtgB,KAAKmmB,kBASPD,EAAAhlB,UAAAugB,UAAP,WAGE,IAFA,IAAMuF,EAAS,IAAIlI,OAAOC,KAAKkI,aAAajnB,KAAK2f,QAAS3f,KAAK2f,SACzDuH,EAAUlnB,KAAK8mB,aACZzmB,EAAI,EAAGA,EAAI6mB,EAAQ5mB,OAAQD,IAClC2mB,EAAOnI,OAAOqI,EAAQ7mB,GAAG8mB,eAE3B,OAAOH,GAQFd,EAAAhlB,UAAA2E,OAAP,WACE7F,KAAK2mB,aAAa3G,OAAO,MACzBhgB,KAAKymB,SAAW,UACTzmB,KAAKymB,UAUPP,EAAAhlB,UAAAkmB,UAAP,SACEC,GAEA,GAAIrnB,KAAKsnB,sBAAsBD,GAC7B,OAAO,EAGT,GAAKrnB,KAAK2f,SAIR,GAAI3f,KAAKumB,eAAgB,CACvB,IAAMgB,EAAIvnB,KAAKymB,SAASnmB,OAAS,EAC3BknB,GACHxnB,KAAK2f,QAAQ6H,OAASD,EAAI,GAAKF,EAAOF,cAAcK,OAASD,EAC1DE,GACHznB,KAAK2f,QAAQ8H,OAASF,EAAI,GAAKF,EAAOF,cAAcM,OAASF,EAChEvnB,KAAK2f,QAAU,IAAIb,OAAOC,KAAK2I,OAAOF,EAAKC,GAC3CznB,KAAK2nB,yBAVP3nB,KAAK2f,QAAU0H,EAAOF,cACtBnnB,KAAK2nB,mBAaPN,EAAOO,SAAU,EACjB5nB,KAAKymB,SAASpY,KAAKgZ,GAEnB,IAAMQ,EAAS7nB,KAAKymB,SAASnmB,OACvBwnB,EAAK9nB,KAAKmmB,iBAAiB5E,aACjC,GAAW,OAAPuG,GAAe9nB,KAAKomB,KAAKxE,UAAYkG,EAEnCT,EAAOpH,WAAajgB,KAAKomB,MAC3BiB,EAAOrH,OAAOhgB,KAAKomB,WAEhB,GAAIyB,EAAS7nB,KAAKqmB,gBAEnBgB,EAAOpH,WAAajgB,KAAKomB,MAC3BiB,EAAOrH,OAAOhgB,KAAKomB,WAEhB,GAAIyB,IAAW7nB,KAAKqmB,gBAEzB,IAAK,IAAIhmB,EAAI,EAAGA,EAAIwnB,EAAQxnB,IAC1BL,KAAKymB,SAASpmB,GAAG2f,OAAO,WAG1BqH,EAAOrH,OAAO,MAGhB,OAAO,GAUFkG,EAAAhlB,UAAA6mB,wBAAP,SAA+BV,GAC7B,OAAOrnB,KAAK0mB,QAAQsB,SAASX,EAAOF,gBAM9BjB,EAAAhlB,UAAAymB,iBAAR,WACE,IAAMX,EAAS,IAAIlI,OAAOC,KAAKkI,aAAajnB,KAAK2f,QAAS3f,KAAK2f,SAC/D3f,KAAK0mB,QAAU1mB,KAAKmmB,iBAAiB8B,kBAAkBjB,IAMlDd,EAAAhlB,UAAAgnB,WAAP,WACE,IAAML,EAAS7nB,KAAKymB,SAASnmB,OACvBwnB,EAAK9nB,KAAKmmB,iBAAiB5E,aAEjC,GAAW,OAAPuG,GAAe9nB,KAAKomB,KAAKxE,UAAYkG,EACvC9nB,KAAK2mB,aAAa1E,YAIpB,GAAI4F,EAAS7nB,KAAKqmB,gBAEhBrmB,KAAK2mB,aAAa1E,WAFpB,CAMA,IAAMkG,EAAYnoB,KAAKmmB,iBAAiBS,YAAYtmB,OAC9CykB,EAAO/kB,KAAKmmB,iBAAiBiC,eAAtBpoB,CACXA,KAAKymB,SACL0B,GAEFnoB,KAAK2mB,aAAatB,UAAUrlB,KAAK2f,SACjC3f,KAAK2mB,aAAa7B,SAASC,GAC3B/kB,KAAK2mB,aAAa5J,SASZmJ,EAAAhlB,UAAAomB,sBAAR,SAA8BD,GAC5B,GAAIrnB,KAAKymB,SAASnjB,QAChB,OAA0C,IAAnCtD,KAAKymB,SAASnjB,QAAQ+jB,GAE7B,IAAK,IAAIhnB,EAAI,EAAGA,EAAIL,KAAKymB,SAASnmB,OAAQD,IACxC,GAAIgnB,IAAWrnB,KAAKymB,SAASpmB,GAC3B,OAAO,EAIb,OAAO,GAEX6lB,EAzNA,GCiOMmC,GAAY,SAChBtkB,EACAukB,EACAC,GAEA,YAAsBzgB,IAAlB/D,EAAQukB,GACHvkB,EAAQukB,GAERC,GhC46EPC,GAAiC,SAAUhJ,GgCh2E7C,SAAAgJ,EACEhe,EACA0c,EACQnjB,QADR,IAAAmjB,IAAAA,EAAA,SACQ,IAAAnjB,IAAAA,EAAA,IAHV,IAAA1B,EAKEmd,EAAAtS,KAAAlN,OAAOA,KhCs4EH,OgCx4EIqC,EAAA0B,QAAAA,EAjDF1B,EAAAokB,SAAqC,GACrCpkB,EAAAomB,UAAuB,GACvBpmB,EAAAqmB,WAA8C,GAE9CrmB,EAAAsmB,WAA8B,KAC9BtmB,EAAAumB,QAAS,EAEVvmB,EAAA6gB,YAAc7gB,EAAK0B,QAAQmf,aAAW,WAAmB,MAAA,IAExD7gB,EAAAwmB,QACNxmB,EAAK0B,QAAQ+kB,QAAUC,OAAOjK,OAAOC,KAAKiK,OAAOC,YAAc,EACzD5mB,EAAA6mB,UAAY7mB,EAAK0B,QAAQolB,UAAY,GACrC9mB,EAAAgkB,gBAAkBhkB,EAAK0B,QAAQqlB,oBAAsB,EACrD/mB,EAAAgnB,SAAWhnB,EAAK0B,QAAQulB,SAAW,KACnCjnB,EAAAqd,QAA8Brd,EAAK0B,QAAQmb,QAAU,GACrD7c,EAAAknB,OAASlnB,EAAK0B,QAAQuH,OAAS,GAE/BjJ,EAAAmnB,aAAenB,GAAUhmB,EAAK0B,QAAS,eAAe,GACtD1B,EAAAkkB,eAAiB8B,GAAUhmB,EAAK0B,QAAS,iBAAiB,GAE1D1B,EAAAonB,cAAgBpB,GAAUhmB,EAAK0B,QAAS,gBAAgB,GACxD1B,EAAAqnB,mBAAqBrB,GAC3BhmB,EAAK0B,QACL,qBACA,GAGM1B,EAAAsnB,WAAatnB,EAAK0B,QAAQ6lB,WAAapB,EAAgBqB,WACvDxnB,EAAAynB,gBACNznB,EAAK0B,QAAQgmB,gBAAkBvB,EAAgBwB,gBACzC3nB,EAAA4nB,YAAc5nB,EAAK0B,QAAQmmB,YAAc1B,EAAgB2B,YACzD9nB,EAAA+nB,YAAc/nB,EAAK0B,QAAQsmB,YAAc7B,EAAgB8B,WACzDjoB,EAAAkoB,WAAaloB,EAAK0B,QAAQymB,WAAahC,EAAgBiC,WACvDpoB,EAAAqoB,aACNroB,EAAK0B,QAAQ4mB,aAAenC,EAAgBoC,cACtCvoB,EAAAwoB,cAAgBxoB,EAAK0B,QAAQ+mB,cAAgB,WAkBQ,IAAvD1T,UAAUO,UAAUH,cAAclU,QAAQ,UAE5CjB,EAAKkoB,WAAaloB,EAAKqoB,cAGzBroB,EAAK0oB,eAEL1oB,EAAK2oB,WAAW9D,GAAS,GACzB7kB,EAAK2d,OAAOxV,GhC43EDnI,EgCljDf,OAj6BqC4b,GAAAuK,EAAAhJ,GA8FnCgJ,EAAAtnB,UAAAgf,MAAA,WAAA,IAAA7d,EAAArC,KACEA,KAAK2oB,WAAa3oB,KAAKigB,SACvBjgB,KAAK4oB,QAAS,EAEd5oB,KAAKirB,UAELjrB,KAAKkrB,UAAYlrB,KAAKigB,SAAS2B,UAG/B5hB,KAAK0oB,WAAa,CAChB5J,OAAOC,KAAKxM,MAAM0O,YAAYjhB,KAAKigB,SAAU,gBAAgB,WAC3D,IAAMzV,EAIFnI,EAAK4d,SAIHkL,EAAU3gB,EAAI2gB,SAAW,EACzB7B,EAAUnM,KAAKC,IACnB5S,EAAI8e,SAAW,IACf9e,EAAI4gB,SAAS5gB,EAAI6gB,gBAAgB/B,SAE7BgC,EAAOnO,KAAKC,IAChBD,KAAKE,IAAIhb,EAAK4d,SAAS2B,UAAWuJ,GAClC7B,GAGEjnB,EAAK6oB,WAAaI,IACpBjpB,EAAK6oB,UAAYI,EACjBjpB,EAAKkpB,gBAAe,OAGxBzM,OAAOC,KAAKxM,MAAM0O,YAAYjhB,KAAKigB,SAAU,QAAQ,WACnD5d,EAAKmpB,eAWXhD,EAAAtnB,UAAA6gB,SAAA,WAEE,IAAK,IAAI1hB,EAAI,EAAGA,EAAIL,KAAKymB,SAASnmB,OAAQD,IACpCL,KAAKymB,SAASpmB,GAAG4f,WAAajgB,KAAK2oB,YACrC3oB,KAAKymB,SAASpmB,GAAG2f,OAAOhgB,KAAK2oB,YAKjC,IAAStoB,EAAI,EAAGA,EAAIL,KAAKyoB,UAAUnoB,OAAQD,IACzCL,KAAKyoB,UAAUpoB,GAAGwF,SAEpB7F,KAAKyoB,UAAY,GAGjB,IAASpoB,EAAI,EAAGA,EAAIL,KAAK0oB,WAAWpoB,OAAQD,IAC1Cye,OAAOC,KAAKxM,MAAM2P,eAAeliB,KAAK0oB,WAAWroB,IAEnDL,KAAK0oB,WAAa,GAElB1oB,KAAK2oB,WAAa,KAClB3oB,KAAK4oB,QAAS,GAOhBJ,EAAAtnB,UAAAmhB,KAAA,aAKQmG,EAAAtnB,UAAA6pB,aAAR,WACE,KAAI/qB,KAAK0f,QAAQpf,OAAS,GAI1B,IAAK,IAAID,EAAI,EAAGA,EAAIL,KAAKiqB,YAAY3pB,OAAQD,IAAK,CAChD,IAAMorB,EAAOzrB,KAAKiqB,YAAY5pB,GAC9BL,KAAK0f,QAAQrR,KACXma,EAAgBkD,iBAAiB,CAC/BtnB,IAAKpE,KAAK2pB,YAActpB,EAAI,GAAK,IAAML,KAAK8pB,gBAC5CnF,OAAQ8G,EACRvH,MAAOuH,OASfjD,EAAAtnB,UAAAyqB,gBAAA,SAAgBC,GAGd,IAFA,IAAM1E,EAAUlnB,KAAK8mB,aACfE,EAAS,IAAIlI,OAAOC,KAAKkI,aACtB5mB,EAAI,EAAGA,EAAI6mB,EAAQ5mB,OAAQD,KAE9B6mB,EAAQ7mB,GAAGwrB,cAAiB7rB,KAAK8rB,mBACnC9E,EAAOnI,OAAOqI,EAAQ7mB,GAAG8mB,eAI5BnnB,KAAKigB,SAA6ByB,UAAUsF,EAAQ4E,IAQvDpD,EAAAtnB,UAAA6qB,YAAA,WACE,OAAO/rB,KAAKkpB,WAQdV,EAAAtnB,UAAA8qB,YAAA,SAAY7C,GACVnpB,KAAKkpB,UAAYC,GAQnBX,EAAAtnB,UAAAolB,sBAAA,WACE,OAAOtmB,KAAKqmB,iBAQdmC,EAAAtnB,UAAA+qB,sBAAA,SAAsB7C,GACpBppB,KAAKqmB,gBAAkB+C,GAQzBZ,EAAAtnB,UAAAqgB,WAAA,WACE,OAAOvhB,KAAKqpB,UAQdb,EAAAtnB,UAAAgrB,WAAA,SAAW5C,GACTtpB,KAAKqpB,SAAWC,GAGlBd,EAAAtnB,UAAAskB,UAAA,WACE,OAAOxlB,KAAK6oB,SAGdL,EAAAtnB,UAAAirB,UAAA,SAAUrD,GACR9oB,KAAK6oB,QAAUC,GAQjBN,EAAAtnB,UAAA0lB,UAAA,WACE,OAAO5mB,KAAK0f,SAQd8I,EAAAtnB,UAAAkrB,UAAA,SAAUlN,GACRlf,KAAK0f,QAAUR,GAQjBsJ,EAAAtnB,UAAA+hB,SAAA,WACE,OAAOjjB,KAAKupB,QAQdf,EAAAtnB,UAAAmrB,SAAA,SAAS/gB,GACPtL,KAAKupB,OAASje,GAQhBkd,EAAAtnB,UAAAmgB,eAAA,WACE,OAAOrhB,KAAKwpB,cAQdhB,EAAAtnB,UAAAorB,eAAA,SAAeC,GACbvsB,KAAKwpB,aAAe+C,GAQtB/D,EAAAtnB,UAAAslB,iBAAA,WACE,OAAOxmB,KAAKumB,gBAQdiC,EAAAtnB,UAAAsrB,iBAAA,SAAiBC,GACfzsB,KAAKumB,eAAiBkG,GAQxBjE,EAAAtnB,UAAA4qB,gBAAA,WACE,OAAO9rB,KAAKypB,eAQdjB,EAAAtnB,UAAAwrB,gBAAA,SAAgBC,GACd3sB,KAAKypB,cAAgBkD,GAQvBnE,EAAAtnB,UAAAwjB,qBAAA,WACE,OAAO1kB,KAAK0pB,oBAQdlB,EAAAtnB,UAAA0rB,qBAAA,SAAqBC,GACnB7sB,KAAK0pB,mBAAqBmD,GAQ5BrE,EAAAtnB,UAAA4rB,kBAAA,WACE,OAAO9sB,KAAK8pB,iBAQdtB,EAAAtnB,UAAA6rB,kBAAA,SAAkBhD,GAChB/pB,KAAK8pB,gBAAkBC,GAQzBvB,EAAAtnB,UAAA8rB,aAAA,WACE,OAAOhtB,KAAK2pB,YAQdnB,EAAAtnB,UAAA+rB,aAAA,SAAarD,GACX5pB,KAAK2pB,WAAaC,GAQpBpB,EAAAtnB,UAAAgsB,cAAA,WACE,OAAOltB,KAAKiqB,aAQdzB,EAAAtnB,UAAAisB,cAAA,SAAcjD,GACZlqB,KAAKiqB,YAAcC,GAQrB1B,EAAAtnB,UAAAknB,cAAA,WACE,OAAOpoB,KAAKoqB,aAQd5B,EAAAtnB,UAAAksB,cAAA,SAAc/C,GACZrqB,KAAKoqB,YAAcC,GAQrB7B,EAAAtnB,UAAAmsB,eAAA,WACE,OAAOrtB,KAAK0qB,cAQdlC,EAAAtnB,UAAAosB,eAAA,SAAe3C,GACb3qB,KAAK0qB,aAAeC,GAQtBnC,EAAAtnB,UAAAkkB,gBAAA,WACE,OAAOplB,KAAK6qB,eAQdrC,EAAAtnB,UAAAqsB,gBAAA,SAAgBzC,GACd9qB,KAAK6qB,cAAgBC,GAQvBtC,EAAAtnB,UAAA4lB,WAAA,WACE,OAAO9mB,KAAKymB,UAQd+B,EAAAtnB,UAAAssB,gBAAA,WACE,OAAOxtB,KAAKymB,SAASnmB,QAQvBkoB,EAAAtnB,UAAAusB,YAAA,WACE,OAAOztB,KAAKyoB,WAQdD,EAAAtnB,UAAAwsB,iBAAA,WACE,OAAO1tB,KAAKyoB,UAAUnoB,QAUxBkoB,EAAAtnB,UAAAkmB,UAAA,SAAUC,EAA4BsG,GACpC3tB,KAAK4tB,cAAcvG,GACdsG,GACH3tB,KAAKwrB,WAWThD,EAAAtnB,UAAA8pB,WAAA,SAAW9D,EAA+ByG,GACxC,IAAK,IAAM9sB,KAAOqmB,EACZvmB,OAAOO,UAAU8c,eAAe9Q,KAAKga,EAASrmB,IAChDb,KAAK4tB,cAAc1G,EAAQrmB,IAG1B8sB,GACH3tB,KAAKwrB,WASDhD,EAAAtnB,UAAA0sB,cAAR,SACEvG,GADF,IAAAhlB,EAAArC,KAIMqnB,EAAOwG,gBACT/O,OAAOC,KAAKxM,MAAM0O,YAAYoG,EAAQ,WAAW,WAC3ChlB,EAAKumB,SACPvB,EAAOO,SAAU,EACjBvlB,EAAK4oB,cAIX5D,EAAOO,SAAU,EACjB5nB,KAAKymB,SAASpY,KAAKgZ,IAYrBmB,EAAAtnB,UAAA4sB,aAAA,SAAazG,EAA4BsG,GACvC,IAAMI,EAAU/tB,KAAKguB,cAAc3G,GAMnC,OAJKsG,GAAUI,GACb/tB,KAAKirB,UAGA8C,GAWTvF,EAAAtnB,UAAA+sB,cAAA,SAAc/G,EAA+ByG,GAG3C,IAFA,IAAII,GAAU,EAEL1tB,EAAI,EAAGA,EAAI6mB,EAAQ5mB,OAAQD,IAAK,CACvC,IAAM6tB,EAAIluB,KAAKguB,cAAc9G,EAAQ7mB,IACrC0tB,EAAUA,GAAWG,EAOvB,OAJKP,GAAUI,GACb/tB,KAAKirB,UAGA8C,GASDvF,EAAAtnB,UAAA8sB,cAAR,SAAsB3G,GACpB,IAAI7T,GAAS,EACb,GAAIxT,KAAKymB,SAASnjB,QAChBkQ,EAAQxT,KAAKymB,SAASnjB,QAAQ+jB,QAE9B,IAAK,IAAIhnB,EAAI,EAAGA,EAAIL,KAAKymB,SAASnmB,OAAQD,IACxC,GAAIgnB,IAAWrnB,KAAKymB,SAASpmB,GAAI,CAC/BmT,EAAQnT,EACR,MAKN,OAAe,IAAXmT,IAKJ6T,EAAOrH,OAAO,MACdhgB,KAAKymB,SAAShT,OAAOD,EAAO,IACrB,IAOTgV,EAAAtnB,UAAAitB,aAAA,WACEnuB,KAAKurB,gBAAe,GACpBvrB,KAAKymB,SAAW,IAOlB+B,EAAAtnB,UAAA+pB,QAAA,WACE,IAAMmD,EAAcpuB,KAAKyoB,UAAUvT,QACnClV,KAAKyoB,UAAY,GACjBzoB,KAAKurB,gBAAe,GACpBvrB,KAAKwrB,UAIL7J,YAAW,WACT,IAAK,IAAIthB,EAAI,EAAGA,EAAI+tB,EAAY9tB,OAAQD,IACtC+tB,EAAY/tB,GAAGwF,WAEhB,IAUL2iB,EAAAtnB,UAAA+mB,kBAAA,SACEjB,GAEA,IAAMqH,EAAaruB,KAAKgmB,gBAGlBsI,EAAK,IAAIxP,OAAOC,KAAK2I,OACzBV,EAAOuH,eAAe/G,MACtBR,EAAOuH,eAAe9G,OAElB+G,EAAK,IAAI1P,OAAOC,KAAK2I,OACzBV,EAAOyH,eAAejH,MACtBR,EAAOyH,eAAehH,OAIlBiH,EAAQL,EAAWpI,qBAAqBqI,GAC9CI,EAAMjkB,GAAKzK,KAAKkpB,UAChBwF,EAAMzW,GAAKjY,KAAKkpB,UAEhB,IAAMyF,EAAQN,EAAWpI,qBAAqBuI,GAC9CG,EAAMlkB,GAAKzK,KAAKkpB,UAChByF,EAAM1W,GAAKjY,KAAKkpB,UAGhB,IAAM0F,EAAKP,EAAWQ,qBAAqBH,GACrCI,EAAKT,EAAWQ,qBAAqBF,GAM3C,OAHA3H,EAAOnI,OAAO+P,GACd5H,EAAOnI,OAAOiQ,GAEP9H,GAMDwB,EAAAtnB,UAAAsqB,QAAR,WACExrB,KAAK+uB,gBAAgB,IASfvG,EAAAtnB,UAAAqqB,eAAR,SAAuBtJ,GAErB,IAAK,IAAI5hB,EAAI,EAAGA,EAAIL,KAAKyoB,UAAUnoB,OAAQD,IACzCL,KAAKyoB,UAAUpoB,GAAGwF,SAEpB7F,KAAKyoB,UAAY,GAGjB,IAASpoB,EAAI,EAAGA,EAAIL,KAAKymB,SAASnmB,OAAQD,IAAK,CAC7C,IAAMgnB,EAASrnB,KAAKymB,SAASpmB,GAC7BgnB,EAAOO,SAAU,EACb3F,GACFoF,EAAOrH,OAAO,QAaZwI,EAAAtnB,UAAA8tB,uBAAR,SACEC,EACAC,GAEA,IACMC,GAASD,EAAG1H,MAAQyH,EAAGzH,OAASrK,KAAKiS,GAAM,IAC3CC,GAASH,EAAGzH,MAAQwH,EAAGxH,OAAStK,KAAKiS,GAAM,IAC3CE,EACJnS,KAAKoS,IAAIJ,EAAO,GAAKhS,KAAKoS,IAAIJ,EAAO,GACrChS,KAAKqS,IAAKP,EAAGzH,MAAQrK,KAAKiS,GAAM,KAC9BjS,KAAKqS,IAAKN,EAAG1H,MAAQrK,KAAKiS,GAAM,KAChCjS,KAAKoS,IAAIF,EAAO,GAChBlS,KAAKoS,IAAIF,EAAO,GAEpB,OAVU,MASA,EAAIlS,KAAKsS,MAAMtS,KAAKuS,KAAKJ,GAAInS,KAAKuS,KAAK,EAAIJ,MAW/C9G,EAAAtnB,UAAAyuB,kBAAR,SACEtI,EACAL,GAEA,OAAOA,EAAOgB,SAASX,EAAOF,gBAQxBqB,EAAAtnB,UAAA0uB,qBAAR,SAA6BvI,GAG3B,IAFA,IAAIwI,EAAW,IACXC,EAAiB,KACZzvB,EAAI,EAAGA,EAAIL,KAAKyoB,UAAUnoB,OAAQD,IAAK,CAC9C,IAAM0vB,EACAzK,GADAyK,EAAU/vB,KAAKyoB,UAAUpoB,IACR0mB,YACvB,GAAIzB,EAAQ,CACV,IAAMxH,EAAI9d,KAAKgvB,uBAAuB1J,EAAQ+B,EAAOF,eACjDrJ,EAAI+R,IACNA,EAAW/R,EACXgS,EAAiBC,IAKnBD,GAAkBA,EAAe/H,wBAAwBV,GAC3DyI,EAAe1I,UAAUC,KAEnB0I,EAAU,IAAI7J,GAAQlmB,OACpBonB,UAAUC,GAClBrnB,KAAKyoB,UAAUpa,KAAK0hB,KAWhBvH,EAAAtnB,UAAA6tB,gBAAR,SAAwBiB,GAAxB,IAAA3tB,EAAArC,KACE,GAAKA,KAAK4oB,OAAV,CAkBA,IAAIqH,EAbW,IAAXD,IACFlR,OAAOC,KAAKxM,MAAM6O,QAAQphB,KAAM,kBAAmBA,WAEhB,IAAxBA,KAAKkwB,iBACdC,aAAanwB,KAAKkwB,uBACXlwB,KAAKkwB,iBAWdD,EADEjwB,KAAKigB,SAAS2B,UAAY,EAChB,IAAI9C,OAAOC,KAAKkI,aACzBjnB,KAAKigB,SAA6BwB,YAAYgN,eAC9CzuB,KAAKigB,SAA6BwB,YAAY8M,gBAGrC,IAAIzP,OAAOC,KAAKkI,aAC1B,IAAInI,OAAOC,KAAK2I,OAAO,mBAAoB,iBAC3C,IAAI5I,OAAOC,KAAK2I,QAAQ,kBAAmB,kBAO/C,IAJA,IAAMV,EAAShnB,KAAKioB,kBAAkBgI,GAEhCG,EAAQjT,KAAKC,IAAI4S,EAAShwB,KAAKuqB,WAAYvqB,KAAKymB,SAASnmB,QAEtDD,EAAI2vB,EAAQ3vB,EAAI+vB,EAAO/vB,IAAK,CACnC,IAAMgnB,EAASrnB,KAAKymB,SAASpmB,IACxBgnB,EAAOO,SAAW5nB,KAAK2vB,kBAAkBtI,EAAQL,MAEjDhnB,KAAKypB,eACLzpB,KAAKypB,eAAiBpC,EAAOwE,eAE9B7rB,KAAK4vB,qBAAqBvI,GAKhC,GAAI+I,EAAQpwB,KAAKymB,SAASnmB,OACxBN,KAAKkwB,eAAiBptB,OAAO6e,YAAW,WACtCtf,EAAK0sB,gBAAgBqB,KACpB,OACE,QACEpwB,KAAKkwB,eACZpR,OAAOC,KAAKxM,MAAM6O,QAAQphB,KAAM,gBAAiBA,MAEjD,IAASK,EAAI,EAAGA,EAAIL,KAAKyoB,UAAUnoB,OAAQD,IACzCL,KAAKyoB,UAAUpoB,GAAG6nB,gBAajBM,EAAA8B,WAAP,SACEpD,EACAiB,GAMA,IAJA,IAAI3U,EAAQ,EACNqB,EAAgBqS,EAAQ5mB,OAE1B+vB,EAAKxb,EACK,IAAPwb,GACLA,EAAKlT,KAAKgI,MAAMkL,EAAK,IACrB7c,IAIF,OADAA,EAAQ2J,KAAKC,IAAI5J,EAAO2U,GACjB,CACL1f,KAAMoM,EAAMtJ,WACZiI,MAAOA,EACPlI,MAAO,KAUJkd,EAAAkD,iBAAP,SAAwB4E,GACtB,OAAAjS,GAAA,CACEiF,UAAW,QACXE,SAAU,GACVQ,eAAgB,OAChBI,eAAgBkM,EAAU3L,OAC1Bf,WAAY,OACZE,UAAW,SACXJ,WAAY,mBACZY,mBAAoB,OACjBgM,IA15BA9H,EAAAiC,WAAa,IAKbjC,EAAAoC,cAAgB,IAKhBpC,EAAAqB,WAAa,cAKbrB,EAAAwB,gBAAkB,MAKlBxB,EAAA2B,YAAwB,CAAC,GAAI,GAAI,GAAI,GAAI,IAy4BlD3B,EhCugDoC,CgCx6EC/J,ICpQxB8R,GAAY,CACxB,CACCC,YAAe,iBACfC,YAAe,mBACfC,QAAW,CACV,CACCrN,MAAS,aAIZ,CACCmN,YAAe,YACfC,YAAe,MACfC,QAAW,CACV,CACCrN,MAAS,aAIZ,CACCmN,YAAe,MACfC,YAAe,MACfC,QAAW,CACV,CACCC,WAAc,SAIjB,CACCH,YAAe,OACfC,YAAe,MACfC,QAAW,CACV,CACCE,YAAe,KAEhB,CACCC,UAAa,MAIhB,CACCL,YAAe,eACfC,YAAe,MACfC,QAAW,CACV,CACCC,WAAc,gBAIjB,CACCH,YAAe,gBACfC,YAAe,cACfC,QAAW,CACV,CACCC,WAAc,SAIjB,CACCH,YAAe,UACfC,YAAe,MACfC,QAAW,CACV,CACCC,WAAc,SAIjB,CACCH,YAAe,QACfC,YAAe,MACfC,QAAW,CACV,CACCrN,MAAS,WAEV,CACCsN,WAAc,SHlELG,GAAb,SAAAhf,GAAA,SAAAgf,IAAA,OAAAhf,EAAA7H,MAAAjK,KAAAkK,YAAAlK,KAAAsB,EAAAwvB,EAAAhf,GAAA,IAAAhO,EAAAgtB,EAAA5vB,UAAA,OAAA4C,EAECiO,OAAA,WAAS,IAAA1P,EAAArC,KACF+G,EAASC,EAAYF,WAAWC,OACtC,GAAmB,MAAfuY,GACHtf,KAAK+wB,cACC,CACNjuB,OAAOkuB,mBAAqB,WAC3B1R,GAAcxc,OAAOgc,OAAOC,KAC5B1c,EAAK0uB,WAEN,IAAME,EAAShuB,SAASwO,cAAc,UACtCwf,EAAOC,aAAa,OAAQ,mBAC5BD,EAAOC,aAAa,MAApB,uEAAiGnqB,EAAM,QAAWA,EAAW,IAA7H,sBACC9D,SAASkuB,qBAAqB,QAAQ,IAAMluB,SAASmuB,iBAAiBrQ,YAAYkQ,KAdtFntB,EAkBCitB,QAAA,WACC,IAAMjS,EAAShc,OAAOgc,OACd5N,EAASc,EAAAA,WAAWhS,MAApBkR,KAGFmC,GAFSrT,KAAKslB,OAEPtlB,KAAKsU,OAAStU,KAAKsU,MAAMhU,OAASN,KAAKsU,MAAM,GAAK,MAIzD+c,EAAa,CAClB/F,KAAM,GACNhG,OAJgBjS,EAAO,IAAIyL,EAAOC,KAAK2I,OAAOrU,EAAKie,SAAUje,EAAKke,WAAa,KAM/EC,aAAa,EAEbC,mBAAoB,CACnB1R,MAAOjB,EAAOC,KAAK2S,iBAAiBC,SAIrCC,cAAc,EACdC,aAAa,EACbC,gBAAgB,EAChBC,mBAAmB,EACnBC,eAAe,EACfC,mBAAmB,EAEnB/S,OAAQqR,IAGH2B,EAAahhB,EAAKhO,cAAc,QAEhCsH,EAAMxK,KAAKwK,IAAM,IAAIsU,EAAOC,KAAKoT,IAAID,EAAYb,GAEvDrxB,KAAKgrB,WAAWhrB,KAAKsU,OAEhBtU,KAAKsU,OACT9J,EAAIkX,UAAU1hB,KAAKoyB,mBAvDtBtuB,EA2DCuuB,UAAA,WACCryB,KAAKmuB,eACLnuB,KAAKgrB,WAAWhrB,KAAKsU,QA7DvBxQ,EAgECwuB,kBAAA,SAAkBC,EAAMC,EAAMC,EAAMC,EAAMC,GACzC,GAAKJ,GAAQE,GAAUD,GAAQE,EAC9B,OAAO,EAEP,IAAME,EAAUzV,KAAKiS,GAAKmD,EAAO,IAC3BM,EAAU1V,KAAKiS,GAAKqD,EAAO,IAC3BK,EAAQN,EAAOE,EACfK,EAAW5V,KAAKiS,GAAK0D,EAAQ,IAC/BE,EAAO7V,KAAKoS,IAAIqD,GAAWzV,KAAKoS,IAAIsD,GAAW1V,KAAKqS,IAAIoD,GAAWzV,KAAKqS,IAAIqD,GAAW1V,KAAKqS,IAAIuD,GAapG,OAZIC,EAAO,IACVA,EAAO,GAIRA,EAAc,IADdA,EAAc,KADdA,EAAO7V,KAAK8V,KAAKD,IACG7V,KAAKiS,IACN,OACP,KAARuD,IACHK,GAAc,UAEH,KAARL,IACHK,GAAc,OAERA,GArFVlvB,EAyFCqqB,aAAA,WACKnuB,KAAKkzB,eACRlzB,KAAKkzB,cAAc/E,eAEhBnuB,KAAKknB,SACRlnB,KAAKknB,QAAQ3kB,SAAQ,SAAA8kB,GAAM,OAAIA,EAAOrH,OAAO,UA9FhDlc,EAkGCknB,WAAA,SAAW1W,GAAO,IAAA7G,EAAAzN,KACXwK,EAAMxK,KAAKwK,IACjB,GAAIA,GAAO8J,EAAO,CACjB,IAAM0S,EAAS,IAAIlI,OAAOC,KAAKkI,aAEzBC,EAAU5S,EAAM9J,KAAI,SAAC6I,GAE1B,IAAM8P,EAAW,IAAIrE,OAAOC,KAAK2I,OAAOrU,EAAKie,SAAUje,EAAKke,WAE5DvK,EAAOnI,OAAOsE,GAEd,IAAIgQ,EAAO,uHAEuB9f,EAAKtI,KAF5B,yDAGoBsI,EAAK+f,QAHzB,+CAIiB/f,EAAKsI,KAJtB,kDAKoBtI,EAAKwH,QAAQ9P,KALjC,wBAMPsI,EAAKggB,MAAL,oCAAiDhgB,EAAKggB,MAAtD,KAAgEhgB,EAAKggB,MAArE,OAAmF,IAN5E,kBAOPhgB,EAAKigB,IAAL,kCAA6CjgB,EAAKigB,IAAlD,KAA0DjgB,EAAKigB,IAA/D,OAA2E,IAPpE,kBAQPjgB,EAAKmI,MAAL,uCAAoDnI,EAAKmI,MAAzD,KAAmEnI,EAAKmI,MAAxE,OAAsF,IAR/E,qCAgCL+X,EAAc,IAAIzU,OAAOC,KAAKyU,YAChCxsB,EAAYX,OADI,yBAEnB,IAAIyY,OAAOC,KAAK0U,KAAK,GAAI,KAGtBpM,EAAS,IAAIvI,OAAOC,KAAKiK,OAAO,CACnC7F,SAAUA,EACV3Y,IAAqB,KACrBkpB,KAAMH,EACNjoB,MAAO+H,EAAK/H,MACZ+H,KAAMA,EACN8f,QAASA,IAQV,OANA9L,EAAOpG,YAAY,SAAS,WAC3BxT,EAAKkmB,gBAAgBtM,EAAOlE,SAAUgQ,MAIvC9f,EAAKgU,OAASA,EACPA,KAID6L,EAAgB,IAAI1K,GAAgBxoB,KAAKwK,IAAK0c,EAAS,CAC5D0C,UAAc5iB,EAAYX,OAAjB,sBAEJ6Y,EAASgU,EAActM,YACvBgN,EAAQ,CAAC,GAAI,GAAI,GAAI,GAAI,IAC/B1U,EAAO3c,SAAQ,SAACwd,EAAO1f,GACtB0f,EAAMmE,MAAQ0P,EAAMvzB,GACpB0f,EAAM4E,OAASiP,EAAMvzB,GACrB0f,EAAMqE,eAAiBwP,EAAMvzB,GAC7B0f,EAAMyD,SAAWrG,KAAKgI,MAAMpF,EAAMmE,MAAQ,GAC1CnE,EAAMuD,UAAY,aAEnB4P,EAAc9G,UAAUlN,GACxBlf,KAAKkzB,cAAgBA,EAGtBlzB,KAAKknB,QAAUA,EAEf1c,EAAIkX,UAAUsF,KAtLjBljB,EA0LC+vB,eAAA,SAAerpB,GAAK,IAAAyF,EAAAjQ,KACnBA,KAAK6I,MAAQ,KACb7I,KAAK8zB,cAAe,EACpB,IAAI3Q,EAAWnjB,KAAKwK,IAAIuc,YAGpB3P,UAAU2c,YACb3c,UAAU2c,YAAYC,oBAAmB,SAACjxB,GACzCogB,EAAW,IAAIrE,OAAOC,KAAK2I,OAAO3kB,EAASkxB,OAAO3C,SAAUvuB,EAASkxB,OAAO1C,WAE5E,IAAM2C,EAAWjkB,EAAKikB,UAAY,IAAIpV,OAAOC,KAAKoV,SAClDlkB,EAAKikB,SAAWA,EAChBA,EAASE,QAAQ,CAAErxB,SAAYogB,IAAY,SAACkR,EAAS1qB,GACpD,GAAc,MAAVA,EAAgB,CACnB,IAAI2qB,EAAmBD,EAAQvhB,QAAO,SAASyhB,GAC9C,OAAOA,EAAkB/Z,MAAMga,SAAS,eAEzCvkB,EAAK8J,MAAM4B,KAAO2Y,EAAiBh0B,OAASg0B,EAAiB,GAAGG,uBAAoB3sB,EACpFmI,EAAK8J,MAAMqZ,QAAUiB,EAAQ,GAAGI,kBAEhC,IAAK,IAAIp0B,EAAI,EAAGA,EAAIg0B,EAAQ,GAAGK,mBAAmBp0B,OAAQD,IACR,WAA7Cg0B,EAAQ,GAAGK,mBAAmBr0B,GAAGma,MAAM,IAAgE,aAA7C6Z,EAAQ,GAAGK,mBAAmBr0B,GAAGma,MAAM,KACpGvK,EAAK0kB,cAAgBN,EAAQ,GAAGK,mBAAmBr0B,GAAGu0B,YAIxD3kB,EAAK4kB,cAAc1R,EAAU,GAC7BlT,EAAK6kB,eAAe3R,GAAU4R,SAAQ,WAAA,OAAM9kB,EAAK6jB,cAAe,KAChE7jB,EAAKzF,IAAI6a,UAAUlC,GACnBlT,EAAKzF,IAAIqX,QAAQmT,mBAGjB,WACF/kB,EAAK4kB,cAAc1R,EAAU,GAC7BlT,EAAK6kB,eAAe3R,GAAU4R,SAAQ,WAAA,OAAM9kB,EAAK6jB,cAAe,SAIjE9zB,KAAK60B,cAAc1R,EAAU,GAC7BnjB,KAAK80B,eAAe3R,GAAU4R,SAAQ,WAAA,OAAM9kB,EAAK6jB,cAAe,OAjOnEhwB,EAqOC4d,UAAA,SAAUpN,GACT,GAAIA,EAAMhU,OAAQ,CACjB,IAAM0mB,EAAS,IAAIlI,OAAOC,KAAKkI,aAC/B3S,EAAM/R,SAAQ,SAAC8Q,GACd,IAAM8P,EAAW,IAAIrE,OAAOC,KAAK2I,OAAOrU,EAAKie,SAAUje,EAAKke,WAC5DvK,EAAOnI,OAAOsE,MAEfnjB,KAAKwK,IAAIkX,UAAUsF,KA5OtBljB,EAiPCmxB,eAAA,SAAe3gB,EAAO6O,GAAU,IAAAhT,EAAAnQ,KAC/B,GAAIsU,EAAO,CACVA,EAAM/R,SAAQ,SAAC8Q,GACdA,EAAKwc,SAAW1f,EAAKmiB,kBAAkBjf,EAAKie,SAAUje,EAAKke,UAAWpO,EAASqE,MAAOrE,EAASsE,MAAO,KACtGpU,EAAK6hB,SAAW7hB,EAAK8hB,WAAaryB,OAAOsyB,cAAgBtyB,OAAOsyB,cAAgB/hB,EAAKwc,UAAYwF,aAC7FhiB,EAAK6hB,SACJ7hB,EAAK0a,SACR5d,EAAK+iB,cAAc9L,UAAU/T,EAAKgU,eAE5BhU,EAAK0a,UAEZ5d,EAAK+iB,cAAcpF,aAAaza,EAAKgU,QACrChU,EAAK0a,SAAU,OAGjBzZ,EAAQA,EAAMY,SACRogB,MAAK,SAAChG,EAAGvR,GACd,OAAOuR,EAAEO,UAAYP,EAAEiG,WAAa,GAAM,GAAKxX,EAAE8R,UAAY9R,EAAEwX,WAAa,GAAM,MAEnF,IAAMC,EAAgBlhB,EAAMxB,QAAO,SAAAO,GAAI,OAAIA,EAAK6hB,WAAShgB,MAAM,EAAG,IAKlE,OAJAlV,KAAKy1B,UAAS,WACbtlB,EAAKqlB,cAAgBA,IACnB,GAEIA,IAzQV1xB,EA6QC4xB,MAAA,SAAMriB,GACL,IAAM8P,EAAW,IAAIrE,OAAOC,KAAK2I,OAAOrU,EAAKie,SAAUje,EAAKke,WAC5DvxB,KAAKwK,IAAIqX,QAAQmT,YACjBh1B,KAAKwK,IAAIkrB,MAAMvS,GACf,IAAMkE,EAASrnB,KAAKknB,QAAQxZ,MAAK,SAAAjD,GAAC,OAAIA,EAAE4I,OAASA,KACjDrT,KAAK2zB,gBAAgBtM,EAAOlE,SAAUkE,EAAO8L,UAlR/CrvB,EAqRC6vB,gBAAA,SAAgBxQ,EAAUgQ,GACzB,GAAIhQ,EAAU,CACb,IAAMwS,EAAe31B,KAAK21B,cAAgB,IAAI7W,OAAOC,KAAK6W,WAAW,CACpEC,YAAa,IAAI/W,OAAOC,KAAK0U,KAAK,GAAI,MAEvCzzB,KAAK21B,aAAeA,EACpBA,EAAaG,YAAY3S,GACzBwS,EAAaI,WAAW5C,GACxBwC,EAAaK,KAAKh2B,KAAKwK,UAEvBxK,KAAKi2B,qBA/RRnyB,EAmSCmyB,kBAAA,WACKj2B,KAAK21B,cACR31B,KAAK21B,aAAaO,SArSrBpyB,EAySCqyB,eAAA,WACC,OAAO,IAAIrX,OAAOC,KAAKkI,aACtB,IAAInI,OAAOC,KAAK2I,OAAO,GAAI,IAC3B,IAAI5I,OAAOC,KAAK2I,QAAQ,IAAK,MA5ShC5jB,EAgTCsuB,eAAA,WACC,OAAO,IAAItT,OAAOC,KAAKkI,aACtB,IAAInI,OAAOC,KAAK2I,OAAO,WAAY,UACnC,IAAI5I,OAAOC,KAAK2I,OAAO,WAAY,aAnTtCoJ,EAAA,CAAkCpe,EAAAA,WAwTlCoe,GAAahmB,KAAO,CACnB6H,SAAU,QACVwH,OAAQ,CAAC,SAAU,UAFpB,II/Taic,GAAb,WAAA,SAAAA,KAAA,OAAAA,EAEQxd,KAAP,WACC,OAAOjL,EAAWvE,KAAK,wBAHzBgtB,EAMQvd,SAAP,WACC,OAAOlL,EAAWvE,KAAK,4BAPzBgtB,EAAA,GCQaC,GAAb,SAAAvkB,GAAA,SAAAukB,IAAA,OAAAvkB,EAAA7H,MAAAjK,KAAAkK,YAAAlK,KAAAsB,EAAA+0B,EAAAvkB,GAAA,IAAAhO,EAAAuyB,EAAAn1B,UAAA,OAAA4C,EAECiO,OAAA,WAAS,IAAA1P,EAAArC,KACRA,KAAKs2B,aAAe,KACpBt2B,KAAKsU,MAAQ,GACbtU,KAAK2U,cAAgB,GACrB3U,KAAK+T,QAAU,GACf,IAAMlU,EAAOG,KAAKH,KAAO,IAAImZ,EAAAA,UAAU,CACtC0D,SAAU,IAAIxD,EAAAA,YAAY,QAErBG,EAAWrZ,KAAKqZ,SAAWxZ,EAAKwZ,SACtCxZ,EAAKyZ,SAAStQ,KACboJ,EAAAA,UAAUpS,KAAKqS,eACdC,WAAU,SAACxC,GACZzN,EAAKkX,uBAAuB,WAAY1Z,EAAKwB,MAAMqb,UACnDra,EAAKmL,iBAENxN,KAAKuR,QAAQvI,KACZyJ,EAAAA,SACCH,WAAU,SAAAlL,GACX/E,EAAKiS,MAAQlN,EAAK,GAClB/E,EAAK0R,QAAU3M,EAAK,GACpBiS,EAASqD,SAAS3Y,QAAUiR,EAAYC,gBAAgB5S,EAAK0R,QAAQ2I,SAAS3Y,SAC9E1B,EAAKmX,SACLnX,EAAKmL,kBAxBR1J,EA4BCyN,MAAA,WACC,OAAOkI,EAAAA,cAAc,CACpB2c,GAAiBxd,OACjBwd,GAAiBvd,cA/BpB/U,EAmCC0V,OAAA,WAAS,IAAA/L,EAAAzN,KACFsU,EAAQtU,KAAKsU,MACbP,EAAU/T,KAAK+T,QACrBpT,OAAO2B,KAAKyR,GAASxR,SAAQ,SAAA1B,GAC5BkT,EAAQlT,GAAKmS,KAAOe,EAAQlT,GAAKmS,MAAQJ,KAE1C,IACM8G,EAAgB,IAAI9F,EAAcG,EADlB,IAC0C,SAAClT,EAAKiS,GAGnEA,EAAOA,OAAS,SAACO,EAAMhS,GACtB,OAAQR,GACP,IAAK,WACJ,OAAOwS,EAAKqJ,SAASvH,KAAO9T,OAMlCrB,KAAK0Z,cAAgBA,EACrB1Z,KAAK+T,QAAU2F,EAAc3F,QAC7B,IAAM2I,EAAW1c,KAAK+T,QAAQ2I,SAASxJ,OAAO5S,OAASN,KAAK+T,QAAQ2I,SAASxJ,OAAO,GAAK,KACzFlT,KAAKH,KAAKga,MAAM,CAAE6C,SAAAA,EAAU1Z,OAAAA,SAC5B0W,EAAcrF,OAAOC,GAAOtL,KAC3BoJ,EAAAA,UAAUpS,KAAKqS,eACdC,WAAU,SAAAqC,GACXlH,EAAKkH,cAAgBA,EACrBlH,EAAKD,cACL4H,EAAwBpP,aA/D3BlC,EAoECyV,uBAAA,SAAuB1Y,EAAKQ,GAC3B,IAAMyR,EAAS9S,KAAK+T,QAAQlT,GAC5B,GAAIiS,EACH,GAAIA,EAAOE,OAASJ,EACnBE,EAAOpO,IAAIrD,OACL,CACN,IAAMuT,EAAS9B,EAAO/O,QAAQ2J,MAAK,SAAAjD,GAAC,OAAIA,EAAEpJ,QAAUA,KAEhDuT,EACH9B,EAAOpO,IAAIkQ,GAEX9B,EAAOa,UA/EZ7P,EAqFCyyB,SAAA,SAASljB,GACRrT,KAAKs2B,aAAet2B,KAAKs2B,eAAiBjjB,EAAO,KAAOA,EAOxDrT,KAAKwN,eA7FP1J,EAgGC0U,SAAA,SAAS7F,EAAUJ,GACdA,GACHA,EAAM0H,iBAEP,IACM9Z,EADW6R,EAAAA,WAAWhS,MAApBkR,KACYhO,cAAcyP,GAClCyC,EAAwBoD,SAASrY,EAAQ,CAAEq2B,QAAU,OAtGvD1yB,EAyGCkW,YAAA,SAAYzH,EAAOO,GAClBP,EAAM0H,iBACN1H,EAAM2H,2BACNpH,EAAOa,QACP3T,KAAKwN,eA7GP6oB,EAAA,CAAwC3jB,EAAAA,WAiHxC2jB,GAAmBvrB,KAAO,CACzB6H,SAAU,eC1HX,IAAM8jB,GAAQ,GAEDC,GAAb,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAA1sB,MAAAjK,KAAAkK,YAAAlK,KAAAsB,EAAAo1B,EAAAC,GAAA,IAAA7yB,EAAA4yB,EAAAx1B,UAAA,OAAA4C,EAECiO,OAAA,WACC,IAAQb,EAASc,EAAAA,WAAWhS,MAApBkR,KAEF/Q,GADWH,KAAK42B,SAAW3zB,SAASC,cAAT,oBAClBlD,KAAKG,OAAS8C,SAASC,cAAT,SAAgClD,KAAK62B,OAChD72B,KAAK82B,UAAY32B,EAAO+C,cAAP,cACnClD,KAAK+2B,OAAS/2B,KAAK+2B,OAAOC,KAAKh3B,MAC/BA,KAAKi3B,QAAUj3B,KAAKi3B,QAAQD,KAAKh3B,MACjCkR,EAAKmH,iBAAiB,QAASrY,KAAK+2B,QACpCN,GAAMpoB,KAAKrO,OAVb8D,EAaCizB,OAAA,SAAOxkB,GACNA,EAAM0H,iBACNwc,GAAMl0B,SAAQ,SAAAkI,GAAC,OAAIA,EAAEwsB,SAAQ,MACZj3B,KAAK42B,SACb3kB,UAAU+E,IAAI,UACRhX,KAAKG,OACb8R,UAAU+E,IAAI,UACHhX,KAAK82B,UACbze,iBAAiB,aAAcrY,KAAKi3B,UArBhDnzB,EAwBCmzB,QAAA,SAAQC,IACgB,IAAnBA,GACcl3B,KAAK42B,SACb3kB,UAAUpM,OAAO,UAEZ7F,KAAKG,OACb8R,UAAUpM,OAAO,UACN7F,KAAK82B,UACbK,oBAAoB,aAAcn3B,KAAKi3B,UAhCnDnzB,EAmCCszB,UAAA,WACCp3B,KAAKi3B,UACYjlB,EAAAA,WAAWhS,MAApBkR,KACHimB,oBAAoB,YAAan3B,KAAK+2B,SAtC7CL,EAAA,CAAmCW,EAAAA,WA0CnCX,GAAc5rB,KAAO,CACpB6H,SAAU,SACVwH,OAAQ,CAAC,SAFV,IC5Camd,GAAb,WAAA,SAAAA,KAAA,OAAAA,EAEQ1e,KAAP,WACC,OAAOjL,EAAWvE,KAAK,mBAHzBkuB,EAMQze,SAAP,WACC,OAAOlL,EAAWvE,KAAK,uBAPzBkuB,EAAA,GCQaC,GAAb,SAAAzlB,GAAA,SAAAylB,IAAA,OAAAzlB,EAAA7H,MAAAjK,KAAAkK,YAAAlK,KAAAsB,EAAAi2B,EAAAzlB,GAAA,IAAAhO,EAAAyzB,EAAAr2B,UAAA,OAAA4C,EAECiO,OAAA,WAAS,IAAA1P,EAAArC,KACRA,KAAKsU,MAAQ,GACbtU,KAAK2U,cAAgB,GACrB3U,KAAK+T,QAAU,GACf,IAAMlU,EAAOG,KAAKH,KAAO,IAAImZ,EAAAA,UAAU,CACtC6B,QAAS,IAAI3B,EAAAA,YAAY,MACzBlW,OAAQ,IAAIkW,EAAAA,YAAY,QAEnBG,EAAWrZ,KAAKqZ,SAAWxZ,EAAKwZ,SACtCxZ,EAAKyZ,SAAStQ,KACboJ,EAAAA,UAAUpS,KAAKqS,eACdC,WAAU,SAACxC,GAEZzN,EAAKkX,uBAAuB,UAAW1Z,EAAKwB,MAAMwZ,SAClDxY,EAAKkX,uBAAuB,SAAU1Z,EAAKwB,MAAM2B,QACjDX,EAAKmL,iBAENxN,KAAKuR,QAAQvI,KACZyJ,EAAAA,SACCH,WAAU,SAAAlL,GACX/E,EAAKiS,MAAQlN,EAAK,GAClB/E,EAAK0R,QAAU3M,EAAK,GACpBiS,EAASwB,QAAQ9W,QAAUiR,EAAYC,gBAAgB5S,EAAK0R,QAAQ8G,QAAQ9W,SAC5E1B,EAAKmX,SACLnX,EAAKmL,kBA1BR1J,EA8BCyN,MAAA,WACC,OAAOkI,EAAAA,cAAc,CACpB6d,GAAY1e,OACZ0e,GAAYze,cAjCf/U,EAqCC0V,OAAA,WAAS,IAAA/L,EAAAzN,KACFsU,EAAQtU,KAAKsU,MACbP,EAAU/T,KAAK+T,QACrBpT,OAAO2B,KAAKyR,GAASxR,SAAQ,SAAA1B,GAC5BkT,EAAQlT,GAAKmS,KAAOe,EAAQlT,GAAKmS,MAAQJ,KAE1C,IACM8G,EAAgB,IAAI9F,EAAcG,EADlB,IAC0C,SAAClT,EAAKiS,GAGnEA,EAAOA,OAAS,SAACO,EAAMhS,GACtB,OAAQR,GACP,IAAK,UACJ,OAAOwS,EAAKwH,QAAQ1F,KAAO9T,EAC5B,IAAK,SACJ,OAAkE,IAA3DgS,EAAK/H,MAAMkM,cAAclU,QAAQjC,EAAMmW,iBACiB,IAA9DnE,EAAKmkB,SAAShgB,cAAclU,QAAQjC,EAAMmW,oBAMjDxX,KAAK0Z,cAAgBA,EACrB1Z,KAAK+T,QAAU2F,EAAc3F,QAC7B,IAAM8G,EAAU7a,KAAK+T,QAAQ8G,QAAQ3H,OAAO5S,OAASN,KAAK+T,QAAQ8G,QAAQ3H,OAAO,GAAK,KAChFlQ,EAAShD,KAAK+T,QAAQ/Q,OAAOkQ,OAAO5S,OAASN,KAAK+T,QAAQ/Q,OAAOkQ,OAAO,GAAK,KACnFlT,KAAKH,KAAKga,MAAM,CAAEgB,QAAAA,EAAS7X,OAAAA,IAC3B0W,EAAcrF,OAAOC,GAAOtL,KAC3BoJ,EAAAA,UAAUpS,KAAKqS,eACdC,WAAU,SAAAqC,GACXlH,EAAKkH,cAAgBA,EACrBlH,EAAKD,cACL4H,EAAwBpP,aArE3BlC,EA0ECyV,uBAAA,SAAuB1Y,EAAKQ,GAC3B,IAAMyR,EAAS9S,KAAK+T,QAAQlT,GAC5B,GAAIiS,EACH,GAAIA,EAAOE,OAASJ,EACnBE,EAAOpO,IAAIrD,OACL,CACN,IAAMuT,EAAS9B,EAAO/O,QAAQ2J,MAAK,SAAAjD,GAAC,OAAIA,EAAEpJ,QAAUA,KAEhDuT,EACH9B,EAAOpO,IAAIkQ,GAEX9B,EAAOa,UArFZ7P,EA2FCgW,SAAA,SAASC,GAER/Z,KAAKuZ,uBAAuB,UAAWvZ,KAAKH,KAAKwB,MAAMwZ,SACvD7a,KAAKuZ,uBAAuB,SAAUvZ,KAAKH,KAAKwB,MAAM2B,QACtDhD,KAAKwN,eA/FP1J,EAkGCkW,YAAA,SAAYzH,EAAOO,GAClBP,EAAM0H,iBACN1H,EAAM2H,2BACNpH,EAAOa,QACP3T,KAAKwN,eAtGP+pB,EAAA,CAAmC7kB,EAAAA,WA0GnC6kB,GAAczsB,KAAO,CACpB6H,SAAU,UADX,IChHa8kB,GAAb,SAAA3lB,GAAA,SAAA2lB,IAAA,OAAA3lB,EAAA7H,MAAAjK,KAAAkK,YAAAlK,KAAAsB,EAAAm2B,EAAA3lB,GAAA,IAAAhO,EAAA2zB,EAAAv2B,UAAA,OAAA4C,EAECiO,OAAA,WAAS,IAAA1P,EAAArC,KACFH,EAAOG,KAAKH,KAAO,IAAImZ,EAAAA,UAAU,CACtCwC,MAAO,IAAItC,EAAAA,YAAY,KAAM,CAACoC,EAAAA,WAAWC,wBAEzBvb,KAAKqZ,SAAWxZ,EAAKwZ,SACtCxZ,EAAKyZ,SAAStQ,KACboJ,EAAAA,UAAUpS,KAAKqS,eACdC,WAAU,SAACxC,GACZzN,EAAKmL,kBAVR1J,EAcC4zB,aAAA,SAAanlB,GACZ5N,QAAQC,IAAI,8CAA+C5E,KAAKH,KAAKwB,QAfvEo2B,EAAA,CAAoD/kB,EAAAA,WAmBpD+kB,GAA+B3sB,KAAO,CACrC6H,SAAU,4BCnBX,IAAMglB,GAAc,wFAOPC,GAAb,SAAA9lB,GAAA,SAAA8lB,IAAA,OAAA9lB,EAAA7H,MAAAjK,KAAAkK,YAAAlK,KAAAsB,EAAAs2B,EAAA9lB,GAAA,IAAAhO,EAAA8zB,EAAA12B,UAAA,OAAA4C,EAECiO,OAAA,WACC/R,KAAK63B,SAAU,EACf73B,KAAK83B,YAAa,EAClB93B,KAAK+3B,eAAgB,EACrB,IAAQ7mB,EAASc,EAAAA,WAAWhS,MAApBkR,KACF8mB,EAASh4B,KAAKg4B,OAAS9mB,EAAKhO,cAAc,YAChD,IAAK80B,EACJ,KAAO,iBAERh4B,KAAKi4B,QAAUj4B,KAAKi4B,QAAQjB,KAAKh3B,MAEjCiH,EAAYC,MAAM,OAAQ,6CAA8C,CAAEgxB,WAAY,sBAAwB,OAAQ,6BAA6BlvB,KAClJyJ,EAAAA,SACCH,WAAU,SAAAjK,GACX1D,QAAQC,IAAIyD,MAGb,IAAM8vB,EAAMn4B,KAAKm4B,IAAM,IAAIC,SAASJ,EArB1B,cAqBuCh4B,KAAKi4B,SACtDE,EAAI5iB,OACJ5Q,QAAQC,IAAI,oCAAqCuzB,EAAKH,IArBxDl0B,EAwBCu0B,kBAAA,SAAkBL,GACjB,IAAM7E,EAAU6E,EAAOM,eAAiBN,EAAOO,gBAE/C,OADuBpF,EAAQlwB,SAAWkwB,EAAQlwB,SAAWkwB,GA1B/DrvB,EA8BCm0B,QAAA,SAAQ7wB,GACP,IAAMmL,EAAQ3K,KAAKuE,MAAM/E,GACnBoxB,EAAYjmB,EAAMkmB,KACxB,GAAoB,GAAhBlmB,EAAM5I,OAAa,CAEtB,OAAQ6uB,GACP,IAAK,gBACJx4B,KAAK04B,QAAQnmB,GACb,MACD,IAAK,mBACJvS,KAAK24B,kBAAkBpmB,GACvB,MACD,IAAK,qBACJvS,KAAK44B,oBAAoBrmB,GACzB,MACD,IAAK,iBACJvS,KAAK64B,gBAAgBtmB,GACrB,MACD,IAAK,kBACJvS,KAAK84B,kBAAkBvmB,GACvB,MACD,IAAK,gBACJvS,KAAK+4B,gBAAgBxmB,GACrB,MACD,IAAK,oBACJvS,KAAKg5B,oBAAoBzmB,GACzB,MACD,IAAK,wBACJvS,KAAKi5B,wBAAwB1mB,GAG/B,GAAIvS,KAAK+3B,eAAiB/3B,KAAK63B,SAAW73B,KAAK83B,WAAY,CAC1DnzB,QAAQC,IAAI,4CACZ,IAAQsM,EAASc,EAAAA,WAAWhS,MAApBkR,KAERkE,EAAwBpP,SACxBoP,EAAwBoD,SAAStH,EAAM,CAAEslB,QAAS,YAGnD7xB,QAAQC,IAAI,2CAA4C2N,EAAM5I,OAAQ4I,EAAM2mB,UAAWV,IArE1F10B,EAyEC40B,QAAA,SAAQnmB,GACP5N,QAAQC,IAAI,qCAAsC2N,GAClDvS,KAAK63B,SAAU,EACf73B,KAAKm5B,WACLn5B,KAAKo5B,aACLp5B,KAAKq5B,iBA9EPv1B,EA4FC60B,kBAAA,SAAkBpmB,GACjB5N,QAAQC,IAAI,+CAAgD2N,GACxDvS,KAAK+3B,gBACR/3B,KAAK83B,YAAa,IA/FrBh0B,EAmGC80B,oBAAA,SAAoBrmB,GACnB5N,QAAQC,IAAI,iDAAkD2N,GAC9DvS,KAAK+3B,eAAgB,GArGvBj0B,EAwGC+0B,gBAAA,SAAgBtmB,GACf5N,QAAQC,IAAI,6CAA8C2N,EAAO,WAAYA,EAAMnL,KAAK+N,KAzG1FrR,EA4GCg1B,kBAAA,SAAkBvmB,GACjB5N,QAAQC,IAAI,+CAAgD2N,IA7G9DzO,EAgHCi1B,gBAAA,SAAgBxmB,GACf5N,QAAQC,IAAI,6CAA8C2N,IAjH5DzO,EAoHCk1B,oBAAA,SAAoBzmB,GACnB5N,QAAQC,IAAI,iDAAkD2N,IArHhEzO,EAwHCm1B,wBAAA,SAAwB1mB,GACvB5N,QAAQC,IAAI,qDAAsD2N,IAzHpEzO,EA4HCw1B,QAAA,SAAQl4B,GACP,IAAIm4B,EAAS,EACb,GAAIn4B,EAAIo4B,aAAc,CACrB,GACCD,GAAUn4B,EAAIq4B,gBACNr4B,EAAMA,EAAIo4B,cACnB,MAAO,CAACD,KAlIXz1B,EAwICq1B,SAAA,WACC,IAAMhB,EAAMn4B,KAAKm4B,IACXrrB,EAAOqrB,EAAIuB,KACblmB,EAAQ,EACZ1G,EAAKrE,KAAK+K,KAAV,2LACA1G,EAAKrE,KAAK+K,KAAV,2IACA1G,EAAKrE,KAAK+K,KAAV,wHACA2kB,EAAIwB,UAAU7sB,IA/IhBhJ,EAkJCs1B,WAAA,WACC,IAAMjB,EAAMn4B,KAAKm4B,IACXyB,EAAUzB,EAAI0B,QAEhBrmB,EAAQ,EACZomB,EAAQE,QAAQtmB,GAAS,IAAI2kB,EAAI4B,WACjCH,EAAQE,QAAQtmB,GAAOmd,YAAa,EACpCiJ,EAAQE,QAAQtmB,GAAO2B,GAAK,QAC5BykB,EAAQE,QAAQtmB,GAAOJ,MAAQ,IAAI+kB,EAAI6B,MACvCJ,EAAQE,QAAQtmB,GAAOJ,MAAM6mB,GAAK,cAClCzmB,IAEAomB,EAAQE,QAAQtmB,GAAS,IAAI2kB,EAAI4B,WACjCH,EAAQE,QAAQtmB,GAAOmd,YAAa,EACpCiJ,EAAQE,QAAQtmB,GAAO2B,GAAK,qBAC5BykB,EAAQE,QAAQtmB,GAAOJ,MAAQ,IAAI+kB,EAAI6B,MACvCJ,EAAQE,QAAQtmB,GAAOJ,MAAM6mB,GAAK,qBAClCzmB,IAEA2kB,EAAI+B,gBAAgBN,IArKtB91B,EAwKCu1B,cAAA,WACC,IAAMlB,EAAMn4B,KAAKm4B,IACXgC,EAAahC,EAAIiC,UAEnB5mB,EAAQ,EAEZ2mB,EAAWL,QAAQtmB,GAAS,IAAI2kB,EAAI4B,WACpCI,EAAWL,QAAQtmB,GAAOmd,YAAa,EACvCwJ,EAAWL,QAAQtmB,GAAO2B,GAAK,iBAC/BglB,EAAWL,QAAQtmB,GAAOJ,MAAQ,IAAI+kB,EAAI6B,MAC1CG,EAAWL,QAAQtmB,GAAOJ,MAAM6mB,GAAhC,iDACAE,EAAWL,QAAQtmB,GAAOuM,MAAQ4X,GAClCnkB,IAEA2mB,EAAWL,QAAQtmB,GAAS,IAAI2kB,EAAI4B,WACpCI,EAAWL,QAAQtmB,GAAOmd,YAAa,EACvCwJ,EAAWL,QAAQtmB,GAAO2B,GAAK,qBAC/BglB,EAAWL,QAAQtmB,GAAOJ,MAAQ,IAAI+kB,EAAI6B,MAC1CG,EAAWL,QAAQtmB,GAAOJ,MAAM6mB,GAAhC,qDACAE,EAAWL,QAAQtmB,GAAOuM,MAAQ4X,GAClCnkB,IAEA2mB,EAAWL,QAAQtmB,GAAS,IAAI2kB,EAAI4B,WACpCI,EAAWL,QAAQtmB,GAAOmd,YAAa,EACvCwJ,EAAWL,QAAQtmB,GAAO2B,GAAK,qBAC/BglB,EAAWL,QAAQtmB,GAAOJ,MAAQ,IAAI+kB,EAAI6B,MAC1CG,EAAWL,QAAQtmB,GAAOJ,MAAM6mB,GAAhC,iBACAE,EAAWL,QAAQtmB,GAAOuM,MAAQ4X,GAClCnkB,IAEA2kB,EAAIkC,eAAeF,IAtMrBr2B,EAyMCw2B,YAAA,WACC,IAAMnC,EAAMn4B,KAAKm4B,IACbA,GACHA,EAAIoC,qBA5MPz2B,EAgNC02B,YAAA,WACC,IAAMrC,EAAMn4B,KAAKm4B,IACbA,GACHA,EAAIsC,yBAnNP7C,EAAA,CAAgDllB,EAAAA,WAwNhDklB,GAA2B9sB,KAAO,CACjC6H,SAAU,wBADX,IClOa+nB,GAAb,WAAA,SAAAA,KAAA,OAAAA,EAEQC,UAAP,WACC,OAAOhtB,EAAWvE,KAAK,mCAHzBsxB,EAAA,GCIaE,GAAb,SAAA9oB,GAAA,SAAA8oB,IAAA,OAAA9oB,EAAA7H,MAAAjK,KAAAkK,YAAAlK,KAAAsB,EAAAs5B,EAAA9oB,GAAA,IAAAhO,EAAA82B,EAAA15B,UAAA,OAAA4C,EAECiO,OAAA,WAAS,IAAA1P,EAAArC,KACRA,KAAKsU,MAAQ,GACbtU,KAAK66B,aAAe,GACpBH,GAAsBC,YAAY3xB,KACjCyJ,EAAAA,SACCH,WAAU,SAAAgC,GACXjS,EAAKiS,MAAQA,EACbjS,EAAKw4B,aAAex4B,EAAKiS,MAAMY,MAAM,EAAGiI,KAAKC,IAAI,EAAG/a,EAAKiS,MAAMhU,SAC/D+B,EAAKmL,kBAVR1J,EAcC0U,SAAA,SAASrD,GACR,IACMhV,EADW6R,EAAAA,WAAWhS,MAApBkR,KACYhO,cAAciS,GAC9BhV,GACHiV,EAAwBoD,SAASrY,EAAQ,CAAEq2B,QAAS,OAlBvD1yB,EAsBCg3B,aAAA,SAAavoB,GACZvS,KAAK66B,aAAe76B,KAAKsU,MAAMY,QAC/BlV,KAAKwN,cACL4H,EAAwBpP,UAzB1BlC,EA4BC2C,iBAAA,SAAiB8L,GAChBzP,OAAOC,SAAS0B,KAAOuC,EAAY9B,KAAKuB,kBA7B1Cm0B,EAAA,CAA6CloB,EAAAA,WAiC7CkoB,GAAwB9vB,KAAO,CAC9B6H,SAAU,qBADX,ICrCaooB,GAAb,WAAA,SAAAA,KAAA,OAAAA,EAEQniB,KAAP,WACC,OAAOjL,EAAWvE,KAAK,uBAHzB2xB,EAMQliB,SAAP,WACC,OAAOlL,EAAWvE,KAAK,2BAPzB2xB,EAAA,GCQaC,GAAb,SAAAlpB,GAAA,SAAAkpB,IAAA,OAAAlpB,EAAA7H,MAAAjK,KAAAkK,YAAAlK,KAAAsB,EAAA05B,EAAAlpB,GAAA,IAAAhO,EAAAk3B,EAAA95B,UAAA,OAAA4C,EAECiO,OAAA,WAAS,IAAA1P,EAAArC,KACRA,KAAKi7B,WAAaj7B,KAAKi7B,YAAc,KACrCj7B,KAAKsU,MAAQ,GACbtU,KAAK2U,cAAgB,GACrB3U,KAAK+T,QAAU,GACf,IAAMlU,EAAOG,KAAKH,KAAO,IAAImZ,EAAAA,UAAU,CACtC0D,SAAU,IAAIxD,EAAAA,YAAY,MAC1BC,SAAU,IAAID,EAAAA,YAAY,MAC1BE,SAAU,IAAIF,EAAAA,YAAY,MAC1BlW,OAAQ,IAAIkW,EAAAA,YAAY,QAEnBG,EAAWrZ,KAAKqZ,SAAWxZ,EAAKwZ,SACtCxZ,EAAKyZ,SAAStQ,KACboJ,EAAAA,UAAUpS,KAAKqS,eACdC,WAAU,SAACxC,GAEZzN,EAAKkX,uBAAuB,WAAY1Z,EAAKwB,MAAMqb,UACnDra,EAAKkX,uBAAuB,WAAY1Z,EAAKwB,MAAM8X,UACnD9W,EAAKkX,uBAAuB,WAAY1Z,EAAKwB,MAAM+X,UACnD/W,EAAKkX,uBAAuB,SAAU1Z,EAAKwB,MAAM2B,QACjDX,EAAKmL,iBAENxN,KAAKuR,QAAQvI,KACZyJ,EAAAA,SACCH,WAAU,SAAAlL,GACX/E,EAAKiS,MAAQlN,EAAK,GAClB/E,EAAK0R,QAAU3M,EAAK,GACpBiS,EAASqD,SAAS3Y,QAAUiR,EAAYC,gBAAgB5S,EAAK0R,QAAQ2I,SAAS3Y,SAC9EsV,EAASF,SAASpV,QAAUiR,EAAYC,gBAAgB5S,EAAK0R,QAAQoF,SAASpV,SAC9EsV,EAASD,SAASrV,QAAUiR,EAAYC,gBAAgB5S,EAAK0R,QAAQqF,SAASrV,SAC9E1B,EAAKmX,SACLnX,EAAKmL,kBAjCR1J,EAqCCyN,MAAA,WACC,OAAOkI,EAAAA,cAAc,CACpBshB,GAAgBniB,OAChBmiB,GAAgBliB,cAxCnB/U,EA4CC0V,OAAA,WAAS,IAAA/L,EAAAzN,KACFsU,EAAQtU,KAAKsU,MACbP,EAAU/T,KAAK+T,QACrBpT,OAAO2B,KAAKyR,GAASxR,SAAQ,SAAA1B,GAC5BkT,EAAQlT,GAAKmS,KAAOe,EAAQlT,GAAKmS,MAAQJ,KAE1C,IACM8G,EAAgB,IAAI9F,EAAcG,EADlB,IAC0C,SAAClT,EAAKiS,GAGnEA,EAAOA,OAAS,SAACO,EAAMhS,GACtB,OAAQR,GACP,IAAK,WACJ,OAAOwS,EAAKqJ,SAASvH,KAAO9T,EAC7B,IAAK,WACJ,OAA0C,IAAnCgS,EAAKsG,UAAUrW,QAAQjC,GAC/B,IAAK,WACJ,OAA0C,IAAnCgS,EAAKuG,UAAUtW,QAAQjC,GAC/B,IAAK,SACJ,OAAkE,IAA3DgS,EAAK/H,MAAMkM,cAAclU,QAAQjC,EAAMmW,oBAMpDxX,KAAK0Z,cAAgBA,EACrB1Z,KAAK+T,QAAU2F,EAAc3F,QAC7B,IAAM2I,EAAW1c,KAAKi7B,WAAaj7B,KAAKi7B,WAAcj7B,KAAK+T,QAAQ2I,SAASxJ,OAAO5S,OAASN,KAAK+T,QAAQ2I,SAASxJ,OAAO,GAAK,KACxHiG,EAAWnZ,KAAK+T,QAAQoF,SAASjG,OAAO5S,OAASN,KAAK+T,QAAQoF,SAASjG,OAAO,GAAK,KACnFkG,EAAWpZ,KAAK+T,QAAQqF,SAASlG,OAAO5S,OAASN,KAAK+T,QAAQqF,SAASlG,OAAO,GAAK,KACnFlQ,EAAShD,KAAK+T,QAAQ/Q,OAAOkQ,OAAO5S,OAASN,KAAK+T,QAAQ/Q,OAAOkQ,OAAO,GAAK,KACnFlT,KAAKH,KAAKga,MAAM,CAAE6C,SAAAA,EAAUvD,SAAAA,EAAUC,SAAAA,EAAUpW,OAAAA,IAChD0W,EAAcrF,OAAOC,GAAOtL,KAC3BoJ,EAAAA,UAAUpS,KAAKqS,eACdC,WAAU,SAAAqC,GACXlH,EAAKkH,cAAgBA,EACrBlH,EAAKD,cACL4H,EAAwBpP,aAjF3BlC,EAsFCyV,uBAAA,SAAuB1Y,EAAKQ,GAC3B,IAAMyR,EAAS9S,KAAK+T,QAAQlT,GAC5B,GAAIiS,EACH,GAAIA,EAAOE,OAASJ,EACnBE,EAAOpO,IAAIrD,OACL,CACN,IAAMuT,EAAS9B,EAAO/O,QAAQ2J,MAAK,SAAAjD,GAAC,OAAIA,EAAEpJ,QAAUA,KAEhDuT,EACH9B,EAAOpO,IAAIkQ,GAEX9B,EAAOa,UAjGZ7P,EAuGCgW,SAAA,SAASC,GAER/Z,KAAKuZ,uBAAuB,WAAYvZ,KAAKH,KAAKwB,MAAMqb,UACxD1c,KAAKuZ,uBAAuB,WAAYvZ,KAAKH,KAAKwB,MAAM8X,UACxDnZ,KAAKuZ,uBAAuB,WAAYvZ,KAAKH,KAAKwB,MAAM+X,UACxDpZ,KAAKuZ,uBAAuB,SAAUvZ,KAAKH,KAAKwB,MAAM2B,QACtDhD,KAAKwN,eA7GP1J,EAgHCkW,YAAA,SAAYzH,EAAOO,GAClBP,EAAM0H,iBACN1H,EAAM2H,2BACNpH,EAAOa,QACP3T,KAAKwN,eApHPwtB,EAAA,CAAuCtoB,EAAAA,WAwHvCsoB,GAAkBlwB,KAAO,CACxB6H,SAAU,aACVwH,OAAQ,CAAC,eAFV,IChIa+gB,GAAb,WAAA,SAAAA,KAAA,OAAAA,EAEQtiB,KAAP,WACC,OAAOjL,EAAWvE,KAAK,uBAHzB8xB,EAMQriB,SAAP,WACC,OAAOlL,EAAWvE,KAAK,2BAPzB8xB,EAAA,GCQaC,GAAb,SAAArpB,GAAA,SAAAqpB,IAAA,OAAArpB,EAAA7H,MAAAjK,KAAAkK,YAAAlK,KAAAsB,EAAA65B,EAAArpB,GAAA,IAAAhO,EAAAq3B,EAAAj6B,UAAA,OAAA4C,EAECiO,OAAA,WAAS,IAAA1P,EAAArC,KACRA,KAAKsU,MAAQ,GACbtU,KAAK2U,cAAgB,GACrB3U,KAAK+T,QAAU,GACf,IAAMlU,EAAOG,KAAKH,KAAO,IAAImZ,EAAAA,UAAU,CACtC0D,SAAU,IAAIxD,EAAAA,YAAY,MAC1BlW,OAAQ,IAAIkW,EAAAA,YAAY,QAEnBG,EAAWrZ,KAAKqZ,SAAWxZ,EAAKwZ,SACtCxZ,EAAKyZ,SAAStQ,KACboJ,EAAAA,UAAUpS,KAAKqS,eACdC,WAAU,SAACxC,GAEZzN,EAAKkX,uBAAuB,WAAY1Z,EAAKwB,MAAMqb,UACnDra,EAAKkX,uBAAuB,SAAU1Z,EAAKwB,MAAM2B,QACjDX,EAAKmL,iBAENxN,KAAKuR,QAAQvI,KACZyJ,EAAAA,SACCH,WAAU,SAAAlL,GACX/E,EAAKiS,MAAQlN,EAAK,GAClB/E,EAAK0R,QAAU3M,EAAK,GACpBiS,EAASqD,SAAS3Y,QAAUiR,EAAYC,gBAAgB5S,EAAK0R,QAAQ2I,SAAS3Y,SAC9E1B,EAAKmX,SACLnX,EAAKmL,kBA1BR1J,EA8BCyN,MAAA,WACC,OAAOkI,EAAAA,cAAc,CACpByhB,GAAgBtiB,OAChBsiB,GAAgBriB,cAjCnB/U,EAqCC0V,OAAA,WAAS,IAAA/L,EAAAzN,KACFsU,EAAQtU,KAAKsU,MACbP,EAAU/T,KAAK+T,QACrBpT,OAAO2B,KAAKyR,GAASxR,SAAQ,SAAA1B,GAC5BkT,EAAQlT,GAAKmS,KAAOe,EAAQlT,GAAKmS,MAAQJ,KAE1C,IACM8G,EAAgB,IAAI9F,EAAcG,EADlB,IAC0C,SAAClT,EAAKiS,GAGnEA,EAAOA,OAAS,SAACO,EAAMhS,GACtB,OAAQR,GACP,IAAK,WACJ,OAAOwS,EAAKqJ,SAASvH,KAAO9T,EAC7B,IAAK,SACJ,OAAkE,IAA3DgS,EAAK/H,MAAMkM,cAAclU,QAAQjC,EAAMmW,iBACgB,IAA7DnE,EAAKwH,QAAQrD,cAAclU,QAAQjC,EAAMmW,oBAMhDxX,KAAK0Z,cAAgBA,EACrB1Z,KAAK+T,QAAU2F,EAAc3F,QAC7B,IAAM2I,EAAW1c,KAAK+T,QAAQ2I,SAASxJ,OAAO5S,OAASN,KAAK+T,QAAQ2I,SAASxJ,OAAO,GAAK,KACnFlQ,EAAShD,KAAK+T,QAAQ/Q,OAAOkQ,OAAO5S,OAASN,KAAK+T,QAAQ/Q,OAAOkQ,OAAO,GAAK,KACnFlT,KAAKH,KAAKga,MAAM,CAAE6C,SAAAA,EAAU1Z,OAAAA,IAC5B0W,EAAcrF,OAAOC,GAAOtL,KAC3BoJ,EAAAA,UAAUpS,KAAKqS,eACdC,WAAU,SAAAqC,GACXlH,EAAKkH,cAAgBA,EACrBlH,EAAKD,cACL4H,EAAwBpP,aArE3BlC,EA0ECyV,uBAAA,SAAuB1Y,EAAKQ,GAC3B,IAAMyR,EAAS9S,KAAK+T,QAAQlT,GAC5B,GAAIiS,EACH,GAAIA,EAAOE,OAASJ,EACnBE,EAAOpO,IAAIrD,OACL,CACN,IAAMuT,EAAS9B,EAAO/O,QAAQ2J,MAAK,SAAAjD,GAAC,OAAIA,EAAEpJ,QAAUA,KAEhDuT,EACH9B,EAAOpO,IAAIkQ,GAEX9B,EAAOa,UArFZ7P,EA2FCgW,SAAA,SAASC,GAER/Z,KAAKuZ,uBAAuB,WAAYvZ,KAAKH,KAAKwB,MAAMqb,UACxD1c,KAAKuZ,uBAAuB,SAAUvZ,KAAKH,KAAKwB,MAAM2B,QACtDhD,KAAKwN,eA/FP1J,EAkGCkW,YAAA,SAAYzH,EAAOO,GAClBP,EAAM0H,iBACN1H,EAAM2H,2BACNpH,EAAOa,QACP3T,KAAKwN,eAtGP2tB,EAAA,CAAuCzoB,EAAAA,WA0GvCyoB,GAAkBrwB,KAAO,CACxB6H,SAAU,cADX,ICjHayoB,GAAb,WAAA,SAAAA,KAAA,OAAAA,EAEQxiB,KAAP,WACC,OAAOjL,EAAWvE,KAAK,2BAA2BJ,KACjDwB,EAAAA,KAAI,SAAA8J,GAIH,OAHAA,EAAM/R,SAAQ,SAAAkI,GACbA,EAAEa,MAAQ8vB,EAAoBC,YAAY5wB,EAAEa,MAAMhH,QAAQ,KAAM,SAE1DgQ,OARX8mB,EAaQC,YAAP,SAAmBC,EAAUC,QAAe,IAAfA,IAAAA,EAAO,QACnC,IAEIC,EAAc,IAAIC,OAAJ,MAAuBF,EADfj3B,QAAQ,MAAM,SAAA4P,GAAC,MAAA,KAASA,KAChC,MAAkC,KACpD,OAAOonB,EAASh3B,QAAQk3B,GAHL,SAAAE,GAAG,OAAIA,EAAIp7B,OAASo7B,EAAI,GAAG3sB,cAAgB2sB,EAAIxmB,MAAM,GAAGsC,cAAgB,OAd7F4jB,EAAA,GCGaO,GAAb,SAAA7pB,GAAA,SAAA6pB,IAAA,OAAA7pB,EAAA7H,MAAAjK,KAAAkK,YAAAlK,KAAAsB,EAAAq6B,EAAA7pB,GAAA,IAAAhO,EAAA63B,EAAAz6B,UAAA,OAAA4C,EAECiO,OAAA,WAAS,IAAA1P,EAAArC,KACRA,KAAKmP,UAAOrH,EACZ9H,KAAKsU,MAAQ,GACbtU,KAAK47B,KAAO,GACZ57B,KAAK67B,MAAQ,GACb77B,KAAK87B,aAAe,GACpB97B,KAAKqT,KAAO,KACZrT,KAAKuR,QAAQvI,KACZyJ,EAAAA,SACCH,YACFrD,EAAYQ,MAAMzG,KACjBoJ,EAAAA,UAAUpS,KAAKqS,eACdC,WAAU,SAAAnD,GACXxK,QAAQC,IAAI,6BAA8BuK,GAC1C9M,EAAK8M,KAAOA,EACZ9M,EAAKmL,cACL4H,EAAwBpP,aAlB3BlC,EAsBCyN,MAAA,WAAQ,IAAA9D,EAAAzN,KACP,OAAOo7B,GAAoBxiB,OAAO5P,KACjC6D,EAAAA,KAAI,SAAAyH,GACH7G,EAAK6G,MAAQA,EACb7G,EAAKmuB,KAAOnuB,EAAKsuB,QAAQznB,GACzB7G,EAAKD,mBA3BT1J,EAgCCi4B,QAAA,SAAQznB,EAAO0nB,GAAU,IAAA/rB,EAAAjQ,KAMxB,OALWsU,EAAMxB,QAAO,SAAArI,GAAC,OAAIA,EAAEuxB,WAAaA,GAAuB,WAAXvxB,EAAEqQ,QAAmBtQ,KAAI,SAAAC,GAChF,IAAM4I,EAAO1S,OAAOqD,OAAO,GAAIyG,GAE/B,OADA4I,EAAKiB,MAAQrE,EAAK8rB,QAAQznB,EAAO7J,EAAE0K,IAC5B9B,MApCVvP,EAyCCm4B,OAAA,SAAO5oB,GACFA,EAAK6oB,SACRl8B,KAAKqT,KAAOA,EACZrT,KAAK67B,MAAQ77B,KAAKsU,MAAMxB,QAAO,SAAArI,GAAC,MAAe,SAAXA,EAAEqQ,MAAmBrQ,EAAEuxB,WAAa3oB,EAAK8B,MAC7EnV,KAAK87B,aAAe97B,KAAK67B,MAAM3mB,MAAM,EAAGiI,KAAKC,IAAI,EAAGpd,KAAK67B,MAAMv7B,SAC/DN,KAAKwN,cACL4H,EAAwBpP,WA/C3BlC,EAmDCq4B,SAAA,SAAS5pB,GACRvS,KAAK87B,aAAe97B,KAAK67B,MAAM3mB,QAC/BlV,KAAKwN,cACL4H,EAAwBpP,UAtD1BlC,EAyDCs4B,sBAAA,SAAsB7pB,GACrB5N,QAAQC,IAAI,8CAA+C2N,IA1D7DzO,EA6DC0U,SAAA,SAAS7F,EAAUJ,GACdA,GACHA,EAAM0H,iBAEP,IACM9Z,EADW6R,EAAAA,WAAWhS,MAApBkR,KACYhO,cAAcyP,GAClCyC,EAAwBoD,SAASrY,EAAQ,CAAEq2B,QAAU,OAnEvDmF,EAAA,CAA2CjpB,EAAAA,WAuE3CipB,GAAsB7wB,KAAO,CAC5B6H,SAAU,mBADX,IC1Ea0pB,GAAb,WAAA,SAAAA,KAAA,OAAAA,EAEQzjB,KAAP,WACC,OAAOjL,EAAWvE,KAAK,2BAA2BJ,KACjDwB,EAAAA,KAAI,SAAA8J,GAAK,OAAIA,EAAMghB,MAAK,SAAChG,EAAGvR,GAC3B,OAAOuR,EAAEgN,KAAOve,EAAEue,aALtBD,EAUQxjB,SAAP,WACC,OAAOlL,EAAWvE,KAAK,gCAXzBizB,EAAA,GCOaE,GAAb,SAAAzqB,GAAA,SAAAyqB,IAAA,OAAAzqB,EAAA7H,MAAAjK,KAAAkK,YAAAlK,KAAAsB,EAAAi7B,EAAAzqB,GAAA,IAAAhO,EAAAy4B,EAAAr7B,UAAA,OAAA4C,EAECiO,OAAA,WAAS,IAAA1P,EAAArC,KACRA,KAAKsU,MAAQ,GACbtU,KAAK2U,cAAgB,GACrB3U,KAAK66B,aAAe,GACpB76B,KAAK+T,QAAU,GACf,IAAMlU,EAAOG,KAAKH,KAAO,IAAImZ,EAAAA,UAAU,CACtC6B,QAAS,IAAI3B,EAAAA,YAAY,MACzBwD,SAAU,IAAIxD,EAAAA,YAAY,MAC1BlW,OAAQ,IAAIkW,EAAAA,YAAY,QAEnBG,EAAWrZ,KAAKqZ,SAAWxZ,EAAKwZ,SACtCxZ,EAAKyZ,SAAStQ,KACboJ,EAAAA,UAAUpS,KAAKqS,eACdC,WAAU,SAACxC,GAEZzN,EAAKkX,uBAAuB,UAAW1Z,EAAKwB,MAAMwZ,SAClDxY,EAAKkX,uBAAuB,WAAY1Z,EAAKwB,MAAMqb,UACnDra,EAAKkX,uBAAuB,SAAU1Z,EAAKwB,MAAM2B,QACjDX,EAAKmL,iBAENxN,KAAKuR,QAAQvI,KACZyJ,EAAAA,SACCH,WAAU,SAAAlL,GACX/E,EAAKiS,MAAQlN,EAAK,GAClB/E,EAAK0R,QAAU3M,EAAK,GACpBiS,EAASwB,QAAQ9W,QAAUiR,EAAYC,gBAAgB5S,EAAK0R,QAAQ8G,QAAQ9W,SAC5EsV,EAASqD,SAAS3Y,QAAUiR,EAAYC,gBAAgB5S,EAAK0R,QAAQ2I,SAAS3Y,SAC9E1B,EAAKmX,SACLnX,EAAKmL,kBA9BR1J,EAkCCyN,MAAA,WACC,OAAOkI,EAAAA,cAAc,CACpB4iB,GAAoBzjB,OACpByjB,GAAoBxjB,cArCvB/U,EAyCC0V,OAAA,WAAS,IAAA/L,EAAAzN,KACFsU,EAAQtU,KAAKsU,MACbP,EAAU/T,KAAK+T,QACrBpT,OAAO2B,KAAKyR,GAASxR,SAAQ,SAAA1B,GAC5BkT,EAAQlT,GAAKmS,KAAOe,EAAQlT,GAAKmS,MAAQJ,KAE1C,IACM8G,EAAgB,IAAI9F,EAAcG,EADlB,IAC0C,SAAClT,EAAKiS,GAGnEA,EAAOA,OAAS,SAACO,EAAMhS,GACtB,OAAQR,GACP,IAAK,UACJ,OAAOwS,EAAKwH,SAAWxH,EAAKwH,QAAQ1F,KAAO9T,EAC5C,IAAK,WACJ,OAAOgS,EAAKqJ,UAAYrJ,EAAKqJ,SAASvH,KAAO9T,EAC9C,IAAK,SACJ,OAAiE,IAA1DgS,EAAKtI,KAAKyM,cAAclU,QAAQjC,EAAMmW,iBAEc,IAA1DnE,EAAKsI,KAAKnE,cAAclU,QAAQjC,EAAMmW,iBAC4B,IAAlEnE,EAAKwH,QAAQ9P,KAAKyM,cAAclU,QAAQjC,EAAMmW,oBAMrDxX,KAAK0Z,cAAgBA,EACrB1Z,KAAK+T,QAAU2F,EAAc3F,QAC7B,IAAM8G,EAAU7a,KAAK+T,QAAQ8G,QAAQ3H,OAAO5S,OAASN,KAAK+T,QAAQ8G,QAAQ3H,OAAO,GAAK,KAChFwJ,EAAW1c,KAAK+T,QAAQ2I,SAASxJ,OAAO5S,OAASN,KAAK+T,QAAQ2I,SAASxJ,OAAO,GAAK,KACnFlQ,EAAShD,KAAK+T,QAAQ/Q,OAAOkQ,OAAO5S,OAASN,KAAK+T,QAAQ/Q,OAAOkQ,OAAO,GAAK,KACnFlT,KAAKH,KAAKga,MAAM,CAAEgB,QAAAA,EAAS6B,SAAAA,EAAU1Z,OAAAA,IACrC0W,EAAcrF,OAAOC,GAAOtL,KAC3BoJ,EAAAA,UAAUpS,KAAKqS,eACdC,WAAU,SAAAqC,GACXlH,EAAKkH,cAAgBA,EACrBlH,EAAKotB,aAAelmB,EAAcO,MAAM,EAAGiI,KAAKC,IAAI,GAAIzI,EAAcrU,SACtEmN,EAAKD,cACL4H,EAAwBpP,aA/E3BlC,EAoFCq4B,SAAA,SAAS5pB,GACRvS,KAAK66B,aAAe76B,KAAK2U,cAAcO,QACvClV,KAAKwN,cACL4H,EAAwBpP,UAvF1BlC,EA0FCyV,uBAAA,SAAuB1Y,EAAKQ,GAC3B,IAAMyR,EAAS9S,KAAK+T,QAAQlT,GAC5B,GAAIiS,EACH,GAAIA,EAAOE,OAASJ,EACnBE,EAAOpO,IAAIrD,OACL,CACN,IAAMuT,EAAS9B,EAAO/O,QAAQ2J,MAAK,SAAAjD,GAAC,OAAIA,EAAEpJ,QAAUA,KAEhDuT,EACH9B,EAAOpO,IAAIkQ,GAEX9B,EAAOa,UArGZ7P,EA2GCgW,SAAA,SAASC,GAER/Z,KAAKuZ,uBAAuB,UAAWvZ,KAAKH,KAAKwB,MAAMwZ,SACvD7a,KAAKuZ,uBAAuB,WAAYvZ,KAAKH,KAAKwB,MAAMqb,UACxD1c,KAAKuZ,uBAAuB,SAAUvZ,KAAKH,KAAKwB,MAAM2B,QACtDhD,KAAKwN,eAhHP1J,EAmHCkW,YAAA,SAAYzH,EAAOO,GAClBP,EAAM0H,iBACN1H,EAAM2H,2BACNpH,EAAOa,QACP3T,KAAKwN,eAvHP+uB,EAAA,CAA2C7pB,EAAAA,WA2H3C6pB,GAAsBzxB,KAAO,CAC5B6H,SAAU,mBADX,ICnIa6pB,GAAb,SAAA7F,GAAA,SAAA6F,IAAA,OAAA7F,EAAA1sB,MAAAjK,KAAAkK,YAAAlK,KAAA,OAAAsB,EAAAk7B,EAAA7F,GAAA6F,EAAAt7B,UAEC6Q,OAAA,WACC,IAAQb,EAASc,EAAAA,WAAWhS,MAApBkR,KACFoD,EAAQ9R,MAAMtB,UAAUgU,MAAMhI,KAAKgE,EAAKurB,iBAAiB,mBACzDt8B,EAAS+Q,EAAKhO,cAAc,iBAClCqa,KAAK7Y,IAAIvE,EAAQ,CAAE+c,QAAS,IAC5B5I,EAAM/R,SAAQ,SAAA8Q,GACbA,EAAKgF,iBAAiB,aAAa,SAAC9F,GACnC,IAAMmqB,EAAUrpB,EAAKlQ,aAAa,gBAClCoa,KAAK7Y,IAAIvE,EAAQ,CAAE+c,QAAS,IAC5B/c,EAAOw8B,OAAS,WACfpf,KAAK/R,GAAGrL,EAAQ,CACfy8B,SAAU,GACV9kB,MAAO,GACPoF,QAAS,EACT2f,KAAMC,OAAOC,QACbC,UAAW,SAGb78B,EAAO8Q,IAAMyrB,SApBjBF,EAAA,CAAsCnF,EAAAA,WA2BtCmF,GAAiB1xB,KAAO,CACvB6H,SAAU,aADX,IC1BasqB,GAAb,SAAAnrB,GAAA,SAAAmrB,IAAA,OAAAnrB,EAAA7H,MAAAjK,KAAAkK,YAAAlK,KAAAsB,EAAA27B,EAAAnrB,GAAA,IAAAhO,EAAAm5B,EAAA/7B,UAAA,OAAA4C,EAECiO,OAAA,WACC/R,KAAK+D,QAAU,CACdm5B,cAAe,OACfC,aAAc,EACdC,gBAAgB,EAChBllB,MAAO,IACPmlB,SAAU,CACTvlB,MAAO,KAERwlB,iBAAiB,EACjBC,mBAAmB,EACnBC,WAAY,CACX5mB,GAAI,qBACJ6mB,WAAW,GAEZC,SAAU,CACTC,SAAS,EACTC,gBAAgB,IAGlB59B,KAAK69B,SAtBP/5B,EA6BCuuB,UAAA,WACCryB,KAAK89B,uBA9BPh6B,EAiCCszB,UAAA,WACCp3B,KAAK+9B,mBACL/9B,KAAKg+B,kBAnCPl6B,EAsCCm6B,cAAA,WACCj+B,KAAKg+B,kBAvCPl6B,EA0CCo6B,aAAA,SAAa1qB,GAERxT,KAAKm+B,QACRn+B,KAAKm+B,OAAOC,QAAQ5qB,IA7CvB1P,EAiDCu6B,QAAA,WACC,IAAMF,EAASn+B,KAAKm+B,OACpB,GAAIA,GAAUA,EAAOG,YAAc,GAAKH,EAAOI,OAAOj+B,OAAS69B,EAAOG,YAErE,OAAO,GArDVx6B,EAyDC06B,QAAA,WACC,IAAML,EAASn+B,KAAKm+B,OACpB,GAAIA,EAAQ,CACX,IAAMjB,EAAgBiB,EAAOh6B,OAAO+4B,eAAiB,EAErD,GAAIiB,EAAOG,YAAcH,EAAOI,OAAOj+B,OAAS48B,EAC/C,OAAO,IA/DXp5B,EAoEC26B,UAAA,WACC,IAAMN,EAASn+B,KAAKm+B,OAChBn+B,KAAKq+B,WAERF,EAAOC,QAAQD,EAAOG,YAAc,IAxEvCx6B,EA4EC46B,UAAA,WACC,IAAMP,EAASn+B,KAAKm+B,OAChBn+B,KAAKw+B,WAERL,EAAOC,QAAQD,EAAOG,YAAc,IAhFvCx6B,EAoFC+5B,MAAA,SAAM19B,GAAQ,IAAAkC,EAAArC,KAEb,GADAA,KAAKsR,QAAU,IAAIM,EAAAA,QACf5R,KAAK29B,QAAS,CACjB,IAAQzsB,EAASc,EAAAA,WAAWhS,MAApBkR,KACR/Q,EAASA,GAAU+Q,EACnBlR,KAAKG,OAASA,EACdod,KAAK7Y,IAAIvE,EAAQ,CAAE+c,QAAS,IAC5Bld,KAAKwT,MAAQ,EACb,IAAMuE,EAAK/X,KAAK+D,QAAQgU,IAAM,GAC9BA,EAAG4mB,YAAc,WAChB,IAAMR,EAAS97B,EAAK87B,OAChBA,IACH97B,EAAKmR,MAAQ2qB,EAAOG,YACpBj8B,EAAKiP,QAAQjC,KAAKhN,EAAKmR,OACvBnR,EAAKmL,gBAGPxN,KAAK+D,QAAQgU,GAAKA,EAClB/X,KAAK4+B,kBAtGR96B,EA0GC86B,cAAA,WACC5+B,KAAKi+B,cAAgBj+B,KAAKi+B,cAAcjH,KAAKh3B,MAC7C8C,OAAOuV,iBAAiB,cAAerY,KAAKi+B,gBA5G9Cn6B,EAoHCi6B,iBAAA,WACCj7B,OAAOq0B,oBAAoB,cAAen3B,KAAKi+B,gBArHjDn6B,EAwHCg6B,oBAAA,WACC,GAAI99B,KAAK29B,QAAS,CACjB,IAAMx9B,EAASH,KAAKG,OACpB,GAAIH,KAAKm+B,OACRn+B,KAAKm+B,OAAOn4B,aACN,CACN,IAAIm4B,EACEpmB,EAAK/X,KAAK+D,QAAQgU,KAAO/X,KAAK+D,QAAQgU,GAAK,IAC3CjE,EAAWiE,EAAGxC,KACfwC,EAAGxC,MAASwC,EAAGxC,KAAKspB,sBACxB9mB,EAAGxC,KAAO,WAAW,IAAA9H,EAAAzN,KACpBud,KAAK/R,GAAGrL,EAAQ,CACfy8B,SAAU,GACV1f,QAAS,EACT2f,KAAMiC,OAAO/B,UAEdpb,YAAW,WACc,mBAAb7N,GACVA,EAAS7J,MAAMwD,EAAM,CAAC0wB,EAAQrE,QAASiF,UAEtC,IAEJhnB,EAAGxC,KAAKspB,qBAAsB,GAE/BthB,KAAK7Y,IAAIvE,EAAQ,CAAE+c,QAAS,IAC5BihB,EAAS,IAAIa,OAAO7+B,EAAQH,KAAK+D,SAEjC/D,KAAKm+B,OAASA,EACdn+B,KAAKm+B,OAAOc,UAAW,EACvB9+B,EAAO8R,UAAU+E,IAAI,kBArJzBlT,EA0JCk6B,eAAA,WACKh+B,KAAKm+B,QACRn+B,KAAKm+B,OAAOe,WA5Jfp+B,EAAAm8B,EAAA,CAAA,CAAAp8B,IAAA,UAAA+B,IAyBC,WACC,OAAQE,OAAOq8B,WAAW,SAASC,YA1BrCnC,EAAA,CAAqCvqB,EAAAA,WAkKrCuqB,GAAgBnyB,KAAO,CACtB6H,SAAU,WACVwH,OAAQ,CAAC,aAFV,ICnKaklB,GAAb,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAAr1B,MAAAjK,KAAAkK,YAAAlK,KAAA,OAAAsB,EAAA+9B,EAAAC,GAAAD,EAAAn+B,UAEC6Q,OAAA,WACC/R,KAAK+D,QAAU,CACdm5B,cAAe,OACfC,aAAc,GACdjlB,MAAO,IACPklB,gBAAgB,EAChBmC,MAAM,EACNC,qBAAsB,IACtBlC,iBAAiB,EACjBC,mBAAmB,EACnBG,SAAU,CACTC,SAAS,EACTC,gBAAgB,GAEjBJ,WAAY,CACX5mB,GAAI,qBACJ6mB,WAAW,IAGbz9B,KAAK69B,SArBPwB,EAAA,CAA4CpC,IA2B5CoC,GAAuBv0B,KAAO,CAC7B6H,SAAU,oBADX,IC3Ba8sB,GAAb,SAAAH,GAAA,SAAAG,IAAA,OAAAH,EAAAr1B,MAAAjK,KAAAkK,YAAAlK,KAAA,OAAAsB,EAAAm+B,EAAAH,GAAAG,EAAAv+B,UAEC6Q,OAAA,WACC/R,KAAK+D,QAAU,CACdm5B,cAAe,EACfC,aAAc,EACdjlB,MAAO,IACPolB,iBAAiB,EACjBC,mBAAmB,EACnBG,SAAU,CACTC,SAAS,EACTC,gBAAgB,GAEjBJ,WAAY,CACX5mB,GAAI,qBACJ6mB,WAAW,IAGbz9B,KAAK69B,SAlBP4B,EAAA,CAA6CxC,IAwB7CwC,GAAwB30B,KAAO,CAC9B6H,SAAU,qBADX,ICvBa+sB,GAAb,SAAAJ,GAAA,SAAAI,IAAA,OAAAJ,EAAAr1B,MAAAjK,KAAAkK,YAAAlK,KAAA,OAAAsB,EAAAo+B,EAAAJ,GAAAI,EAAAx+B,UAEC6Q,OAAA,WACC/R,KAAK+D,QAAU,CACdm5B,cAAe,EACfC,aAAc,GACdwC,YAAa,CACZC,IAAK,CACJ1C,cAAe,EACfC,aAAc,IAEf0C,KAAM,CACL3C,cAAe,EACfC,aAAc,IAEf2C,KAAM,CACL5C,cAAe,EACfC,aAAc,IAEf4C,KAAM,CACL7C,cAAe,EACfC,aAAc,KAGhBjlB,MAAO,IACPklB,gBAAgB,EAChBmC,MAAM,EACNC,qBAAsB,IACtBlC,iBAAiB,EACjBC,mBAAmB,EACnBG,SAAU,CACTC,SAAS,EACTC,gBAAgB,GAEjBJ,WAAY,CACX5mB,GAAI,qBACJ6mB,WAAW,IAGb,IACMt9B,EADW6R,EAAAA,WAAWhS,MAApBkR,KACYhO,cAAc,qBAClClD,KAAK69B,MAAM19B,IAzCbu/B,EAAA,CAAoDzC,IA+CpDyC,GAA+B50B,KAAO,CACrC6H,SAAU,6BADX,IC/CaqtB,GAAb,SAAAV,GAAA,SAAAU,IAAA,OAAAV,EAAAr1B,MAAAjK,KAAAkK,YAAAlK,KAAA,OAAAsB,EAAA0+B,EAAAV,GAAAU,EAAA9+B,UAEC6Q,OAAA,WACC/R,KAAK+D,QAAU,CACdm5B,cAAe,IACfC,aAAc,GACdwC,YAAa,CACZC,IAAK,CACJ1C,cAAe,EACfC,aAAc,IAEf0C,KAAM,CACL3C,cAAe,EACfC,aAAc,IAEf2C,KAAM,CACL5C,cAAe,EACfC,aAAc,IAEf4C,KAAM,CACL7C,cAAe,EACfC,aAAc,KAGhBjlB,MAAO,IACPklB,gBAAgB,EAChBmC,MAAM,EACNC,qBAAsB,IACtBlC,iBAAiB,EACjBC,mBAAmB,EACnBG,SAAU,CACTC,SAAS,EACTC,gBAAgB,GAEjBJ,WAAY,CACX5mB,GAAI,qBACJ6mB,WAAW,IAGb,IACMt9B,EADW6R,EAAAA,WAAWhS,MAApBkR,KACYhO,cAAc,qBAClClD,KAAK69B,MAAM19B,IAzCb6/B,EAAA,CAAwD/C,IA+CxD+C,GAAmCl1B,KAAO,CACzC6H,SAAU,iCADX,IC/CastB,GAAb,SAAAX,GAAA,SAAAW,IAAA,OAAAX,EAAAr1B,MAAAjK,KAAAkK,YAAAlK,KAAA,OAAAsB,EAAA2+B,EAAAX,GAAAW,EAAA/+B,UAEC6Q,OAAA,WACC/R,KAAK+D,QAAU,CACdm5B,cAAe,IACfC,aAAc,GACdwC,YAAa,CACZC,IAAK,CACJ1C,cAAe,EACfC,aAAc,IAEf0C,KAAM,CACL3C,cAAe,EACfC,aAAc,IAEf2C,KAAM,CACL5C,cAAe,EACfC,aAAc,IAEf4C,KAAM,CACL7C,cAAe,EACfC,aAAc,KAGhBjlB,MAAO,IACPklB,gBAAgB,EAChBmC,MAAM,EACNC,qBAAsB,IACtBlC,iBAAiB,EACjBC,mBAAmB,EACnBG,SAAU,CACTC,SAAS,EACTC,gBAAgB,GAEjBJ,WAAY,CACX5mB,GAAI,qBACJ6mB,WAAW,IAGb,IACMt9B,EADW6R,EAAAA,WAAWhS,MAApBkR,KACYhO,cAAc,qBAClClD,KAAK69B,MAAM19B,IAzCb8/B,EAAA,CAAwDhD,IA+CxDgD,GAAmCn1B,KAAO,CACzC6H,SAAU,iCADX,IChDautB,GAAb,SAAApuB,GAAA,SAAAouB,IAAA,OAAApuB,EAAA7H,MAAAjK,KAAAkK,YAAAlK,KAAAsB,EAAA4+B,EAAApuB,GAAA,IAAAhO,EAAAo8B,EAAAh/B,UAAA,OAAA4C,EAECq8B,SAAA,SAAS9sB,GACR,OAAOA,EAAKiB,OAASjB,EAAKiB,MAAMhU,OAAS,GAH3CwD,EAMCs8B,QAAA,SAAQ/sB,GAAM,IAAAhR,EAAArC,KACbA,KAAK47B,KAAKr5B,SAAQ,SAAAkI,GACjBA,EAAEyxB,OAASzxB,EAAE0K,KAAO9B,EAAK8B,MAAM9S,EAAK89B,SAAS9sB,KAASA,EAAK6oB,WAExD7oB,EAAK6oB,QACRl8B,KAAKg2B,KAAK3mB,KAAKgE,GAEhBrT,KAAKwN,eAbP1J,EAgBCm4B,OAAA,SAAO5oB,GACNrT,KAAKg2B,KAAK3mB,KAAKgE,IAjBjB6sB,EAAA,CAAmCxtB,EAAAA,WAsBnCwtB,GAAcp1B,KAAO,CACpB6H,SAAU,SACVwH,OAAQ,CAAC,QACTkmB,QAAS,CAAC,QACV15B,SAAQ,yOAJT,ICjBa25B,GAAb,SAAAxuB,GAAA,SAAAwuB,IAAA,OAAAxuB,EAAA7H,MAAAjK,KAAAkK,YAAAlK,KAAAsB,EAAAg/B,EAAAxuB,GAAA,IAAAhO,EAAAw8B,EAAAp/B,UAAA,OAAA4C,EAECiO,OAAA,WAAS,IAAA1P,EAAArC,KACRA,KAAK6I,MAAQ,KACb7I,KAAKqb,SAAU,EACf,IAAMxb,EAAOG,KAAKH,KAAO,IAAImZ,EAAAA,UAAU,CACtCwC,MAAO,IAAItC,EAAAA,YAAY,KAAM,CAACoC,EAAAA,WAAWC,oBAAqBD,EAAAA,WAAWG,mBACzEO,aAAclZ,OAAOmZ,YACrBC,WAAY,KAEIlc,KAAKqZ,SAAWxZ,EAAKwZ,SACtCxZ,EAAKyZ,SAAStQ,KACboJ,EAAAA,UAAUpS,KAAKqS,eACdC,WAAU,SAACxC,GACZzN,EAAKmL,cACL4H,EAAwBpP,aAf3BlC,EAmBCqT,KAAA,WACcnX,KAAKH,KACbga,MAAM,CACV2B,MAAO,6BAtBV1X,EA0BCiR,MAAA,WACc/U,KAAKH,KACbkV,SA5BPjR,EA+BCqY,SAAA,WAAW,IAAA1O,EAAAzN,KACJH,EAAOG,KAAKH,KAClB8E,QAAQC,IAAI,+BAAgC/E,EAAKwB,OAC7CxB,EAAKuc,OACRvc,EAAKwc,WAAY,EACjBpN,EAAYM,QAAQ1P,EAAKwB,OAAO2H,KAC/ByJ,EAAAA,SACCH,WAAU,SAAAjK,GACX1D,QAAQC,IAAI,+BAAgCyD,GAC5CoF,EAAK4N,SAAU,EACfN,EAAW1M,KAAK,CACfkE,MAAS,SACT+J,UAAa,sBAEdzc,EAAKkV,QACLtH,EAAK8yB,OAAOlxB,MAAK,MACf,SAAAxG,GACFlE,QAAQC,IAAI,4BAA6BiE,GACzC4E,EAAK5E,MAAQA,EACbhJ,EAAKwc,WAAY,EACjB5O,EAAKD,cACL4H,EAAwBpP,aAGzBnG,EAAK0c,SAAU,GAvDlBzY,EA2DC08B,SAAA,WACCxgC,KAAKygC,WAAWpxB,QA5DlBvL,EA+DC48B,SAAA,WACC1gC,KAAK2gC,WAAWtxB,QAhElBixB,EAAA,CAAyC5tB,EAAAA,WAoEzC4tB,GAAoBx1B,KAAO,CAC1B6H,SAAU,gBACV0tB,QAAS,CAAC,SAAU,aAAc,eAFnC,ICvEaO,GAAb,SAAA9uB,GAAA,SAAA8uB,IAAA,OAAA9uB,EAAA7H,MAAAjK,KAAAkK,YAAAlK,KAAAsB,EAAAs/B,EAAA9uB,GAAA,IAAAhO,EAAA88B,EAAA1/B,UAAA,OAAA4C,EAqBCiO,OAAA,WAAS,IAAA1P,EAAArC,KACAkR,EAASc,EAAAA,WAAWhS,MAApBkR,KACRlR,KAAK6gC,UAAY3vB,EAAKhO,cAAc,wBACpC4N,EAAaM,OAAOpI,KACnBoJ,EAAAA,UAAUpS,KAAKqS,eACdC,WAAU,SAAA1L,GACXvE,EAAKuE,MAAQA,MA3BhB9C,EA+BC8E,OAAA,SAAO2J,GACNzB,EAAalI,UAhCf9H,EAAA8/B,EAAA,CAAA,CAAA//B,IAAA,QAAA+B,IACC,WACC,OAAO5C,KAAK8gC,QAFdp8B,IAKC,SAAUkC,GAET,IAAQtH,EAAW0S,EAAAA,WAAWhS,MAAtBV,OAKR,GAJIU,KAAK8gC,QAAU9gC,KAAK8gC,OAAO5vB,OAC9B5R,EAAOuG,OAAO7F,KAAK8gC,OAAO5vB,KAAMlR,MAChCA,KAAK6gC,UAAUze,YAAYpiB,KAAK8gC,OAAO5vB,OAEpCtK,GAASA,EAAMsK,KAAM,CACxBlR,KAAK8gC,OAASl6B,EACd5G,KAAK6gC,UAAU9f,YAAYna,EAAMsK,MACf5R,EAAOyhC,QAAQn6B,EAAMsK,MAExClR,KAAK8gC,OAASl6B,EACd5G,KAAKwN,kBAlBPozB,EAAA,CAA0CluB,EAAAA,WAoC1CkuB,GAAqB91B,KAAO,CAC3B6H,SAAU,iBACVhM,SAAQ,+MAFT,ICrCaq6B,GAAb,SAAAlvB,GAAA,SAAAkvB,IAAA,OAAAlvB,EAAA7H,MAAAjK,KAAAkK,YAAAlK,KAAAsB,EAAA0/B,EAAAlvB,GAAA,IAAAhO,EAAAk9B,EAAA9/B,UAAA,OAAA4C,EAECiO,OAAA,WACC/R,KAAKihC,MAAQzyB,EACbxO,KAAKmS,KAAOnS,KAAKmS,MAAQ3D,EAAUE,SAJrC5K,EAOCo9B,QAAA,SAAQ/uB,GACPnS,KAAKmS,KAAOA,EACZnS,KAAKwN,eATP1J,EAYCq9B,aAAA,SAAa5uB,GAEZvS,KAAKkhC,QAAQ1yB,EAAUG,YAdzB7K,EAiBCs9B,aAAA,SAAa7uB,GAEZvS,KAAKkhC,QAAQ1yB,EAAUC,UAnBzB3K,EAsBCu9B,aAAA,SAAa9uB,GAEZvS,KAAKkhC,QAAQ1yB,EAAUE,UAxBzB5K,EA2BC08B,SAAA,SAASrxB,GACRxK,QAAQC,IAAI,yBAA0BuK,GACtCF,EAAYC,QAAQC,GAChBnP,KAAKshC,QACRx+B,OAAOC,SAAS0B,KAAOzE,KAAKshC,QA/B/Bx9B,EAoCC48B,SAAA,SAASvxB,GACRxK,QAAQC,IAAI,yBAA0BuK,GACtCF,EAAYC,QAAQC,GAChBnP,KAAKshC,QACRx+B,OAAOC,SAAS0B,KAAOzE,KAAKshC,QAxC/Bx9B,EA6CCy9B,SAAA,SAAS/lB,KA7CVwlB,EAAA,CAAmCtuB,EAAAA,WAqDnCsuB,GAAcl2B,KAAO,CACpB6H,SAAU,SACVwH,OAAQ,CAAC,QAAS,SAFnB,ICjDaqnB,GAAb,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAAx3B,MAAAjK,KAAAkK,YAAAlK,KAAAsB,EAAAkgC,EAAAC,GAAA,IAAA39B,EAAA09B,EAAAtgC,UAAA,OAAA4C,EAECiO,OAAA,WACC0vB,EAAAvgC,UAAM6Q,OAAN7E,KAAAlN,MACA,IAAQ0hC,EAAmB1vB,EAAAA,WAAWhS,MAA9B0hC,eACR,GAAIA,aAA0Bd,GAAsB,CACnD,IAAMx5B,EAAOs6B,EAAe96B,MAAMQ,KAClCpH,KAAKmS,KAAO/K,EAAK+K,KAGlBiD,EAAwBkD,QAV1BxU,EAaCo9B,QAAA,SAAQ/uB,GACPnS,KAAKmS,KAAOA,EACZnS,KAAKwN,cACL,IAAQ0D,EAASc,EAAAA,WAAWhS,MAApBkR,MACOpO,OAAOmU,YAAc,KAAO/F,EAAKhO,cAAc,iBAAmBgO,GAC1EsH,SAAS,EAAG,IAlBrB1U,EAqBCq9B,aAAA,WACCx8B,QAAQC,IAAI,mCACZ5E,KAAKkhC,QAAQ1yB,EAAUG,YAvBzB7K,EA0BCs9B,aAAA,WACCz8B,QAAQC,IAAI,mCACZ5E,KAAKkhC,QAAQ1yB,EAAUC,UA5BzB3K,EA+BCu9B,aAAA,WACC18B,QAAQC,IAAI,mCACZ5E,KAAKkhC,QAAQ1yB,EAAUE,UAjCzB5K,EAoCC69B,QAAA,WACC7wB,EAAalI,UArCf9E,EAwCC48B,SAAA,SAASvxB,GAER2B,EAAa/H,QAAQoG,IA1CvBrL,EA6CC08B,SAAA,SAASrxB,GAER2B,EAAa/H,QAAQoG,IA/CvBrL,EAkDCszB,UAAA,WACChiB,EAAwBmD,SAnD1BipB,EAAA,CAAwCR,IAuDxCQ,GAAmB12B,KAAO,CACzB6H,SAAU,gBADX,ICvDaivB,GAAb,SAAA9vB,GAAA,SAAA8vB,IAAA,OAAA9vB,EAAA7H,MAAAjK,KAAAkK,YAAAlK,KAAAsB,EAAAsgC,EAAA9vB,GAAA,IAAAhO,EAAA89B,EAAA1gC,UAAA,OAAA4C,EAECiO,OAAA,WAAS,IAAA1P,EAAArC,KACRA,KAAK6I,MAAQ,KACb7I,KAAKqb,SAAU,EACf,IAAMxb,EAAOG,KAAKH,KAAO,IAAImZ,EAAAA,UAAU,CACtCwC,MAAO,IAAItC,EAAAA,YAAY,KAAM,CAACoC,EAAAA,WAAWC,oBAAqBD,EAAAA,WAAWG,mBACzEomB,SAAU,IAAI3oB,EAAAA,YAAY,KAAMoC,EAAAA,WAAWC,qBAC3CS,aAAclZ,OAAOmZ,YACrBC,WAAY,KAEIlc,KAAKqZ,SAAWxZ,EAAKwZ,SACtCxZ,EAAKyZ,SAAStQ,KACboJ,EAAAA,UAAUpS,KAAKqS,eACdC,WAAU,SAACxC,GACZzN,EAAKmL,cACL4H,EAAwBpP,aAhB3BlC,EAoBCqT,KAAA,WACcnX,KAAKH,KACbga,MAAM,CACV2B,MAAO,0BACPqmB,SAAU,cAxBb/9B,EA4BCiR,MAAA,WACc/U,KAAKH,KACbkV,SA9BPjR,EAiCCqY,SAAA,WAAW,IAAA1O,EAAAzN,KACJH,EAAOG,KAAKH,KAClB8E,QAAQC,IAAI,+BAAgC/E,EAAKwB,OAC7CxB,EAAKuc,OACRvc,EAAKwc,WAAY,EACjBpN,EAAYc,QAAQlQ,EAAKwB,OAAO2H,KAC/ByJ,EAAAA,SACCH,WAAU,SAAAjK,GACX1D,QAAQC,IAAI,+BAAgCyD,GAC5CoF,EAAK4N,SAAU,EACfN,EAAW1M,KAAK,CACfkE,MAAS,SACT+J,UAAa,UAEdzc,EAAKkV,QACLtH,EAAKq0B,OAAOzyB,KAAKhH,MACf,SAAAQ,GACFlE,QAAQC,IAAI,4BAA6BiE,GACzC4E,EAAK5E,MAAQA,EACbhJ,EAAKwc,WAAY,EACjB5O,EAAKD,cACL4H,EAAwBpP,aAGzBnG,EAAK0c,SAAU,GAzDlBzY,EA6DCy9B,SAAA,SAAShvB,GACRvS,KAAK+hC,WAAW1yB,QA9DlBvL,EAiEC48B,SAAA,SAASnuB,GACRvS,KAAK2gC,WAAWtxB,QAlElBuyB,EAAA,CAAyClvB,EAAAA,WCL1B,SAASsvB,GAAoBC,EAAWC,GAEtD,OAAO,IAAIC,EAAAA,eAAc,SAAC9gC,GACzB,IAAM+gC,EAAQF,EAAYA,EAAUt/B,IAAIq/B,GAAa,KACrD,OAAOG,GAASA,EAAM/gC,QAAUA,EAAQ,CAAEyE,SAAU,CAAEzE,MAAOA,EAAOghC,WAAYJ,IAAgB,QDuElGL,GAAoB92B,KAAO,CAC1B6H,SAAU,gBACV0tB,QAAS,CAAC,SAAU,aAAc,eCtElC,ICCYiC,GAAb,SAAAxwB,GAAA,SAAAwwB,IAAA,OAAAxwB,EAAA7H,MAAAjK,KAAAkK,YAAAlK,KAAAsB,EAAAghC,EAAAxwB,GAAA,IAAAhO,EAAAw+B,EAAAphC,UAAA,OAAA4C,EAECiO,OAAA,WAAS,IAAA1P,EAAArC,KACRA,KAAK6I,MAAQ,KACb7I,KAAKqb,SAAU,EACf,ICbqC4mB,EAAWC,EDa1CriC,EAAOG,KAAKH,KAAO,IAAImZ,EAAAA,UAAU,CACtCnK,UAAW,IAAIqK,EAAAA,YAAY,KAAM,CAACoC,EAAAA,WAAWC,sBAC7CvM,SAAU,IAAIkK,EAAAA,YAAY,KAAM,CAACoC,EAAAA,WAAWC,sBAC5CV,QAAS,IAAI3B,EAAAA,YAAY,KAAM,CAACoC,EAAAA,WAAWC,sBAC3CI,KAAM,IAAIzC,EAAAA,YAAY,KAAM,CAACoC,EAAAA,WAAWC,sBACxCgnB,QAAS,IAAIrpB,EAAAA,YAAY,MACzBspB,WAAY,IAAItpB,EAAAA,YAAY,KAAM,CAACoC,EAAAA,WAAWC,sBAC9CC,MAAO,IAAItC,EAAAA,YAAY,KAAM,CAACoC,EAAAA,WAAWC,oBAAqBD,EAAAA,WAAWG,mBACzEomB,SAAU,IAAI3oB,EAAAA,YAAY,KAAM,CAACoC,EAAAA,WAAWC,sBAC5CknB,gBAAiB,IAAIvpB,EAAAA,YAAY,KAAM,CAACoC,EAAAA,WAAWC,qBCtBf0mB,EDsBmD,WCtBxCC,EDsBoDriC,ECpB9F,IAAIsiC,EAAAA,eAAc,SAAC9gC,GACzB,IAAM+gC,EAAQF,EAAYA,EAAUt/B,IAAIq/B,GAAa,KACrD,OAAK5gC,GAAU+gC,GAGR/gC,IAAU+gC,EAAM/gC,MAAQ,CAAEiS,MAAO,CAAEjS,MAAOA,EAAOiS,MAAO8uB,EAAM/gC,QAF7D,WDkBPwa,QAAS,IAAI3C,EAAAA,YAAY,KAAM,CAACoC,EAAAA,WAAWC,sBAC3CO,WAAY,IAAI5C,EAAAA,YAAY,MAC5BwpB,mBAAoB,IAAIxpB,EAAAA,YAAY,KAAM,CAAC8oB,GAAoB,aAAcniC,KAC7Emc,aAAclZ,OAAOmZ,YACrBC,WAAY,KAEIlc,KAAKqZ,SAAWxZ,EAAKwZ,SACtCxZ,EAAKyZ,SAAStQ,KACboJ,EAAAA,UAAUpS,KAAKqS,eACdC,WAAU,SAACxC,GACZzN,EAAKmL,cACL4H,EAAwBpP,YAEzBhG,KAAKuR,QAAQvI,KACZyJ,EAAAA,QACAL,EAAAA,UAAUpS,KAAKqS,eACdC,aA/BJxO,EAkCCyN,MAAA,WAAQ,IAAA9D,EAAAzN,KACP,OAAOiP,EAAYK,QAAQtG,KAC1B6D,EAAAA,KAAI,SAAAzF,GACH,IAAMiS,EAAW5L,EAAK4L,SACtBA,EAASwB,QAAQ9W,QAAUiR,EAAYC,gBAAgB7N,EAAKyT,QAAQ9W,SACpEsV,EAASmpB,WAAWz+B,QAAUiR,EAAYC,gBAAgB7N,EAAKo7B,WAAWz+B,SAC1EsV,EAASqpB,mBAAmB3+B,QAAUiR,EAAYC,gBAAgB7N,EAAKs7B,mBAAmB3+B,SAC1F0J,EAAKD,mBAzCT1J,EA8CCqT,KAAA,WACC,IAAMtX,EAAOG,KAAKH,KACZwZ,EAAWrZ,KAAKqZ,SAChBwB,EAAUxB,EAASwB,QAAQ9W,QAAQzD,OAAS,EAAI+Y,EAASwB,QAAQ9W,QAAQ,GAAGoR,GAAK,KACjFqtB,EAAanpB,EAASmpB,WAAWz+B,QAAQzD,OAAS,EAAI+Y,EAASmpB,WAAWz+B,QAAQ,GAAGoR,GAAK,KAChGtV,EAAKga,MAAM,CACVhL,UAAW,OACXG,SAAU,YACV6L,QAASA,EACTc,KAAM,SACN4mB,QAAS,YACTC,WAAYA,EACZhnB,MAAO,0BACPqmB,SAAU,WACVY,gBAAiB,WACjB5mB,SAAS,KA7DZ/X,EAiECiR,MAAA,WACc/U,KAAKH,KACbkV,SAnEPjR,EAsECqY,SAAA,WAAW,IAAAlM,EAAAjQ,KACJH,EAAOG,KAAKH,KAClB8E,QAAQC,IAAI,+BAAgC/E,EAAKwB,OAC7CxB,EAAKuc,OACRvc,EAAKwc,WAAY,EACjBpN,EAAYiB,QAAQrQ,EAAKwB,OAAO2H,KAC/ByJ,EAAAA,SACCH,WAAU,SAAAjK,GACX1D,QAAQC,IAAI,+BAAgCyD,GAC5C4H,EAAKoL,SAAU,EACfN,EAAW1M,KAAK,CACfkE,MAAS,eACT+J,UAAa,kBAEdzc,EAAKkV,QACL9E,EAAK0yB,OAAOtzB,KAAKhH,MACf,SAAAQ,GACFlE,QAAQC,IAAI,4BAA6BiE,GACzCoH,EAAKpH,MAAQA,EACbhJ,EAAKwc,WAAY,EACjBpM,EAAKzC,cACL4H,EAAwBpP,aAGzBnG,EAAK0c,SAAU,GA9FlBzY,EAkGC08B,SAAA,WACCxgC,KAAKygC,WAAWpxB,QAnGlBizB,EAAA,CAAyC5vB,EAAAA,WAuGzC4vB,GAAoBx3B,KAAO,CAC1B6H,SAAU,gBACV0tB,QAAS,CAAC,SAAU,eE/GrB,IAAIuC,GAAc,IAELC,GAAb,SAAAlM,GAAA,SAAAkM,IAAA,OAAAlM,EAAA1sB,MAAAjK,KAAAkK,YAAAlK,KAAAsB,EAAAuhC,EAAAlM,GAAA,IAAA7yB,EAAA++B,EAAA3hC,UAAA,OAAA4C,EAMCiO,OAAA,WAAS,IAAA1P,EAAArC,KACAkR,EAASc,EAAAA,WAAWhS,MAApBkR,KACFkQ,EAAUlQ,EAAK/N,aAAa,oBAClCnD,KAAKohB,QAAUA,EAAUlQ,EAAKhO,cAAcke,GAAWlQ,EACvDlR,KAAK8iC,OAAS,KACd9iC,KAAKogC,QAAUpgC,KAAKogC,QAAQpJ,KAAKh3B,MACjCA,KAAK+iC,gBAAkB/iC,KAAK+iC,gBAAgB/L,KAAKh3B,MACjDA,KAAKgjC,aAAehjC,KAAKgjC,aAAahM,KAAKh3B,MAC3CA,KAAKijC,cAAgBjjC,KAAKijC,cAAcjM,KAAKh3B,MAC7CA,KAAKkjC,eACLL,EAAkBM,UAAUn6B,KAC3BoJ,EAAAA,UAAUpS,KAAKqS,eACdC,WAAU,SAAA6C,GAEP9S,EAAK8S,KAAOA,EACfjE,EAAKe,UAAU+E,IAAI,WAEnB9F,EAAKe,UAAUpM,OAAO,eAvB1B/B,EA4BCs8B,QAAA,SAAQ7tB,GACP,IAAQrB,EAASc,EAAAA,WAAWhS,MAApBkR,KACY,OAAhBlR,KAAK8iC,OACR9iC,KAAKgjC,eAEoB9xB,EAAKhO,cAAc,oBAG3ClD,KAAKijC,iBApCTn/B,EAyCCi/B,gBAAA,SAAgBxwB,GACf,IAAQrB,EAASc,EAAAA,WAAWhS,MAApBkR,KACcA,IAASqB,EAAMpS,QAAU+Q,EAAK8W,SAASzV,EAAMpS,SAElEH,KAAKijC,iBA7CRn/B,EAiDCk/B,aAAA,WACqB,OAAhBhjC,KAAK8iC,SACR9iC,KAAK8iC,QAAS,EACd9iC,KAAKojC,uBACLP,EAAkBM,UAAU9zB,KAAKrP,KAAKmV,IACtCnV,KAAKqjC,QAAQh0B,KAAKrP,KAAKmV,MAtD1BrR,EA0DCm/B,cAAA,WACqB,OAAhBjjC,KAAK8iC,SACR9iC,KAAKsjC,0BACLtjC,KAAK8iC,OAAS,KACVD,EAAkBM,UAAU5yB,aAAevQ,KAAKmV,KACnD0tB,EAAkBM,UAAU9zB,KAAK,MACjCrP,KAAKqjC,QAAQh0B,KAAK,SAhEtBvL,EAqECo/B,aAAA,WACCljC,KAAKohB,QAAQ/I,iBAAiB,QAASrY,KAAKogC,UAtE9Ct8B,EAyECs/B,qBAAA,WACCngC,SAASoV,iBAAiB,QAASrY,KAAK+iC,kBA1E1Cj/B,EA6ECy/B,gBAAA,WACCvjC,KAAKohB,QAAQ+V,oBAAoB,QAASn3B,KAAKogC,UA9EjDt8B,EAiFCw/B,wBAAA,WACCrgC,SAASk0B,oBAAoB,QAASn3B,KAAK+iC,kBAlF7Cj/B,EAqFCszB,UAAA,WACCp3B,KAAKujC,kBACLvjC,KAAKsjC,2BAvFPT,EA0FQW,OAAP,WACC,OAAOZ,MA3FT9hC,EAAA+hC,EAAA,CAAA,CAAAhiC,IAAA,KAAA+B,IAEC,WACC,OAAO5C,KAAKyjC,UAAYzjC,KAAK0jC,MAAQ1jC,KAAK0jC,IAAMb,EAAkBW,cAHpEX,EAAA,CAAuCxL,EAAAA,WAgGvCwL,GAAkB/3B,KAAO,CACxB6H,SAAU,aACVwH,OAAQ,CAAC,WAAY,oBACrBkmB,QAAS,CAAC,YAGXwC,GAAkBM,UAAY,IAAI3yB,EAAAA,gBAAgB,MAAlD,ICxGamzB,GAAb,SAAAhN,GAAA,SAAAgN,IAAA,OAAAhN,EAAA1sB,MAAAjK,KAAAkK,YAAAlK,KAAA,OAAAsB,EAAAqiC,EAAAhN,GAAAgN,EAAAziC,UAMC6Q,OAAA,WAAS,IAAA1P,EAAArC,KACAkR,EAASc,EAAAA,WAAWhS,MAApBkR,KACRA,EAAKe,UAAU+E,IAAI,iBACnB6rB,GAAkBM,UAAUn6B,KAC3BoJ,EAAAA,UAAUpS,KAAKqS,eACdC,WAAU,SAAA6C,GAEP9S,EAAK8S,KAAOA,EACfjE,EAAKe,UAAU+E,IAAI,WAEnB9F,EAAKe,UAAUpM,OAAO,eAhB1B/E,EAAA6iC,EAAA,CAAA,CAAA9iC,IAAA,KAAA+B,IAEC,WACC,OAAO5C,KAAK,qBAHd2jC,EAAA,CAA2CtM,EAAAA,WAuB3CsM,GAAsB74B,KAAO,CAC5B6H,SAAU,qCACVwH,OAAQ,CAAC,kBAFV,ICxBaypB,GAAb,SAAA55B,GAAA,SAAA45B,IAAA,OAAA55B,EAAAC,MAAAjK,KAAAkK,YAAAlK,KAAA,OAAAsB,EAAAsiC,EAAA55B,GAAA45B,EAEQz5B,UAAP,SAAiB05B,GAIhB,IAHA,IAAIC,EAAM98B,EACJ1E,EAAOuhC,EAAQngC,MAAM,KACvBqgC,EAAIzhC,EAAK0hC,QACN1hC,EAAKhC,OAAS,GAAKwjC,EAAIC,IAC7BD,EAAMA,EAAIC,GACVA,EAAIzhC,EAAK0hC,QAGV,OADcF,EAAIC,IAAM,MAV1BH,EAAA,CAA6B/4B,EAAAA,MAgB7B+4B,GAAQ94B,KAAO,CACdC,KAAM,OADP,IChBak5B,GAAb,SAAAj6B,GAAA,SAAAi6B,IAAA,OAAAj6B,EAAAC,MAAAjK,KAAAkK,YAAAlK,KAAA,OAAAsB,EAAA2iC,EAAAj6B,GAAAi6B,EAEQ95B,UAAP,SAAiBtJ,GAEhB,OADcmG,EAAYjC,MACblE,KAAQ,GAJvBojC,EAAA,CAA8Bp5B,EAAAA,MAS9Bo5B,GAASn5B,KAAO,CACfC,KAAM,QADP,ICVam5B,GAAb,SAAApyB,GAAA,SAAAoyB,IAAA,OAAApyB,EAAA7H,MAAAjK,KAAAkK,YAAAlK,KAAA,OAAAsB,EAAA4iC,EAAApyB,GAAAoyB,EAAAhjC,UAECmxB,UAAA,WACC,IAAQnhB,EAASc,EAAAA,WAAWhS,MAApBkR,KAGFnM,EADU/E,KAAKmkC,QACCp/B,MACtBpE,OAAO2B,KAAKyC,GAAOxC,SAAQ,SAAC1B,GAC3BkE,EAAMlE,GAAOqQ,EAAKe,UAAU+E,IAAInW,GAAOqQ,EAAKe,UAAUpM,OAAOhF,OARhEqjC,EAAA,CAAsCxxB,EAAAA,WAatCwxB,GAAiBp5B,KAAO,CACvB6H,SAAU,YACVwH,OAAQ,CAAC,YAFV,ICbaiqB,GAAb,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAAp6B,MAAAjK,KAAAkK,YAAAlK,KAAA,OAAAsB,EAAA8iC,EAAAC,GAAAD,EAAAljC,UAEC6Q,OAAA,WACC/R,KAAKoT,MAAQpT,KAAKoT,OAAS,SAH7BgxB,EAAA,CAA8CF,IAQ9CE,GAAyBt5B,KAAO,CAC/B6H,SAAU,qBACVwH,OAAQ,CAAC,UAAW,SACpBxT,SAAQ,qpBAHT,ICPa29B,GAAb,WAAA,SAAAA,KAAA,OAAAA,EAIQC,SAAP,WAMC,OALKvkC,KAAKwkC,YACTxkC,KAAKwkC,UAAY3sB,EAAAA,UAAU/U,OAAQ,WAAWkG,KAC7Cy7B,EAAAA,YAAY,KAGPzkC,KAAKwkC,WAVdF,EAaQI,OAAP,WAMC,OALK1kC,KAAK2kC,UACT3kC,KAAK2kC,QAAU9sB,EAAAA,UAAU/U,OAAQ,SAASkG,KACzCy7B,EAAAA,YAAY,KAGPzkC,KAAK2kC,SAnBdL,EAsBQM,MAAP,WAAe,IAAAviC,EAAArC,KAgBd,OAfKA,KAAK6kC,SACT7kC,KAAK6kC,OAAS1iC,EAAAA,MAAMnC,KAAKukC,WAAYvkC,KAAK0kC,UAAU17B,KACnDwB,EAAAA,KAAI,SAAA+H,GACH,IAAMjQ,EAAOD,EAAKC,KAMlB,MALmB,YAAfiQ,EAAMuI,KACTxY,EAAKiQ,EAAM1R,MAAO,SAEXyB,EAAKiQ,EAAM1R,KAEZwB,EAAKC,QAEbwiC,EAAAA,UAAU9kC,KAAKsC,MACfmiC,EAAAA,YAAY,KAGPzkC,KAAK6kC,QAtCdP,EAyCQS,KAAP,WACC,IAAK/kC,KAAKglC,MAAO,CAChB,IAAMC,EAAS,KACfjlC,KAAKglC,MAAQhlC,KAAKukC,WAAWv7B,KAC5B8J,EAAAA,QAAO,SAAAP,GAAK,OAAIA,EAAM1R,KAAO0R,EAAM1R,IAAIyS,MAAM2xB,MAC7Cz6B,EAAAA,KAAI,SAAA+H,GAAK,OAAIA,EAAM1R,OACnB4jC,EAAAA,YAAY,IAGd,OAAOzkC,KAAKglC,OAlDdV,EAqDQY,QAAP,WACC,IAAKllC,KAAKmlC,SAAU,CACnB,IACC35B,EADG45B,EAAS,GAEbplC,KAAKmlC,SAAWnlC,KAAK+kC,OAAO/7B,KAC3BwB,EAAAA,KAAI,SAAA3J,GAQH,OAPI2K,GACH2kB,aAAa3kB,GAEd45B,GAAUvkC,EACV2K,EAAKmW,YAAW,WACfyjB,EAAS,KACP,MACIA,KAERX,EAAAA,YAAY,IAGd,OAAOzkC,KAAKmlC,UAvEdb,EAAA,GzEk1MAnjC,EyEl1MamjC,GAAAA,OAEE,IAAA,ICCFe,GAAb,SAAAhB,GAAA,SAAAgB,IAAA,OAAAhB,EAAAp6B,MAAAjK,KAAAkK,YAAAlK,KAAAsB,EAAA+jC,EAAAhB,GAAA,IAAAvgC,EAAAuhC,EAAAnkC,UAAA,OAAA4C,EAECiO,OAAA,WAAS,IAAA1P,EAAArC,KACRA,KAAKoT,MAAQpT,KAAKoT,OAAS,QAC3BpT,KAAKqjC,SAAU,EACfrjC,KAAKslC,WAAazC,GAAkBW,SACpCc,GAAgBY,UAAUl8B,KACzBoJ,EAAAA,UAAUpS,KAAKqS,eACdC,WAAU,SAAAizB,GACXljC,EAAKmjC,aAAaD,OATrBzhC,EA0BC0hC,aAAA,SAAaD,GAIZ,IAFA,IAAMjxB,EAAQtU,KAAKmkC,QAAQpgC,SAAW,GAClCyP,GAAS,EACJnT,EAAI,EAAGA,EAAIiU,EAAMhU,OAAQD,IAAK,CAEtC,GAAyD,IAD/CiU,EAAMjU,GACV0K,KAAKyM,cAAclU,QAAQiiC,EAAK/tB,eAAsB,CAE3DhE,EAAQnT,EACR,OAGF,IAAe,IAAXmT,EAAc,CACjB,IAAQtC,EAASc,EAAAA,WAAWhS,MAApBkR,KACFuyB,EAAWvyB,EAAKhO,cAAc,aAE9BmQ,EADcnC,EAAKhO,cAAc,kBACduiC,SAASjyB,GAClCiwB,EAASjrB,SAAS,EAAGnF,EAAKomB,aA3C7B31B,EA+CC4hC,UAAA,SAAUryB,GAET,IAAIhS,EACJ,GAAIrB,KAAK2lC,WAAY,CACpB,IAAMtkC,EAAQrB,KAAKmkC,QAAQ9iC,OAAS,GAC9BmS,EAAQnS,EAAMiC,QAAQ+P,EAAK8B,KAClB,IAAX3B,EAEHnS,EAAMoS,OAAOD,EAAO,GAGpBnS,EAAMgN,KAAKgF,EAAK8B,IAET9T,EAAMf,QAASe,EAAM6T,Q1ELhC,SAAwBnK,GACtB,MAAM,IAAImT,UAAU,IAAOnT,EAAO,kB0EIjC66B,CAAA,cAEAvkC,EAAQgS,EAAK8B,GAGdnV,KAAKmkC,QAAQ9iC,MAAQA,EACrBrB,KAAK6lC,OAAOx2B,KAAKhO,IAlEnByC,EAqECgiC,UAAA,SAAUzyB,GACT,OAAIrT,KAAK2lC,YAE4B,KADrB3lC,KAAKmkC,QAAQ9iC,OAAS,IACvBiC,QAAQ+P,EAAK8B,IAEpBnV,KAAKmkC,QAAQ9iC,QAAUgS,EAAK8B,IA1EtCrR,EA8ECyP,SAAA,WACC,IAAIlS,EAAQrB,KAAKmkC,QAAQ9iC,MACnBiT,EAAQtU,KAAKmkC,QAAQpgC,SAAW,GACtC,GAAI/D,KAAK2lC,WAER,OADAtkC,EAAQA,GAAS,IACPf,OACFe,EAAMmJ,KAAI,SAAAu7B,GAChB,IAAM1yB,EAAOiB,EAAM5G,MAAK,SAAAjD,GAAC,OAAIA,EAAE0K,KAAO4wB,GAAKt7B,EAAEM,OAASg7B,KACtD,OAAO1yB,EAAOA,EAAKtI,KAAO,MACxBL,KAAK,MAED,SAGR,IAAM2I,EAAOiB,EAAM5G,MAAK,SAAAjD,GAAC,OAAIA,EAAE0K,KAAO9T,GAASoJ,EAAEM,OAAS1J,KAC1D,OAAIgS,EACIA,EAAKtI,KAEL,UAhGXjH,EAqGCkiC,UAAA,SAAUC,GAELjmC,KAAKqjC,SAAsB,OAAX4C,IACnBjmC,KAAKmkC,QAAQ5nB,SAAU,GAExBvc,KAAKqjC,QAAU4C,IAAWjmC,KAAKslC,YA1GjCxkC,EAAAukC,EAAA,CAAA,CAAAxkC,IAAA,aAAA+B,IA6GC,WACC,OAAO5C,KAAKkmC,WAA8B,IAAlBlmC,KAAKkmC,UAAwC,UAAlBlmC,KAAKkmC,aA9G1Db,EAAA,CAAkDnB,IAkHlDmB,GAA6Bv6B,KAAO,CACnC6H,SAAU,0BACV0tB,QAAS,CAAC,UACVlmB,OAAQ,CAAC,UAAW,QAAS,YAC7BxT,SAAQ,+7BAJT,ICtHaw/B,GAAb,SAAA9B,GAAA,SAAA8B,IAAA,OAAA9B,EAAAp6B,MAAAjK,KAAAkK,YAAAlK,KAAA,OAAAsB,EAAA6kC,EAAA9B,GAAA8B,EAAAjlC,UAEC6Q,OAAA,WACC/R,KAAKoT,MAAQpT,KAAKoT,OAAS,SAH7B+yB,EAAA,CAA2CjC,IAQ3CiC,GAAsBr7B,KAAO,CAC5B6H,SAAU,kBACVwH,OAAQ,CAAC,UAAW,SACpBxT,SAAQ,+YAHT,ICRay/B,GAAb,SAAA/B,GAAA,SAAA+B,IAAA,OAAA/B,EAAAp6B,MAAAjK,KAAAkK,YAAAlK,KAAA,OAAAsB,EAAA8kC,EAAA/B,GAAA+B,EAAAllC,UAEC6Q,OAAA,WACC/R,KAAKoT,MAAQpT,KAAKoT,OAAS,SAH7BgzB,EAAA,CAA8ClC,IAQ9CkC,GAAyBt7B,KAAO,CAC/B6H,SAAU,qBACVwH,OAAQ,CAAC,UAAW,SACpBxT,SAAQ,oYAHT,ICRa0/B,GAAb,SAAAhC,GAAA,SAAAgC,IAAA,OAAAhC,EAAAp6B,MAAAjK,KAAAkK,YAAAlK,KAAA,OAAAsB,EAAA+kC,EAAAhC,GAAAgC,EAAAnlC,UAEC6Q,OAAA,WACC/R,KAAKoT,MAAQpT,KAAKoT,OAAS,QAC3BpT,KAAK8U,SAAW9U,KAAK8U,WAAY,GAJnCuxB,EAAA,CAA4CnC,IAS5CmC,GAAuBv7B,KAAO,CAC7B6H,SAAU,mBACVwH,OAAQ,CAAC,UAAW,QAAS,YAC7BxT,SAAQ,kTAHT,ICTa2/B,GAAb,SAAAjC,GAAA,SAAAiC,IAAA,OAAAjC,EAAAp6B,MAAAjK,KAAAkK,YAAAlK,KAAA,OAAAsB,EAAAglC,EAAAjC,GAAAiC,EAAAplC,UAEC6Q,OAAA,WACC/R,KAAKoT,MAAQpT,KAAKoT,OAAS,QAC3BpT,KAAK8U,SAAW9U,KAAK8U,WAAY,GAJnCwxB,EAAA,CAA0CpC,IAS1CoC,GAAqBx7B,KAAO,CAC3B6H,SAAU,iBACVwH,OAAQ,CAAC,UAAW,QAAS,YAC7BxT,SAAQ,0aAHT,ICTa4/B,GAAb,SAAAlC,GAAA,SAAAkC,IAAA,OAAAlC,EAAAp6B,MAAAjK,KAAAkK,YAAAlK,KAAA,OAAAsB,EAAAilC,EAAAlC,GAAAkC,EAAArlC,UAEC6Q,OAAA,WACC/R,KAAKoT,MAAQpT,KAAKoT,OAAS,QAC3BpT,KAAK8U,SAAW9U,KAAK8U,WAAY,GAJnCyxB,EAAA,CAA8CrC,IAS9CqC,GAAyBz7B,KAAO,CAC/B6H,SAAU,qBACVwH,OAAQ,CAAC,UAAW,QAAS,YAC7BxT,SAAQ,idAHT,ICRa6/B,GAAb,SAAAnC,GAAA,SAAAmC,IAAA,OAAAnC,EAAAp6B,MAAAjK,KAAAkK,YAAAlK,KAAA,OAAAsB,EAAAklC,EAAAnC,GAAAmC,EAAAtlC,UACCqS,SAAA,SAAS1S,EAAKQ,GAEb,OADc0I,EAAUI,UAAV,SAA6BtJ,IAF7C2lC,EAAA,CAAqCtC,IAOrCsC,GAAgB17B,KAAO,CACtB6H,SAAU,mBACVwH,OAAQ,CAAC,WACTxT,SAAQ,0XAHT,ICRa8/B,GAAb,SAAA30B,GAAA,SAAA20B,IAAA,OAAA30B,EAAA7H,MAAAjK,KAAAkK,YAAAlK,KAAAsB,EAAAmlC,EAAA30B,GAAA,IAAAhO,EAAA2iC,EAAAvlC,UAAA,OAAA4C,EAEC4iC,OAAA,SAAOn0B,GACNvS,KAAKmX,KAAK9H,KAAKkD,IAHjBzO,EAMC6iC,QAAA,SAAQp0B,GACPvS,KAAK+U,MAAM1F,KAAKkD,IAPlBk0B,EAAA,CAAmC/zB,EAAAA,WAYnC+zB,GAAc37B,KAAO,CACpB6H,SAAU,iBACVwH,OAAQ,CAAC,QACTkmB,QAAS,CAAC,OAAQ,SAClB15B,SAAQ,2YjFynNT,IkFpoNaigC,GAAb,SAAA58B,GAAA,SAAA48B,IAAA,OAAA58B,EAAAC,MAAAjK,KAAAkK,YAAAlK,KAAA,OAAAsB,EAAAslC,EAAA58B,GAAA48B,EAEQz8B,UAAP,SAAiB9I,GAChB,GAAIA,EAAO,CACVA,EAAQA,EAAMiD,QAAQ,aAAa,SAASuiC,EAAGroB,GAC9C,OAAOL,OAAO2oB,aAAalmB,SAASpC,OAErC,IACMuoB,EAAY,CAAC,IAAK,IAAK,IAAM,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACj1BC,EAAK,IAAIvL,OAAJ,KAFK,CAAC,OAAQ,MAAO,OAAQ,KAAM,KAAM,OAAQ,QAAS,OAAQ,QAAS,SAAU,MAAO,SAAU,OAAQ,MAAO,OAAQ,OAAQ,QAAS,MAAO,MAAO,MAAO,OAAQ,MAAO,SAAU,OAAQ,OAAQ,QAAS,QAAS,OAAQ,SAAU,QAAS,OAAQ,OAAQ,QAAS,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,QAAS,SAAU,OAAQ,QAAS,QAAS,SAAU,SAAU,SAAU,QAAS,OAAQ,SAAU,SAAU,QAAS,OAAQ,MAAO,SAAU,SAAU,SAAU,QAAS,SAAU,OAAQ,QAAS,SAAU,SAAU,SAAU,QAAS,OAAQ,SAAU,QAAS,QAAS,SAAU,SAAU,SAAU,OAAQ,QAAS,QAAS,SAAU,SAAU,SAAU,QAAS,OAAQ,SAAU,SAAU,QAAS,OAAQ,MAAO,SAAU,SAAU,SAAU,QAAS,SAAU,OAAQ,SAAU,SAAU,SAAU,SAAU,QAAS,OAAQ,SAAU,QAAS,OAAQ,MAAO,OAAQ,MAAO,QAAS,SAAU,OAAQ,SAAU,SAAU,QAAS,MAAO,QAAS,OAAQ,MAAO,OAAQ,QAAS,MAAO,OAAQ,OAAQ,MAAO,QAAS,QAAS,OAAQ,QAAS,QAAS,UAAW,OAAQ,MAAO,QAAS,OAAQ,QAAS,SAAU,KAAM,KAAM,KAAM,UAAW,KAAM,MAAO,QAAS,MAAO,UAAW,MAAO,MAAO,MAAO,QAAS,QAAS,OAAQ,QAAS,QAAS,UAAW,OAAQ,MAAO,QAAS,OAAQ,QAAS,SAAU,KAAM,KAAM,KAAM,UAAW,KAAM,MAAO,QAAS,MAAO,UAAW,MAAO,MAAO,MAAO,SAE/4C/wB,KAAK,SAA7B,KAA2C,KAUtD,OATArJ,EAAQA,EAAMiD,QAAQ0iC,GAAI,WACzB,IAAK,IAAI3mC,EAAI,EAAGA,EAAI6J,UAAU5J,OAAQD,IACrC,GAAI6J,UAAU7J,GAEb,OAAO0mC,EAAU1mC,EAAI,QAd3BumC,EAAA,CAA8B/7B,EAAAA,MAyB9B+7B,GAAS97B,KAAO,CACfC,KAAM,QADP,IC9Bak8B,GAAb,SAAAtQ,GAAA,SAAAsQ,IAAA,OAAAtQ,EAAA1sB,MAAAjK,KAAAkK,YAAAlK,KAAA,OAAAsB,EAAA2lC,EAAAtQ,GAAAsQ,EAAA/lC,UAECmxB,UAAA,WACkBrgB,EAAAA,WAAWhS,MAApBkR,KACHggB,aAAa,KAAMlxB,KAAKmV,KAJ/B8xB,EAAA,CAAiC5P,EAAAA,WASjC4P,GAAYn8B,KAAO,CAClB6H,SAAU,OACVwH,OAAQ,CAAC,OAFV,ICTa+sB,GAAb,SAAAvQ,GAAA,SAAAuQ,IAAA,OAAAvQ,EAAA1sB,MAAAjK,KAAAkK,YAAAlK,KAAA,OAAAsB,EAAA4lC,EAAAvQ,GAAAuQ,EAAAhmC,UAECmxB,UAAA,WACkBrgB,EAAAA,WAAWhS,MAApBkR,KACHggB,aAAa,MAAOlxB,KAAKmnC,WAJhCD,EAAA,CAAuC7P,EAAAA,WASvC6P,GAAkBp8B,KAAO,CACxB6H,SAAU,aACVwH,OAAQ,CAAC,aAFV,ICPaitB,GAAb,SAAAzQ,GAAA,SAAAyQ,IAAA,OAAAzQ,EAAA1sB,MAAAjK,KAAAkK,YAAAlK,KAAA,OAAAsB,EAAA8lC,EAAAzQ,GAAAyQ,EAAAlmC,UAEC6Q,OAAA,WACC,IAAQb,EAASc,EAAAA,WAAWhS,MAApBkR,KACRkE,EAAwBwC,MAAM1G,GAAMlI,KACnCoJ,EAAAA,UAAUpS,KAAKqS,eACdC,WAAU,SAAAC,QANd60B,EAAA,CAA+C/P,EAAAA,WA+B/C+P,GAA0Bt8B,KAAO,CAChC6H,SAAU,6CADX,IC/Ba00B,GAAb,SAAA1Q,GAAA,SAAA0Q,IAAA,OAAA1Q,EAAA1sB,MAAAjK,KAAAkK,YAAAlK,KAAAsB,EAAA+lC,EAAA1Q,GAAA,IAAA7yB,EAAAujC,EAAAnmC,UAAA,OAAA4C,EAECiO,OAAA,WACKqD,EAAwByB,uBAC3B7W,KAAKsV,UAAUtM,KACdoJ,EAAAA,UAAUpS,KAAKqS,eACdC,WAAU,SAAAC,QANfzO,EAYCwR,QAAA,WACC,IAAQpE,EAASc,EAAAA,WAAWhS,MAApBkR,KACFgH,EAAQlY,KAAKsnC,YAAcC,WAAWvnC,KAAKsnC,aAAe,IAChE,OAAOlyB,EAAwBE,QAAQtM,KACtC6D,EAAAA,KAAI,SAAAwI,GACH,IAAMmyB,EAAK1kC,OAAOwa,YACZmqB,EAAMD,EAAK,EACXE,EAAOx2B,EAAKy2B,wBACZC,EAAWrqB,KAAKsqB,YAAY32B,EAAM,KAClCsR,EAAMklB,EAAKllB,IAAMolB,EACjBE,EAASJ,EAAKI,OAASF,EAC7B,GAAIplB,EAAMglB,GAAMM,EAAS,EAAG,CAC3B,IACM7vB,GADOuK,EAAMilB,GAAOA,EACVvvB,EAAQ,GACxBqF,KAAK7Y,IAAIwM,EAAM,CAAE+G,EAAAA,UA1BtBovB,EAAA,CAAqChQ,EAAAA,WAkCrCgQ,GAAgBv8B,KAAO,CACtB6H,SAAU,WACVwH,OAAQ,CAAC,gBAFV,ICnCa4tB,GAAb,SAAA/9B,GAAA,SAAA+9B,IAAA,OAAA/9B,EAAAC,MAAAjK,KAAAkK,YAAAlK,KAAA,OAAAsB,EAAAymC,EAAA/9B,GAAA+9B,EAEQ59B,UAAP,SAAiBtJ,GAEhB,OADamG,EAAY9B,KACbrE,IAAL,IAAiBA,GAJ1BknC,EAAA,CAA8Bl9B,EAAAA,MAS9Bk9B,GAASj9B,KAAO,CACfC,KAAM,QCXP,IAAIi9B,GAAK,EAEIC,GAAb,SAAAn2B,GAAA,SAAAm2B,IAAA,IAAA,IAAA5lC,EAAAiI,EAAAJ,UAAA5J,OAAAuc,EAAA,IAAAra,MAAA8H,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAAsS,EAAAtS,GAAAL,UAAAK,GAAA,OAAApJ,EAAAa,EAAAK,EAAAyP,EAAA5E,KAAAjD,MAAA6H,EAAA,CAAA9R,MAAA8c,OAAAD,KAAA7c,MAAA,YAEY,GAFZqC,EAAAf,EAAA2mC,EAAAn2B,GAAA,IAAAhO,EAAAmkC,EAAA/mC,UAAA,OAAA4C,EAgBCiO,OAAA,WAEC,IAAMm2B,EAAQplC,OAAOqlC,wBAA0BrlC,OAAOslC,YACtD,GAAKF,EAAL,CAIA,IAAQh3B,EAASc,EAAAA,WAAWhS,MAApBkR,KAEFiE,GADSnV,KAAKG,OAAS+Q,EAAKhO,cAAc,oBAC9BiS,GAAP,YAAuB6yB,GAC9BK,EAAQroC,KAAKsoC,MACjB,IAAgC,IAA5BD,EAAM/kC,QAAQ,SAAiB,CAClC,IAAMilC,EAAWF,EAAM3kC,MAAM,KAI7B2kC,EAAK,oGAHYE,EAAS,GAGrB,eAFcA,EAAS,GAEvB,SADQA,EAAS,GAGvB,IAAMlvB,EAAWrZ,KAAKqZ,WAAWnI,EAAKs3B,aAAa,YAClDjJ,EAAOv/B,KAAKu/B,OAAOruB,EAAKs3B,aAAa,QACrCnL,EAAWr9B,KAAKq9B,WAAWnsB,EAAKs3B,aAAa,YACxCC,EAASzoC,KAAKyoC,OAASP,EAAM/yB,EAAI,CACtCkzB,MAAOA,EACP9I,KAAMA,EACNlC,SAAUA,EACVqL,OAAQrvB,EACRsvB,cAAe,QACfC,QAASvvB,IAGVrZ,KAAK04B,QAAU14B,KAAK04B,QAAQ1B,KAAKh3B,MACjCA,KAAK6oC,UAAY7oC,KAAK6oC,UAAU7R,KAAKh3B,MACrCA,KAAK8oC,UAAY9oC,KAAK8oC,UAAU9R,KAAKh3B,MACrCA,KAAK+oC,OAAS/oC,KAAK+oC,OAAO/R,KAAKh3B,MAC/BA,KAAKgpC,QAAUhpC,KAAKgpC,QAAQhS,KAAKh3B,MACjCA,KAAKipC,WAAajpC,KAAKipC,WAAWjS,KAAKh3B,MACvCyoC,EAAO1wB,GAAG,QAAS/X,KAAK04B,SACxB+P,EAAO1wB,GAAG,UAAW/X,KAAK6oC,WAC1BJ,EAAO1wB,GAAG,UAAW/X,KAAK8oC,WAC1BL,EAAO1wB,GAAG,OAAQ/X,KAAK+oC,QACvBN,EAAO1wB,GAAG,QAAS/X,KAAKgpC,SACxBP,EAAO1wB,GAAG,WAAY/X,KAAKipC,cAzD7BnlC,EA4DC40B,QAAA,WACkB1mB,EAAAA,WAAWhS,MAApBkR,KAAR,IACMiE,EAAKnV,KAAKG,OAAOgV,GACjBszB,EAASzoC,KAAKyoC,OACpB,IAAKzoC,KAAKqZ,SAAU,CACnB,IACM6vB,EADiBT,EAAOU,iBACDjmC,cAAc,SAC3CgmC,EAAMhY,aAAa,cAAe,QAClCgY,EAAMhY,aAAa,WAAY,QAEhClxB,KAAKopC,MAAM/5B,KAAK8F,IAtElBrR,EA0EC+kC,UAAA,WACkB72B,EAAAA,WAAWhS,MAApBkR,KAAR,IACMiE,EAAKnV,KAAKG,OAAOgV,GAEvBnV,KAAKqpC,QAAQh6B,KAAK8F,IA9EpBrR,EAiFCglC,UAAA,WACkB92B,EAAAA,WAAWhS,MAApBkR,KACGlR,KAAKG,OAAOgV,GADvB,IAEMszB,EAASzoC,KAAKyoC,OAEpB,GADAA,EAAOa,IAAI,UAAWtpC,KAAK8oC,YACtB9oC,KAAKqZ,SAAU,CACnB,IAAMkwB,EAAYd,EAAOe,gBAEzB,GAAID,EAAUjpC,OAAQ,CACrB,IAAMmpC,EAAiBF,EAAUA,EAAUjpC,OAAS,GAAGkT,MACjC+1B,EAAU,GAAG/1B,MACnCi1B,EAAOiB,eAAeD,MA5F1B3lC,EAkGCilC,OAAA,WACkB/2B,EAAAA,WAAWhS,MAApBkR,KAAR,IACMiE,EAAKnV,KAAKG,OAAOgV,GAEvBnV,KAAK2pC,SAAU,EACf3pC,KAAK4pC,KAAKv6B,KAAK8F,IAvGjBrR,EA0GCklC,QAAA,WACkBh3B,EAAAA,WAAWhS,MAApBkR,KAAR,IACMiE,EAAKnV,KAAKG,OAAOgV,GAEvBnV,KAAK2pC,SAAU,EACf3pC,KAAK6pC,MAAMx6B,KAAK8F,IA/GlBrR,EAkHCmlC,WAAA,WACkBj3B,EAAAA,WAAWhS,MAApBkR,KAAR,IACMiE,EAAKnV,KAAKG,OAAOgV,GAEvBnV,KAAK2pC,SAAU,EACf3pC,KAAK8pC,SAASz6B,KAAK8F,IAvHrBrR,EA0HCimC,UAAA,WACkB/3B,EAAAA,WAAWhS,MAApBkR,KACGlR,KAAKG,OAAOgV,GADvB,IAEMszB,EAASzoC,KAAKyoC,OACd9+B,EAAS8+B,EAAO9+B,SAElBA,IAAWA,EAAOggC,SACrBlB,EAAOmB,QAjIV9lC,EAqICkmC,WAAA,WACkBh4B,EAAAA,WAAWhS,MAApBkR,KACGlR,KAAKG,OAAOgV,GADvB,IAEMszB,EAASzoC,KAAKyoC,OACd9+B,EAAS8+B,EAAO9+B,SAElBA,GAAUA,EAAOggC,SACpBlB,EAAOoB,SA5IV/lC,EAgJC4P,OAAA,WACkB1B,EAAAA,WAAWhS,MAApBkR,KACGlR,KAAKG,OAAOgV,GADvB,IAEMszB,EAASzoC,KAAKyoC,OACd9+B,EAAS8+B,EAAO9+B,SAElBA,GAAUA,EAAOggC,QACpBlB,EAAOoB,QAEPpB,EAAOmB,QAzJV9lC,EA6JC8lC,KAAA,SAAKz0B,GAEanD,EAAAA,WAAWhS,MAApBkR,KACJiE,IAAOnV,KAAKG,OAAOgV,IACtBnV,KAAK+pC,aAjKRjmC,EAqKC+lC,MAAA,SAAM10B,GAEYnD,EAAAA,WAAWhS,MAApBkR,KACJiE,IAAOnV,KAAKG,OAAOgV,IACtBnV,KAAKgqC,cAzKRlmC,EA6KCszB,UAAA,WACC,IAAMqR,EAASzoC,KAAKyoC,OAChBA,IACHA,EAAOa,IAAI,QAAStpC,KAAK04B,SACzB+P,EAAOa,IAAI,UAAWtpC,KAAK6oC,WAC3BJ,EAAOa,IAAI,UAAWtpC,KAAK8oC,WAC3BL,EAAOa,IAAI,OAAQtpC,KAAK+oC,QACxBN,EAAOa,IAAI,QAAStpC,KAAKgpC,SACzBP,EAAOa,IAAI,WAAYtpC,KAAKipC,cArL/BnoC,EAAAmnC,EAAA,CAAA,CAAApnC,IAAA,UAAA+B,IAGC,WACC,OAAO5C,KAAKiqC,UAJdvlC,IAMC,SAAYilC,GACX,GAAI3pC,KAAKiqC,WAAaN,EAAS,CAC9B3pC,KAAKiqC,SAAWN,EAChB,IAAQz4B,EAASc,EAAAA,WAAWhS,MAApBkR,KACJA,IACHy4B,EAAUz4B,EAAKe,UAAU+E,IAAI,WAAa9F,EAAKe,UAAUpM,OAAO,iBAXpEoiC,EAAA,CAAoCv1B,EAAAA,WA0LpCu1B,GAAen9B,KAAO,CACrB6H,SAAU,oBACV0tB,QAAS,CAAC,QAAS,UAAW,OAAQ,QAAS,YAC/ClmB,OAAQ,CAAC,QAAS,QAClBxT,SAAQ,IAJT,IC5LaujC,GAAb,SAAAvT,GAAA,SAAAuT,IAAA,OAAAvT,EAAA1sB,MAAAjK,KAAAkK,YAAAlK,KAAA,OAAAsB,EAAA4oC,EAAAvT,GAAA71B,EAAAopC,EAAA,CAAA,CAAArpC,IAAA,QAAA+B,IAQC,WACC,OAAO5C,KAAKupB,QATd7kB,IACC,SAAU4G,GACT,GAAItL,KAAKupB,SAAWje,EAAO,CAC1BtL,KAAKupB,OAASje,EACd,IAAQ4F,EAASc,EAAAA,WAAWhS,MAApBkR,KACR5F,EAAQ4F,EAAKggB,aAAa,QAAS5lB,GAAS4F,EAAKi5B,gBAAgB,cALpED,EAAA,CAAoC7S,EAAAA,WAapC6S,GAAep/B,KAAO,CACrB6H,SAAU,YACVwH,OAAQ,CAAC,UCSV,IAAMiwB,GAAY,CACjBhG,GACAiB,GACAc,GACAC,GAEAC,GACAE,GACAD,GAGAzD,GACAc,GAEA6C,GACAS,GACAC,GAGAE,GAEAxG,GACAyG,GAEApK,GACAwJ,GACAwB,GACAiC,IAMKG,GAAQ,CACbzG,GACAK,GACA2C,GACA78B,EACAg+B,IAGYuC,GAAb,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAAtgC,MAAAjK,KAAAkK,YAAAlK,KAAA,OAAAsB,EAAAgpC,EAAAC,GAAAD,EAAA,CAAkCE,EAAAA,QAElCF,GAAax/B,KAAO,CACnB2/B,QAAS,GAETC,aAAY,GAAA5tB,OACRstB,GACAC,IAEJhrC,QAAO,GAAAyd,OACHstB,GACAC,KATL,ICpCaM,GAAb,SAAAJ,GAAA,SAAAI,IAAA,OAAAJ,EAAAtgC,MAAAjK,KAAAkK,YAAAlK,KAAA,OAAAsB,EAAAqpC,EAAAJ,GAAAI,EAAA,CAA+BH,EAAAA,QAE/BG,GAAU7/B,KAAO,CAChB2/B,QAAS,CACRG,EAAAA,WACAC,EAAAA,WACAP,IAEDI,aAAc,CACb5xB,EACAyB,EACAa,EACAqB,EACAG,GACAkU,GACAuF,GACAK,GACAa,GACAE,GACAuD,GACApD,GACAgD,GACAO,GACAQ,GACAY,GACAC,GACAiD,GACAC,GACAM,GACAC,GACAZ,GACAa,GACAc,GACAV,GACAkB,GACAI,GACAU,IAEDwI,UAAWj5B,GCpEZk5B,EAAAA,QAAQD,UAAUH","file":"docs\\js\\main.min.js","sourcesContent":[null,"\r\nexport const environmentServed = {\r\n\tflags: {\r\n\t\tproduction: true,\r\n\t},\r\n\tapi: '/api',\r\n\tassets: '/Client/docs/',\r\n\tworkers: {\r\n\t\timage: '/Client/docs/js/workers/image.service.worker.js',\r\n\t\tprefetch: '/Client/docs/js/workers/prefetch.service.worker.js',\r\n\t},\r\n\tgithubDocs: 'https://raw.githubusercontent.com/actarian/giorgetti/main/docs/',\r\n\tslug: {\r\n\t\tconfigureProduct: `/Client/docs/products-configure.html`,\r\n\t\treservedArea: `/Client/docs/reserved-area.html`,\r\n\t},\r\n\ttemplate: {\r\n\t\tmodal: {\r\n\t\t\tuserModal: '/template/shared/user-modal.cshtml',\r\n\t\t}\r\n\t},\r\n\tgoogleMaps: {\r\n\t\tapiKey: 'AIzaSyDvGw6iAoKdRv8mmaC9GeT-LWLPQtA8p60',\r\n\t}\r\n};\r\n","\r\nexport class Utils {\r\n\r\n\tstatic merge(target, source) {\r\n\t\tif (typeof source === 'object') {\r\n\t\t\tObject.keys(source).forEach(key => {\r\n\t\t\t\tconst value = source[key];\r\n\t\t\t\tif (typeof value === 'object' && !Array.isArray(value)) {\r\n\t\t\t\t\ttarget[key] = this.merge(target[key], value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttarget[key] = value;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn target;\r\n\t}\r\n\r\n}\r\n","import { environmentServed } from './environment.served';\r\nimport { environmentStatic } from './environment.static';\r\nimport { Utils } from './shared/utils/utils';\r\n\r\nexport const NODE = (typeof module !== 'undefined' && module.exports);\r\nexport const PARAMS = NODE ? { get: () => { } } : new URLSearchParams(window.location.search);\r\nexport const DEBUG = false || (PARAMS.get('debug') != null);\r\nexport const BASE_HREF = NODE ? null : document.querySelector('base').getAttribute('href');\r\nexport const HEROKU = NODE ? false : (window && window.location.host.indexOf('herokuapp') !== -1);\r\nexport const STATIC = NODE ? false : (HEROKU || (window && (window.location.port === '48481' || window.location.port === '5000' || window.location.port === '6443' || window.location.host === 'actarian.github.io')));\r\nexport const DEVELOPMENT = NODE ? false : (window && ['localhost', '127.0.0.1', '0.0.0.0'].indexOf(window.location.host.split(':')[0]) !== -1);\r\nexport const PRODUCTION = !DEVELOPMENT;\r\nexport const ENV = {\r\n\tSTATIC,\r\n\tDEVELOPMENT,\r\n\tPRODUCTION\r\n};\r\n\r\nexport class Environment {\r\n\r\n\tget STATIC() {\r\n\t\treturn ENV.STATIC;\r\n\t}\r\n\tset STATIC(STATIC) {\r\n\t\tENV.STATIC = (STATIC === true || STATIC === 'true');\r\n\t\tconsole.log('Environment.STATIC.set', ENV.STATIC);\r\n\t}\r\n\r\n\tget href() {\r\n\t\tif (HEROKU) {\r\n\t\t\treturn this.githubDocs;\r\n\t\t} else {\r\n\t\t\treturn BASE_HREF;\r\n\t\t}\r\n\t}\r\n\r\n\tgetAbsoluteUrl(path, params) {\r\n\t\tlet url = `${window.location.origin}${path}`;\r\n\t\t// let url = `${window.location.protocol}//${window.location.host}${path}`;\r\n\t\tObject.keys(params).forEach(key => {\r\n\t\t\turl = url.replace(`$${key}`, params[key]);\r\n\t\t});\r\n\t\treturn url;\r\n\t}\r\n\r\n\tgetPath(path) {\r\n\t\treturn this.isLocal(path) ? (this.href + path) : path;\r\n\t}\r\n\r\n\tisLocal(path) {\r\n\t\treturn path.indexOf('://') === -1;\r\n\t}\r\n\r\n\tconstructor(options) {\r\n\t\tif (options) {\r\n\t\t\tObject.assign(this, options);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst defaultOptions = {\r\n\tport: 5000,\r\n\tflags: {\r\n\t\tproduction: false,\r\n\t\theroku: HEROKU,\r\n\t},\r\n\tslug: {},\r\n\tlanguages: ['it', 'en'],\r\n\tdefaultLanguage: 'it',\r\n\tlabels: {\r\n\t\tselect: 'Seleziona',\r\n\t\tbrowse: 'Sfoglia',\r\n\t\tcancel: 'Annulla',\r\n\t\terror_email: 'Email non valida',\r\n\t\terror_match: 'I campi non corrispondono',\r\n\t\terror_required: 'Campo obbligatorio',\r\n\t\tloading: 'caricamento',\r\n\t\tremove: 'Rimuovi',\r\n\t\trequired: 'Richiesto',\r\n\t\tselect_file: 'Seleziona una file...',\r\n\t\tupdate: 'Aggiorna',\r\n\t\tupload: 'Carica',\r\n\t\tdrag_and_drop_images: 'Drag And Drop your images here',\r\n\t}\r\n};\r\n\r\nconst environmentOptions = window.STATIC ? environmentStatic : environmentServed;\r\n\r\nlet options = Object.assign(defaultOptions, environmentOptions);\r\noptions = Utils.merge(options, window.environment);\r\n\r\nexport const environment = new Environment(options);\r\n\r\nconsole.log('environment', environment);\r\n","\r\nexport const environmentStatic = {\r\n\tflags: {\r\n\t\tproduction: false,\r\n\t},\r\n\tapi: '/giorgetti/api',\r\n\tassets: '/giorgetti/',\r\n\tworkers: {\r\n\t\timage: './js/workers/image.service.worker.js',\r\n\t\tprefetch: './js/workers/prefetch.service.worker.js',\r\n\t},\r\n\tgithubDocs: 'https://raw.githubusercontent.com/actarian/giorgetti/main/docs/',\r\n\tslug: {\r\n\t\tconfigureProduct: `/giorgetti/products-configure.html`,\r\n\t\treservedArea: `/giorgetti/reserved-area.html`,\r\n\t},\r\n\ttemplate: {\r\n\t\tmodal: {\r\n\t\t\tuserModal: '/giorgetti/user-modal.html',\r\n\t\t}\r\n\t},\r\n\tgoogleMaps: {\r\n\t\tapiKey: 'AIzaSyAIsa4g8z-HPPwohsf8jzVTbKw-DiI8k5w',\r\n\t}\r\n};\r\n","import { from, throwError } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\n\r\nexport class HttpResponse {\r\n\r\n\tget static() {\r\n\t\treturn this.url.indexOf('.json') === this.url.length - 5;\r\n\t}\r\n\r\n\tconstructor(response) {\r\n\t\tthis.data = null;\r\n\t\tif (response) {\r\n\t\t\tthis.url = response.url;\r\n\t\t\tthis.status = response.status;\r\n\t\t\tthis.statusText = response.statusText;\r\n\t\t\tthis.ok = response.ok;\r\n\t\t\tthis.redirected = response.redirected;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class HttpService {\r\n\r\n\tstatic http$(method, url, data, format = 'json', userPass = null) {\r\n\t\tconst methods = ['POST', 'PUT', 'PATCH'];\r\n\t\tlet response_ = null;\r\n\t\t// url = this.getUrl(url, format);\r\n\t\tconst options = {\r\n\t\t\tmethod: method,\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: methods.indexOf(method) !== -1 ? JSON.stringify(data) : undefined\r\n\t\t}\r\n\t\tif (userPass) {\r\n\t\t\t// options.mode = 'no-cors';\r\n\t\t\toptions.credentials = 'include';\r\n\t\t\tuserPass = window.btoa(userPass);\r\n\t\t\toptions.headers['Authorization'] = `Basic ${userPass}`;\r\n\t\t}\r\n\t\toptions.headers = new Headers(options.headers);\r\n\t\treturn from(fetch(url, options).then((response) => {\r\n\t\t\tresponse_ = response;\r\n\t\t\t// console.log(response);\r\n\t\t\ttry {\r\n\t\t\t\tconst contentType = response.headers.get('content-type');\r\n\t\t\t\tlet typedResponse;\r\n\t\t\t\tif (contentType && contentType.indexOf('application/json') !== -1) {\r\n\t\t\t\t\ttypedResponse = response.json();\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttypedResponse = response.text();\r\n\t\t\t\t}\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\treturn typedResponse;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn typedResponse.then(data => {\r\n\t\t\t\t\t\treturn Promise.reject(data);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\tconsole.warn('HttpService.http$', 'Cannot parse response');\r\n\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.reject(error);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})).pipe(\r\n\t\t\tcatchError(error => {\r\n\t\t\t\treturn throwError(this.getError(error, response_));\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\t/*\r\n\t// !!! todo mapping response.data\r\n\tstatic http$(method, url, data, format = 'json') {\r\n\t\tconst methods = ['POST', 'PUT', 'PATCH'];\r\n\t\tconst body = (data && methods.indexOf(method) !== -1) ? JSON.stringify(data) : undefined;\r\n\t\tconst queryString = (data && methods.indexOf(method) !== -1) ? Object.keys(data).map(function(key) {\r\n\t\t\treturn key + '=' + encodeURI(data[key]);\r\n\t\t}).join('&') : undefined;\r\n\t\tif (queryString) {\r\n\t\t\turl = `${url}?${queryString}`;\r\n\t\t}\r\n\t\tlet response_ = null;\r\n\t\treturn from(fetch(url, {\r\n\t\t\tmethod: method,\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: body,\r\n\t\t}).then((response) => {\r\n\t\t\tresponse_ = new HttpResponse(response);\r\n\t\t\ttry {\r\n\t\t\t\tconst contentType = response.headers.get('content-type');\r\n\t\t\t\tlet typedResponse;\r\n\t\t\t\tif (contentType && format === 'json' && contentType.indexOf('application/json') !== -1) {\r\n\t\t\t\t\ttypedResponse = response.json();\r\n\t\t\t\t} else if (format === 'blob') {\r\n\t\t\t\t\ttypedResponse = response.blob();\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttypedResponse = response.text();\r\n\t\t\t\t}\r\n\t\t\t\treturn typedResponse.then(data => {\r\n\t\t\t\t\tresponse_.data = data;\r\n\t\t\t\t\tif (response.ok) {\r\n\t\t\t\t\t\treturn Promise.resolve(response_);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn Promise.reject(response_);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} catch(error) {\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\tconsole.warn('HttpService.http$', 'Cannot parse response');\r\n\t\t\t\t\treturn Promise.resolve(response_);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.reject(this.getError(error, response_));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})).pipe(\r\n\t\t\tcatchError(error => {\r\n\t\t\t\treturn throwError(this.getError(error, response_));\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\t*/\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\tconst query = this.query(data);\r\n\t\treturn this.http$('GET', `${url}${query}`, undefined, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn this.http$('DELETE', url);\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn this.http$('POST', url, data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn this.http$('PUT', url, data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn this.http$('PATCH', url, data);\r\n\t}\r\n\r\n\tstatic query(data) {\r\n\t\treturn ''; // todo\r\n\t}\r\n\r\n\tstatic getError(object, response) {\r\n\t\tlet error = typeof object === 'object' ? object : {};\r\n\t\tif (!error.status) {\r\n\t\t\terror.status = response ? response.status : 0;\r\n\t\t}\r\n\t\tif (!error.statusCode) {\r\n\t\t\terror.statusCode = response ? response.status : 0;\r\n\t\t}\r\n\t\tif (!error.statusMessage) {\r\n\t\t\terror.statusMessage = response ? response.statusText : object;\r\n\t\t}\r\n\t\t// console.log('HttpService.getError', error, object);\r\n\t\treturn error;\r\n\t}\r\n\r\n}\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\nimport { Utils } from '../utils/utils';\r\n\r\nexport class LabelPipe extends Pipe {\r\n\r\n\tstatic transform(key) {\r\n\t\tconst labels = LabelPipe.labels_;\r\n\t\treturn labels[key] || key; // `#${key}#`;\r\n\t}\r\n\r\n\tstatic getKeys(...keys) {\r\n\t\treturn LabelPipe.transform(keys.map(x => x.replace('-', '_')).join('_'));\r\n\t}\r\n\r\n\tstatic setLabels() {\r\n\t\tconst LABELS = Utils.merge({\r\n\t\t\tselect: 'Seleziona',\r\n\t\t\tbrowse: 'Sfoglia',\r\n\t\t\tcancel: 'Annulla',\r\n\t\t\terror_email: 'Email non valida',\r\n\t\t\terror_match: 'I campi non corrispondono',\r\n\t\t\terror_required: 'Campo obbligatorio',\r\n\t\t\tloading: 'caricamento',\r\n\t\t\tremove: 'Rimuovi',\r\n\t\t\trequired: 'Richiesto',\r\n\t\t\tselect_file: 'Seleziona una file...',\r\n\t\t\tupdate: 'Aggiorna',\r\n\t\t\tupload: 'Carica',\r\n\t\t\tdrag_and_drop_images: 'Drag And Drop your images here',\r\n\t\t}, environment.labels);\r\n\t\tthis.labels_ = LABELS;\r\n\t}\r\n}\r\n\r\nLabelPipe.setLabels();\r\n\r\nLabelPipe.meta = {\r\n\tname: 'label',\r\n};\r\n","export class LocationService {\r\n\r\n\tstatic has(key) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\t// console.log('LocationService.has', params);\r\n\t\treturn params.has(key);\r\n\t}\r\n\r\n\tstatic get(key) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\t// console.log('LocationService.get', params);\r\n\t\treturn params.get(key);\r\n\t}\r\n\r\n\tstatic set(keyOrValue, value) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams.set(keyOrValue, value);\r\n\t\t} else {\r\n\t\t\tparams.set(keyOrValue, '');\r\n\t\t}\r\n\t\tthis.pushParams(params);\r\n\t\t// console.log('LocationService.set', params, keyOrValue, value);\r\n\t}\r\n\r\n\tstatic pushParams(params) {\r\n\t\tif (window.history && window.history.pushState) {\r\n\t\t\tconst title = document.title;\r\n\t\t\tconst url = `${window.location.href.split('?')[0]}?${params.toString()}`;\r\n\t\t\twindow.history.pushState(params.toString(), title, url);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic replace(from, to) {\r\n\t\tconst history = window.history;\r\n\t\tif (history && history.replaceState) {\r\n\t\t\tconst location = window.location;\r\n\t\t\tconst title = document.title;\r\n\t\t\tif (location.pathname === '/') {\r\n\t\t\t\tconst url = location.origin + to + location.search;\r\n\t\t\t\thistory.replaceState(history.state, title, url);\r\n\t\t\t} else if (location.href.indexOf(from) !== -1) {\r\n\t\t\t\tconst url = location.href.replace(from, to);\r\n\t\t\t\thistory.replaceState(history.state, title, url);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic deserialize(key) {\r\n\t\tconst encoded = this.get('params');\r\n\t\treturn this.decode(key, encoded);\r\n\t}\r\n\r\n\tstatic serialize(keyOrValue, value) {\r\n\t\tconst params = this.deserialize();\r\n\t\tconst encoded = this.encode(keyOrValue, value, params);\r\n\t\tthis.set('params', encoded);\r\n\t}\r\n\r\n\tstatic decode(key, encoded) {\r\n\t\tlet decoded = null;\r\n\t\tif (encoded) {\r\n\t\t\tconst json = window.atob(encoded);\r\n\t\t\tdecoded = JSON.parse(json);\r\n\t\t}\r\n\t\tif (key && decoded) {\r\n\t\t\tdecoded = decoded[key];\r\n\t\t}\r\n\t\treturn decoded || null;\r\n\t}\r\n\r\n\tstatic encode(keyOrValue, value, params) {\r\n\t\tparams = params || {};\r\n\t\tlet encoded = null;\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams[keyOrValue] = value;\r\n\t\t} else {\r\n\t\t\tparams = keyOrValue;\r\n\t\t}\r\n\t\tconst json = JSON.stringify(params);\r\n\t\tencoded = window.btoa(json);\r\n\t\treturn encoded;\r\n\t}\r\n\r\n}\r\n","import { from } from 'rxjs';\r\nimport { tap } from 'rxjs/operators';\r\nimport { environment } from '../../environment';\r\nimport { LabelPipe } from '../label/label.pipe';\r\nimport { LocationService } from '../location/location.service';\r\nimport { Utils } from '../utils/utils';\r\n\r\nexport class LanguageService {\r\n\r\n\tstatic languages = this.getDefaultLanguages();\r\n\tstatic defaultLanguage = this.getDefaultLanguage();\r\n\tstatic selectedLanguage = this.defaultLanguage;\r\n\r\n\tstatic get hasLanguages() {\r\n\t\treturn this.languages.length > 1;\r\n\t}\r\n\r\n\tstatic get activeLanguage() {\r\n\t\treturn this.languages.find(language => language.lang === this.selectedLanguage);\r\n\t}\r\n\r\n\tstatic getDefaultLanguages() {\r\n\t\treturn environment.alternates || [];\r\n\t}\r\n\r\n\tstatic getDefaultLanguage() {\r\n\t\treturn environment.defaultLanguage || (this.languages ? this.languages[0].lang : null);\r\n\t}\r\n\r\n\tstatic setLanguage(language) {\r\n\t\tthis.selectedLanguage = language.lang;\r\n\t}\r\n\r\n\tstatic setLanguage$(language) {\r\n\t\treturn from(fetch(language.href).then(response => {\r\n\t\t\treturn response.text();\r\n\t\t})).pipe(\r\n\t\t\ttap(html => {\r\n\t\t\t\t// console.log('html', html);\r\n\t\t\t\tconst labelsMatch = /(window\\.labels\\s*=\\s*\\n*\\s*\\{((\\{.+?\\})|.)+?\\})/gms.exec(html);\r\n\t\t\t\tif (labelsMatch) {\r\n\t\t\t\t\t// console.log('labels', labelsMatch[0]);\r\n\t\t\t\t\tnew Function(labelsMatch[0]).call(window);\r\n\t\t\t\t\tLabelPipe.setLabels();\r\n\t\t\t\t}\r\n\t\t\t\tconst bhereMatch = /(window\\.bhere\\s*=\\s*\\n*\\s*\\{((\\{.+?\\})|.)+?\\})/gms.exec(html);\r\n\t\t\t\tif (bhereMatch) {\r\n\t\t\t\t\t// console.log('bhere', bhereMatch[0]);\r\n\t\t\t\t\tconst data = {};\r\n\t\t\t\t\tnew Function(bhereMatch[0].replace('window', 'this')).call(data);\r\n\t\t\t\t\tif (data.bhere) {\r\n\t\t\t\t\t\tUtils.merge(environment, data.bhere);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tLocationService.replace(this.activeLanguage.href, language.href);\r\n\t\t\t\t// console.log(window.labels);\r\n\t\t\t\tthis.selectedLanguage = language.lang;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic toggleLanguages() {\r\n\t\tthis.showLanguages = !this.showLanguages;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n}\r\n","import { environment } from '../../environment';\r\nimport { HttpService } from '../http/http.service';\r\nimport { LanguageService } from '../language/language.service';\r\n\r\nexport class ApiService extends HttpService {\r\n\r\n\tstatic currentLanguage = LanguageService.activeLanguage;\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\treturn super.get$(`${environment.api}${url}`, data, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn super.delete$(`${environment.api}${url}`);\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn super.post$(`${environment.api}${url}`, data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn super.put$(`${environment.api}${url}`, data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn super.patch$(`${environment.api}${url}`, data);\r\n\t}\r\n}\r\n","export class SessionStorageService {\r\n\r\n\tstatic delete(name) {\r\n\t\tif (this.isSessionStorageSupported()) {\r\n\t\t\twindow.sessionStorage.removeItem(name);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic exist(name) {\r\n\t\tif (this.isSessionStorageSupported()) {\r\n\t\t\treturn window.sessionStorage[name] !== undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic get(name) {\r\n\t\tlet value = null;\r\n\t\tif (this.isSessionStorageSupported() && window.sessionStorage[name] !== undefined) {\r\n\t\t\ttry {\r\n\t\t\t\tvalue = JSON.parse(window.sessionStorage[name]);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('SessionStorageService.get.error parsing', name, e);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tstatic set(name, value) {\r\n\t\tif (this.isSessionStorageSupported()) {\r\n\t\t\ttry {\r\n\t\t\t\tconst cache = [];\r\n\t\t\t\tconst json = JSON.stringify(value, function(key, value) {\r\n\t\t\t\t\tif (typeof value === 'object' && value !== null) {\r\n\t\t\t\t\t\tif (cache.indexOf(value) !== -1) {\r\n\t\t\t\t\t\t\t// Circular reference found, discard key\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcache.push(value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t});\r\n\t\t\t\twindow.sessionStorage.setItem(name, json);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('SessionStorageService.set.error serializing', name, value, e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic isSessionStorageSupported() {\r\n\t\tif (this.supported) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tlet supported = false;\r\n\t\ttry {\r\n\t\t\tsupported = 'sessionStorage' in window && window.sessionStorage !== null;\r\n\t\t\tif (supported) {\r\n\t\t\t\twindow.sessionStorage.setItem('test', '1');\r\n\t\t\t\twindow.sessionStorage.removeItem('test');\r\n\t\t\t} else {\r\n\t\t\t\tsupported = false;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tsupported = false;\r\n\t\t}\r\n\t\tthis.supported = supported;\r\n\t\treturn supported;\r\n\t}\r\n}\r\n","import { BehaviorSubject, of } from 'rxjs';\r\nimport { catchError, map, switchMap, tap } from 'rxjs/operators';\r\nimport { ApiService } from '../../shared/api/api.service';\r\nimport { SessionStorageService } from '../../shared/storage/session-storage.service';\r\n\r\nexport const UserViews = {\r\n\tSIGN_IN: 1,\r\n\tSIGN_UP: 2,\r\n\tFORGOTTEN: 3,\r\n};\r\n\r\nexport class User {\r\n\r\n\tget avatar() {\r\n\t\treturn (this.firstName || '?').substr(0, 1).toUpperCase() + (this.lastName || '?').substr(0, 1).toUpperCase();\r\n\t}\r\n\r\n\tget fullName() {\r\n\t\treturn this.firstName + ' ' + this.lastName;\r\n\t}\r\n\r\n\tconstructor(data) {\r\n\t\tif (data) {\r\n\t\t\tObject.assign(this, data);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport class UserService {\r\n\r\n\tstatic user$_ = new BehaviorSubject(null);\r\n\r\n\tstatic get currentUser() {\r\n\t\treturn this.user$_.getValue();\r\n\t}\r\n\r\n\tstatic setUser(user) {\r\n\t\tif (user) {\r\n\t\t\tSessionStorageService.set('user', user);\r\n\t\t} else {\r\n\t\t\tSessionStorageService.delete('user');\r\n\t\t}\r\n\t\tthis.user$_.next(user);\r\n\t}\r\n\r\n\tstatic data$() {\r\n\t\treturn ApiService.get$('/user/data.json');\r\n\t}\r\n\r\n\tstatic forgot$(payload) {\r\n\t\treturn ApiService.get$(`/user/forgot.json`, payload);\r\n\t}\r\n\r\n\tstatic me$() {\r\n\t\tconst sessionUser = SessionStorageService.get('user');\r\n\t\tif (sessionUser) {\r\n\t\t\treturn of(sessionUser).pipe(\r\n\t\t\t\tswitchMap(user => {\r\n\t\t\t\t\tthis.setUser(new User(user));\r\n\t\t\t\t\treturn this.user$_;\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$(`/user/me.json`).pipe(\r\n\t\t\t\tmap((response) => {\r\n\t\t\t\t\tthis.mapUser(response);\r\n\t\t\t\t}),\r\n\t\t\t\tcatchError(_ => of(null)),\r\n\t\t\t\tswitchMap(user => {\r\n\t\t\t\t\tthis.setUser(user);\r\n\t\t\t\t\treturn this.user$_;\r\n\t\t\t\t}),\r\n\t\t\t\tmap(user => user || null),\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic signin$(payload) {\r\n\t\treturn ApiService.get$(`/user/signin.json`, payload).pipe(\r\n\t\t\tmap((response) => this.mapUser(response)),\r\n\t\t\ttap((user) => this.setUser(user)),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic signout$() {\r\n\t\treturn ApiService.get$(`/user/signout.json`).pipe(\r\n\t\t\ttap((_) => this.setUser(null)),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic signup$(payload) {\r\n\t\treturn ApiService.get$(`/user/signup.json`, payload).pipe(\r\n\t\t\tmap((response) => this.mapUser(response)),\r\n\t\t\ttap((user) => this.setUser(user)),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic sessionStorage$() {\r\n\t\treturn of(SessionStorageService.get('user') || null);\r\n\t}\r\n\r\n\tstatic mapUser(user) {\r\n\t\treturn user ? new User(user) : null;\r\n\t}\r\n\r\n\tstatic mapUsers(users) {\r\n\t\treturn users ? users.map(x => UserService.mapUser(x)) : [];\r\n\t}\r\n\r\n}\r\n","import { from, Subject } from 'rxjs';\r\nimport { map, switchMap, tap } from 'rxjs/operators';\r\n\r\nexport class ModalEvent {\r\n\r\n\tconstructor(data) {\r\n\t\tthis.data = data;\r\n\t}\r\n\r\n}\r\n\r\nexport class ModalResolveEvent extends ModalEvent { }\r\nexport class ModalRejectEvent extends ModalEvent { }\r\n\r\nexport class ModalService {\r\n\r\n\tstatic hasModal = false;\r\n\r\n\tstatic open$(modal) {\r\n\t\treturn this.getTemplate$(modal.src).pipe(\r\n\t\t\tmap(template => {\r\n\t\t\t\treturn { node: this.getNode(template), data: modal.data, modal: modal };\r\n\t\t\t}),\r\n\t\t\ttap(node => {\r\n\t\t\t\tthis.modal$.next(node);\r\n\t\t\t\tthis.hasModal = true;\r\n\t\t\t}),\r\n\t\t\tswitchMap(node => this.events$),\r\n\t\t\ttap(_ => this.hasModal = false)\r\n\t\t)\r\n\t}\r\n\r\n\tstatic load$(modal) {\r\n\r\n\t}\r\n\r\n\tstatic getTemplate$(url) {\r\n\t\treturn from(fetch(url).then(response => {\r\n\t\t\treturn response.text();\r\n\t\t}));\r\n\t}\r\n\r\n\tstatic getNode(template) {\r\n\t\tconst div = document.createElement('div');\r\n\t\tdiv.innerHTML = template;\r\n\t\tconst node = div.firstElementChild;\r\n\t\treturn node;\r\n\t}\r\n\r\n\tstatic reject(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalRejectEvent(data));\r\n\t}\r\n\r\n\tstatic resolve(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalResolveEvent(data));\r\n\t}\r\n\r\n}\r\n\r\nModalService.modal$ = new Subject();\r\nModalService.events$ = new Subject();\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { environment } from './environment';\r\nimport { UserService } from './pages/user/user.service';\r\nimport { ModalResolveEvent, ModalService } from './shared/modal/modal.service';\r\n\r\nexport class AppComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.remove('hidden');\r\n\t\tconsole.log('AppComponent.onInit');\r\n\t}\r\n\r\n\tonLogin() {\r\n\t\tModalService.open$({ src: environment.template.modal.userModal, data: { view: 1 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tconsole.log('AppComponent.onLogin', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\twindow.location.href = environment.slug.reservedArea;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonLogout() {\r\n\t\tUserService.signout$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n}\r\n\r\nAppComponent.meta = {\r\n\tselector: '[app-component]',\r\n};\r\n","import { BehaviorSubject } from 'rxjs';\r\n\r\nexport const FilterMode = {\r\n\tSELECT: 'select',\r\n\tAND: 'and',\r\n\tOR: 'or',\r\n\tQUERY: 'query',\r\n};\r\n\r\nexport class FilterItem {\r\n\r\n\tconstructor(filter) {\r\n\t\tthis.change$ = new BehaviorSubject();\r\n\t\tthis.mode = FilterMode.SELECT;\r\n\t\tthis.filter = 'Filter';\r\n\t\tthis.placeholder = 'Select';\r\n\t\tthis.values = [];\r\n\t\tthis.options = [];\r\n\t\tif (filter) {\r\n\t\t\tObject.assign(this, filter);\r\n\t\t}\r\n\t\tif (filter.mode === FilterMode.SELECT) {\r\n\t\t\tfilter.options.unshift({\r\n\t\t\t\tlabel: filter.placeholder,\r\n\t\t\t\tvalue: undefined,\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfilter(item, value) {\r\n\t\treturn item.options.indexOf(value) !== -1;\r\n\t}\r\n\r\n\tmatch(item) {\r\n\t\tlet match;\r\n\t\tif (this.mode === FilterMode.OR) {\r\n\t\t\tmatch = this.values.length ? false : true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match || this.filter(item, value);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tmatch = true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match && this.filter(item, value);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn match;\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tif (this.mode === FilterMode.SELECT || this.mode === FilterMode.QUERY) {\r\n\t\t\treturn this.placeholder || this.label;\r\n\t\t} else {\r\n\t\t\treturn this.label;\r\n\t\t}\r\n\t}\r\n\r\n\thas(item) {\r\n\t\treturn this.values.indexOf(item.value) !== -1;\r\n\t}\r\n\r\n\tset(item) {\r\n\t\tif (this.mode === FilterMode.QUERY) {\r\n\t\t\tthis.values = item ? [item] : [];\r\n\t\t\tthis.placeholder = item;\r\n\t\t} else {\r\n\t\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\t\tthis.values = [];\r\n\t\t\t}\r\n\t\t\tconst index = this.values.indexOf(item.value);\r\n\t\t\tif (index === -1) {\r\n\t\t\t\tif (item.value !== undefined) {\r\n\t\t\t\t\tthis.values.push(item.value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\t\tthis.placeholder = item.label;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// console.log('FilterItem.set', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\tremove(item) {\r\n\t\tconst index = this.values.indexOf(item.value);\r\n\t\tif (index !== -1) {\r\n\t\t\tthis.values.splice(index, 1);\r\n\t\t}\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst first = this.options[0];\r\n\t\t\tthis.placeholder = first.label;\r\n\t\t}\r\n\t\t// console.log('FilterItem.remove', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\ttoggle(item) {\r\n\t\tif (this.has(item)) {\r\n\t\t\tthis.remove(item);\r\n\t\t} else {\r\n\t\t\tthis.set(item);\r\n\t\t}\r\n\t}\r\n\r\n\tclear() {\r\n\t\tthis.values = [];\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst first = this.options[0];\r\n\t\t\tthis.placeholder = first.label;\r\n\t\t}\r\n\t\tthis.change$.next();\r\n\t}\r\n}\r\n","import { merge } from 'rxjs';\r\nimport { map, tap } from 'rxjs/operators';\r\nimport { LocationService } from '../location/location.service';\r\nimport { FilterItem } from './filter-item';\r\n\r\nexport class FilterService {\r\n\r\n\tconstructor(options, initialParams, callback) {\r\n\t\tconst filters = {};\r\n\t\tif (options) {\r\n\t\t\tObject.keys(options).forEach(key => {\r\n\t\t\t\tconst filter = new FilterItem(options[key]);\r\n\t\t\t\tif (typeof callback === 'function') {\r\n\t\t\t\t\tcallback(key, filter);\r\n\t\t\t\t}\r\n\t\t\t\tfilters[key] = filter;\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.filters = filters;\r\n\t\tthis.deserialize(this.filters, initialParams);\r\n\t}\r\n\r\n\tgetParamsCount(params) {\r\n\t\tif (params) {\r\n\t\t\tconst paramsCount = Object.keys(params).reduce((p, c, i) => {\r\n\t\t\t\tconst values = params[c];\r\n\t\t\t\treturn p + (values ? values.length : 0);\r\n\t\t\t}, 0);\r\n\t\t\treturn paramsCount;\r\n\t\t} else {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t}\r\n\r\n\tdeserialize(filters, initialParams) {\r\n\t\tlet params;\r\n\t\tif (initialParams && this.getParamsCount(initialParams)) {\r\n\t\t\tparams = initialParams;\r\n\t\t}\r\n\t\tconst locationParams = LocationService.deserialize('filters');\r\n\t\tif (locationParams && this.getParamsCount(locationParams)) {\r\n\t\t\tparams = locationParams;\r\n\t\t}\r\n\t\tif (params) {\r\n\t\t\tObject.keys(filters).forEach(key => {\r\n\t\t\t\tfilters[key].values = params[key] || [];\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn filters;\r\n\t}\r\n\r\n\tserialize(filters) {\r\n\t\tlet params = {};\r\n\t\tlet any = false;\r\n\t\tObject.keys(filters).forEach(x => {\r\n\t\t\tconst filter = filters[x];\r\n\t\t\tif (filter.value !== null) {\r\n\t\t\t\tparams[x] = filter.values;\r\n\t\t\t\tany = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (!any) {\r\n\t\t\tparams = null;\r\n\t\t}\r\n\t\t// console.log('ReferenceCtrl.serialize', params);\r\n\t\tLocationService.serialize('filters', params);\r\n\t\treturn params;\r\n\t}\r\n\r\n\titems$(items) {\r\n\t\tconst filters = this.filters;\r\n\t\tconst changes = Object.keys(filters).map(key => filters[key].change$);\r\n\t\treturn merge(...changes).pipe(\r\n\t\t\t// tap(() => console.log(filters)),\r\n\t\t\ttap(() => this.serialize(filters)),\r\n\t\t\tmap(() => this.filterItems(items)),\r\n\t\t\ttap(() => this.updateFilterStates(filters, items))\r\n\t\t);\r\n\t}\r\n\r\n\tfilterItems(items, skipFilter) {\r\n\t\tconst filters = Object.keys(this.filters).map((x) => this.filters[x]).filter(x => x.value !== null);\r\n\t\titems = items.filter(item => {\r\n\t\t\tlet has = true;\r\n\t\t\tfilters.forEach(filter => {\r\n\t\t\t\tif (filter !== skipFilter) {\r\n\t\t\t\t\thas = has && filter.match(item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn has;\r\n\t\t});\r\n\t\treturn items;\r\n\t}\r\n\r\n\tupdateFilterStates(filters, items) {\r\n\t\tObject.keys(filters).forEach(x => {\r\n\t\t\tconst filter = filters[x];\r\n\t\t\tconst filteredItems = this.filterItems(items, filter);\r\n\t\t\tfilter.options.forEach(option => {\r\n\t\t\t\tlet count = 0;\r\n\t\t\t\tif (option.value) {\r\n\t\t\t\t\tlet i = 0;\r\n\t\t\t\t\twhile (i < filteredItems.length) {\r\n\t\t\t\t\t\tconst item = filteredItems[i];\r\n\t\t\t\t\t\tif (filter.filter(item, option.value)) {\r\n\t\t\t\t\t\t\tcount++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ti++;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcount = filteredItems.length;\r\n\t\t\t\t}\r\n\t\t\t\toption.count = count;\r\n\t\t\t\toption.disabled = count === 0;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tlet filter;\r\n\t\tObject.keys(this.filters).forEach(x => {\r\n\t\t\tfilter = this.filters[x];\r\n\t\t\tfilter.values = [];\r\n\t\t});\r\n\t\tif (filter) {\r\n\t\t\tfilter.change$.next();\r\n\t\t}\r\n\t}\r\n}\r\n","\r\nexport class FormService {\r\n\r\n\tstatic toSelectOptions(options) {\r\n\t\toptions = options.slice().map(x => ({ id: x.value, name: x.label }));\r\n\t\toptions.unshift({ id: null, name: 'select' });\r\n\t\treturn options;\r\n\t}\r\n\r\n}\r\n","import { fromEvent, ReplaySubject } from 'rxjs';\r\nimport { delay, switchMap } from 'rxjs/operators';\r\n\r\nexport class LocomotiveScrollService {\r\n\r\n\tstatic scroll$ = new ReplaySubject(1);\r\n\tstatic scroll(scroll) {\r\n\t\t// console.log('LocomotiveScrollService.scroll', scroll);\r\n\t\tthis.scroll$.next(scroll);\r\n\t}\r\n\r\n\tstatic init(node, options) {\r\n\t\toptions = Object.assign({\r\n\t\t\tuseKeyboard: true,\r\n\t\t\tsmoothMobile: true,\r\n\t\t\tinertia: 0.5,\r\n\t\t\t// name:'scroll',\r\n\t\t\t// offset: [0,0], // bottom top\r\n\t\t\t// repeat: false,\r\n\t\t\tsmooth: true,\r\n\t\t\t// initPosition: { x: 0, y: 0 }\r\n\t\t\t// direction: 'vertical',\r\n\t\t\tlerp: 0.01,\r\n\t\t\tgetDirection: true, // add direction to scroll event\r\n\t\t\tgetSpeed: true, // add speed to scroll event\r\n\t\t\t// class: 'is-inview',\r\n\t\t\tinitClass: 'has-scroll-init',\r\n\t\t\tscrollingClass: 'has-scroll-scrolling',\r\n\t\t\tdraggingClass: 'has-scroll-dragging',\r\n\t\t\tsmoothClass: 'has-scroll-smooth',\r\n\t\t\tscrollbarContainer: false,\r\n\t\t\tscrollbarClass: 'c-scrollbar',\r\n\t\t\tmultiplier: 1,\r\n\t\t\tfirefoxMultiplier: 50,\r\n\t\t\ttouchMultiplier: 2,\r\n\t\t\tscrollFromAnywhere: true,\r\n\t\t\tgestureDirection: 'vertical',\r\n\t\t\treloadOnContextChange: false,\r\n\t\t\tresetNativeScroll: true,\r\n\t\t}, options, {\r\n\t\t\tel: node,\r\n\t\t});\r\n\t\tif (this.useLocomotiveScroll()) {\r\n\t\t\tconst instance = new LocomotiveScroll(options);\r\n\t\t\tLocomotiveScrollService.instance = instance;\r\n\t\t\treturn instance;\r\n\t\t} else {\r\n\t\t\tdocument.querySelector('html').classList.add('has-scroll-init');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic useLocomotiveScroll() {\r\n\t\treturn window.innerWidth >= 768 && !this.isMacLike();\r\n\t}\r\n\r\n\tstatic isMacLike() {\r\n\t\tconst isMacLike = /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform);\r\n\t\treturn isMacLike;\r\n\t}\r\n\r\n\tstatic isIOS() {\r\n\t\tconst isIOS = /(iPhone|iPod|iPad)/i.test(navigator.platform);\r\n\t\treturn isIOS;\r\n\t}\r\n\r\n\tstatic isMacOs() {\r\n\t\tconst isMacOs = navigator.platform.toLowerCase().indexOf('mac') >= 0;\r\n\t\treturn isMacOs;\r\n\t}\r\n\r\n\tstatic isSafari() {\r\n\t\tconst isSafari = navigator.vendor.match(/apple/i) &&\r\n\t\t\t!navigator.userAgent.match(/crios/i) &&\r\n\t\t\t!navigator.userAgent.match(/fxios/i);\r\n\t\treturn isSafari;\r\n\t}\r\n\r\n\tstatic init$(node) {\r\n\t\treturn fromEvent(window, 'load').pipe(\r\n\t\t\tdelay(1),\r\n\t\t\tswitchMap(_ => {\r\n\t\t\t\t// setTimeout(() => {\r\n\t\t\t\tconst instance = LocomotiveScrollService.init(node);\r\n\t\t\t\tif (instance) {\r\n\t\t\t\t\tinstance.on('scroll', instance => {\r\n\t\t\t\t\t\tLocomotiveScrollService.scroll(instance);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst event = { direction: null, scroll: { x: 0, y: 0 }, speed: 0 };\r\n\t\t\t\t\tconst body = document.querySelector('body');\r\n\t\t\t\t\tlet previousY = body.scrollTop; // window.pageYOffset; // body.scrollTop;\r\n\t\t\t\t\tbody.addEventListener('scroll', () => {\r\n\t\t\t\t\t\tconst y = body.scrollTop; // window.pageYOffset; // body.scrollTop;\r\n\t\t\t\t\t\tconst direction = y > previousY ? 'down' : 'up';\r\n\t\t\t\t\t\t// console.log('scroll', y, direction);\r\n\t\t\t\t\t\tpreviousY = y;\r\n\t\t\t\t\t\tevent.direction = direction;\r\n\t\t\t\t\t\tevent.scroll.y = y;\r\n\t\t\t\t\t\tLocomotiveScrollService.scroll(event);\r\n\t\t\t\t\t}, true);\r\n\t\t\t\t}\r\n\t\t\t\treturn LocomotiveScrollService.scroll$;\r\n\t\t\t\t// }, 1);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic update() {\r\n\t\tif (this.instance) {\r\n\t\t\tthis.instance.update();\r\n\t\t}\r\n\t}\r\n\r\n\tstatic stop() {\r\n\t\tif (this.instance) {\r\n\t\t\tthis.instance.stop();\r\n\t\t}\r\n\t}\r\n\r\n\tstatic start() {\r\n\t\tif (this.instance) {\r\n\t\t\tthis.instance.start();\r\n\t\t}\r\n\t}\r\n\r\n\tstatic scrollTo(target, options) {\r\n\t\tif (this.instance) {\r\n\t\t\tthis.instance.scrollTo(target, options);\r\n\t\t} else {\r\n\t\t\ttarget.scrollIntoView();\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { ApiService } from '../../shared/api/api.service';\r\n\r\nexport class AmbienceService {\r\n\r\n\tstatic all$() {\r\n\t\treturn ApiService.get$('/ambience/all.json');\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\treturn ApiService.get$('/ambience/filters.json');\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\nimport { FormControl, FormGroup } from 'rxcomp-form';\nimport { combineLatest } from 'rxjs';\nimport { first, takeUntil } from 'rxjs/operators';\nimport { FilterMode } from '../../shared/filter/filter-item';\nimport { FilterService } from '../../shared/filter/filter.service';\nimport { FormService } from '../../shared/forms/form.service';\nimport { LocomotiveScrollService } from '../../shared/locomotive-scroll/locomotive-scroll.service';\nimport { AmbienceService } from './ambience.service';\n\nexport class AmbienceComponent extends Component {\n\n\tonInit() {\n\t\tthis.ambienceId = this.ambienceId || null;\n\t\tthis.items = [];\n\t\tthis.filteredItems = [];\n\t\tthis.filters = {};\n\t\tconst form = this.form = new FormGroup({\n\t\t\tambience: new FormControl(null),\n\t\t\tmaterial: new FormControl(null),\n\t\t\tdesigner: new FormControl(null),\n\t\t\tsearch: new FormControl(null),\n\t\t});\n\t\tconst controls = this.controls = form.controls;\n\t\tform.changes$.pipe(\n\t\t\ttakeUntil(this.unsubscribe$)\n\t\t).subscribe((_) => {\n\t\t\t// console.log('AmbienceComponent.changes$', form.value);\n\t\t\tthis.setFilterByKeyAndValue('ambience', form.value.ambience);\n\t\t\tthis.setFilterByKeyAndValue('material', form.value.material);\n\t\t\tthis.setFilterByKeyAndValue('designer', form.value.designer);\n\t\t\tthis.setFilterByKeyAndValue('search', form.value.search);\n\t\t\tthis.pushChanges();\n\t\t});\n\t\tthis.load$().pipe(\n\t\t\tfirst(),\n\t\t).subscribe(data => {\n\t\t\tthis.items = data[0];\n\t\t\tthis.filters = data[1];\n\t\t\tcontrols.ambience.options = FormService.toSelectOptions(this.filters.ambience.options);\n\t\t\tcontrols.material.options = FormService.toSelectOptions(this.filters.material.options);\n\t\t\tcontrols.designer.options = FormService.toSelectOptions(this.filters.designer.options);\n\t\t\tthis.onLoad();\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\tload$() {\n\t\treturn combineLatest([\n\t\t\tAmbienceService.all$(),\n\t\t\tAmbienceService.filters$(),\n\t\t]);\n\t}\n\n\tonLoad() {\n\t\tconst items = this.items;\n\t\tconst filters = this.filters;\n\t\tObject.keys(filters).forEach(key => {\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\n\t\t});\n\t\tconst initialParams = {};\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\n\t\t\tswitch (key) {\n\t\t\t\tdefault:\n\t\t\t\t\tfilter.filter = (item, value) => {\n\t\t\t\t\t\tswitch (key) {\n\t\t\t\t\t\t\tcase 'ambience':\n\t\t\t\t\t\t\t\treturn item.ambience.id === value;\n\t\t\t\t\t\t\tcase 'material':\n\t\t\t\t\t\t\t\treturn item.materials.indexOf(value) !== -1;\n\t\t\t\t\t\t\tcase 'designer':\n\t\t\t\t\t\t\t\treturn item.designers.indexOf(value) !== -1;\n\t\t\t\t\t\t\tcase 'search':\n\t\t\t\t\t\t\t\treturn item.title.toLowerCase().indexOf(value.toLowerCase()) !== -1\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t}\n\t\t});\n\t\tthis.filterService = filterService;\n\t\tthis.filters = filterService.filters;\n\t\tconst ambience = this.ambienceId ? this.ambienceId : (this.filters.ambience.values.length ? this.filters.ambience.values[0] : null);\n\t\tconst material = this.filters.material.values.length ? this.filters.material.values[0] : null;\n\t\tconst designer = this.filters.designer.values.length ? this.filters.designer.values[0] : null;\n\t\tconst search = this.filters.search.values.length ? this.filters.search.values[0] : null;\n\t\tthis.form.patch({ ambience, material, designer, search });\n\t\tfilterService.items$(items).pipe(\n\t\t\ttakeUntil(this.unsubscribe$),\n\t\t).subscribe(filteredItems => {\n\t\t\tthis.filteredItems = filteredItems;\n\t\t\tthis.pushChanges();\n\t\t\tLocomotiveScrollService.update();\n\t\t\t// console.log('AmbienceComponent.filteredItems', filteredItems.length);\n\t\t});\n\t}\n\n\tsetFilterByKeyAndValue(key, value) {\n\t\tconst filter = this.filters[key];\n\t\tif (filter) {\n\t\t\tif (filter.mode === FilterMode.QUERY) {\n\t\t\t\tfilter.set(value);\n\t\t\t} else {\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\n\t\t\t\t// console.log(filter.options, option);\n\t\t\t\tif (option) {\n\t\t\t\t\tfilter.set(option);\n\t\t\t\t} else {\n\t\t\t\t\tfilter.clear();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonSearch(model) {\n\t\t// console.log('AmbienceComponent.onSearch', this.form.value);\n\t\tthis.setFilterByKeyAndValue('ambience', this.form.value.ambience);\n\t\tthis.setFilterByKeyAndValue('material', this.form.value.material);\n\t\tthis.setFilterByKeyAndValue('designer', this.form.value.designer);\n\t\tthis.setFilterByKeyAndValue('search', this.form.value.search);\n\t\tthis.pushChanges();\n\t}\n\n\tclearFilter(event, filter) {\n\t\tevent.preventDefault();\n\t\tevent.stopImmediatePropagation();\n\t\tfilter.clear();\n\t\tthis.pushChanges();\n\t}\n}\n\nAmbienceComponent.meta = {\n\tselector: '[ambience]',\n\tinputs: ['ambienceId'],\n};\n","import { ApiService } from '../../shared/api/api.service';\r\n\r\nexport class AteliersAndStoresService {\r\n\r\n\tstatic all$() {\r\n\t\treturn ApiService.get$('/ateliers-and-stores/all.json');\r\n\t}\r\n\r\n\tstatic ateliers$() {\r\n\t\treturn ApiService.get$('/ateliers-and-stores/ateliers.json');\r\n\t}\r\n\r\n\tstatic stores$() {\r\n\t\treturn ApiService.get$('/ateliers-and-stores/stores.json');\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\treturn ApiService.get$('/ateliers-and-stores/filters.json');\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\nimport { FormControl, FormGroup } from 'rxcomp-form';\nimport { combineLatest } from 'rxjs';\nimport { first, takeUntil } from 'rxjs/operators';\nimport { FilterMode } from '../../shared/filter/filter-item';\nimport { FilterService } from '../../shared/filter/filter.service';\nimport { FormService } from '../../shared/forms/form.service';\nimport { LocomotiveScrollService } from '../../shared/locomotive-scroll/locomotive-scroll.service';\nimport { AteliersAndStoresService } from './ateliers-and-stores.service';\n\nexport class AteliersAndStoresComponent extends Component {\n\n\tonInit() {\n\t\tthis.types = {\n\t\t\tAtelier: 1,\n\t\t\tStore: 2,\n\t\t};\n\t\tthis.items = [];\n\t\tthis.filteredItems = [];\n\t\tthis.filteredAteliers = [];\n\t\tthis.filteredStores = [];\n\t\tthis.filters = {};\n\t\tconst form = this.form = new FormGroup({\n\t\t\tcountry: new FormControl(null),\n\t\t\tsearch: new FormControl(null),\n\t\t});\n\t\tconst controls = this.controls = form.controls;\n\t\tform.changes$.pipe(\n\t\t\ttakeUntil(this.unsubscribe$)\n\t\t).subscribe((_) => {\n\t\t\t// console.log('AteliersAndStoresComponent.changes$', form.value);\n\t\t\tthis.setFilterByKeyAndValue('country', form.value.country);\n\t\t\tthis.setFilterByKeyAndValue('search', form.value.search);\n\t\t\tthis.pushChanges();\n\t\t});\n\t\tthis.load$().pipe(\n\t\t\tfirst(),\n\t\t).subscribe(data => {\n\t\t\tthis.items = data[0];\n\t\t\tthis.filters = data[1];\n\t\t\tcontrols.country.options = FormService.toSelectOptions(this.filters.country.options);\n\t\t\tthis.onLoad();\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\tload$() {\n\t\treturn combineLatest([\n\t\t\tAteliersAndStoresService.all$(),\n\t\t\tAteliersAndStoresService.filters$(),\n\t\t]);\n\t}\n\n\tonLoad() {\n\t\tconst items = this.items;\n\t\tconst filters = this.filters;\n\t\tObject.keys(filters).forEach(key => {\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\n\t\t});\n\t\tconst initialParams = {};\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\n\t\t\tswitch (key) {\n\t\t\t\tdefault:\n\t\t\t\t\tfilter.filter = (item, value) => {\n\t\t\t\t\t\tswitch (key) {\n\t\t\t\t\t\t\tcase 'country':\n\t\t\t\t\t\t\t\treturn item.country.id === value;\n\t\t\t\t\t\t\tcase 'search':\n\t\t\t\t\t\t\t\treturn item.title.toLowerCase().indexOf(value.toLowerCase()) !== -1 || item.country.name.toLowerCase().indexOf(value.toLowerCase()) !== -1\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t}\n\t\t});\n\t\tthis.filterService = filterService;\n\t\tthis.filters = filterService.filters;\n\t\tconst country = this.filters.country.values.length ? this.filters.country.values[0] : null;\n\t\tconst search = this.filters.search.values.length ? this.filters.search.values[0] : null;\n\t\tthis.form.patch({ country, search });\n\t\tfilterService.items$(items).pipe(\n\t\t\ttakeUntil(this.unsubscribe$),\n\t\t).subscribe(filteredItems => {\n\t\t\tthis.filteredItems = filteredItems;\n\t\t\tthis.filteredAteliers = filteredItems.filter(x => x.type === this.types.Atelier);\n\t\t\tthis.filteredStores = filteredItems.filter(x => x.type === this.types.Store);\n\t\t\tthis.pushChanges();\n\t\t\tLocomotiveScrollService.update();\n\t\t\t// console.log('AteliersAndStoresComponent.filteredItems', filteredItems.length);\n\t\t});\n\t}\n\n\tsetFilterByKeyAndValue(key, value) {\n\t\tconst filter = this.filters[key];\n\t\tif (filter) {\n\t\t\tif (filter.mode === FilterMode.QUERY) {\n\t\t\t\tfilter.set(value);\n\t\t\t} else {\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\n\t\t\t\t// console.log(filter.options, option);\n\t\t\t\tif (option) {\n\t\t\t\t\tfilter.set(option);\n\t\t\t\t} else {\n\t\t\t\t\tfilter.clear();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonSearch(model) {\n\t\t// console.log('AteliersAndStoresComponent.onSearch', this.form.value);\n\t\tthis.setFilterByKeyAndValue('country', this.form.value.country);\n\t\tthis.setFilterByKeyAndValue('search', this.form.value.search);\n\t\tthis.pushChanges();\n\t}\n\n\tclearFilter(event, filter) {\n\t\tevent.preventDefault();\n\t\tevent.stopImmediatePropagation();\n\t\tfilter.clear();\n\t\tthis.pushChanges();\n\t}\n}\n\nAteliersAndStoresComponent.meta = {\n\tselector: '[ateliers-and-stores]',\n};\n","function push_(event) {\r\n\tconst dataLayer = window.dataLayer || [];\r\n\tdataLayer.push(event);\r\n\tconsole.log('GtmService.dataLayer', event);\r\n}\r\n\r\nexport class GtmService {\r\n\r\n\tstatic push(event) {\r\n\t\treturn push_(event);\r\n\t}\r\n\r\n}\r\n","import { ApiService } from '../../shared/api/api.service';\r\n\r\nexport class ContactsService {\r\n\r\n\tstatic data$() {\r\n\t\treturn ApiService.get$('/contacts/data.json');\r\n\t}\r\n\r\n\tstatic submit$() {\r\n\t\treturn ApiService.post$('/contacts/submit.json');\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\nimport { first, takeUntil, tap } from 'rxjs/operators';\nimport { FormService } from '../../shared/forms/form.service';\nimport { GtmService } from '../../shared/gtm/gtm.service';\nimport { LocomotiveScrollService } from '../../shared/locomotive-scroll/locomotive-scroll.service';\nimport { ContactsService } from './contacts.service';\n\nexport class ContactsComponent extends Component {\n\n\tonInit() {\n\t\tthis.error = null;\n\t\tthis.success = false;\n\t\tconst form = this.form = new FormGroup({\n\t\t\tfirstName: new FormControl(null, [Validators.RequiredValidator()]),\n\t\t\tlastName: new FormControl(null, [Validators.RequiredValidator()]),\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\n\t\t\ttelephone: new FormControl(null),\n\t\t\tcountry: new FormControl(null, [Validators.RequiredValidator()]),\n\t\t\tcity: new FormControl(null, [Validators.RequiredValidator()]),\n\t\t\tmessage: new FormControl(null),\n\t\t\tprivacy: new FormControl(null, [Validators.RequiredValidator()]),\n\t\t\tnewsletter: new FormControl(this.flag),\n\t\t\tcheckRequest: window.antiforgery,\n\t\t\tcheckField: '',\n\t\t});\n\t\tconst controls = this.controls = form.controls;\n\t\tform.changes$.pipe(\n\t\t\ttakeUntil(this.unsubscribe$)\n\t\t).subscribe((_) => {\n\t\t\tthis.pushChanges();\n\t\t\tLocomotiveScrollService.update();\n\t\t});\n\t\tthis.load$().pipe(\n\t\t\tfirst(),\n\t\t).subscribe();\n\t}\n\n\tload$() {\n\t\treturn ContactsService.data$().pipe(\n\t\t\ttap(data => {\n\t\t\t\tconst controls = this.controls;\n\t\t\t\tcontrols.country.options = FormService.toSelectOptions(data.country.options);\n\t\t\t\tthis.pushChanges();\n\t\t\t})\n\t\t);\n\t}\n\n\ttest() {\n\t\tconst form = this.form;\n\t\tconst controls = this.controls;\n\t\tconst country = controls.country.options.length > 1 ? controls.country.options[1].id : null;\n\t\tform.patch({\n\t\t\tfirstName: 'Jhon',\n\t\t\tlastName: 'Appleseed',\n\t\t\temail: 'jhonappleseed@gmail.com',\n\t\t\ttelephone: '0721 411112',\n\t\t\tcountry: country,\n\t\t\tcity: 'Pesaro',\n\t\t\tmessage: 'Hi!',\n\t\t\tprivacy: true,\n\t\t\tcheckRequest: window.antiforgery,\n\t\t\tcheckField: ''\n\t\t});\n\t}\n\n\treset() {\n\t\tconst form = this.form;\n\t\tform.reset();\n\t}\n\n\tonSubmit(model) {\n\t\tconst form = this.form;\n\t\tconsole.log('ContactsComponent.onSubmit', form.value);\n\t\t// console.log('ContactsComponent.onSubmit', 'form.valid', valid);\n\t\tif (form.valid) {\n\t\t\t// console.log('ContactsComponent.onSubmit', form.value);\n\t\t\tform.submitted = true;\n\t\t\tContactsService.submit$(form.value).pipe(\n\t\t\t\tfirst(),\n\t\t\t).subscribe(_ => {\n\t\t\t\tthis.success = true;\n\t\t\t\tform.reset();\n\t\t\t\tGtmService.push({\n\t\t\t\t\t'event': \"Contact\",\n\t\t\t\t\t'form_name': \"Contatti\"\n\t\t\t\t});\n\t\t\t\tif (form.value.newsletter) {\n\t\t\t\t\tGtmService.push({\n\t\t\t\t\t\t'event': \"ContactNewsletter\",\n\t\t\t\t\t\t'form_name': \"ContattiNewsletter\"\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, error => {\n\t\t\t\tconsole.log('ContactsComponent.error', error);\n\t\t\t\tthis.error = error;\n\t\t\t\tthis.pushChanges();\n\t\t\t\tLocomotiveScrollService.update();\n\t\t\t});\n\t\t} else {\n\t\t\tform.touched = true;\n\t\t}\n\t}\n}\n\nContactsComponent.meta = {\n\tselector: '[contacts]',\n};\n","import { ApiService } from '../../shared/api/api.service';\r\n\r\nexport class DesignersService {\r\n\r\n\tstatic all$() {\r\n\t\treturn ApiService.get$('/designers/all.json');\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\treturn ApiService.get$('/designers/filters.json');\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\nimport { FormControl, FormGroup } from 'rxcomp-form';\nimport { combineLatest } from 'rxjs';\nimport { first, takeUntil } from 'rxjs/operators';\nimport { FilterMode } from '../../shared/filter/filter-item';\nimport { FilterService } from '../../shared/filter/filter.service';\nimport { FormService } from '../../shared/forms/form.service';\nimport { LocomotiveScrollService } from '../../shared/locomotive-scroll/locomotive-scroll.service';\nimport { DesignersService } from './designers.service';\n\nexport class DesignersComponent extends Component {\n\n\tonInit() {\n\t\tthis.items = [];\n\t\tthis.filteredItems = [];\n\t\tthis.filters = {};\n\t\tconst form = this.form = new FormGroup({\n\t\t\tcategory: new FormControl(null),\n\t\t\tsearch: new FormControl(null),\n\t\t});\n\t\tconst controls = this.controls = form.controls;\n\t\tform.changes$.pipe(\n\t\t\ttakeUntil(this.unsubscribe$)\n\t\t).subscribe((_) => {\n\t\t\t// console.log('DesignersComponent.changes$', form.value);\n\t\t\tthis.setFilterByKeyAndValue('category', form.value.category);\n\t\t\tthis.setFilterByKeyAndValue('search', form.value.search);\n\t\t\tthis.pushChanges();\n\t\t});\n\t\tthis.load$().pipe(\n\t\t\tfirst(),\n\t\t).subscribe(data => {\n\t\t\tthis.items = data[0];\n\t\t\tthis.filters = data[1];\n\t\t\tcontrols.category.options = FormService.toSelectOptions(this.filters.category.options);\n\t\t\tthis.onLoad();\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\tload$() {\n\t\treturn combineLatest([\n\t\t\tDesignersService.all$(),\n\t\t\tDesignersService.filters$(),\n\t\t]);\n\t}\n\n\tonLoad() {\n\t\tconst items = this.items;\n\t\tconst filters = this.filters;\n\t\tObject.keys(filters).forEach(key => {\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\n\t\t});\n\t\tconst initialParams = {};\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\n\t\t\tswitch (key) {\n\t\t\t\tdefault:\n\t\t\t\t\tfilter.filter = (item, value) => {\n\t\t\t\t\t\tswitch (key) {\n\t\t\t\t\t\t\tcase 'category':\n\t\t\t\t\t\t\t\treturn item.category.id === value;\n\t\t\t\t\t\t\tcase 'search':\n\t\t\t\t\t\t\t\treturn item.name.toLowerCase().indexOf(value.toLowerCase()) !== -1\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t}\n\t\t});\n\t\tthis.filterService = filterService;\n\t\tthis.filters = filterService.filters;\n\t\tconst category = this.filters.category.values.length ? this.filters.category.values[0] : null;\n\t\tconst search = this.filters.search.values.length ? this.filters.search.values[0] : null;\n\t\tthis.form.patch({ category, search });\n\t\tfilterService.items$(items).pipe(\n\t\t\ttakeUntil(this.unsubscribe$),\n\t\t).subscribe(filteredItems => {\n\t\t\tthis.filteredItems = filteredItems;\n\t\t\tthis.pushChanges();\n\t\t\tLocomotiveScrollService.update();\n\t\t\t// console.log('DesignersComponent.filteredItems', filteredItems.length);\n\t\t});\n\t}\n\n\tsetFilterByKeyAndValue(key, value) {\n\t\tconst filter = this.filters[key];\n\t\tif (filter) {\n\t\t\tif (filter.mode === FilterMode.QUERY) {\n\t\t\t\tfilter.set(value);\n\t\t\t} else {\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\n\t\t\t\t// console.log(filter.options, option);\n\t\t\t\tif (option) {\n\t\t\t\t\tfilter.set(option);\n\t\t\t\t} else {\n\t\t\t\t\tfilter.clear();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonSearch(model) {\n\t\t// console.log('DesignersComponent.onSearch', this.form.value);\n\t\tthis.setFilterByKeyAndValue('category', this.form.value.category);\n\t\tthis.setFilterByKeyAndValue('search', this.form.value.search);\n\t\tthis.pushChanges();\n\t}\n\n\tclearFilter(event, filter) {\n\t\tevent.preventDefault();\n\t\tevent.stopImmediatePropagation();\n\t\tfilter.clear();\n\t\tthis.pushChanges();\n\t}\n}\n\nDesignersComponent.meta = {\n\tselector: '[designers]',\n};\n","import { Component, getContext } from 'rxcomp';\nimport { first, takeUntil } from 'rxjs/operators';\nimport { environment } from '../../environment';\nimport { LocomotiveScrollService } from '../../shared/locomotive-scroll/locomotive-scroll.service';\nimport { ModalResolveEvent, ModalService } from '../../shared/modal/modal.service';\nimport { UserService } from '../user/user.service';\n\nexport const HeaderMode = {\n\tIDLE: 'idle',\n\tMENU: 'menu',\n\tSEARCH: 'search',\n\tCART: 'cart',\n}\n\nexport class HeaderComponent extends Component {\n\n\tdirection_ = null;\n\tget direction() {\n\t\treturn this.direction_;\n\t}\n\tset direction(direction) {\n\t\tif (this.direction_ !== direction) {\n\t\t\tconst { node } = getContext(this);\n\t\t\tnode.classList.remove(`scrolling-${this.direction_}`);\n\t\t\tnode.classList.add(`scrolling-${direction}`);\n\t\t\tthis.direction_ = direction;\n\t\t}\n\t}\n\n\tscrolled_ = null;\n\tget scrolled() {\n\t\treturn this.scrolled_;\n\t}\n\tset scrolled(scrolled) {\n\t\tif (this.scrolled_ !== scrolled) {\n\t\t\tthis.scrolled_ = scrolled;\n\t\t\tconst { node } = getContext(this);\n\t\t\tscrolled ? node.classList.add(`scrolled`) : node.classList.remove(`scrolled`);\n\t\t}\n\t}\n\n\tonInit() {\n\t\tthis.show = HeaderMode.IDLE;\n\t\tconst pictogram = document.querySelector('.page > .pictogram');\n\t\tLocomotiveScrollService.scroll$.pipe(\n\t\t\ttakeUntil(this.unsubscribe$),\n\t\t).subscribe((event) => {\n\t\t\tthis.direction = event.direction;\n\t\t\tthis.scrolled = event.scroll.y > 100;\n\t\t\tconst opacity = 0.1 - 0.1 * Math.min(1, Math.max(0, (event.scroll.y - window.innerHeight * 3) / window.innerHeight / 3));\n\t\t\tgsap.set(pictogram, { opacity });\n\t\t\t// console.log('HeaderComponent', event.scroll.y, event.direction, event.speed);\n\t\t});\n\t\tthis.user = null;\n\t\tUserService.me$().pipe(\n\t\t\ttakeUntil(this.unsubscribe$),\n\t\t).subscribe(user => {\n\t\t\tthis.user = user;\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\tonLogin() {\n\t\tModalService.open$({ src: environment.template.modal.userModal, data: { view: 1 } }).pipe(\n\t\t\ttakeUntil(this.unsubscribe$)\n\t\t).subscribe(event => {\n\t\t\tconsole.log('HeaderComponent.onLogin', event);\n\t\t\tif (event instanceof ModalResolveEvent) {\n\t\t\t\twindow.location.href = environment.slug.reservedArea;\n\t\t\t}\n\t\t});\n\t}\n\n\tonLogout() {\n\t\tUserService.signout$().pipe(\n\t\t\tfirst(),\n\t\t).subscribe();\n\t}\n\n\tonToggleMenu() {\n\t\tthis.show = this.show === HeaderMode.MENU ? HeaderMode.IDLE : HeaderMode.MENU;\n\t\tthis.pushChanges();\n\t}\n\n\tonToggleSearch() {\n\t\tthis.show = this.show === HeaderMode.SEARCH ? HeaderMode.IDLE : HeaderMode.SEARCH;\n\t\tthis.pushChanges();\n\t}\n\n\tonToggleCart() {\n\t\tthis.show = this.show === HeaderMode.CART ? HeaderMode.IDLE : HeaderMode.CART;\n\t\tthis.pushChanges();\n\t}\n}\n\nHeaderComponent.meta = {\n\tselector: '[header]',\n};\n","/**\n * Copyright 2019 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface OverlayViewSafe extends google.maps.OverlayView {}\n\n/**\n * Extends an object's prototype by another's.\n *\n * @param type1 The Type to be extended.\n * @param type2 The Type to extend with.\n * @ignore\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction extend(type1: any, type2: any): void {\n  // eslint-disable-next-line prefer-const\n  for (let property in type2.prototype) {\n    type1.prototype[property] = type2.prototype[property];\n  }\n}\n\n/**\n * @ignore\n */\nexport class OverlayViewSafe {\n  constructor() {\n    // MarkerClusterer implements google.maps.OverlayView interface. We use the\n    // extend function to extend MarkerClusterer with google.maps.OverlayView\n    // because it might not always be available when the code is defined so we\n    // look for it at the last possible moment. If it doesn't exist now then\n    // there is no point going ahead :)\n    extend(OverlayViewSafe, google.maps.OverlayView);\n  }\n}\n","/**\n * Copyright 2019 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * This class represents the object for values in the `styles` array passed\n * to the {@link MarkerClusterer} constructor. The element in this array that is used to\n * style the cluster icon is determined by calling the `calculator` function.\n */\nimport { Cluster } from \"./cluster\";\nimport { OverlayViewSafe } from \"./overlay-view-safe\";\n\n/**\n *\n * @hidden\n */\nfunction toCssText(styles: { [key: string]: string }): string {\n  return Object.keys(styles)\n    .reduce((acc, key) => {\n      if (styles[key]) {\n        acc.push(key + \":\" + styles[key]);\n      }\n      return acc;\n    }, [])\n    .join(\";\");\n}\n\n/**\n *\n * @hidden\n */\nfunction coercePixels(pixels: number): string {\n  return pixels ? pixels + \"px\" : undefined;\n}\n\nexport interface ClusterIconStyle {\n  /** The URL of the cluster icon image file. If not set, img element will not be created */\n  url?: string;\n  /** The name of the CSS class defining styles for the cluster markers. */\n  className?: string;\n  /** Height The display height (in pixels) of the cluster icon. Required. */\n  height: number;\n  /** Width The display width (in pixels) of the cluster icon. Required. */\n  width: number;\n  /**\n   * The position (in pixels) from the center of the cluster icon to\n   * where the text label is to be centered and drawn. The format is `[yoffset, xoffset]`\n   * where `yoffset` increases as you go down from center and `xoffset`\n   * increases to the right of center. The default is `[0, 0]`.\n   */\n  anchorText?: [number, number];\n  /**\n   * The anchor position (in pixels) of the cluster icon. This is the\n   * spot on the cluster icon that is to be aligned with the cluster position. The format is\n   * `[yoffset, xoffset]` where `yoffset` increases as you go down and\n   * `xoffset` increases to the right of the top-left corner of the icon. The default\n   * anchor position is the center of the cluster icon.\n   */\n  anchorIcon?: [number, number];\n  /**\n   * The color of the label text shown on the cluster icon.\n   * @default `\"black\"`\n   */\n  textColor?: string;\n  /** The size (in pixels) of the label text shown on the cluster icon.\n   * @default `11`\n   */\n  textSize?: number;\n\n  /** The line height (in pixels) of the label text shown on the cluster icon.\n   * @default the same as cluster icon height\n   */\n  textLineHeight?: number;\n  /**\n   * The value of the CSS `text-decoration`\n   * property for the label text shown on the cluster icon.\n   *\n   * @default `\"none\"`\n   */\n  textDecoration?: string;\n  /**\n   * The value of the CSS `font-weight`\n   * property for the label text shown on the cluster icon.\n   *\n   *  @default `\"bold\"`\n   */\n  fontWeight?: string;\n  /**\n   *  The value of the CSS `font-style`\n   *  property for the label text shown on the cluster icon.\n   *\n   *  @default `\"normal\"`\n   */\n  fontStyle?: string;\n  /**\n   *  The value of the CSS `font-family`\n   *  property for the label text shown on the cluster icon.\n   *  @default `\"Arial,sans-serif\"`\n   */\n  fontFamily?: string;\n  /**\n   * The position of the cluster icon image\n   * within the image defined by `url`. The format is `\"xpos ypos\"`\n   * (the same format as for the CSS `background-position` property). You must set\n   * this property appropriately when the image defined by `url` represents a sprite\n   * containing multiple images. Note that the position <i>must</i> be specified in px units.\n   *\n   * @default `\"0 0\"`\n   */\n  backgroundPosition?: string;\n}\n\n/**\n * @description This is an object containing general information about a cluster icon. This is\n *  the object that a `calculator` function returns.\n */\nexport interface ClusterIconInfo {\n  /**\n   * The text of the label to be shown on the cluster icon.\n   */\n  text: string;\n  /**\n   * The index plus 1 of the element in the `styles`\n   */\n  index: number;\n  /**\n   * The tooltip to display when the mouse moves over the cluster icon.\n   * If this value is `undefined` or `\"\"`, `title` is set to the\n   * value of the `title` property passed to the MarkerClusterer.\n   */\n  title: string;\n  /**\n   * An override for dynamic cluster icon url (if not provided, the component will use the default style icon)\n   */\n  url?: string;\n}\n\n/**\n * A cluster icon.\n */\nexport class ClusterIcon extends OverlayViewSafe {\n  private className_: string;\n  private center_: google.maps.LatLng = null;\n  private div_: HTMLDivElement = null;\n  private sums_: ClusterIconInfo = null;\n  private visible_ = false;\n\n  private style: ClusterIconStyle = null;\n\n  private anchorText_: [number, number];\n  private anchorIcon_: [number, number];\n\n  private boundsChangedListener_: google.maps.MapsEventListener;\n\n  /**\n   * @param cluster_ The cluster with which the icon is to be associated.\n   * @param styles_ An array of {@link ClusterIconStyle} defining the cluster icons\n   *  to use for various cluster sizes.\n   */\n  constructor(private cluster_: Cluster, private styles_: ClusterIconStyle[]) {\n    super();\n\n    this.setMap(cluster_.getMap()); // Note: this causes onAdd to be called\n  }\n\n  /**\n   * Adds the icon to the DOM.\n   */\n  onAdd(): void {\n    let cMouseDownInCluster: boolean;\n    let cDraggingMapByCluster: boolean;\n\n    const mc = this.cluster_.getMarkerClusterer();\n\n    const [major, minor] = google.maps.version.split(\".\");\n\n    const gmVersion = parseInt(major, 10) * 100 + parseInt(minor, 10);\n\n    this.div_ = document.createElement(\"div\");\n    if (this.visible_) {\n      this.show();\n    }\n\n    this.getPanes().overlayMouseTarget.appendChild(this.div_);\n\n    // Fix for Issue 157\n    this.boundsChangedListener_ = google.maps.event.addListener(\n      this.getMap(),\n      \"bounds_changed\",\n      () => {\n        cDraggingMapByCluster = cMouseDownInCluster;\n      }\n    );\n\n    google.maps.event.addDomListener(this.div_, \"mousedown\", () => {\n      cMouseDownInCluster = true;\n      cDraggingMapByCluster = false;\n    });\n\n    // March 1, 2018: Fix for this 3.32 exp bug, https://issuetracker.google.com/issues/73571522\n    // But it doesn't work with earlier releases so do a version check.\n    if (gmVersion >= 332) {\n      // Ugly version-dependent code\n      google.maps.event.addDomListener(this.div_, \"touchstart\", (e: Event) => {\n        e.stopPropagation();\n      });\n    }\n\n    google.maps.event.addDomListener(this.div_, \"click\", (e: Event) => {\n      cMouseDownInCluster = false;\n      if (!cDraggingMapByCluster) {\n        /**\n         * This event is fired when a cluster marker is clicked.\n         * @name MarkerClusterer#click\n         * @param {Cluster} c The cluster that was clicked.\n         * @event\n         */\n        google.maps.event.trigger(mc, \"click\", this.cluster_);\n        google.maps.event.trigger(mc, \"clusterclick\", this.cluster_); // deprecated name\n\n        // The default click handler follows. Disable it by setting\n        // the zoomOnClick property to false.\n        if (mc.getZoomOnClick()) {\n          // Zoom into the cluster.\n          const mz = mc.getMaxZoom();\n          const theBounds = this.cluster_.getBounds();\n          (mc.getMap() as google.maps.Map).fitBounds(theBounds);\n          // There is a fix for Issue 170 here:\n          setTimeout(() => {\n            (mc.getMap() as google.maps.Map).fitBounds(theBounds);\n            // Don't zoom beyond the max zoom level\n            if (mz !== null && mc.getMap().getZoom() > mz) {\n              mc.getMap().setZoom(mz + 1);\n            }\n          }, 100);\n        }\n\n        // Prevent event propagation to the map:\n        e.cancelBubble = true;\n        if (e.stopPropagation) {\n          e.stopPropagation();\n        }\n      }\n    });\n\n    google.maps.event.addDomListener(this.div_, \"mouseover\", () => {\n      /**\n       * This event is fired when the mouse moves over a cluster marker.\n       * @name MarkerClusterer#mouseover\n       * @param {Cluster} c The cluster that the mouse moved over.\n       * @event\n       */\n      google.maps.event.trigger(mc, \"mouseover\", this.cluster_);\n    });\n\n    google.maps.event.addDomListener(this.div_, \"mouseout\", () => {\n      /**\n       * This event is fired when the mouse moves out of a cluster marker.\n       * @name MarkerClusterer#mouseout\n       * @param {Cluster} c The cluster that the mouse moved out of.\n       * @event\n       */\n      google.maps.event.trigger(mc, \"mouseout\", this.cluster_);\n    });\n  }\n\n  /**\n   * Removes the icon from the DOM.\n   */\n  onRemove(): void {\n    if (this.div_ && this.div_.parentNode) {\n      this.hide();\n      google.maps.event.removeListener(this.boundsChangedListener_);\n      google.maps.event.clearInstanceListeners(this.div_);\n      this.div_.parentNode.removeChild(this.div_);\n      this.div_ = null;\n    }\n  }\n\n  /**\n   * Draws the icon.\n   */\n  draw(): void {\n    if (this.visible_) {\n      const pos = this.getPosFromLatLng_(this.center_);\n      this.div_.style.top = pos.y + \"px\";\n      this.div_.style.left = pos.x + \"px\";\n    }\n  }\n\n  /**\n   * Hides the icon.\n   */\n  hide(): void {\n    if (this.div_) {\n      this.div_.style.display = \"none\";\n    }\n    this.visible_ = false;\n  }\n\n  /**\n   * Positions and shows the icon.\n   */\n  show(): void {\n    if (this.div_) {\n      this.div_.className = this.className_;\n      this.div_.style.cssText = this.createCss_(\n        this.getPosFromLatLng_(this.center_)\n      );\n\n      this.div_.innerHTML =\n        (this.style.url ? this.getImageElementHtml() : \"\") +\n        this.getLabelDivHtml();\n\n      if (typeof this.sums_.title === \"undefined\" || this.sums_.title === \"\") {\n        this.div_.title = this.cluster_.getMarkerClusterer().getTitle();\n      } else {\n        this.div_.title = this.sums_.title;\n      }\n      this.div_.style.display = \"\";\n    }\n    this.visible_ = true;\n  }\n\n  private getLabelDivHtml(): string {\n    const mc = this.cluster_.getMarkerClusterer();\n    const ariaLabel = mc.ariaLabelFn(this.sums_.text);\n\n    const divStyle: { [key: string]: string } = {\n      position: \"absolute\",\n      top: coercePixels(this.anchorText_[0]),\n      left: coercePixels(this.anchorText_[1]),\n      color: this.style.textColor,\n      \"font-size\": coercePixels(this.style.textSize),\n      \"font-family\": this.style.fontFamily,\n      \"font-weight\": this.style.fontWeight,\n      \"font-style\": this.style.fontStyle,\n      \"text-decoration\": this.style.textDecoration,\n      \"text-align\": \"center\",\n      width: coercePixels(this.style.width),\n      \"line-height\": coercePixels(this.style.textLineHeight),\n    };\n\n    return `\n<div aria-label=\"${ariaLabel}\" style=\"${toCssText(divStyle)}\" tabindex=\"0\">\n  <span aria-hidden=\"true\">${this.sums_.text}</span>\n</div>\n`;\n  }\n\n  private getImageElementHtml(): string {\n    // NOTE: values must be specified in px units\n    const bp = (this.style.backgroundPosition || \"0 0\").split(\" \");\n    const spriteH = parseInt(bp[0].replace(/^\\s+|\\s+$/g, \"\"), 10);\n    const spriteV = parseInt(bp[1].replace(/^\\s+|\\s+$/g, \"\"), 10);\n\n    let dimensions: { [key: string]: string } = {};\n\n    if (this.cluster_.getMarkerClusterer().getEnableRetinaIcons()) {\n      dimensions = {\n        width: coercePixels(this.style.width),\n        height: coercePixels(this.style.height),\n      };\n    } else {\n      const [Y1, X1, Y2, X2] = [\n        -1 * spriteV,\n        -1 * spriteH + this.style.width,\n        -1 * spriteV + this.style.height,\n        -1 * spriteH,\n      ];\n      dimensions = {\n        clip: `rect(${Y1}px, ${X1}px, ${Y2}px, ${X2}px)`,\n      };\n    }\n\n    const overrideDimensionsDynamicIcon = this.sums_.url\n      ? { width: \"100%\", height: \"100%\" }\n      : {};\n\n    const cssText = toCssText({\n      position: \"absolute\",\n      top: coercePixels(spriteV),\n      left: coercePixels(spriteH),\n      ...dimensions,\n      ...overrideDimensionsDynamicIcon,\n    });\n\n    return `<img alt=\"${this.sums_.text}\" aria-hidden=\"true\" src=\"${this.style.url}\" style=\"${cssText}\"/>`;\n  }\n\n  /**\n   * Sets the icon styles to the appropriate element in the styles array.\n   *\n   * @ignore\n   * @param sums The icon label text and styles index.\n   */\n  useStyle(sums: ClusterIconInfo): void {\n    this.sums_ = sums;\n    let index = Math.max(0, sums.index - 1);\n    index = Math.min(this.styles_.length - 1, index);\n    this.style = this.sums_.url\n      ? { ...this.styles_[index], url: this.sums_.url }\n      : this.styles_[index];\n\n    this.anchorText_ = this.style.anchorText || [0, 0];\n    this.anchorIcon_ = this.style.anchorIcon || [\n      Math.floor(this.style.height / 2),\n      Math.floor(this.style.width / 2),\n    ];\n\n    this.className_ =\n      this.cluster_.getMarkerClusterer().getClusterClass() +\n      \" \" +\n      (this.style.className || \"cluster-\" + index);\n  }\n\n  /**\n   * Sets the position at which to center the icon.\n   *\n   * @param center The latlng to set as the center.\n   */\n  setCenter(center: google.maps.LatLng): void {\n    this.center_ = center;\n  }\n\n  /**\n   * Creates the `cssText` style parameter based on the position of the icon.\n   *\n   * @param pos The position of the icon.\n   * @return The CSS style text.\n   */\n  private createCss_(pos: google.maps.Point): string {\n    return toCssText({\n      \"z-index\": `${this.cluster_.getMarkerClusterer().getZIndex()}`,\n      top: coercePixels(pos.y),\n      left: coercePixels(pos.x),\n      width: coercePixels(this.style.width),\n      height: coercePixels(this.style.height),\n      cursor: \"pointer\",\n      position: \"absolute\",\n      \"-webkit-user-select\": \"none\",\n      \"-khtml-user-select\": \"none\",\n      \"-moz-user-select\": \"none\",\n      \"-o-user-select\": \"none\",\n      \"user-select\": \"none\",\n    });\n  }\n\n  /**\n   * Returns the position at which to place the DIV depending on the latlng.\n   *\n   * @param latlng The position in latlng.\n   * @return The position in pixels.\n   */\n  private getPosFromLatLng_(latlng: google.maps.LatLng): google.maps.Point {\n    const pos = this.getProjection().fromLatLngToDivPixel(latlng);\n    pos.x = Math.floor(pos.x - this.anchorIcon_[1]);\n    pos.y = Math.floor(pos.y - this.anchorIcon_[0]);\n    return pos;\n  }\n}\n","import MarkerClusterer from '@googlemaps/markerclustererplus';\r\nimport { Component, getContext } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\nimport { MAP_STYLE } from './map.style';\r\n\r\nconst USE_CLUSTERER = true;\r\n\r\nlet GOOGLE_MAPS;\r\n\r\nexport class MapComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst apiKey = environment.googleMaps.apiKey;\r\n\t\tif (GOOGLE_MAPS != null) {\r\n\t\t\tthis.initMap();\r\n\t\t} else {\r\n\t\t\twindow.onGoogleMapsLoaded = () => {\r\n\t\t\t\tGOOGLE_MAPS = window.google.maps;\r\n\t\t\t\tthis.initMap();\r\n\t\t\t};\r\n\t\t\tconst script = document.createElement('script');\r\n\t\t\tscript.setAttribute('type', 'text/javascript');\r\n\t\t\tscript.setAttribute('src', `https://maps.googleapis.com/maps/api/js?callback=onGoogleMapsLoaded${apiKey ? `&key=${apiKey}` : ''}&libraries=places`);\r\n\t\t\t(document.getElementsByTagName('head')[0] || document.documentElement).appendChild(script);\r\n\t\t}\r\n\t}\r\n\r\n\tinitMap() {\r\n\t\tconst google = window.google;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst center = this.center;\r\n\r\n\t\tconst item = this.items && this.items.length ? this.items[0] : null;\r\n\r\n\t\tconst position = item ? new google.maps.LatLng(item.latitude, item.longitude) : null;\r\n\r\n\t\tconst mapOptions = {\r\n\t\t\tzoom: 15, // 9,\r\n\t\t\tcenter: position,\r\n\r\n\t\t\tscrollwheel: false,\r\n\t\t\t// mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n\t\t\tzoomControlOptions: {\r\n\t\t\t\tstyle: google.maps.ZoomControlStyle.DEFAULT\r\n\t\t\t},\r\n\t\t\t// overviewMapControl: true,\r\n\r\n\t\t\tscaleControl: false,\r\n\t\t\tzoomControl: true,\r\n\t\t\tmapTypeControl: false,\r\n\t\t\tstreetViewControl: false,\r\n\t\t\trotateControl: true,\r\n\t\t\tfullscreenControl: true,\r\n\r\n\t\t\tstyles: MAP_STYLE\r\n\t\t};\r\n\r\n\t\tconst mapElement = node.querySelector('.map');\r\n\r\n\t\tconst map = this.map = new google.maps.Map(mapElement, mapOptions);\r\n\r\n\t\tthis.addMarkers(this.items);\r\n\r\n\t\tif (!this.items) {\r\n\t\t\tmap.fitBounds(this.getItalyBounds());\r\n\t\t}\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tthis.clearMarkers();\r\n\t\tthis.addMarkers(this.items);\r\n\t}\r\n\r\n\tcalculateDistance(lat1, lon1, lat2, lon2, unit) {\r\n\t\tif ((lat1 == lat2) && (lon1 == lon2)) {\r\n\t\t\treturn 0;\r\n\t\t} else {\r\n\t\t\tconst radlat1 = Math.PI * lat1 / 180;\r\n\t\t\tconst radlat2 = Math.PI * lat2 / 180;\r\n\t\t\tconst theta = lon1 - lon2;\r\n\t\t\tconst radtheta = Math.PI * theta / 180;\r\n\t\t\tlet dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);\r\n\t\t\tif (dist > 1) {\r\n\t\t\t\tdist = 1;\r\n\t\t\t}\r\n\t\t\tdist = Math.acos(dist);\r\n\t\t\tdist = dist * 180 / Math.PI;\r\n\t\t\tdist = dist * 60 * 1.1515;\r\n\t\t\tif (unit == \"K\") {\r\n\t\t\t\tdist = dist * 1.609344;\r\n\t\t\t}\r\n\t\t\tif (unit == \"N\") {\r\n\t\t\t\tdist = dist * 0.8684;\r\n\t\t\t}\r\n\t\t\treturn dist;\r\n\t\t}\r\n\t}\r\n\r\n\tclearMarkers() {\r\n\t\tif (this.markerCluster) {\r\n\t\t\tthis.markerCluster.clearMarkers();\r\n\t\t}\r\n\t\tif (this.markers) {\r\n\t\t\tthis.markers.forEach(marker => marker.setMap(null));\r\n\t\t}\r\n\t}\r\n\r\n\taddMarkers(items) {\r\n\t\tconst map = this.map;\r\n\t\tif (map && items) {\r\n\t\t\tconst bounds = new google.maps.LatLngBounds();\r\n\r\n\t\t\tconst markers = items.map((item) => {\r\n\r\n\t\t\t\tconst position = new google.maps.LatLng(item.latitude, item.longitude);\r\n\r\n\t\t\t\tbounds.extend(position);\r\n\r\n\t\t\t\tlet content = /* html */`<div class=\"card--store-locator\">\r\n\t\t\t\t\t<div class=\"card__content\">\r\n\t\t\t\t\t\t<div class=\"card__name\"><span>${item.name}</span></div>\r\n\t\t\t\t\t\t<div class=\"card__address\">${item.address}</div>\r\n\t\t\t\t\t\t<div class=\"card__city\">${item.city}</div>\r\n\t\t\t\t\t\t<div class=\"card__country\">${item.country.name}</div>\r\n\t\t\t\t\t\t${item.phone ? `<a class=\"card__phone\" href=\"tel:${item.phone}\">${item.phone}</a>` : ''}\r\n\t\t\t\t\t\t${item.fax ? `<a class=\"card__fax\" href=\"tel:${item.fax}\">${item.fax}</a>` : ''}\r\n\t\t\t\t\t\t${item.email ? `<a class=\"card__email\" href=\"mailto:${item.email}\">${item.email}</a>` : ''}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>`;\r\n\r\n\t\t\t\t/*\r\n\t\t\t\t`<div class=\"marker__content\">\r\n\t\t\t\t\t<div class=\"title\"><span>${item.name}</span></div>\r\n\t\t\t\t\t<div class=\"group group--info\">\r\n\t\t\t\t\t\t<div class=\"address\">\r\n\t\t\t\t\t\t\t${item.address}<br>\r\n\t\t\t\t\t\t\t${item.city} ${item.country}<br>\r\n\t\t\t\t\t\t\t${item.phone ? `<span><a href=\"tel:${item.phone}\">${item.phone}</a><br></span>` : ''}\r\n\t\t\t\t\t\t\t${item.fax ? `<span><a href=\"tel:${item.fax}\">${item.fax}</a><br></span>` : ''}\r\n\t\t\t\t\t\t\t${item.email ? `<span><a href=\"mailto:${item.email}\">${item.email}</a><br></span>` : ''}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t${item.address !== '' ? `<div class=\"distance\">${this.labels.approximately} <b>${Math.floor(item.distance)} km</b></div>` : ``}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"group group--cta\">\r\n\t\t\t\t\t\t${item.address !== '' ? `<a id=\"locator-marker\" href=\"https://www.google.it/maps/dir/${position.lat()},${position.lng()}/${item.title}/@${item.latitude},${item.longitude}/\" target=\"_blank\" class=\"btn btn--link\"><span>${this.labels.reachStore}</span></a>` : ``}\r\n\t\t\t\t\t\t${item.type === 8 || item.type === 9 ? `<a id=\"contact-item\" href=\"${window.itemLocatorSettings.urlStoreContact}?item=${item.id}\" target=\"_blank\" class=\"btn btn--link\"><span>${this.labels.contactStore}</span></a>` : ''}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>`\r\n\t\t\t\t*/\r\n\r\n\t\t\t\tconst markerImage = new google.maps.MarkerImage(\r\n\t\t\t\t\t`${environment.assets}img/maps/marker-sm.png`,\r\n\t\t\t\t\tnew google.maps.Size(24, 32),\r\n\t\t\t\t);\r\n\r\n\t\t\t\tlet marker = new google.maps.Marker({\r\n\t\t\t\t\tposition: position,\r\n\t\t\t\t\tmap: USE_CLUSTERER ? null : map,\r\n\t\t\t\t\ticon: markerImage,\r\n\t\t\t\t\ttitle: item.title,\r\n\t\t\t\t\titem: item,\r\n\t\t\t\t\tcontent: content,\r\n\t\t\t\t});\r\n\t\t\t\tmarker.addListener('click', () => {\r\n\t\t\t\t\tthis.setMarkerWindow(marker.position, content);\r\n\t\t\t\t\t// this.scrollToStore(item);\r\n\t\t\t\t\t// GtmService.push({ event: 'dealerlocator', action: 'marker-click', label: item.title });\r\n\t\t\t\t});\r\n\t\t\t\titem.marker = marker;\r\n\t\t\t\treturn marker;\r\n\t\t\t});\r\n\r\n\t\t\tif (USE_CLUSTERER) {\r\n\t\t\t\tconst markerCluster = new MarkerClusterer(this.map, markers, {\r\n\t\t\t\t\timagePath: `${environment.assets}img/maps/cluster-`,\r\n\t\t\t\t});\r\n\t\t\t\tconst styles = markerCluster.getStyles();\r\n\t\t\t\tconst sizes = [48, 56, 64, 72, 80];\r\n\t\t\t\tstyles.forEach((style, i) => {\r\n\t\t\t\t\tstyle.width = sizes[i];\r\n\t\t\t\t\tstyle.height = sizes[i];\r\n\t\t\t\t\tstyle.textLineHeight = sizes[i];\r\n\t\t\t\t\tstyle.textSize = Math.floor(style.width / 5);\r\n\t\t\t\t\tstyle.textColor = '#ffffff';\r\n\t\t\t\t});\r\n\t\t\t\tmarkerCluster.setStyles(styles);\r\n\t\t\t\tthis.markerCluster = markerCluster;\r\n\t\t\t}\r\n\r\n\t\t\tthis.markers = markers;\r\n\r\n\t\t\tmap.fitBounds(bounds);\r\n\t\t}\r\n\t}\r\n\r\n\tgetGeolocation(map) {\r\n\t\tthis.error = null;\r\n\t\tthis.busyLocation = true;\r\n\t\tlet position = this.map.getCenter();\r\n\r\n\t\t// Try HTML5 geolocation.\r\n\t\tif (navigator.geolocation) {\r\n\t\t\tnavigator.geolocation.getCurrentPosition((location) => {\r\n\t\t\t\tposition = new google.maps.LatLng(location.coords.latitude, location.coords.longitude);\r\n\r\n\t\t\t\tconst geocoder = this.geocoder || new google.maps.Geocoder();\r\n\t\t\t\tthis.geocoder = geocoder;\r\n\t\t\t\tgeocoder.geocode({ 'location': position }, (results, status) => {\r\n\t\t\t\t\tif (status == 'OK') {\r\n\t\t\t\t\t\tvar filteredInfoCity = results.filter(function(address_component) {\r\n\t\t\t\t\t\t\treturn address_component.types.includes(\"locality\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.model.city = filteredInfoCity.length ? filteredInfoCity[0].formatted_address : undefined;\r\n\t\t\t\t\t\tthis.model.address = results[0].formatted_address;\r\n\r\n\t\t\t\t\t\tfor (let i = 0; i < results[0].address_components.length; i++) {\r\n\t\t\t\t\t\t\tif (results[0].address_components[i].types[0] == \"country\" || results[0].address_components[i].types[0] == \"political\") {\r\n\t\t\t\t\t\t\t\tthis.searchCountry = results[0].address_components[i].short_name;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.setInfoWindow(position, 1);\r\n\t\t\t\t\t\tthis.searchPosition(position).finally(() => this.busyLocation = false);\r\n\t\t\t\t\t\tthis.map.setCenter(position);\r\n\t\t\t\t\t\tthis.map.setZoom(ZOOM_LEVEL);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}, () => {\r\n\t\t\t\tthis.setInfoWindow(position, 2);\r\n\t\t\t\tthis.searchPosition(position).finally(() => this.busyLocation = false);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\t// Browser doesn't support Geolocation\r\n\t\t\tthis.setInfoWindow(position, 3);\r\n\t\t\tthis.searchPosition(position).finally(() => this.busyLocation = false);\r\n\t\t}\r\n\t}\r\n\r\n\tfitBounds(items) {\r\n\t\tif (items.length) {\r\n\t\t\tconst bounds = new google.maps.LatLngBounds();\r\n\t\t\titems.forEach((item) => {\r\n\t\t\t\tconst position = new google.maps.LatLng(item.latitude, item.longitude);\r\n\t\t\t\tbounds.extend(position);\r\n\t\t\t});\r\n\t\t\tthis.map.fitBounds(bounds);\r\n\t\t\t// console.log('fitBounds');\r\n\t\t}\r\n\t}\r\n\r\n\tfindNearStores(items, position) {\r\n\t\tif (items) {\r\n\t\t\titems.forEach((item) => {\r\n\t\t\t\titem.distance = this.calculateDistance(item.latitude, item.longitude, position.lat(), position.lng(), 'K');\r\n\t\t\t\titem.visible = (item.cod_stato == window.userCountry || !window.userCountry) && item.distance <= MAX_DISTANCE /* Km */;\r\n\t\t\t\tif (item.visible) {\r\n\t\t\t\t\tif (item.removed) {\r\n\t\t\t\t\t\tthis.markerCluster.addMarker(item.marker);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdelete item.removed;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.markerCluster.removeMarker(item.marker);\r\n\t\t\t\t\titem.removed = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\titems = items.slice();\r\n\t\t\titems.sort((a, b) => {\r\n\t\t\t\treturn a.distance * (a.importante ? 0.5 : 1) - b.distance * (b.importante ? 0.5 : 1);\r\n\t\t\t});\r\n\t\t\tconst visibleStores = items.filter(item => item.visible).slice(0, 50);\r\n\t\t\tthis.$timeout(() => {\r\n\t\t\t\tthis.visibleStores = visibleStores;\r\n\t\t\t}, 1);\r\n\t\t\t// console.log('findNearStores', visibleStores);\r\n\t\t\treturn visibleStores;\r\n\t\t}\r\n\t}\r\n\r\n\tpanTo(item) {\r\n\t\tconst position = new google.maps.LatLng(item.latitude, item.longitude);\r\n\t\tthis.map.setZoom(ZOOM_LEVEL);\r\n\t\tthis.map.panTo(position);\r\n\t\tconst marker = this.markers.find(x => x.item === item);\r\n\t\tthis.setMarkerWindow(marker.position, marker.content);\r\n\t}\r\n\r\n\tsetMarkerWindow(position, content) {\r\n\t\tif (position) {\r\n\t\t\tconst markerWindow = this.markerWindow || new google.maps.InfoWindow({\r\n\t\t\t\tpixelOffset: new google.maps.Size(0, -35)\r\n\t\t\t});\r\n\t\t\tthis.markerWindow = markerWindow;\r\n\t\t\tmarkerWindow.setPosition(position);\r\n\t\t\tmarkerWindow.setContent(content);\r\n\t\t\tmarkerWindow.open(this.map);\r\n\t\t} else {\r\n\t\t\tthis.closeMarkerWindow();\r\n\t\t}\r\n\t}\r\n\r\n\tcloseMarkerWindow() {\r\n\t\tif (this.markerWindow) {\r\n\t\t\tthis.markerWindow.close();\r\n\t\t}\r\n\t}\r\n\r\n\tgetWorldBounds() {\r\n\t\treturn new google.maps.LatLngBounds(\r\n\t\t\tnew google.maps.LatLng(61, 60),\r\n\t\t\tnew google.maps.LatLng(-37, -92)\r\n\t\t);\r\n\t}\r\n\r\n\tgetItalyBounds() {\r\n\t\treturn new google.maps.LatLngBounds(\r\n\t\t\tnew google.maps.LatLng(46.4657567, 5.233972),\r\n\t\t\tnew google.maps.LatLng(36.8257773, 18.963541)\r\n\t\t);\r\n\t}\r\n}\r\n\r\nMapComponent.meta = {\r\n\tselector: '[map]',\r\n\tinputs: ['center', 'items'],\r\n};\r\n","/**\n * Copyright 2019 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { MarkerClusterer, ClusterAugmentedMarker } from \"./markerclusterer\";\nimport { ClusterIcon } from \"./cluster-icon\";\n\n/**\n * Creates a single cluster that manages a group of proximate markers.\n *  Used internally, do not call this constructor directly.\n */\nexport class Cluster {\n  private map_ = this.markerClusterer_.getMap() as google.maps.Map;\n  private minClusterSize_: number = this.markerClusterer_.getMinimumClusterSize();\n  private averageCenter_: boolean = this.markerClusterer_.getAverageCenter();\n  private markers_: ClusterAugmentedMarker[] = []; // TODO: type;\n  private center_: google.maps.LatLng = null;\n  private bounds_: google.maps.LatLngBounds = null;\n  private clusterIcon_ = new ClusterIcon(\n    this,\n    this.markerClusterer_.getStyles()\n  );\n\n  /**\n   *\n   * @param markerClusterer_ The `MarkerClusterer` object with which this\n   *  cluster is associated.\n   */\n  constructor(private markerClusterer_: MarkerClusterer) {}\n\n  /**\n   * Returns the number of markers managed by the cluster. You can call this from\n   * a `click`, `mouseover`, or `mouseout` event handler for the `MarkerClusterer` object.\n   *\n   * @return The number of markers in the cluster.\n   */\n  public getSize(): number {\n    return this.markers_.length;\n  }\n\n  /**\n   * Returns the array of markers managed by the cluster. You can call this from\n   * a `click`, `mouseover`, or `mouseout` event handler for the `MarkerClusterer` object.\n   *\n   * @return The array of markers in the cluster.\n   */\n  public getMarkers(): google.maps.Marker[] {\n    return this.markers_;\n  }\n\n  /**\n   * Returns the center of the cluster. You can call this from\n   * a `click`, `mouseover`, or `mouseout` event handler\n   * for the `MarkerClusterer` object.\n   *\n   * @return The center of the cluster.\n   */\n  public getCenter(): google.maps.LatLng {\n    return this.center_;\n  }\n\n  /**\n   * Returns the map with which the cluster is associated.\n   *\n   * @return The map.\n   * @ignore\n   */\n  public getMap(): google.maps.Map {\n    return this.map_;\n  }\n\n  /**\n   * Returns the `MarkerClusterer` object with which the cluster is associated.\n   *\n   * @return The associated marker clusterer.\n   * @ignore\n   */\n  public getMarkerClusterer(): MarkerClusterer {\n    return this.markerClusterer_;\n  }\n\n  /**\n   * Returns the bounds of the cluster.\n   *\n   * @return the cluster bounds.\n   * @ignore\n   */\n  public getBounds(): google.maps.LatLngBounds {\n    const bounds = new google.maps.LatLngBounds(this.center_, this.center_);\n    const markers = this.getMarkers();\n    for (let i = 0; i < markers.length; i++) {\n      bounds.extend(markers[i].getPosition());\n    }\n    return bounds;\n  }\n\n  /**\n   * Removes the cluster from the map.\n   *\n   * @ignore\n   */\n  public remove(): void {\n    this.clusterIcon_.setMap(null);\n    this.markers_ = [];\n    delete this.markers_;\n  }\n\n  /**\n   * Adds a marker to the cluster.\n   *\n   * @param marker The marker to be added.\n   * @return True if the marker was added.\n   * @ignore\n   */\n  public addMarker(\n    marker: google.maps.Marker & { isAdded?: boolean }\n  ): boolean {\n    if (this.isMarkerAlreadyAdded_(marker)) {\n      return false;\n    }\n\n    if (!this.center_) {\n      this.center_ = marker.getPosition();\n      this.calculateBounds_();\n    } else {\n      if (this.averageCenter_) {\n        const l = this.markers_.length + 1;\n        const lat =\n          (this.center_.lat() * (l - 1) + marker.getPosition().lat()) / l;\n        const lng =\n          (this.center_.lng() * (l - 1) + marker.getPosition().lng()) / l;\n        this.center_ = new google.maps.LatLng(lat, lng);\n        this.calculateBounds_();\n      }\n    }\n\n    marker.isAdded = true;\n    this.markers_.push(marker);\n\n    const mCount = this.markers_.length;\n    const mz = this.markerClusterer_.getMaxZoom();\n    if (mz !== null && this.map_.getZoom() > mz) {\n      // Zoomed in past max zoom, so show the marker.\n      if (marker.getMap() !== this.map_) {\n        marker.setMap(this.map_);\n      }\n    } else if (mCount < this.minClusterSize_) {\n      // Min cluster size not reached so show the marker.\n      if (marker.getMap() !== this.map_) {\n        marker.setMap(this.map_);\n      }\n    } else if (mCount === this.minClusterSize_) {\n      // Hide the markers that were showing.\n      for (let i = 0; i < mCount; i++) {\n        this.markers_[i].setMap(null);\n      }\n    } else {\n      marker.setMap(null);\n    }\n\n    return true;\n  }\n\n  /**\n   * Determines if a marker lies within the cluster's bounds.\n   *\n   * @param marker The marker to check.\n   * @return True if the marker lies in the bounds.\n   * @ignore\n   */\n  public isMarkerInClusterBounds(marker: google.maps.Marker): boolean {\n    return this.bounds_.contains(marker.getPosition());\n  }\n\n  /**\n   * Calculates the extended bounds of the cluster with the grid.\n   */\n  private calculateBounds_(): void {\n    const bounds = new google.maps.LatLngBounds(this.center_, this.center_);\n    this.bounds_ = this.markerClusterer_.getExtendedBounds(bounds);\n  }\n\n  /**\n   * Updates the cluster icon.\n   */\n  public updateIcon(): void {\n    const mCount = this.markers_.length;\n    const mz = this.markerClusterer_.getMaxZoom();\n\n    if (mz !== null && this.map_.getZoom() > mz) {\n      this.clusterIcon_.hide();\n      return;\n    }\n\n    if (mCount < this.minClusterSize_) {\n      // Min cluster size not yet reached.\n      this.clusterIcon_.hide();\n      return;\n    }\n\n    const numStyles = this.markerClusterer_.getStyles().length;\n    const sums = this.markerClusterer_.getCalculator()(\n      this.markers_,\n      numStyles\n    );\n    this.clusterIcon_.setCenter(this.center_);\n    this.clusterIcon_.useStyle(sums);\n    this.clusterIcon_.show();\n  }\n\n  /**\n   * Determines if a marker has already been added to the cluster.\n   *\n   * @param marker The marker to check.\n   * @return True if the marker has already been added.\n   */\n  private isMarkerAlreadyAdded_(marker: google.maps.Marker): boolean {\n    if (this.markers_.indexOf) {\n      return this.markers_.indexOf(marker) !== -1;\n    } else {\n      for (let i = 0; i < this.markers_.length; i++) {\n        if (marker === this.markers_[i]) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n}\n","/**\n * Copyright 2019 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @name MarkerClustererPlus for Google Maps V3\n * @author Gary Little\n * @fileoverview\n * The library creates and manages per-zoom-level clusters for large amounts of markers.\n * <p>\n * This is an enhanced V3 implementation of the V2 MarkerClusterer by Xiaoxi Wu. It is\n * based on the V3 MarkerClusterer port by Luke Mahe. MarkerClustererPlus was created\n * by Gary Little.\n * <p>\n * v2.0 release: MarkerClustererPlus v2.0 is backward compatible with MarkerClusterer v1.0. It\n *  adds support for the `ignoreHidden`, `title`, `batchSizeIE`,\n *  and `calculator` properties as well as support for four more events. It also allows\n *  greater control over the styling of the text that appears on the cluster marker. The\n *  documentation has been significantly improved and the overall code has been simplified and\n *  polished. Very large numbers of markers can now be managed without causing Javascript timeout\n *  errors on Internet Explorer. Note that the name of the `clusterclick` event has been\n *  deprecated. The new name is `click`, so please change your application code now.\n */\n\nimport { ClusterIconInfo, ClusterIconStyle } from \"./cluster-icon\";\n\nimport { Cluster } from \"./cluster\";\nimport { OverlayViewSafe } from \"./overlay-view-safe\";\n\n/**\n * @param text The text attribute of the cluster\n */\ntype AriaLabelFn = (text: string) => string;\n\nexport type Calculator = (\n  markers: google.maps.Marker[],\n  clusterIconStylesCount: number\n) => ClusterIconInfo;\n\nexport interface ClusterAugmentedMarker extends google.maps.Marker {\n  isAdded?: boolean;\n}\n\n/**\n * This event is fired on the {@link MarkerClusterer} instance when the `MarkerClusterer` stops clustering markers.\n *\n * Example:\n * ```typescript\n *  mc.addListener('clusteringend', (mc: MarkerClusterer) => {})\n * ```\n *\n * @param mc The MarkerClusterer whose markers are being clustered.\n * @event clusteringend\n */\nexport declare function clusteringend(mc: MarkerClusterer): void;\n\n/**\n * This event is fired on the {@link MarkerClusterer} instance when the `MarkerClusterer` begins clustering markers.\n *\n * Example:\n * ```typescript\n *  mc.addListener('clusteringbegin', (mc: MarkerClusterer) => {})\n * ```\n *\n * @param mc The MarkerClusterer whose markers are being clustered.\n * @event clusteringbegin\n */\nexport declare function clusteringbegin(mc: MarkerClusterer): void;\n\n/**\n * Optional parameter passed to the {@link MarkerClusterer} constructor.\n */\nexport interface MarkerClustererOptions {\n  /**\n   * The grid size of a cluster in pixels. The grid is a square.\n   *\n   * @default `60`\n   */\n  gridSize?: number;\n  /**\n   * The maximum zoom level at which clustering is enabled or\n   * `null` if clustering is to be enabled at all zoom levels.\n   *\n   * @default `null`\n   */\n  maxZoom?: number;\n\n  /**\n   * Whether to zoom the map when a cluster marker is\n   * clicked. You may want to set this to `false` if you have installed a handler\n   * for the `click` event and it deals with zooming on its own.\n   *\n   * @default `true`\n   */\n  zoomOnClick?: boolean;\n  /***\n   * Whether the position of a cluster marker should be\n   * the average position of all markers in the cluster. If set to `false`, the\n   * cluster marker is positioned at the location of the first marker added to the cluster.\n   *\n   * @default `false`\n   */\n  averageCenter?: boolean;\n  /**\n   * The minimum number of markers needed in a cluster\n   * before the markers are hidden and a cluster marker appears.\n   *\n   * @default `2`\n   */\n  minimumClusterSize?: number;\n\n  /**\n   *  the z-index of a cluster.\n   *\n   *  @default `google.maps.Marker.MAX_ZINDEX + 1`\n   */\n  zIndex?: number;\n\n  /**\n   * Whether to ignore hidden markers in clusters. You\n   * may want to set this to `true` to ensure that hidden markers are not included\n   * in the marker count that appears on a cluster marker (this count is the value of the\n   * `text` property of the result returned by the default  {@link calculator}).\n   * If set to `true` and you change the visibility of a marker being clustered, be\n   * sure to also call {@link MarkerClusterer#repaint()}.\n   *\n   * @default `false`\n   */\n  ignoreHidden?: boolean;\n  /**\n   * The tooltip to display when the mouse moves over a cluster\n   * marker. (Alternatively, you can use a custom `calculator` function to specify a\n   * different tooltip for each cluster marker.)\n   *\n   * @default `\"\"`\n   */\n  title?: string;\n  /**\n   * The function used to determine\n   * the text to be displayed on a cluster marker and the index indicating which style to use\n   * for the cluster marker. The input parameters for the function are (1) the array of markers\n   * represented by a cluster marker and (2) the number of cluster icon styles. It returns a\n   * {@link ClusterIconInfo} object. The default `calculator` returns a\n   * `text` property which is the number of markers in the cluster and an\n   * `index` property which is one higher than the lowest integer such that\n   * `10^i` exceeds the number of markers in the cluster, or the size of the styles\n   * array, whichever is less. The `styles` array element used has an index of\n   * `index` minus 1. For example, the default `calculator` returns a\n   * `text` value of `\"125\"` and an `index` of `3`\n   * for a cluster icon representing 125 markers so the element used in the `styles`\n   * array is `2`. A `calculator` may also return a `title`\n   * property that contains the text of the tooltip to be used for the cluster marker. If\n   * `title` is not defined, the tooltip is set to the value of the `title`\n   * property for the MarkerClusterer.\n   *\n   * @default {@link MarkerClusterer.CALCULATOR}\n   */\n  calculator?: Calculator;\n  /**\n   * The name of the CSS class defining general styles\n   * for the cluster markers. Use this class to define CSS styles that are not set up by the code\n   * that processes the `styles` array.\n   *\n   * @default `\"cluster\"`\n   */\n  clusterClass?: string;\n  /**\n   * An array of {@link ClusterIconStyle} elements defining the styles\n   * of the cluster markers to be used. The element to be used to style a given cluster marker\n   * is determined by the function defined by the `calculator` property.\n   * The default is an array of {@link ClusterIconStyle} elements whose properties are derived\n   * from the values for `imagePath`, `imageExtension`, and `imageSizes`.\n   *\n   * @default `styles`\n   */\n  styles?: ClusterIconStyle[];\n  /**\n   * Whether to allow the use of cluster icons that\n   * have sizes that are some multiple (typically double) of their actual display size. Icons such\n   * as these look better when viewed on high-resolution monitors such as Apple's Retina displays.\n   * Note: if this property is `true`, sprites cannot be used as cluster icons.\n   *\n   * @default `false`\n   */\n  enableRetinaIcons?: boolean;\n  /**\n   * Set this property to the number of markers to be processed in a single batch when using\n   * a browser other than Internet Explorer (for Internet Explorer, use the batchSizeIE property instead).\n   *\n   * @default `MarkerClusterer.BATCH_SIZE`\n   */\n  batchSize?: number;\n  /**\n   * When Internet Explorer is\n   * being used, markers are processed in several batches with a small delay inserted between\n   * each batch in an attempt to avoid Javascript timeout errors. Set this property to the\n   * number of markers to be processed in a single batch; select as high a number as you can\n   * without causing a timeout error in the browser. This number might need to be as low as 100\n   * if 15,000 markers are being managed, for example.\n   *\n   * @default `MarkerClusterer.BATCH_SIZE_IE`\n   */\n  batchSizeIE?: number;\n  /**\n   * The full URL of the root name of the group of image files to use for cluster icons.\n   * The complete file name is of the form `imagePath`n.`imageExtension`\n   * where n is the image file number (1, 2, etc.).\n   *\n   * @default `MarkerClusterer.IMAGE_PATH`\n   */\n  imagePath?: string;\n  /**\n   * The extension name for the cluster icon image files (e.g., `\"png\"` or\n   * `\"jpg\"`).\n   *\n   * @default `MarkerClusterer.IMAGE_EXTENSION`\n   */\n  imageExtension?: string;\n  /**\n   * An array of numbers containing the widths of the group of\n   * `imagePath`n.`imageExtension` image files.\n   * (The images are assumed to be square.)\n   *\n   * @default `MarkerClusterer.IMAGE_SIZES`\n   */\n  imageSizes?: number[];\n  /**\n   * A function to take the text attribute associated with the cluster and output a string to attach an\n   * ariaLabel to the cluster\n   */\n  ariaLabelFn?: AriaLabelFn;\n}\n\n/**\n * @ignore\n */\nconst getOption = <T, K extends keyof T>(\n  options: T,\n  prop: K,\n  def: T[K]\n): T[K] => {\n  if (options[prop] !== undefined) {\n    return options[prop];\n  } else {\n    return def;\n  }\n};\n\nexport class MarkerClusterer extends OverlayViewSafe {\n  /**\n   * The number of markers to process in one batch.\n   */\n  static BATCH_SIZE = 2000;\n\n  /**\n   * The number of markers to process in one batch (IE only).\n   */\n  static BATCH_SIZE_IE = 500;\n\n  /**\n   * The default root name for the marker cluster images.\n   */\n  static IMAGE_PATH = \"../images/m\";\n\n  /**\n   * The default extension name for the marker cluster images.\n   */\n  static IMAGE_EXTENSION = \"png\";\n\n  /**\n   * The default array of sizes for the marker cluster images.\n   */\n  static IMAGE_SIZES: number[] = [53, 56, 66, 78, 90];\n\n  private markers_: ClusterAugmentedMarker[] = [];\n  private clusters_: Cluster[] = [];\n  private listeners_: google.maps.MapsEventListener[] = [];\n\n  private activeMap_: google.maps.Map = null;\n  private ready_ = false;\n\n  public ariaLabelFn = this.options.ariaLabelFn || ((): string => \"\");\n\n  private zIndex_ =\n    this.options.zIndex || Number(google.maps.Marker.MAX_ZINDEX) + 1;\n  private gridSize_ = this.options.gridSize || 60;\n  private minClusterSize_ = this.options.minimumClusterSize || 2;\n  private maxZoom_ = this.options.maxZoom || null;\n  private styles_: ClusterIconStyle[] = this.options.styles || [];\n  private title_ = this.options.title || \"\";\n\n  private zoomOnClick_ = getOption(this.options, \"zoomOnClick\", true);\n  private averageCenter_ = getOption(this.options, \"averageCenter\", false);\n\n  private ignoreHidden_ = getOption(this.options, \"ignoreHidden\", false);\n  private enableRetinaIcons_ = getOption(\n    this.options,\n    \"enableRetinaIcons\",\n    false\n  );\n\n  private imagePath_ = this.options.imagePath || MarkerClusterer.IMAGE_PATH;\n  private imageExtension_ =\n    this.options.imageExtension || MarkerClusterer.IMAGE_EXTENSION;\n  private imageSizes_ = this.options.imageSizes || MarkerClusterer.IMAGE_SIZES;\n  private calculator_ = this.options.calculator || MarkerClusterer.CALCULATOR;\n  private batchSize_ = this.options.batchSize || MarkerClusterer.BATCH_SIZE;\n  private batchSizeIE_ =\n    this.options.batchSizeIE || MarkerClusterer.BATCH_SIZE_IE;\n  private clusterClass_ = this.options.clusterClass || \"cluster\";\n\n  private prevZoom_: number;\n  private timerRefStatic: number;\n\n  /**\n   * Creates a MarkerClusterer object with the options specified in {@link MarkerClustererOptions}.\n   * @param map The Google map to attach to.\n   * @param markers The markers to be added to the cluster.\n   * @param options The optional parameters.\n   */\n  constructor(\n    map: google.maps.Map,\n    markers: google.maps.Marker[] = [],\n    private options: MarkerClustererOptions = {}\n  ) {\n    super();\n\n    if (navigator.userAgent.toLowerCase().indexOf(\"msie\") !== -1) {\n      // Try to avoid IE timeout when processing a huge number of markers:\n      this.batchSize_ = this.batchSizeIE_;\n    }\n\n    this.setupStyles_();\n\n    this.addMarkers(markers, true);\n    this.setMap(map); // Note: this causes onAdd to be called\n  }\n\n  /**\n   * Implementation of the onAdd interface method.\n   * @ignore\n   */\n  onAdd(): void {\n    this.activeMap_ = this.getMap() as google.maps.Map;\n    this.ready_ = true;\n\n    this.repaint();\n\n    this.prevZoom_ = this.getMap().getZoom();\n\n    // Add the map event listeners\n    this.listeners_ = [\n      google.maps.event.addListener(this.getMap(), \"zoom_changed\", () => {\n        const map: google.maps.Map & {\n          minZoom: number;\n          maxZoom: number;\n          mapTypes: { [type: string]: google.maps.MapType };\n        } = this.getMap() as any; // eslint-disable-line @typescript-eslint/no-explicit-any\n\n        // Fix for bug #407\n        // Determines map type and prevents illegal zoom levels\n        const minZoom = map.minZoom || 0;\n        const maxZoom = Math.min(\n          map.maxZoom || 100,\n          map.mapTypes[map.getMapTypeId()].maxZoom\n        );\n        const zoom = Math.min(\n          Math.max(this.getMap().getZoom(), minZoom),\n          maxZoom\n        );\n\n        if (this.prevZoom_ != zoom) {\n          this.prevZoom_ = zoom;\n          this.resetViewport_(false);\n        }\n      }),\n      google.maps.event.addListener(this.getMap(), \"idle\", () => {\n        this.redraw_();\n      }),\n    ];\n  }\n\n  /**\n   * Implementation of the onRemove interface method.\n   * Removes map event listeners and all cluster icons from the DOM.\n   * All managed markers are also put back on the map.\n   * @ignore\n   */\n  onRemove(): void {\n    // Put all the managed markers back on the map:\n    for (let i = 0; i < this.markers_.length; i++) {\n      if (this.markers_[i].getMap() !== this.activeMap_) {\n        this.markers_[i].setMap(this.activeMap_);\n      }\n    }\n\n    // Remove all clusters:\n    for (let i = 0; i < this.clusters_.length; i++) {\n      this.clusters_[i].remove();\n    }\n    this.clusters_ = [];\n\n    // Remove map event listeners:\n    for (let i = 0; i < this.listeners_.length; i++) {\n      google.maps.event.removeListener(this.listeners_[i]);\n    }\n    this.listeners_ = [];\n\n    this.activeMap_ = null;\n    this.ready_ = false;\n  }\n\n  /**\n   * Implementation of the draw interface method.\n   * @ignore\n   */\n  draw(): void {}\n\n  /**\n   * Sets up the styles object.\n   */\n  private setupStyles_(): void {\n    if (this.styles_.length > 0) {\n      return;\n    }\n\n    for (let i = 0; i < this.imageSizes_.length; i++) {\n      const size = this.imageSizes_[i];\n      this.styles_.push(\n        MarkerClusterer.withDefaultStyle({\n          url: this.imagePath_ + (i + 1) + \".\" + this.imageExtension_,\n          height: size,\n          width: size,\n        })\n      );\n    }\n  }\n\n  /**\n   *  Fits the map to the bounds of the markers managed by the clusterer.\n   */\n  fitMapToMarkers(padding: number | google.maps.Padding): void {\n    const markers = this.getMarkers();\n    const bounds = new google.maps.LatLngBounds();\n    for (let i = 0; i < markers.length; i++) {\n      // March 3, 2018: Bug fix -- honor the ignoreHidden property\n      if (markers[i].getVisible() || !this.getIgnoreHidden()) {\n        bounds.extend(markers[i].getPosition());\n      }\n    }\n\n    (this.getMap() as google.maps.Map).fitBounds(bounds, padding);\n  }\n\n  /**\n   * Returns the value of the `gridSize` property.\n   *\n   * @return The grid size.\n   */\n  getGridSize(): number {\n    return this.gridSize_;\n  }\n\n  /**\n   * Sets the value of the `gridSize` property.\n   *\n   * @param gridSize The grid size.\n   */\n  setGridSize(gridSize: number): void {\n    this.gridSize_ = gridSize;\n  }\n\n  /**\n   * Returns the value of the `minimumClusterSize` property.\n   *\n   * @return The minimum cluster size.\n   */\n  getMinimumClusterSize(): number {\n    return this.minClusterSize_;\n  }\n\n  /**\n   * Sets the value of the `minimumClusterSize` property.\n   *\n   * @param minimumClusterSize The minimum cluster size.\n   */\n  setMinimumClusterSize(minimumClusterSize: number): void {\n    this.minClusterSize_ = minimumClusterSize;\n  }\n\n  /**\n   *  Returns the value of the `maxZoom` property.\n   *\n   *  @return The maximum zoom level.\n   */\n  getMaxZoom(): number {\n    return this.maxZoom_;\n  }\n\n  /**\n   *  Sets the value of the `maxZoom` property.\n   *\n   *  @param maxZoom The maximum zoom level.\n   */\n  setMaxZoom(maxZoom: number): void {\n    this.maxZoom_ = maxZoom;\n  }\n\n  getZIndex(): number {\n    return this.zIndex_;\n  }\n\n  setZIndex(zIndex: number): void {\n    this.zIndex_ = zIndex;\n  }\n\n  /**\n   *  Returns the value of the `styles` property.\n   *\n   *  @return The array of styles defining the cluster markers to be used.\n   */\n  getStyles(): ClusterIconStyle[] {\n    return this.styles_;\n  }\n\n  /**\n   *  Sets the value of the `styles` property.\n   *\n   *  @param styles The array of styles to use.\n   */\n  setStyles(styles: ClusterIconStyle[]): void {\n    this.styles_ = styles;\n  }\n\n  /**\n   * Returns the value of the `title` property.\n   *\n   * @return The content of the title text.\n   */\n  getTitle(): string {\n    return this.title_;\n  }\n\n  /**\n   *  Sets the value of the `title` property.\n   *\n   *  @param title The value of the title property.\n   */\n  setTitle(title: string): void {\n    this.title_ = title;\n  }\n\n  /**\n   * Returns the value of the `zoomOnClick` property.\n   *\n   * @return True if zoomOnClick property is set.\n   */\n  getZoomOnClick(): boolean {\n    return this.zoomOnClick_;\n  }\n\n  /**\n   *  Sets the value of the `zoomOnClick` property.\n   *\n   *  @param zoomOnClick The value of the zoomOnClick property.\n   */\n  setZoomOnClick(zoomOnClick: boolean): void {\n    this.zoomOnClick_ = zoomOnClick;\n  }\n\n  /**\n   * Returns the value of the `averageCenter` property.\n   *\n   * @return True if averageCenter property is set.\n   */\n  getAverageCenter(): boolean {\n    return this.averageCenter_;\n  }\n\n  /**\n   *  Sets the value of the `averageCenter` property.\n   *\n   *  @param averageCenter The value of the averageCenter property.\n   */\n  setAverageCenter(averageCenter: boolean): void {\n    this.averageCenter_ = averageCenter;\n  }\n\n  /**\n   * Returns the value of the `ignoreHidden` property.\n   *\n   * @return True if ignoreHidden property is set.\n   */\n  getIgnoreHidden(): boolean {\n    return this.ignoreHidden_;\n  }\n\n  /**\n   *  Sets the value of the `ignoreHidden` property.\n   *\n   *  @param ignoreHidden The value of the ignoreHidden property.\n   */\n  setIgnoreHidden(ignoreHidden: boolean): void {\n    this.ignoreHidden_ = ignoreHidden;\n  }\n\n  /**\n   * Returns the value of the `enableRetinaIcons` property.\n   *\n   * @return True if enableRetinaIcons property is set.\n   */\n  getEnableRetinaIcons(): boolean {\n    return this.enableRetinaIcons_;\n  }\n\n  /**\n   *  Sets the value of the `enableRetinaIcons` property.\n   *\n   *  @param enableRetinaIcons The value of the enableRetinaIcons property.\n   */\n  setEnableRetinaIcons(enableRetinaIcons: boolean): void {\n    this.enableRetinaIcons_ = enableRetinaIcons;\n  }\n\n  /**\n   * Returns the value of the `imageExtension` property.\n   *\n   * @return The value of the imageExtension property.\n   */\n  getImageExtension(): string {\n    return this.imageExtension_;\n  }\n\n  /**\n   *  Sets the value of the `imageExtension` property.\n   *\n   *  @param imageExtension The value of the imageExtension property.\n   */\n  setImageExtension(imageExtension: string): void {\n    this.imageExtension_ = imageExtension;\n  }\n\n  /**\n   * Returns the value of the `imagePath` property.\n   *\n   * @return The value of the imagePath property.\n   */\n  getImagePath(): string {\n    return this.imagePath_;\n  }\n\n  /**\n   *  Sets the value of the `imagePath` property.\n   *\n   *  @param imagePath The value of the imagePath property.\n   */\n  setImagePath(imagePath: string): void {\n    this.imagePath_ = imagePath;\n  }\n\n  /**\n   * Returns the value of the `imageSizes` property.\n   *\n   * @return The value of the imageSizes property.\n   */\n  getImageSizes(): number[] {\n    return this.imageSizes_;\n  }\n\n  /**\n   *  Sets the value of the `imageSizes` property.\n   *\n   *  @param imageSizes The value of the imageSizes property.\n   */\n  setImageSizes(imageSizes: number[]): void {\n    this.imageSizes_ = imageSizes;\n  }\n\n  /**\n   * Returns the value of the `calculator` property.\n   *\n   * @return the value of the calculator property.\n   */\n  getCalculator(): Calculator {\n    return this.calculator_;\n  }\n\n  /**\n   * Sets the value of the `calculator` property.\n   *\n   * @param calculator The value of the calculator property.\n   */\n  setCalculator(calculator: Calculator): void {\n    this.calculator_ = calculator;\n  }\n\n  /**\n   * Returns the value of the `batchSizeIE` property.\n   *\n   * @return the value of the batchSizeIE property.\n   */\n  getBatchSizeIE(): number {\n    return this.batchSizeIE_;\n  }\n\n  /**\n   * Sets the value of the `batchSizeIE` property.\n   *\n   *  @param batchSizeIE The value of the batchSizeIE property.\n   */\n  setBatchSizeIE(batchSizeIE: number): void {\n    this.batchSizeIE_ = batchSizeIE;\n  }\n\n  /**\n   * Returns the value of the `clusterClass` property.\n   *\n   * @return the value of the clusterClass property.\n   */\n  getClusterClass(): string {\n    return this.clusterClass_;\n  }\n\n  /**\n   * Sets the value of the `clusterClass` property.\n   *\n   *  @param clusterClass The value of the clusterClass property.\n   */\n  setClusterClass(clusterClass: string): void {\n    this.clusterClass_ = clusterClass;\n  }\n\n  /**\n   *  Returns the array of markers managed by the clusterer.\n   *\n   *  @return The array of markers managed by the clusterer.\n   */\n  getMarkers(): google.maps.Marker[] {\n    return this.markers_;\n  }\n\n  /**\n   *  Returns the number of markers managed by the clusterer.\n   *\n   *  @return The number of markers.\n   */\n  getTotalMarkers(): number {\n    return this.markers_.length;\n  }\n\n  /**\n   * Returns the current array of clusters formed by the clusterer.\n   *\n   * @return The array of clusters formed by the clusterer.\n   */\n  getClusters(): Cluster[] {\n    return this.clusters_;\n  }\n\n  /**\n   * Returns the number of clusters formed by the clusterer.\n   *\n   * @return The number of clusters formed by the clusterer.\n   */\n  getTotalClusters(): number {\n    return this.clusters_.length;\n  }\n\n  /**\n   * Adds a marker to the clusterer. The clusters are redrawn unless\n   *  `nodraw` is set to `true`.\n   *\n   * @param marker The marker to add.\n   * @param nodraw Set to `true` to prevent redrawing.\n   */\n  addMarker(marker: google.maps.Marker, nodraw?: boolean): void {\n    this.pushMarkerTo_(marker);\n    if (!nodraw) {\n      this.redraw_();\n    }\n  }\n\n  /**\n   * Adds an array of markers to the clusterer. The clusters are redrawn unless\n   *  `nodraw` is set to `true`.\n   *\n   * @param markers The markers to add.\n   * @param nodraw Set to `true` to prevent redrawing.\n   */\n  addMarkers(markers: google.maps.Marker[], nodraw?: boolean): void {\n    for (const key in markers) {\n      if (Object.prototype.hasOwnProperty.call(markers, key)) {\n        this.pushMarkerTo_(markers[key]);\n      }\n    }\n    if (!nodraw) {\n      this.redraw_();\n    }\n  }\n\n  /**\n   * Pushes a marker to the clusterer.\n   *\n   * @param marker The marker to add.\n   */\n  private pushMarkerTo_(\n    marker: google.maps.Marker & { isAdded?: boolean }\n  ): void {\n    // If the marker is draggable add a listener so we can update the clusters on the dragend:\n    if (marker.getDraggable()) {\n      google.maps.event.addListener(marker, \"dragend\", () => {\n        if (this.ready_) {\n          marker.isAdded = false;\n          this.repaint();\n        }\n      });\n    }\n    marker.isAdded = false;\n    this.markers_.push(marker);\n  }\n\n  /**\n   * Removes a marker from the cluster.  The clusters are redrawn unless\n   *  `nodraw` is set to `true`. Returns `true` if the\n   *  marker was removed from the clusterer.\n   *\n   * @param marker The marker to remove.\n   * @param nodraw Set to `true` to prevent redrawing.\n   * @return True if the marker was removed from the clusterer.\n   */\n  removeMarker(marker: google.maps.Marker, nodraw?: boolean): boolean {\n    const removed = this.removeMarker_(marker);\n\n    if (!nodraw && removed) {\n      this.repaint();\n    }\n\n    return removed;\n  }\n\n  /**\n   * Removes an array of markers from the cluster. The clusters are redrawn unless\n   *  `nodraw` is set to `true`. Returns `true` if markers were removed from the clusterer.\n   *\n   * @param markers The markers to remove.\n   * @param nodraw Set to `true` to prevent redrawing.\n   * @return True if markers were removed from the clusterer.\n   */\n  removeMarkers(markers: google.maps.Marker[], nodraw?: boolean): boolean {\n    let removed = false;\n\n    for (let i = 0; i < markers.length; i++) {\n      const r = this.removeMarker_(markers[i]);\n      removed = removed || r;\n    }\n\n    if (!nodraw && removed) {\n      this.repaint();\n    }\n\n    return removed;\n  }\n\n  /**\n   * Removes a marker and returns true if removed, false if not.\n   *\n   * @param marker The marker to remove\n   * @return Whether the marker was removed or not\n   */\n  private removeMarker_(marker: google.maps.Marker): boolean {\n    let index = -1;\n    if (this.markers_.indexOf) {\n      index = this.markers_.indexOf(marker);\n    } else {\n      for (let i = 0; i < this.markers_.length; i++) {\n        if (marker === this.markers_[i]) {\n          index = i;\n          break;\n        }\n      }\n    }\n\n    if (index === -1) {\n      // Marker is not in our list of markers, so do nothing:\n      return false;\n    }\n\n    marker.setMap(null);\n    this.markers_.splice(index, 1); // Remove the marker from the list of managed markers\n    return true;\n  }\n\n  /**\n   * Removes all clusters and markers from the map and also removes all markers\n   *  managed by the clusterer.\n   */\n  clearMarkers(): void {\n    this.resetViewport_(true);\n    this.markers_ = [];\n  }\n\n  /**\n   * Recalculates and redraws all the marker clusters from scratch.\n   *  Call this after changing any properties.\n   */\n  repaint(): void {\n    const oldClusters = this.clusters_.slice();\n    this.clusters_ = [];\n    this.resetViewport_(false);\n    this.redraw_();\n\n    // Remove the old clusters.\n    // Do it in a timeout to prevent blinking effect.\n    setTimeout(() => {\n      for (let i = 0; i < oldClusters.length; i++) {\n        oldClusters[i].remove();\n      }\n    }, 0);\n  }\n\n  /**\n   * Returns the current bounds extended by the grid size.\n   *\n   * @param bounds The bounds to extend.\n   * @return The extended bounds.\n   * @ignore\n   */\n  getExtendedBounds(\n    bounds: google.maps.LatLngBounds\n  ): google.maps.LatLngBounds {\n    const projection = this.getProjection();\n\n    // Turn the bounds into latlng.\n    const tr = new google.maps.LatLng(\n      bounds.getNorthEast().lat(),\n      bounds.getNorthEast().lng()\n    );\n    const bl = new google.maps.LatLng(\n      bounds.getSouthWest().lat(),\n      bounds.getSouthWest().lng()\n    );\n\n    // Convert the points to pixels and the extend out by the grid size.\n    const trPix = projection.fromLatLngToDivPixel(tr);\n    trPix.x += this.gridSize_;\n    trPix.y -= this.gridSize_;\n\n    const blPix = projection.fromLatLngToDivPixel(bl);\n    blPix.x -= this.gridSize_;\n    blPix.y += this.gridSize_;\n\n    // Convert the pixel points back to LatLng\n    const ne = projection.fromDivPixelToLatLng(trPix);\n    const sw = projection.fromDivPixelToLatLng(blPix);\n\n    // Extend the bounds to contain the new bounds.\n    bounds.extend(ne);\n    bounds.extend(sw);\n\n    return bounds;\n  }\n\n  /**\n   * Redraws all the clusters.\n   */\n  private redraw_(): void {\n    this.createClusters_(0);\n  }\n\n  /**\n   * Removes all clusters from the map. The markers are also removed from the map\n   *  if `hide` is set to `true`.\n   *\n   * @param hide Set to `true` to also remove the markers from the map.\n   */\n  private resetViewport_(hide?: boolean): void {\n    // Remove all the clusters\n    for (let i = 0; i < this.clusters_.length; i++) {\n      this.clusters_[i].remove();\n    }\n    this.clusters_ = [];\n\n    // Reset the markers to not be added and to be removed from the map.\n    for (let i = 0; i < this.markers_.length; i++) {\n      const marker = this.markers_[i];\n      marker.isAdded = false;\n      if (hide) {\n        marker.setMap(null);\n      }\n    }\n  }\n\n  /**\n   * Calculates the distance between two latlng locations in km.\n   *\n   * @param p1 The first lat lng point.\n   * @param p2 The second lat lng point.\n   * @return The distance between the two points in km.\n   * @link http://www.movable-type.co.uk/scripts/latlong.html\n   */\n  private distanceBetweenPoints_(\n    p1: google.maps.LatLng,\n    p2: google.maps.LatLng\n  ): number {\n    const R = 6371; // Radius of the Earth in km\n    const dLat = ((p2.lat() - p1.lat()) * Math.PI) / 180;\n    const dLon = ((p2.lng() - p1.lng()) * Math.PI) / 180;\n    const a =\n      Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n      Math.cos((p1.lat() * Math.PI) / 180) *\n        Math.cos((p2.lat() * Math.PI) / 180) *\n        Math.sin(dLon / 2) *\n        Math.sin(dLon / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c;\n  }\n\n  /**\n   * Determines if a marker is contained in a bounds.\n   *\n   * @param marker The marker to check.\n   * @param bounds The bounds to check against.\n   * @return True if the marker is in the bounds.\n   */\n  private isMarkerInBounds_(\n    marker: google.maps.Marker,\n    bounds: google.maps.LatLngBounds\n  ): boolean {\n    return bounds.contains(marker.getPosition());\n  }\n\n  /**\n   * Adds a marker to a cluster, or creates a new cluster.\n   *\n   * @param marker The marker to add.\n   */\n  private addToClosestCluster_(marker: google.maps.Marker): void {\n    let distance = 40000; // Some large number\n    let clusterToAddTo = null;\n    for (let i = 0; i < this.clusters_.length; i++) {\n      const cluster = this.clusters_[i];\n      const center = cluster.getCenter();\n      if (center) {\n        const d = this.distanceBetweenPoints_(center, marker.getPosition());\n        if (d < distance) {\n          distance = d;\n          clusterToAddTo = cluster;\n        }\n      }\n    }\n\n    if (clusterToAddTo && clusterToAddTo.isMarkerInClusterBounds(marker)) {\n      clusterToAddTo.addMarker(marker);\n    } else {\n      const cluster = new Cluster(this);\n      cluster.addMarker(marker);\n      this.clusters_.push(cluster);\n    }\n  }\n\n  /**\n   * Creates the clusters. This is done in batches to avoid timeout errors\n   *  in some browsers when there is a huge number of markers.\n   *\n   * @param iFirst The index of the first marker in the batch of\n   *  markers to be added to clusters.\n   */\n  private createClusters_(iFirst: number): void {\n    if (!this.ready_) {\n      return;\n    }\n\n    // Cancel previous batch processing if we're working on the first batch:\n    if (iFirst === 0) {\n      google.maps.event.trigger(this, \"clusteringbegin\", this);\n\n      if (typeof this.timerRefStatic !== \"undefined\") {\n        clearTimeout(this.timerRefStatic);\n        delete this.timerRefStatic;\n      }\n    }\n\n    // Get our current map view bounds.\n    // Create a new bounds object so we don't affect the map.\n    //\n    // See Comments 9 & 11 on Issue 3651 relating to this workaround for a Google Maps bug:\n    let mapBounds: google.maps.LatLngBounds;\n\n    if (this.getMap().getZoom() > 3) {\n      mapBounds = new google.maps.LatLngBounds(\n        (this.getMap() as google.maps.Map).getBounds().getSouthWest(),\n        (this.getMap() as google.maps.Map).getBounds().getNorthEast()\n      );\n    } else {\n      mapBounds = new google.maps.LatLngBounds(\n        new google.maps.LatLng(85.02070771743472, -178.48388434375),\n        new google.maps.LatLng(-85.08136444384544, 178.00048865625)\n      );\n    }\n    const bounds = this.getExtendedBounds(mapBounds);\n\n    const iLast = Math.min(iFirst + this.batchSize_, this.markers_.length);\n\n    for (let i = iFirst; i < iLast; i++) {\n      const marker = this.markers_[i];\n      if (!marker.isAdded && this.isMarkerInBounds_(marker, bounds)) {\n        if (\n          !this.ignoreHidden_ ||\n          (this.ignoreHidden_ && marker.getVisible())\n        ) {\n          this.addToClosestCluster_(marker);\n        }\n      }\n    }\n\n    if (iLast < this.markers_.length) {\n      this.timerRefStatic = window.setTimeout(() => {\n        this.createClusters_(iLast);\n      }, 0);\n    } else {\n      delete this.timerRefStatic;\n      google.maps.event.trigger(this, \"clusteringend\", this);\n\n      for (let i = 0; i < this.clusters_.length; i++) {\n        this.clusters_[i].updateIcon();\n      }\n    }\n  }\n\n  /**\n   * The default function for determining the label text and style\n   * for a cluster icon.\n   *\n   * @param markers The array of markers represented by the cluster.\n   * @param numStyles The number of marker styles available.\n   * @return The information resource for the cluster.\n   */\n  static CALCULATOR(\n    markers: google.maps.Marker[],\n    numStyles: number\n  ): ClusterIconInfo {\n    let index = 0;\n    const count: number = markers.length;\n\n    let dv = count;\n    while (dv !== 0) {\n      dv = Math.floor(dv / 10);\n      index++;\n    }\n\n    index = Math.min(index, numStyles);\n    return {\n      text: count.toString(),\n      index: index,\n      title: \"\",\n    };\n  }\n\n  /**\n   * Generates default styles augmented with user passed values.\n   * Useful when you want to override some default values but keep untouched\n   *\n   * @param overrides override default values\n   */\n  static withDefaultStyle(overrides: ClusterIconStyle): ClusterIconStyle {\n    return {\n      textColor: \"black\",\n      textSize: 11,\n      textDecoration: \"none\",\n      textLineHeight: overrides.height,\n      fontWeight: \"bold\",\n      fontStyle: \"normal\",\n      fontFamily: \"Arial,sans-serif\",\n      backgroundPosition: \"0 0\",\n      ...overrides,\n    };\n  }\n}\n","export const MAP_STYLE = [\r\n\t{\r\n\t\t\"featureType\": \"administrative\",\r\n\t\t\"elementType\": \"labels.text.fill\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"color\": \"#444444\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"landscape\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"color\": \"#f2f2f2\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"poi\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"visibility\": \"off\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"road\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"saturation\": -100\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"lightness\": 45\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"road.highway\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"visibility\": \"simplified\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"road.arterial\",\r\n\t\t\"elementType\": \"labels.icon\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"visibility\": \"off\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"transit\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"visibility\": \"off\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"water\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"color\": \"#e2e0df\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"visibility\": \"on\"\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n];\r\n","import { ApiService } from '../../shared/api/api.service';\r\n\r\nexport class MaterialsService {\r\n\r\n\tstatic all$() {\r\n\t\treturn ApiService.get$('/materials/all.json');\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\treturn ApiService.get$('/materials/filters.json');\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\nimport { FormControl, FormGroup } from 'rxcomp-form';\nimport { combineLatest } from 'rxjs';\nimport { first, takeUntil } from 'rxjs/operators';\nimport { FilterMode } from '../../shared/filter/filter-item';\nimport { FilterService } from '../../shared/filter/filter.service';\nimport { FormService } from '../../shared/forms/form.service';\nimport { LocomotiveScrollService } from '../../shared/locomotive-scroll/locomotive-scroll.service';\nimport { MaterialsService } from './materials.service';\n\nexport class MaterialsComponent extends Component {\n\n\tonInit() {\n\t\tthis.selectedItem = null;\n\t\tthis.items = [];\n\t\tthis.filteredItems = [];\n\t\tthis.filters = {};\n\t\tconst form = this.form = new FormGroup({\n\t\t\tcategory: new FormControl(null),\n\t\t});\n\t\tconst controls = this.controls = form.controls;\n\t\tform.changes$.pipe(\n\t\t\ttakeUntil(this.unsubscribe$)\n\t\t).subscribe((_) => {\n\t\t\tthis.setFilterByKeyAndValue('category', form.value.category);\n\t\t\tthis.pushChanges();\n\t\t});\n\t\tthis.load$().pipe(\n\t\t\tfirst(),\n\t\t).subscribe(data => {\n\t\t\tthis.items = data[0];\n\t\t\tthis.filters = data[1];\n\t\t\tcontrols.category.options = FormService.toSelectOptions(this.filters.category.options);\n\t\t\tthis.onLoad();\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\tload$() {\n\t\treturn combineLatest([\n\t\t\tMaterialsService.all$(),\n\t\t\tMaterialsService.filters$(),\n\t\t]);\n\t}\n\n\tonLoad() {\n\t\tconst items = this.items;\n\t\tconst filters = this.filters;\n\t\tObject.keys(filters).forEach(key => {\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\n\t\t});\n\t\tconst initialParams = {};\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\n\t\t\tswitch (key) {\n\t\t\t\tdefault:\n\t\t\t\t\tfilter.filter = (item, value) => {\n\t\t\t\t\t\tswitch (key) {\n\t\t\t\t\t\t\tcase 'category':\n\t\t\t\t\t\t\t\treturn item.category.id === value;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t}\n\t\t});\n\t\tthis.filterService = filterService;\n\t\tthis.filters = filterService.filters;\n\t\tconst category = this.filters.category.values.length ? this.filters.category.values[0] : null;\n\t\tthis.form.patch({ category, search });\n\t\tfilterService.items$(items).pipe(\n\t\t\ttakeUntil(this.unsubscribe$),\n\t\t).subscribe(filteredItems => {\n\t\t\tthis.filteredItems = filteredItems;\n\t\t\tthis.pushChanges();\n\t\t\tLocomotiveScrollService.update();\n\t\t\t// console.log('MaterialsComponent.filteredItems', filteredItems.length);\n\t\t});\n\t}\n\n\tsetFilterByKeyAndValue(key, value) {\n\t\tconst filter = this.filters[key];\n\t\tif (filter) {\n\t\t\tif (filter.mode === FilterMode.QUERY) {\n\t\t\t\tfilter.set(value);\n\t\t\t} else {\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\n\t\t\t\t// console.log(filter.options, option);\n\t\t\t\tif (option) {\n\t\t\t\t\tfilter.set(option);\n\t\t\t\t} else {\n\t\t\t\t\tfilter.clear();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonToggle(item) {\n\t\tthis.selectedItem = this.selectedItem === item ? null : item;\n\t\t/*\n\t\tif (this.selectedItem) {\n\t\t\tconst selector = '#cat-' + item.category.id + '-' + item.id;\n\t\t\tthis.scrollTo(selector);\n\t\t}\n\t\t*/\n\t\tthis.pushChanges();\n\t}\n\n\tscrollTo(selector, event) {\n\t\tif (event) {\n\t\t\tevent.preventDefault();\n\t\t}\n\t\tconst { node } = getContext(this);\n\t\tconst target = node.querySelector(selector);\n\t\tLocomotiveScrollService.scrollTo(target, { offset: - 160 });\n\t}\n\n\tclearFilter(event, filter) {\n\t\tevent.preventDefault();\n\t\tevent.stopImmediatePropagation();\n\t\tfilter.clear();\n\t\tthis.pushChanges();\n\t}\n}\n\nMaterialsComponent.meta = {\n\tselector: '[materials]',\n};\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nconst MENUS = [];\r\n\r\nexport class MenuDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst submenus = this.submenus = document.querySelector(`.group--submenus`);\r\n\t\tconst target = this.target = document.querySelector(`#menu-${this.menu}`);\r\n\t\tconst container = this.container = target.querySelector(`.container`);\r\n\t\tthis.onOver = this.onOver.bind(this);\r\n\t\tthis.onLeave = this.onLeave.bind(this);\r\n\t\tnode.addEventListener('click', this.onOver);\r\n\t\tMENUS.push(this);\r\n\t}\r\n\r\n\tonOver(event) {\r\n\t\tevent.preventDefault();\r\n\t\tMENUS.forEach(x => x.onLeave(true));\r\n\t\tconst submenus = this.submenus;\r\n\t\tsubmenus.classList.add('active');\r\n\t\tconst target = this.target;\r\n\t\ttarget.classList.add('active');\r\n\t\tconst container = this.container;\r\n\t\tcontainer.addEventListener('mouseleave', this.onLeave);\r\n\t}\r\n\r\n\tonLeave(keepBackground) {\r\n\t\tif (keepBackground !== true) {\r\n\t\t\tconst submenus = this.submenus;\r\n\t\t\tsubmenus.classList.remove('active');\r\n\t\t}\r\n\t\tconst target = this.target;\r\n\t\ttarget.classList.remove('active');\r\n\t\tconst container = this.container;\r\n\t\tcontainer.removeEventListener('mouseleave', this.onLeave);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.onLeave();\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.removeEventListener('mouseover', this.onOver);\r\n\t}\r\n}\r\n\r\nMenuDirective.meta = {\r\n\tselector: '[menu]',\r\n\tinputs: ['menu'],\r\n};\r\n","import { ApiService } from '../../shared/api/api.service';\r\n\r\nexport class NewsService {\r\n\r\n\tstatic all$() {\r\n\t\treturn ApiService.get$('/news/all.json');\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\treturn ApiService.get$('/news/filters.json');\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\nimport { FormControl, FormGroup } from 'rxcomp-form';\nimport { combineLatest } from 'rxjs';\nimport { first, takeUntil } from 'rxjs/operators';\nimport { FilterMode } from '../../shared/filter/filter-item';\nimport { FilterService } from '../../shared/filter/filter.service';\nimport { FormService } from '../../shared/forms/form.service';\nimport { LocomotiveScrollService } from '../../shared/locomotive-scroll/locomotive-scroll.service';\nimport { NewsService } from './news.service';\n\nexport class NewsComponent extends Component {\n\n\tonInit() {\n\t\tthis.items = [];\n\t\tthis.filteredItems = [];\n\t\tthis.filters = {};\n\t\tconst form = this.form = new FormGroup({\n\t\t\tcountry: new FormControl(null),\n\t\t\tsearch: new FormControl(null),\n\t\t});\n\t\tconst controls = this.controls = form.controls;\n\t\tform.changes$.pipe(\n\t\t\ttakeUntil(this.unsubscribe$)\n\t\t).subscribe((_) => {\n\t\t\t// console.log('NewsComponent.changes$', form.value);\n\t\t\tthis.setFilterByKeyAndValue('country', form.value.country);\n\t\t\tthis.setFilterByKeyAndValue('search', form.value.search);\n\t\t\tthis.pushChanges();\n\t\t});\n\t\tthis.load$().pipe(\n\t\t\tfirst(),\n\t\t).subscribe(data => {\n\t\t\tthis.items = data[0];\n\t\t\tthis.filters = data[1];\n\t\t\tcontrols.country.options = FormService.toSelectOptions(this.filters.country.options);\n\t\t\tthis.onLoad();\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\tload$() {\n\t\treturn combineLatest([\n\t\t\tNewsService.all$(),\n\t\t\tNewsService.filters$(),\n\t\t]);\n\t}\n\n\tonLoad() {\n\t\tconst items = this.items;\n\t\tconst filters = this.filters;\n\t\tObject.keys(filters).forEach(key => {\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\n\t\t});\n\t\tconst initialParams = {};\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\n\t\t\tswitch (key) {\n\t\t\t\tdefault:\n\t\t\t\t\tfilter.filter = (item, value) => {\n\t\t\t\t\t\tswitch (key) {\n\t\t\t\t\t\t\tcase 'country':\n\t\t\t\t\t\t\t\treturn item.country.id === value;\n\t\t\t\t\t\t\tcase 'search':\n\t\t\t\t\t\t\t\treturn item.title.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\n\t\t\t\t\t\t\t\t\titem.abstract.toLowerCase().indexOf(value.toLowerCase()) !== -1\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t}\n\t\t});\n\t\tthis.filterService = filterService;\n\t\tthis.filters = filterService.filters;\n\t\tconst country = this.filters.country.values.length ? this.filters.country.values[0] : null;\n\t\tconst search = this.filters.search.values.length ? this.filters.search.values[0] : null;\n\t\tthis.form.patch({ country, search });\n\t\tfilterService.items$(items).pipe(\n\t\t\ttakeUntil(this.unsubscribe$),\n\t\t).subscribe(filteredItems => {\n\t\t\tthis.filteredItems = filteredItems;\n\t\t\tthis.pushChanges();\n\t\t\tLocomotiveScrollService.update();\n\t\t\t// console.log('NewsComponent.filteredItems', filteredItems.length);\n\t\t});\n\t}\n\n\tsetFilterByKeyAndValue(key, value) {\n\t\tconst filter = this.filters[key];\n\t\tif (filter) {\n\t\t\tif (filter.mode === FilterMode.QUERY) {\n\t\t\t\tfilter.set(value);\n\t\t\t} else {\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\n\t\t\t\t// console.log(filter.options, option);\n\t\t\t\tif (option) {\n\t\t\t\t\tfilter.set(option);\n\t\t\t\t} else {\n\t\t\t\t\tfilter.clear();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonSearch(model) {\n\t\t// console.log('NewsComponent.onSearch', this.form.value);\n\t\tthis.setFilterByKeyAndValue('country', this.form.value.country);\n\t\tthis.setFilterByKeyAndValue('search', this.form.value.search);\n\t\tthis.pushChanges();\n\t}\n\n\tclearFilter(event, filter) {\n\t\tevent.preventDefault();\n\t\tevent.stopImmediatePropagation();\n\t\tfilter.clear();\n\t\tthis.pushChanges();\n\t}\n}\n\nNewsComponent.meta = {\n\tselector: '[news]',\n};\n","import { Component } from 'rxcomp';\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\nimport { takeUntil } from 'rxjs/operators';\n\nexport class NewsletterPropositionComponent extends Component {\n\n\tonInit() {\n\t\tconst form = this.form = new FormGroup({\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator()]),\n\t\t});\n\t\tconst controls = this.controls = form.controls;\n\t\tform.changes$.pipe(\n\t\t\ttakeUntil(this.unsubscribe$)\n\t\t).subscribe((_) => {\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\tonNewsletter(event) {\n\t\tconsole.log('NewsletterPropositionComponent.onNewsletter', this.form.value);\n\t}\n}\n\nNewsletterPropositionComponent.meta = {\n\tselector: '[newsletter-proposition]',\n};\n","import { Component, getContext } from 'rxcomp';\r\nimport { first } from 'rxjs/operators';\r\nimport { HttpService } from '../../shared/http/http.service';\r\nimport { LocomotiveScrollService } from '../../shared/locomotive-scroll/locomotive-scroll.service';\r\n\r\nconst breadcumbStyle = `font-size: .8rem; text-transform: uppercase; letter-spacing: 0.075em; color: #37393b;`;\r\nconst titleStyle = `letter-spacing: 0; font-family: 'Bauer Bodoni', sans-serif; font-size: 2.9rem; margin: 0;word-wrap: break-word;text-transform: uppercase;color:#37393b;`;\r\nconst designerStyle = `font-size: .8rem; letter-spacing: 0.075em;margin-bottom: 15px;word-wrap: break-word;text-transform: uppercase;`;\r\nconst descriptionStyle = `font-size: .8rem; text-align: left;margin-bottom: 15px; letter-spacing: 0.05em;`;\r\n\r\nconst key = 'a9$hhVGHxos';\r\n\r\nexport class ProductsConfigureComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.isReady = false;\r\n\t\tthis.isComplete = false;\r\n\t\tthis.isConfiguring = false;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst iframe = this.iframe = node.querySelector('#showefy');\r\n\t\tif (!iframe) {\r\n\t\t\tthrow ('missing iframe');\r\n\t\t}\r\n\t\tthis.onEvent = this.onEvent.bind(this);\r\n\r\n\t\tHttpService.http$('POST', 'https://www.showefy.com/en/ApiExt/token/v1', { grant_type: 'client_credentials' }, 'json', 'giorgetti:AGdW%Q_8@Pe,2&#').pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(response => {\r\n\t\t\tconsole.log(response);\r\n\t\t});\r\n\r\n\t\tconst sfy = this.sfy = new SFYFrame(iframe, key, this.onEvent);\r\n\t\tsfy.init();\r\n\t\tconsole.log('ProductsConfigureComponent.onInit', sfy, iframe);\r\n\t}\r\n\r\n\tgetIframeDocument(iframe) {\r\n\t\tconst content = iframe.contentWindow || iframe.contentDocument\r\n\t\tconst iframeDocument = content.document ? content.document : content;\r\n\t\treturn iframeDocument;\r\n\t}\r\n\r\n\tonEvent(data) {\r\n\t\tconst event = JSON.parse(data);\r\n\t\tconst eventName = event.emit;\r\n\t\tif (event.status == 0) {\r\n\t\t\t// console.log('ProductsConfigureComponent.onEvent', event);\r\n\t\t\tswitch (eventName) {\r\n\t\t\t\tcase 'showefy_ready':\r\n\t\t\t\t\tthis.onReady(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'showefy_complete':\r\n\t\t\t\t\tthis.onShowefyComplete(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'start_configurator':\r\n\t\t\t\t\tthis.onStartConfigurator(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'button_pressed':\r\n\t\t\t\t\tthis.onButtonPressed(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'setButtonStatus':\r\n\t\t\t\t\tthis.onSetButtonStatus(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'getIframeSize':\r\n\t\t\t\t\tthis.onGetIframeSize(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'getProductExtData':\r\n\t\t\t\t\tthis.onGetProductExtData(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'getFastProductExtData':\r\n\t\t\t\t\tthis.onGetFastProductExtData(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif (this.isConfiguring && this.isReady && this.isComplete) {\r\n\t\t\t\tconsole.log('set taratura impaginazione configuratore');\r\n\t\t\t\tconst { node } = getContext(this);\r\n\t\t\t\t// window.scroll(0, findPos(document.getElementById('container_ifrshowefy')));\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t\tLocomotiveScrollService.scrollTo(node, { offset: -100 });\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconsole.log('ProductsConfigureComponent.onEvent.error', event.status, event.statusTxt, eventName);\r\n\t\t}\r\n\t}\r\n\r\n\tonReady(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onReady', event);\r\n\t\tthis.isReady = true;\r\n\t\tthis.addTexts();\r\n\t\tthis.addButtons();\r\n\t\tthis.addBreadcrumb();\r\n\t\treturn;\r\n\t\tconst iframeDocument = this.getIframeDocument(this.iframe);\r\n\t\tconsole.log(iframeDocument.querySelector('head'));\r\n\t\tconst style = iframeDocument.createElement('style');\r\n\t\tstyle.innerHTML = `\r\n\t\t\t* {\r\n\t\t\t\tbackground: none!important;\r\n\t\t\t}\r\n\t\t`;\r\n\t\tconst head = iframeDocument.querySelector('head');\r\n\t\thead.appendChild(style);\r\n\t}\r\n\r\n\tonShowefyComplete(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onShowefyComplete', event);\r\n\t\tif (this.isConfiguring) {\r\n\t\t\tthis.isComplete = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonStartConfigurator(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onStartConfigurator', event);\r\n\t\tthis.isConfiguring = true;\r\n\t}\r\n\r\n\tonButtonPressed(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onButtonPressed', event, 'buttonId', event.data.id);\r\n\t}\r\n\r\n\tonSetButtonStatus(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onSetButtonStatus', event);\r\n\t}\r\n\r\n\tonGetIframeSize(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onGetIframeSize', event);\r\n\t}\r\n\r\n\tonGetProductExtData(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onGetProductExtData', event);\r\n\t}\r\n\r\n\tonGetFastProductExtData(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onGetFastProductExtData', event);\r\n\t}\r\n\r\n\tfindPos(obj) {\r\n\t\tlet curtop = 0;\r\n\t\tif (obj.offsetParent) {\r\n\t\t\tdo {\r\n\t\t\t\tcurtop += obj.offsetTop;\r\n\t\t\t} while (obj = obj.offsetParent);\r\n\t\t\treturn [curtop];\r\n\t\t}\r\n\t}\r\n\r\n\t// methods\r\n\r\n\taddTexts() {\r\n\t\tconst sfy = this.sfy;\r\n\t\tconst html = sfy.HTML;\r\n\t\tlet index = 0;\r\n\t\thtml.text[index++] = /* html */`<h1 style=\"${titleStyle}\">Nome Prodotto</h1>`;\r\n\t\thtml.text[index++] = /* html */`<h5 style=\"${designerStyle}\">Designer</h5>`;\r\n\t\thtml.text[index++] = /* html */`<div style=\"${descriptionStyle}\"><p>Descrizione</p></div>`;\r\n\t\tsfy.printHTML(html);\r\n\t}\r\n\r\n\taddButtons() {\r\n\t\tconst sfy = this.sfy;\r\n\t\tconst buttons = sfy.BUTTONS;\r\n\r\n\t\tlet index = 0;\r\n\t\tbuttons.element[index] = new sfy.PROPERTIES();\r\n\t\tbuttons.element[index].visibility = true;\r\n\t\tbuttons.element[index].id = 'order';\r\n\t\tbuttons.element[index].label = new sfy.LABEL();\r\n\t\tbuttons.element[index].label.en = 'ADD TO CART';\r\n\t\tindex++;\r\n\r\n\t\tbuttons.element[index] = new sfy.PROPERTIES();\r\n\t\tbuttons.element[index].visibility = true;\r\n\t\tbuttons.element[index].id = 'save_configuration';\r\n\t\tbuttons.element[index].label = new sfy.LABEL();\r\n\t\tbuttons.element[index].label.en = 'SAVE CONFIGURATION';\r\n\t\tindex++;\r\n\r\n\t\tsfy.setButtonStatus(buttons);\r\n\t}\r\n\r\n\taddBreadcrumb() {\r\n\t\tconst sfy = this.sfy;\r\n\t\tconst breadcrumb = sfy.BREADCUMB;\r\n\r\n\t\tlet index = 0;\r\n\r\n\t\tbreadcrumb.element[index] = new sfy.PROPERTIES();\r\n\t\tbreadcrumb.element[index].visibility = true;\r\n\t\tbreadcrumb.element[index].id = 'breadcumb_home';\r\n\t\tbreadcrumb.element[index].label = new sfy.LABEL();\r\n\t\tbreadcrumb.element[index].label.en = /* html */` Home <span aria-hidden='true'>/</span>&nbsp; `;\r\n\t\tbreadcrumb.element[index].style = breadcumbStyle;\r\n\t\tindex++;\r\n\r\n\t\tbreadcrumb.element[index] = new sfy.PROPERTIES();\r\n\t\tbreadcrumb.element[index].visibility = true;\r\n\t\tbreadcrumb.element[index].id = 'breadcumb_products';\r\n\t\tbreadcrumb.element[index].label = new sfy.LABEL();\r\n\t\tbreadcrumb.element[index].label.en = /* html */` Products <span aria-hidden='true'>/</span>&nbsp; `;\r\n\t\tbreadcrumb.element[index].style = breadcumbStyle;\r\n\t\tindex++;\r\n\r\n\t\tbreadcrumb.element[index] = new sfy.PROPERTIES();\r\n\t\tbreadcrumb.element[index].visibility = true;\r\n\t\tbreadcrumb.element[index].id = 'breadcumb_products';\r\n\t\tbreadcrumb.element[index].label = new sfy.LABEL();\r\n\t\tbreadcrumb.element[index].label.en = /* html */` Nome prodotto`;\r\n\t\tbreadcrumb.element[index].style = breadcumbStyle;\r\n\t\tindex++;\r\n\r\n\t\tsfy.printBreadcumb(breadcrumb);\r\n\t}\r\n\r\n\tgetCartData() {\r\n\t\tconst sfy = this.sfy;\r\n\t\tif (sfy) {\r\n\t\t\tsfy.getProductExtData();\r\n\t\t}\r\n\t}\r\n\r\n\tgetFastData() {\r\n\t\tconst sfy = this.sfy;\r\n\t\tif (sfy) {\r\n\t\t\tsfy.getFastProductExtData();\r\n\t\t}\r\n\t}\r\n}\r\n\r\nProductsConfigureComponent.meta = {\r\n\tselector: '[products-configure]',\r\n};\r\n","import { ApiService } from '../../shared/api/api.service';\r\n\r\nexport class ProductsDetailService {\r\n\r\n\tstatic versions$() {\r\n\t\treturn ApiService.get$('/products-detail/versions.json');\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\nimport { first } from 'rxjs/operators';\nimport { environment } from '../../environment';\nimport { LocomotiveScrollService } from '../../shared/locomotive-scroll/locomotive-scroll.service';\nimport { ProductsDetailService } from './products-detail.service';\n\nexport class ProductsDetailComponent extends Component {\n\n\tonInit() {\n\t\tthis.items = [];\n\t\tthis.visibleItems = [];\n\t\tProductsDetailService.versions$().pipe(\n\t\t\tfirst(),\n\t\t).subscribe(items => {\n\t\t\tthis.items = items;\n\t\t\tthis.visibleItems = this.items.slice(0, Math.min(4, this.items.length));\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\tscrollTo(id) {\n\t\tconst { node } = getContext(this);\n\t\tconst target = node.querySelector(id);\n\t\tif (target) {\n\t\t\tLocomotiveScrollService.scrollTo(target, { offset: -200 });\n\t\t}\n\t}\n\n\tshowVersions(event) {\n\t\tthis.visibleItems = this.items.slice();\n\t\tthis.pushChanges();\n\t\tLocomotiveScrollService.update();\n\t}\n\n\tconfigureProduct(event) {\n\t\twindow.location.href = environment.slug.configureProduct;\n\t}\n}\n\nProductsDetailComponent.meta = {\n\tselector: '[products-detail]',\n};\n","import { ApiService } from '../../shared/api/api.service';\r\n\r\nexport class ProductsService {\r\n\r\n\tstatic all$() {\r\n\t\treturn ApiService.get$('/products/all.json');\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\treturn ApiService.get$('/products/filters.json');\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\nimport { FormControl, FormGroup } from 'rxcomp-form';\nimport { combineLatest } from 'rxjs';\nimport { first, takeUntil } from 'rxjs/operators';\nimport { FilterMode } from '../../shared/filter/filter-item';\nimport { FilterService } from '../../shared/filter/filter.service';\nimport { FormService } from '../../shared/forms/form.service';\nimport { LocomotiveScrollService } from '../../shared/locomotive-scroll/locomotive-scroll.service';\nimport { ProductsService } from './products.service';\n\nexport class ProductsComponent extends Component {\n\n\tonInit() {\n\t\tthis.categoryId = this.categoryId || null;\n\t\tthis.items = [];\n\t\tthis.filteredItems = [];\n\t\tthis.filters = {};\n\t\tconst form = this.form = new FormGroup({\n\t\t\tcategory: new FormControl(null),\n\t\t\tmaterial: new FormControl(null),\n\t\t\tdesigner: new FormControl(null),\n\t\t\tsearch: new FormControl(null),\n\t\t});\n\t\tconst controls = this.controls = form.controls;\n\t\tform.changes$.pipe(\n\t\t\ttakeUntil(this.unsubscribe$)\n\t\t).subscribe((_) => {\n\t\t\t// console.log('ProductsComponent.changes$', form.value);\n\t\t\tthis.setFilterByKeyAndValue('category', form.value.category);\n\t\t\tthis.setFilterByKeyAndValue('material', form.value.material);\n\t\t\tthis.setFilterByKeyAndValue('designer', form.value.designer);\n\t\t\tthis.setFilterByKeyAndValue('search', form.value.search);\n\t\t\tthis.pushChanges();\n\t\t});\n\t\tthis.load$().pipe(\n\t\t\tfirst(),\n\t\t).subscribe(data => {\n\t\t\tthis.items = data[0];\n\t\t\tthis.filters = data[1];\n\t\t\tcontrols.category.options = FormService.toSelectOptions(this.filters.category.options);\n\t\t\tcontrols.material.options = FormService.toSelectOptions(this.filters.material.options);\n\t\t\tcontrols.designer.options = FormService.toSelectOptions(this.filters.designer.options);\n\t\t\tthis.onLoad();\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\tload$() {\n\t\treturn combineLatest([\n\t\t\tProductsService.all$(),\n\t\t\tProductsService.filters$(),\n\t\t]);\n\t}\n\n\tonLoad() {\n\t\tconst items = this.items;\n\t\tconst filters = this.filters;\n\t\tObject.keys(filters).forEach(key => {\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\n\t\t});\n\t\tconst initialParams = {};\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\n\t\t\tswitch (key) {\n\t\t\t\tdefault:\n\t\t\t\t\tfilter.filter = (item, value) => {\n\t\t\t\t\t\tswitch (key) {\n\t\t\t\t\t\t\tcase 'category':\n\t\t\t\t\t\t\t\treturn item.category.id === value;\n\t\t\t\t\t\t\tcase 'material':\n\t\t\t\t\t\t\t\treturn item.materials.indexOf(value) !== -1;\n\t\t\t\t\t\t\tcase 'designer':\n\t\t\t\t\t\t\t\treturn item.designers.indexOf(value) !== -1;\n\t\t\t\t\t\t\tcase 'search':\n\t\t\t\t\t\t\t\treturn item.title.toLowerCase().indexOf(value.toLowerCase()) !== -1\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t}\n\t\t});\n\t\tthis.filterService = filterService;\n\t\tthis.filters = filterService.filters;\n\t\tconst category = this.categoryId ? this.categoryId : (this.filters.category.values.length ? this.filters.category.values[0] : null);\n\t\tconst material = this.filters.material.values.length ? this.filters.material.values[0] : null;\n\t\tconst designer = this.filters.designer.values.length ? this.filters.designer.values[0] : null;\n\t\tconst search = this.filters.search.values.length ? this.filters.search.values[0] : null;\n\t\tthis.form.patch({ category, material, designer, search });\n\t\tfilterService.items$(items).pipe(\n\t\t\ttakeUntil(this.unsubscribe$),\n\t\t).subscribe(filteredItems => {\n\t\t\tthis.filteredItems = filteredItems;\n\t\t\tthis.pushChanges();\n\t\t\tLocomotiveScrollService.update();\n\t\t\t// console.log('ProductsComponent.filteredItems', filteredItems.length);\n\t\t});\n\t}\n\n\tsetFilterByKeyAndValue(key, value) {\n\t\tconst filter = this.filters[key];\n\t\tif (filter) {\n\t\t\tif (filter.mode === FilterMode.QUERY) {\n\t\t\t\tfilter.set(value);\n\t\t\t} else {\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\n\t\t\t\t// console.log(filter.options, option);\n\t\t\t\tif (option) {\n\t\t\t\t\tfilter.set(option);\n\t\t\t\t} else {\n\t\t\t\t\tfilter.clear();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonSearch(model) {\n\t\t// console.log('ProductsComponent.onSearch', this.form.value);\n\t\tthis.setFilterByKeyAndValue('category', this.form.value.category);\n\t\tthis.setFilterByKeyAndValue('material', this.form.value.material);\n\t\tthis.setFilterByKeyAndValue('designer', this.form.value.designer);\n\t\tthis.setFilterByKeyAndValue('search', this.form.value.search);\n\t\tthis.pushChanges();\n\t}\n\n\tclearFilter(event, filter) {\n\t\tevent.preventDefault();\n\t\tevent.stopImmediatePropagation();\n\t\tfilter.clear();\n\t\tthis.pushChanges();\n\t}\n}\n\nProductsComponent.meta = {\n\tselector: '[products]',\n\tinputs: ['categoryId'],\n};\n","import { ApiService } from '../../shared/api/api.service';\r\n\r\nexport class ProjectsService {\r\n\r\n\tstatic all$() {\r\n\t\treturn ApiService.get$('/projects/all.json');\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\treturn ApiService.get$('/projects/filters.json');\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\nimport { FormControl, FormGroup } from 'rxcomp-form';\nimport { combineLatest } from 'rxjs';\nimport { first, takeUntil } from 'rxjs/operators';\nimport { FilterMode } from '../../shared/filter/filter-item';\nimport { FilterService } from '../../shared/filter/filter.service';\nimport { FormService } from '../../shared/forms/form.service';\nimport { LocomotiveScrollService } from '../../shared/locomotive-scroll/locomotive-scroll.service';\nimport { ProjectsService } from './projects.service';\n\nexport class ProjectsComponent extends Component {\n\n\tonInit() {\n\t\tthis.items = [];\n\t\tthis.filteredItems = [];\n\t\tthis.filters = {};\n\t\tconst form = this.form = new FormGroup({\n\t\t\tcategory: new FormControl(null),\n\t\t\tsearch: new FormControl(null),\n\t\t});\n\t\tconst controls = this.controls = form.controls;\n\t\tform.changes$.pipe(\n\t\t\ttakeUntil(this.unsubscribe$)\n\t\t).subscribe((_) => {\n\t\t\t// console.log('ProjectsComponent.changes$', form.value);\n\t\t\tthis.setFilterByKeyAndValue('category', form.value.category);\n\t\t\tthis.setFilterByKeyAndValue('search', form.value.search);\n\t\t\tthis.pushChanges();\n\t\t});\n\t\tthis.load$().pipe(\n\t\t\tfirst(),\n\t\t).subscribe(data => {\n\t\t\tthis.items = data[0];\n\t\t\tthis.filters = data[1];\n\t\t\tcontrols.category.options = FormService.toSelectOptions(this.filters.category.options);\n\t\t\tthis.onLoad();\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\tload$() {\n\t\treturn combineLatest([\n\t\t\tProjectsService.all$(),\n\t\t\tProjectsService.filters$(),\n\t\t]);\n\t}\n\n\tonLoad() {\n\t\tconst items = this.items;\n\t\tconst filters = this.filters;\n\t\tObject.keys(filters).forEach(key => {\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\n\t\t});\n\t\tconst initialParams = {};\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\n\t\t\tswitch (key) {\n\t\t\t\tdefault:\n\t\t\t\t\tfilter.filter = (item, value) => {\n\t\t\t\t\t\tswitch (key) {\n\t\t\t\t\t\t\tcase 'category':\n\t\t\t\t\t\t\t\treturn item.category.id === value;\n\t\t\t\t\t\t\tcase 'search':\n\t\t\t\t\t\t\t\treturn item.title.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\n\t\t\t\t\t\t\t\t\titem.country.toLowerCase().indexOf(value.toLowerCase()) !== -1\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t}\n\t\t});\n\t\tthis.filterService = filterService;\n\t\tthis.filters = filterService.filters;\n\t\tconst category = this.filters.category.values.length ? this.filters.category.values[0] : null;\n\t\tconst search = this.filters.search.values.length ? this.filters.search.values[0] : null;\n\t\tthis.form.patch({ category, search });\n\t\tfilterService.items$(items).pipe(\n\t\t\ttakeUntil(this.unsubscribe$),\n\t\t).subscribe(filteredItems => {\n\t\t\tthis.filteredItems = filteredItems;\n\t\t\tthis.pushChanges();\n\t\t\tLocomotiveScrollService.update();\n\t\t\t// console.log('ProjectsComponent.filteredItems', filteredItems.length);\n\t\t});\n\t}\n\n\tsetFilterByKeyAndValue(key, value) {\n\t\tconst filter = this.filters[key];\n\t\tif (filter) {\n\t\t\tif (filter.mode === FilterMode.QUERY) {\n\t\t\t\tfilter.set(value);\n\t\t\t} else {\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\n\t\t\t\t// console.log(filter.options, option);\n\t\t\t\tif (option) {\n\t\t\t\t\tfilter.set(option);\n\t\t\t\t} else {\n\t\t\t\t\tfilter.clear();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonSearch(model) {\n\t\t// console.log('ProjectsComponent.onSearch', this.form.value);\n\t\tthis.setFilterByKeyAndValue('category', this.form.value.category);\n\t\tthis.setFilterByKeyAndValue('search', this.form.value.search);\n\t\tthis.pushChanges();\n\t}\n\n\tclearFilter(event, filter) {\n\t\tevent.preventDefault();\n\t\tevent.stopImmediatePropagation();\n\t\tfilter.clear();\n\t\tthis.pushChanges();\n\t}\n}\n\nProjectsComponent.meta = {\n\tselector: '[projects]',\n};\n","import { map } from 'rxjs/operators';\r\nimport { ApiService } from '../../shared/api/api.service';\r\n\r\nexport class ReservedAreaService {\r\n\r\n\tstatic all$() {\r\n\t\treturn ApiService.get$('/reserved-area/all.json').pipe(\r\n\t\t\tmap(items => {\r\n\t\t\t\titems.forEach(x => {\r\n\t\t\t\t\tx.title = ReservedAreaService.toTitleCase(x.title.replace(/_/g, ' '));\r\n\t\t\t\t});\r\n\t\t\t\treturn items;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic toTitleCase(sentence, seps = ' _-/') {\r\n\t\tconst capitalize = str => str.length ? str[0].toUpperCase() + str.slice(1).toLowerCase() : '';\r\n\t\tconst escape = str => str.replace(/./g, c => `\\\\${c}`);\r\n\t\tlet wordPattern = new RegExp(`[^${escape(seps)}]+`, 'g');\r\n\t\treturn sentence.replace(wordPattern, capitalize);\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\nimport { first, takeUntil, tap } from 'rxjs/operators';\nimport { LocomotiveScrollService } from '../../shared/locomotive-scroll/locomotive-scroll.service';\nimport { UserService } from '../user/user.service';\nimport { ReservedAreaService } from './reserved-area.service';\n\nexport class ReservedAreaComponent extends Component {\n\n\tonInit() {\n\t\tthis.user = undefined;\n\t\tthis.items = [];\n\t\tthis.tree = [];\n\t\tthis.files = [];\n\t\tthis.visibleFiles = [];\n\t\tthis.item = null;\n\t\tthis.load$().pipe(\n\t\t\tfirst(),\n\t\t).subscribe();\n\t\tUserService.me$().pipe(\n\t\t\ttakeUntil(this.unsubscribe$),\n\t\t).subscribe(user => {\n\t\t\tconsole.log('ReservedAreaComponent.user', user);\n\t\t\tthis.user = user;\n\t\t\tthis.pushChanges();\n\t\t\tLocomotiveScrollService.update();\n\t\t});\n\t}\n\n\tload$() {\n\t\treturn ReservedAreaService.all$().pipe(\n\t\t\ttap(items => {\n\t\t\t\tthis.items = items;\n\t\t\t\tthis.tree = this.getTree(items);\n\t\t\t\tthis.pushChanges();\n\t\t\t}),\n\t\t);\n\t}\n\n\tgetTree(items, parentId) {\n\t\tlet tree = items.filter(x => x.parentId === parentId && x.type === 'folder').map(x => {\n\t\t\tconst item = Object.assign({}, x);\n\t\t\titem.items = this.getTree(items, x.id);\n\t\t\treturn item;\n\t\t});\n\t\treturn tree;\n\t}\n\n\tonOpen(item) {\n\t\tif (item.active) {\n\t\t\tthis.item = item;\n\t\t\tthis.files = this.items.filter(x => x.type === 'file' && x.parentId === item.id);\n\t\t\tthis.visibleFiles = this.files.slice(0, Math.min(8, this.files.length));\n\t\t\tthis.pushChanges();\n\t\t\tLocomotiveScrollService.update();\n\t\t}\n\t}\n\n\tshowMore(event) {\n\t\tthis.visibleFiles = this.files.slice();\n\t\tthis.pushChanges();\n\t\tLocomotiveScrollService.update();\n\t}\n\n\tonProjectRegistration(event) {\n\t\tconsole.log('ReservedAreaComponent.onProjectRegistration', event);\n\t}\n\n\tscrollTo(selector, event) {\n\t\tif (event) {\n\t\t\tevent.preventDefault();\n\t\t}\n\t\tconst { node } = getContext(this);\n\t\tconst target = node.querySelector(selector);\n\t\tLocomotiveScrollService.scrollTo(target, { offset: - 160 });\n\t}\n}\n\nReservedAreaComponent.meta = {\n\tselector: '[reserved-area]',\n};\n","import { map } from 'rxjs/operators';\r\nimport { ApiService } from '../../shared/api/api.service';\r\n\r\nexport class StoreLocatorService {\r\n\r\n\tstatic all$() {\r\n\t\treturn ApiService.get$('/store-locator/all.json').pipe(\r\n\t\t\tmap(items => items.sort((a, b) => {\r\n\t\t\t\treturn a.rank - b.rank;\r\n\t\t\t})),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\treturn ApiService.get$('/store-locator/filters.json');\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\nimport { FormControl, FormGroup } from 'rxcomp-form';\nimport { combineLatest } from 'rxjs';\nimport { first, takeUntil } from 'rxjs/operators';\nimport { FilterMode } from '../../shared/filter/filter-item';\nimport { FilterService } from '../../shared/filter/filter.service';\nimport { FormService } from '../../shared/forms/form.service';\nimport { LocomotiveScrollService } from '../../shared/locomotive-scroll/locomotive-scroll.service';\nimport { StoreLocatorService } from './store-locator.service';\n\nexport class StoreLocatorComponent extends Component {\n\n\tonInit() {\n\t\tthis.items = [];\n\t\tthis.filteredItems = [];\n\t\tthis.visibleItems = [];\n\t\tthis.filters = {};\n\t\tconst form = this.form = new FormGroup({\n\t\t\tcountry: new FormControl(null),\n\t\t\tcategory: new FormControl(null),\n\t\t\tsearch: new FormControl(null),\n\t\t});\n\t\tconst controls = this.controls = form.controls;\n\t\tform.changes$.pipe(\n\t\t\ttakeUntil(this.unsubscribe$)\n\t\t).subscribe((_) => {\n\t\t\t// console.log('StoreLocatorComponent.changes$', form.value);\n\t\t\tthis.setFilterByKeyAndValue('country', form.value.country);\n\t\t\tthis.setFilterByKeyAndValue('category', form.value.category);\n\t\t\tthis.setFilterByKeyAndValue('search', form.value.search);\n\t\t\tthis.pushChanges();\n\t\t});\n\t\tthis.load$().pipe(\n\t\t\tfirst(),\n\t\t).subscribe(data => {\n\t\t\tthis.items = data[0];\n\t\t\tthis.filters = data[1];\n\t\t\tcontrols.country.options = FormService.toSelectOptions(this.filters.country.options);\n\t\t\tcontrols.category.options = FormService.toSelectOptions(this.filters.category.options);\n\t\t\tthis.onLoad();\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\tload$() {\n\t\treturn combineLatest([\n\t\t\tStoreLocatorService.all$(),\n\t\t\tStoreLocatorService.filters$(),\n\t\t]);\n\t}\n\n\tonLoad() {\n\t\tconst items = this.items;\n\t\tconst filters = this.filters;\n\t\tObject.keys(filters).forEach(key => {\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\n\t\t});\n\t\tconst initialParams = {};\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\n\t\t\tswitch (key) {\n\t\t\t\tdefault:\n\t\t\t\t\tfilter.filter = (item, value) => {\n\t\t\t\t\t\tswitch (key) {\n\t\t\t\t\t\t\tcase 'country':\n\t\t\t\t\t\t\t\treturn item.country && item.country.id === value;\n\t\t\t\t\t\t\tcase 'category':\n\t\t\t\t\t\t\t\treturn item.category && item.category.id === value;\n\t\t\t\t\t\t\tcase 'search':\n\t\t\t\t\t\t\t\treturn item.name.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\n\t\t\t\t\t\t\t\t\t// item.address.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\n\t\t\t\t\t\t\t\t\titem.city.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\n\t\t\t\t\t\t\t\t\titem.country.name.toLowerCase().indexOf(value.toLowerCase()) !== -1\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t}\n\t\t});\n\t\tthis.filterService = filterService;\n\t\tthis.filters = filterService.filters;\n\t\tconst country = this.filters.country.values.length ? this.filters.country.values[0] : null;\n\t\tconst category = this.filters.category.values.length ? this.filters.category.values[0] : null;\n\t\tconst search = this.filters.search.values.length ? this.filters.search.values[0] : null;\n\t\tthis.form.patch({ country, category, search });\n\t\tfilterService.items$(items).pipe(\n\t\t\ttakeUntil(this.unsubscribe$),\n\t\t).subscribe(filteredItems => {\n\t\t\tthis.filteredItems = filteredItems;\n\t\t\tthis.visibleItems = filteredItems.slice(0, Math.min(12, filteredItems.length));\n\t\t\tthis.pushChanges();\n\t\t\tLocomotiveScrollService.update();\n\t\t\t// console.log('StoreLocatorComponent.filteredItems', filteredItems.length);\n\t\t});\n\t}\n\n\tshowMore(event) {\n\t\tthis.visibleItems = this.filteredItems.slice();\n\t\tthis.pushChanges();\n\t\tLocomotiveScrollService.update();\n\t}\n\n\tsetFilterByKeyAndValue(key, value) {\n\t\tconst filter = this.filters[key];\n\t\tif (filter) {\n\t\t\tif (filter.mode === FilterMode.QUERY) {\n\t\t\t\tfilter.set(value);\n\t\t\t} else {\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\n\t\t\t\t// console.log(filter.options, option);\n\t\t\t\tif (option) {\n\t\t\t\t\tfilter.set(option);\n\t\t\t\t} else {\n\t\t\t\t\tfilter.clear();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonSearch(model) {\n\t\t// console.log('StoreLocatorComponent.onSearch', this.form.value);\n\t\tthis.setFilterByKeyAndValue('country', this.form.value.country);\n\t\tthis.setFilterByKeyAndValue('category', this.form.value.category);\n\t\tthis.setFilterByKeyAndValue('search', this.form.value.search);\n\t\tthis.pushChanges();\n\t}\n\n\tclearFilter(event, filter) {\n\t\tevent.preventDefault();\n\t\tevent.stopImmediatePropagation();\n\t\tfilter.clear();\n\t\tthis.pushChanges();\n\t}\n}\n\nStoreLocatorComponent.meta = {\n\tselector: '[store-locator]',\n};\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class SubmenuDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst items = Array.prototype.slice.call(node.querySelectorAll('[data-picture]'));\r\n\t\tconst target = node.querySelector('[data-target]');\r\n\t\tgsap.set(target, { opacity: 1 });\r\n\t\titems.forEach(item => {\r\n\t\t\titem.addEventListener('mouseover', (event) => {\r\n\t\t\t\tconst picture = item.getAttribute('data-picture');\r\n\t\t\t\tgsap.set(target, { opacity: 0 });\r\n\t\t\t\ttarget.onload = () => {\r\n\t\t\t\t\tgsap.to(target, {\r\n\t\t\t\t\t\tduration: 0.5,\r\n\t\t\t\t\t\tdelay: 0.1,\r\n\t\t\t\t\t\topacity: 1,\r\n\t\t\t\t\t\tease: Power4.easeOut,\r\n\t\t\t\t\t\toverwrite: 'all',\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\ttarget.src = picture;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nSubmenuDirective.meta = {\r\n\tselector: '[submenu]'\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { Subject } from 'rxjs';\r\n\r\nexport class SwiperDirective extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 'auto',\r\n\t\t\tspaceBetween: 0,\r\n\t\t\tcenteredSlides: true,\r\n\t\t\tspeed: 600,\r\n\t\t\tautoplay: {\r\n\t\t\t\tdelay: 5000,\r\n\t\t\t},\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t}\r\n\r\n\tget enabled() {\r\n\t\treturn !window.matchMedia('print').matches;\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tthis.swiperInitOrUpdate_();\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners_();\r\n\t\tthis.swiperDestroy_();\r\n\t}\r\n\r\n\tonBeforePrint() {\r\n\t\tthis.swiperDestroy_();\r\n\t}\r\n\r\n\tslideToIndex(index) {\r\n\t\t// console.log('SwiperDirective.slideToIndex', index);\r\n\t\tif (this.swiper) {\r\n\t\t\tthis.swiper.slideTo(index);\r\n\t\t}\r\n\t}\r\n\r\n\thasPrev() {\r\n\t\tconst swiper = this.swiper;\r\n\t\tif (swiper && swiper.activeIndex > 0 && swiper.slides.length > swiper.activeIndex) {\r\n\t\t\t// console.log('SwiperDirective.hasPrev', swiper.activeIndex, swiper.realIndex, swiper.slides);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\r\n\thasNext() {\r\n\t\tconst swiper = this.swiper;\r\n\t\tif (swiper) {\r\n\t\t\tconst slidesPerView = swiper.params.slidesPerView || 1;\r\n\t\t\t// console.log('SwiperDirective.hasNext', swiper.slides.length, swiper.params.slidesPerView);\r\n\t\t\tif (swiper.activeIndex < swiper.slides.length - slidesPerView) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tslidePrev() {\r\n\t\tconst swiper = this.swiper;\r\n\t\tif (this.hasPrev()) {\r\n\t\t\t// console.log('SwiperDirective.slidePrev', swiper.activeIndex, swiper.realIndex, swiper.slides);\r\n\t\t\tswiper.slideTo(swiper.activeIndex - 1);\r\n\t\t}\r\n\t}\r\n\r\n\tslideNext() {\r\n\t\tconst swiper = this.swiper;\r\n\t\tif (this.hasNext()) {\r\n\t\t\t// console.log('SwiperDirective.slideNext', swiper.activeIndex, swiper.realIndex, swiper.slides);\r\n\t\t\tswiper.slideTo(swiper.activeIndex + 1);\r\n\t\t}\r\n\t}\r\n\r\n\tinit_(target) {\r\n\t\tthis.events$ = new Subject();\r\n\t\tif (this.enabled) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\ttarget = target || node;\r\n\t\t\tthis.target = target;\r\n\t\t\tgsap.set(target, { opacity: 0 });\r\n\t\t\tthis.index = 0;\r\n\t\t\tconst on = this.options.on || {};\r\n\t\t\ton.slideChange = () => {\r\n\t\t\t\tconst swiper = this.swiper;\r\n\t\t\t\tif (swiper) {\r\n\t\t\t\t\tthis.index = swiper.activeIndex;\r\n\t\t\t\t\tthis.events$.next(this.index);\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.options.on = on;\r\n\t\t\tthis.addListeners_();\r\n\t\t}\r\n\t}\r\n\r\n\taddListeners_() {\r\n\t\tthis.onBeforePrint = this.onBeforePrint.bind(this);\r\n\t\twindow.addEventListener('beforeprint', this.onBeforePrint);\r\n\t\t/*\r\n\t\tscope.$on('onResize', ($scope) => {\r\n\t\t\tthis.onResize(scope, element, attributes);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\tremoveListeners_() {\r\n\t\twindow.removeEventListener('beforeprint', this.onBeforePrint);\r\n\t}\r\n\r\n\tswiperInitOrUpdate_() {\r\n\t\tif (this.enabled) {\r\n\t\t\tconst target = this.target;\r\n\t\t\tif (this.swiper) {\r\n\t\t\t\tthis.swiper.update();\r\n\t\t\t} else {\r\n\t\t\t\tlet swiper;\r\n\t\t\t\tconst on = this.options.on || (this.options.on = {});\r\n\t\t\t\tconst callback = on.init;\r\n\t\t\t\tif (!on.init || !on.init.swiperDirectiveInit) {\r\n\t\t\t\t\ton.init = function() {\r\n\t\t\t\t\t\tgsap.to(target, {\r\n\t\t\t\t\t\t\tduration: 0.4,\r\n\t\t\t\t\t\t\topacity: 1,\r\n\t\t\t\t\t\t\tease: Power2.easeOut,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tif (typeof callback === 'function') {\r\n\t\t\t\t\t\t\t\tcallback.apply(this, [swiper, element, scope]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, 1);\r\n\t\t\t\t\t};\r\n\t\t\t\t\ton.init.swiperDirectiveInit = true;\r\n\t\t\t\t}\r\n\t\t\t\tgsap.set(target, { opacity: 1 });\r\n\t\t\t\tswiper = new Swiper(target, this.options);\r\n\t\t\t\t// console.log(swiper);\r\n\t\t\t\tthis.swiper = swiper;\r\n\t\t\t\tthis.swiper._opening = true;\r\n\t\t\t\ttarget.classList.add('swiper-init');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tswiperDestroy_() {\r\n\t\tif (this.swiper) {\r\n\t\t\tthis.swiper.destroy();\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nSwiperDirective.meta = {\r\n\tselector: '[swiper]',\r\n\tinputs: ['consumer']\r\n};\r\n","import { SwiperDirective } from '../../shared/swiper/swiper.directive';\r\n\r\nexport class SwiperGalleryDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 'auto',\r\n\t\t\tspaceBetween: 40,\r\n\t\t\tspeed: 600,\r\n\t\t\tcenteredSlides: true,\r\n\t\t\tloop: true,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t\t// console.log('SwiperGalleryDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperGalleryDirective.meta = {\r\n\tselector: '[swiper-gallery]'\r\n};\r\n","import { SwiperDirective } from '../../shared/swiper/swiper.directive';\r\n\r\nexport class SwiperHomepageDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1,\r\n\t\t\tspaceBetween: 0,\r\n\t\t\tspeed: 600,\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t\t// console.log('SwiperHomepageDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperHomepageDirective.meta = {\r\n\tselector: '[swiper-homepage]'\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { SwiperDirective } from '../../shared/swiper/swiper.directive';\r\n\r\nexport class SwiperNewsPropositionDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1,\r\n\t\t\tspaceBetween: 30,\r\n\t\t\tbreakpoints: {\r\n\t\t\t\t768: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 40\r\n\t\t\t\t},\r\n\t\t\t\t1024: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 50\r\n\t\t\t\t},\r\n\t\t\t\t1440: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 60\r\n\t\t\t\t},\r\n\t\t\t\t1920: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 70\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tspeed: 600,\r\n\t\t\tcenteredSlides: false,\r\n\t\t\tloop: false,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = node.querySelector('.swiper-container');\r\n\t\tthis.init_(target);\r\n\t\t// console.log('SwiperNewsPropositionDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperNewsPropositionDirective.meta = {\r\n\tselector: '[swiper-news-proposition]'\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { SwiperDirective } from '../../shared/swiper/swiper.directive';\r\n\r\nexport class SwiperProductsPropositionDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1.5,\r\n\t\t\tspaceBetween: 30,\r\n\t\t\tbreakpoints: {\r\n\t\t\t\t768: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 40\r\n\t\t\t\t},\r\n\t\t\t\t1024: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 50\r\n\t\t\t\t},\r\n\t\t\t\t1440: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 60\r\n\t\t\t\t},\r\n\t\t\t\t1920: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 70\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tspeed: 600,\r\n\t\t\tcenteredSlides: false,\r\n\t\t\tloop: false,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = node.querySelector('.swiper-container');\r\n\t\tthis.init_(target);\r\n\t\t// console.log('SwiperProductsPropositionDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperProductsPropositionDirective.meta = {\r\n\tselector: '[swiper-products-proposition]'\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { SwiperDirective } from '../../shared/swiper/swiper.directive';\r\n\r\nexport class SwiperProjectsPropositionDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1.5,\r\n\t\t\tspaceBetween: 30,\r\n\t\t\tbreakpoints: {\r\n\t\t\t\t768: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 40\r\n\t\t\t\t},\r\n\t\t\t\t1024: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 50\r\n\t\t\t\t},\r\n\t\t\t\t1440: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 60\r\n\t\t\t\t},\r\n\t\t\t\t1920: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 70\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tspeed: 600,\r\n\t\t\tcenteredSlides: false,\r\n\t\t\tloop: false,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = node.querySelector('.swiper-container');\r\n\t\tthis.init_(target);\r\n\t\t// console.log('SwiperProjectsPropositionDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperProjectsPropositionDirective.meta = {\r\n\tselector: '[swiper-projects-proposition]'\r\n};\r\n","import { Component } from 'rxcomp';\r\n\r\nexport class TreeComponent extends Component {\r\n\r\n\thasItems(item) {\r\n\t\treturn item.items && item.items.length > 0;\r\n\t}\r\n\r\n\tonClick(item) {\r\n\t\tthis.tree.forEach(x => {\r\n\t\t\tx.active = x.id === item.id ? (this.hasItems(item) ? !item.active : true) : false;\r\n\t\t});\r\n\t\tif (item.active) {\r\n\t\t\tthis.open.next(item);\r\n\t\t}\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonOpen(item) {\r\n\t\tthis.open.next(item);\r\n\t}\r\n\r\n}\r\n\r\nTreeComponent.meta = {\r\n\tselector: '[tree]',\r\n\tinputs: ['tree'],\r\n\toutputs: ['open'],\r\n\ttemplate: /* html */ `\r\n\t\t<li class=\"folder\" [class]=\"{ active: item.active }\" *for=\"let item of tree\">\r\n\t\t\t<span [innerHTML]=\"item.title\" (click)=\"onClick(item)\"></span>\r\n\t\t\t<ul [tree]=\"item.items\" (open)=\"onOpen($event)\"></ul>\r\n\t\t</li>\r\n\t`\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { GtmService } from '../../shared/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../shared/locomotive-scroll/locomotive-scroll.service';\r\nimport { UserService } from './user.service';\r\n\r\nexport class UserForgotComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tform.patch({\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('UserForgotComponent.onSubmit', form.value);\r\n\t\tif (form.valid) {\r\n\t\t\tform.submitted = true;\r\n\t\t\tUserService.forgot$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\tconsole.log('UserForgotComponent.onSubmit', response);\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Forgot\",\r\n\t\t\t\t\t'form_name': \"Recupero Password\"\r\n\t\t\t\t});\r\n\t\t\t\tform.reset();\r\n\t\t\t\tthis.forgot.next(true);\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('UserForgotComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tform.submitted = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonSignIn() {\r\n\t\tthis.viewSignIn.next();\r\n\t}\r\n\r\n\tonSignUp() {\r\n\t\tthis.viewSignUp.next();\r\n\t}\r\n}\r\n\r\nUserForgotComponent.meta = {\r\n\tselector: '[user-forgot]',\r\n\toutputs: ['forgot', 'viewSignIn', 'viewSignUp'],\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { ModalService } from './modal.service';\r\n\r\nexport class ModalOutletComponent extends Component {\r\n\tget modal() {\r\n\t\treturn this.modal_;\r\n\t}\r\n\r\n\tset modal(modal) {\r\n\t\t// console.log('ModalOutletComponent set modal', modal, this);\r\n\t\tconst { module } = getContext(this);\r\n\t\tif (this.modal_ && this.modal_.node) {\r\n\t\t\tmodule.remove(this.modal_.node, this);\r\n\t\t\tthis.modalNode.removeChild(this.modal_.node);\r\n\t\t}\r\n\t\tif (modal && modal.node) {\r\n\t\t\tthis.modal_ = modal;\r\n\t\t\tthis.modalNode.appendChild(modal.node);\r\n\t\t\tconst instances = module.compile(modal.node);\r\n\t\t}\r\n\t\tthis.modal_ = modal;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.modalNode = node.querySelector('.modal-outlet__modal');\r\n\t\tModalService.modal$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(modal => {\r\n\t\t\tthis.modal = modal;\r\n\t\t});\r\n\t}\r\n\r\n\treject(event) {\r\n\t\tModalService.reject();\r\n\t}\r\n}\r\n\r\nModalOutletComponent.meta = {\r\n\tselector: '[modal-outlet]',\r\n\ttemplate: /* html */ `\r\n\t<div class=\"modal-outlet__container\" [class]=\"{ active: modal }\">\r\n\t\t<div class=\"modal-outlet__background\" (click)=\"reject($event)\"></div>\r\n\t\t<div class=\"modal-outlet__modal\"></div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { UserService, UserViews } from './user.service';\r\n\r\nexport class UserComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.views = UserViews;\r\n\t\tthis.view = this.view || UserViews.SIGN_UP;\r\n\t}\r\n\r\n\tsetView(view) {\r\n\t\tthis.view = view;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonViewForgot(event) {\r\n\t\t// console.log('UserComponent.onForgot');\r\n\t\tthis.setView(UserViews.FORGOTTEN);\r\n\t}\r\n\r\n\tonViewSignIn(event) {\r\n\t\t// console.log('UserComponent.onSignIn');\r\n\t\tthis.setView(UserViews.SIGN_IN);\r\n\t}\r\n\r\n\tonViewSignUp(event) {\r\n\t\t// console.log('UserComponent.onSignUp');\r\n\t\tthis.setView(UserViews.SIGN_UP);\r\n\t}\r\n\r\n\tonSignIn(user) {\r\n\t\tconsole.log('UserComponent.onSignIn', user);\r\n\t\tUserService.setUser(user);\r\n\t\tif (this.navTo) {\r\n\t\t\twindow.location.href = this.navTo;\r\n\t\t}\r\n\t\t// nav to profile\r\n\t}\r\n\r\n\tonSignUp(user) {\r\n\t\tconsole.log('UserComponent.onSignUp', user);\r\n\t\tUserService.setUser(user);\r\n\t\tif (this.navTo) {\r\n\t\t\twindow.location.href = this.navTo;\r\n\t\t}\r\n\t\t// nav to profile\r\n\t}\r\n\r\n\tonForgot(email) {\r\n\t\t/*\r\n\t\tconsole.log('UserComponent.onForgot', email);\r\n\t\tthis.setView(UserViews.SIGN_IN);\r\n\t\t*/\r\n\t}\r\n}\r\n\r\nUserComponent.meta = {\r\n\tselector: '[user]',\r\n\tinputs: ['navTo', 'view']\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { LocomotiveScrollService } from '../../shared/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalOutletComponent } from '../../shared/modal/modal-outlet.component';\r\nimport { ModalService } from '../../shared/modal/modal.service';\r\nimport { UserComponent } from './user.component';\r\nimport { UserViews } from './user.service';\r\n\r\nexport class UserModalComponent extends UserComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tconst data = parentInstance.modal.data;\r\n\t\t\tthis.view = data.view;\r\n\t\t\t// console.log('UserModalComponent.onInit', data);\r\n\t\t}\r\n\t\tLocomotiveScrollService.stop();\r\n\t}\r\n\r\n\tsetView(view) {\r\n\t\tthis.view = view;\r\n\t\tthis.pushChanges();\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = window.innerWidth >= 1024 ? node.querySelector('.modal__inner') : node;\r\n\t\ttarget.scrollTo(0, 0);\r\n\t}\r\n\r\n\tonViewForgot() {\r\n\t\tconsole.log('UserModalComponent.onViewForgot');\r\n\t\tthis.setView(UserViews.FORGOTTEN);\r\n\t}\r\n\r\n\tonViewSignIn() {\r\n\t\tconsole.log('UserModalComponent.onViewSignIn');\r\n\t\tthis.setView(UserViews.SIGN_IN);\r\n\t}\r\n\r\n\tonViewSignUp() {\r\n\t\tconsole.log('UserModalComponent.onViewSignUp');\r\n\t\tthis.setView(UserViews.SIGN_UP);\r\n\t}\r\n\r\n\tonClose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n\tonSignUp(user) {\r\n\t\t// console.log('UserModalComponent.onSignUp', user);\r\n\t\tModalService.resolve(user);\r\n\t}\r\n\r\n\tonSignIn(user) {\r\n\t\t// console.log('UserModalComponent.onSignIn', user);\r\n\t\tModalService.resolve(user);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tLocomotiveScrollService.start();\r\n\t}\r\n}\r\n\r\nUserModalComponent.meta = {\r\n\tselector: '[user-modal]'\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { GtmService } from '../../shared/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../shared/locomotive-scroll/locomotive-scroll.service';\r\nimport { UserService } from './user.service';\r\n\r\nexport class UserSigninComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tpassword: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tform.patch({\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tpassword: '********',\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('UserSigninComponent.onSubmit', form.value);\r\n\t\tif (form.valid) {\r\n\t\t\tform.submitted = true;\r\n\t\t\tUserService.signin$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\tconsole.log('UserSigninComponent.onSubmit', response);\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Signin\",\r\n\t\t\t\t\t'form_name': \"Login\"\r\n\t\t\t\t});\r\n\t\t\t\tform.reset();\r\n\t\t\t\tthis.signIn.next(response);\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('UserSigninComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tform.submitted = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonForgot(event) {\r\n\t\tthis.viewForgot.next();\r\n\t}\r\n\r\n\tonSignUp(event) {\r\n\t\tthis.viewSignUp.next();\r\n\t}\r\n}\r\n\r\nUserSigninComponent.meta = {\r\n\tselector: '[user-signin]',\r\n\toutputs: ['signIn', 'viewForgot', 'viewSignUp'],\r\n};\r\n","import { FormValidator } from 'rxcomp-form';\r\n\r\nexport default function RequiredIfValidator(fieldName, formGroup) {\r\n\r\n\treturn new FormValidator((value) => {\r\n\t\tconst field = formGroup ? formGroup.get(fieldName) : null;\r\n\t\treturn field && field.value && !value ? { required: { value: value, requiredIf: fieldName } } : null;\r\n\t});\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { FormService } from '../../shared/forms/form.service';\r\nimport MatchValidator from '../../shared/forms/match.validator';\r\nimport RequiredIfValidator from '../../shared/forms/required-if.validator';\r\nimport { GtmService } from '../../shared/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../shared/locomotive-scroll/locomotive-scroll.service';\r\nimport { UserService } from './user.service';\r\n\r\nexport class UserSignupComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tlastName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcountry: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcity: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcompany: new FormControl(null),\r\n\t\t\toccupation: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tpassword: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tpasswordConfirm: new FormControl(null, [Validators.RequiredValidator(), MatchValidator('password', form)]),\r\n\t\t\tprivacy: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tnewsletter: new FormControl(null),\r\n\t\t\tnewsletterLanguage: new FormControl(null, [RequiredIfValidator('newsletter', form)]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn UserService.data$().pipe(\r\n\t\t\ttap(data => {\r\n\t\t\t\tconst controls = this.controls;\r\n\t\t\t\tcontrols.country.options = FormService.toSelectOptions(data.country.options);\r\n\t\t\t\tcontrols.occupation.options = FormService.toSelectOptions(data.occupation.options);\r\n\t\t\t\tcontrols.newsletterLanguage.options = FormService.toSelectOptions(data.newsletterLanguage.options);\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tconst controls = this.controls;\r\n\t\tconst country = controls.country.options.length > 1 ? controls.country.options[1].id : null;\r\n\t\tconst occupation = controls.occupation.options.length > 1 ? controls.occupation.options[1].id : null;\r\n\t\tform.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\tcountry: country,\r\n\t\t\tcity: 'Pesaro',\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\toccupation: occupation,\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tpassword: '********',\r\n\t\t\tpasswordConfirm: '********',\r\n\t\t\tprivacy: true,\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('UserSignupComponent.onSubmit', form.value);\r\n\t\tif (form.valid) {\r\n\t\t\tform.submitted = true;\r\n\t\t\tUserService.signup$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\tconsole.log('UserSignupComponent.onSubmit', response);\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Registration\",\r\n\t\t\t\t\t'form_name': \"Registrazione\"\r\n\t\t\t\t});\r\n\t\t\t\tform.reset();\r\n\t\t\t\tthis.signUp.next(response);\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('UserSignupComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tform.submitted = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonSignIn() {\r\n\t\tthis.viewSignIn.next();\r\n\t}\r\n}\r\n\r\nUserSignupComponent.meta = {\r\n\tselector: '[user-signup]',\r\n\toutputs: ['signUp', 'viewSignIn'],\r\n};\r\n","import { FormValidator } from 'rxcomp-form';\r\n\r\nexport default function MatchValidator(fieldName, formGroup) {\r\n\r\n\treturn new FormValidator((value) => {\r\n\t\tconst field = formGroup ? formGroup.get(fieldName) : null;\r\n\t\tif (!value || !field) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn value !== field.value ? { match: { value: value, match: field.value } } : null;\r\n\t});\r\n\r\n}\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\n\r\nlet DROPDOWN_ID = 1000000;\r\n\r\nexport class DropdownDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this.dropdown || this.id_ || (this.id_ = DropdownDirective.nextId());\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst trigger = node.getAttribute('dropdown-trigger');\r\n\t\tthis.trigger = trigger ? node.querySelector(trigger) : node;\r\n\t\tthis.opened = null;\r\n\t\tthis.onClick = this.onClick.bind(this);\r\n\t\tthis.onDocumentClick = this.onDocumentClick.bind(this);\r\n\t\tthis.openDropdown = this.openDropdown.bind(this);\r\n\t\tthis.closeDropdown = this.closeDropdown.bind(this);\r\n\t\tthis.addListeners();\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.openDropdown();\r\n\t\t} else {\r\n\t\t\tconst dropdownItemNode = node.querySelector('[dropdown-item]');\r\n\t\t\t// console.log('dropdownItemNode', dropdownItemNode);\r\n\t\t\tif (!dropdownItemNode) { // if (this.trigger !== node) {\r\n\t\t\t\tthis.closeDropdown();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDocumentClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst clickedInside = node === event.target || node.contains(event.target);\r\n\t\tif (!clickedInside) {\r\n\t\t\tthis.closeDropdown();\r\n\t\t}\r\n\t}\r\n\r\n\topenDropdown() {\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.opened = true;\r\n\t\t\tthis.addDocumentListeners();\r\n\t\t\tDropdownDirective.dropdown$.next(this.id);\r\n\t\t\tthis.dropped.next(this.id);\r\n\t\t}\r\n\t}\r\n\r\n\tcloseDropdown() {\r\n\t\tif (this.opened !== null) {\r\n\t\t\tthis.removeDocumentListeners();\r\n\t\t\tthis.opened = null;\r\n\t\t\tif (DropdownDirective.dropdown$.getValue() === this.id) {\r\n\t\t\t\tDropdownDirective.dropdown$.next(null);\r\n\t\t\t\tthis.dropped.next(null);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\taddListeners() {\r\n\t\tthis.trigger.addEventListener('click', this.onClick);\r\n\t}\r\n\r\n\taddDocumentListeners() {\r\n\t\tdocument.addEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tremoveListeners() {\r\n\t\tthis.trigger.removeEventListener('click', this.onClick);\r\n\t}\r\n\r\n\tremoveDocumentListeners() {\r\n\t\tdocument.removeEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners();\r\n\t\tthis.removeDocumentListeners();\r\n\t}\r\n\r\n\tstatic nextId() {\r\n\t\treturn DROPDOWN_ID++;\r\n\t}\r\n\r\n}\r\n\r\nDropdownDirective.meta = {\r\n\tselector: '[dropdown]',\r\n\tinputs: ['dropdown', 'dropdown-trigger'],\r\n\toutputs: ['dropped']\r\n};\r\n\r\nDropdownDirective.dropdown$ = new BehaviorSubject(null);\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { DropdownDirective } from './dropdown.directive';\r\n\r\nexport class DropdownItemDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this['dropdown-item'];\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('dropdown-item');\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownItemDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nDropdownItemDirective.meta = {\r\n\tselector: '[dropdown-item], [[dropdown-item]]',\r\n\tinputs: ['dropdown-item']\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nexport class EnvPipe extends Pipe {\r\n\r\n\tstatic transform(keypath) {\r\n\t\tlet env = environment;\r\n\t\tconst keys = keypath.split('.');\r\n\t\tlet k = keys.shift();\r\n\t\twhile (keys.length > 0 && env[k]) {\r\n\t\t\tenv = env[k];\r\n\t\t\tk = keys.shift();\r\n\t\t}\r\n\t\tconst value = env[k] || null;\r\n\t\treturn value;\r\n\t}\r\n\r\n}\r\n\r\nEnvPipe.meta = {\r\n\tname: 'env',\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nexport class FlagPipe extends Pipe {\r\n\r\n\tstatic transform(key) {\r\n\t\tconst flags = environment.flags;\r\n\t\treturn flags[key] || false;\r\n\t}\r\n\r\n}\r\n\r\nFlagPipe.meta = {\r\n\tname: 'flag',\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\n\r\nexport class ControlComponent extends Component {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\t// console.log(this, node, this.control);\r\n\t\tconst control = this.control;\r\n\t\tconst flags = control.flags;\r\n\t\tObject.keys(flags).forEach((key) => {\r\n\t\t\tflags[key] ? node.classList.add(key) : node.classList.remove(key);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nControlComponent.meta = {\r\n\tselector: '[control]',\r\n\tinputs: ['control']\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlCheckboxComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t}\r\n\r\n}\r\n\r\nControlCheckboxComponent.meta = {\r\n\tselector: '[control-checkbox]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--checkbox\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<input type=\"checkbox\" class=\"control--checkbox\" [id]=\"control.name\" [formControl]=\"control\" [value]=\"true\" />\r\n\t\t\t<label [labelFor]=\"control.name\">\r\n\t\t\t\t<svg class=\"icon icon--checkbox\"><use xlink:href=\"#checkbox\"></use></svg>\r\n\t\t\t\t<svg class=\"icon icon--checkbox-checked\"><use xlink:href=\"#checkbox-checked\"></use></svg>\r\n\t\t\t\t<span [innerHTML]=\"label | html\"></span>\r\n\t\t\t</label>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { fromEvent, merge } from 'rxjs';\r\nimport { filter, map, shareReplay, startWith } from 'rxjs/operators';\r\n\r\nexport class KeyboardService {\r\n\r\n\tstatic keys = {};\r\n\r\n\tstatic keydown$() {\r\n\t\tif (!this.keydown$_) {\r\n\t\t\tthis.keydown$_ = fromEvent(window, 'keydown').pipe(\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn this.keydown$_;\r\n\t}\r\n\r\n\tstatic keyup$() {\r\n\t\tif (!this.keyup$_) {\r\n\t\t\tthis.keyup$_ = fromEvent(window, 'keyup').pipe(\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn this.keyup$_;\r\n\t}\r\n\r\n\tstatic keys$() {\r\n\t\tif (!this.keys$_) {\r\n\t\t\tthis.keys$_ = merge(this.keydown$(), this.keyup$()).pipe(\r\n\t\t\t\tmap(event => {\r\n\t\t\t\t\tconst keys = this.keys;\r\n\t\t\t\t\tif (event.type === 'keydown') {\r\n\t\t\t\t\t\tkeys[event.key] = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdelete keys[event.key];\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn this.keys;\r\n\t\t\t\t}),\r\n\t\t\t\tstartWith(this.keys),\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn this.keys$_;\r\n\t}\r\n\r\n\tstatic key$() {\r\n\t\tif (!this.key$_) {\r\n\t\t\tconst regexp = /\\w/;\r\n\t\t\tthis.key$_ = this.keydown$().pipe(\r\n\t\t\t\tfilter(event => event.key && event.key.match(regexp)),\r\n\t\t\t\tmap(event => event.key),\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn this.key$_;\r\n\t}\r\n\r\n\tstatic typing$() {\r\n\t\tif (!this.typing$_) {\r\n\t\t\tlet typing = '',\r\n\t\t\t\tto;\r\n\t\t\tthis.typing$_ = this.key$().pipe(\r\n\t\t\t\tmap(key => {\r\n\t\t\t\t\tif (to) {\r\n\t\t\t\t\t\tclearTimeout(to);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttyping += key;\r\n\t\t\t\t\tto = setTimeout(() => {\r\n\t\t\t\t\t\ttyping = '';\r\n\t\t\t\t\t}, 1500);\r\n\t\t\t\t\treturn typing;\r\n\t\t\t\t}),\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn this.typing$_;\r\n\t}\r\n\r\n}\r\n","import { getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { DropdownDirective } from '../dropdown/dropdown.directive';\r\nimport { KeyboardService } from '../keyboard/keyboard.service';\r\nimport { ControlComponent } from './control.component';\r\n\r\nexport class ControlCustomSelectComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t\tthis.dropped = false;\r\n\t\tthis.dropdownId = DropdownDirective.nextId();\r\n\t\tKeyboardService.typing$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(word => {\r\n\t\t\tthis.scrollToWord(word);\r\n\t\t});\r\n\t\t/*\r\n\t\tKeyboardService.key$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(key => {\r\n\t\t\tthis.scrollToKey(key);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\t/*\r\n\tonChanges() {\r\n\t\t// console.log('ControlCustomSelectComponent.onChanges');\r\n\t}\r\n\t*/\r\n\r\n\tscrollToWord(word) {\r\n\t\t// console.log('ControlCustomSelectComponent.scrollToWord', word);\r\n\t\tconst items = this.control.options || [];\r\n\t\tlet index = -1;\r\n\t\tfor (let i = 0; i < items.length; i++) {\r\n\t\t\tconst x = items[i];\r\n\t\t\tif (x.name.toLowerCase().indexOf(word.toLowerCase()) === 0) {\r\n\t\t\t\t// console.log(word, x.name);\r\n\t\t\t\tindex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (index !== -1) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tconst dropdown = node.querySelector('.dropdown');\r\n\t\t\tconst navDropdown = node.querySelector('.nav--dropdown');\r\n\t\t\tconst item = navDropdown.children[index];\r\n\t\t\tdropdown.scrollTo(0, item.offsetTop);\r\n\t\t}\r\n\t}\r\n\r\n\tsetOption(item) {\r\n\t\t// console.log('setOption', item, this.isMultiple);\r\n\t\tlet value;\r\n\t\tif (this.isMultiple) {\r\n\t\t\tconst value = this.control.value || [];\r\n\t\t\tconst index = value.indexOf(item.id);\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\t// if (value.length > 1) {\r\n\t\t\t\tvalue.splice(index, 1);\r\n\t\t\t\t// }\r\n\t\t\t} else {\r\n\t\t\t\tvalue.push(item.id);\r\n\t\t\t}\r\n\t\t\tvalue = value.length ? value.slice() : null;\r\n\t\t} else {\r\n\t\t\tvalue = item.id;\r\n\t\t\t// DropdownDirective.dropdown$.next(null);\r\n\t\t}\r\n\t\tthis.control.value = value;\r\n\t\tthis.change.next(value);\r\n\t}\r\n\r\n\thasOption(item) {\r\n\t\tif (this.isMultiple) {\r\n\t\t\tconst values = this.control.value || [];\r\n\t\t\treturn values.indexOf(item.id) !== -1;\r\n\t\t} else {\r\n\t\t\treturn this.control.value === item.id;\r\n\t\t}\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tlet value = this.control.value;\r\n\t\tconst items = this.control.options || [];\r\n\t\tif (this.isMultiple) {\r\n\t\t\tvalue = value || [];\r\n\t\t\tif (value.length) {\r\n\t\t\t\treturn value.map(v => {\r\n\t\t\t\t\tconst item = items.find(x => x.id === v || x.name === v);\r\n\t\t\t\t\treturn item ? item.name : '';\r\n\t\t\t\t}).join(', ');\r\n\t\t\t} else {\r\n\t\t\t\treturn 'select'; // LabelPipe.transform('select');\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst item = items.find(x => x.id === value || x.name === value);\r\n\t\t\tif (item) {\r\n\t\t\t\treturn item.name;\r\n\t\t\t} else {\r\n\t\t\t\treturn 'select'; // LabelPipe.transform('select');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDropped($event) {\r\n\t\t// console.log('ControlCustomSelectComponent.onDropped', id);\r\n\t\tif (this.dropped && $event === null) {\r\n\t\t\tthis.control.touched = true;\r\n\t\t}\r\n\t\tthis.dropped = $event === this.dropdownId;\r\n\t}\r\n\r\n\tget isMultiple() {\r\n\t\treturn this.multiple && this.multiple !== false && this.multiple !== 'false';\r\n\t}\r\n}\r\n\r\nControlCustomSelectComponent.meta = {\r\n\tselector: '[control-custom-select]',\r\n\toutputs: ['change'],\r\n\tinputs: ['control', 'label', 'multiple'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--select\" [class]=\"{ required: control.validators.length, multiple: isMultiple }\" [dropdown]=\"dropdownId\" (dropped)=\"onDropped($event)\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<span class=\"control--custom-select\" [innerHTML]=\"getLabel() | label\"></span>\r\n\t\t\t<svg class=\"caret-down\"><use xlink:href=\"#caret-down\"></use></svg>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t\t<div class=\"dropdown\" [dropdown-item]=\"dropdownId\">\r\n\t\t\t<div class=\"category\" [innerHTML]=\"label\"></div>\r\n\t\t\t<ul class=\"nav--dropdown\" [class]=\"{ multiple: isMultiple }\">\r\n\t\t\t\t<li (click)=\"setOption(item)\" [class]=\"{ empty: item.id == null }\" *for=\"let item of control.options\">\r\n\t\t\t\t\t<span [class]=\"{ active: hasOption(item) }\" [innerHTML]=\"item.name | label\"></span>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlEmailComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t}\r\n\r\n}\r\n\r\nControlEmailComponent.meta = {\r\n\tselector: '[control-email]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<input type=\"text\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" required email />\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlPasswordComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t}\r\n\r\n}\r\n\r\nControlPasswordComponent.meta = {\r\n\tselector: '[control-password]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<input type=\"password\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" />\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlSearchComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t\tthis.disabled = this.disabled || false;\r\n\t}\r\n\r\n}\r\n\r\nControlSearchComponent.meta = {\r\n\tselector: '[control-search]',\r\n\tinputs: ['control', 'label', 'disabled'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length, disabled: disabled }\">\r\n\t\t\t<svg class=\"search\"><use xlink:href=\"#search\"></use></svg>\r\n\t\t\t<input type=\"text\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" [disabled]=\"disabled\" />\r\n\t\t</div>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlTextComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t\tthis.disabled = this.disabled || false;\r\n\t}\r\n\r\n}\r\n\r\nControlTextComponent.meta = {\r\n\tselector: '[control-text]',\r\n\tinputs: ['control', 'label', 'disabled'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length, disabled: disabled }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t\t<input type=\"text\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" [disabled]=\"disabled\" />\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlTextareaComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t\tthis.disabled = this.disabled || false;\r\n\t}\r\n\r\n}\r\n\r\nControlTextareaComponent.meta = {\r\n\tselector: '[control-textarea]',\r\n\tinputs: ['control', 'label', 'disabled'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--textarea\" [class]=\"{ required: control.validators.length, disabled: disabled }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<textarea class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" [innerHTML]=\"label\" rows=\"4\" [disabled]=\"disabled\"></textarea>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { LabelPipe } from '../label/label.pipe';\r\nimport { ControlComponent } from './control.component';\r\n\r\nexport class ErrorsComponent extends ControlComponent {\r\n\tgetLabel(key, value) {\r\n\t\tconst label = LabelPipe.transform(`error_${key}`);\r\n\t\treturn label;\r\n\t}\r\n}\r\n\r\nErrorsComponent.meta = {\r\n\tselector: 'errors-component',\r\n\tinputs: ['control'],\r\n\ttemplate: /* html */ `\r\n\t<div class=\"inner\" [style]=\"{ display: control.invalid && control.touched ? 'block' : 'none' }\">\r\n\t\t<div class=\"error\" *for=\"let [key, value] of control.errors\">\r\n\t\t\t<span [innerHTML]=\"getLabel(key, value)\"></span>\r\n\t\t\t<!-- <span class=\"key\" [innerHTML]=\"key\"></span> <span class=\"value\" [innerHTML]=\"value | json\"></span> -->\r\n\t\t</div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Component } from 'rxcomp';\r\n\r\nexport class TestComponent extends Component {\r\n\r\n\tonTest(event) {\r\n\t\tthis.test.next(event);\r\n\t}\r\n\r\n\tonReset(event) {\r\n\t\tthis.reset.next(event);\r\n\t}\r\n\r\n}\r\n\r\nTestComponent.meta = {\r\n\tselector: 'test-component',\r\n\tinputs: ['form'],\r\n\toutputs: ['test', 'reset'],\r\n\ttemplate: /* html */ `\r\n\t<div class=\"test-component\" *if=\"!('production' | flag)\">\r\n\t\t<div class=\"test-component__title\">development mode</div>\r\n\t\t<code [innerHTML]=\"form.value | json\"></code>\r\n\t\t<button type=\"button\" class=\"btn--submit\" (click)=\"onTest($event)\"><span>test</span></button>\r\n\t\t<button type=\"button\" class=\"btn--submit\" (click)=\"onReset($event)\"><span>reset</span></button>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Pipe } from 'rxcomp';\r\n\r\n/*\r\n['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n['\"', '&', ''', '<', '>', ' ', '¡', '¢', '£', '¤', '¥', '¦', '§', '¨', '©', 'ª', '«', '¬', '­', '®', '¯', '°', '±', '²', '³', '´', 'µ', '¶', '·', '¸', '¹', 'º', '»', '¼', '½', '¾', '¿', 'À', 'Á', 'Â', 'Ã', 'Ä', 'Å', 'Æ', 'Ç', 'È', 'É', 'Ê', 'Ë', 'Ì', 'Í', 'Î', 'Ï', 'Ð', 'Ñ', 'Ò', 'Ó', 'Ô', 'Õ', 'Ö', '×', 'Ø', 'Ù', 'Ú', 'Û', 'Ü', 'Ý', 'Þ', 'ß', 'à', 'á', 'ã', 'ä', 'å', 'æ', 'ç', 'è', 'é', 'ê', 'ë', 'ì', 'í', 'î', 'ï', 'ð', 'ñ', 'ò', 'ó', 'ô', 'õ', 'ö', '÷', 'ø', 'ù', 'ú', 'û', 'ü', 'ý', 'þ', 'ÿ', '&', '•', '°', '∞', '‰', '⋅', '±', '†', '—', '¬', 'µ', '⊥', '∥', '€', '£', '¥', '¢', '©', '®', '™', 'α', 'β', 'γ', 'δ', 'ε', 'ζ', 'η', 'θ', 'ι', 'κ', 'λ', 'μ', 'ν', 'ξ', 'ο', 'π', 'ρ', 'σ', 'τ', 'υ', 'φ', 'χ', 'ψ', 'ω', 'Α', 'Β', 'Γ', 'Δ', 'Ε', 'Ζ', 'Η', 'Θ', 'Ι', 'Κ', 'Λ', 'Μ', 'Ν', 'Ξ', 'Ο', 'Π', 'Ρ', 'Σ', 'Τ', 'Υ', 'Φ', 'Χ', 'Ψ', 'Ω'];\r\n*/\r\n\r\nexport class HtmlPipe extends Pipe {\r\n\r\n\tstatic transform(value) {\r\n\t\tif (value) {\r\n\t\t\tvalue = value.replace(/&#(\\d+);/g, function(m, n) {\r\n\t\t\t\treturn String.fromCharCode(parseInt(n));\r\n\t\t\t});\r\n\t\t\tconst escapes = ['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n\t\t\tconst unescapes = ['\"', '&', '\\'', '<', '>', ' ', '¡', '¢', '£', '¤', '¥', '¦', '§', '¨', '©', 'ª', '«', '¬', '­', '®', '¯', '°', '±', '²', '³', '´', 'µ', '¶', '·', '¸', '¹', 'º', '»', '¼', '½', '¾', '¿', 'À', 'Á', 'Â', 'Ã', 'Ä', 'Å', 'Æ', 'Ç', 'È', 'É', 'Ê', 'Ë', 'Ì', 'Í', 'Î', 'Ï', 'Ð', 'Ñ', 'Ò', 'Ó', 'Ô', 'Õ', 'Ö', '×', 'Ø', 'Ù', 'Ú', 'Û', 'Ü', 'Ý', 'Þ', 'ß', 'à', 'á', 'ã', 'ä', 'å', 'æ', 'ç', 'è', 'é', 'ê', 'ë', 'ì', 'í', 'î', 'ï', 'ð', 'ñ', 'ò', 'ó', 'ô', 'õ', 'ö', '÷', 'ø', 'ù', 'ú', 'û', 'ü', 'ý', 'þ', 'ÿ', '&', '•', '°', '∞', '‰', '⋅', '±', '†', '—', '¬', 'µ', '⊥', '∥', '€', '£', '¥', '¢', '©', '®', '™', 'α', 'β', 'γ', 'δ', 'ε', 'ζ', 'η', 'θ', 'ι', 'κ', 'λ', 'μ', 'ν', 'ξ', 'ο', 'π', 'ρ', 'σ', 'τ', 'υ', 'φ', 'χ', 'ψ', 'ω', 'Α', 'Β', 'Γ', 'Δ', 'Ε', 'Ζ', 'Η', 'Θ', 'Ι', 'Κ', 'Λ', 'Μ', 'Ν', 'Ξ', 'Ο', 'Π', 'Ρ', 'Σ', 'Τ', 'Υ', 'Φ', 'Χ', 'Ψ', 'Ω'];\r\n\t\t\tconst rx = new RegExp(`(&${escapes.join(';)|(&')};)`, 'g');\r\n\t\t\tvalue = value.replace(rx, function() {\r\n\t\t\t\tfor (let i = 1; i < arguments.length; i++) {\r\n\t\t\t\t\tif (arguments[i]) {\r\n\t\t\t\t\t\t// console.log(arguments[i], unescapes[i - 1]);\r\n\t\t\t\t\t\treturn unescapes[i - 1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// console.log(value);\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nHtmlPipe.meta = {\r\n\tname: 'html',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class IdDirective extends Directive {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('id', this.id);\r\n\t}\r\n\r\n}\r\n\r\nIdDirective.meta = {\r\n\tselector: '[id]',\r\n\tinputs: ['id']\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class LabelForDirective extends Directive {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('for', this.labelFor);\r\n\t}\r\n\r\n}\r\n\r\nLabelForDirective.meta = {\r\n\tselector: '[labelFor]',\r\n\tinputs: ['labelFor']\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from './locomotive-scroll.service';\r\n\r\nexport class LocomotiveScrollDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tLocomotiveScrollService.init$(node).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('LocomotiveScrollDirective', event);\r\n\t\t});\r\n\t\t/*\r\n\t\twindow.onload = () => {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tconst instance = LocomotiveScrollService.init(node);\r\n\t\t\t\tif (instance) {\r\n\t\t\t\t\tinstance.on('scroll', instance => {\r\n\t\t\t\t\t\tLocomotiveScrollService.scroll(instance.scroll.y);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst body = document.querySelector('body');\r\n\t\t\t\t\twindow.addEventListener('scroll', () => {\r\n\t\t\t\t\t\tconst y = body.scrollTop; // window.pageYOffset\r\n\t\t\t\t\t\tLocomotiveScrollService.scroll(y);\r\n\t\t\t\t\t}, true);\r\n\t\t\t\t}\r\n\t\t\t}, 1);\r\n\t\t};\r\n\t\t*/\r\n\t}\r\n\r\n}\r\n\r\nLocomotiveScrollDirective.meta = {\r\n\tselector: '[locomotive-scroll],[[locomotive-scroll]]'\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil, tap } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from './locomotive-scroll.service';\r\n\r\nexport class ScrollDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tif (LocomotiveScrollService.useLocomotiveScroll()) {\r\n\t\t\tthis.scroll$().pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(event => {\r\n\t\t\t\t// console.log('ScrollDirective', event);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tscroll$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst speed = this.scrollSpeed ? parseFloat(this.scrollSpeed) : 1.5;\r\n\t\treturn LocomotiveScrollService.scroll$.pipe(\r\n\t\t\ttap(scroll => {\r\n\t\t\t\tconst wh = window.innerHeight;\r\n\t\t\t\tconst wh2 = wh / 2;\r\n\t\t\t\tconst rect = node.getBoundingClientRect();\r\n\t\t\t\tconst currentY = gsap.getProperty(node, 'y');\r\n\t\t\t\tconst top = rect.top - currentY;\r\n\t\t\t\tconst bottom = rect.bottom - currentY;\r\n\t\t\t\tif (top < wh && bottom > 0) {\r\n\t\t\t\t\tconst pow = (top - wh2) / wh2;\r\n\t\t\t\t\tconst y = pow * speed * 40;\r\n\t\t\t\t\tgsap.set(node, { y });\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nScrollDirective.meta = {\r\n\tselector: '[scroll]',\r\n\tinputs: ['scrollSpeed'],\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nexport class SlugPipe extends Pipe {\r\n\r\n\tstatic transform(key) {\r\n\t\tconst slug = environment.slug;\r\n\t\treturn slug[key] || `#${key}`;\r\n\t}\r\n\r\n}\r\n\r\nSlugPipe.meta = {\r\n\tname: 'slug',\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\n\r\nlet ID = 0;\r\n\r\nexport class ThronComponent extends Component {\r\n\r\n\tplaying_ = false;\r\n\tget playing() {\r\n\t\treturn this.playing_;\r\n\t}\r\n\tset playing(playing) {\r\n\t\tif (this.playing_ !== playing) {\r\n\t\t\tthis.playing_ = playing;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tif (node) {\r\n\t\t\t\tplaying ? node.classList.add('playing') : node.classList.remove('playing');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\t// console.log('ThronComponent.onInit');\r\n\t\tconst THRON = window.THRONContentExperience || window.THRONPlayer;\r\n\t\tif (!THRON) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// console.log('THRONContentExperience', window.THRONContentExperience, 'THRONPlayer', window.THRONPlayer);\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = this.target = node.querySelector('.video > .thron');\r\n\t\tconst id = target.id = `thron-${++ID}`;\r\n\t\tlet media = this.thron;\r\n\t\tif (media.indexOf('pkey=') === -1) {\r\n\t\t\tconst splitted = media.split('/');\r\n\t\t\tconst clientId = splitted[6];\r\n\t\t\tconst xcontentId = splitted[7];\r\n\t\t\tconst pkey = splitted[8];\r\n\t\t\tmedia = `https://gruppoconcorde-view.thron.com/api/xcontents/resources/delivery/getContentDetail?clientId=${clientId}&xcontentId=${xcontentId}&pkey=${pkey}`;\r\n\t\t}\r\n\t\tconst controls = this.controls = node.hasAttribute('controls') ? true : false,\r\n\t\t\tloop = this.loop = node.hasAttribute('loop') ? true : false,\r\n\t\t\tautoplay = this.autoplay = node.hasAttribute('autoplay') ? true : false;\r\n\t\tconst player = this.player = THRON(id, {\r\n\t\t\tmedia: media,\r\n\t\t\tloop: loop,\r\n\t\t\tautoplay: autoplay,\r\n\t\t\tmuted: !controls,\r\n\t\t\tdisplayLinked: 'close',\r\n\t\t\tnoSkin: !controls,\r\n\t\t\t// lockBitrate: 'max',\r\n\t\t});\r\n\t\tthis.onReady = this.onReady.bind(this);\r\n\t\tthis.onCanPlay = this.onCanPlay.bind(this);\r\n\t\tthis.onPlaying = this.onPlaying.bind(this);\r\n\t\tthis.onPlay = this.onPlay.bind(this);\r\n\t\tthis.onPause = this.onPause.bind(this);\r\n\t\tthis.onComplete = this.onComplete.bind(this);\r\n\t\tplayer.on('ready', this.onReady);\r\n\t\tplayer.on('canPlay', this.onCanPlay);\r\n\t\tplayer.on('playing', this.onPlaying);\r\n\t\tplayer.on('play', this.onPlay);\r\n\t\tplayer.on('pause', this.onPause);\r\n\t\tplayer.on('complete', this.onComplete);\r\n\t}\r\n\r\n\tonReady() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tif (!this.controls) {\r\n\t\t\tconst mediaContainer = player.mediaContainer();\r\n\t\t\tconst video = mediaContainer.querySelector('video');\r\n\t\t\tvideo.setAttribute('playsinline', 'true');\r\n\t\t\tvideo.setAttribute('autoplay', 'true');\r\n\t\t}\r\n\t\tthis.ready.next(id);\r\n\t\t// video.setAttribute('autoplay', 'true');\r\n\t};\r\n\r\n\tonCanPlay() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\t// console.log('ThronDirective.onCanPlay', id);\r\n\t\tthis.canPlay.next(id);\r\n\t}\r\n\r\n\tonPlaying() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tplayer.off('playing', this.onPlaying);\r\n\t\tif (!this.controls) {\r\n\t\t\tconst qualities = player.qualityLevels();\r\n\t\t\t// console.log('ThronDirective.onPlaying', id, qualities);\r\n\t\t\tif (qualities.length) {\r\n\t\t\t\tconst highestQuality = qualities[qualities.length - 1].index;\r\n\t\t\t\tconst lowestQuality = qualities[0].index;\r\n\t\t\t\tplayer.currentQuality(highestQuality);\r\n\t\t\t\t// console.log('ThronDirective.onPlaying', id, 'currentQuality', player.currentQuality());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonPlay() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\t// console.log('ThronDirective.onComplete', id);\r\n\t\tthis.playing = true;\r\n\t\tthis.play.next(id);\r\n\t}\r\n\r\n\tonPause() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\t// console.log('ThronDirective.onComplete', id);\r\n\t\tthis.playing = false;\r\n\t\tthis.pause.next(id);\r\n\t}\r\n\r\n\tonComplete() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\t// console.log('ThronDirective.onComplete', id);\r\n\t\tthis.playing = false;\r\n\t\tthis.complete.next(id);\r\n\t}\r\n\r\n\tplayVideo() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tconst status = player.status();\r\n\t\t// console.log('ThronDirective.playVideo', id, status);\r\n\t\tif (status && !status.playing) {\r\n\t\t\tplayer.play();\r\n\t\t}\r\n\t}\r\n\r\n\tpauseVideo() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tconst status = player.status();\r\n\t\t// console.log('ThronDirective.pauseVideo', id, status);\r\n\t\tif (status && status.playing) {\r\n\t\t\tplayer.pause();\r\n\t\t}\r\n\t}\r\n\r\n\ttoggle() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tconst status = player.status();\r\n\t\t// console.log('ThronDirective.pauseVideo', id, status);\r\n\t\tif (status && status.playing) {\r\n\t\t\tplayer.pause();\r\n\t\t} else {\r\n\t\t\tplayer.play();\r\n\t\t}\r\n\t}\r\n\r\n\tplay(id) {\r\n\t\t// console.log('ThronDirective.play', id, id, id === id);\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (id === this.target.id) {\r\n\t\t\tthis.playVideo();\r\n\t\t}\r\n\t}\r\n\r\n\tpause(id) {\r\n\t\t// console.log('ThronDirective.pause', id, id, id === id);\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (id === this.target.id) {\r\n\t\t\tthis.pauseVideo();\r\n\t\t}\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tconst player = this.player;\r\n\t\tif (player) {\r\n\t\t\tplayer.off('ready', this.onReady);\r\n\t\t\tplayer.off('canPlay', this.onCanPlay);\r\n\t\t\tplayer.off('playing', this.onPlaying);\r\n\t\t\tplayer.off('play', this.onPlay);\r\n\t\t\tplayer.off('pause', this.onPause);\r\n\t\t\tplayer.off('complete', this.onComplete);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nThronComponent.meta = {\r\n\tselector: '[thron],[[thron]]',\r\n\toutputs: ['ready', 'canPlay', 'play', 'pause', 'complete'],\r\n\tinputs: ['thron', 'm3u8'],\r\n\ttemplate: /* html */``,\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class TitleDirective extends Directive {\r\n\tset title(title) {\r\n\t\tif (this.title_ !== title) {\r\n\t\t\tthis.title_ = title;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\ttitle ? node.setAttribute('title', title) : node.removeAttribute('title');\r\n\t\t}\r\n\t}\r\n\tget title() {\r\n\t\treturn this.title_;\r\n\t}\r\n}\r\n\r\nTitleDirective.meta = {\r\n\tselector: '[[title]]',\r\n\tinputs: ['title'],\r\n};\r\n","import { Module } from 'rxcomp';\r\nimport { DropdownItemDirective } from './dropdown/dropdown-item.directive';\r\nimport { DropdownDirective } from './dropdown/dropdown.directive';\r\nimport { EnvPipe } from './env/env.pipe';\r\nimport { FlagPipe } from './flag/flag.pipe';\r\nimport { ControlCheckboxComponent } from './forms/control-checkbox.component';\r\nimport { ControlCustomSelectComponent } from './forms/control-custom-select.component';\r\nimport { ControlEmailComponent } from './forms/control-email.component';\r\nimport { ControlPasswordComponent } from './forms/control-password.component';\r\nimport { ControlSearchComponent } from './forms/control-search.component';\r\nimport { ControlTextComponent } from './forms/control-text.component';\r\nimport { ControlTextareaComponent } from './forms/control-textarea.component';\r\nimport { ErrorsComponent } from './forms/errors.component';\r\nimport { TestComponent } from './forms/test.component';\r\nimport { HtmlPipe } from './html/html.pipe';\r\nimport { IdDirective } from './id/id.directive';\r\nimport { LabelForDirective } from './label-for/label-for.directive';\r\nimport { LabelPipe } from './label/label.pipe';\r\nimport { LocomotiveScrollDirective } from './locomotive-scroll/locomotive-scroll.directive';\r\nimport { ScrollDirective } from './locomotive-scroll/scroll.directive';\r\nimport { ModalOutletComponent } from './modal/modal-outlet.component';\r\nimport { SlugPipe } from './slug/slug.pipe';\r\nimport { SwiperDirective } from './swiper/swiper.directive';\r\nimport { ThronComponent } from './thron/thron.component';\r\nimport { TitleDirective } from './title/title.directive';\r\n\r\nconst factories = [\r\n\tControlCheckboxComponent,\r\n\tControlCustomSelectComponent,\r\n\tControlEmailComponent,\r\n\tControlPasswordComponent,\r\n\t// ControlSelectComponent,\r\n\tControlSearchComponent,\r\n\tControlTextareaComponent,\r\n\tControlTextComponent,\r\n\t// DisabledDirective,\r\n\t// DropDirective,\r\n\tDropdownDirective,\r\n\tDropdownItemDirective,\r\n\t// DropdownItemDirective,\r\n\tErrorsComponent,\r\n\tIdDirective,\r\n\tLabelForDirective,\r\n\t// LanguageComponent,\r\n\t// LazyDirective,\r\n\tLocomotiveScrollDirective,\r\n\t// ModalComponent,\r\n\tModalOutletComponent,\r\n\tScrollDirective,\r\n\t// SvgIconStructure,\r\n\tSwiperDirective,\r\n\tTestComponent,\r\n\tThronComponent,\r\n\tTitleDirective,\r\n\t// UploadItemComponent,\r\n\t// ValueDirective,\r\n\t// VirtualStructure\r\n];\r\n\r\nconst pipes = [\r\n\tEnvPipe,\r\n\tFlagPipe,\r\n\tHtmlPipe,\r\n\tLabelPipe,\r\n\tSlugPipe,\r\n];\r\n\r\nexport class SharedModule extends Module { }\r\n\r\nSharedModule.meta = {\r\n\timports: [\r\n\t],\r\n\tdeclarations: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n\texports: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n};\r\n","import { CoreModule, Module } from 'rxcomp';\r\nimport { FormModule } from 'rxcomp-form';\r\nimport { AppComponent } from './app.component';\r\nimport { AmbienceComponent } from './pages/ambience/ambience.component';\r\nimport { AteliersAndStoresComponent } from './pages/ateliers-and-stores/ateliers-and-stores.component';\r\nimport { ContactsComponent } from './pages/contacts/contacts.component';\r\nimport { DesignersComponent } from './pages/designers/designers.component';\r\nimport { HeaderComponent } from './pages/header/header.component';\r\nimport { MapComponent } from './pages/map/map.component';\r\nimport { MaterialsComponent } from './pages/materials/materials.component';\r\nimport { MenuDirective } from './pages/menu/menu.directive';\r\nimport { NewsComponent } from './pages/news/news.component';\r\nimport { NewsletterPropositionComponent } from './pages/newsletter/newsletter-proposition.component';\r\nimport { ProductsConfigureComponent } from './pages/products-configure/products-configure.component';\r\nimport { ProductsDetailComponent } from './pages/products-detail/products-detail.component';\r\nimport { ProductsComponent } from './pages/products/products.component';\r\nimport { ProjectsComponent } from './pages/projects/projects.component';\r\nimport { ReservedAreaComponent } from './pages/reserved-area/reserved-area.component';\r\nimport { StoreLocatorComponent } from './pages/store-locator/store-locator.component';\r\nimport { SubmenuDirective } from './pages/submenu/submenu.directive';\r\nimport { SwiperGalleryDirective } from './pages/swiper-gallery/swiper-gallery.directive';\r\nimport { SwiperHomepageDirective } from './pages/swiper-homepage/swiper-homepage.directive';\r\nimport { SwiperNewsPropositionDirective } from './pages/swiper-news-proposition/swiper-news-proposition.directive';\r\nimport { SwiperProductsPropositionDirective } from './pages/swiper-products-proposition/swiper-products-proposition.directive';\r\nimport { SwiperProjectsPropositionDirective } from './pages/swiper-projects-proposition/swiper-projects-proposition.directive';\r\nimport { TreeComponent } from './pages/tree/tree.component';\r\nimport { UserForgotComponent } from './pages/user/user-forgot.component';\r\nimport { UserModalComponent } from './pages/user/user-modal.component';\r\nimport { UserSigninComponent } from './pages/user/user-signin.component';\r\nimport { UserSignupComponent } from './pages/user/user-signup.component';\r\nimport { UserComponent } from './pages/user/user.component';\r\nimport { SharedModule } from './shared/shared.module';\r\n\r\nexport class AppModule extends Module { }\r\n\r\nAppModule.meta = {\r\n\timports: [\r\n\t\tCoreModule,\r\n\t\tFormModule,\r\n\t\tSharedModule,\r\n\t],\r\n\tdeclarations: [\r\n\t\tAmbienceComponent,\r\n\t\tAteliersAndStoresComponent,\r\n\t\tContactsComponent,\r\n\t\tDesignersComponent,\r\n\t\tHeaderComponent,\r\n\t\tMapComponent,\r\n\t\tMaterialsComponent,\r\n\t\tMenuDirective,\r\n\t\tNewsComponent,\r\n\t\tNewsletterPropositionComponent,\r\n\t\tProductsComponent,\r\n\t\tProductsConfigureComponent,\r\n\t\tProductsDetailComponent,\r\n\t\tProjectsComponent,\r\n\t\tReservedAreaComponent,\r\n\t\tStoreLocatorComponent,\r\n\t\tSubmenuDirective,\r\n\t\tSwiperHomepageDirective,\r\n\t\tSwiperNewsPropositionDirective,\r\n\t\tSwiperProductsPropositionDirective,\r\n\t\tSwiperProjectsPropositionDirective,\r\n\t\tSwiperGalleryDirective,\r\n\t\tTreeComponent,\r\n\t\tUserComponent,\r\n\t\tUserForgotComponent,\r\n\t\tUserModalComponent,\r\n\t\tUserSigninComponent,\r\n\t\tUserSignupComponent,\r\n\t],\r\n\tbootstrap: AppComponent,\r\n};\r\n","import { Browser } from 'rxcomp';\r\nimport { AppModule } from './app.module';\r\n\r\nBrowser.bootstrap(AppModule);\r\n"]}