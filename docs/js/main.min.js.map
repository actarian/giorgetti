{"version":3,"sources":["src/js/main.js","../../src/js/app.component.js","../../src/js/core/dropdown/dropdown.directive.js","../../src/js/core/dropdown/dropdown-item.directive.js","../../src/js/core/utils/utils.js","../../src/js/environment.js","../../src/js/environment.static.js","../../src/js/environment.served.js","../../src/js/core/env/env.pipe.js","../../src/js/core/flag/flag.pipe.js","../../src/js/core/keyboard/keyboard.service.js","../../src/js/core/forms/control.component.js","../../src/js/core/forms/control-custom-select.component.js","../../src/js/core/forms/control-email.component.js","../../src/js/core/forms/control-search.component.js","../../src/js/core/html/html.pipe.js","../../src/js/core/label/label.pipe.js","../../src/js/core/locomotive-scroll/locomotive-scroll.service.js","../../src/js/core/locomotive-scroll/locomotive-scroll.directive.js","../../src/js/core/locomotive-scroll/scroll.directive.js","../../src/js/core/slug/slug.pipe.js","../../src/js/core/swiper/swiper.directive.js","../../src/js/core/thron/thron.component.js","../../src/js/core/title/title.directive.js","../../src/js/core/filter/filter-item.js","../../src/js/core/location/location.service.js","../../src/js/core/filter/filter.service.js","../../src/js/core/http/http.service.js","../../src/js/core/language/language.service.js","../../src/js/core/api/api.service.js","../../src/js/pages/ateliers-and-stores/ateliers-and-stores.service.js","../../src/js/pages/ateliers-and-stores/ateliers-and-stores.component.js","../../src/js/pages/designers/designers.service.js","../../src/js/pages/designers/designers.component.js","../../src/js/pages/header/header.component.js","../../node_modules/@googlemaps/markerclustererplus/src/overlay-view-safe.ts","../../node_modules/@googlemaps/markerclustererplus/src/cluster-icon.ts","../../src/js/pages/map/map.component.js","../../node_modules/@googlemaps/markerclustererplus/src/cluster.ts","../../node_modules/@googlemaps/markerclustererplus/src/markerclusterer.ts","../../src/js/pages/map/map.style.js","../../src/js/pages/menu/menu.directive.js","../../src/js/pages/news/news.service.js","../../src/js/pages/news/news.component.js","../../src/js/pages/newsletter/newsletter-proposition.component.js","../../src/js/pages/products-configure/products-configure.component.js","../../src/js/pages/products-detail/products-detail.service.js","../../src/js/pages/products-detail/products-detail.component.js","../../src/js/pages/projects/projects.service.js","../../src/js/pages/projects/projects.component.js","../../src/js/pages/store-locator/store-locator.service.js","../../src/js/pages/store-locator/store-locator.component.js","../../src/js/pages/submenu/submenu.directive.js","../../src/js/pages/swiper-gallery/swiper-gallery.directive.js","../../src/js/pages/swiper-homepage/swiper-homepage.directive.js","../../src/js/pages/swiper-news-proposition/swiper-news-proposition.directive.js","../../src/js/pages/swiper-products-proposition/swiper-products-proposition.directive.js","../../src/js/pages/swiper-projects-proposition/swiper-projects-proposition.directive.js","../../src/js/app.module.js","../../src/js/main.js"],"names":["g","f","exports","module","require","define","amd","globalThis","self","rxcomp","form","rxjs","operators","this","rxcompForm","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_defineProperty","obj","value","_inheritsLoose","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_assertThisInitialized","ReferenceError","AppComponent","_Component","apply","arguments","onInit","getContext","node","classList","remove","console","log","Component","meta","selector","DROPDOWN_ID","DropdownDirective","_Directive","_proto","_this","trigger","getAttribute","querySelector","opened","onClick","bind","onDocumentClick","openDropdown","closeDropdown","addListeners","dropdown$","pipe","takeUntil","unsubscribe$","subscribe","id","add","event","contains","addDocumentListeners","next","dropped","removeDocumentListeners","getValue","addEventListener","document","removeListeners","removeEventListener","onDestroy","nextId","get","dropdown","id_","Directive","inputs","outputs","BehaviorSubject","DropdownItemDirective","Utils","merge","source","keys","forEach","Array","isArray","NODE","BASE_HREF","URLSearchParams","window","location","search","HEROKU","host","indexOf","STATIC","port","DEVELOPMENT","split","ENV","PRODUCTION","Environment","options","assign","getAbsoluteUrl","path","params","url","origin","replace","getPath","isLocal","href","set","githubDocs","defaultOptions","flags","production","heroku","slug","languages","defaultLanguage","labels","select","browse","cancel","error_email","error_match","error_required","loading","required","select_file","update","upload","drag_and_drop_images","environmentOptions","api","assets","workers","image","prefetch","configureProduct","template","modal","myModal","googleMaps","apiKey","environment","EnvPipe","_Pipe","transform","keypath","env","k","shift","Pipe","name","FlagPipe","KeyboardService","keydown$","keydown$_","fromEvent","shareReplay","keyup$","keyup$_","keys$","keys$_","map","type","startWith","key$","key$_","regexp","filter","match","typing$","typing$_","to","typing","clearTimeout","setTimeout","ControlComponent","onChanges","control","ControlCustomSelectComponent","_ControlComponent","label","dropdownId","word","scrollToWord","items","index","toLowerCase","item","children","scrollTo","offsetTop","setOption","isMultiple","splice","push","slice","TypeError","_readOnlyError","change","hasOption","getLabel","v","find","x","join","onDropped","$event","touched","multiple","ControlEmailComponent","ControlSearchComponent","disabled","HtmlPipe","m","n","String","fromCharCode","parseInt","unescapes","rx","RegExp","LabelPipe","labels_","getKeys","_len","_key","setLabels","LABELS","LocomotiveScrollService","scroll","scroll$","init","useKeyboard","smoothMobile","inertia","smooth","lerp","getDirection","getSpeed","initClass","scrollingClass","draggingClass","smoothClass","scrollbarContainer","scrollbarClass","multiplier","firefoxMultiplier","touchMultiplier","scrollFromAnywhere","gestureDirection","reloadOnContextChange","resetNativeScroll","el","useLocomotiveScroll","instance","LocomotiveScroll","innerWidth","isMacLike","test","navigator","platform","isIOS","isMacOs","isSafari","vendor","userAgent","init$","delay","switchMap","_","on","direction","y","speed","previousY","pageYOffset","scrollIntoView","ReplaySubject","LocomotiveScrollDirective","ScrollDirective","hasAttribute","parseFloat","tap","wh","innerHeight","wh2","rect","getBoundingClientRect","currentY","gsap","getProperty","top","bottom","SlugPipe","SwiperDirective","slidesPerView","spaceBetween","centeredSlides","autoplay","keyboardControl","mousewheelControl","pagination","clickable","keyboard","enabled","onlyInViewport","init_","swiperInitOrUpdate_","removeListeners_","swiperDestroy_","onBeforePrint","slideToIndex","swiper","slideTo","hasPrev","activeIndex","slides","hasNext","slidePrev","slideNext","events$","Subject","opacity","slideChange","pushChanges","addListeners_","callback","swiperDirectiveInit","_this2","duration","ease","Power2","easeOut","element","scope","Swiper","_opening","destroy","matchMedia","matches","ID","ThronComponent","args","call","concat","THRON","THRONContentExperience","THRONPlayer","media","thron","splitted","controls","loop","player","muted","displayLinked","noSkin","onReady","onCanPlay","onPlaying","onPlay","onPause","onComplete","video","mediaContainer","setAttribute","ready","canPlay","off","qualities","qualityLevels","highestQuality","currentQuality","playing","play","pause","complete","playVideo","status","pauseVideo","toggle","playing_","TitleDirective","title_","title","removeAttribute","FilterMode","FilterItem","change$","mode","placeholder","values","unshift","undefined","has","first","clear","LocationService","keyOrValue","pushParams","history","pushState","toString","from","replaceState","pathname","state","deserialize","encoded","decode","serialize","encode","decoded","json","atob","JSON","parse","stringify","btoa","FilterService","initialParams","filters","getParamsCount","reduce","c","locationParams","any","items$","changes","filterItems","updateFilterStates","skipFilter","_this3","filteredItems","option","count","reset","_this4","HttpService","http$","method","data","format","userPass","response_","headers","Accept","Content-Type","body","credentials","Headers","fetch","then","response","typedResponse","contentType","text","ok","Promise","reject","error","warn","resolve","catchError","throwError","getError","get$","query","delete$","post$","put$","patch$","object","statusCode","statusMessage","statusText","LanguageService","getDefaultLanguages","alternates","getDefaultLanguage","lang","setLanguage","language","selectedLanguage","setLanguage$","html","labelsMatch","exec","Function","bhereMatch","bhere","activeLanguage","toggleLanguages","showLanguages","ApiService","_HttpService","AteliersAndStoresService","all$","ateliers$","stores$","filters$","AteliersAndStoresComponent","types","Atelier","Store","filteredAteliers","filteredStores","FormGroup","country","FormControl","Validators","RequiredValidator","changes$","setFilterByKeyAndValue","load$","onLoad","combineLatest","filterService","patch","onSearch","model","clearFilter","preventDefault","stopImmediatePropagation","DesignersService","DesignersComponent","category","HeaderComponent","pictogram","scrolled","Math","min","direction_","scrolled_","extendStatics","d","b","hasOwnProperty","__extends","__","__assign","t","s","OverlayViewSafe","type1","type2","property","extend","google","maps","OverlayView","toCssText","styles","acc","coercePixels","pixels","GOOGLE_MAPS","ClusterIcon","_super","cluster_","styles_","center_","div_","sums_","visible_","style","setMap","getMap","onAdd","cMouseDownInCluster","cDraggingMapByCluster","mc","getMarkerClusterer","_a","version","major","minor","gmVersion","createElement","show","getPanes","overlayMouseTarget","appendChild","boundsChangedListener_","addListener","addDomListener","e","stopPropagation","getZoomOnClick","mz_1","getMaxZoom","theBounds_1","getBounds","fitBounds","getZoom","setZoom","cancelBubble","onRemove","parentNode","hide","removeListener","clearInstanceListeners","removeChild","draw","pos","getPosFromLatLng_","left","display","className","className_","cssText","createCss_","innerHTML","getImageElementHtml","getLabelDivHtml","getTitle","ariaLabelFn","position","anchorText_","color","textColor","font-size","textSize","font-family","fontFamily","font-weight","fontWeight","font-style","fontStyle","text-decoration","textDecoration","text-align","width","line-height","textLineHeight","bp","backgroundPosition","spriteH","spriteV","dimensions","getEnableRetinaIcons","height","clip","overrideDimensionsDynamicIcon","useStyle","sums","max","anchorText","anchorIcon_","anchorIcon","floor","getClusterClass","setCenter","center","z-index","getZIndex","cursor","-webkit-user-select","-khtml-user-select","-moz-user-select","-o-user-select","user-select","latlng","getProjection","fromLatLngToDivPixel","Cluster","markerClusterer_","map_","minClusterSize_","getMinimumClusterSize","averageCenter_","getAverageCenter","markers_","bounds_","clusterIcon_","getStyles","getSize","getMarkers","getCenter","bounds","LatLngBounds","markers","getPosition","addMarker","marker","isMarkerAlreadyAdded_","l","lat","lng","LatLng","calculateBounds_","isAdded","mCount","mz","isMarkerInClusterBounds","getExtendedBounds","updateIcon","numStyles","getCalculator","getOption","prop","def","MarkerClusterer","clusters_","listeners_","activeMap_","ready_","zIndex_","zIndex","Number","Marker","MAX_ZINDEX","gridSize_","gridSize","minimumClusterSize","maxZoom_","maxZoom","zoomOnClick_","ignoreHidden_","enableRetinaIcons_","imagePath_","imagePath","IMAGE_PATH","imageExtension_","imageExtension","IMAGE_EXTENSION","imageSizes_","imageSizes","IMAGE_SIZES","calculator_","calculator","CALCULATOR","batchSize_","batchSize","BATCH_SIZE","batchSizeIE_","batchSizeIE","BATCH_SIZE_IE","clusterClass_","clusterClass","setupStyles_","addMarkers","repaint","prevZoom_","minZoom","mapTypes","getMapTypeId","zoom","resetViewport_","redraw_","size","withDefaultStyle","fitMapToMarkers","padding","getVisible","getIgnoreHidden","getGridSize","setGridSize","setMinimumClusterSize","setMaxZoom","setZIndex","setStyles","setTitle","setZoomOnClick","zoomOnClick","setAverageCenter","averageCenter","setIgnoreHidden","ignoreHidden","setEnableRetinaIcons","enableRetinaIcons","getImageExtension","setImageExtension","getImagePath","setImagePath","getImageSizes","setImageSizes","setCalculator","getBatchSizeIE","setBatchSizeIE","setClusterClass","getTotalMarkers","getClusters","getTotalClusters","nodraw","pushMarkerTo_","getDraggable","removeMarker","removed","removeMarker_","removeMarkers","r","clearMarkers","oldClusters","projection","tr","getNorthEast","bl","getSouthWest","trPix","blPix","ne","fromDivPixelToLatLng","sw","createClusters_","distanceBetweenPoints_","p1","p2","dLat","PI","dLon","a","sin","cos","atan2","sqrt","isMarkerInBounds_","addToClosestCluster_","distance","clusterToAddTo","cluster","iFirst","mapBounds","timerRefStatic","iLast","dv","overrides","MAP_STYLE","featureType","elementType","stylers","visibility","saturation","lightness","MapComponent","initMap","onGoogleMapsLoaded","script","getElementsByTagName","documentElement","mapOptions","latitude","longitude","scrollwheel","zoomControlOptions","ZoomControlStyle","DEFAULT","scaleControl","zoomControl","mapTypeControl","streetViewControl","rotateControl","fullscreenControl","mapElement","Map","getItalyBounds","calculateDistance","lat1","lon1","lat2","lon2","unit","radlat1","radlat2","theta","radtheta","dist","acos","markerCluster","content","address","city","phone","fax","email","markerImage","MarkerImage","Size","icon","setMarkerWindow","sizes","getGeolocation","busyLocation","geolocation","getCurrentPosition","coords","geocoder","Geocoder","geocode","results","filteredInfoCity","address_component","includes","formatted_address","address_components","searchCountry","short_name","setInfoWindow","searchPosition","finally","ZOOM_LEVEL","findNearStores","visible","cod_stato","userCountry","MAX_DISTANCE","sort","importante","visibleStores","$timeout","panTo","markerWindow","InfoWindow","pixelOffset","setPosition","setContent","open","closeMarkerWindow","close","getWorldBounds","MENUS","MenuDirective","submenus","menu","container","onOver","onLeave","keepBackground","NewsService","NewsComponent","abstract","NewsletterPropositionComponent","onNewsletter","breadcumbStyle","ProductsConfigureComponent","isReady","isComplete","isConfiguring","iframe","onEvent","grant_type","sfy","SFYFrame","getIframeDocument","contentWindow","contentDocument","eventName","emit","onShowefyComplete","onStartConfigurator","onButtonPressed","onSetButtonStatus","onGetIframeSize","onGetProductExtData","onGetFastProductExtData","offset","statusTxt","addTexts","addButtons","addBreadcrumb","findPos","curtop","offsetParent","HTML","printHTML","buttons","BUTTONS","PROPERTIES","LABEL","en","setButtonStatus","breadcrumb","BREADCUMB","printBreadcumb","getCartData","getProductExtData","getFastData","getFastProductExtData","ProductsDetailService","versions$","ProductsDetailComponent","visibleItems","showVersions","ProjectsService","ProjectsComponent","StoreLocatorService","StoreLocatorComponent","countries","categories","showMore","SubmenuDirective","querySelectorAll","picture","onload","Power4","overwrite","src","SwiperGalleryDirective","_SwiperDirective","loopAdditionalSlides","SwiperHomepageDirective","SwiperNewsPropositionDirective","breakpoints","768","1024","1440","1920","SwiperProductsPropositionDirective","SwiperProjectsPropositionDirective","AppModule","_Module","Module","imports","CoreModule","FormModule","declarations","bootstrap","Browser"],"mappings":"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","file":"docs\\js\\main.min.js","sourcesContent":[null,"import { Component, getContext } from 'rxcomp';\r\n\r\nexport class AppComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.remove('hidden');\r\n\t\tconsole.log('AppComponent.onInit');\r\n\t}\r\n\r\n}\r\n\r\nAppComponent.meta = {\r\n\tselector: '[app-component]',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\n\r\nlet DROPDOWN_ID = 1000000;\r\n\r\nexport class DropdownDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this.dropdown || this.id_ || (this.id_ = DropdownDirective.nextId());\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst trigger = node.getAttribute('dropdown-trigger');\r\n\t\tthis.trigger = trigger ? node.querySelector(trigger) : node;\r\n\t\tthis.opened = null;\r\n\t\tthis.onClick = this.onClick.bind(this);\r\n\t\tthis.onDocumentClick = this.onDocumentClick.bind(this);\r\n\t\tthis.openDropdown = this.openDropdown.bind(this);\r\n\t\tthis.closeDropdown = this.closeDropdown.bind(this);\r\n\t\tthis.addListeners();\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.openDropdown();\r\n\t\t} else {\r\n\t\t\tconst dropdownItemNode = node.querySelector('[dropdown-item]');\r\n\t\t\t// console.log('dropdownItemNode', dropdownItemNode);\r\n\t\t\tif (!dropdownItemNode) { // if (this.trigger !== node) {\r\n\t\t\t\tthis.closeDropdown();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDocumentClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst clickedInside = node === event.target || node.contains(event.target);\r\n\t\tif (!clickedInside) {\r\n\t\t\tthis.closeDropdown();\r\n\t\t}\r\n\t}\r\n\r\n\topenDropdown() {\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.opened = true;\r\n\t\t\tthis.addDocumentListeners();\r\n\t\t\tDropdownDirective.dropdown$.next(this.id);\r\n\t\t\tthis.dropped.next(this.id);\r\n\t\t}\r\n\t}\r\n\r\n\tcloseDropdown() {\r\n\t\tif (this.opened !== null) {\r\n\t\t\tthis.removeDocumentListeners();\r\n\t\t\tthis.opened = null;\r\n\t\t\tif (DropdownDirective.dropdown$.getValue() === this.id) {\r\n\t\t\t\tDropdownDirective.dropdown$.next(null);\r\n\t\t\t\tthis.dropped.next(null);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\taddListeners() {\r\n\t\tthis.trigger.addEventListener('click', this.onClick);\r\n\t}\r\n\r\n\taddDocumentListeners() {\r\n\t\tdocument.addEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tremoveListeners() {\r\n\t\tthis.trigger.removeEventListener('click', this.onClick);\r\n\t}\r\n\r\n\tremoveDocumentListeners() {\r\n\t\tdocument.removeEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners();\r\n\t\tthis.removeDocumentListeners();\r\n\t}\r\n\r\n\tstatic nextId() {\r\n\t\treturn DROPDOWN_ID++;\r\n\t}\r\n\r\n}\r\n\r\nDropdownDirective.meta = {\r\n\tselector: '[dropdown]',\r\n\tinputs: ['dropdown', 'dropdown-trigger'],\r\n\toutputs: ['dropped']\r\n};\r\n\r\nDropdownDirective.dropdown$ = new BehaviorSubject(null);\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { DropdownDirective } from './dropdown.directive';\r\n\r\nexport class DropdownItemDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this['dropdown-item'];\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('dropdown-item');\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownItemDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nDropdownItemDirective.meta = {\r\n\tselector: '[dropdown-item], [[dropdown-item]]',\r\n\tinputs: ['dropdown-item']\r\n};\r\n","\r\nexport class Utils {\r\n\r\n\tstatic merge(target, source) {\r\n\t\tif (typeof source === 'object') {\r\n\t\t\tObject.keys(source).forEach(key => {\r\n\t\t\t\tconst value = source[key];\r\n\t\t\t\tif (typeof value === 'object' && !Array.isArray(value)) {\r\n\t\t\t\t\ttarget[key] = this.merge(target[key], value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttarget[key] = value;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn target;\r\n\t}\r\n\r\n}\r\n","import { Utils } from './core/utils/utils';\r\nimport { environmentServed } from './environment.served';\r\nimport { environmentStatic } from './environment.static';\r\n\r\nexport const NODE = (typeof module !== 'undefined' && module.exports);\r\nexport const PARAMS = NODE ? { get: () => { } } : new URLSearchParams(window.location.search);\r\nexport const DEBUG = false || (PARAMS.get('debug') != null);\r\nexport const BASE_HREF = NODE ? null : document.querySelector('base').getAttribute('href');\r\nexport const HEROKU = NODE ? false : (window && window.location.host.indexOf('herokuapp') !== -1);\r\nexport const STATIC = NODE ? false : (HEROKU || (window && (window.location.port === '48481' || window.location.port === '5000' || window.location.port === '6443' || window.location.host === 'actarian.github.io')));\r\nexport const DEVELOPMENT = NODE ? false : (window && ['localhost', '127.0.0.1', '0.0.0.0'].indexOf(window.location.host.split(':')[0]) !== -1);\r\nexport const PRODUCTION = !DEVELOPMENT;\r\nexport const ENV = {\r\n\tSTATIC,\r\n\tDEVELOPMENT,\r\n\tPRODUCTION\r\n};\r\n\r\nexport class Environment {\r\n\r\n\tget STATIC() {\r\n\t\treturn ENV.STATIC;\r\n\t}\r\n\tset STATIC(STATIC) {\r\n\t\tENV.STATIC = (STATIC === true || STATIC === 'true');\r\n\t\tconsole.log('Environment.STATIC.set', ENV.STATIC);\r\n\t}\r\n\r\n\tget href() {\r\n\t\tif (HEROKU) {\r\n\t\t\treturn this.githubDocs;\r\n\t\t} else {\r\n\t\t\treturn BASE_HREF;\r\n\t\t}\r\n\t}\r\n\r\n\tgetAbsoluteUrl(path, params) {\r\n\t\tlet url = `${window.location.origin}${path}`;\r\n\t\t// let url = `${window.location.protocol}//${window.location.host}${path}`;\r\n\t\tObject.keys(params).forEach(key => {\r\n\t\t\turl = url.replace(`$${key}`, params[key]);\r\n\t\t});\r\n\t\treturn url;\r\n\t}\r\n\r\n\tgetPath(path) {\r\n\t\treturn this.isLocal(path) ? (this.href + path) : path;\r\n\t}\r\n\r\n\tisLocal(path) {\r\n\t\treturn path.indexOf('://') === -1;\r\n\t}\r\n\r\n\tconstructor(options) {\r\n\t\tif (options) {\r\n\t\t\tObject.assign(this, options);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst defaultOptions = {\r\n\tport: 5000,\r\n\tflags: {\r\n\t\tproduction: false,\r\n\t\theroku: HEROKU,\r\n\t},\r\n\tslug: {},\r\n\tlanguages: ['it', 'en'],\r\n\tdefaultLanguage: 'it',\r\n\tlabels: {\r\n\t\tselect: 'Seleziona',\r\n\t\tbrowse: 'Sfoglia',\r\n\t\tcancel: 'Annulla',\r\n\t\terror_email: 'Email non valida',\r\n\t\terror_match: 'I campi non corrispondono',\r\n\t\terror_required: 'Campo obbligatorio',\r\n\t\tloading: 'caricamento',\r\n\t\tremove: 'Rimuovi',\r\n\t\trequired: 'Richiesto',\r\n\t\tselect_file: 'Seleziona una file...',\r\n\t\tupdate: 'Aggiorna',\r\n\t\tupload: 'Carica',\r\n\t\tdrag_and_drop_images: 'Drag And Drop your images here',\r\n\t}\r\n};\r\n\r\nconst environmentOptions = window.STATIC ? environmentStatic : environmentServed;\r\n\r\nlet options = Object.assign(defaultOptions, environmentOptions);\r\noptions = Utils.merge(options, window.environment);\r\n\r\nexport const environment = new Environment(options);\r\n\r\nconsole.log('environment', environment);\r\n","\r\nexport const environmentStatic = {\r\n\tflags: {\r\n\t\tproduction: false,\r\n\t},\r\n\tapi: '/giorgetti/api',\r\n\tassets: '/giorgetti/',\r\n\tworkers: {\r\n\t\timage: './js/workers/image.service.worker.js',\r\n\t\tprefetch: './js/workers/prefetch.service.worker.js',\r\n\t},\r\n\tgithubDocs: 'https://raw.githubusercontent.com/actarian/giorgetti/main/docs/',\r\n\tslug: {\r\n\t\tconfigureProduct: `/giorgetti/products-configure.html`,\r\n\t},\r\n\ttemplate: {\r\n\t\tmodal: {\r\n\t\t\tmyModal: '/my-modal.html',\r\n\t\t}\r\n\t},\r\n\tgoogleMaps: {\r\n\t\tapiKey: 'AIzaSyDvGw6iAoKdRv8mmaC9GeT-LWLPQtA8p60',\r\n\t}\r\n};\r\n","\r\nexport const environmentServed = {\r\n\tflags: {\r\n\t\tproduction: true,\r\n\t},\r\n\tapi: '/api',\r\n\tassets: '/Client/docs/',\r\n\tworkers: {\r\n\t\timage: '/Client/docs/js/workers/image.service.worker.js',\r\n\t\tprefetch: '/Client/docs/js/workers/prefetch.service.worker.js',\r\n\t},\r\n\tgithubDocs: 'https://raw.githubusercontent.com/actarian/giorgetti/main/docs/',\r\n\tslug: {\r\n\t\tconfigureProduct: `/Client/docs/products-configure.html`,\r\n\t},\r\n\ttemplate: {\r\n\t\tmodal: {\r\n\t\t\tmyModal: '/template/modules/giorgetti/my-modal.cshtml',\r\n\t\t}\r\n\t},\r\n\tgoogleMaps: {\r\n\t\tapiKey: 'AIzaSyDvGw6iAoKdRv8mmaC9GeT-LWLPQtA8p60',\r\n\t}\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nexport class EnvPipe extends Pipe {\r\n\r\n\tstatic transform(keypath) {\r\n\t\tlet env = environment;\r\n\t\tconst keys = keypath.split('.');\r\n\t\tlet k = keys.shift();\r\n\t\twhile (keys.length > 0 && env[k]) {\r\n\t\t\tenv = env[k];\r\n\t\t\tk = keys.shift();\r\n\t\t}\r\n\t\tconst value = env[k] || null;\r\n\t\treturn value;\r\n\t}\r\n\r\n}\r\n\r\nEnvPipe.meta = {\r\n\tname: 'env',\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nexport class FlagPipe extends Pipe {\r\n\r\n\tstatic transform(key) {\r\n\t\tconst flags = environment.flags;\r\n\t\treturn flags[key] || false;\r\n\t}\r\n\r\n}\r\n\r\nFlagPipe.meta = {\r\n\tname: 'flag',\r\n};\r\n","import { fromEvent, merge } from 'rxjs';\r\nimport { filter, map, shareReplay, startWith } from 'rxjs/operators';\r\n\r\nexport class KeyboardService {\r\n\r\n\tstatic keys = {};\r\n\r\n\tstatic keydown$() {\r\n\t\tif (!this.keydown$_) {\r\n\t\t\tthis.keydown$_ = fromEvent(window, 'keydown').pipe(\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn this.keydown$_;\r\n\t}\r\n\r\n\tstatic keyup$() {\r\n\t\tif (!this.keyup$_) {\r\n\t\t\tthis.keyup$_ = fromEvent(window, 'keyup').pipe(\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn this.keyup$_;\r\n\t}\r\n\r\n\tstatic keys$() {\r\n\t\tif (!this.keys$_) {\r\n\t\t\tthis.keys$_ = merge(this.keydown$(), this.keyup$()).pipe(\r\n\t\t\t\tmap(event => {\r\n\t\t\t\t\tconst keys = this.keys;\r\n\t\t\t\t\tif (event.type === 'keydown') {\r\n\t\t\t\t\t\tkeys[event.key] = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdelete keys[event.key];\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn this.keys;\r\n\t\t\t\t}),\r\n\t\t\t\tstartWith(this.keys),\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn this.keys$_;\r\n\t}\r\n\r\n\tstatic key$() {\r\n\t\tif (!this.key$_) {\r\n\t\t\tconst regexp = /\\w/;\r\n\t\t\tthis.key$_ = this.keydown$().pipe(\r\n\t\t\t\tfilter(event => event.key && event.key.match(regexp)),\r\n\t\t\t\tmap(event => event.key),\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn this.key$_;\r\n\t}\r\n\r\n\tstatic typing$() {\r\n\t\tif (!this.typing$_) {\r\n\t\t\tlet typing = '',\r\n\t\t\t\tto;\r\n\t\t\tthis.typing$_ = this.key$().pipe(\r\n\t\t\t\tmap(key => {\r\n\t\t\t\t\tif (to) {\r\n\t\t\t\t\t\tclearTimeout(to);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttyping += key;\r\n\t\t\t\t\tto = setTimeout(() => {\r\n\t\t\t\t\t\ttyping = '';\r\n\t\t\t\t\t}, 1500);\r\n\t\t\t\t\treturn typing;\r\n\t\t\t\t}),\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn this.typing$_;\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\n\r\nexport class ControlComponent extends Component {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\t// console.log(this, node, this.control);\r\n\t\tconst control = this.control;\r\n\t\tconst flags = control.flags;\r\n\t\tObject.keys(flags).forEach((key) => {\r\n\t\t\tflags[key] ? node.classList.add(key) : node.classList.remove(key);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nControlComponent.meta = {\r\n\tselector: '[control]',\r\n\tinputs: ['control']\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { DropdownDirective } from '../dropdown/dropdown.directive';\r\nimport { KeyboardService } from '../keyboard/keyboard.service';\r\nimport { ControlComponent } from './control.component';\r\n\r\nexport class ControlCustomSelectComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t\tthis.dropped = false;\r\n\t\tthis.dropdownId = DropdownDirective.nextId();\r\n\t\tKeyboardService.typing$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(word => {\r\n\t\t\tthis.scrollToWord(word);\r\n\t\t});\r\n\t\t/*\r\n\t\tKeyboardService.key$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(key => {\r\n\t\t\tthis.scrollToKey(key);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\t/*\r\n\tonChanges() {\r\n\t\t// console.log('ControlCustomSelectComponent.onChanges');\r\n\t}\r\n\t*/\r\n\r\n\tscrollToWord(word) {\r\n\t\t// console.log('ControlCustomSelectComponent.scrollToWord', word);\r\n\t\tconst items = this.control.options || [];\r\n\t\tlet index = -1;\r\n\t\tfor (let i = 0; i < items.length; i++) {\r\n\t\t\tconst x = items[i];\r\n\t\t\tif (x.name.toLowerCase().indexOf(word.toLowerCase()) === 0) {\r\n\t\t\t\t// console.log(word, x.name);\r\n\t\t\t\tindex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (index !== -1) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tconst dropdown = node.querySelector('.dropdown');\r\n\t\t\tconst navDropdown = node.querySelector('.nav--dropdown');\r\n\t\t\tconst item = navDropdown.children[index];\r\n\t\t\tdropdown.scrollTo(0, item.offsetTop);\r\n\t\t}\r\n\t}\r\n\r\n\tsetOption(item) {\r\n\t\t// console.log('setOption', item, this.isMultiple);\r\n\t\tlet value;\r\n\t\tif (this.isMultiple) {\r\n\t\t\tconst value = this.control.value || [];\r\n\t\t\tconst index = value.indexOf(item.id);\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\t// if (value.length > 1) {\r\n\t\t\t\tvalue.splice(index, 1);\r\n\t\t\t\t// }\r\n\t\t\t} else {\r\n\t\t\t\tvalue.push(item.id);\r\n\t\t\t}\r\n\t\t\tvalue = value.length ? value.slice() : null;\r\n\t\t} else {\r\n\t\t\tvalue = item.id;\r\n\t\t\t// DropdownDirective.dropdown$.next(null);\r\n\t\t}\r\n\t\tthis.control.value = value;\r\n\t\tthis.change.next(value);\r\n\t}\r\n\r\n\thasOption(item) {\r\n\t\tif (this.isMultiple) {\r\n\t\t\tconst values = this.control.value || [];\r\n\t\t\treturn values.indexOf(item.id) !== -1;\r\n\t\t} else {\r\n\t\t\treturn this.control.value === item.id;\r\n\t\t}\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tlet value = this.control.value;\r\n\t\tconst items = this.control.options || [];\r\n\t\tif (this.isMultiple) {\r\n\t\t\tvalue = value || [];\r\n\t\t\tif (value.length) {\r\n\t\t\t\treturn value.map(v => {\r\n\t\t\t\t\tconst item = items.find(x => x.id === v || x.name === v);\r\n\t\t\t\t\treturn item ? item.name : '';\r\n\t\t\t\t}).join(', ');\r\n\t\t\t} else {\r\n\t\t\t\treturn 'select'; // LabelPipe.transform('select');\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst item = items.find(x => x.id === value || x.name === value);\r\n\t\t\tif (item) {\r\n\t\t\t\treturn item.name;\r\n\t\t\t} else {\r\n\t\t\t\treturn 'select'; // LabelPipe.transform('select');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDropped($event) {\r\n\t\t// console.log('ControlCustomSelectComponent.onDropped', id);\r\n\t\tif (this.dropped && $event === null) {\r\n\t\t\tthis.control.touched = true;\r\n\t\t}\r\n\t\tthis.dropped = $event === this.dropdownId;\r\n\t}\r\n\r\n\tget isMultiple() {\r\n\t\treturn this.multiple && this.multiple !== false && this.multiple !== 'false';\r\n\t}\r\n}\r\n\r\nControlCustomSelectComponent.meta = {\r\n\tselector: '[control-custom-select]',\r\n\toutputs: ['change'],\r\n\tinputs: ['control', 'label', 'multiple'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--select\" [class]=\"{ required: control.validators.length, multiple: isMultiple }\" [dropdown]=\"dropdownId\" (dropped)=\"onDropped($event)\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<span class=\"control--custom-select\" [innerHTML]=\"getLabel() | label\"></span>\r\n\t\t\t<svg class=\"caret-down\"><use xlink:href=\"#caret-down\"></use></svg>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t\t<div class=\"dropdown\" [dropdown-item]=\"dropdownId\">\r\n\t\t\t<div class=\"category\" [innerHTML]=\"label\"></div>\r\n\t\t\t<ul class=\"nav--dropdown\" [class]=\"{ multiple: isMultiple }\">\r\n\t\t\t\t<li (click)=\"setOption(item)\" [class]=\"{ empty: item.id == null }\" *for=\"let item of control.options\">\r\n\t\t\t\t\t<span [class]=\"{ active: hasOption(item) }\" [innerHTML]=\"item.name | label\"></span>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlEmailComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t}\r\n\r\n}\r\n\r\nControlEmailComponent.meta = {\r\n\tselector: '[control-email]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<input type=\"text\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" required email />\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlSearchComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t\tthis.disabled = this.disabled || false;\r\n\t}\r\n\r\n}\r\n\r\nControlSearchComponent.meta = {\r\n\tselector: '[control-search]',\r\n\tinputs: ['control', 'label', 'disabled'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length, disabled: disabled }\">\r\n\t\t\t<svg class=\"search\"><use xlink:href=\"#search\"></use></svg>\r\n\t\t\t<input type=\"text\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" [disabled]=\"disabled\" />\r\n\t\t</div>\r\n\t`\r\n};\r\n","import { Pipe } from 'rxcomp';\r\n\r\n/*\r\n['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n['\"', '&', ''', '<', '>', ' ', '¡', '¢', '£', '¤', '¥', '¦', '§', '¨', '©', 'ª', '«', '¬', '­', '®', '¯', '°', '±', '²', '³', '´', 'µ', '¶', '·', '¸', '¹', 'º', '»', '¼', '½', '¾', '¿', 'À', 'Á', 'Â', 'Ã', 'Ä', 'Å', 'Æ', 'Ç', 'È', 'É', 'Ê', 'Ë', 'Ì', 'Í', 'Î', 'Ï', 'Ð', 'Ñ', 'Ò', 'Ó', 'Ô', 'Õ', 'Ö', '×', 'Ø', 'Ù', 'Ú', 'Û', 'Ü', 'Ý', 'Þ', 'ß', 'à', 'á', 'ã', 'ä', 'å', 'æ', 'ç', 'è', 'é', 'ê', 'ë', 'ì', 'í', 'î', 'ï', 'ð', 'ñ', 'ò', 'ó', 'ô', 'õ', 'ö', '÷', 'ø', 'ù', 'ú', 'û', 'ü', 'ý', 'þ', 'ÿ', '&', '•', '°', '∞', '‰', '⋅', '±', '†', '—', '¬', 'µ', '⊥', '∥', '€', '£', '¥', '¢', '©', '®', '™', 'α', 'β', 'γ', 'δ', 'ε', 'ζ', 'η', 'θ', 'ι', 'κ', 'λ', 'μ', 'ν', 'ξ', 'ο', 'π', 'ρ', 'σ', 'τ', 'υ', 'φ', 'χ', 'ψ', 'ω', 'Α', 'Β', 'Γ', 'Δ', 'Ε', 'Ζ', 'Η', 'Θ', 'Ι', 'Κ', 'Λ', 'Μ', 'Ν', 'Ξ', 'Ο', 'Π', 'Ρ', 'Σ', 'Τ', 'Υ', 'Φ', 'Χ', 'Ψ', 'Ω'];\r\n*/\r\n\r\nexport class HtmlPipe extends Pipe {\r\n\r\n\tstatic transform(value) {\r\n\t\tif (value) {\r\n\t\t\tvalue = value.replace(/&#(\\d+);/g, function(m, n) {\r\n\t\t\t\treturn String.fromCharCode(parseInt(n));\r\n\t\t\t});\r\n\t\t\tconst escapes = ['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n\t\t\tconst unescapes = ['\"', '&', '\\'', '<', '>', ' ', '¡', '¢', '£', '¤', '¥', '¦', '§', '¨', '©', 'ª', '«', '¬', '­', '®', '¯', '°', '±', '²', '³', '´', 'µ', '¶', '·', '¸', '¹', 'º', '»', '¼', '½', '¾', '¿', 'À', 'Á', 'Â', 'Ã', 'Ä', 'Å', 'Æ', 'Ç', 'È', 'É', 'Ê', 'Ë', 'Ì', 'Í', 'Î', 'Ï', 'Ð', 'Ñ', 'Ò', 'Ó', 'Ô', 'Õ', 'Ö', '×', 'Ø', 'Ù', 'Ú', 'Û', 'Ü', 'Ý', 'Þ', 'ß', 'à', 'á', 'ã', 'ä', 'å', 'æ', 'ç', 'è', 'é', 'ê', 'ë', 'ì', 'í', 'î', 'ï', 'ð', 'ñ', 'ò', 'ó', 'ô', 'õ', 'ö', '÷', 'ø', 'ù', 'ú', 'û', 'ü', 'ý', 'þ', 'ÿ', '&', '•', '°', '∞', '‰', '⋅', '±', '†', '—', '¬', 'µ', '⊥', '∥', '€', '£', '¥', '¢', '©', '®', '™', 'α', 'β', 'γ', 'δ', 'ε', 'ζ', 'η', 'θ', 'ι', 'κ', 'λ', 'μ', 'ν', 'ξ', 'ο', 'π', 'ρ', 'σ', 'τ', 'υ', 'φ', 'χ', 'ψ', 'ω', 'Α', 'Β', 'Γ', 'Δ', 'Ε', 'Ζ', 'Η', 'Θ', 'Ι', 'Κ', 'Λ', 'Μ', 'Ν', 'Ξ', 'Ο', 'Π', 'Ρ', 'Σ', 'Τ', 'Υ', 'Φ', 'Χ', 'Ψ', 'Ω'];\r\n\t\t\tconst rx = new RegExp(`(&${escapes.join(';)|(&')};)`, 'g');\r\n\t\t\tvalue = value.replace(rx, function() {\r\n\t\t\t\tfor (let i = 1; i < arguments.length; i++) {\r\n\t\t\t\t\tif (arguments[i]) {\r\n\t\t\t\t\t\t// console.log(arguments[i], unescapes[i - 1]);\r\n\t\t\t\t\t\treturn unescapes[i - 1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// console.log(value);\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nHtmlPipe.meta = {\r\n\tname: 'html',\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\nimport { Utils } from '../utils/utils';\r\n\r\nexport class LabelPipe extends Pipe {\r\n\r\n\tstatic transform(key) {\r\n\t\tconst labels = LabelPipe.labels_;\r\n\t\treturn labels[key] || key; // `#${key}#`;\r\n\t}\r\n\r\n\tstatic getKeys(...keys) {\r\n\t\treturn LabelPipe.transform(keys.map(x => x.replace('-', '_')).join('_'));\r\n\t}\r\n\r\n\tstatic setLabels() {\r\n\t\tconst LABELS = Utils.merge({\r\n\t\t\tselect: 'Seleziona',\r\n\t\t\tbrowse: 'Sfoglia',\r\n\t\t\tcancel: 'Annulla',\r\n\t\t\terror_email: 'Email non valida',\r\n\t\t\terror_match: 'I campi non corrispondono',\r\n\t\t\terror_required: 'Campo obbligatorio',\r\n\t\t\tloading: 'caricamento',\r\n\t\t\tremove: 'Rimuovi',\r\n\t\t\trequired: 'Richiesto',\r\n\t\t\tselect_file: 'Seleziona una file...',\r\n\t\t\tupdate: 'Aggiorna',\r\n\t\t\tupload: 'Carica',\r\n\t\t\tdrag_and_drop_images: 'Drag And Drop your images here',\r\n\t\t}, environment.labels);\r\n\t\tthis.labels_ = LABELS;\r\n\t}\r\n}\r\n\r\nLabelPipe.setLabels();\r\n\r\nLabelPipe.meta = {\r\n\tname: 'label',\r\n};\r\n","import { fromEvent, ReplaySubject } from 'rxjs';\r\nimport { delay, switchMap } from 'rxjs/operators';\r\n\r\nexport class LocomotiveScrollService {\r\n\r\n\tstatic scroll$ = new ReplaySubject(1);\r\n\tstatic scroll(scroll) {\r\n\t\t// console.log('LocomotiveScrollService.scroll', scroll);\r\n\t\tthis.scroll$.next(scroll);\r\n\t}\r\n\r\n\tstatic init(node, options) {\r\n\t\toptions = Object.assign({\r\n\t\t\tuseKeyboard: true,\r\n\t\t\tsmoothMobile: true,\r\n\t\t\tinertia: 0.5,\r\n\t\t\t// name:'scroll',\r\n\t\t\t// offset: [0,0], // bottom top\r\n\t\t\t// repeat: false,\r\n\t\t\tsmooth: true,\r\n\t\t\t// initPosition: { x: 0, y: 0 }\r\n\t\t\t// direction: 'vertical',\r\n\t\t\tlerp: 0.01,\r\n\t\t\tgetDirection: true, // add direction to scroll event\r\n\t\t\tgetSpeed: true, // add speed to scroll event\r\n\t\t\t// class: 'is-inview',\r\n\t\t\tinitClass: 'has-scroll-init',\r\n\t\t\tscrollingClass: 'has-scroll-scrolling',\r\n\t\t\tdraggingClass: 'has-scroll-dragging',\r\n\t\t\tsmoothClass: 'has-scroll-smooth',\r\n\t\t\tscrollbarContainer: false,\r\n\t\t\tscrollbarClass: 'c-scrollbar',\r\n\t\t\tmultiplier: 1,\r\n\t\t\tfirefoxMultiplier: 50,\r\n\t\t\ttouchMultiplier: 2,\r\n\t\t\tscrollFromAnywhere: true,\r\n\t\t\tgestureDirection: 'vertical',\r\n\t\t\treloadOnContextChange: false,\r\n\t\t\tresetNativeScroll: true,\r\n\t\t}, options, {\r\n\t\t\tel: node,\r\n\t\t});\r\n\t\tif (this.useLocomotiveScroll()) {\r\n\t\t\tconst instance = new LocomotiveScroll(options);\r\n\t\t\tLocomotiveScrollService.instance = instance;\r\n\t\t\treturn instance;\r\n\t\t} else {\r\n\t\t\tdocument.querySelector('html').classList.add('has-scroll-init');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic useLocomotiveScroll() {\r\n\t\treturn window.innerWidth >= 768 && !this.isMacLike();\r\n\t}\r\n\r\n\tstatic isMacLike() {\r\n\t\tconst isMacLike = /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform);\r\n\t\treturn isMacLike;\r\n\t}\r\n\r\n\tstatic isIOS() {\r\n\t\tconst isIOS = /(iPhone|iPod|iPad)/i.test(navigator.platform);\r\n\t\treturn isIOS;\r\n\t}\r\n\r\n\tstatic isMacOs() {\r\n\t\tconst isMacOs = navigator.platform.toLowerCase().indexOf('mac') >= 0;\r\n\t\treturn isMacOs;\r\n\t}\r\n\r\n\tstatic isSafari() {\r\n\t\tconst isSafari = navigator.vendor.match(/apple/i) &&\r\n\t\t\t!navigator.userAgent.match(/crios/i) &&\r\n\t\t\t!navigator.userAgent.match(/fxios/i);\r\n\t\treturn isSafari;\r\n\t}\r\n\r\n\tstatic init$(node) {\r\n\t\treturn fromEvent(window, 'load').pipe(\r\n\t\t\tdelay(1),\r\n\t\t\tswitchMap(_ => {\r\n\t\t\t\t// setTimeout(() => {\r\n\t\t\t\tconst instance = LocomotiveScrollService.init(node);\r\n\t\t\t\tif (instance) {\r\n\t\t\t\t\tinstance.on('scroll', instance => {\r\n\t\t\t\t\t\tLocomotiveScrollService.scroll(instance);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst event = { direction: null, scroll: { x: 0, y: 0 }, speed: 0 };\r\n\t\t\t\t\t// const body = document.querySelector('body');\r\n\t\t\t\t\tlet previousY = window.pageYOffset; // body.scrollTop;\r\n\t\t\t\t\twindow.addEventListener('scroll', () => {\r\n\t\t\t\t\t\tconst y = window.pageYOffset; // body.scrollTop;\r\n\t\t\t\t\t\tconst direction = y > previousY ? 'down' : 'up';\r\n\t\t\t\t\t\t// console.log('scroll', y, direction);\r\n\t\t\t\t\t\tpreviousY = y;\r\n\t\t\t\t\t\tevent.direction = direction;\r\n\t\t\t\t\t\tevent.scroll.y = y;\r\n\t\t\t\t\t\tLocomotiveScrollService.scroll(event);\r\n\t\t\t\t\t}, true);\r\n\t\t\t\t}\r\n\t\t\t\treturn LocomotiveScrollService.scroll$;\r\n\t\t\t\t// }, 1);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic update() {\r\n\t\tif (this.instance) {\r\n\t\t\tthis.instance.update();\r\n\t\t}\r\n\t}\r\n\r\n\tstatic scrollTo(target, options) {\r\n\t\tif (this.instance) {\r\n\t\t\tthis.instance.scrollTo(target, options);\r\n\t\t} else {\r\n\t\t\ttarget.scrollIntoView();\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from './locomotive-scroll.service';\r\n\r\nexport class LocomotiveScrollDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tLocomotiveScrollService.init$(node).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('LocomotiveScrollDirective', event);\r\n\t\t});\r\n\t\t/*\r\n\t\twindow.onload = () => {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tconst instance = LocomotiveScrollService.init(node);\r\n\t\t\t\tif (instance) {\r\n\t\t\t\t\tinstance.on('scroll', instance => {\r\n\t\t\t\t\t\tLocomotiveScrollService.scroll(instance.scroll.y);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst body = document.querySelector('body');\r\n\t\t\t\t\twindow.addEventListener('scroll', () => {\r\n\t\t\t\t\t\tconst y = body.scrollTop; // window.pageYOffset\r\n\t\t\t\t\t\tLocomotiveScrollService.scroll(y);\r\n\t\t\t\t\t}, true);\r\n\t\t\t\t}\r\n\t\t\t}, 1);\r\n\t\t};\r\n\t\t*/\r\n\t}\r\n\r\n}\r\n\r\nLocomotiveScrollDirective.meta = {\r\n\tselector: '[locomotive-scroll],[[locomotive-scroll]]'\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil, tap } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from './locomotive-scroll.service';\r\n\r\nexport class ScrollDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tif (!LocomotiveScrollService.useLocomotiveScroll()) {\r\n\t\t\tthis.scroll$().pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(event => {\r\n\t\t\t\t// console.log('ScrollDirective', event);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tscroll$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst speed = node.hasAttribute('data-scroll-speed') ? parseFloat(node.getAttribute('data-scroll-speed')) : 1.5;\r\n\t\treturn LocomotiveScrollService.scroll$.pipe(\r\n\t\t\ttap(scroll => {\r\n\t\t\t\tconst wh = window.innerHeight;\r\n\t\t\t\tconst wh2 = wh / 2;\r\n\t\t\t\tconst rect = node.getBoundingClientRect();\r\n\t\t\t\tconst currentY = gsap.getProperty(node, 'y');\r\n\t\t\t\tconst top = rect.top - currentY;\r\n\t\t\t\tconst bottom = rect.bottom - currentY;\r\n\t\t\t\tif (top < wh && bottom > 0) {\r\n\t\t\t\t\tconst pow = (top - wh2) / wh2;\r\n\t\t\t\t\tconst y = pow * speed * 40;\r\n\t\t\t\t\tgsap.set(node, { y });\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nScrollDirective.meta = {\r\n\tselector: '[data-scroll]'\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nexport class SlugPipe extends Pipe {\r\n\r\n\tstatic transform(key) {\r\n\t\tconst slug = environment.slug;\r\n\t\treturn slug[key] || `#${key}`;\r\n\t}\r\n\r\n}\r\n\r\nSlugPipe.meta = {\r\n\tname: 'slug',\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { Subject } from 'rxjs';\r\n\r\nexport class SwiperDirective extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 'auto',\r\n\t\t\tspaceBetween: 0,\r\n\t\t\tcenteredSlides: true,\r\n\t\t\tspeed: 600,\r\n\t\t\tautoplay: {\r\n\t\t\t\tdelay: 5000,\r\n\t\t\t},\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t}\r\n\r\n\tget enabled() {\r\n\t\treturn !window.matchMedia('print').matches;\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tthis.swiperInitOrUpdate_();\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners_();\r\n\t\tthis.swiperDestroy_();\r\n\t}\r\n\r\n\tonBeforePrint() {\r\n\t\tthis.swiperDestroy_();\r\n\t}\r\n\r\n\tslideToIndex(index) {\r\n\t\t// console.log('SwiperDirective.slideToIndex', index);\r\n\t\tif (this.swiper) {\r\n\t\t\tthis.swiper.slideTo(index);\r\n\t\t}\r\n\t}\r\n\r\n\thasPrev() {\r\n\t\tconst swiper = this.swiper;\r\n\t\tif (swiper && swiper.activeIndex > 0 && swiper.slides.length > swiper.activeIndex) {\r\n\t\t\t// console.log('SwiperDirective.hasPrev', swiper.activeIndex, swiper.realIndex, swiper.slides);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\r\n\thasNext() {\r\n\t\tconst swiper = this.swiper;\r\n\t\tif (swiper) {\r\n\t\t\tconst slidesPerView = swiper.params.slidesPerView || 1;\r\n\t\t\t// console.log('SwiperDirective.hasNext', swiper.slides.length, swiper.params.slidesPerView);\r\n\t\t\tif (swiper.activeIndex < swiper.slides.length - slidesPerView) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tslidePrev() {\r\n\t\tconst swiper = this.swiper;\r\n\t\tif (this.hasPrev()) {\r\n\t\t\t// console.log('SwiperDirective.slidePrev', swiper.activeIndex, swiper.realIndex, swiper.slides);\r\n\t\t\tswiper.slideTo(swiper.activeIndex - 1);\r\n\t\t}\r\n\t}\r\n\r\n\tslideNext() {\r\n\t\tconst swiper = this.swiper;\r\n\t\tif (this.hasNext()) {\r\n\t\t\t// console.log('SwiperDirective.slideNext', swiper.activeIndex, swiper.realIndex, swiper.slides);\r\n\t\t\tswiper.slideTo(swiper.activeIndex + 1);\r\n\t\t}\r\n\t}\r\n\r\n\tinit_(target) {\r\n\t\tthis.events$ = new Subject();\r\n\t\tif (this.enabled) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\ttarget = target || node;\r\n\t\t\tthis.target = target;\r\n\t\t\tgsap.set(target, { opacity: 0 });\r\n\t\t\tthis.index = 0;\r\n\t\t\tconst on = this.options.on || {};\r\n\t\t\ton.slideChange = () => {\r\n\t\t\t\tconst swiper = this.swiper;\r\n\t\t\t\tif (swiper) {\r\n\t\t\t\t\tthis.index = swiper.activeIndex;\r\n\t\t\t\t\tthis.events$.next(this.index);\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.options.on = on;\r\n\t\t\tthis.addListeners_();\r\n\t\t}\r\n\t}\r\n\r\n\taddListeners_() {\r\n\t\tthis.onBeforePrint = this.onBeforePrint.bind(this);\r\n\t\twindow.addEventListener('beforeprint', this.onBeforePrint);\r\n\t\t/*\r\n\t\tscope.$on('onResize', ($scope) => {\r\n\t\t\tthis.onResize(scope, element, attributes);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\tremoveListeners_() {\r\n\t\twindow.removeEventListener('beforeprint', this.onBeforePrint);\r\n\t}\r\n\r\n\tswiperInitOrUpdate_() {\r\n\t\tif (this.enabled) {\r\n\t\t\tconst target = this.target;\r\n\t\t\tif (this.swiper) {\r\n\t\t\t\tthis.swiper.update();\r\n\t\t\t} else {\r\n\t\t\t\tlet swiper;\r\n\t\t\t\tconst on = this.options.on || (this.options.on = {});\r\n\t\t\t\tconst callback = on.init;\r\n\t\t\t\tif (!on.init || !on.init.swiperDirectiveInit) {\r\n\t\t\t\t\ton.init = function() {\r\n\t\t\t\t\t\tgsap.to(target, {\r\n\t\t\t\t\t\t\tduration: 0.4,\r\n\t\t\t\t\t\t\topacity: 1,\r\n\t\t\t\t\t\t\tease: Power2.easeOut,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tif (typeof callback === 'function') {\r\n\t\t\t\t\t\t\t\tcallback.apply(this, [swiper, element, scope]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, 1);\r\n\t\t\t\t\t};\r\n\t\t\t\t\ton.init.swiperDirectiveInit = true;\r\n\t\t\t\t}\r\n\t\t\t\tgsap.set(target, { opacity: 1 });\r\n\t\t\t\tswiper = new Swiper(target, this.options);\r\n\t\t\t\tconsole.log(swiper);\r\n\t\t\t\tthis.swiper = swiper;\r\n\t\t\t\tthis.swiper._opening = true;\r\n\t\t\t\ttarget.classList.add('swiper-init');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tswiperDestroy_() {\r\n\t\tif (this.swiper) {\r\n\t\t\tthis.swiper.destroy();\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nSwiperDirective.meta = {\r\n\tselector: '[swiper]',\r\n\tinputs: ['consumer']\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\n\r\nlet ID = 0;\r\n\r\nexport class ThronComponent extends Component {\r\n\r\n\tplaying_ = false;\r\n\tget playing() {\r\n\t\treturn this.playing_;\r\n\t}\r\n\tset playing(playing) {\r\n\t\tif (this.playing_ !== playing) {\r\n\t\t\tthis.playing_ = playing;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tif (node) {\r\n\t\t\t\tplaying ? node.classList.add('playing') : node.classList.remove('playing');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\t// console.log('ThronComponent.onInit');\r\n\t\tconst THRON = window.THRONContentExperience || window.THRONPlayer;\r\n\t\tif (!THRON) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// console.log('THRONContentExperience', window.THRONContentExperience, 'THRONPlayer', window.THRONPlayer);\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = this.target = node.querySelector('.video > .thron');\r\n\t\tconst id = target.id = `thron-${++ID}`;\r\n\t\tlet media = this.thron;\r\n\t\tif (media.indexOf('pkey=') === -1) {\r\n\t\t\tconst splitted = media.split('/');\r\n\t\t\tconst clientId = splitted[6];\r\n\t\t\tconst xcontentId = splitted[7];\r\n\t\t\tconst pkey = splitted[8];\r\n\t\t\tmedia = `https://gruppoconcorde-view.thron.com/api/xcontents/resources/delivery/getContentDetail?clientId=${clientId}&xcontentId=${xcontentId}&pkey=${pkey}`;\r\n\t\t}\r\n\t\tconst controls = this.controls = node.hasAttribute('controls') ? true : false,\r\n\t\t\tloop = this.loop = node.hasAttribute('loop') ? true : false,\r\n\t\t\tautoplay = this.autoplay = node.hasAttribute('autoplay') ? true : false;\r\n\t\tconst player = this.player = THRON(id, {\r\n\t\t\tmedia: media,\r\n\t\t\tloop: loop,\r\n\t\t\tautoplay: autoplay,\r\n\t\t\tmuted: !controls,\r\n\t\t\tdisplayLinked: 'close',\r\n\t\t\tnoSkin: !controls,\r\n\t\t\t// lockBitrate: 'max',\r\n\t\t});\r\n\t\tthis.onReady = this.onReady.bind(this);\r\n\t\tthis.onCanPlay = this.onCanPlay.bind(this);\r\n\t\tthis.onPlaying = this.onPlaying.bind(this);\r\n\t\tthis.onPlay = this.onPlay.bind(this);\r\n\t\tthis.onPause = this.onPause.bind(this);\r\n\t\tthis.onComplete = this.onComplete.bind(this);\r\n\t\tplayer.on('ready', this.onReady);\r\n\t\tplayer.on('canPlay', this.onCanPlay);\r\n\t\tplayer.on('playing', this.onPlaying);\r\n\t\tplayer.on('play', this.onPlay);\r\n\t\tplayer.on('pause', this.onPause);\r\n\t\tplayer.on('complete', this.onComplete);\r\n\t}\r\n\r\n\tonReady() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tif (!this.controls) {\r\n\t\t\tconst mediaContainer = player.mediaContainer();\r\n\t\t\tconst video = mediaContainer.querySelector('video');\r\n\t\t\tvideo.setAttribute('playsinline', 'true');\r\n\t\t\tvideo.setAttribute('autoplay', 'true');\r\n\t\t}\r\n\t\tthis.ready.next(id);\r\n\t\t// video.setAttribute('autoplay', 'true');\r\n\t};\r\n\r\n\tonCanPlay() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\t// console.log('ThronDirective.onCanPlay', id);\r\n\t\tthis.canPlay.next(id);\r\n\t}\r\n\r\n\tonPlaying() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tplayer.off('playing', this.onPlaying);\r\n\t\tif (!this.controls) {\r\n\t\t\tconst qualities = player.qualityLevels();\r\n\t\t\t// console.log('ThronDirective.onPlaying', id, qualities);\r\n\t\t\tif (qualities.length) {\r\n\t\t\t\tconst highestQuality = qualities[qualities.length - 1].index;\r\n\t\t\t\tconst lowestQuality = qualities[0].index;\r\n\t\t\t\tplayer.currentQuality(highestQuality);\r\n\t\t\t\t// console.log('ThronDirective.onPlaying', id, 'currentQuality', player.currentQuality());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonPlay() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\t// console.log('ThronDirective.onComplete', id);\r\n\t\tthis.playing = true;\r\n\t\tthis.play.next(id);\r\n\t}\r\n\r\n\tonPause() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\t// console.log('ThronDirective.onComplete', id);\r\n\t\tthis.playing = false;\r\n\t\tthis.pause.next(id);\r\n\t}\r\n\r\n\tonComplete() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\t// console.log('ThronDirective.onComplete', id);\r\n\t\tthis.playing = false;\r\n\t\tthis.complete.next(id);\r\n\t}\r\n\r\n\tplayVideo() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tconst status = player.status();\r\n\t\t// console.log('ThronDirective.playVideo', id, status);\r\n\t\tif (status && !status.playing) {\r\n\t\t\tplayer.play();\r\n\t\t}\r\n\t}\r\n\r\n\tpauseVideo() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tconst status = player.status();\r\n\t\t// console.log('ThronDirective.pauseVideo', id, status);\r\n\t\tif (status && status.playing) {\r\n\t\t\tplayer.pause();\r\n\t\t}\r\n\t}\r\n\r\n\ttoggle() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tconst status = player.status();\r\n\t\t// console.log('ThronDirective.pauseVideo', id, status);\r\n\t\tif (status && status.playing) {\r\n\t\t\tplayer.pause();\r\n\t\t} else {\r\n\t\t\tplayer.play();\r\n\t\t}\r\n\t}\r\n\r\n\tplay(id) {\r\n\t\t// console.log('ThronDirective.play', id, id, id === id);\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (id === this.target.id) {\r\n\t\t\tthis.playVideo();\r\n\t\t}\r\n\t}\r\n\r\n\tpause(id) {\r\n\t\t// console.log('ThronDirective.pause', id, id, id === id);\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (id === this.target.id) {\r\n\t\t\tthis.pauseVideo();\r\n\t\t}\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tconst player = this.player;\r\n\t\tif (player) {\r\n\t\t\tplayer.off('ready', this.onReady);\r\n\t\t\tplayer.off('canPlay', this.onCanPlay);\r\n\t\t\tplayer.off('playing', this.onPlaying);\r\n\t\t\tplayer.off('play', this.onPlay);\r\n\t\t\tplayer.off('pause', this.onPause);\r\n\t\t\tplayer.off('complete', this.onComplete);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nThronComponent.meta = {\r\n\tselector: '[thron],[[thron]]',\r\n\toutputs: ['ready', 'canPlay', 'play', 'pause', 'complete'],\r\n\tinputs: ['thron', 'm3u8'],\r\n\ttemplate: /* html */``,\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class TitleDirective extends Directive {\r\n\tset title(title) {\r\n\t\tif (this.title_ !== title) {\r\n\t\t\tthis.title_ = title;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\ttitle ? node.setAttribute('title', title) : node.removeAttribute('title');\r\n\t\t}\r\n\t}\r\n\tget title() {\r\n\t\treturn this.title_;\r\n\t}\r\n}\r\n\r\nTitleDirective.meta = {\r\n\tselector: '[[title]]',\r\n\tinputs: ['title'],\r\n};\r\n","import { BehaviorSubject } from 'rxjs';\r\n\r\nexport const FilterMode = {\r\n\tSELECT: 'select',\r\n\tAND: 'and',\r\n\tOR: 'or',\r\n\tQUERY: 'query',\r\n};\r\n\r\nexport class FilterItem {\r\n\r\n\tconstructor(filter) {\r\n\t\tthis.change$ = new BehaviorSubject();\r\n\t\tthis.mode = FilterMode.SELECT;\r\n\t\tthis.filter = 'Filter';\r\n\t\tthis.placeholder = 'Select';\r\n\t\tthis.values = [];\r\n\t\tthis.options = [];\r\n\t\tif (filter) {\r\n\t\t\tObject.assign(this, filter);\r\n\t\t}\r\n\t\tif (filter.mode === FilterMode.SELECT) {\r\n\t\t\tfilter.options.unshift({\r\n\t\t\t\tlabel: filter.placeholder,\r\n\t\t\t\tvalue: undefined,\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfilter(item, value) {\r\n\t\treturn item.options.indexOf(value) !== -1;\r\n\t}\r\n\r\n\tmatch(item) {\r\n\t\tlet match;\r\n\t\tif (this.mode === FilterMode.OR) {\r\n\t\t\tmatch = this.values.length ? false : true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match || this.filter(item, value);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tmatch = true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match && this.filter(item, value);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn match;\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tif (this.mode === FilterMode.SELECT || this.mode === FilterMode.QUERY) {\r\n\t\t\treturn this.placeholder || this.label;\r\n\t\t} else {\r\n\t\t\treturn this.label;\r\n\t\t}\r\n\t}\r\n\r\n\thas(item) {\r\n\t\treturn this.values.indexOf(item.value) !== -1;\r\n\t}\r\n\r\n\tset(item) {\r\n\t\tif (this.mode === FilterMode.QUERY) {\r\n\t\t\tthis.values = item ? [item] : [];\r\n\t\t\tthis.placeholder = item;\r\n\t\t} else {\r\n\t\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\t\tthis.values = [];\r\n\t\t\t}\r\n\t\t\tconst index = this.values.indexOf(item.value);\r\n\t\t\tif (index === -1) {\r\n\t\t\t\tif (item.value !== undefined) {\r\n\t\t\t\t\tthis.values.push(item.value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\t\tthis.placeholder = item.label;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// console.log('FilterItem.set', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\tremove(item) {\r\n\t\tconst index = this.values.indexOf(item.value);\r\n\t\tif (index !== -1) {\r\n\t\t\tthis.values.splice(index, 1);\r\n\t\t}\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst first = this.options[0];\r\n\t\t\tthis.placeholder = first.label;\r\n\t\t}\r\n\t\t// console.log('FilterItem.remove', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\ttoggle(item) {\r\n\t\tif (this.has(item)) {\r\n\t\t\tthis.remove(item);\r\n\t\t} else {\r\n\t\t\tthis.set(item);\r\n\t\t}\r\n\t}\r\n\r\n\tclear() {\r\n\t\tthis.values = [];\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst first = this.options[0];\r\n\t\t\tthis.placeholder = first.label;\r\n\t\t}\r\n\t\tthis.change$.next();\r\n\t}\r\n}\r\n","export class LocationService {\r\n\r\n\tstatic has(key) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\t// console.log('LocationService.has', params);\r\n\t\treturn params.has(key);\r\n\t}\r\n\r\n\tstatic get(key) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\t// console.log('LocationService.get', params);\r\n\t\treturn params.get(key);\r\n\t}\r\n\r\n\tstatic set(keyOrValue, value) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams.set(keyOrValue, value);\r\n\t\t} else {\r\n\t\t\tparams.set(keyOrValue, '');\r\n\t\t}\r\n\t\tthis.pushParams(params);\r\n\t\t// console.log('LocationService.set', params, keyOrValue, value);\r\n\t}\r\n\r\n\tstatic pushParams(params) {\r\n\t\tif (window.history && window.history.pushState) {\r\n\t\t\tconst title = document.title;\r\n\t\t\tconst url = `${window.location.href.split('?')[0]}?${params.toString()}`;\r\n\t\t\twindow.history.pushState(params.toString(), title, url);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic replace(from, to) {\r\n\t\tconst history = window.history;\r\n\t\tif (history && history.replaceState) {\r\n\t\t\tconst location = window.location;\r\n\t\t\tconst title = document.title;\r\n\t\t\tif (location.pathname === '/') {\r\n\t\t\t\tconst url = location.origin + to + location.search;\r\n\t\t\t\thistory.replaceState(history.state, title, url);\r\n\t\t\t} else if (location.href.indexOf(from) !== -1) {\r\n\t\t\t\tconst url = location.href.replace(from, to);\r\n\t\t\t\thistory.replaceState(history.state, title, url);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic deserialize(key) {\r\n\t\tconst encoded = this.get('params');\r\n\t\treturn this.decode(key, encoded);\r\n\t}\r\n\r\n\tstatic serialize(keyOrValue, value) {\r\n\t\tconst params = this.deserialize();\r\n\t\tconst encoded = this.encode(keyOrValue, value, params);\r\n\t\tthis.set('params', encoded);\r\n\t}\r\n\r\n\tstatic decode(key, encoded) {\r\n\t\tlet decoded = null;\r\n\t\tif (encoded) {\r\n\t\t\tconst json = window.atob(encoded);\r\n\t\t\tdecoded = JSON.parse(json);\r\n\t\t}\r\n\t\tif (key && decoded) {\r\n\t\t\tdecoded = decoded[key];\r\n\t\t}\r\n\t\treturn decoded || null;\r\n\t}\r\n\r\n\tstatic encode(keyOrValue, value, params) {\r\n\t\tparams = params || {};\r\n\t\tlet encoded = null;\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams[keyOrValue] = value;\r\n\t\t} else {\r\n\t\t\tparams = keyOrValue;\r\n\t\t}\r\n\t\tconst json = JSON.stringify(params);\r\n\t\tencoded = window.btoa(json);\r\n\t\treturn encoded;\r\n\t}\r\n\r\n}\r\n","import { merge } from 'rxjs';\r\nimport { map, tap } from 'rxjs/operators';\r\nimport { LocationService } from '../location/location.service';\r\nimport { FilterItem } from './filter-item';\r\n\r\nexport class FilterService {\r\n\r\n\tconstructor(options, initialParams, callback) {\r\n\t\tconst filters = {};\r\n\t\tif (options) {\r\n\t\t\tObject.keys(options).forEach(key => {\r\n\t\t\t\tconst filter = new FilterItem(options[key]);\r\n\t\t\t\tif (typeof callback === 'function') {\r\n\t\t\t\t\tcallback(key, filter);\r\n\t\t\t\t}\r\n\t\t\t\tfilters[key] = filter;\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.filters = filters;\r\n\t\tthis.deserialize(this.filters, initialParams);\r\n\t}\r\n\r\n\tgetParamsCount(params) {\r\n\t\tif (params) {\r\n\t\t\tconst paramsCount = Object.keys(params).reduce((p, c, i) => {\r\n\t\t\t\tconst values = params[c];\r\n\t\t\t\treturn p + (values ? values.length : 0);\r\n\t\t\t}, 0);\r\n\t\t\treturn paramsCount;\r\n\t\t} else {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t}\r\n\r\n\tdeserialize(filters, initialParams) {\r\n\t\tlet params;\r\n\t\tif (initialParams && this.getParamsCount(initialParams)) {\r\n\t\t\tparams = initialParams;\r\n\t\t}\r\n\t\tconst locationParams = LocationService.deserialize('filters');\r\n\t\tif (locationParams && this.getParamsCount(locationParams)) {\r\n\t\t\tparams = locationParams;\r\n\t\t}\r\n\t\tif (params) {\r\n\t\t\tObject.keys(filters).forEach(key => {\r\n\t\t\t\tfilters[key].values = params[key] || [];\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn filters;\r\n\t}\r\n\r\n\tserialize(filters) {\r\n\t\tlet params = {};\r\n\t\tlet any = false;\r\n\t\tObject.keys(filters).forEach(x => {\r\n\t\t\tconst filter = filters[x];\r\n\t\t\tif (filter.value !== null) {\r\n\t\t\t\tparams[x] = filter.values;\r\n\t\t\t\tany = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (!any) {\r\n\t\t\tparams = null;\r\n\t\t}\r\n\t\t// console.log('ReferenceCtrl.serialize', params);\r\n\t\tLocationService.serialize('filters', params);\r\n\t\treturn params;\r\n\t}\r\n\r\n\titems$(items) {\r\n\t\tconst filters = this.filters;\r\n\t\tconst changes = Object.keys(filters).map(key => filters[key].change$);\r\n\t\treturn merge(...changes).pipe(\r\n\t\t\t// tap(() => console.log(filters)),\r\n\t\t\ttap(() => this.serialize(filters)),\r\n\t\t\tmap(() => this.filterItems(items)),\r\n\t\t\ttap(() => this.updateFilterStates(filters, items))\r\n\t\t);\r\n\t}\r\n\r\n\tfilterItems(items, skipFilter) {\r\n\t\tconst filters = Object.keys(this.filters).map((x) => this.filters[x]).filter(x => x.value !== null);\r\n\t\titems = items.filter(item => {\r\n\t\t\tlet has = true;\r\n\t\t\tfilters.forEach(filter => {\r\n\t\t\t\tif (filter !== skipFilter) {\r\n\t\t\t\t\thas = has && filter.match(item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn has;\r\n\t\t});\r\n\t\treturn items;\r\n\t}\r\n\r\n\tupdateFilterStates(filters, items) {\r\n\t\tObject.keys(filters).forEach(x => {\r\n\t\t\tconst filter = filters[x];\r\n\t\t\tconst filteredItems = this.filterItems(items, filter);\r\n\t\t\tfilter.options.forEach(option => {\r\n\t\t\t\tlet count = 0;\r\n\t\t\t\tif (option.value) {\r\n\t\t\t\t\tlet i = 0;\r\n\t\t\t\t\twhile (i < filteredItems.length) {\r\n\t\t\t\t\t\tconst item = filteredItems[i];\r\n\t\t\t\t\t\tif (filter.filter(item, option.value)) {\r\n\t\t\t\t\t\t\tcount++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ti++;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcount = filteredItems.length;\r\n\t\t\t\t}\r\n\t\t\t\toption.count = count;\r\n\t\t\t\toption.disabled = count === 0;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tlet filter;\r\n\t\tObject.keys(this.filters).forEach(x => {\r\n\t\t\tfilter = this.filters[x];\r\n\t\t\tfilter.values = [];\r\n\t\t});\r\n\t\tif (filter) {\r\n\t\t\tfilter.change$.next();\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { from, throwError } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\n\r\nexport class HttpResponse {\r\n\r\n\tget static() {\r\n\t\treturn this.url.indexOf('.json') === this.url.length - 5;\r\n\t}\r\n\r\n\tconstructor(response) {\r\n\t\tthis.data = null;\r\n\t\tif (response) {\r\n\t\t\tthis.url = response.url;\r\n\t\t\tthis.status = response.status;\r\n\t\t\tthis.statusText = response.statusText;\r\n\t\t\tthis.ok = response.ok;\r\n\t\t\tthis.redirected = response.redirected;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class HttpService {\r\n\r\n\tstatic http$(method, url, data, format = 'json', userPass = null) {\r\n\t\tconst methods = ['POST', 'PUT', 'PATCH'];\r\n\t\tlet response_ = null;\r\n\t\t// url = this.getUrl(url, format);\r\n\t\tconst options = {\r\n\t\t\tmethod: method,\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: methods.indexOf(method) !== -1 ? JSON.stringify(data) : undefined\r\n\t\t}\r\n\t\tif (userPass) {\r\n\t\t\t// options.mode = 'no-cors';\r\n\t\t\toptions.credentials = 'include';\r\n\t\t\tuserPass = window.btoa(userPass);\r\n\t\t\toptions.headers['Authorization'] = `Basic ${userPass}`;\r\n\t\t}\r\n\t\toptions.headers = new Headers(options.headers);\r\n\t\treturn from(fetch(url, options).then((response) => {\r\n\t\t\tresponse_ = response;\r\n\t\t\t// console.log(response);\r\n\t\t\ttry {\r\n\t\t\t\tconst contentType = response.headers.get('content-type');\r\n\t\t\t\tlet typedResponse;\r\n\t\t\t\tif (contentType && contentType.indexOf('application/json') !== -1) {\r\n\t\t\t\t\ttypedResponse = response.json();\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttypedResponse = response.text();\r\n\t\t\t\t}\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\treturn typedResponse;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn typedResponse.then(data => {\r\n\t\t\t\t\t\treturn Promise.reject(data);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\tconsole.warn('HttpService.http$', 'Cannot parse response');\r\n\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.reject(error);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})).pipe(\r\n\t\t\tcatchError(error => {\r\n\t\t\t\treturn throwError(this.getError(error, response_));\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\t/*\r\n\t// !!! todo mapping response.data\r\n\tstatic http$(method, url, data, format = 'json') {\r\n\t\tconst methods = ['POST', 'PUT', 'PATCH'];\r\n\t\tconst body = (data && methods.indexOf(method) !== -1) ? JSON.stringify(data) : undefined;\r\n\t\tconst queryString = (data && methods.indexOf(method) !== -1) ? Object.keys(data).map(function(key) {\r\n\t\t\treturn key + '=' + encodeURI(data[key]);\r\n\t\t}).join('&') : undefined;\r\n\t\tif (queryString) {\r\n\t\t\turl = `${url}?${queryString}`;\r\n\t\t}\r\n\t\tlet response_ = null;\r\n\t\treturn from(fetch(url, {\r\n\t\t\tmethod: method,\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: body,\r\n\t\t}).then((response) => {\r\n\t\t\tresponse_ = new HttpResponse(response);\r\n\t\t\ttry {\r\n\t\t\t\tconst contentType = response.headers.get('content-type');\r\n\t\t\t\tlet typedResponse;\r\n\t\t\t\tif (contentType && format === 'json' && contentType.indexOf('application/json') !== -1) {\r\n\t\t\t\t\ttypedResponse = response.json();\r\n\t\t\t\t} else if (format === 'blob') {\r\n\t\t\t\t\ttypedResponse = response.blob();\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttypedResponse = response.text();\r\n\t\t\t\t}\r\n\t\t\t\treturn typedResponse.then(data => {\r\n\t\t\t\t\tresponse_.data = data;\r\n\t\t\t\t\tif (response.ok) {\r\n\t\t\t\t\t\treturn Promise.resolve(response_);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn Promise.reject(response_);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} catch(error) {\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\tconsole.warn('HttpService.http$', 'Cannot parse response');\r\n\t\t\t\t\treturn Promise.resolve(response_);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.reject(this.getError(error, response_));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})).pipe(\r\n\t\t\tcatchError(error => {\r\n\t\t\t\treturn throwError(this.getError(error, response_));\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\t*/\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\tconst query = this.query(data);\r\n\t\treturn this.http$('GET', `${url}${query}`, undefined, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn this.http$('DELETE', url);\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn this.http$('POST', url, data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn this.http$('PUT', url, data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn this.http$('PATCH', url, data);\r\n\t}\r\n\r\n\tstatic query(data) {\r\n\t\treturn ''; // todo\r\n\t}\r\n\r\n\tstatic getError(object, response) {\r\n\t\tlet error = typeof object === 'object' ? object : {};\r\n\t\tif (!error.status) {\r\n\t\t\terror.status = response ? response.status : 0;\r\n\t\t}\r\n\t\tif (!error.statusCode) {\r\n\t\t\terror.statusCode = response ? response.status : 0;\r\n\t\t}\r\n\t\tif (!error.statusMessage) {\r\n\t\t\terror.statusMessage = response ? response.statusText : object;\r\n\t\t}\r\n\t\t// console.log('HttpService.getError', error, object);\r\n\t\treturn error;\r\n\t}\r\n\r\n}\r\n","import { from } from 'rxjs';\r\nimport { tap } from 'rxjs/operators';\r\nimport { environment } from '../../environment';\r\nimport { LabelPipe } from '../label/label.pipe';\r\nimport { LocationService } from '../location/location.service';\r\nimport { Utils } from '../utils/utils';\r\n\r\nexport class LanguageService {\r\n\r\n\tstatic languages = this.getDefaultLanguages();\r\n\tstatic defaultLanguage = this.getDefaultLanguage();\r\n\tstatic selectedLanguage = this.defaultLanguage;\r\n\r\n\tstatic get hasLanguages() {\r\n\t\treturn this.languages.length > 1;\r\n\t}\r\n\r\n\tstatic get activeLanguage() {\r\n\t\treturn this.languages.find(language => language.lang === this.selectedLanguage);\r\n\t}\r\n\r\n\tstatic getDefaultLanguages() {\r\n\t\treturn environment.alternates || [];\r\n\t}\r\n\r\n\tstatic getDefaultLanguage() {\r\n\t\treturn environment.defaultLanguage || (this.languages ? this.languages[0].lang : null);\r\n\t}\r\n\r\n\tstatic setLanguage(language) {\r\n\t\tthis.selectedLanguage = language.lang;\r\n\t}\r\n\r\n\tstatic setLanguage$(language) {\r\n\t\treturn from(fetch(language.href).then(response => {\r\n\t\t\treturn response.text();\r\n\t\t})).pipe(\r\n\t\t\ttap(html => {\r\n\t\t\t\t// console.log('html', html);\r\n\t\t\t\tconst labelsMatch = /(window\\.labels\\s*=\\s*\\n*\\s*\\{((\\{.+?\\})|.)+?\\})/gms.exec(html);\r\n\t\t\t\tif (labelsMatch) {\r\n\t\t\t\t\t// console.log('labels', labelsMatch[0]);\r\n\t\t\t\t\tnew Function(labelsMatch[0]).call(window);\r\n\t\t\t\t\tLabelPipe.setLabels();\r\n\t\t\t\t}\r\n\t\t\t\tconst bhereMatch = /(window\\.bhere\\s*=\\s*\\n*\\s*\\{((\\{.+?\\})|.)+?\\})/gms.exec(html);\r\n\t\t\t\tif (bhereMatch) {\r\n\t\t\t\t\t// console.log('bhere', bhereMatch[0]);\r\n\t\t\t\t\tconst data = {};\r\n\t\t\t\t\tnew Function(bhereMatch[0].replace('window', 'this')).call(data);\r\n\t\t\t\t\tif (data.bhere) {\r\n\t\t\t\t\t\tUtils.merge(environment, data.bhere);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tLocationService.replace(this.activeLanguage.href, language.href);\r\n\t\t\t\t// console.log(window.labels);\r\n\t\t\t\tthis.selectedLanguage = language.lang;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic toggleLanguages() {\r\n\t\tthis.showLanguages = !this.showLanguages;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n}\r\n","import { environment } from '../../environment';\r\nimport { HttpService } from '../http/http.service';\r\nimport { LanguageService } from '../language/language.service';\r\n\r\nexport class ApiService extends HttpService {\r\n\r\n\tstatic currentLanguage = LanguageService.activeLanguage;\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\treturn super.get$(`${environment.api}${url}`, data, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn super.delete$(`${environment.api}${url}`);\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn super.post$(`${environment.api}${url}`, data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn super.put$(`${environment.api}${url}`, data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn super.patch$(`${environment.api}${url}`, data);\r\n\t}\r\n}\r\n","import { ApiService } from '../../core/api/api.service';\r\n\r\nexport class AteliersAndStoresService {\r\n\r\n\tstatic all$() {\r\n\t\treturn ApiService.get$('/ateliers-and-stores/all.json');\r\n\t}\r\n\r\n\tstatic ateliers$() {\r\n\t\treturn ApiService.get$('/ateliers-and-stores/ateliers.json');\r\n\t}\r\n\r\n\tstatic stores$() {\r\n\t\treturn ApiService.get$('/ateliers-and-stores/stores.json');\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\treturn ApiService.get$('/ateliers-and-stores/filters.json');\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\nimport { combineLatest } from 'rxjs';\nimport { first, takeUntil } from 'rxjs/operators';\nimport { FilterMode } from '../../core/filter/filter-item';\nimport { FilterService } from '../../core/filter/filter.service';\nimport { LocomotiveScrollService } from '../../core/locomotive-scroll/locomotive-scroll.service';\nimport { AteliersAndStoresService } from './ateliers-and-stores.service';\n\nexport class AteliersAndStoresComponent extends Component {\n\n\tonInit() {\n\t\tthis.types = {\n\t\t\tAtelier: 1,\n\t\t\tStore: 2,\n\t\t};\n\t\tthis.items = [];\n\t\tthis.filteredItems = [];\n\t\tthis.filteredAteliers = [];\n\t\tthis.filteredStores = [];\n\t\tthis.filters = {};\n\t\tconst form = this.form = new FormGroup({\n\t\t\tcountry: new FormControl(null, [Validators.RequiredValidator()]),\n\t\t\tsearch: new FormControl(null, [Validators.RequiredValidator()]),\n\t\t});\n\t\tconst controls = this.controls = form.controls;\n\t\tform.changes$.pipe(\n\t\t\ttakeUntil(this.unsubscribe$)\n\t\t).subscribe((_) => {\n\t\t\t// console.log('AteliersAndStoresComponent.changes$', form.value);\n\t\t\tthis.setFilterByKeyAndValue('country', form.value.country);\n\t\t\tthis.setFilterByKeyAndValue('search', form.value.search);\n\t\t\tthis.pushChanges();\n\t\t});\n\t\tthis.load$().pipe(\n\t\t\tfirst(),\n\t\t).subscribe(data => {\n\t\t\tthis.items = data[0];\n\t\t\tthis.filters = data[1];\n\t\t\tconst options = this.filters.country.options.slice().map(x => ({ id: x.value, name: x.label }));\n\t\t\toptions.unshift({ id: null, name: 'select' }); // , // LabelPipe.transform('select')\n\t\t\tcontrols.country.options = options;\n\t\t\tthis.onLoad();\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\tload$() {\n\t\treturn combineLatest([\n\t\t\tAteliersAndStoresService.all$(),\n\t\t\tAteliersAndStoresService.filters$(),\n\t\t]);\n\t}\n\n\tonLoad() {\n\t\tconst items = this.items;\n\t\tconst filters = this.filters;\n\t\tObject.keys(filters).forEach(key => {\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\n\t\t});\n\t\tconst initialParams = {};\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\n\t\t\tswitch (key) {\n\t\t\t\tdefault:\n\t\t\t\t\tfilter.filter = (item, value) => {\n\t\t\t\t\t\tswitch (key) {\n\t\t\t\t\t\t\tcase 'country':\n\t\t\t\t\t\t\t\treturn item.country.id === value;\n\t\t\t\t\t\t\tcase 'search':\n\t\t\t\t\t\t\t\treturn item.title.toLowerCase().indexOf(value.toLowerCase()) !== -1 || item.country.name.toLowerCase().indexOf(value.toLowerCase()) !== -1\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t}\n\t\t});\n\t\tthis.filterService = filterService;\n\t\tthis.filters = filterService.filters;\n\t\tconst country = this.filters.country.values.length ? this.filters.country.values[0] : null;\n\t\tconst search = this.filters.search.values.length ? this.filters.search.values[0] : null;\n\t\tthis.form.patch({ country, search });\n\t\tfilterService.items$(items).pipe(\n\t\t\ttakeUntil(this.unsubscribe$),\n\t\t).subscribe(filteredItems => {\n\t\t\tthis.filteredItems = filteredItems;\n\t\t\tthis.filteredAteliers = filteredItems.filter(x => x.type === this.types.Atelier);\n\t\t\tthis.filteredStores = filteredItems.filter(x => x.type === this.types.Store);\n\t\t\tthis.pushChanges();\n\t\t\tLocomotiveScrollService.update();\n\t\t\t// console.log('AteliersAndStoresComponent.filteredItems', filteredItems.length);\n\t\t});\n\t}\n\n\tsetFilterByKeyAndValue(key, value) {\n\t\tconst filter = this.filters[key];\n\t\tif (filter) {\n\t\t\tif (filter.mode === FilterMode.QUERY) {\n\t\t\t\tfilter.set(value);\n\t\t\t} else {\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\n\t\t\t\t// console.log(filter.options, option);\n\t\t\t\tif (option) {\n\t\t\t\t\tfilter.set(option);\n\t\t\t\t} else {\n\t\t\t\t\tfilter.clear();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonSearch(model) {\n\t\t// console.log('AteliersAndStoresComponent.onSearch', this.form.value);\n\t\tthis.setFilterByKeyAndValue('country', this.form.value.country);\n\t\tthis.setFilterByKeyAndValue('search', this.form.value.search);\n\t\tthis.pushChanges();\n\t}\n\n\tclearFilter(event, filter) {\n\t\tevent.preventDefault();\n\t\tevent.stopImmediatePropagation();\n\t\tfilter.clear();\n\t\tthis.pushChanges();\n\t}\n}\n\nAteliersAndStoresComponent.meta = {\n\tselector: '[ateliers-and-stores]',\n};\n","import { ApiService } from '../../core/api/api.service';\r\n\r\nexport class DesignersService {\r\n\r\n\tstatic all$() {\r\n\t\treturn ApiService.get$('/designers/all.json');\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\treturn ApiService.get$('/designers/filters.json');\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\nimport { combineLatest } from 'rxjs';\nimport { first, takeUntil } from 'rxjs/operators';\nimport { FilterMode } from '../../core/filter/filter-item';\nimport { FilterService } from '../../core/filter/filter.service';\nimport { LocomotiveScrollService } from '../../core/locomotive-scroll/locomotive-scroll.service';\nimport { DesignersService } from './designers.service';\n\nexport class DesignersComponent extends Component {\n\n\tonInit() {\n\t\tthis.items = [];\n\t\tthis.filteredItems = [];\n\t\tthis.filters = {};\n\t\tconst form = this.form = new FormGroup({\n\t\t\tcategory: new FormControl(null, [Validators.RequiredValidator()]),\n\t\t\tsearch: new FormControl(null, [Validators.RequiredValidator()]),\n\t\t});\n\t\tconst controls = this.controls = form.controls;\n\t\tform.changes$.pipe(\n\t\t\ttakeUntil(this.unsubscribe$)\n\t\t).subscribe((_) => {\n\t\t\t// console.log('DesignersComponent.changes$', form.value);\n\t\t\tthis.setFilterByKeyAndValue('category', form.value.category);\n\t\t\tthis.setFilterByKeyAndValue('search', form.value.search);\n\t\t\tthis.pushChanges();\n\t\t});\n\t\tthis.load$().pipe(\n\t\t\tfirst(),\n\t\t).subscribe(data => {\n\t\t\tthis.items = data[0];\n\t\t\tthis.filters = data[1];\n\t\t\tconst options = this.filters.category.options.slice().map(x => ({ id: x.value, name: x.label }));\n\t\t\toptions.unshift({ id: null, name: 'select' }); // , // LabelPipe.transform('select')\n\t\t\tcontrols.category.options = options;\n\t\t\tthis.onLoad();\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\tload$() {\n\t\treturn combineLatest([\n\t\t\tDesignersService.all$(),\n\t\t\tDesignersService.filters$(),\n\t\t]);\n\t}\n\n\tonLoad() {\n\t\tconst items = this.items;\n\t\tconst filters = this.filters;\n\t\tObject.keys(filters).forEach(key => {\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\n\t\t});\n\t\tconst initialParams = {};\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\n\t\t\tswitch (key) {\n\t\t\t\tdefault:\n\t\t\t\t\tfilter.filter = (item, value) => {\n\t\t\t\t\t\tswitch (key) {\n\t\t\t\t\t\t\tcase 'category':\n\t\t\t\t\t\t\t\treturn item.category.id === value;\n\t\t\t\t\t\t\tcase 'search':\n\t\t\t\t\t\t\t\treturn item.name.toLowerCase().indexOf(value.toLowerCase()) !== -1\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t}\n\t\t});\n\t\tthis.filterService = filterService;\n\t\tthis.filters = filterService.filters;\n\t\tconst category = this.filters.category.values.length ? this.filters.category.values[0] : null;\n\t\tconst search = this.filters.search.values.length ? this.filters.search.values[0] : null;\n\t\tthis.form.patch({ category, search });\n\t\tfilterService.items$(items).pipe(\n\t\t\ttakeUntil(this.unsubscribe$),\n\t\t).subscribe(filteredItems => {\n\t\t\tthis.filteredItems = filteredItems;\n\t\t\tthis.pushChanges();\n\t\t\tLocomotiveScrollService.update();\n\t\t\t// console.log('DesignersComponent.filteredItems', filteredItems.length);\n\t\t});\n\t}\n\n\tsetFilterByKeyAndValue(key, value) {\n\t\tconst filter = this.filters[key];\n\t\tif (filter) {\n\t\t\tif (filter.mode === FilterMode.QUERY) {\n\t\t\t\tfilter.set(value);\n\t\t\t} else {\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\n\t\t\t\t// console.log(filter.options, option);\n\t\t\t\tif (option) {\n\t\t\t\t\tfilter.set(option);\n\t\t\t\t} else {\n\t\t\t\t\tfilter.clear();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonSearch(model) {\n\t\t// console.log('DesignersComponent.onSearch', this.form.value);\n\t\tthis.setFilterByKeyAndValue('category', this.form.value.category);\n\t\tthis.setFilterByKeyAndValue('search', this.form.value.search);\n\t\tthis.pushChanges();\n\t}\n\n\tclearFilter(event, filter) {\n\t\tevent.preventDefault();\n\t\tevent.stopImmediatePropagation();\n\t\tfilter.clear();\n\t\tthis.pushChanges();\n\t}\n}\n\nDesignersComponent.meta = {\n\tselector: '[designers]',\n};\n","import { Component, getContext } from 'rxcomp';\nimport { takeUntil } from 'rxjs/operators';\nimport { LocomotiveScrollService } from '../../core/locomotive-scroll/locomotive-scroll.service';\n\nexport class HeaderComponent extends Component {\n\n\tdirection_ = null;\n\tget direction() {\n\t\treturn this.direction_;\n\t}\n\tset direction(direction) {\n\t\tif (this.direction_ !== direction) {\n\t\t\tconst { node } = getContext(this);\n\t\t\tnode.classList.remove(`scrolling-${this.direction_}`);\n\t\t\tnode.classList.add(`scrolling-${direction}`);\n\t\t\tthis.direction_ = direction;\n\t\t}\n\t}\n\n\tscrolled_ = null;\n\tget scrolled() {\n\t\treturn this.scrolled_;\n\t}\n\tset scrolled(scrolled) {\n\t\tif (this.scrolled_ !== scrolled) {\n\t\t\tthis.scrolled_ = scrolled;\n\t\t\tconst { node } = getContext(this);\n\t\t\tscrolled ? node.classList.add(`scrolled`) : node.classList.remove(`scrolled`);\n\t\t}\n\t}\n\n\tonInit() {\n\t\tconst pictogram = document.querySelector('.page > .pictogram');\n\t\tLocomotiveScrollService.scroll$.pipe(\n\t\t\ttakeUntil(this.unsubscribe$),\n\t\t).subscribe((event) => {\n\t\t\tthis.direction = event.direction;\n\t\t\tthis.scrolled = event.scroll.y > 100;\n\t\t\tconst opacity = 0.3 - 0.3 * Math.min(1, event.scroll.y / window.innerHeight / 4);\n\t\t\tgsap.set(pictogram, { opacity });\n\t\t\t// console.log('HeaderComponent', event.scroll.y, event.direction, event.speed);\n\t\t});\n\t}\n}\n\nHeaderComponent.meta = {\n\tselector: '[header]',\n};\n","/**\n * Copyright 2019 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface OverlayViewSafe extends google.maps.OverlayView {}\n\n/**\n * Extends an object's prototype by another's.\n *\n * @param type1 The Type to be extended.\n * @param type2 The Type to extend with.\n * @ignore\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction extend(type1: any, type2: any): void {\n  // eslint-disable-next-line prefer-const\n  for (let property in type2.prototype) {\n    type1.prototype[property] = type2.prototype[property];\n  }\n}\n\n/**\n * @ignore\n */\nexport class OverlayViewSafe {\n  constructor() {\n    // MarkerClusterer implements google.maps.OverlayView interface. We use the\n    // extend function to extend MarkerClusterer with google.maps.OverlayView\n    // because it might not always be available when the code is defined so we\n    // look for it at the last possible moment. If it doesn't exist now then\n    // there is no point going ahead :)\n    extend(OverlayViewSafe, google.maps.OverlayView);\n  }\n}\n","/**\n * Copyright 2019 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * This class represents the object for values in the `styles` array passed\n * to the {@link MarkerClusterer} constructor. The element in this array that is used to\n * style the cluster icon is determined by calling the `calculator` function.\n */\nimport { Cluster } from \"./cluster\";\nimport { OverlayViewSafe } from \"./overlay-view-safe\";\n\n/**\n *\n * @hidden\n */\nfunction toCssText(styles: { [key: string]: string }): string {\n  return Object.keys(styles)\n    .reduce((acc, key) => {\n      if (styles[key]) {\n        acc.push(key + \":\" + styles[key]);\n      }\n      return acc;\n    }, [])\n    .join(\";\");\n}\n\n/**\n *\n * @hidden\n */\nfunction coercePixels(pixels: number): string {\n  return pixels ? pixels + \"px\" : undefined;\n}\n\nexport interface ClusterIconStyle {\n  /** The URL of the cluster icon image file. If not set, img element will not be created */\n  url?: string;\n  /** The name of the CSS class defining styles for the cluster markers. */\n  className?: string;\n  /** Height The display height (in pixels) of the cluster icon. Required. */\n  height: number;\n  /** Width The display width (in pixels) of the cluster icon. Required. */\n  width: number;\n  /**\n   * The position (in pixels) from the center of the cluster icon to\n   * where the text label is to be centered and drawn. The format is `[yoffset, xoffset]`\n   * where `yoffset` increases as you go down from center and `xoffset`\n   * increases to the right of center. The default is `[0, 0]`.\n   */\n  anchorText?: [number, number];\n  /**\n   * The anchor position (in pixels) of the cluster icon. This is the\n   * spot on the cluster icon that is to be aligned with the cluster position. The format is\n   * `[yoffset, xoffset]` where `yoffset` increases as you go down and\n   * `xoffset` increases to the right of the top-left corner of the icon. The default\n   * anchor position is the center of the cluster icon.\n   */\n  anchorIcon?: [number, number];\n  /**\n   * The color of the label text shown on the cluster icon.\n   * @default `\"black\"`\n   */\n  textColor?: string;\n  /** The size (in pixels) of the label text shown on the cluster icon.\n   * @default `11`\n   */\n  textSize?: number;\n\n  /** The line height (in pixels) of the label text shown on the cluster icon.\n   * @default the same as cluster icon height\n   */\n  textLineHeight?: number;\n  /**\n   * The value of the CSS `text-decoration`\n   * property for the label text shown on the cluster icon.\n   *\n   * @default `\"none\"`\n   */\n  textDecoration?: string;\n  /**\n   * The value of the CSS `font-weight`\n   * property for the label text shown on the cluster icon.\n   *\n   *  @default `\"bold\"`\n   */\n  fontWeight?: string;\n  /**\n   *  The value of the CSS `font-style`\n   *  property for the label text shown on the cluster icon.\n   *\n   *  @default `\"normal\"`\n   */\n  fontStyle?: string;\n  /**\n   *  The value of the CSS `font-family`\n   *  property for the label text shown on the cluster icon.\n   *  @default `\"Arial,sans-serif\"`\n   */\n  fontFamily?: string;\n  /**\n   * The position of the cluster icon image\n   * within the image defined by `url`. The format is `\"xpos ypos\"`\n   * (the same format as for the CSS `background-position` property). You must set\n   * this property appropriately when the image defined by `url` represents a sprite\n   * containing multiple images. Note that the position <i>must</i> be specified in px units.\n   *\n   * @default `\"0 0\"`\n   */\n  backgroundPosition?: string;\n}\n\n/**\n * @description This is an object containing general information about a cluster icon. This is\n *  the object that a `calculator` function returns.\n */\nexport interface ClusterIconInfo {\n  /**\n   * The text of the label to be shown on the cluster icon.\n   */\n  text: string;\n  /**\n   * The index plus 1 of the element in the `styles`\n   */\n  index: number;\n  /**\n   * The tooltip to display when the mouse moves over the cluster icon.\n   * If this value is `undefined` or `\"\"`, `title` is set to the\n   * value of the `title` property passed to the MarkerClusterer.\n   */\n  title: string;\n  /**\n   * An override for dynamic cluster icon url (if not provided, the component will use the default style icon)\n   */\n  url?: string;\n}\n\n/**\n * A cluster icon.\n */\nexport class ClusterIcon extends OverlayViewSafe {\n  private className_: string;\n  private center_: google.maps.LatLng = null;\n  private div_: HTMLDivElement = null;\n  private sums_: ClusterIconInfo = null;\n  private visible_ = false;\n\n  private style: ClusterIconStyle = null;\n\n  private anchorText_: [number, number];\n  private anchorIcon_: [number, number];\n\n  private boundsChangedListener_: google.maps.MapsEventListener;\n\n  /**\n   * @param cluster_ The cluster with which the icon is to be associated.\n   * @param styles_ An array of {@link ClusterIconStyle} defining the cluster icons\n   *  to use for various cluster sizes.\n   */\n  constructor(private cluster_: Cluster, private styles_: ClusterIconStyle[]) {\n    super();\n\n    this.setMap(cluster_.getMap()); // Note: this causes onAdd to be called\n  }\n\n  /**\n   * Adds the icon to the DOM.\n   */\n  onAdd(): void {\n    let cMouseDownInCluster: boolean;\n    let cDraggingMapByCluster: boolean;\n\n    const mc = this.cluster_.getMarkerClusterer();\n\n    const [major, minor] = google.maps.version.split(\".\");\n\n    const gmVersion = parseInt(major, 10) * 100 + parseInt(minor, 10);\n\n    this.div_ = document.createElement(\"div\");\n    if (this.visible_) {\n      this.show();\n    }\n\n    this.getPanes().overlayMouseTarget.appendChild(this.div_);\n\n    // Fix for Issue 157\n    this.boundsChangedListener_ = google.maps.event.addListener(\n      this.getMap(),\n      \"bounds_changed\",\n      () => {\n        cDraggingMapByCluster = cMouseDownInCluster;\n      }\n    );\n\n    google.maps.event.addDomListener(this.div_, \"mousedown\", () => {\n      cMouseDownInCluster = true;\n      cDraggingMapByCluster = false;\n    });\n\n    // March 1, 2018: Fix for this 3.32 exp bug, https://issuetracker.google.com/issues/73571522\n    // But it doesn't work with earlier releases so do a version check.\n    if (gmVersion >= 332) {\n      // Ugly version-dependent code\n      google.maps.event.addDomListener(this.div_, \"touchstart\", (e: Event) => {\n        e.stopPropagation();\n      });\n    }\n\n    google.maps.event.addDomListener(this.div_, \"click\", (e: Event) => {\n      cMouseDownInCluster = false;\n      if (!cDraggingMapByCluster) {\n        /**\n         * This event is fired when a cluster marker is clicked.\n         * @name MarkerClusterer#click\n         * @param {Cluster} c The cluster that was clicked.\n         * @event\n         */\n        google.maps.event.trigger(mc, \"click\", this.cluster_);\n        google.maps.event.trigger(mc, \"clusterclick\", this.cluster_); // deprecated name\n\n        // The default click handler follows. Disable it by setting\n        // the zoomOnClick property to false.\n        if (mc.getZoomOnClick()) {\n          // Zoom into the cluster.\n          const mz = mc.getMaxZoom();\n          const theBounds = this.cluster_.getBounds();\n          (mc.getMap() as google.maps.Map).fitBounds(theBounds);\n          // There is a fix for Issue 170 here:\n          setTimeout(() => {\n            (mc.getMap() as google.maps.Map).fitBounds(theBounds);\n            // Don't zoom beyond the max zoom level\n            if (mz !== null && mc.getMap().getZoom() > mz) {\n              mc.getMap().setZoom(mz + 1);\n            }\n          }, 100);\n        }\n\n        // Prevent event propagation to the map:\n        e.cancelBubble = true;\n        if (e.stopPropagation) {\n          e.stopPropagation();\n        }\n      }\n    });\n\n    google.maps.event.addDomListener(this.div_, \"mouseover\", () => {\n      /**\n       * This event is fired when the mouse moves over a cluster marker.\n       * @name MarkerClusterer#mouseover\n       * @param {Cluster} c The cluster that the mouse moved over.\n       * @event\n       */\n      google.maps.event.trigger(mc, \"mouseover\", this.cluster_);\n    });\n\n    google.maps.event.addDomListener(this.div_, \"mouseout\", () => {\n      /**\n       * This event is fired when the mouse moves out of a cluster marker.\n       * @name MarkerClusterer#mouseout\n       * @param {Cluster} c The cluster that the mouse moved out of.\n       * @event\n       */\n      google.maps.event.trigger(mc, \"mouseout\", this.cluster_);\n    });\n  }\n\n  /**\n   * Removes the icon from the DOM.\n   */\n  onRemove(): void {\n    if (this.div_ && this.div_.parentNode) {\n      this.hide();\n      google.maps.event.removeListener(this.boundsChangedListener_);\n      google.maps.event.clearInstanceListeners(this.div_);\n      this.div_.parentNode.removeChild(this.div_);\n      this.div_ = null;\n    }\n  }\n\n  /**\n   * Draws the icon.\n   */\n  draw(): void {\n    if (this.visible_) {\n      const pos = this.getPosFromLatLng_(this.center_);\n      this.div_.style.top = pos.y + \"px\";\n      this.div_.style.left = pos.x + \"px\";\n    }\n  }\n\n  /**\n   * Hides the icon.\n   */\n  hide(): void {\n    if (this.div_) {\n      this.div_.style.display = \"none\";\n    }\n    this.visible_ = false;\n  }\n\n  /**\n   * Positions and shows the icon.\n   */\n  show(): void {\n    if (this.div_) {\n      this.div_.className = this.className_;\n      this.div_.style.cssText = this.createCss_(\n        this.getPosFromLatLng_(this.center_)\n      );\n\n      this.div_.innerHTML =\n        (this.style.url ? this.getImageElementHtml() : \"\") +\n        this.getLabelDivHtml();\n\n      if (typeof this.sums_.title === \"undefined\" || this.sums_.title === \"\") {\n        this.div_.title = this.cluster_.getMarkerClusterer().getTitle();\n      } else {\n        this.div_.title = this.sums_.title;\n      }\n      this.div_.style.display = \"\";\n    }\n    this.visible_ = true;\n  }\n\n  private getLabelDivHtml(): string {\n    const mc = this.cluster_.getMarkerClusterer();\n    const ariaLabel = mc.ariaLabelFn(this.sums_.text);\n\n    const divStyle: { [key: string]: string } = {\n      position: \"absolute\",\n      top: coercePixels(this.anchorText_[0]),\n      left: coercePixels(this.anchorText_[1]),\n      color: this.style.textColor,\n      \"font-size\": coercePixels(this.style.textSize),\n      \"font-family\": this.style.fontFamily,\n      \"font-weight\": this.style.fontWeight,\n      \"font-style\": this.style.fontStyle,\n      \"text-decoration\": this.style.textDecoration,\n      \"text-align\": \"center\",\n      width: coercePixels(this.style.width),\n      \"line-height\": coercePixels(this.style.textLineHeight),\n    };\n\n    return `\n<div aria-label=\"${ariaLabel}\" style=\"${toCssText(divStyle)}\" tabindex=\"0\">\n  <span aria-hidden=\"true\">${this.sums_.text}</span>\n</div>\n`;\n  }\n\n  private getImageElementHtml(): string {\n    // NOTE: values must be specified in px units\n    const bp = (this.style.backgroundPosition || \"0 0\").split(\" \");\n    const spriteH = parseInt(bp[0].replace(/^\\s+|\\s+$/g, \"\"), 10);\n    const spriteV = parseInt(bp[1].replace(/^\\s+|\\s+$/g, \"\"), 10);\n\n    let dimensions: { [key: string]: string } = {};\n\n    if (this.cluster_.getMarkerClusterer().getEnableRetinaIcons()) {\n      dimensions = {\n        width: coercePixels(this.style.width),\n        height: coercePixels(this.style.height),\n      };\n    } else {\n      const [Y1, X1, Y2, X2] = [\n        -1 * spriteV,\n        -1 * spriteH + this.style.width,\n        -1 * spriteV + this.style.height,\n        -1 * spriteH,\n      ];\n      dimensions = {\n        clip: `rect(${Y1}px, ${X1}px, ${Y2}px, ${X2}px)`,\n      };\n    }\n\n    const overrideDimensionsDynamicIcon = this.sums_.url\n      ? { width: \"100%\", height: \"100%\" }\n      : {};\n\n    const cssText = toCssText({\n      position: \"absolute\",\n      top: coercePixels(spriteV),\n      left: coercePixels(spriteH),\n      ...dimensions,\n      ...overrideDimensionsDynamicIcon,\n    });\n\n    return `<img alt=\"${this.sums_.text}\" aria-hidden=\"true\" src=\"${this.style.url}\" style=\"${cssText}\"/>`;\n  }\n\n  /**\n   * Sets the icon styles to the appropriate element in the styles array.\n   *\n   * @ignore\n   * @param sums The icon label text and styles index.\n   */\n  useStyle(sums: ClusterIconInfo): void {\n    this.sums_ = sums;\n    let index = Math.max(0, sums.index - 1);\n    index = Math.min(this.styles_.length - 1, index);\n    this.style = this.sums_.url\n      ? { ...this.styles_[index], url: this.sums_.url }\n      : this.styles_[index];\n\n    this.anchorText_ = this.style.anchorText || [0, 0];\n    this.anchorIcon_ = this.style.anchorIcon || [\n      Math.floor(this.style.height / 2),\n      Math.floor(this.style.width / 2),\n    ];\n\n    this.className_ =\n      this.cluster_.getMarkerClusterer().getClusterClass() +\n      \" \" +\n      (this.style.className || \"cluster-\" + index);\n  }\n\n  /**\n   * Sets the position at which to center the icon.\n   *\n   * @param center The latlng to set as the center.\n   */\n  setCenter(center: google.maps.LatLng): void {\n    this.center_ = center;\n  }\n\n  /**\n   * Creates the `cssText` style parameter based on the position of the icon.\n   *\n   * @param pos The position of the icon.\n   * @return The CSS style text.\n   */\n  private createCss_(pos: google.maps.Point): string {\n    return toCssText({\n      \"z-index\": `${this.cluster_.getMarkerClusterer().getZIndex()}`,\n      top: coercePixels(pos.y),\n      left: coercePixels(pos.x),\n      width: coercePixels(this.style.width),\n      height: coercePixels(this.style.height),\n      cursor: \"pointer\",\n      position: \"absolute\",\n      \"-webkit-user-select\": \"none\",\n      \"-khtml-user-select\": \"none\",\n      \"-moz-user-select\": \"none\",\n      \"-o-user-select\": \"none\",\n      \"user-select\": \"none\",\n    });\n  }\n\n  /**\n   * Returns the position at which to place the DIV depending on the latlng.\n   *\n   * @param latlng The position in latlng.\n   * @return The position in pixels.\n   */\n  private getPosFromLatLng_(latlng: google.maps.LatLng): google.maps.Point {\n    const pos = this.getProjection().fromLatLngToDivPixel(latlng);\n    pos.x = Math.floor(pos.x - this.anchorIcon_[1]);\n    pos.y = Math.floor(pos.y - this.anchorIcon_[0]);\n    return pos;\n  }\n}\n","import MarkerClusterer from '@googlemaps/markerclustererplus';\r\nimport { Component, getContext } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\nimport { MAP_STYLE } from './map.style';\r\n\r\nconst USE_CLUSTERER = true;\r\n\r\nlet GOOGLE_MAPS;\r\n\r\nexport class MapComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst apiKey = environment.googleMaps.apiKey;\r\n\t\tif (GOOGLE_MAPS != null) {\r\n\t\t\tthis.initMap();\r\n\t\t} else {\r\n\t\t\twindow.onGoogleMapsLoaded = () => {\r\n\t\t\t\tGOOGLE_MAPS = window.google.maps;\r\n\t\t\t\tthis.initMap();\r\n\t\t\t};\r\n\t\t\tconst script = document.createElement('script');\r\n\t\t\tscript.setAttribute('type', 'text/javascript');\r\n\t\t\tscript.setAttribute('src', `https://maps.googleapis.com/maps/api/js?callback=onGoogleMapsLoaded${apiKey ? `&key=${apiKey}` : ''}&libraries=places`);\r\n\t\t\t(document.getElementsByTagName('head')[0] || document.documentElement).appendChild(script);\r\n\t\t}\r\n\t}\r\n\r\n\tinitMap() {\r\n\t\tconst google = window.google;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst center = this.center;\r\n\t\tconst position = new google.maps.LatLng(center.latitude, center.longitude);\r\n\t\tconst mapOptions = {\r\n\t\t\tzoom: 15, // 9,\r\n\t\t\tcenter: position,\r\n\r\n\t\t\tscrollwheel: false,\r\n\t\t\t// mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n\t\t\tzoomControlOptions: {\r\n\t\t\t\tstyle: google.maps.ZoomControlStyle.DEFAULT\r\n\t\t\t},\r\n\t\t\t// overviewMapControl: true,\r\n\r\n\t\t\tscaleControl: false,\r\n\t\t\tzoomControl: true,\r\n\t\t\tmapTypeControl: false,\r\n\t\t\tstreetViewControl: false,\r\n\t\t\trotateControl: true,\r\n\t\t\tfullscreenControl: true,\r\n\r\n\t\t\tstyles: MAP_STYLE\r\n\t\t};\r\n\t\tconst mapElement = node.querySelector('.map');\r\n\t\tconst map = this.map = new google.maps.Map(mapElement, mapOptions);\r\n\r\n\t\t/*\r\n\t\tconst iconOptions = {\r\n\t\t\thome: { latitude: center.latitude, longitude: center.longitude },\r\n\t\t\ttext: '<div class=\"map-popup\"><h2>Websolute</h2><p> Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</p></div>',\r\n\t\t\ticon_url: `${environment.assets}img/maps/marker-sm.png`,\r\n\t\t\tzoom: 15\r\n\t\t}\r\n\r\n\t\tconst markerImage = new google.maps.MarkerImage(\r\n\t\t\t`${environment.assets}img/maps/marker-sm.png`,\r\n\t\t\tnew google.maps.Size(24, 32),\r\n\t\t);\r\n\r\n\t\tconst marker = new google.maps.Marker({\r\n\t\t\tposition: position,\r\n\t\t\tmap: map,\r\n\t\t\ticon: markerImage,\r\n\t\t\tdraggable: false\r\n\t\t});\r\n\r\n\t\tconst info = new google.maps.InfoWindow({\r\n\t\t\tcontent: iconOptions.text\r\n\t\t});\r\n\r\n\t\tgoogle.maps.event.addListener(marker, 'click', function() {\r\n\t\t\tinfo.open(map, marker);\r\n\t\t});\r\n\t\t*/\r\n\r\n\t\tthis.addMarkers(this.items);\r\n\r\n\t\tif (!this.items) {\r\n\t\t\tmap.fitBounds(this.getItalyBounds());\r\n\t\t}\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tthis.clearMarkers();\r\n\t\tthis.addMarkers(this.items);\r\n\t}\r\n\r\n\tcalculateDistance(lat1, lon1, lat2, lon2, unit) {\r\n\t\tif ((lat1 == lat2) && (lon1 == lon2)) {\r\n\t\t\treturn 0;\r\n\t\t} else {\r\n\t\t\tconst radlat1 = Math.PI * lat1 / 180;\r\n\t\t\tconst radlat2 = Math.PI * lat2 / 180;\r\n\t\t\tconst theta = lon1 - lon2;\r\n\t\t\tconst radtheta = Math.PI * theta / 180;\r\n\t\t\tlet dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);\r\n\t\t\tif (dist > 1) {\r\n\t\t\t\tdist = 1;\r\n\t\t\t}\r\n\t\t\tdist = Math.acos(dist);\r\n\t\t\tdist = dist * 180 / Math.PI;\r\n\t\t\tdist = dist * 60 * 1.1515;\r\n\t\t\tif (unit == \"K\") {\r\n\t\t\t\tdist = dist * 1.609344;\r\n\t\t\t}\r\n\t\t\tif (unit == \"N\") {\r\n\t\t\t\tdist = dist * 0.8684;\r\n\t\t\t}\r\n\t\t\treturn dist;\r\n\t\t}\r\n\t}\r\n\r\n\tclearMarkers() {\r\n\t\tif (this.markerCluster) {\r\n\t\t\tthis.markerCluster.clearMarkers();\r\n\t\t}\r\n\t\tif (this.markers) {\r\n\t\t\tthis.markers.forEach(marker => marker.setMap(null));\r\n\t\t}\r\n\t}\r\n\r\n\taddMarkers(items) {\r\n\t\tconst map = this.map;\r\n\t\tif (map && items) {\r\n\t\t\tconst bounds = new google.maps.LatLngBounds();\r\n\r\n\t\t\tconst markers = items.map((item) => {\r\n\r\n\t\t\t\tconst position = new google.maps.LatLng(item.latitude, item.longitude);\r\n\r\n\t\t\t\tbounds.extend(position);\r\n\r\n\t\t\t\tlet content = /* html */`<div class=\"card--store-locator\">\r\n\t\t\t\t\t<div class=\"card__content\">\r\n\t\t\t\t\t\t<div class=\"card__name\"><span>${item.name}</span></div>\r\n\t\t\t\t\t\t<div class=\"card__address\">${item.address}</div>\r\n\t\t\t\t\t\t<div class=\"card__city\">${item.city}</div>\r\n\t\t\t\t\t\t<div class=\"card__country\">${item.country.name}</div>\r\n\t\t\t\t\t\t${item.phone ? `<a class=\"card__phone\" href=\"tel:${item.phone}\">${item.phone}</a>` : ''}\r\n\t\t\t\t\t\t${item.fax ? `<a class=\"card__fax\" href=\"tel:${item.fax}\">${item.fax}</a>` : ''}\r\n\t\t\t\t\t\t${item.email ? `<a class=\"card__email\" href=\"mailto:${item.email}\">${item.email}</a>` : ''}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>`;\r\n\r\n\t\t\t\t/*\r\n\t\t\t\t`<div class=\"marker__content\">\r\n\t\t\t\t\t<div class=\"title\"><span>${item.name}</span></div>\r\n\t\t\t\t\t<div class=\"group group--info\">\r\n\t\t\t\t\t\t<div class=\"address\">\r\n\t\t\t\t\t\t\t${item.address}<br>\r\n\t\t\t\t\t\t\t${item.city} ${item.country}<br>\r\n\t\t\t\t\t\t\t${item.phone ? `<span><a href=\"tel:${item.phone}\">${item.phone}</a><br></span>` : ''}\r\n\t\t\t\t\t\t\t${item.fax ? `<span><a href=\"tel:${item.fax}\">${item.fax}</a><br></span>` : ''}\r\n\t\t\t\t\t\t\t${item.email ? `<span><a href=\"mailto:${item.email}\">${item.email}</a><br></span>` : ''}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t${item.address !== '' ? `<div class=\"distance\">${this.labels.approximately} <b>${Math.floor(item.distance)} km</b></div>` : ``}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"group group--cta\">\r\n\t\t\t\t\t\t${item.address !== '' ? `<a id=\"locator-marker\" href=\"https://www.google.it/maps/dir/${position.lat()},${position.lng()}/${item.title}/@${item.latitude},${item.longitude}/\" target=\"_blank\" class=\"btn btn--link\"><span>${this.labels.reachStore}</span></a>` : ``}\r\n\t\t\t\t\t\t${item.type === 8 || item.type === 9 ? `<a id=\"contact-item\" href=\"${window.itemLocatorSettings.urlStoreContact}?item=${item.id}\" target=\"_blank\" class=\"btn btn--link\"><span>${this.labels.contactStore}</span></a>` : ''}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>`\r\n\t\t\t\t*/\r\n\r\n\t\t\t\tconst markerImage = new google.maps.MarkerImage(\r\n\t\t\t\t\t`${environment.assets}img/maps/marker-sm.png`,\r\n\t\t\t\t\tnew google.maps.Size(24, 32),\r\n\t\t\t\t);\r\n\r\n\t\t\t\tlet marker = new google.maps.Marker({\r\n\t\t\t\t\tposition: position,\r\n\t\t\t\t\tmap: USE_CLUSTERER ? null : map,\r\n\t\t\t\t\ticon: markerImage,\r\n\t\t\t\t\ttitle: item.title,\r\n\t\t\t\t\titem: item,\r\n\t\t\t\t\tcontent: content,\r\n\t\t\t\t});\r\n\t\t\t\tmarker.addListener('click', () => {\r\n\t\t\t\t\tthis.setMarkerWindow(marker.position, content);\r\n\t\t\t\t\t// this.scrollToStore(item);\r\n\t\t\t\t\t// GtmService.push({ event: 'dealerlocator', action: 'marker-click', label: item.title });\r\n\t\t\t\t});\r\n\t\t\t\titem.marker = marker;\r\n\t\t\t\treturn marker;\r\n\t\t\t});\r\n\r\n\t\t\tif (USE_CLUSTERER) {\r\n\t\t\t\tconst markerCluster = new MarkerClusterer(this.map, markers, {\r\n\t\t\t\t\timagePath: `${environment.assets}img/maps/cluster-`,\r\n\t\t\t\t});\r\n\t\t\t\tconst styles = markerCluster.getStyles();\r\n\t\t\t\tconst sizes = [48, 56, 64, 72, 80];\r\n\t\t\t\tstyles.forEach((style, i) => {\r\n\t\t\t\t\tstyle.width = sizes[i];\r\n\t\t\t\t\tstyle.height = sizes[i];\r\n\t\t\t\t\tstyle.textLineHeight = sizes[i];\r\n\t\t\t\t\tstyle.textSize = Math.floor(style.width / 5);\r\n\t\t\t\t\tstyle.textColor = '#ffffff';\r\n\t\t\t\t});\r\n\t\t\t\tmarkerCluster.setStyles(styles);\r\n\t\t\t\tthis.markerCluster = markerCluster;\r\n\t\t\t}\r\n\r\n\t\t\tthis.markers = markers;\r\n\r\n\t\t\tmap.fitBounds(bounds);\r\n\t\t}\r\n\t}\r\n\r\n\tgetGeolocation(map) {\r\n\t\tthis.error = null;\r\n\t\tthis.busyLocation = true;\r\n\t\tlet position = this.map.getCenter();\r\n\r\n\t\t// Try HTML5 geolocation.\r\n\t\tif (navigator.geolocation) {\r\n\t\t\tnavigator.geolocation.getCurrentPosition((location) => {\r\n\t\t\t\tposition = new google.maps.LatLng(location.coords.latitude, location.coords.longitude);\r\n\r\n\t\t\t\tconst geocoder = this.geocoder || new google.maps.Geocoder();\r\n\t\t\t\tthis.geocoder = geocoder;\r\n\t\t\t\tgeocoder.geocode({ 'location': position }, (results, status) => {\r\n\t\t\t\t\tif (status == 'OK') {\r\n\t\t\t\t\t\tvar filteredInfoCity = results.filter(function(address_component) {\r\n\t\t\t\t\t\t\treturn address_component.types.includes(\"locality\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.model.city = filteredInfoCity.length ? filteredInfoCity[0].formatted_address : undefined;\r\n\t\t\t\t\t\tthis.model.address = results[0].formatted_address;\r\n\r\n\t\t\t\t\t\tfor (let i = 0; i < results[0].address_components.length; i++) {\r\n\t\t\t\t\t\t\tif (results[0].address_components[i].types[0] == \"country\" || results[0].address_components[i].types[0] == \"political\") {\r\n\t\t\t\t\t\t\t\tthis.searchCountry = results[0].address_components[i].short_name;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.setInfoWindow(position, 1);\r\n\t\t\t\t\t\tthis.searchPosition(position).finally(() => this.busyLocation = false);\r\n\t\t\t\t\t\tthis.map.setCenter(position);\r\n\t\t\t\t\t\tthis.map.setZoom(ZOOM_LEVEL);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}, () => {\r\n\t\t\t\tthis.setInfoWindow(position, 2);\r\n\t\t\t\tthis.searchPosition(position).finally(() => this.busyLocation = false);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\t// Browser doesn't support Geolocation\r\n\t\t\tthis.setInfoWindow(position, 3);\r\n\t\t\tthis.searchPosition(position).finally(() => this.busyLocation = false);\r\n\t\t}\r\n\t}\r\n\r\n\tfitBounds(items) {\r\n\t\tif (items.length) {\r\n\t\t\tconst bounds = new google.maps.LatLngBounds();\r\n\t\t\titems.forEach((item) => {\r\n\t\t\t\tconst position = new google.maps.LatLng(item.latitude, item.longitude);\r\n\t\t\t\tbounds.extend(position);\r\n\t\t\t});\r\n\t\t\tthis.map.fitBounds(bounds);\r\n\t\t\t// console.log('fitBounds');\r\n\t\t}\r\n\t}\r\n\r\n\tfindNearStores(items, position) {\r\n\t\tif (items) {\r\n\t\t\titems.forEach((item) => {\r\n\t\t\t\titem.distance = this.calculateDistance(item.latitude, item.longitude, position.lat(), position.lng(), 'K');\r\n\t\t\t\titem.visible = (item.cod_stato == window.userCountry || !window.userCountry) && item.distance <= MAX_DISTANCE /* Km */;\r\n\t\t\t\tif (item.visible) {\r\n\t\t\t\t\tif (item.removed) {\r\n\t\t\t\t\t\tthis.markerCluster.addMarker(item.marker);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdelete item.removed;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.markerCluster.removeMarker(item.marker);\r\n\t\t\t\t\titem.removed = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\titems = items.slice();\r\n\t\t\titems.sort((a, b) => {\r\n\t\t\t\treturn a.distance * (a.importante ? 0.5 : 1) - b.distance * (b.importante ? 0.5 : 1);\r\n\t\t\t});\r\n\t\t\tconst visibleStores = items.filter(item => item.visible).slice(0, 50);\r\n\t\t\tthis.$timeout(() => {\r\n\t\t\t\tthis.visibleStores = visibleStores;\r\n\t\t\t}, 1);\r\n\t\t\t// console.log('findNearStores', visibleStores);\r\n\t\t\treturn visibleStores;\r\n\t\t}\r\n\t}\r\n\r\n\tpanTo(item) {\r\n\t\tconst position = new google.maps.LatLng(item.latitude, item.longitude);\r\n\t\tthis.map.setZoom(ZOOM_LEVEL);\r\n\t\tthis.map.panTo(position);\r\n\t\tconst marker = this.markers.find(x => x.item === item);\r\n\t\tthis.setMarkerWindow(marker.position, marker.content);\r\n\t}\r\n\r\n\tsetMarkerWindow(position, content) {\r\n\t\tif (position) {\r\n\t\t\tconst markerWindow = this.markerWindow || new google.maps.InfoWindow({\r\n\t\t\t\tpixelOffset: new google.maps.Size(0, -35)\r\n\t\t\t});\r\n\t\t\tthis.markerWindow = markerWindow;\r\n\t\t\tmarkerWindow.setPosition(position);\r\n\t\t\tmarkerWindow.setContent(content);\r\n\t\t\tmarkerWindow.open(this.map);\r\n\t\t} else {\r\n\t\t\tthis.closeMarkerWindow();\r\n\t\t}\r\n\t}\r\n\r\n\tcloseMarkerWindow() {\r\n\t\tif (this.markerWindow) {\r\n\t\t\tthis.markerWindow.close();\r\n\t\t}\r\n\t}\r\n\r\n\tgetWorldBounds() {\r\n\t\treturn new google.maps.LatLngBounds(\r\n\t\t\tnew google.maps.LatLng(61, 60),\r\n\t\t\tnew google.maps.LatLng(-37, -92)\r\n\t\t);\r\n\t}\r\n\r\n\tgetItalyBounds() {\r\n\t\treturn new google.maps.LatLngBounds(\r\n\t\t\tnew google.maps.LatLng(46.4657567, 5.233972),\r\n\t\t\tnew google.maps.LatLng(36.8257773, 18.963541)\r\n\t\t);\r\n\t}\r\n}\r\n\r\nMapComponent.meta = {\r\n\tselector: '[map]',\r\n\tinputs: ['center', 'items'],\r\n};\r\n","/**\n * Copyright 2019 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { MarkerClusterer, ClusterAugmentedMarker } from \"./markerclusterer\";\nimport { ClusterIcon } from \"./cluster-icon\";\n\n/**\n * Creates a single cluster that manages a group of proximate markers.\n *  Used internally, do not call this constructor directly.\n */\nexport class Cluster {\n  private map_ = this.markerClusterer_.getMap() as google.maps.Map;\n  private minClusterSize_: number = this.markerClusterer_.getMinimumClusterSize();\n  private averageCenter_: boolean = this.markerClusterer_.getAverageCenter();\n  private markers_: ClusterAugmentedMarker[] = []; // TODO: type;\n  private center_: google.maps.LatLng = null;\n  private bounds_: google.maps.LatLngBounds = null;\n  private clusterIcon_ = new ClusterIcon(\n    this,\n    this.markerClusterer_.getStyles()\n  );\n\n  /**\n   *\n   * @param markerClusterer_ The `MarkerClusterer` object with which this\n   *  cluster is associated.\n   */\n  constructor(private markerClusterer_: MarkerClusterer) {}\n\n  /**\n   * Returns the number of markers managed by the cluster. You can call this from\n   * a `click`, `mouseover`, or `mouseout` event handler for the `MarkerClusterer` object.\n   *\n   * @return The number of markers in the cluster.\n   */\n  public getSize(): number {\n    return this.markers_.length;\n  }\n\n  /**\n   * Returns the array of markers managed by the cluster. You can call this from\n   * a `click`, `mouseover`, or `mouseout` event handler for the `MarkerClusterer` object.\n   *\n   * @return The array of markers in the cluster.\n   */\n  public getMarkers(): google.maps.Marker[] {\n    return this.markers_;\n  }\n\n  /**\n   * Returns the center of the cluster. You can call this from\n   * a `click`, `mouseover`, or `mouseout` event handler\n   * for the `MarkerClusterer` object.\n   *\n   * @return The center of the cluster.\n   */\n  public getCenter(): google.maps.LatLng {\n    return this.center_;\n  }\n\n  /**\n   * Returns the map with which the cluster is associated.\n   *\n   * @return The map.\n   * @ignore\n   */\n  public getMap(): google.maps.Map {\n    return this.map_;\n  }\n\n  /**\n   * Returns the `MarkerClusterer` object with which the cluster is associated.\n   *\n   * @return The associated marker clusterer.\n   * @ignore\n   */\n  public getMarkerClusterer(): MarkerClusterer {\n    return this.markerClusterer_;\n  }\n\n  /**\n   * Returns the bounds of the cluster.\n   *\n   * @return the cluster bounds.\n   * @ignore\n   */\n  public getBounds(): google.maps.LatLngBounds {\n    const bounds = new google.maps.LatLngBounds(this.center_, this.center_);\n    const markers = this.getMarkers();\n    for (let i = 0; i < markers.length; i++) {\n      bounds.extend(markers[i].getPosition());\n    }\n    return bounds;\n  }\n\n  /**\n   * Removes the cluster from the map.\n   *\n   * @ignore\n   */\n  public remove(): void {\n    this.clusterIcon_.setMap(null);\n    this.markers_ = [];\n    delete this.markers_;\n  }\n\n  /**\n   * Adds a marker to the cluster.\n   *\n   * @param marker The marker to be added.\n   * @return True if the marker was added.\n   * @ignore\n   */\n  public addMarker(\n    marker: google.maps.Marker & { isAdded?: boolean }\n  ): boolean {\n    if (this.isMarkerAlreadyAdded_(marker)) {\n      return false;\n    }\n\n    if (!this.center_) {\n      this.center_ = marker.getPosition();\n      this.calculateBounds_();\n    } else {\n      if (this.averageCenter_) {\n        const l = this.markers_.length + 1;\n        const lat =\n          (this.center_.lat() * (l - 1) + marker.getPosition().lat()) / l;\n        const lng =\n          (this.center_.lng() * (l - 1) + marker.getPosition().lng()) / l;\n        this.center_ = new google.maps.LatLng(lat, lng);\n        this.calculateBounds_();\n      }\n    }\n\n    marker.isAdded = true;\n    this.markers_.push(marker);\n\n    const mCount = this.markers_.length;\n    const mz = this.markerClusterer_.getMaxZoom();\n    if (mz !== null && this.map_.getZoom() > mz) {\n      // Zoomed in past max zoom, so show the marker.\n      if (marker.getMap() !== this.map_) {\n        marker.setMap(this.map_);\n      }\n    } else if (mCount < this.minClusterSize_) {\n      // Min cluster size not reached so show the marker.\n      if (marker.getMap() !== this.map_) {\n        marker.setMap(this.map_);\n      }\n    } else if (mCount === this.minClusterSize_) {\n      // Hide the markers that were showing.\n      for (let i = 0; i < mCount; i++) {\n        this.markers_[i].setMap(null);\n      }\n    } else {\n      marker.setMap(null);\n    }\n\n    return true;\n  }\n\n  /**\n   * Determines if a marker lies within the cluster's bounds.\n   *\n   * @param marker The marker to check.\n   * @return True if the marker lies in the bounds.\n   * @ignore\n   */\n  public isMarkerInClusterBounds(marker: google.maps.Marker): boolean {\n    return this.bounds_.contains(marker.getPosition());\n  }\n\n  /**\n   * Calculates the extended bounds of the cluster with the grid.\n   */\n  private calculateBounds_(): void {\n    const bounds = new google.maps.LatLngBounds(this.center_, this.center_);\n    this.bounds_ = this.markerClusterer_.getExtendedBounds(bounds);\n  }\n\n  /**\n   * Updates the cluster icon.\n   */\n  public updateIcon(): void {\n    const mCount = this.markers_.length;\n    const mz = this.markerClusterer_.getMaxZoom();\n\n    if (mz !== null && this.map_.getZoom() > mz) {\n      this.clusterIcon_.hide();\n      return;\n    }\n\n    if (mCount < this.minClusterSize_) {\n      // Min cluster size not yet reached.\n      this.clusterIcon_.hide();\n      return;\n    }\n\n    const numStyles = this.markerClusterer_.getStyles().length;\n    const sums = this.markerClusterer_.getCalculator()(\n      this.markers_,\n      numStyles\n    );\n    this.clusterIcon_.setCenter(this.center_);\n    this.clusterIcon_.useStyle(sums);\n    this.clusterIcon_.show();\n  }\n\n  /**\n   * Determines if a marker has already been added to the cluster.\n   *\n   * @param marker The marker to check.\n   * @return True if the marker has already been added.\n   */\n  private isMarkerAlreadyAdded_(marker: google.maps.Marker): boolean {\n    if (this.markers_.indexOf) {\n      return this.markers_.indexOf(marker) !== -1;\n    } else {\n      for (let i = 0; i < this.markers_.length; i++) {\n        if (marker === this.markers_[i]) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n}\n","/**\n * Copyright 2019 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @name MarkerClustererPlus for Google Maps V3\n * @author Gary Little\n * @fileoverview\n * The library creates and manages per-zoom-level clusters for large amounts of markers.\n * <p>\n * This is an enhanced V3 implementation of the V2 MarkerClusterer by Xiaoxi Wu. It is\n * based on the V3 MarkerClusterer port by Luke Mahe. MarkerClustererPlus was created\n * by Gary Little.\n * <p>\n * v2.0 release: MarkerClustererPlus v2.0 is backward compatible with MarkerClusterer v1.0. It\n *  adds support for the `ignoreHidden`, `title`, `batchSizeIE`,\n *  and `calculator` properties as well as support for four more events. It also allows\n *  greater control over the styling of the text that appears on the cluster marker. The\n *  documentation has been significantly improved and the overall code has been simplified and\n *  polished. Very large numbers of markers can now be managed without causing Javascript timeout\n *  errors on Internet Explorer. Note that the name of the `clusterclick` event has been\n *  deprecated. The new name is `click`, so please change your application code now.\n */\n\nimport { ClusterIconInfo, ClusterIconStyle } from \"./cluster-icon\";\n\nimport { Cluster } from \"./cluster\";\nimport { OverlayViewSafe } from \"./overlay-view-safe\";\n\n/**\n * @param text The text attribute of the cluster\n */\ntype AriaLabelFn = (text: string) => string;\n\nexport type Calculator = (\n  markers: google.maps.Marker[],\n  clusterIconStylesCount: number\n) => ClusterIconInfo;\n\nexport interface ClusterAugmentedMarker extends google.maps.Marker {\n  isAdded?: boolean;\n}\n\n/**\n * This event is fired on the {@link MarkerClusterer} instance when the `MarkerClusterer` stops clustering markers.\n *\n * Example:\n * ```typescript\n *  mc.addListener('clusteringend', (mc: MarkerClusterer) => {})\n * ```\n *\n * @param mc The MarkerClusterer whose markers are being clustered.\n * @event clusteringend\n */\nexport declare function clusteringend(mc: MarkerClusterer): void;\n\n/**\n * This event is fired on the {@link MarkerClusterer} instance when the `MarkerClusterer` begins clustering markers.\n *\n * Example:\n * ```typescript\n *  mc.addListener('clusteringbegin', (mc: MarkerClusterer) => {})\n * ```\n *\n * @param mc The MarkerClusterer whose markers are being clustered.\n * @event clusteringbegin\n */\nexport declare function clusteringbegin(mc: MarkerClusterer): void;\n\n/**\n * Optional parameter passed to the {@link MarkerClusterer} constructor.\n */\nexport interface MarkerClustererOptions {\n  /**\n   * The grid size of a cluster in pixels. The grid is a square.\n   *\n   * @default `60`\n   */\n  gridSize?: number;\n  /**\n   * The maximum zoom level at which clustering is enabled or\n   * `null` if clustering is to be enabled at all zoom levels.\n   *\n   * @default `null`\n   */\n  maxZoom?: number;\n\n  /**\n   * Whether to zoom the map when a cluster marker is\n   * clicked. You may want to set this to `false` if you have installed a handler\n   * for the `click` event and it deals with zooming on its own.\n   *\n   * @default `true`\n   */\n  zoomOnClick?: boolean;\n  /***\n   * Whether the position of a cluster marker should be\n   * the average position of all markers in the cluster. If set to `false`, the\n   * cluster marker is positioned at the location of the first marker added to the cluster.\n   *\n   * @default `false`\n   */\n  averageCenter?: boolean;\n  /**\n   * The minimum number of markers needed in a cluster\n   * before the markers are hidden and a cluster marker appears.\n   *\n   * @default `2`\n   */\n  minimumClusterSize?: number;\n\n  /**\n   *  the z-index of a cluster.\n   *\n   *  @default `google.maps.Marker.MAX_ZINDEX + 1`\n   */\n  zIndex?: number;\n\n  /**\n   * Whether to ignore hidden markers in clusters. You\n   * may want to set this to `true` to ensure that hidden markers are not included\n   * in the marker count that appears on a cluster marker (this count is the value of the\n   * `text` property of the result returned by the default  {@link calculator}).\n   * If set to `true` and you change the visibility of a marker being clustered, be\n   * sure to also call {@link MarkerClusterer#repaint()}.\n   *\n   * @default `false`\n   */\n  ignoreHidden?: boolean;\n  /**\n   * The tooltip to display when the mouse moves over a cluster\n   * marker. (Alternatively, you can use a custom `calculator` function to specify a\n   * different tooltip for each cluster marker.)\n   *\n   * @default `\"\"`\n   */\n  title?: string;\n  /**\n   * The function used to determine\n   * the text to be displayed on a cluster marker and the index indicating which style to use\n   * for the cluster marker. The input parameters for the function are (1) the array of markers\n   * represented by a cluster marker and (2) the number of cluster icon styles. It returns a\n   * {@link ClusterIconInfo} object. The default `calculator` returns a\n   * `text` property which is the number of markers in the cluster and an\n   * `index` property which is one higher than the lowest integer such that\n   * `10^i` exceeds the number of markers in the cluster, or the size of the styles\n   * array, whichever is less. The `styles` array element used has an index of\n   * `index` minus 1. For example, the default `calculator` returns a\n   * `text` value of `\"125\"` and an `index` of `3`\n   * for a cluster icon representing 125 markers so the element used in the `styles`\n   * array is `2`. A `calculator` may also return a `title`\n   * property that contains the text of the tooltip to be used for the cluster marker. If\n   * `title` is not defined, the tooltip is set to the value of the `title`\n   * property for the MarkerClusterer.\n   *\n   * @default {@link MarkerClusterer.CALCULATOR}\n   */\n  calculator?: Calculator;\n  /**\n   * The name of the CSS class defining general styles\n   * for the cluster markers. Use this class to define CSS styles that are not set up by the code\n   * that processes the `styles` array.\n   *\n   * @default `\"cluster\"`\n   */\n  clusterClass?: string;\n  /**\n   * An array of {@link ClusterIconStyle} elements defining the styles\n   * of the cluster markers to be used. The element to be used to style a given cluster marker\n   * is determined by the function defined by the `calculator` property.\n   * The default is an array of {@link ClusterIconStyle} elements whose properties are derived\n   * from the values for `imagePath`, `imageExtension`, and `imageSizes`.\n   *\n   * @default `styles`\n   */\n  styles?: ClusterIconStyle[];\n  /**\n   * Whether to allow the use of cluster icons that\n   * have sizes that are some multiple (typically double) of their actual display size. Icons such\n   * as these look better when viewed on high-resolution monitors such as Apple's Retina displays.\n   * Note: if this property is `true`, sprites cannot be used as cluster icons.\n   *\n   * @default `false`\n   */\n  enableRetinaIcons?: boolean;\n  /**\n   * Set this property to the number of markers to be processed in a single batch when using\n   * a browser other than Internet Explorer (for Internet Explorer, use the batchSizeIE property instead).\n   *\n   * @default `MarkerClusterer.BATCH_SIZE`\n   */\n  batchSize?: number;\n  /**\n   * When Internet Explorer is\n   * being used, markers are processed in several batches with a small delay inserted between\n   * each batch in an attempt to avoid Javascript timeout errors. Set this property to the\n   * number of markers to be processed in a single batch; select as high a number as you can\n   * without causing a timeout error in the browser. This number might need to be as low as 100\n   * if 15,000 markers are being managed, for example.\n   *\n   * @default `MarkerClusterer.BATCH_SIZE_IE`\n   */\n  batchSizeIE?: number;\n  /**\n   * The full URL of the root name of the group of image files to use for cluster icons.\n   * The complete file name is of the form `imagePath`n.`imageExtension`\n   * where n is the image file number (1, 2, etc.).\n   *\n   * @default `MarkerClusterer.IMAGE_PATH`\n   */\n  imagePath?: string;\n  /**\n   * The extension name for the cluster icon image files (e.g., `\"png\"` or\n   * `\"jpg\"`).\n   *\n   * @default `MarkerClusterer.IMAGE_EXTENSION`\n   */\n  imageExtension?: string;\n  /**\n   * An array of numbers containing the widths of the group of\n   * `imagePath`n.`imageExtension` image files.\n   * (The images are assumed to be square.)\n   *\n   * @default `MarkerClusterer.IMAGE_SIZES`\n   */\n  imageSizes?: number[];\n  /**\n   * A function to take the text attribute associated with the cluster and output a string to attach an\n   * ariaLabel to the cluster\n   */\n  ariaLabelFn?: AriaLabelFn;\n}\n\n/**\n * @ignore\n */\nconst getOption = <T, K extends keyof T>(\n  options: T,\n  prop: K,\n  def: T[K]\n): T[K] => {\n  if (options[prop] !== undefined) {\n    return options[prop];\n  } else {\n    return def;\n  }\n};\n\nexport class MarkerClusterer extends OverlayViewSafe {\n  /**\n   * The number of markers to process in one batch.\n   */\n  static BATCH_SIZE = 2000;\n\n  /**\n   * The number of markers to process in one batch (IE only).\n   */\n  static BATCH_SIZE_IE = 500;\n\n  /**\n   * The default root name for the marker cluster images.\n   */\n  static IMAGE_PATH = \"../images/m\";\n\n  /**\n   * The default extension name for the marker cluster images.\n   */\n  static IMAGE_EXTENSION = \"png\";\n\n  /**\n   * The default array of sizes for the marker cluster images.\n   */\n  static IMAGE_SIZES: number[] = [53, 56, 66, 78, 90];\n\n  private markers_: ClusterAugmentedMarker[] = [];\n  private clusters_: Cluster[] = [];\n  private listeners_: google.maps.MapsEventListener[] = [];\n\n  private activeMap_: google.maps.Map = null;\n  private ready_ = false;\n\n  public ariaLabelFn = this.options.ariaLabelFn || ((): string => \"\");\n\n  private zIndex_ =\n    this.options.zIndex || Number(google.maps.Marker.MAX_ZINDEX) + 1;\n  private gridSize_ = this.options.gridSize || 60;\n  private minClusterSize_ = this.options.minimumClusterSize || 2;\n  private maxZoom_ = this.options.maxZoom || null;\n  private styles_: ClusterIconStyle[] = this.options.styles || [];\n  private title_ = this.options.title || \"\";\n\n  private zoomOnClick_ = getOption(this.options, \"zoomOnClick\", true);\n  private averageCenter_ = getOption(this.options, \"averageCenter\", false);\n\n  private ignoreHidden_ = getOption(this.options, \"ignoreHidden\", false);\n  private enableRetinaIcons_ = getOption(\n    this.options,\n    \"enableRetinaIcons\",\n    false\n  );\n\n  private imagePath_ = this.options.imagePath || MarkerClusterer.IMAGE_PATH;\n  private imageExtension_ =\n    this.options.imageExtension || MarkerClusterer.IMAGE_EXTENSION;\n  private imageSizes_ = this.options.imageSizes || MarkerClusterer.IMAGE_SIZES;\n  private calculator_ = this.options.calculator || MarkerClusterer.CALCULATOR;\n  private batchSize_ = this.options.batchSize || MarkerClusterer.BATCH_SIZE;\n  private batchSizeIE_ =\n    this.options.batchSizeIE || MarkerClusterer.BATCH_SIZE_IE;\n  private clusterClass_ = this.options.clusterClass || \"cluster\";\n\n  private prevZoom_: number;\n  private timerRefStatic: number;\n\n  /**\n   * Creates a MarkerClusterer object with the options specified in {@link MarkerClustererOptions}.\n   * @param map The Google map to attach to.\n   * @param markers The markers to be added to the cluster.\n   * @param options The optional parameters.\n   */\n  constructor(\n    map: google.maps.Map,\n    markers: google.maps.Marker[] = [],\n    private options: MarkerClustererOptions = {}\n  ) {\n    super();\n\n    if (navigator.userAgent.toLowerCase().indexOf(\"msie\") !== -1) {\n      // Try to avoid IE timeout when processing a huge number of markers:\n      this.batchSize_ = this.batchSizeIE_;\n    }\n\n    this.setupStyles_();\n\n    this.addMarkers(markers, true);\n    this.setMap(map); // Note: this causes onAdd to be called\n  }\n\n  /**\n   * Implementation of the onAdd interface method.\n   * @ignore\n   */\n  onAdd(): void {\n    this.activeMap_ = this.getMap() as google.maps.Map;\n    this.ready_ = true;\n\n    this.repaint();\n\n    this.prevZoom_ = this.getMap().getZoom();\n\n    // Add the map event listeners\n    this.listeners_ = [\n      google.maps.event.addListener(this.getMap(), \"zoom_changed\", () => {\n        const map: google.maps.Map & {\n          minZoom: number;\n          maxZoom: number;\n          mapTypes: { [type: string]: google.maps.MapType };\n        } = this.getMap() as any; // eslint-disable-line @typescript-eslint/no-explicit-any\n\n        // Fix for bug #407\n        // Determines map type and prevents illegal zoom levels\n        const minZoom = map.minZoom || 0;\n        const maxZoom = Math.min(\n          map.maxZoom || 100,\n          map.mapTypes[map.getMapTypeId()].maxZoom\n        );\n        const zoom = Math.min(\n          Math.max(this.getMap().getZoom(), minZoom),\n          maxZoom\n        );\n\n        if (this.prevZoom_ != zoom) {\n          this.prevZoom_ = zoom;\n          this.resetViewport_(false);\n        }\n      }),\n      google.maps.event.addListener(this.getMap(), \"idle\", () => {\n        this.redraw_();\n      }),\n    ];\n  }\n\n  /**\n   * Implementation of the onRemove interface method.\n   * Removes map event listeners and all cluster icons from the DOM.\n   * All managed markers are also put back on the map.\n   * @ignore\n   */\n  onRemove(): void {\n    // Put all the managed markers back on the map:\n    for (let i = 0; i < this.markers_.length; i++) {\n      if (this.markers_[i].getMap() !== this.activeMap_) {\n        this.markers_[i].setMap(this.activeMap_);\n      }\n    }\n\n    // Remove all clusters:\n    for (let i = 0; i < this.clusters_.length; i++) {\n      this.clusters_[i].remove();\n    }\n    this.clusters_ = [];\n\n    // Remove map event listeners:\n    for (let i = 0; i < this.listeners_.length; i++) {\n      google.maps.event.removeListener(this.listeners_[i]);\n    }\n    this.listeners_ = [];\n\n    this.activeMap_ = null;\n    this.ready_ = false;\n  }\n\n  /**\n   * Implementation of the draw interface method.\n   * @ignore\n   */\n  draw(): void {}\n\n  /**\n   * Sets up the styles object.\n   */\n  private setupStyles_(): void {\n    if (this.styles_.length > 0) {\n      return;\n    }\n\n    for (let i = 0; i < this.imageSizes_.length; i++) {\n      const size = this.imageSizes_[i];\n      this.styles_.push(\n        MarkerClusterer.withDefaultStyle({\n          url: this.imagePath_ + (i + 1) + \".\" + this.imageExtension_,\n          height: size,\n          width: size,\n        })\n      );\n    }\n  }\n\n  /**\n   *  Fits the map to the bounds of the markers managed by the clusterer.\n   */\n  fitMapToMarkers(padding: number | google.maps.Padding): void {\n    const markers = this.getMarkers();\n    const bounds = new google.maps.LatLngBounds();\n    for (let i = 0; i < markers.length; i++) {\n      // March 3, 2018: Bug fix -- honor the ignoreHidden property\n      if (markers[i].getVisible() || !this.getIgnoreHidden()) {\n        bounds.extend(markers[i].getPosition());\n      }\n    }\n\n    (this.getMap() as google.maps.Map).fitBounds(bounds, padding);\n  }\n\n  /**\n   * Returns the value of the `gridSize` property.\n   *\n   * @return The grid size.\n   */\n  getGridSize(): number {\n    return this.gridSize_;\n  }\n\n  /**\n   * Sets the value of the `gridSize` property.\n   *\n   * @param gridSize The grid size.\n   */\n  setGridSize(gridSize: number): void {\n    this.gridSize_ = gridSize;\n  }\n\n  /**\n   * Returns the value of the `minimumClusterSize` property.\n   *\n   * @return The minimum cluster size.\n   */\n  getMinimumClusterSize(): number {\n    return this.minClusterSize_;\n  }\n\n  /**\n   * Sets the value of the `minimumClusterSize` property.\n   *\n   * @param minimumClusterSize The minimum cluster size.\n   */\n  setMinimumClusterSize(minimumClusterSize: number): void {\n    this.minClusterSize_ = minimumClusterSize;\n  }\n\n  /**\n   *  Returns the value of the `maxZoom` property.\n   *\n   *  @return The maximum zoom level.\n   */\n  getMaxZoom(): number {\n    return this.maxZoom_;\n  }\n\n  /**\n   *  Sets the value of the `maxZoom` property.\n   *\n   *  @param maxZoom The maximum zoom level.\n   */\n  setMaxZoom(maxZoom: number): void {\n    this.maxZoom_ = maxZoom;\n  }\n\n  getZIndex(): number {\n    return this.zIndex_;\n  }\n\n  setZIndex(zIndex: number): void {\n    this.zIndex_ = zIndex;\n  }\n\n  /**\n   *  Returns the value of the `styles` property.\n   *\n   *  @return The array of styles defining the cluster markers to be used.\n   */\n  getStyles(): ClusterIconStyle[] {\n    return this.styles_;\n  }\n\n  /**\n   *  Sets the value of the `styles` property.\n   *\n   *  @param styles The array of styles to use.\n   */\n  setStyles(styles: ClusterIconStyle[]): void {\n    this.styles_ = styles;\n  }\n\n  /**\n   * Returns the value of the `title` property.\n   *\n   * @return The content of the title text.\n   */\n  getTitle(): string {\n    return this.title_;\n  }\n\n  /**\n   *  Sets the value of the `title` property.\n   *\n   *  @param title The value of the title property.\n   */\n  setTitle(title: string): void {\n    this.title_ = title;\n  }\n\n  /**\n   * Returns the value of the `zoomOnClick` property.\n   *\n   * @return True if zoomOnClick property is set.\n   */\n  getZoomOnClick(): boolean {\n    return this.zoomOnClick_;\n  }\n\n  /**\n   *  Sets the value of the `zoomOnClick` property.\n   *\n   *  @param zoomOnClick The value of the zoomOnClick property.\n   */\n  setZoomOnClick(zoomOnClick: boolean): void {\n    this.zoomOnClick_ = zoomOnClick;\n  }\n\n  /**\n   * Returns the value of the `averageCenter` property.\n   *\n   * @return True if averageCenter property is set.\n   */\n  getAverageCenter(): boolean {\n    return this.averageCenter_;\n  }\n\n  /**\n   *  Sets the value of the `averageCenter` property.\n   *\n   *  @param averageCenter The value of the averageCenter property.\n   */\n  setAverageCenter(averageCenter: boolean): void {\n    this.averageCenter_ = averageCenter;\n  }\n\n  /**\n   * Returns the value of the `ignoreHidden` property.\n   *\n   * @return True if ignoreHidden property is set.\n   */\n  getIgnoreHidden(): boolean {\n    return this.ignoreHidden_;\n  }\n\n  /**\n   *  Sets the value of the `ignoreHidden` property.\n   *\n   *  @param ignoreHidden The value of the ignoreHidden property.\n   */\n  setIgnoreHidden(ignoreHidden: boolean): void {\n    this.ignoreHidden_ = ignoreHidden;\n  }\n\n  /**\n   * Returns the value of the `enableRetinaIcons` property.\n   *\n   * @return True if enableRetinaIcons property is set.\n   */\n  getEnableRetinaIcons(): boolean {\n    return this.enableRetinaIcons_;\n  }\n\n  /**\n   *  Sets the value of the `enableRetinaIcons` property.\n   *\n   *  @param enableRetinaIcons The value of the enableRetinaIcons property.\n   */\n  setEnableRetinaIcons(enableRetinaIcons: boolean): void {\n    this.enableRetinaIcons_ = enableRetinaIcons;\n  }\n\n  /**\n   * Returns the value of the `imageExtension` property.\n   *\n   * @return The value of the imageExtension property.\n   */\n  getImageExtension(): string {\n    return this.imageExtension_;\n  }\n\n  /**\n   *  Sets the value of the `imageExtension` property.\n   *\n   *  @param imageExtension The value of the imageExtension property.\n   */\n  setImageExtension(imageExtension: string): void {\n    this.imageExtension_ = imageExtension;\n  }\n\n  /**\n   * Returns the value of the `imagePath` property.\n   *\n   * @return The value of the imagePath property.\n   */\n  getImagePath(): string {\n    return this.imagePath_;\n  }\n\n  /**\n   *  Sets the value of the `imagePath` property.\n   *\n   *  @param imagePath The value of the imagePath property.\n   */\n  setImagePath(imagePath: string): void {\n    this.imagePath_ = imagePath;\n  }\n\n  /**\n   * Returns the value of the `imageSizes` property.\n   *\n   * @return The value of the imageSizes property.\n   */\n  getImageSizes(): number[] {\n    return this.imageSizes_;\n  }\n\n  /**\n   *  Sets the value of the `imageSizes` property.\n   *\n   *  @param imageSizes The value of the imageSizes property.\n   */\n  setImageSizes(imageSizes: number[]): void {\n    this.imageSizes_ = imageSizes;\n  }\n\n  /**\n   * Returns the value of the `calculator` property.\n   *\n   * @return the value of the calculator property.\n   */\n  getCalculator(): Calculator {\n    return this.calculator_;\n  }\n\n  /**\n   * Sets the value of the `calculator` property.\n   *\n   * @param calculator The value of the calculator property.\n   */\n  setCalculator(calculator: Calculator): void {\n    this.calculator_ = calculator;\n  }\n\n  /**\n   * Returns the value of the `batchSizeIE` property.\n   *\n   * @return the value of the batchSizeIE property.\n   */\n  getBatchSizeIE(): number {\n    return this.batchSizeIE_;\n  }\n\n  /**\n   * Sets the value of the `batchSizeIE` property.\n   *\n   *  @param batchSizeIE The value of the batchSizeIE property.\n   */\n  setBatchSizeIE(batchSizeIE: number): void {\n    this.batchSizeIE_ = batchSizeIE;\n  }\n\n  /**\n   * Returns the value of the `clusterClass` property.\n   *\n   * @return the value of the clusterClass property.\n   */\n  getClusterClass(): string {\n    return this.clusterClass_;\n  }\n\n  /**\n   * Sets the value of the `clusterClass` property.\n   *\n   *  @param clusterClass The value of the clusterClass property.\n   */\n  setClusterClass(clusterClass: string): void {\n    this.clusterClass_ = clusterClass;\n  }\n\n  /**\n   *  Returns the array of markers managed by the clusterer.\n   *\n   *  @return The array of markers managed by the clusterer.\n   */\n  getMarkers(): google.maps.Marker[] {\n    return this.markers_;\n  }\n\n  /**\n   *  Returns the number of markers managed by the clusterer.\n   *\n   *  @return The number of markers.\n   */\n  getTotalMarkers(): number {\n    return this.markers_.length;\n  }\n\n  /**\n   * Returns the current array of clusters formed by the clusterer.\n   *\n   * @return The array of clusters formed by the clusterer.\n   */\n  getClusters(): Cluster[] {\n    return this.clusters_;\n  }\n\n  /**\n   * Returns the number of clusters formed by the clusterer.\n   *\n   * @return The number of clusters formed by the clusterer.\n   */\n  getTotalClusters(): number {\n    return this.clusters_.length;\n  }\n\n  /**\n   * Adds a marker to the clusterer. The clusters are redrawn unless\n   *  `nodraw` is set to `true`.\n   *\n   * @param marker The marker to add.\n   * @param nodraw Set to `true` to prevent redrawing.\n   */\n  addMarker(marker: google.maps.Marker, nodraw?: boolean): void {\n    this.pushMarkerTo_(marker);\n    if (!nodraw) {\n      this.redraw_();\n    }\n  }\n\n  /**\n   * Adds an array of markers to the clusterer. The clusters are redrawn unless\n   *  `nodraw` is set to `true`.\n   *\n   * @param markers The markers to add.\n   * @param nodraw Set to `true` to prevent redrawing.\n   */\n  addMarkers(markers: google.maps.Marker[], nodraw?: boolean): void {\n    for (const key in markers) {\n      if (Object.prototype.hasOwnProperty.call(markers, key)) {\n        this.pushMarkerTo_(markers[key]);\n      }\n    }\n    if (!nodraw) {\n      this.redraw_();\n    }\n  }\n\n  /**\n   * Pushes a marker to the clusterer.\n   *\n   * @param marker The marker to add.\n   */\n  private pushMarkerTo_(\n    marker: google.maps.Marker & { isAdded?: boolean }\n  ): void {\n    // If the marker is draggable add a listener so we can update the clusters on the dragend:\n    if (marker.getDraggable()) {\n      google.maps.event.addListener(marker, \"dragend\", () => {\n        if (this.ready_) {\n          marker.isAdded = false;\n          this.repaint();\n        }\n      });\n    }\n    marker.isAdded = false;\n    this.markers_.push(marker);\n  }\n\n  /**\n   * Removes a marker from the cluster.  The clusters are redrawn unless\n   *  `nodraw` is set to `true`. Returns `true` if the\n   *  marker was removed from the clusterer.\n   *\n   * @param marker The marker to remove.\n   * @param nodraw Set to `true` to prevent redrawing.\n   * @return True if the marker was removed from the clusterer.\n   */\n  removeMarker(marker: google.maps.Marker, nodraw?: boolean): boolean {\n    const removed = this.removeMarker_(marker);\n\n    if (!nodraw && removed) {\n      this.repaint();\n    }\n\n    return removed;\n  }\n\n  /**\n   * Removes an array of markers from the cluster. The clusters are redrawn unless\n   *  `nodraw` is set to `true`. Returns `true` if markers were removed from the clusterer.\n   *\n   * @param markers The markers to remove.\n   * @param nodraw Set to `true` to prevent redrawing.\n   * @return True if markers were removed from the clusterer.\n   */\n  removeMarkers(markers: google.maps.Marker[], nodraw?: boolean): boolean {\n    let removed = false;\n\n    for (let i = 0; i < markers.length; i++) {\n      const r = this.removeMarker_(markers[i]);\n      removed = removed || r;\n    }\n\n    if (!nodraw && removed) {\n      this.repaint();\n    }\n\n    return removed;\n  }\n\n  /**\n   * Removes a marker and returns true if removed, false if not.\n   *\n   * @param marker The marker to remove\n   * @return Whether the marker was removed or not\n   */\n  private removeMarker_(marker: google.maps.Marker): boolean {\n    let index = -1;\n    if (this.markers_.indexOf) {\n      index = this.markers_.indexOf(marker);\n    } else {\n      for (let i = 0; i < this.markers_.length; i++) {\n        if (marker === this.markers_[i]) {\n          index = i;\n          break;\n        }\n      }\n    }\n\n    if (index === -1) {\n      // Marker is not in our list of markers, so do nothing:\n      return false;\n    }\n\n    marker.setMap(null);\n    this.markers_.splice(index, 1); // Remove the marker from the list of managed markers\n    return true;\n  }\n\n  /**\n   * Removes all clusters and markers from the map and also removes all markers\n   *  managed by the clusterer.\n   */\n  clearMarkers(): void {\n    this.resetViewport_(true);\n    this.markers_ = [];\n  }\n\n  /**\n   * Recalculates and redraws all the marker clusters from scratch.\n   *  Call this after changing any properties.\n   */\n  repaint(): void {\n    const oldClusters = this.clusters_.slice();\n    this.clusters_ = [];\n    this.resetViewport_(false);\n    this.redraw_();\n\n    // Remove the old clusters.\n    // Do it in a timeout to prevent blinking effect.\n    setTimeout(() => {\n      for (let i = 0; i < oldClusters.length; i++) {\n        oldClusters[i].remove();\n      }\n    }, 0);\n  }\n\n  /**\n   * Returns the current bounds extended by the grid size.\n   *\n   * @param bounds The bounds to extend.\n   * @return The extended bounds.\n   * @ignore\n   */\n  getExtendedBounds(\n    bounds: google.maps.LatLngBounds\n  ): google.maps.LatLngBounds {\n    const projection = this.getProjection();\n\n    // Turn the bounds into latlng.\n    const tr = new google.maps.LatLng(\n      bounds.getNorthEast().lat(),\n      bounds.getNorthEast().lng()\n    );\n    const bl = new google.maps.LatLng(\n      bounds.getSouthWest().lat(),\n      bounds.getSouthWest().lng()\n    );\n\n    // Convert the points to pixels and the extend out by the grid size.\n    const trPix = projection.fromLatLngToDivPixel(tr);\n    trPix.x += this.gridSize_;\n    trPix.y -= this.gridSize_;\n\n    const blPix = projection.fromLatLngToDivPixel(bl);\n    blPix.x -= this.gridSize_;\n    blPix.y += this.gridSize_;\n\n    // Convert the pixel points back to LatLng\n    const ne = projection.fromDivPixelToLatLng(trPix);\n    const sw = projection.fromDivPixelToLatLng(blPix);\n\n    // Extend the bounds to contain the new bounds.\n    bounds.extend(ne);\n    bounds.extend(sw);\n\n    return bounds;\n  }\n\n  /**\n   * Redraws all the clusters.\n   */\n  private redraw_(): void {\n    this.createClusters_(0);\n  }\n\n  /**\n   * Removes all clusters from the map. The markers are also removed from the map\n   *  if `hide` is set to `true`.\n   *\n   * @param hide Set to `true` to also remove the markers from the map.\n   */\n  private resetViewport_(hide?: boolean): void {\n    // Remove all the clusters\n    for (let i = 0; i < this.clusters_.length; i++) {\n      this.clusters_[i].remove();\n    }\n    this.clusters_ = [];\n\n    // Reset the markers to not be added and to be removed from the map.\n    for (let i = 0; i < this.markers_.length; i++) {\n      const marker = this.markers_[i];\n      marker.isAdded = false;\n      if (hide) {\n        marker.setMap(null);\n      }\n    }\n  }\n\n  /**\n   * Calculates the distance between two latlng locations in km.\n   *\n   * @param p1 The first lat lng point.\n   * @param p2 The second lat lng point.\n   * @return The distance between the two points in km.\n   * @link http://www.movable-type.co.uk/scripts/latlong.html\n   */\n  private distanceBetweenPoints_(\n    p1: google.maps.LatLng,\n    p2: google.maps.LatLng\n  ): number {\n    const R = 6371; // Radius of the Earth in km\n    const dLat = ((p2.lat() - p1.lat()) * Math.PI) / 180;\n    const dLon = ((p2.lng() - p1.lng()) * Math.PI) / 180;\n    const a =\n      Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n      Math.cos((p1.lat() * Math.PI) / 180) *\n        Math.cos((p2.lat() * Math.PI) / 180) *\n        Math.sin(dLon / 2) *\n        Math.sin(dLon / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c;\n  }\n\n  /**\n   * Determines if a marker is contained in a bounds.\n   *\n   * @param marker The marker to check.\n   * @param bounds The bounds to check against.\n   * @return True if the marker is in the bounds.\n   */\n  private isMarkerInBounds_(\n    marker: google.maps.Marker,\n    bounds: google.maps.LatLngBounds\n  ): boolean {\n    return bounds.contains(marker.getPosition());\n  }\n\n  /**\n   * Adds a marker to a cluster, or creates a new cluster.\n   *\n   * @param marker The marker to add.\n   */\n  private addToClosestCluster_(marker: google.maps.Marker): void {\n    let distance = 40000; // Some large number\n    let clusterToAddTo = null;\n    for (let i = 0; i < this.clusters_.length; i++) {\n      const cluster = this.clusters_[i];\n      const center = cluster.getCenter();\n      if (center) {\n        const d = this.distanceBetweenPoints_(center, marker.getPosition());\n        if (d < distance) {\n          distance = d;\n          clusterToAddTo = cluster;\n        }\n      }\n    }\n\n    if (clusterToAddTo && clusterToAddTo.isMarkerInClusterBounds(marker)) {\n      clusterToAddTo.addMarker(marker);\n    } else {\n      const cluster = new Cluster(this);\n      cluster.addMarker(marker);\n      this.clusters_.push(cluster);\n    }\n  }\n\n  /**\n   * Creates the clusters. This is done in batches to avoid timeout errors\n   *  in some browsers when there is a huge number of markers.\n   *\n   * @param iFirst The index of the first marker in the batch of\n   *  markers to be added to clusters.\n   */\n  private createClusters_(iFirst: number): void {\n    if (!this.ready_) {\n      return;\n    }\n\n    // Cancel previous batch processing if we're working on the first batch:\n    if (iFirst === 0) {\n      google.maps.event.trigger(this, \"clusteringbegin\", this);\n\n      if (typeof this.timerRefStatic !== \"undefined\") {\n        clearTimeout(this.timerRefStatic);\n        delete this.timerRefStatic;\n      }\n    }\n\n    // Get our current map view bounds.\n    // Create a new bounds object so we don't affect the map.\n    //\n    // See Comments 9 & 11 on Issue 3651 relating to this workaround for a Google Maps bug:\n    let mapBounds: google.maps.LatLngBounds;\n\n    if (this.getMap().getZoom() > 3) {\n      mapBounds = new google.maps.LatLngBounds(\n        (this.getMap() as google.maps.Map).getBounds().getSouthWest(),\n        (this.getMap() as google.maps.Map).getBounds().getNorthEast()\n      );\n    } else {\n      mapBounds = new google.maps.LatLngBounds(\n        new google.maps.LatLng(85.02070771743472, -178.48388434375),\n        new google.maps.LatLng(-85.08136444384544, 178.00048865625)\n      );\n    }\n    const bounds = this.getExtendedBounds(mapBounds);\n\n    const iLast = Math.min(iFirst + this.batchSize_, this.markers_.length);\n\n    for (let i = iFirst; i < iLast; i++) {\n      const marker = this.markers_[i];\n      if (!marker.isAdded && this.isMarkerInBounds_(marker, bounds)) {\n        if (\n          !this.ignoreHidden_ ||\n          (this.ignoreHidden_ && marker.getVisible())\n        ) {\n          this.addToClosestCluster_(marker);\n        }\n      }\n    }\n\n    if (iLast < this.markers_.length) {\n      this.timerRefStatic = window.setTimeout(() => {\n        this.createClusters_(iLast);\n      }, 0);\n    } else {\n      delete this.timerRefStatic;\n      google.maps.event.trigger(this, \"clusteringend\", this);\n\n      for (let i = 0; i < this.clusters_.length; i++) {\n        this.clusters_[i].updateIcon();\n      }\n    }\n  }\n\n  /**\n   * The default function for determining the label text and style\n   * for a cluster icon.\n   *\n   * @param markers The array of markers represented by the cluster.\n   * @param numStyles The number of marker styles available.\n   * @return The information resource for the cluster.\n   */\n  static CALCULATOR(\n    markers: google.maps.Marker[],\n    numStyles: number\n  ): ClusterIconInfo {\n    let index = 0;\n    const count: number = markers.length;\n\n    let dv = count;\n    while (dv !== 0) {\n      dv = Math.floor(dv / 10);\n      index++;\n    }\n\n    index = Math.min(index, numStyles);\n    return {\n      text: count.toString(),\n      index: index,\n      title: \"\",\n    };\n  }\n\n  /**\n   * Generates default styles augmented with user passed values.\n   * Useful when you want to override some default values but keep untouched\n   *\n   * @param overrides override default values\n   */\n  static withDefaultStyle(overrides: ClusterIconStyle): ClusterIconStyle {\n    return {\n      textColor: \"black\",\n      textSize: 11,\n      textDecoration: \"none\",\n      textLineHeight: overrides.height,\n      fontWeight: \"bold\",\n      fontStyle: \"normal\",\n      fontFamily: \"Arial,sans-serif\",\n      backgroundPosition: \"0 0\",\n      ...overrides,\n    };\n  }\n}\n","export const MAP_STYLE = [\r\n\t{\r\n\t\t\"featureType\": \"administrative\",\r\n\t\t\"elementType\": \"labels.text.fill\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"color\": \"#444444\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"landscape\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"color\": \"#f2f2f2\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"poi\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"visibility\": \"off\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"road\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"saturation\": -100\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"lightness\": 45\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"road.highway\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"visibility\": \"simplified\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"road.arterial\",\r\n\t\t\"elementType\": \"labels.icon\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"visibility\": \"off\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"transit\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"visibility\": \"off\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"water\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"color\": \"#d1cdca\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"visibility\": \"on\"\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n];\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nconst MENUS = [];\r\n\r\nexport class MenuDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst submenus = this.submenus = document.querySelector(`.group--submenus`);\r\n\t\tconst target = this.target = document.querySelector(`#menu-${this.menu}`);\r\n\t\tconst container = this.container = target.querySelector(`.container`);\r\n\t\tthis.onOver = this.onOver.bind(this);\r\n\t\tthis.onLeave = this.onLeave.bind(this);\r\n\t\tnode.addEventListener('mouseover', this.onOver);\r\n\t\tMENUS.push(this);\r\n\t}\r\n\r\n\tonOver() {\r\n\t\tMENUS.forEach(x => x.onLeave(true));\r\n\t\tconst submenus = this.submenus;\r\n\t\tsubmenus.classList.add('active');\r\n\t\tconst target = this.target;\r\n\t\ttarget.classList.add('active');\r\n\t\tconst container = this.container;\r\n\t\tcontainer.addEventListener('mouseleave', this.onLeave);\r\n\t}\r\n\r\n\tonLeave(keepBackground) {\r\n\t\tif (keepBackground !== true) {\r\n\t\t\tconst submenus = this.submenus;\r\n\t\t\tsubmenus.classList.remove('active');\r\n\t\t}\r\n\t\tconst target = this.target;\r\n\t\ttarget.classList.remove('active');\r\n\t\tconst container = this.container;\r\n\t\tcontainer.removeEventListener('mouseleave', this.onLeave);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.onLeave();\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.removeEventListener('mouseover', this.onOver);\r\n\t}\r\n}\r\n\r\nMenuDirective.meta = {\r\n\tselector: '[menu]',\r\n\tinputs: ['menu'],\r\n};\r\n","import { ApiService } from '../../core/api/api.service';\r\n\r\nexport class NewsService {\r\n\r\n\tstatic all$() {\r\n\t\treturn ApiService.get$('/news/all.json');\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\treturn ApiService.get$('/news/filters.json');\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\nimport { combineLatest } from 'rxjs';\nimport { first, takeUntil } from 'rxjs/operators';\nimport { FilterMode } from '../../core/filter/filter-item';\nimport { FilterService } from '../../core/filter/filter.service';\nimport { LocomotiveScrollService } from '../../core/locomotive-scroll/locomotive-scroll.service';\nimport { NewsService } from './news.service';\n\nexport class NewsComponent extends Component {\n\n\tonInit() {\n\t\tthis.items = [];\n\t\tthis.filteredItems = [];\n\t\tthis.filters = {};\n\t\tconst form = this.form = new FormGroup({\n\t\t\tcountry: new FormControl(null, [Validators.RequiredValidator()]),\n\t\t\tsearch: new FormControl(null, [Validators.RequiredValidator()]),\n\t\t});\n\t\tconst controls = this.controls = form.controls;\n\t\tform.changes$.pipe(\n\t\t\ttakeUntil(this.unsubscribe$)\n\t\t).subscribe((_) => {\n\t\t\t// console.log('NewsComponent.changes$', form.value);\n\t\t\tthis.setFilterByKeyAndValue('country', form.value.country);\n\t\t\tthis.setFilterByKeyAndValue('search', form.value.search);\n\t\t\tthis.pushChanges();\n\t\t});\n\t\tthis.load$().pipe(\n\t\t\tfirst(),\n\t\t).subscribe(data => {\n\t\t\tthis.items = data[0];\n\t\t\tthis.filters = data[1];\n\t\t\tconst options = this.filters.country.options.slice().map(x => ({ id: x.value, name: x.label }));\n\t\t\toptions.unshift({ id: null, name: 'select' }); // , // LabelPipe.transform('select')\n\t\t\tcontrols.country.options = options;\n\t\t\tthis.onLoad();\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\tload$() {\n\t\treturn combineLatest([\n\t\t\tNewsService.all$(),\n\t\t\tNewsService.filters$(),\n\t\t]);\n\t}\n\n\tonLoad() {\n\t\tconst items = this.items;\n\t\tconst filters = this.filters;\n\t\tObject.keys(filters).forEach(key => {\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\n\t\t});\n\t\tconst initialParams = {};\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\n\t\t\tswitch (key) {\n\t\t\t\tdefault:\n\t\t\t\t\tfilter.filter = (item, value) => {\n\t\t\t\t\t\tswitch (key) {\n\t\t\t\t\t\t\tcase 'country':\n\t\t\t\t\t\t\t\treturn item.country.id === value;\n\t\t\t\t\t\t\tcase 'search':\n\t\t\t\t\t\t\t\treturn item.title.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\n\t\t\t\t\t\t\t\t\titem.abstract.toLowerCase().indexOf(value.toLowerCase()) !== -1\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t}\n\t\t});\n\t\tthis.filterService = filterService;\n\t\tthis.filters = filterService.filters;\n\t\tconst country = this.filters.country.values.length ? this.filters.country.values[0] : null;\n\t\tconst search = this.filters.search.values.length ? this.filters.search.values[0] : null;\n\t\tthis.form.patch({ country, search });\n\t\tfilterService.items$(items).pipe(\n\t\t\ttakeUntil(this.unsubscribe$),\n\t\t).subscribe(filteredItems => {\n\t\t\tthis.filteredItems = filteredItems;\n\t\t\tthis.pushChanges();\n\t\t\tLocomotiveScrollService.update();\n\t\t\t// console.log('NewsComponent.filteredItems', filteredItems.length);\n\t\t});\n\t}\n\n\tsetFilterByKeyAndValue(key, value) {\n\t\tconst filter = this.filters[key];\n\t\tif (filter) {\n\t\t\tif (filter.mode === FilterMode.QUERY) {\n\t\t\t\tfilter.set(value);\n\t\t\t} else {\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\n\t\t\t\t// console.log(filter.options, option);\n\t\t\t\tif (option) {\n\t\t\t\t\tfilter.set(option);\n\t\t\t\t} else {\n\t\t\t\t\tfilter.clear();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonSearch(model) {\n\t\t// console.log('NewsComponent.onSearch', this.form.value);\n\t\tthis.setFilterByKeyAndValue('country', this.form.value.country);\n\t\tthis.setFilterByKeyAndValue('search', this.form.value.search);\n\t\tthis.pushChanges();\n\t}\n\n\tclearFilter(event, filter) {\n\t\tevent.preventDefault();\n\t\tevent.stopImmediatePropagation();\n\t\tfilter.clear();\n\t\tthis.pushChanges();\n\t}\n}\n\nNewsComponent.meta = {\n\tselector: '[news]',\n};\n","import { Component } from 'rxcomp';\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\nimport { takeUntil } from 'rxjs/operators';\n\nexport class NewsletterPropositionComponent extends Component {\n\n\tonInit() {\n\t\tconst form = this.form = new FormGroup({\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator()]),\n\t\t});\n\t\tconst controls = this.controls = form.controls;\n\t\tform.changes$.pipe(\n\t\t\ttakeUntil(this.unsubscribe$)\n\t\t).subscribe((_) => {\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\tonNewsletter(event) {\n\t\tconsole.log('NewsletterPropositionComponent.onNewsletter', this.form.value);\n\t}\n}\n\nNewsletterPropositionComponent.meta = {\n\tselector: '[newsletter-proposition]',\n};\n","import { Component, getContext } from 'rxcomp';\r\nimport { first } from 'rxjs/operators';\r\nimport { HttpService } from '../../core/http/http.service';\r\nimport { LocomotiveScrollService } from '../../core/locomotive-scroll/locomotive-scroll.service';\r\n\r\nconst breadcumbStyle = `font-size: .8rem; text-transform: uppercase; letter-spacing: 0.075em; color: #37393b;`;\r\nconst titleStyle = `letter-spacing: 0; font-family: 'Bauer Bodoni', sans-serif; font-size: 2.9rem; margin: 0;word-wrap: break-word;text-transform: uppercase;color:#37393b;`;\r\nconst designerStyle = `font-size: .8rem; letter-spacing: 0.075em;margin-bottom: 15px;word-wrap: break-word;text-transform: uppercase;`;\r\nconst descriptionStyle = `font-size: .8rem; text-align: left;margin-bottom: 15px; letter-spacing: 0.05em;`;\r\n\r\nconst key = 'a9$hhVGHxos';\r\n\r\nexport class ProductsConfigureComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.isReady = false;\r\n\t\tthis.isComplete = false;\r\n\t\tthis.isConfiguring = false;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst iframe = this.iframe = node.querySelector('#showefy');\r\n\t\tif (!iframe) {\r\n\t\t\tthrow ('missing iframe');\r\n\t\t}\r\n\t\tthis.onEvent = this.onEvent.bind(this);\r\n\r\n\t\tHttpService.http$('POST', 'https://www.showefy.com/en/ApiExt/token/v1', { grant_type: 'client_credentials' }, 'json', 'giorgetti:AGdW%Q_8@Pe,2&#').pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(response => {\r\n\t\t\tconsole.log(response);\r\n\t\t});\r\n\r\n\t\tconst sfy = this.sfy = new SFYFrame(iframe, key, this.onEvent);\r\n\t\tsfy.init();\r\n\t\tconsole.log('ProductsConfigureComponent.onInit', sfy, iframe);\r\n\t}\r\n\r\n\tgetIframeDocument(iframe) {\r\n\t\tconst content = iframe.contentWindow || iframe.contentDocument\r\n\t\tconst iframeDocument = content.document ? content.document : content;\r\n\t\treturn iframeDocument;\r\n\t}\r\n\r\n\tonEvent(data) {\r\n\t\tconst event = JSON.parse(data);\r\n\t\tconst eventName = event.emit;\r\n\t\tif (event.status == 0) {\r\n\t\t\t// console.log('ProductsConfigureComponent.onEvent', event);\r\n\t\t\tswitch (eventName) {\r\n\t\t\t\tcase 'showefy_ready':\r\n\t\t\t\t\tthis.onReady(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'showefy_complete':\r\n\t\t\t\t\tthis.onShowefyComplete(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'start_configurator':\r\n\t\t\t\t\tthis.onStartConfigurator(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'button_pressed':\r\n\t\t\t\t\tthis.onButtonPressed(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'setButtonStatus':\r\n\t\t\t\t\tthis.onSetButtonStatus(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'getIframeSize':\r\n\t\t\t\t\tthis.onGetIframeSize(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'getProductExtData':\r\n\t\t\t\t\tthis.onGetProductExtData(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'getFastProductExtData':\r\n\t\t\t\t\tthis.onGetFastProductExtData(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif (this.isConfiguring && this.isReady && this.isComplete) {\r\n\t\t\t\tconsole.log('set taratura impaginazione configuratore');\r\n\t\t\t\tconst { node } = getContext(this);\r\n\t\t\t\t// window.scroll(0, findPos(document.getElementById('container_ifrshowefy')));\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t\tLocomotiveScrollService.scrollTo(node, { offset: -100 });\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconsole.log('ProductsConfigureComponent.onEvent.error', event.status, event.statusTxt, eventName);\r\n\t\t}\r\n\t}\r\n\r\n\tonReady(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onReady', event);\r\n\t\tthis.isReady = true;\r\n\t\tthis.addTexts();\r\n\t\tthis.addButtons();\r\n\t\tthis.addBreadcrumb();\r\n\t\treturn;\r\n\t\tconst iframeDocument = this.getIframeDocument(this.iframe);\r\n\t\tconsole.log(iframeDocument.querySelector('head'));\r\n\t\tconst style = iframeDocument.createElement('style');\r\n\t\tstyle.innerHTML = `\r\n\t\t\t* {\r\n\t\t\t\tbackground: none!important;\r\n\t\t\t}\r\n\t\t`;\r\n\t\tconst head = iframeDocument.querySelector('head');\r\n\t\thead.appendChild(style);\r\n\t}\r\n\r\n\tonShowefyComplete(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onShowefyComplete', event);\r\n\t\tif (this.isConfiguring) {\r\n\t\t\tthis.isComplete = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonStartConfigurator(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onStartConfigurator', event);\r\n\t\tthis.isConfiguring = true;\r\n\t}\r\n\r\n\tonButtonPressed(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onButtonPressed', event, 'buttonId', event.data.id);\r\n\t}\r\n\r\n\tonSetButtonStatus(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onSetButtonStatus', event);\r\n\t}\r\n\r\n\tonGetIframeSize(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onGetIframeSize', event);\r\n\t}\r\n\r\n\tonGetProductExtData(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onGetProductExtData', event);\r\n\t}\r\n\r\n\tonGetFastProductExtData(event) {\r\n\t\tconsole.log('ProductsConfigureComponent.onGetFastProductExtData', event);\r\n\t}\r\n\r\n\tfindPos(obj) {\r\n\t\tlet curtop = 0;\r\n\t\tif (obj.offsetParent) {\r\n\t\t\tdo {\r\n\t\t\t\tcurtop += obj.offsetTop;\r\n\t\t\t} while (obj = obj.offsetParent);\r\n\t\t\treturn [curtop];\r\n\t\t}\r\n\t}\r\n\r\n\t// methods\r\n\r\n\taddTexts() {\r\n\t\tconst sfy = this.sfy;\r\n\t\tconst html = sfy.HTML;\r\n\t\tlet index = 0;\r\n\t\thtml.text[index++] = /* html */`<h1 style=\"${titleStyle}\">Nome Prodotto</h1>`;\r\n\t\thtml.text[index++] = /* html */`<h5 style=\"${designerStyle}\">Designer</h5>`;\r\n\t\thtml.text[index++] = /* html */`<div style=\"${descriptionStyle}\"><p>Descrizione</p></div>`;\r\n\t\tsfy.printHTML(html);\r\n\t}\r\n\r\n\taddButtons() {\r\n\t\tconst sfy = this.sfy;\r\n\t\tconst buttons = sfy.BUTTONS;\r\n\r\n\t\tlet index = 0;\r\n\t\tbuttons.element[index] = new sfy.PROPERTIES();\r\n\t\tbuttons.element[index].visibility = true;\r\n\t\tbuttons.element[index].id = 'order';\r\n\t\tbuttons.element[index].label = new sfy.LABEL();\r\n\t\tbuttons.element[index].label.en = 'ADD TO CART';\r\n\t\tindex++;\r\n\r\n\t\tbuttons.element[index] = new sfy.PROPERTIES();\r\n\t\tbuttons.element[index].visibility = true;\r\n\t\tbuttons.element[index].id = 'save_configuration';\r\n\t\tbuttons.element[index].label = new sfy.LABEL();\r\n\t\tbuttons.element[index].label.en = 'SAVE CONFIGURATION';\r\n\t\tindex++;\r\n\r\n\t\tsfy.setButtonStatus(buttons);\r\n\t}\r\n\r\n\taddBreadcrumb() {\r\n\t\tconst sfy = this.sfy;\r\n\t\tconst breadcrumb = sfy.BREADCUMB;\r\n\r\n\t\tlet index = 0;\r\n\r\n\t\tbreadcrumb.element[index] = new sfy.PROPERTIES();\r\n\t\tbreadcrumb.element[index].visibility = true;\r\n\t\tbreadcrumb.element[index].id = 'breadcumb_home';\r\n\t\tbreadcrumb.element[index].label = new sfy.LABEL();\r\n\t\tbreadcrumb.element[index].label.en = /* html */` Home <span aria-hidden='true'>/</span>&nbsp; `;\r\n\t\tbreadcrumb.element[index].style = breadcumbStyle;\r\n\t\tindex++;\r\n\r\n\t\tbreadcrumb.element[index] = new sfy.PROPERTIES();\r\n\t\tbreadcrumb.element[index].visibility = true;\r\n\t\tbreadcrumb.element[index].id = 'breadcumb_products';\r\n\t\tbreadcrumb.element[index].label = new sfy.LABEL();\r\n\t\tbreadcrumb.element[index].label.en = /* html */` Products <span aria-hidden='true'>/</span>&nbsp; `;\r\n\t\tbreadcrumb.element[index].style = breadcumbStyle;\r\n\t\tindex++;\r\n\r\n\t\tbreadcrumb.element[index] = new sfy.PROPERTIES();\r\n\t\tbreadcrumb.element[index].visibility = true;\r\n\t\tbreadcrumb.element[index].id = 'breadcumb_products';\r\n\t\tbreadcrumb.element[index].label = new sfy.LABEL();\r\n\t\tbreadcrumb.element[index].label.en = /* html */` Nome prodotto`;\r\n\t\tbreadcrumb.element[index].style = breadcumbStyle;\r\n\t\tindex++;\r\n\r\n\t\tsfy.printBreadcumb(breadcrumb);\r\n\t}\r\n\r\n\tgetCartData() {\r\n\t\tconst sfy = this.sfy;\r\n\t\tif (sfy) {\r\n\t\t\tsfy.getProductExtData();\r\n\t\t}\r\n\t}\r\n\r\n\tgetFastData() {\r\n\t\tconst sfy = this.sfy;\r\n\t\tif (sfy) {\r\n\t\t\tsfy.getFastProductExtData();\r\n\t\t}\r\n\t}\r\n}\r\n\r\nProductsConfigureComponent.meta = {\r\n\tselector: '[products-configure]',\r\n};\r\n","import { ApiService } from '../../core/api/api.service';\r\n\r\nexport class ProductsDetailService {\r\n\r\n\tstatic versions$() {\r\n\t\treturn ApiService.get$('/products-detail/versions.json');\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\nimport { first } from 'rxjs/operators';\nimport { LocomotiveScrollService } from '../../core/locomotive-scroll/locomotive-scroll.service';\nimport { environment } from '../../environment';\nimport { ProductsDetailService } from './products-detail.service';\n\nexport class ProductsDetailComponent extends Component {\n\n\tonInit() {\n\t\tthis.items = [];\n\t\tthis.visibleItems = [];\n\t\tProductsDetailService.versions$().pipe(\n\t\t\tfirst(),\n\t\t).subscribe(items => {\n\t\t\tthis.items = items;\n\t\t\tthis.visibleItems = this.items.slice(0, Math.min(4, this.items.length));\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\tscrollTo(id) {\n\t\tconst { node } = getContext(this);\n\t\tconst target = node.querySelector(id);\n\t\tif (target) {\n\t\t\tLocomotiveScrollService.scrollTo(target, { offset: -200 });\n\t\t}\n\t}\n\n\tshowVersions(event) {\n\t\tthis.visibleItems = this.items.slice();\n\t\tthis.pushChanges();\n\t\tLocomotiveScrollService.update();\n\t}\n\n\tconfigureProduct(event) {\n\t\twindow.location.href = environment.slug.configureProduct;\n\t}\n}\n\nProductsDetailComponent.meta = {\n\tselector: '[products-detail]',\n};\n","import { ApiService } from '../../core/api/api.service';\r\n\r\nexport class ProjectsService {\r\n\r\n\tstatic all$() {\r\n\t\treturn ApiService.get$('/projects/all.json');\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\treturn ApiService.get$('/projects/filters.json');\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\nimport { combineLatest } from 'rxjs';\nimport { first, takeUntil } from 'rxjs/operators';\nimport { FilterMode } from '../../core/filter/filter-item';\nimport { FilterService } from '../../core/filter/filter.service';\nimport { LocomotiveScrollService } from '../../core/locomotive-scroll/locomotive-scroll.service';\nimport { ProjectsService } from './projects.service';\n\nexport class ProjectsComponent extends Component {\n\n\tonInit() {\n\t\tthis.items = [];\n\t\tthis.filteredItems = [];\n\t\tthis.filters = {};\n\t\tconst form = this.form = new FormGroup({\n\t\t\tcategory: new FormControl(null, [Validators.RequiredValidator()]),\n\t\t\tsearch: new FormControl(null, [Validators.RequiredValidator()]),\n\t\t});\n\t\tconst controls = this.controls = form.controls;\n\t\tform.changes$.pipe(\n\t\t\ttakeUntil(this.unsubscribe$)\n\t\t).subscribe((_) => {\n\t\t\t// console.log('ProjectsComponent.changes$', form.value);\n\t\t\tthis.setFilterByKeyAndValue('category', form.value.category);\n\t\t\tthis.setFilterByKeyAndValue('search', form.value.search);\n\t\t\tthis.pushChanges();\n\t\t});\n\t\tthis.load$().pipe(\n\t\t\tfirst(),\n\t\t).subscribe(data => {\n\t\t\tthis.items = data[0];\n\t\t\tthis.filters = data[1];\n\t\t\tconst options = this.filters.category.options.slice().map(x => ({ id: x.value, name: x.label }));\n\t\t\toptions.unshift({ id: null, name: 'select' }); // , // LabelPipe.transform('select')\n\t\t\tcontrols.category.options = options;\n\t\t\tthis.onLoad();\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\tload$() {\n\t\treturn combineLatest([\n\t\t\tProjectsService.all$(),\n\t\t\tProjectsService.filters$(),\n\t\t]);\n\t}\n\n\tonLoad() {\n\t\tconst items = this.items;\n\t\tconst filters = this.filters;\n\t\tObject.keys(filters).forEach(key => {\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\n\t\t});\n\t\tconst initialParams = {};\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\n\t\t\tswitch (key) {\n\t\t\t\tdefault:\n\t\t\t\t\tfilter.filter = (item, value) => {\n\t\t\t\t\t\tswitch (key) {\n\t\t\t\t\t\t\tcase 'category':\n\t\t\t\t\t\t\t\treturn item.category.id === value;\n\t\t\t\t\t\t\tcase 'search':\n\t\t\t\t\t\t\t\treturn item.title.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\n\t\t\t\t\t\t\t\t\titem.country.toLowerCase().indexOf(value.toLowerCase()) !== -1\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t}\n\t\t});\n\t\tthis.filterService = filterService;\n\t\tthis.filters = filterService.filters;\n\t\tconst category = this.filters.category.values.length ? this.filters.category.values[0] : null;\n\t\tconst search = this.filters.search.values.length ? this.filters.search.values[0] : null;\n\t\tthis.form.patch({ category, search });\n\t\tfilterService.items$(items).pipe(\n\t\t\ttakeUntil(this.unsubscribe$),\n\t\t).subscribe(filteredItems => {\n\t\t\tthis.filteredItems = filteredItems;\n\t\t\tthis.pushChanges();\n\t\t\tLocomotiveScrollService.update();\n\t\t\t// console.log('ProjectsComponent.filteredItems', filteredItems.length);\n\t\t});\n\t}\n\n\tsetFilterByKeyAndValue(key, value) {\n\t\tconst filter = this.filters[key];\n\t\tif (filter) {\n\t\t\tif (filter.mode === FilterMode.QUERY) {\n\t\t\t\tfilter.set(value);\n\t\t\t} else {\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\n\t\t\t\t// console.log(filter.options, option);\n\t\t\t\tif (option) {\n\t\t\t\t\tfilter.set(option);\n\t\t\t\t} else {\n\t\t\t\t\tfilter.clear();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonSearch(model) {\n\t\t// console.log('ProjectsComponent.onSearch', this.form.value);\n\t\tthis.setFilterByKeyAndValue('category', this.form.value.category);\n\t\tthis.setFilterByKeyAndValue('search', this.form.value.search);\n\t\tthis.pushChanges();\n\t}\n\n\tclearFilter(event, filter) {\n\t\tevent.preventDefault();\n\t\tevent.stopImmediatePropagation();\n\t\tfilter.clear();\n\t\tthis.pushChanges();\n\t}\n}\n\nProjectsComponent.meta = {\n\tselector: '[projects]',\n};\n","import { ApiService } from '../../core/api/api.service';\r\n\r\nexport class StoreLocatorService {\r\n\r\n\tstatic all$() {\r\n\t\treturn ApiService.get$('/store-locator/all.json');\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\treturn ApiService.get$('/store-locator/filters.json');\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\nimport { combineLatest } from 'rxjs';\nimport { first, takeUntil } from 'rxjs/operators';\nimport { FilterMode } from '../../core/filter/filter-item';\nimport { FilterService } from '../../core/filter/filter.service';\nimport { LocomotiveScrollService } from '../../core/locomotive-scroll/locomotive-scroll.service';\nimport { StoreLocatorService } from './store-locator.service';\n\nexport class StoreLocatorComponent extends Component {\n\n\tonInit() {\n\t\tthis.items = [];\n\t\tthis.filteredItems = [];\n\t\tthis.visibleItems = [];\n\t\tthis.filters = {};\n\t\tconst form = this.form = new FormGroup({\n\t\t\tcountry: new FormControl(null, [Validators.RequiredValidator()]),\n\t\t\tcategory: new FormControl(null, [Validators.RequiredValidator()]),\n\t\t\tsearch: new FormControl(null, [Validators.RequiredValidator()]),\n\t\t});\n\t\tconst controls = this.controls = form.controls;\n\t\tform.changes$.pipe(\n\t\t\ttakeUntil(this.unsubscribe$)\n\t\t).subscribe((_) => {\n\t\t\t// console.log('StoreLocatorComponent.changes$', form.value);\n\t\t\tthis.setFilterByKeyAndValue('country', form.value.country);\n\t\t\tthis.setFilterByKeyAndValue('category', form.value.category);\n\t\t\tthis.setFilterByKeyAndValue('search', form.value.search);\n\t\t\tthis.pushChanges();\n\t\t});\n\t\tthis.load$().pipe(\n\t\t\tfirst(),\n\t\t).subscribe(data => {\n\t\t\tthis.items = data[0];\n\t\t\tthis.filters = data[1];\n\t\t\t// countries\n\t\t\tconst countries = this.filters.country.options.slice().map(x => ({ id: x.value, name: x.label }));\n\t\t\tcountries.unshift({ id: null, name: 'select' }); // , // LabelPipe.transform('select')\n\t\t\tcontrols.country.options = countries;\n\t\t\t// categories\n\t\t\tconst categories = this.filters.category.options.slice().map(x => ({ id: x.value, name: x.label }));\n\t\t\tcategories.unshift({ id: null, name: 'select' }); // , // LabelPipe.transform('select')\n\t\t\tcontrols.category.options = categories;\n\t\t\tthis.onLoad();\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\tload$() {\n\t\treturn combineLatest([\n\t\t\tStoreLocatorService.all$(),\n\t\t\tStoreLocatorService.filters$(),\n\t\t]);\n\t}\n\n\tonLoad() {\n\t\tconst items = this.items;\n\t\tconst filters = this.filters;\n\t\tObject.keys(filters).forEach(key => {\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\n\t\t});\n\t\tconst initialParams = {};\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\n\t\t\tswitch (key) {\n\t\t\t\tdefault:\n\t\t\t\t\tfilter.filter = (item, value) => {\n\t\t\t\t\t\tswitch (key) {\n\t\t\t\t\t\t\tcase 'country':\n\t\t\t\t\t\t\t\treturn item.country && item.country.id === value;\n\t\t\t\t\t\t\tcase 'category':\n\t\t\t\t\t\t\t\treturn item.category && item.category.id === value;\n\t\t\t\t\t\t\tcase 'search':\n\t\t\t\t\t\t\t\treturn item.name.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\n\t\t\t\t\t\t\t\t\t// item.address.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\n\t\t\t\t\t\t\t\t\titem.city.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\n\t\t\t\t\t\t\t\t\titem.country.name.toLowerCase().indexOf(value.toLowerCase()) !== -1\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t}\n\t\t});\n\t\tthis.filterService = filterService;\n\t\tthis.filters = filterService.filters;\n\t\tconst country = this.filters.country.values.length ? this.filters.country.values[0] : null;\n\t\tconst category = this.filters.category.values.length ? this.filters.category.values[0] : null;\n\t\tconst search = this.filters.search.values.length ? this.filters.search.values[0] : null;\n\t\tthis.form.patch({ country, category, search });\n\t\tfilterService.items$(items).pipe(\n\t\t\ttakeUntil(this.unsubscribe$),\n\t\t).subscribe(filteredItems => {\n\t\t\tthis.filteredItems = filteredItems;\n\t\t\tthis.visibleItems = filteredItems.slice(0, Math.min(12, filteredItems.length));\n\t\t\tthis.pushChanges();\n\t\t\tLocomotiveScrollService.update();\n\t\t\t// console.log('StoreLocatorComponent.filteredItems', filteredItems.length);\n\t\t});\n\t}\n\n\tshowMore(event) {\n\t\tthis.visibleItems = this.filteredItems.slice();\n\t\tthis.pushChanges();\n\t\tLocomotiveScrollService.update();\n\t}\n\n\tsetFilterByKeyAndValue(key, value) {\n\t\tconst filter = this.filters[key];\n\t\tif (filter) {\n\t\t\tif (filter.mode === FilterMode.QUERY) {\n\t\t\t\tfilter.set(value);\n\t\t\t} else {\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\n\t\t\t\t// console.log(filter.options, option);\n\t\t\t\tif (option) {\n\t\t\t\t\tfilter.set(option);\n\t\t\t\t} else {\n\t\t\t\t\tfilter.clear();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonSearch(model) {\n\t\t// console.log('StoreLocatorComponent.onSearch', this.form.value);\n\t\tthis.setFilterByKeyAndValue('country', this.form.value.country);\n\t\tthis.setFilterByKeyAndValue('category', this.form.value.category);\n\t\tthis.setFilterByKeyAndValue('search', this.form.value.search);\n\t\tthis.pushChanges();\n\t}\n\n\tclearFilter(event, filter) {\n\t\tevent.preventDefault();\n\t\tevent.stopImmediatePropagation();\n\t\tfilter.clear();\n\t\tthis.pushChanges();\n\t}\n}\n\nStoreLocatorComponent.meta = {\n\tselector: '[store-locator]',\n};\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class SubmenuDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst items = Array.prototype.slice.call(node.querySelectorAll('[data-picture]'));\r\n\t\tconst target = node.querySelector('[data-target]');\r\n\t\titems.forEach(item => {\r\n\t\t\titem.addEventListener('mouseover', (event) => {\r\n\t\t\t\tconst picture = item.getAttribute('data-picture');\r\n\t\t\t\tgsap.set(target, { opacity: 0 });\r\n\t\t\t\ttarget.onload = () => {\r\n\t\t\t\t\tgsap.to(target, {\r\n\t\t\t\t\t\tduration: 0.5,\r\n\t\t\t\t\t\tdelay: 0.1,\r\n\t\t\t\t\t\topacity: 1,\r\n\t\t\t\t\t\tease: Power4.easeOut,\r\n\t\t\t\t\t\toverwrite: 'all',\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\ttarget.src = picture;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nSubmenuDirective.meta = {\r\n\tselector: '[submenu]'\r\n};\r\n","import { SwiperDirective } from '../../core/swiper/swiper.directive';\r\n\r\nexport class SwiperGalleryDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 'auto',\r\n\t\t\tspaceBetween: 40,\r\n\t\t\tspeed: 600,\r\n\t\t\tcenteredSlides: true,\r\n\t\t\tloop: true,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t\t// console.log('SwiperGalleryDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperGalleryDirective.meta = {\r\n\tselector: '[swiper-gallery]'\r\n};\r\n","import { SwiperDirective } from '../../core/swiper/swiper.directive';\r\n\r\nexport class SwiperHomepageDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1,\r\n\t\t\tspaceBetween: 0,\r\n\t\t\tspeed: 600,\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t\t// console.log('SwiperHomepageDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperHomepageDirective.meta = {\r\n\tselector: '[swiper-homepage]'\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { SwiperDirective } from '../../core/swiper/swiper.directive';\r\n\r\nexport class SwiperNewsPropositionDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1,\r\n\t\t\tspaceBetween: 30,\r\n\t\t\tbreakpoints: {\r\n\t\t\t\t768: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 40\r\n\t\t\t\t},\r\n\t\t\t\t1024: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 50\r\n\t\t\t\t},\r\n\t\t\t\t1440: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 60\r\n\t\t\t\t},\r\n\t\t\t\t1920: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 70\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tspeed: 600,\r\n\t\t\tcenteredSlides: false,\r\n\t\t\tloop: false,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = node.querySelector('.swiper-container');\r\n\t\tthis.init_(target);\r\n\t\t// console.log('SwiperNewsPropositionDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperNewsPropositionDirective.meta = {\r\n\tselector: '[swiper-news-proposition]'\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { SwiperDirective } from '../../core/swiper/swiper.directive';\r\n\r\nexport class SwiperProductsPropositionDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1.5,\r\n\t\t\tspaceBetween: 30,\r\n\t\t\tbreakpoints: {\r\n\t\t\t\t768: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 40\r\n\t\t\t\t},\r\n\t\t\t\t1024: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 50\r\n\t\t\t\t},\r\n\t\t\t\t1440: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 60\r\n\t\t\t\t},\r\n\t\t\t\t1920: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 70\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tspeed: 600,\r\n\t\t\tcenteredSlides: false,\r\n\t\t\tloop: false,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = node.querySelector('.swiper-container');\r\n\t\tthis.init_(target);\r\n\t\t// console.log('SwiperProductsPropositionDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperProductsPropositionDirective.meta = {\r\n\tselector: '[swiper-products-proposition]'\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { SwiperDirective } from '../../core/swiper/swiper.directive';\r\n\r\nexport class SwiperProjectsPropositionDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1.5,\r\n\t\t\tspaceBetween: 30,\r\n\t\t\tbreakpoints: {\r\n\t\t\t\t768: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 40\r\n\t\t\t\t},\r\n\t\t\t\t1024: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 50\r\n\t\t\t\t},\r\n\t\t\t\t1440: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 60\r\n\t\t\t\t},\r\n\t\t\t\t1920: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 70\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tspeed: 600,\r\n\t\t\tcenteredSlides: false,\r\n\t\t\tloop: false,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = node.querySelector('.swiper-container');\r\n\t\tthis.init_(target);\r\n\t\t// console.log('SwiperProjectsPropositionDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperProjectsPropositionDirective.meta = {\r\n\tselector: '[swiper-projects-proposition]'\r\n};\r\n","import { CoreModule, Module } from 'rxcomp';\r\nimport { FormModule } from 'rxcomp-form';\r\nimport { AppComponent } from './app.component';\r\nimport { DropdownItemDirective } from './core/dropdown/dropdown-item.directive';\r\nimport { DropdownDirective } from './core/dropdown/dropdown.directive';\r\nimport { EnvPipe } from './core/env/env.pipe';\r\nimport { FlagPipe } from './core/flag/flag.pipe';\r\nimport { ControlCustomSelectComponent } from './core/forms/control-custom-select.component';\r\nimport { ControlEmailComponent } from './core/forms/control-email.component';\r\nimport { ControlSearchComponent } from './core/forms/control-search.component';\r\nimport { HtmlPipe } from './core/html/html.pipe';\r\nimport { LabelPipe } from './core/label/label.pipe';\r\nimport { LocomotiveScrollDirective } from './core/locomotive-scroll/locomotive-scroll.directive';\r\nimport { ScrollDirective } from './core/locomotive-scroll/scroll.directive';\r\nimport { SlugPipe } from './core/slug/slug.pipe';\r\nimport { SwiperDirective } from './core/swiper/swiper.directive';\r\nimport { ThronComponent } from './core/thron/thron.component';\r\nimport { TitleDirective } from './core/title/title.directive';\r\nimport { AteliersAndStoresComponent } from './pages/ateliers-and-stores/ateliers-and-stores.component';\r\nimport { DesignersComponent } from './pages/designers/designers.component';\r\nimport { HeaderComponent } from './pages/header/header.component';\r\nimport { MapComponent } from './pages/map/map.component';\r\nimport { MenuDirective } from './pages/menu/menu.directive';\r\nimport { NewsComponent } from './pages/news/news.component';\r\nimport { NewsletterPropositionComponent } from './pages/newsletter/newsletter-proposition.component';\r\nimport { ProductsConfigureComponent } from './pages/products-configure/products-configure.component';\r\nimport { ProductsDetailComponent } from './pages/products-detail/products-detail.component';\r\nimport { ProjectsComponent } from './pages/projects/projects.component';\r\nimport { StoreLocatorComponent } from './pages/store-locator/store-locator.component';\r\nimport { SubmenuDirective } from './pages/submenu/submenu.directive';\r\nimport { SwiperGalleryDirective } from './pages/swiper-gallery/swiper-gallery.directive';\r\nimport { SwiperHomepageDirective } from './pages/swiper-homepage/swiper-homepage.directive';\r\nimport { SwiperNewsPropositionDirective } from './pages/swiper-news-proposition/swiper-news-proposition.directive';\r\nimport { SwiperProductsPropositionDirective } from './pages/swiper-products-proposition/swiper-products-proposition.directive';\r\nimport { SwiperProjectsPropositionDirective } from './pages/swiper-projects-proposition/swiper-projects-proposition.directive';\r\n\r\nexport class AppModule extends Module { }\r\n\r\nAppModule.meta = {\r\n\timports: [\r\n\t\tCoreModule,\r\n\t\tFormModule,\r\n\t],\r\n\tdeclarations: [\r\n\t\tAteliersAndStoresComponent,\r\n\t\t// ControlCheckboxComponent,\r\n\t\tControlCustomSelectComponent,\r\n\t\tControlEmailComponent,\r\n\t\t// ControlLinkComponent,\r\n\t\t// ControlNumberComponent,\r\n\t\t// ControlPasswordComponent,\r\n\t\t// ControlsComponent,\r\n\t\t// ControlSelectComponent,\r\n\t\tControlSearchComponent,\r\n\t\t// ControlTextareaComponent,\r\n\t\t// ControlTextComponent,\r\n\t\tDesignersComponent,\r\n\t\t// DisabledDirective,\r\n\t\t// DropDirective,\r\n\t\tDropdownDirective,\r\n\t\tDropdownItemDirective,\r\n\t\t// DropdownItemDirective,\r\n\t\tEnvPipe,\r\n\t\t// ErrorsComponent,\r\n\t\tFlagPipe,\r\n\t\tHeaderComponent,\r\n\t\tHtmlPipe,\r\n\t\t// IdDirective,\r\n\t\tLabelPipe,\r\n\t\t// LanguageComponent,\r\n\t\t// LazyDirective,\r\n\t\tLocomotiveScrollDirective,\r\n\t\tMapComponent,\r\n\t\tMenuDirective,\r\n\t\t// ModalComponent,\r\n\t\t// ModalOutletComponent,\r\n\t\tNewsComponent,\r\n\t\tNewsletterPropositionComponent,\r\n\t\tProductsConfigureComponent,\r\n\t\tProductsDetailComponent,\r\n\t\tProjectsComponent,\r\n\t\tScrollDirective,\r\n\t\tSlugPipe,\r\n\t\tStoreLocatorComponent,\r\n\t\tSubmenuDirective,\r\n\t\t// SvgIconStructure,\r\n\t\tSwiperDirective,\r\n\t\tSwiperHomepageDirective,\r\n\t\tSwiperNewsPropositionDirective,\r\n\t\tSwiperProductsPropositionDirective,\r\n\t\tSwiperProjectsPropositionDirective,\r\n\t\tSwiperGalleryDirective,\r\n\t\tThronComponent,\r\n\t\tTitleDirective,\r\n\t\t// UploadItemComponent,\r\n\t\t// ValueDirective,\r\n\t\t// VirtualStructure\r\n\t],\r\n\tbootstrap: AppComponent,\r\n};\r\n","import { Browser } from 'rxcomp';\r\nimport { AppModule } from './app.module';\r\n\r\nBrowser.bootstrap(AppModule);\r\n"]}