{"version":3,"sources":["src/js/pages/store-locator/store-locator.module.js","../../src/js/common/modal/modal.service.js","../../src/js/common/utils/utils.js","../../src/js/environment.js","../../src/js/environment.static.js","../../src/js/environment.served.js","../../src/js/common/http/http.service.js","../../src/js/common/label/label.pipe.js","../../src/js/common/location/location.service.js","../../src/js/common/language/language.service.js","../../src/js/common/api/api.service.js","../../src/js/common/storage/session-storage.service.js","../../src/js/shared/user/user.service.js","../../src/js/app.component.js","../../src/js/common/dropdown/dropdown.directive.js","../../src/js/common/dropdown/dropdown-item.directive.js","../../src/js/common/env/env.pipe.js","../../src/js/common/flag/flag.pipe.js","../../src/js/common/forms/control.component.js","../../src/js/common/forms/control-checkbox.component.js","../../src/js/common/keyboard/keyboard.service.js","../../src/js/common/forms/control-custom-select.component.js","../../src/js/common/forms/control-email.component.js","../../src/js/common/forms/control-password.component.js","../../src/js/common/forms/control-search.component.js","../../src/js/common/forms/control-text.component.js","../../src/js/common/forms/control-textarea.component.js","../../src/js/common/forms/errors.component.js","../../src/js/common/forms/test.component.js","../../src/js/common/html/html.pipe.js","../../src/js/common/id/id.directive.js","../../src/js/common/label-for/label-for.directive.js","../../src/js/common/locomotive-scroll/locomotive-scroll.service.js","../../src/js/common/locomotive-scroll/locomotive-scroll.directive.js","../../src/js/common/locomotive-scroll/scroll.directive.js","../../src/js/common/modal/modal-outlet.component.js","../../src/js/common/slug/slug.pipe.js","../../src/js/common/swiper/swiper.directive.js","../../src/js/common/thron/thron.component.js","../../src/js/common/title/title.directive.js","../../src/js/common/common.module.js","../../node_modules/@googlemaps/markerclustererplus/src/overlay-view-safe.ts","../../node_modules/@googlemaps/markerclustererplus/src/cluster-icon.ts","../../src/js/partials/map/map.component.js","../../node_modules/@googlemaps/markerclustererplus/src/cluster.ts","../../node_modules/@googlemaps/markerclustererplus/src/markerclusterer.ts","../../src/js/partials/map/map.style.js","../../src/js/partials/swiper-gallery/swiper-gallery.directive.js","../../src/js/partials/swiper-homepage/swiper-homepage.directive.js","../../src/js/partials/swiper-news-proposition/swiper-news-proposition.directive.js","../../src/js/partials/swiper-products-proposition/swiper-products-proposition.directive.js","../../src/js/partials/swiper-projects-proposition/swiper-projects-proposition.directive.js","../../src/js/shared/header/header.component.js","../../src/js/shared/menu/menu.directive.js","../../src/js/shared/newsletter-proposition/newsletter-proposition.component.js","../../src/js/shared/submenu/submenu.directive.js","../../src/js/shared/tree/tree.component.js","../../src/js/common/gtm/gtm.service.js","../../src/js/shared/user/user-forgot.component.js","../../src/js/shared/user/user.component.js","../../src/js/shared/user/user-modal.component.js","../../src/js/shared/user/user-signin.component.js","../../src/js/common/forms/form.service.js","../../src/js/common/forms/required-if.validator.js","../../src/js/shared/user/user-signup.component.js","../../src/js/common/forms/match.validator.js","../../src/js/shared/shared.module.js","../../src/js/common/filter/filter-item.js","../../src/js/common/filter/filter.service.js","../../src/js/pages/store-locator/store-locator.service.js","../../src/js/pages/store-locator/store-locator.component.js","../../src/js/pages/store-locator/store-locator.module.js"],"names":["g","f","exports","module","require","define","amd","globalThis","self","rxcomp","form","rxjs","operators","this","rxcompForm","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_defineProperty","obj","value","_inheritsLoose","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_assertThisInitialized","ReferenceError","ModalEvent","data","ModalResolveEvent","_ModalEvent","apply","arguments","ModalRejectEvent","_ModalEvent2","ModalService","open$","modal","_this","getTemplate$","src","pipe","map","template","node","getNode","tap","modal$","next","hasModal","switchMap","events$","_","load$","url","from","fetch","then","response","text","div","document","createElement","innerHTML","firstElementChild","reject","resolve","Subject","Utils","merge","source","keys","forEach","Array","isArray","NODE","BASE_HREF","get","URLSearchParams","window","location","search","querySelector","getAttribute","HEROKU","host","indexOf","STATIC","port","DEVELOPMENT","split","ENV","PRODUCTION","Environment","_proto","options","assign","getAbsoluteUrl","path","params","origin","replace","getPath","isLocal","href","set","console","log","githubDocs","defaultOptions","flags","production","heroku","slug","languages","defaultLanguage","labels","select","browse","cancel","error_email","error_match","error_required","loading","remove","required","select_file","update","upload","drag_and_drop_images","environmentOptions","api","assets","workers","image","prefetch","configureProduct","reservedArea","userModal","googleMaps","apiKey","environment","HttpService","http$","method","format","userPass","response_","headers","Accept","Content-Type","body","JSON","stringify","undefined","credentials","btoa","Headers","typedResponse","contentType","json","ok","Promise","error","warn","catchError","throwError","getError","get$","query","delete$","post$","put$","patch$","object","status","statusCode","statusMessage","statusText","LabelPipe","_Pipe","transform","labels_","getKeys","_len","_key","x","join","setLabels","LABELS","Pipe","meta","name","LocationService","has","keyOrValue","pushParams","history","pushState","title","toString","to","replaceState","pathname","state","deserialize","encoded","decode","serialize","encode","decoded","atob","parse","LanguageService","getDefaultLanguages","alternates","getDefaultLanguage","lang","setLanguage","language","selectedLanguage","setLanguage$","html","labelsMatch","exec","Function","call","bhereMatch","bhere","activeLanguage","toggleLanguages","showLanguages","pushChanges","_this2","find","ApiService","_HttpService","SessionStorageService","delete","isSessionStorageSupported","sessionStorage","removeItem","exist","e","cache","push","setItem","supported","UserViews","SIGN_IN","SIGN_UP","FORGOTTEN","User","firstName","substr","toUpperCase","lastName","UserService","setUser","user","user$_","data$","forgot$","payload","me$","sessionUser","of","mapUser","signin$","signout$","_this3","signup$","_this4","sessionStorage$","mapUsers","users","getValue","BehaviorSubject","AppComponent","_Component","onInit","getContext","classList","onLogin","view","takeUntil","unsubscribe$","subscribe","event","onLogout","first","Component","selector","DROPDOWN_ID","DropdownDirective","_Directive","trigger","opened","onClick","bind","onDocumentClick","openDropdown","closeDropdown","addListeners","dropdown$","id","add","contains","addDocumentListeners","dropped","removeDocumentListeners","addEventListener","removeListeners","removeEventListener","onDestroy","nextId","dropdown","id_","Directive","inputs","outputs","DropdownItemDirective","EnvPipe","keypath","env","k","shift","FlagPipe","ControlComponent","onChanges","control","ControlCheckboxComponent","_ControlComponent","label","KeyboardService","keydown$","keydown$_","fromEvent","shareReplay","keyup$","keyup$_","keys$","keys$_","type","startWith","key$","key$_","regexp","filter","match","typing$","typing$_","typing","clearTimeout","setTimeout","ControlCustomSelectComponent","dropdownId","word","scrollToWord","items","index","toLowerCase","item","children","scrollTo","offsetTop","setOption","isMultiple","splice","slice","TypeError","_readOnlyError","change","hasOption","getLabel","v","onDropped","$event","touched","multiple","ControlEmailComponent","ControlPasswordComponent","ControlSearchComponent","disabled","ControlTextComponent","ControlTextareaComponent","ErrorsComponent","TestComponent","onTest","test","onReset","reset","HtmlPipe","m","n","String","fromCharCode","parseInt","unescapes","rx","RegExp","IdDirective","setAttribute","LabelForDirective","labelFor","LocomotiveScrollService","scroll","scroll$","init","useKeyboard","smoothMobile","inertia","smooth","lerp","getDirection","getSpeed","initClass","scrollingClass","draggingClass","smoothClass","scrollbarContainer","scrollbarClass","multiplier","firefoxMultiplier","touchMultiplier","scrollFromAnywhere","gestureDirection","reloadOnContextChange","resetNativeScroll","el","useLocomotiveScroll","instance","LocomotiveScroll","innerWidth","isMacLike","navigator","platform","isIOS","isMacOs","isSafari","vendor","userAgent","init$","delay","on","direction","y","speed","previousY","scrollTop","stop","start","scrollIntoView","ReplaySubject","LocomotiveScrollDirective","ScrollDirective","scrollSpeed","parseFloat","wh","innerHeight","wh2","rect","getBoundingClientRect","currentY","gsap","getProperty","top","bottom","ModalOutletComponent","modalNode","modal_","removeChild","appendChild","compile","SlugPipe","SwiperDirective","slidesPerView","spaceBetween","centeredSlides","autoplay","keyboardControl","mousewheelControl","pagination","clickable","keyboard","enabled","onlyInViewport","init_","swiperInitOrUpdate_","removeListeners_","swiperDestroy_","onBeforePrint","slideToIndex","swiper","slideTo","hasPrev","activeIndex","slides","hasNext","slidePrev","slideNext","opacity","slideChange","addListeners_","callback","swiperDirectiveInit","duration","ease","Power2","easeOut","element","scope","Swiper","_opening","destroy","matchMedia","matches","ID","ThronComponent","args","concat","THRON","THRONContentExperience","THRONPlayer","media","thron","splitted","controls","hasAttribute","loop","player","muted","displayLinked","noSkin","onReady","onCanPlay","onPlaying","onPlay","onPause","onComplete","video","mediaContainer","ready","canPlay","off","qualities","qualityLevels","highestQuality","currentQuality","playing","play","pause","complete","playVideo","pauseVideo","toggle","playing_","TitleDirective","title_","removeAttribute","factories","pipes","CommonModule","_Module","Module","imports","declarations","extendStatics","d","b","hasOwnProperty","__extends","__","__assign","t","s","OverlayViewSafe","type1","type2","property","extend","google","maps","OverlayView","toCssText","styles","reduce","acc","coercePixels","pixels","GOOGLE_MAPS","ClusterIcon","_super","cluster_","styles_","center_","div_","sums_","visible_","style","setMap","getMap","onAdd","cMouseDownInCluster","cDraggingMapByCluster","mc","getMarkerClusterer","_a","version","major","minor","gmVersion","show","getPanes","overlayMouseTarget","boundsChangedListener_","addListener","addDomListener","stopPropagation","getZoomOnClick","mz_1","getMaxZoom","theBounds_1","getBounds","fitBounds","getZoom","setZoom","cancelBubble","onRemove","parentNode","hide","removeListener","clearInstanceListeners","draw","pos","getPosFromLatLng_","left","display","className","className_","cssText","createCss_","getImageElementHtml","getLabelDivHtml","getTitle","ariaLabelFn","position","anchorText_","color","textColor","font-size","textSize","font-family","fontFamily","font-weight","fontWeight","font-style","fontStyle","text-decoration","textDecoration","text-align","width","line-height","textLineHeight","bp","backgroundPosition","spriteH","spriteV","dimensions","getEnableRetinaIcons","height","clip","overrideDimensionsDynamicIcon","useStyle","sums","Math","max","min","anchorText","anchorIcon_","anchorIcon","floor","getClusterClass","setCenter","center","z-index","getZIndex","cursor","-webkit-user-select","-khtml-user-select","-moz-user-select","-o-user-select","user-select","latlng","getProjection","fromLatLngToDivPixel","Cluster","markerClusterer_","map_","minClusterSize_","getMinimumClusterSize","averageCenter_","getAverageCenter","markers_","bounds_","clusterIcon_","getStyles","getSize","getMarkers","getCenter","bounds","LatLngBounds","markers","getPosition","addMarker","marker","isMarkerAlreadyAdded_","l","lat","lng","LatLng","calculateBounds_","isAdded","mCount","mz","isMarkerInClusterBounds","getExtendedBounds","updateIcon","numStyles","getCalculator","getOption","prop","def","MarkerClusterer","clusters_","listeners_","activeMap_","ready_","zIndex_","zIndex","Number","Marker","MAX_ZINDEX","gridSize_","gridSize","minimumClusterSize","maxZoom_","maxZoom","zoomOnClick_","ignoreHidden_","enableRetinaIcons_","imagePath_","imagePath","IMAGE_PATH","imageExtension_","imageExtension","IMAGE_EXTENSION","imageSizes_","imageSizes","IMAGE_SIZES","calculator_","calculator","CALCULATOR","batchSize_","batchSize","BATCH_SIZE","batchSizeIE_","batchSizeIE","BATCH_SIZE_IE","clusterClass_","clusterClass","setupStyles_","addMarkers","repaint","prevZoom_","minZoom","mapTypes","getMapTypeId","zoom","resetViewport_","redraw_","size","withDefaultStyle","fitMapToMarkers","padding","getVisible","getIgnoreHidden","getGridSize","setGridSize","setMinimumClusterSize","setMaxZoom","setZIndex","setStyles","setTitle","setZoomOnClick","zoomOnClick","setAverageCenter","averageCenter","setIgnoreHidden","ignoreHidden","setEnableRetinaIcons","enableRetinaIcons","getImageExtension","setImageExtension","getImagePath","setImagePath","getImageSizes","setImageSizes","setCalculator","getBatchSizeIE","setBatchSizeIE","setClusterClass","getTotalMarkers","getClusters","getTotalClusters","nodraw","pushMarkerTo_","getDraggable","removeMarker","removed","removeMarker_","removeMarkers","r","clearMarkers","oldClusters","projection","tr","getNorthEast","bl","getSouthWest","trPix","blPix","ne","fromDivPixelToLatLng","sw","createClusters_","distanceBetweenPoints_","p1","p2","dLat","PI","dLon","a","sin","cos","atan2","sqrt","isMarkerInBounds_","addToClosestCluster_","distance","clusterToAddTo","cluster","iFirst","mapBounds","timerRefStatic","iLast","count","dv","overrides","MAP_STYLE","featureType","elementType","stylers","visibility","saturation","lightness","MapComponent","initMap","onGoogleMapsLoaded","script","getElementsByTagName","documentElement","mapOptions","latitude","longitude","scrollwheel","zoomControlOptions","ZoomControlStyle","DEFAULT","scaleControl","zoomControl","mapTypeControl","streetViewControl","rotateControl","fullscreenControl","mapElement","Map","getItalyBounds","calculateDistance","lat1","lon1","lat2","lon2","unit","radlat1","radlat2","theta","radtheta","dist","acos","markerCluster","content","address","city","country","phone","fax","email","markerImage","MarkerImage","Size","icon","setMarkerWindow","sizes","getGeolocation","busyLocation","geolocation","getCurrentPosition","coords","geocoder","Geocoder","geocode","results","filteredInfoCity","address_component","types","includes","model","formatted_address","address_components","searchCountry","short_name","setInfoWindow","searchPosition","finally","ZOOM_LEVEL","findNearStores","visible","cod_stato","userCountry","MAX_DISTANCE","sort","importante","visibleStores","$timeout","panTo","markerWindow","InfoWindow","pixelOffset","setPosition","setContent","open","closeMarkerWindow","close","getWorldBounds","SwiperGalleryDirective","_SwiperDirective","loopAdditionalSlides","SwiperHomepageDirective","SwiperNewsPropositionDirective","breakpoints","768","1024","1440","1920","SwiperProductsPropositionDirective","SwiperProjectsPropositionDirective","HeaderMode","HeaderComponent","pictogram","scrolled","onToggleMenu","onToggleSearch","onToggleCart","direction_","scrolled_","MENUS","MenuDirective","submenus","menu","container","onOver","onLeave","preventDefault","keepBackground","NewsletterPropositionComponent","FormGroup","FormControl","Validators","RequiredValidator","changes$","onNewsletter","SubmenuDirective","querySelectorAll","picture","onload","Power4","overwrite","TreeComponent","hasItems","tree","active","onOpen","GtmService","dataLayer","push_","UserForgotComponent","success","EmailValidator","checkRequest","antiforgery","checkField","patch","onSubmit","valid","submitted","form_name","forgot","onSignIn","viewSignIn","onSignUp","viewSignUp","UserComponent","views","setView","offset","onViewForgot","onViewSignIn","onViewSignUp","navTo","onForgot","UserModalComponent","_UserComponent","parentInstance","onClose","UserSigninComponent","password","signIn","viewForgot","FormService","toSelectOptions","unshift","RequiredIfValidator","fieldName","formGroup","FormValidator","field","requiredIf","UserSignupComponent","company","occupation","passwordConfirm","privacy","newsletter","newsletterLanguage","signUp","SharedModule","FilterMode","FilterItem","change$","mode","placeholder","values","clear","FilterService","initialParams","filters","getParamsCount","c","locationParams","any","items$","changes","filterItems","updateFilterStates","skipFilter","filteredItems","option","StoreLocatorService","all$","rank","filters$","StoreLocatorComponent","visibleItems","category","setFilterByKeyAndValue","onLoad","combineLatest","filterService","showMore","onSearch","clearFilter","stopImmediatePropagation","AppModule","CoreModule","FormModule","bootstrap","Browser"],"mappings":"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","file":"docs\\js\\store-locator.min.js","sourcesContent":[null,"import { from, Subject } from 'rxjs';\r\nimport { map, switchMap, tap } from 'rxjs/operators';\r\n\r\nexport class ModalEvent {\r\n\r\n\tconstructor(data) {\r\n\t\tthis.data = data;\r\n\t}\r\n\r\n}\r\n\r\nexport class ModalResolveEvent extends ModalEvent { }\r\nexport class ModalRejectEvent extends ModalEvent { }\r\n\r\nexport class ModalService {\r\n\r\n\tstatic hasModal = false;\r\n\r\n\tstatic open$(modal) {\r\n\t\treturn this.getTemplate$(modal.src).pipe(\r\n\t\t\tmap(template => {\r\n\t\t\t\treturn { node: this.getNode(template), data: modal.data, modal: modal };\r\n\t\t\t}),\r\n\t\t\ttap(node => {\r\n\t\t\t\tthis.modal$.next(node);\r\n\t\t\t\tthis.hasModal = true;\r\n\t\t\t}),\r\n\t\t\tswitchMap(node => this.events$),\r\n\t\t\ttap(_ => this.hasModal = false)\r\n\t\t)\r\n\t}\r\n\r\n\tstatic load$(modal) {\r\n\r\n\t}\r\n\r\n\tstatic getTemplate$(url) {\r\n\t\treturn from(fetch(url).then(response => {\r\n\t\t\treturn response.text();\r\n\t\t}));\r\n\t}\r\n\r\n\tstatic getNode(template) {\r\n\t\tconst div = document.createElement('div');\r\n\t\tdiv.innerHTML = template;\r\n\t\tconst node = div.firstElementChild;\r\n\t\treturn node;\r\n\t}\r\n\r\n\tstatic reject(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalRejectEvent(data));\r\n\t}\r\n\r\n\tstatic resolve(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalResolveEvent(data));\r\n\t}\r\n\r\n}\r\n\r\nModalService.modal$ = new Subject();\r\nModalService.events$ = new Subject();\r\n","\r\nexport class Utils {\r\n\r\n\tstatic merge(target, source) {\r\n\t\tif (typeof source === 'object') {\r\n\t\t\tObject.keys(source).forEach(key => {\r\n\t\t\t\tconst value = source[key];\r\n\t\t\t\tif (typeof value === 'object' && !Array.isArray(value)) {\r\n\t\t\t\t\ttarget[key] = this.merge(target[key], value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttarget[key] = value;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn target;\r\n\t}\r\n\r\n}\r\n","import { Utils } from './common/utils/utils';\r\nimport { environmentServed } from './environment.served';\r\nimport { environmentStatic } from './environment.static';\r\n\r\nexport const NODE = (typeof module !== 'undefined' && module.exports);\r\nexport const PARAMS = NODE ? { get: () => { } } : new URLSearchParams(window.location.search);\r\nexport const DEBUG = false || (PARAMS.get('debug') != null);\r\nexport const BASE_HREF = NODE ? null : document.querySelector('base').getAttribute('href');\r\nexport const HEROKU = NODE ? false : (window && window.location.host.indexOf('herokuapp') !== -1);\r\nexport const STATIC = NODE ? false : (HEROKU || (window && (window.location.port === '48481' || window.location.port === '5000' || window.location.port === '6443' || window.location.host === 'actarian.github.io')));\r\nexport const DEVELOPMENT = NODE ? false : (window && ['localhost', '127.0.0.1', '0.0.0.0'].indexOf(window.location.host.split(':')[0]) !== -1);\r\nexport const PRODUCTION = !DEVELOPMENT;\r\nexport const ENV = {\r\n\tSTATIC,\r\n\tDEVELOPMENT,\r\n\tPRODUCTION\r\n};\r\n\r\nexport class Environment {\r\n\r\n\tget STATIC() {\r\n\t\treturn ENV.STATIC;\r\n\t}\r\n\tset STATIC(STATIC) {\r\n\t\tENV.STATIC = (STATIC === true || STATIC === 'true');\r\n\t\tconsole.log('Environment.STATIC.set', ENV.STATIC);\r\n\t}\r\n\r\n\tget href() {\r\n\t\tif (HEROKU) {\r\n\t\t\treturn this.githubDocs;\r\n\t\t} else {\r\n\t\t\treturn BASE_HREF;\r\n\t\t}\r\n\t}\r\n\r\n\tgetAbsoluteUrl(path, params) {\r\n\t\tlet url = `${window.location.origin}${path}`;\r\n\t\t// let url = `${window.location.protocol}//${window.location.host}${path}`;\r\n\t\tObject.keys(params).forEach(key => {\r\n\t\t\turl = url.replace(`$${key}`, params[key]);\r\n\t\t});\r\n\t\treturn url;\r\n\t}\r\n\r\n\tgetPath(path) {\r\n\t\treturn this.isLocal(path) ? (this.href + path) : path;\r\n\t}\r\n\r\n\tisLocal(path) {\r\n\t\treturn path.indexOf('://') === -1;\r\n\t}\r\n\r\n\tconstructor(options) {\r\n\t\tif (options) {\r\n\t\t\tObject.assign(this, options);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst defaultOptions = {\r\n\tport: 5000,\r\n\tflags: {\r\n\t\tproduction: false,\r\n\t\theroku: HEROKU,\r\n\t},\r\n\tslug: {},\r\n\tlanguages: ['it', 'en'],\r\n\tdefaultLanguage: 'it',\r\n\tlabels: {\r\n\t\tselect: 'Seleziona',\r\n\t\tbrowse: 'Sfoglia',\r\n\t\tcancel: 'Annulla',\r\n\t\terror_email: 'Email non valida',\r\n\t\terror_match: 'I campi non corrispondono',\r\n\t\terror_required: 'Campo obbligatorio',\r\n\t\tloading: 'caricamento',\r\n\t\tremove: 'Rimuovi',\r\n\t\trequired: 'Richiesto',\r\n\t\tselect_file: 'Seleziona una file...',\r\n\t\tupdate: 'Aggiorna',\r\n\t\tupload: 'Carica',\r\n\t\tdrag_and_drop_images: 'Drag And Drop your images here',\r\n\t}\r\n};\r\n\r\nconst environmentOptions = window.STATIC ? environmentStatic : environmentServed;\r\n\r\nlet options = Object.assign(defaultOptions, environmentOptions);\r\noptions = Utils.merge(options, window.environment);\r\n\r\nexport const environment = new Environment(options);\r\n\r\nconsole.log('environment', environment);\r\n","\r\nexport const environmentStatic = {\r\n\tflags: {\r\n\t\tproduction: false,\r\n\t},\r\n\tapi: '/giorgetti/api',\r\n\tassets: '/giorgetti/',\r\n\tworkers: {\r\n\t\timage: './js/workers/image.service.worker.js',\r\n\t\tprefetch: './js/workers/prefetch.service.worker.js',\r\n\t},\r\n\tgithubDocs: 'https://raw.githubusercontent.com/actarian/giorgetti/main/docs/',\r\n\tslug: {\r\n\t\tconfigureProduct: `/giorgetti/products-configure.html`,\r\n\t\treservedArea: `/giorgetti/reserved-area.html`,\r\n\t},\r\n\ttemplate: {\r\n\t\tmodal: {\r\n\t\t\tuserModal: '/giorgetti/user-modal.html',\r\n\t\t}\r\n\t},\r\n\tgoogleMaps: {\r\n\t\tapiKey: 'AIzaSyAIsa4g8z-HPPwohsf8jzVTbKw-DiI8k5w',\r\n\t}\r\n};\r\n","\r\nexport const environmentServed = {\r\n\tflags: {\r\n\t\tproduction: true,\r\n\t},\r\n\tapi: '/api',\r\n\tassets: '/Client/docs/',\r\n\tworkers: {\r\n\t\timage: '/Client/docs/js/workers/image.service.worker.js',\r\n\t\tprefetch: '/Client/docs/js/workers/prefetch.service.worker.js',\r\n\t},\r\n\tgithubDocs: 'https://raw.githubusercontent.com/actarian/giorgetti/main/docs/',\r\n\tslug: {\r\n\t\tconfigureProduct: `/Client/docs/products-configure.html`,\r\n\t\treservedArea: `/Client/docs/reserved-area.html`,\r\n\t},\r\n\ttemplate: {\r\n\t\tmodal: {\r\n\t\t\tuserModal: '/template/common/user-modal.cshtml',\r\n\t\t}\r\n\t},\r\n\tgoogleMaps: {\r\n\t\tapiKey: 'AIzaSyDvGw6iAoKdRv8mmaC9GeT-LWLPQtA8p60',\r\n\t}\r\n};\r\n","import { from, throwError } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\n\r\nexport class HttpResponse {\r\n\r\n\tget static() {\r\n\t\treturn this.url.indexOf('.json') === this.url.length - 5;\r\n\t}\r\n\r\n\tconstructor(response) {\r\n\t\tthis.data = null;\r\n\t\tif (response) {\r\n\t\t\tthis.url = response.url;\r\n\t\t\tthis.status = response.status;\r\n\t\t\tthis.statusText = response.statusText;\r\n\t\t\tthis.ok = response.ok;\r\n\t\t\tthis.redirected = response.redirected;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class HttpService {\r\n\r\n\tstatic http$(method, url, data, format = 'json', userPass = null) {\r\n\t\tconst methods = ['POST', 'PUT', 'PATCH'];\r\n\t\tlet response_ = null;\r\n\t\t// url = this.getUrl(url, format);\r\n\t\tconst options = {\r\n\t\t\tmethod: method,\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: methods.indexOf(method) !== -1 ? JSON.stringify(data) : undefined\r\n\t\t}\r\n\t\tif (userPass) {\r\n\t\t\t// options.mode = 'no-cors';\r\n\t\t\toptions.credentials = 'include';\r\n\t\t\tuserPass = window.btoa(userPass);\r\n\t\t\toptions.headers['Authorization'] = `Basic ${userPass}`;\r\n\t\t}\r\n\t\toptions.headers = new Headers(options.headers);\r\n\t\treturn from(fetch(url, options).then((response) => {\r\n\t\t\tresponse_ = response;\r\n\t\t\t// console.log(response);\r\n\t\t\ttry {\r\n\t\t\t\tconst contentType = response.headers.get('content-type');\r\n\t\t\t\tlet typedResponse;\r\n\t\t\t\tif (contentType && contentType.indexOf('application/json') !== -1) {\r\n\t\t\t\t\ttypedResponse = response.json();\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttypedResponse = response.text();\r\n\t\t\t\t}\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\treturn typedResponse;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn typedResponse.then(data => {\r\n\t\t\t\t\t\treturn Promise.reject(data);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\tconsole.warn('HttpService.http$', 'Cannot parse response');\r\n\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.reject(error);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})).pipe(\r\n\t\t\tcatchError(error => {\r\n\t\t\t\treturn throwError(this.getError(error, response_));\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\t/*\r\n\t// !!! todo mapping response.data\r\n\tstatic http$(method, url, data, format = 'json') {\r\n\t\tconst methods = ['POST', 'PUT', 'PATCH'];\r\n\t\tconst body = (data && methods.indexOf(method) !== -1) ? JSON.stringify(data) : undefined;\r\n\t\tconst queryString = (data && methods.indexOf(method) !== -1) ? Object.keys(data).map(function(key) {\r\n\t\t\treturn key + '=' + encodeURI(data[key]);\r\n\t\t}).join('&') : undefined;\r\n\t\tif (queryString) {\r\n\t\t\turl = `${url}?${queryString}`;\r\n\t\t}\r\n\t\tlet response_ = null;\r\n\t\treturn from(fetch(url, {\r\n\t\t\tmethod: method,\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: body,\r\n\t\t}).then((response) => {\r\n\t\t\tresponse_ = new HttpResponse(response);\r\n\t\t\ttry {\r\n\t\t\t\tconst contentType = response.headers.get('content-type');\r\n\t\t\t\tlet typedResponse;\r\n\t\t\t\tif (contentType && format === 'json' && contentType.indexOf('application/json') !== -1) {\r\n\t\t\t\t\ttypedResponse = response.json();\r\n\t\t\t\t} else if (format === 'blob') {\r\n\t\t\t\t\ttypedResponse = response.blob();\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttypedResponse = response.text();\r\n\t\t\t\t}\r\n\t\t\t\treturn typedResponse.then(data => {\r\n\t\t\t\t\tresponse_.data = data;\r\n\t\t\t\t\tif (response.ok) {\r\n\t\t\t\t\t\treturn Promise.resolve(response_);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn Promise.reject(response_);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} catch(error) {\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\tconsole.warn('HttpService.http$', 'Cannot parse response');\r\n\t\t\t\t\treturn Promise.resolve(response_);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.reject(this.getError(error, response_));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})).pipe(\r\n\t\t\tcatchError(error => {\r\n\t\t\t\treturn throwError(this.getError(error, response_));\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\t*/\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\tconst query = this.query(data);\r\n\t\treturn this.http$('GET', `${url}${query}`, undefined, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn this.http$('DELETE', url);\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn this.http$('POST', url, data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn this.http$('PUT', url, data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn this.http$('PATCH', url, data);\r\n\t}\r\n\r\n\tstatic query(data) {\r\n\t\treturn ''; // todo\r\n\t}\r\n\r\n\tstatic getError(object, response) {\r\n\t\tlet error = typeof object === 'object' ? object : {};\r\n\t\tif (!error.status) {\r\n\t\t\terror.status = response ? response.status : 0;\r\n\t\t}\r\n\t\tif (!error.statusCode) {\r\n\t\t\terror.statusCode = response ? response.status : 0;\r\n\t\t}\r\n\t\tif (!error.statusMessage) {\r\n\t\t\terror.statusMessage = response ? response.statusText : object;\r\n\t\t}\r\n\t\t// console.log('HttpService.getError', error, object);\r\n\t\treturn error;\r\n\t}\r\n\r\n}\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\nimport { Utils } from '../utils/utils';\r\n\r\nexport class LabelPipe extends Pipe {\r\n\r\n\tstatic transform(key) {\r\n\t\tconst labels = LabelPipe.labels_;\r\n\t\treturn labels[key] || key; // `#${key}#`;\r\n\t}\r\n\r\n\tstatic getKeys(...keys) {\r\n\t\treturn LabelPipe.transform(keys.map(x => x.replace('-', '_')).join('_'));\r\n\t}\r\n\r\n\tstatic setLabels() {\r\n\t\tconst LABELS = Utils.merge({\r\n\t\t\tselect: 'Seleziona',\r\n\t\t\tbrowse: 'Sfoglia',\r\n\t\t\tcancel: 'Annulla',\r\n\t\t\terror_email: 'Email non valida',\r\n\t\t\terror_match: 'I campi non corrispondono',\r\n\t\t\terror_required: 'Campo obbligatorio',\r\n\t\t\tloading: 'caricamento',\r\n\t\t\tremove: 'Rimuovi',\r\n\t\t\trequired: 'Richiesto',\r\n\t\t\tselect_file: 'Seleziona una file...',\r\n\t\t\tupdate: 'Aggiorna',\r\n\t\t\tupload: 'Carica',\r\n\t\t\tdrag_and_drop_images: 'Drag And Drop your images here',\r\n\t\t}, environment.labels);\r\n\t\tthis.labels_ = LABELS;\r\n\t}\r\n}\r\n\r\nLabelPipe.setLabels();\r\n\r\nLabelPipe.meta = {\r\n\tname: 'label',\r\n};\r\n","export class LocationService {\r\n\r\n\tstatic has(key) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\t// console.log('LocationService.has', params);\r\n\t\treturn params.has(key);\r\n\t}\r\n\r\n\tstatic get(key) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\t// console.log('LocationService.get', params);\r\n\t\treturn params.get(key);\r\n\t}\r\n\r\n\tstatic set(keyOrValue, value) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams.set(keyOrValue, value);\r\n\t\t} else {\r\n\t\t\tparams.set(keyOrValue, '');\r\n\t\t}\r\n\t\tthis.pushParams(params);\r\n\t\t// console.log('LocationService.set', params, keyOrValue, value);\r\n\t}\r\n\r\n\tstatic pushParams(params) {\r\n\t\tif (window.history && window.history.pushState) {\r\n\t\t\tconst title = document.title;\r\n\t\t\tconst url = `${window.location.href.split('?')[0]}?${params.toString()}`;\r\n\t\t\twindow.history.pushState(params.toString(), title, url);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic replace(from, to) {\r\n\t\tconst history = window.history;\r\n\t\tif (history && history.replaceState) {\r\n\t\t\tconst location = window.location;\r\n\t\t\tconst title = document.title;\r\n\t\t\tif (location.pathname === '/') {\r\n\t\t\t\tconst url = location.origin + to + location.search;\r\n\t\t\t\thistory.replaceState(history.state, title, url);\r\n\t\t\t} else if (location.href.indexOf(from) !== -1) {\r\n\t\t\t\tconst url = location.href.replace(from, to);\r\n\t\t\t\thistory.replaceState(history.state, title, url);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic deserialize(key) {\r\n\t\tconst encoded = this.get('params');\r\n\t\treturn this.decode(key, encoded);\r\n\t}\r\n\r\n\tstatic serialize(keyOrValue, value) {\r\n\t\tconst params = this.deserialize();\r\n\t\tconst encoded = this.encode(keyOrValue, value, params);\r\n\t\tthis.set('params', encoded);\r\n\t}\r\n\r\n\tstatic decode(key, encoded) {\r\n\t\tlet decoded = null;\r\n\t\tif (encoded) {\r\n\t\t\tconst json = window.atob(encoded);\r\n\t\t\tdecoded = JSON.parse(json);\r\n\t\t}\r\n\t\tif (key && decoded) {\r\n\t\t\tdecoded = decoded[key];\r\n\t\t}\r\n\t\treturn decoded || null;\r\n\t}\r\n\r\n\tstatic encode(keyOrValue, value, params) {\r\n\t\tparams = params || {};\r\n\t\tlet encoded = null;\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams[keyOrValue] = value;\r\n\t\t} else {\r\n\t\t\tparams = keyOrValue;\r\n\t\t}\r\n\t\tconst json = JSON.stringify(params);\r\n\t\tencoded = window.btoa(json);\r\n\t\treturn encoded;\r\n\t}\r\n\r\n}\r\n","import { from } from 'rxjs';\r\nimport { tap } from 'rxjs/operators';\r\nimport { environment } from '../../environment';\r\nimport { LabelPipe } from '../label/label.pipe';\r\nimport { LocationService } from '../location/location.service';\r\nimport { Utils } from '../utils/utils';\r\n\r\nexport class LanguageService {\r\n\r\n\tstatic languages = this.getDefaultLanguages();\r\n\tstatic defaultLanguage = this.getDefaultLanguage();\r\n\tstatic selectedLanguage = this.defaultLanguage;\r\n\r\n\tstatic get hasLanguages() {\r\n\t\treturn this.languages.length > 1;\r\n\t}\r\n\r\n\tstatic get activeLanguage() {\r\n\t\treturn this.languages.find(language => language.lang === this.selectedLanguage);\r\n\t}\r\n\r\n\tstatic getDefaultLanguages() {\r\n\t\treturn environment.alternates || [];\r\n\t}\r\n\r\n\tstatic getDefaultLanguage() {\r\n\t\treturn environment.defaultLanguage || (this.languages ? this.languages[0].lang : null);\r\n\t}\r\n\r\n\tstatic setLanguage(language) {\r\n\t\tthis.selectedLanguage = language.lang;\r\n\t}\r\n\r\n\tstatic setLanguage$(language) {\r\n\t\treturn from(fetch(language.href).then(response => {\r\n\t\t\treturn response.text();\r\n\t\t})).pipe(\r\n\t\t\ttap(html => {\r\n\t\t\t\t// console.log('html', html);\r\n\t\t\t\tconst labelsMatch = /(window\\.labels\\s*=\\s*\\n*\\s*\\{((\\{.+?\\})|.)+?\\})/gms.exec(html);\r\n\t\t\t\tif (labelsMatch) {\r\n\t\t\t\t\t// console.log('labels', labelsMatch[0]);\r\n\t\t\t\t\tnew Function(labelsMatch[0]).call(window);\r\n\t\t\t\t\tLabelPipe.setLabels();\r\n\t\t\t\t}\r\n\t\t\t\tconst bhereMatch = /(window\\.bhere\\s*=\\s*\\n*\\s*\\{((\\{.+?\\})|.)+?\\})/gms.exec(html);\r\n\t\t\t\tif (bhereMatch) {\r\n\t\t\t\t\t// console.log('bhere', bhereMatch[0]);\r\n\t\t\t\t\tconst data = {};\r\n\t\t\t\t\tnew Function(bhereMatch[0].replace('window', 'this')).call(data);\r\n\t\t\t\t\tif (data.bhere) {\r\n\t\t\t\t\t\tUtils.merge(environment, data.bhere);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tLocationService.replace(this.activeLanguage.href, language.href);\r\n\t\t\t\t// console.log(window.labels);\r\n\t\t\t\tthis.selectedLanguage = language.lang;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic toggleLanguages() {\r\n\t\tthis.showLanguages = !this.showLanguages;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n}\r\n","import { environment } from '../../environment';\r\nimport { HttpService } from '../http/http.service';\r\nimport { LanguageService } from '../language/language.service';\r\n\r\nexport class ApiService extends HttpService {\r\n\r\n\tstatic currentLanguage = LanguageService.activeLanguage;\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\treturn super.get$(`${environment.api}${url}`, data, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn super.delete$(`${environment.api}${url}`);\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn super.post$(`${environment.api}${url}`, data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn super.put$(`${environment.api}${url}`, data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn super.patch$(`${environment.api}${url}`, data);\r\n\t}\r\n}\r\n","export class SessionStorageService {\r\n\r\n\tstatic delete(name) {\r\n\t\tif (this.isSessionStorageSupported()) {\r\n\t\t\twindow.sessionStorage.removeItem(name);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic exist(name) {\r\n\t\tif (this.isSessionStorageSupported()) {\r\n\t\t\treturn window.sessionStorage[name] !== undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic get(name) {\r\n\t\tlet value = null;\r\n\t\tif (this.isSessionStorageSupported() && window.sessionStorage[name] !== undefined) {\r\n\t\t\ttry {\r\n\t\t\t\tvalue = JSON.parse(window.sessionStorage[name]);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('SessionStorageService.get.error parsing', name, e);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tstatic set(name, value) {\r\n\t\tif (this.isSessionStorageSupported()) {\r\n\t\t\ttry {\r\n\t\t\t\tconst cache = [];\r\n\t\t\t\tconst json = JSON.stringify(value, function(key, value) {\r\n\t\t\t\t\tif (typeof value === 'object' && value !== null) {\r\n\t\t\t\t\t\tif (cache.indexOf(value) !== -1) {\r\n\t\t\t\t\t\t\t// Circular reference found, discard key\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcache.push(value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t});\r\n\t\t\t\twindow.sessionStorage.setItem(name, json);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('SessionStorageService.set.error serializing', name, value, e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic isSessionStorageSupported() {\r\n\t\tif (this.supported) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tlet supported = false;\r\n\t\ttry {\r\n\t\t\tsupported = 'sessionStorage' in window && window.sessionStorage !== null;\r\n\t\t\tif (supported) {\r\n\t\t\t\twindow.sessionStorage.setItem('test', '1');\r\n\t\t\t\twindow.sessionStorage.removeItem('test');\r\n\t\t\t} else {\r\n\t\t\t\tsupported = false;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tsupported = false;\r\n\t\t}\r\n\t\tthis.supported = supported;\r\n\t\treturn supported;\r\n\t}\r\n}\r\n","import { BehaviorSubject, of } from 'rxjs';\r\nimport { catchError, map, switchMap, tap } from 'rxjs/operators';\r\nimport { ApiService } from '../../common/api/api.service';\r\nimport { SessionStorageService } from '../../common/storage/session-storage.service';\r\n\r\nexport const UserViews = {\r\n\tSIGN_IN: 1,\r\n\tSIGN_UP: 2,\r\n\tFORGOTTEN: 3,\r\n};\r\n\r\nexport class User {\r\n\r\n\tget avatar() {\r\n\t\treturn (this.firstName || '?').substr(0, 1).toUpperCase() + (this.lastName || '?').substr(0, 1).toUpperCase();\r\n\t}\r\n\r\n\tget fullName() {\r\n\t\treturn this.firstName + ' ' + this.lastName;\r\n\t}\r\n\r\n\tconstructor(data) {\r\n\t\tif (data) {\r\n\t\t\tObject.assign(this, data);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport class UserService {\r\n\r\n\tstatic user$_ = new BehaviorSubject(null);\r\n\r\n\tstatic get currentUser() {\r\n\t\treturn this.user$_.getValue();\r\n\t}\r\n\r\n\tstatic setUser(user) {\r\n\t\tif (user) {\r\n\t\t\tSessionStorageService.set('user', user);\r\n\t\t} else {\r\n\t\t\tSessionStorageService.delete('user');\r\n\t\t}\r\n\t\tthis.user$_.next(user);\r\n\t}\r\n\r\n\tstatic data$() {\r\n\t\treturn ApiService.get$('/user/data.json');\r\n\t}\r\n\r\n\tstatic forgot$(payload) {\r\n\t\treturn ApiService.get$(`/user/forgot.json`, payload);\r\n\t}\r\n\r\n\tstatic me$() {\r\n\t\tconst sessionUser = SessionStorageService.get('user');\r\n\t\tif (sessionUser) {\r\n\t\t\treturn of(sessionUser).pipe(\r\n\t\t\t\tswitchMap(user => {\r\n\t\t\t\t\tthis.setUser(new User(user));\r\n\t\t\t\t\treturn this.user$_;\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$(`/user/me.json`).pipe(\r\n\t\t\t\tmap((response) => {\r\n\t\t\t\t\tthis.mapUser(response);\r\n\t\t\t\t}),\r\n\t\t\t\tcatchError(_ => of(null)),\r\n\t\t\t\tswitchMap(user => {\r\n\t\t\t\t\tthis.setUser(user);\r\n\t\t\t\t\treturn this.user$_;\r\n\t\t\t\t}),\r\n\t\t\t\tmap(user => user || null),\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic signin$(payload) {\r\n\t\treturn ApiService.get$(`/user/signin.json`, payload).pipe(\r\n\t\t\tmap((response) => this.mapUser(response)),\r\n\t\t\ttap((user) => this.setUser(user)),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic signout$() {\r\n\t\treturn ApiService.get$(`/user/signout.json`).pipe(\r\n\t\t\ttap((_) => this.setUser(null)),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic signup$(payload) {\r\n\t\treturn ApiService.get$(`/user/signup.json`, payload).pipe(\r\n\t\t\tmap((response) => this.mapUser(response)),\r\n\t\t\ttap((user) => this.setUser(user)),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic sessionStorage$() {\r\n\t\treturn of(SessionStorageService.get('user') || null);\r\n\t}\r\n\r\n\tstatic mapUser(user) {\r\n\t\treturn user ? new User(user) : null;\r\n\t}\r\n\r\n\tstatic mapUsers(users) {\r\n\t\treturn users ? users.map(x => UserService.mapUser(x)) : [];\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { ModalResolveEvent, ModalService } from './common/modal/modal.service';\r\nimport { environment } from './environment';\r\nimport { UserService } from './shared/user/user.service';\r\n\r\nexport class AppComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.remove('hidden');\r\n\t\tconsole.log('AppComponent.onInit');\r\n\t}\r\n\r\n\tonLogin() {\r\n\t\tModalService.open$({ src: environment.template.modal.userModal, data: { view: 1 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tconsole.log('AppComponent.onLogin', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\twindow.location.href = environment.slug.reservedArea;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonLogout() {\r\n\t\tUserService.signout$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n}\r\n\r\nAppComponent.meta = {\r\n\tselector: '[app-component]',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\n\r\nlet DROPDOWN_ID = 1000000;\r\n\r\nexport class DropdownDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this.dropdown || this.id_ || (this.id_ = DropdownDirective.nextId());\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst trigger = node.getAttribute('dropdown-trigger');\r\n\t\tthis.trigger = trigger ? node.querySelector(trigger) : node;\r\n\t\tthis.opened = null;\r\n\t\tthis.onClick = this.onClick.bind(this);\r\n\t\tthis.onDocumentClick = this.onDocumentClick.bind(this);\r\n\t\tthis.openDropdown = this.openDropdown.bind(this);\r\n\t\tthis.closeDropdown = this.closeDropdown.bind(this);\r\n\t\tthis.addListeners();\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.openDropdown();\r\n\t\t} else {\r\n\t\t\tconst dropdownItemNode = node.querySelector('[dropdown-item]');\r\n\t\t\t// console.log('dropdownItemNode', dropdownItemNode);\r\n\t\t\tif (!dropdownItemNode) { // if (this.trigger !== node) {\r\n\t\t\t\tthis.closeDropdown();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDocumentClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst clickedInside = node === event.target || node.contains(event.target);\r\n\t\tif (!clickedInside) {\r\n\t\t\tthis.closeDropdown();\r\n\t\t}\r\n\t}\r\n\r\n\topenDropdown() {\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.opened = true;\r\n\t\t\tthis.addDocumentListeners();\r\n\t\t\tDropdownDirective.dropdown$.next(this.id);\r\n\t\t\tthis.dropped.next(this.id);\r\n\t\t}\r\n\t}\r\n\r\n\tcloseDropdown() {\r\n\t\tif (this.opened !== null) {\r\n\t\t\tthis.removeDocumentListeners();\r\n\t\t\tthis.opened = null;\r\n\t\t\tif (DropdownDirective.dropdown$.getValue() === this.id) {\r\n\t\t\t\tDropdownDirective.dropdown$.next(null);\r\n\t\t\t\tthis.dropped.next(null);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\taddListeners() {\r\n\t\tthis.trigger.addEventListener('click', this.onClick);\r\n\t}\r\n\r\n\taddDocumentListeners() {\r\n\t\tdocument.addEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tremoveListeners() {\r\n\t\tthis.trigger.removeEventListener('click', this.onClick);\r\n\t}\r\n\r\n\tremoveDocumentListeners() {\r\n\t\tdocument.removeEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners();\r\n\t\tthis.removeDocumentListeners();\r\n\t}\r\n\r\n\tstatic nextId() {\r\n\t\treturn DROPDOWN_ID++;\r\n\t}\r\n\r\n}\r\n\r\nDropdownDirective.meta = {\r\n\tselector: '[dropdown]',\r\n\tinputs: ['dropdown', 'dropdown-trigger'],\r\n\toutputs: ['dropped']\r\n};\r\n\r\nDropdownDirective.dropdown$ = new BehaviorSubject(null);\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { DropdownDirective } from './dropdown.directive';\r\n\r\nexport class DropdownItemDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this['dropdown-item'];\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('dropdown-item');\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownItemDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nDropdownItemDirective.meta = {\r\n\tselector: '[dropdown-item], [[dropdown-item]]',\r\n\tinputs: ['dropdown-item']\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nexport class EnvPipe extends Pipe {\r\n\r\n\tstatic transform(keypath) {\r\n\t\tlet env = environment;\r\n\t\tconst keys = keypath.split('.');\r\n\t\tlet k = keys.shift();\r\n\t\twhile (keys.length > 0 && env[k]) {\r\n\t\t\tenv = env[k];\r\n\t\t\tk = keys.shift();\r\n\t\t}\r\n\t\tconst value = env[k] || null;\r\n\t\treturn value;\r\n\t}\r\n\r\n}\r\n\r\nEnvPipe.meta = {\r\n\tname: 'env',\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nexport class FlagPipe extends Pipe {\r\n\r\n\tstatic transform(key) {\r\n\t\tconst flags = environment.flags;\r\n\t\treturn flags[key] || false;\r\n\t}\r\n\r\n}\r\n\r\nFlagPipe.meta = {\r\n\tname: 'flag',\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\n\r\nexport class ControlComponent extends Component {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst control = this.control;\r\n\t\tconst flags = control.flags;\r\n\t\tObject.keys(flags).forEach((key) => {\r\n\t\t\tflags[key] ? node.classList.add(key) : node.classList.remove(key);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nControlComponent.meta = {\r\n\tselector: '[control]',\r\n\tinputs: ['control']\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlCheckboxComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t}\r\n\r\n}\r\n\r\nControlCheckboxComponent.meta = {\r\n\tselector: '[control-checkbox]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--checkbox\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<input type=\"checkbox\" class=\"control--checkbox\" [id]=\"control.name\" [formControl]=\"control\" [value]=\"true\" />\r\n\t\t\t<label [labelFor]=\"control.name\">\r\n\t\t\t\t<svg class=\"icon icon--checkbox\"><use xlink:href=\"#checkbox\"></use></svg>\r\n\t\t\t\t<svg class=\"icon icon--checkbox-checked\"><use xlink:href=\"#checkbox-checked\"></use></svg>\r\n\t\t\t\t<span [innerHTML]=\"label | html\"></span>\r\n\t\t\t</label>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { fromEvent, merge } from 'rxjs';\r\nimport { filter, map, shareReplay, startWith } from 'rxjs/operators';\r\n\r\nexport class KeyboardService {\r\n\r\n\tstatic keys = {};\r\n\r\n\tstatic keydown$() {\r\n\t\tif (!this.keydown$_) {\r\n\t\t\tthis.keydown$_ = fromEvent(window, 'keydown').pipe(\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn this.keydown$_;\r\n\t}\r\n\r\n\tstatic keyup$() {\r\n\t\tif (!this.keyup$_) {\r\n\t\t\tthis.keyup$_ = fromEvent(window, 'keyup').pipe(\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn this.keyup$_;\r\n\t}\r\n\r\n\tstatic keys$() {\r\n\t\tif (!this.keys$_) {\r\n\t\t\tthis.keys$_ = merge(this.keydown$(), this.keyup$()).pipe(\r\n\t\t\t\tmap(event => {\r\n\t\t\t\t\tconst keys = this.keys;\r\n\t\t\t\t\tif (event.type === 'keydown') {\r\n\t\t\t\t\t\tkeys[event.key] = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdelete keys[event.key];\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn this.keys;\r\n\t\t\t\t}),\r\n\t\t\t\tstartWith(this.keys),\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn this.keys$_;\r\n\t}\r\n\r\n\tstatic key$() {\r\n\t\tif (!this.key$_) {\r\n\t\t\tconst regexp = /\\w/;\r\n\t\t\tthis.key$_ = this.keydown$().pipe(\r\n\t\t\t\tfilter(event => event.key && event.key.match(regexp)),\r\n\t\t\t\tmap(event => event.key),\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn this.key$_;\r\n\t}\r\n\r\n\tstatic typing$() {\r\n\t\tif (!this.typing$_) {\r\n\t\t\tlet typing = '',\r\n\t\t\t\tto;\r\n\t\t\tthis.typing$_ = this.key$().pipe(\r\n\t\t\t\tmap(key => {\r\n\t\t\t\t\tif (to) {\r\n\t\t\t\t\t\tclearTimeout(to);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttyping += key;\r\n\t\t\t\t\tto = setTimeout(() => {\r\n\t\t\t\t\t\ttyping = '';\r\n\t\t\t\t\t}, 1500);\r\n\t\t\t\t\treturn typing;\r\n\t\t\t\t}),\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn this.typing$_;\r\n\t}\r\n\r\n}\r\n","import { getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { DropdownDirective } from '../dropdown/dropdown.directive';\r\nimport { KeyboardService } from '../keyboard/keyboard.service';\r\nimport { ControlComponent } from './control.component';\r\n\r\nexport class ControlCustomSelectComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t\tthis.dropped = false;\r\n\t\tthis.dropdownId = DropdownDirective.nextId();\r\n\t\tKeyboardService.typing$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(word => {\r\n\t\t\tthis.scrollToWord(word);\r\n\t\t});\r\n\t\t/*\r\n\t\tKeyboardService.key$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(key => {\r\n\t\t\tthis.scrollToKey(key);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\t/*\r\n\tonChanges() {\r\n\t\t// console.log('ControlCustomSelectComponent.onChanges');\r\n\t}\r\n\t*/\r\n\r\n\tscrollToWord(word) {\r\n\t\t// console.log('ControlCustomSelectComponent.scrollToWord', word);\r\n\t\tconst items = this.control.options || [];\r\n\t\tlet index = -1;\r\n\t\tfor (let i = 0; i < items.length; i++) {\r\n\t\t\tconst x = items[i];\r\n\t\t\tif (x.name.toLowerCase().indexOf(word.toLowerCase()) === 0) {\r\n\t\t\t\t// console.log(word, x.name);\r\n\t\t\t\tindex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (index !== -1) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tconst dropdown = node.querySelector('.dropdown');\r\n\t\t\tconst navDropdown = node.querySelector('.nav--dropdown');\r\n\t\t\tconst item = navDropdown.children[index];\r\n\t\t\tdropdown.scrollTo(0, item.offsetTop);\r\n\t\t}\r\n\t}\r\n\r\n\tsetOption(item) {\r\n\t\t// console.log('setOption', item, this.isMultiple);\r\n\t\tlet value;\r\n\t\tif (this.isMultiple) {\r\n\t\t\tconst value = this.control.value || [];\r\n\t\t\tconst index = value.indexOf(item.id);\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\t// if (value.length > 1) {\r\n\t\t\t\tvalue.splice(index, 1);\r\n\t\t\t\t// }\r\n\t\t\t} else {\r\n\t\t\t\tvalue.push(item.id);\r\n\t\t\t}\r\n\t\t\tvalue = value.length ? value.slice() : null;\r\n\t\t} else {\r\n\t\t\tvalue = item.id;\r\n\t\t\t// DropdownDirective.dropdown$.next(null);\r\n\t\t}\r\n\t\tthis.control.value = value;\r\n\t\tthis.change.next(value);\r\n\t}\r\n\r\n\thasOption(item) {\r\n\t\tif (this.isMultiple) {\r\n\t\t\tconst values = this.control.value || [];\r\n\t\t\treturn values.indexOf(item.id) !== -1;\r\n\t\t} else {\r\n\t\t\treturn this.control.value === item.id;\r\n\t\t}\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tlet value = this.control.value;\r\n\t\tconst items = this.control.options || [];\r\n\t\tif (this.isMultiple) {\r\n\t\t\tvalue = value || [];\r\n\t\t\tif (value.length) {\r\n\t\t\t\treturn value.map(v => {\r\n\t\t\t\t\tconst item = items.find(x => x.id === v || x.name === v);\r\n\t\t\t\t\treturn item ? item.name : '';\r\n\t\t\t\t}).join(', ');\r\n\t\t\t} else {\r\n\t\t\t\treturn 'select'; // LabelPipe.transform('select');\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst item = items.find(x => x.id === value || x.name === value);\r\n\t\t\tif (item) {\r\n\t\t\t\treturn item.name;\r\n\t\t\t} else {\r\n\t\t\t\treturn 'select'; // LabelPipe.transform('select');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDropped($event) {\r\n\t\t// console.log('ControlCustomSelectComponent.onDropped', id);\r\n\t\tif (this.dropped && $event === null) {\r\n\t\t\tthis.control.touched = true;\r\n\t\t}\r\n\t\tthis.dropped = $event === this.dropdownId;\r\n\t}\r\n\r\n\tget isMultiple() {\r\n\t\treturn this.multiple && this.multiple !== false && this.multiple !== 'false';\r\n\t}\r\n}\r\n\r\nControlCustomSelectComponent.meta = {\r\n\tselector: '[control-custom-select]',\r\n\toutputs: ['change'],\r\n\tinputs: ['control', 'label', 'multiple'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--select\" [class]=\"{ required: control.validators.length, multiple: isMultiple }\" [dropdown]=\"dropdownId\" (dropped)=\"onDropped($event)\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<span class=\"control--custom-select\" [innerHTML]=\"getLabel() | label\"></span>\r\n\t\t\t<svg class=\"caret-down\"><use xlink:href=\"#caret-down\"></use></svg>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t\t<div class=\"dropdown\" [dropdown-item]=\"dropdownId\">\r\n\t\t\t<div class=\"category\" [innerHTML]=\"label\"></div>\r\n\t\t\t<ul class=\"nav--dropdown\" [class]=\"{ multiple: isMultiple }\">\r\n\t\t\t\t<li (click)=\"setOption(item)\" [class]=\"{ empty: item.id == null }\" *for=\"let item of control.options\">\r\n\t\t\t\t\t<span [class]=\"{ active: hasOption(item) }\" [innerHTML]=\"item.name | label\"></span>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlEmailComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t}\r\n\r\n}\r\n\r\nControlEmailComponent.meta = {\r\n\tselector: '[control-email]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<input type=\"text\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" required email />\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlPasswordComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t}\r\n\r\n}\r\n\r\nControlPasswordComponent.meta = {\r\n\tselector: '[control-password]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<input type=\"password\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" />\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlSearchComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t\tthis.disabled = this.disabled || false;\r\n\t}\r\n\r\n}\r\n\r\nControlSearchComponent.meta = {\r\n\tselector: '[control-search]',\r\n\tinputs: ['control', 'label', 'disabled'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length, disabled: disabled }\">\r\n\t\t\t<svg class=\"search\"><use xlink:href=\"#search\"></use></svg>\r\n\t\t\t<input type=\"text\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" [disabled]=\"disabled\" />\r\n\t\t</div>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlTextComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t\tthis.disabled = this.disabled || false;\r\n\t}\r\n\r\n}\r\n\r\nControlTextComponent.meta = {\r\n\tselector: '[control-text]',\r\n\tinputs: ['control', 'label', 'disabled'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length, disabled: disabled }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t\t<input type=\"text\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" [disabled]=\"disabled\" />\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlTextareaComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t\tthis.disabled = this.disabled || false;\r\n\t}\r\n\r\n}\r\n\r\nControlTextareaComponent.meta = {\r\n\tselector: '[control-textarea]',\r\n\tinputs: ['control', 'label', 'disabled'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--textarea\" [class]=\"{ required: control.validators.length, disabled: disabled }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<textarea class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" [innerHTML]=\"label\" rows=\"4\" [disabled]=\"disabled\"></textarea>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { LabelPipe } from '../label/label.pipe';\r\nimport { ControlComponent } from './control.component';\r\n\r\nexport class ErrorsComponent extends ControlComponent {\r\n\tgetLabel(key, value) {\r\n\t\tconst label = LabelPipe.transform(`error_${key}`);\r\n\t\treturn label;\r\n\t}\r\n}\r\n\r\nErrorsComponent.meta = {\r\n\tselector: 'errors-component',\r\n\tinputs: ['control'],\r\n\ttemplate: /* html */ `\r\n\t<div class=\"inner\" [style]=\"{ display: control.invalid && control.touched ? 'block' : 'none' }\">\r\n\t\t<div class=\"error\" *for=\"let [key, value] of control.errors\">\r\n\t\t\t<span [innerHTML]=\"getLabel(key, value)\"></span>\r\n\t\t\t<!-- <span class=\"key\" [innerHTML]=\"key\"></span> <span class=\"value\" [innerHTML]=\"value | json\"></span> -->\r\n\t\t</div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Component } from 'rxcomp';\r\n\r\nexport class TestComponent extends Component {\r\n\r\n\tonTest(event) {\r\n\t\tthis.test.next(event);\r\n\t}\r\n\r\n\tonReset(event) {\r\n\t\tthis.reset.next(event);\r\n\t}\r\n\r\n}\r\n\r\nTestComponent.meta = {\r\n\tselector: 'test-component',\r\n\tinputs: ['form'],\r\n\toutputs: ['test', 'reset'],\r\n\ttemplate: /* html */ `\r\n\t<div class=\"test-component\" *if=\"!('production' | flag)\">\r\n\t\t<div class=\"test-component__title\">development mode</div>\r\n\t\t<code [innerHTML]=\"form.value | json\"></code>\r\n\t\t<button type=\"button\" class=\"btn--submit\" (click)=\"onTest($event)\"><span>test</span></button>\r\n\t\t<button type=\"button\" class=\"btn--submit\" (click)=\"onReset($event)\"><span>reset</span></button>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Pipe } from 'rxcomp';\r\n\r\n/*\r\n['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n['\"', '&', ''', '<', '>', ' ', '¡', '¢', '£', '¤', '¥', '¦', '§', '¨', '©', 'ª', '«', '¬', '­', '®', '¯', '°', '±', '²', '³', '´', 'µ', '¶', '·', '¸', '¹', 'º', '»', '¼', '½', '¾', '¿', 'À', 'Á', 'Â', 'Ã', 'Ä', 'Å', 'Æ', 'Ç', 'È', 'É', 'Ê', 'Ë', 'Ì', 'Í', 'Î', 'Ï', 'Ð', 'Ñ', 'Ò', 'Ó', 'Ô', 'Õ', 'Ö', '×', 'Ø', 'Ù', 'Ú', 'Û', 'Ü', 'Ý', 'Þ', 'ß', 'à', 'á', 'ã', 'ä', 'å', 'æ', 'ç', 'è', 'é', 'ê', 'ë', 'ì', 'í', 'î', 'ï', 'ð', 'ñ', 'ò', 'ó', 'ô', 'õ', 'ö', '÷', 'ø', 'ù', 'ú', 'û', 'ü', 'ý', 'þ', 'ÿ', '&', '•', '°', '∞', '‰', '⋅', '±', '†', '—', '¬', 'µ', '⊥', '∥', '€', '£', '¥', '¢', '©', '®', '™', 'α', 'β', 'γ', 'δ', 'ε', 'ζ', 'η', 'θ', 'ι', 'κ', 'λ', 'μ', 'ν', 'ξ', 'ο', 'π', 'ρ', 'σ', 'τ', 'υ', 'φ', 'χ', 'ψ', 'ω', 'Α', 'Β', 'Γ', 'Δ', 'Ε', 'Ζ', 'Η', 'Θ', 'Ι', 'Κ', 'Λ', 'Μ', 'Ν', 'Ξ', 'Ο', 'Π', 'Ρ', 'Σ', 'Τ', 'Υ', 'Φ', 'Χ', 'Ψ', 'Ω'];\r\n*/\r\n\r\nexport class HtmlPipe extends Pipe {\r\n\r\n\tstatic transform(value) {\r\n\t\tif (value) {\r\n\t\t\tvalue = value.replace(/&#(\\d+);/g, function(m, n) {\r\n\t\t\t\treturn String.fromCharCode(parseInt(n));\r\n\t\t\t});\r\n\t\t\tconst escapes = ['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n\t\t\tconst unescapes = ['\"', '&', '\\'', '<', '>', ' ', '¡', '¢', '£', '¤', '¥', '¦', '§', '¨', '©', 'ª', '«', '¬', '­', '®', '¯', '°', '±', '²', '³', '´', 'µ', '¶', '·', '¸', '¹', 'º', '»', '¼', '½', '¾', '¿', 'À', 'Á', 'Â', 'Ã', 'Ä', 'Å', 'Æ', 'Ç', 'È', 'É', 'Ê', 'Ë', 'Ì', 'Í', 'Î', 'Ï', 'Ð', 'Ñ', 'Ò', 'Ó', 'Ô', 'Õ', 'Ö', '×', 'Ø', 'Ù', 'Ú', 'Û', 'Ü', 'Ý', 'Þ', 'ß', 'à', 'á', 'ã', 'ä', 'å', 'æ', 'ç', 'è', 'é', 'ê', 'ë', 'ì', 'í', 'î', 'ï', 'ð', 'ñ', 'ò', 'ó', 'ô', 'õ', 'ö', '÷', 'ø', 'ù', 'ú', 'û', 'ü', 'ý', 'þ', 'ÿ', '&', '•', '°', '∞', '‰', '⋅', '±', '†', '—', '¬', 'µ', '⊥', '∥', '€', '£', '¥', '¢', '©', '®', '™', 'α', 'β', 'γ', 'δ', 'ε', 'ζ', 'η', 'θ', 'ι', 'κ', 'λ', 'μ', 'ν', 'ξ', 'ο', 'π', 'ρ', 'σ', 'τ', 'υ', 'φ', 'χ', 'ψ', 'ω', 'Α', 'Β', 'Γ', 'Δ', 'Ε', 'Ζ', 'Η', 'Θ', 'Ι', 'Κ', 'Λ', 'Μ', 'Ν', 'Ξ', 'Ο', 'Π', 'Ρ', 'Σ', 'Τ', 'Υ', 'Φ', 'Χ', 'Ψ', 'Ω'];\r\n\t\t\tconst rx = new RegExp(`(&${escapes.join(';)|(&')};)`, 'g');\r\n\t\t\tvalue = value.replace(rx, function() {\r\n\t\t\t\tfor (let i = 1; i < arguments.length; i++) {\r\n\t\t\t\t\tif (arguments[i]) {\r\n\t\t\t\t\t\t// console.log(arguments[i], unescapes[i - 1]);\r\n\t\t\t\t\t\treturn unescapes[i - 1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// console.log(value);\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nHtmlPipe.meta = {\r\n\tname: 'html',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class IdDirective extends Directive {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('id', this.id);\r\n\t}\r\n\r\n}\r\n\r\nIdDirective.meta = {\r\n\tselector: '[id]',\r\n\tinputs: ['id']\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class LabelForDirective extends Directive {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('for', this.labelFor);\r\n\t}\r\n\r\n}\r\n\r\nLabelForDirective.meta = {\r\n\tselector: '[labelFor]',\r\n\tinputs: ['labelFor']\r\n};\r\n","import { fromEvent, ReplaySubject } from 'rxjs';\r\nimport { delay, switchMap } from 'rxjs/operators';\r\n\r\nexport class LocomotiveScrollService {\r\n\r\n\tstatic scroll$ = new ReplaySubject(1);\r\n\tstatic scroll(scroll) {\r\n\t\t// console.log('LocomotiveScrollService.scroll', scroll);\r\n\t\tthis.scroll$.next(scroll);\r\n\t}\r\n\r\n\tstatic init(node, options) {\r\n\t\toptions = Object.assign({\r\n\t\t\tuseKeyboard: true,\r\n\t\t\tsmoothMobile: true,\r\n\t\t\tinertia: 0.5,\r\n\t\t\t// name:'scroll',\r\n\t\t\t// offset: [0,0], // bottom top\r\n\t\t\t// repeat: false,\r\n\t\t\tsmooth: true,\r\n\t\t\t// initPosition: { x: 0, y: 0 }\r\n\t\t\t// direction: 'vertical',\r\n\t\t\tlerp: 0.01,\r\n\t\t\tgetDirection: true, // add direction to scroll event\r\n\t\t\tgetSpeed: true, // add speed to scroll event\r\n\t\t\t// class: 'is-inview',\r\n\t\t\tinitClass: 'has-scroll-init',\r\n\t\t\tscrollingClass: 'has-scroll-scrolling',\r\n\t\t\tdraggingClass: 'has-scroll-dragging',\r\n\t\t\tsmoothClass: 'has-scroll-smooth',\r\n\t\t\tscrollbarContainer: false,\r\n\t\t\tscrollbarClass: 'c-scrollbar',\r\n\t\t\tmultiplier: 1,\r\n\t\t\tfirefoxMultiplier: 50,\r\n\t\t\ttouchMultiplier: 2,\r\n\t\t\tscrollFromAnywhere: true,\r\n\t\t\tgestureDirection: 'vertical',\r\n\t\t\treloadOnContextChange: false,\r\n\t\t\tresetNativeScroll: true,\r\n\t\t}, options, {\r\n\t\t\tel: node,\r\n\t\t});\r\n\t\tif (this.useLocomotiveScroll()) {\r\n\t\t\tconst instance = new LocomotiveScroll(options);\r\n\t\t\tLocomotiveScrollService.instance = instance;\r\n\t\t\treturn instance;\r\n\t\t} else {\r\n\t\t\tdocument.querySelector('html').classList.add('has-scroll-init');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic useLocomotiveScroll() {\r\n\t\treturn window.innerWidth >= 768 && !this.isMacLike();\r\n\t}\r\n\r\n\tstatic isMacLike() {\r\n\t\tconst isMacLike = /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform);\r\n\t\treturn isMacLike;\r\n\t}\r\n\r\n\tstatic isIOS() {\r\n\t\tconst isIOS = /(iPhone|iPod|iPad)/i.test(navigator.platform);\r\n\t\treturn isIOS;\r\n\t}\r\n\r\n\tstatic isMacOs() {\r\n\t\tconst isMacOs = navigator.platform.toLowerCase().indexOf('mac') >= 0;\r\n\t\treturn isMacOs;\r\n\t}\r\n\r\n\tstatic isSafari() {\r\n\t\tconst isSafari = navigator.vendor.match(/apple/i) &&\r\n\t\t\t!navigator.userAgent.match(/crios/i) &&\r\n\t\t\t!navigator.userAgent.match(/fxios/i);\r\n\t\treturn isSafari;\r\n\t}\r\n\r\n\tstatic init$(node) {\r\n\t\treturn fromEvent(window, 'load').pipe(\r\n\t\t\tdelay(1),\r\n\t\t\tswitchMap(_ => {\r\n\t\t\t\t// setTimeout(() => {\r\n\t\t\t\tconst instance = LocomotiveScrollService.init(node);\r\n\t\t\t\tif (instance) {\r\n\t\t\t\t\tinstance.on('scroll', instance => {\r\n\t\t\t\t\t\tLocomotiveScrollService.scroll(instance);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst event = { direction: null, scroll: { x: 0, y: 0 }, speed: 0 };\r\n\t\t\t\t\tconst body = document.querySelector('body');\r\n\t\t\t\t\tlet previousY = body.scrollTop; // window.pageYOffset; // body.scrollTop;\r\n\t\t\t\t\tbody.addEventListener('scroll', () => {\r\n\t\t\t\t\t\tconst y = body.scrollTop; // window.pageYOffset; // body.scrollTop;\r\n\t\t\t\t\t\tconst direction = y > previousY ? 'down' : 'up';\r\n\t\t\t\t\t\t// console.log('scroll', y, direction);\r\n\t\t\t\t\t\tpreviousY = y;\r\n\t\t\t\t\t\tevent.direction = direction;\r\n\t\t\t\t\t\tevent.scroll.y = y;\r\n\t\t\t\t\t\tLocomotiveScrollService.scroll(event);\r\n\t\t\t\t\t}, true);\r\n\t\t\t\t}\r\n\t\t\t\treturn LocomotiveScrollService.scroll$;\r\n\t\t\t\t// }, 1);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic update() {\r\n\t\tif (this.instance) {\r\n\t\t\tthis.instance.update();\r\n\t\t}\r\n\t}\r\n\r\n\tstatic stop() {\r\n\t\tif (this.instance) {\r\n\t\t\tthis.instance.stop();\r\n\t\t}\r\n\t}\r\n\r\n\tstatic start() {\r\n\t\tif (this.instance) {\r\n\t\t\tthis.instance.start();\r\n\t\t}\r\n\t}\r\n\r\n\tstatic scrollTo(target, options) {\r\n\t\tif (this.instance) {\r\n\t\t\tthis.instance.scrollTo(target, options);\r\n\t\t} else {\r\n\t\t\ttarget.scrollIntoView();\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from './locomotive-scroll.service';\r\n\r\nexport class LocomotiveScrollDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tLocomotiveScrollService.init$(node).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('LocomotiveScrollDirective', event);\r\n\t\t});\r\n\t\t/*\r\n\t\twindow.onload = () => {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tconst instance = LocomotiveScrollService.init(node);\r\n\t\t\t\tif (instance) {\r\n\t\t\t\t\tinstance.on('scroll', instance => {\r\n\t\t\t\t\t\tLocomotiveScrollService.scroll(instance.scroll.y);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst body = document.querySelector('body');\r\n\t\t\t\t\twindow.addEventListener('scroll', () => {\r\n\t\t\t\t\t\tconst y = body.scrollTop; // window.pageYOffset\r\n\t\t\t\t\t\tLocomotiveScrollService.scroll(y);\r\n\t\t\t\t\t}, true);\r\n\t\t\t\t}\r\n\t\t\t}, 1);\r\n\t\t};\r\n\t\t*/\r\n\t}\r\n\r\n}\r\n\r\nLocomotiveScrollDirective.meta = {\r\n\tselector: '[locomotive-scroll],[[locomotive-scroll]]'\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil, tap } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from './locomotive-scroll.service';\r\n\r\nexport class ScrollDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tif (LocomotiveScrollService.useLocomotiveScroll()) {\r\n\t\t\tthis.scroll$().pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(event => {\r\n\t\t\t\t// console.log('ScrollDirective', event);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tscroll$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst speed = this.scrollSpeed ? parseFloat(this.scrollSpeed) : 1.5;\r\n\t\treturn LocomotiveScrollService.scroll$.pipe(\r\n\t\t\ttap(scroll => {\r\n\t\t\t\tconst wh = window.innerHeight;\r\n\t\t\t\tconst wh2 = wh / 2;\r\n\t\t\t\tconst rect = node.getBoundingClientRect();\r\n\t\t\t\tconst currentY = gsap.getProperty(node, 'y');\r\n\t\t\t\tconst top = rect.top - currentY;\r\n\t\t\t\tconst bottom = rect.bottom - currentY;\r\n\t\t\t\tif (top < wh && bottom > 0) {\r\n\t\t\t\t\tconst pow = (top - wh2) / wh2;\r\n\t\t\t\t\tconst y = pow * speed * 40;\r\n\t\t\t\t\tgsap.set(node, { y });\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nScrollDirective.meta = {\r\n\tselector: '[scroll]',\r\n\tinputs: ['scrollSpeed'],\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { ModalService } from './modal.service';\r\n\r\nexport class ModalOutletComponent extends Component {\r\n\tget modal() {\r\n\t\treturn this.modal_;\r\n\t}\r\n\r\n\tset modal(modal) {\r\n\t\t// console.log('ModalOutletComponent set modal', modal, this);\r\n\t\tconst { module } = getContext(this);\r\n\t\tif (this.modal_ && this.modal_.node) {\r\n\t\t\tmodule.remove(this.modal_.node, this);\r\n\t\t\tthis.modalNode.removeChild(this.modal_.node);\r\n\t\t}\r\n\t\tif (modal && modal.node) {\r\n\t\t\tthis.modal_ = modal;\r\n\t\t\tthis.modalNode.appendChild(modal.node);\r\n\t\t\tconst instances = module.compile(modal.node);\r\n\t\t}\r\n\t\tthis.modal_ = modal;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.modalNode = node.querySelector('.modal-outlet__modal');\r\n\t\tModalService.modal$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(modal => {\r\n\t\t\tthis.modal = modal;\r\n\t\t});\r\n\t}\r\n\r\n\treject(event) {\r\n\t\tModalService.reject();\r\n\t}\r\n}\r\n\r\nModalOutletComponent.meta = {\r\n\tselector: '[modal-outlet]',\r\n\ttemplate: /* html */ `\r\n\t<div class=\"modal-outlet__container\" [class]=\"{ active: modal }\">\r\n\t\t<div class=\"modal-outlet__background\" (click)=\"reject($event)\"></div>\r\n\t\t<div class=\"modal-outlet__modal\"></div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nexport class SlugPipe extends Pipe {\r\n\r\n\tstatic transform(key) {\r\n\t\tconst slug = environment.slug;\r\n\t\treturn slug[key] || `#${key}`;\r\n\t}\r\n\r\n}\r\n\r\nSlugPipe.meta = {\r\n\tname: 'slug',\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { Subject } from 'rxjs';\r\n\r\nexport class SwiperDirective extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 'auto',\r\n\t\t\tspaceBetween: 0,\r\n\t\t\tcenteredSlides: true,\r\n\t\t\tspeed: 600,\r\n\t\t\tautoplay: {\r\n\t\t\t\tdelay: 5000,\r\n\t\t\t},\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t}\r\n\r\n\tget enabled() {\r\n\t\treturn !window.matchMedia('print').matches;\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tthis.swiperInitOrUpdate_();\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners_();\r\n\t\tthis.swiperDestroy_();\r\n\t}\r\n\r\n\tonBeforePrint() {\r\n\t\tthis.swiperDestroy_();\r\n\t}\r\n\r\n\tslideToIndex(index) {\r\n\t\t// console.log('SwiperDirective.slideToIndex', index);\r\n\t\tif (this.swiper) {\r\n\t\t\tthis.swiper.slideTo(index);\r\n\t\t}\r\n\t}\r\n\r\n\thasPrev() {\r\n\t\tconst swiper = this.swiper;\r\n\t\tif (swiper && swiper.activeIndex > 0 && swiper.slides.length > swiper.activeIndex) {\r\n\t\t\t// console.log('SwiperDirective.hasPrev', swiper.activeIndex, swiper.realIndex, swiper.slides);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\r\n\thasNext() {\r\n\t\tconst swiper = this.swiper;\r\n\t\tif (swiper) {\r\n\t\t\tconst slidesPerView = swiper.params.slidesPerView || 1;\r\n\t\t\t// console.log('SwiperDirective.hasNext', swiper.slides.length, swiper.params.slidesPerView);\r\n\t\t\tif (swiper.activeIndex < swiper.slides.length - slidesPerView) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tslidePrev() {\r\n\t\tconst swiper = this.swiper;\r\n\t\tif (this.hasPrev()) {\r\n\t\t\t// console.log('SwiperDirective.slidePrev', swiper.activeIndex, swiper.realIndex, swiper.slides);\r\n\t\t\tswiper.slideTo(swiper.activeIndex - 1);\r\n\t\t}\r\n\t}\r\n\r\n\tslideNext() {\r\n\t\tconst swiper = this.swiper;\r\n\t\tif (this.hasNext()) {\r\n\t\t\t// console.log('SwiperDirective.slideNext', swiper.activeIndex, swiper.realIndex, swiper.slides);\r\n\t\t\tswiper.slideTo(swiper.activeIndex + 1);\r\n\t\t}\r\n\t}\r\n\r\n\tinit_(target) {\r\n\t\tthis.events$ = new Subject();\r\n\t\tif (this.enabled) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\ttarget = target || node;\r\n\t\t\tthis.target = target;\r\n\t\t\tgsap.set(target, { opacity: 0 });\r\n\t\t\tthis.index = 0;\r\n\t\t\tconst on = this.options.on || {};\r\n\t\t\ton.slideChange = () => {\r\n\t\t\t\tconst swiper = this.swiper;\r\n\t\t\t\tif (swiper) {\r\n\t\t\t\t\tthis.index = swiper.activeIndex;\r\n\t\t\t\t\tthis.events$.next(this.index);\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.options.on = on;\r\n\t\t\tthis.addListeners_();\r\n\t\t}\r\n\t}\r\n\r\n\taddListeners_() {\r\n\t\tthis.onBeforePrint = this.onBeforePrint.bind(this);\r\n\t\twindow.addEventListener('beforeprint', this.onBeforePrint);\r\n\t\t/*\r\n\t\tscope.$on('onResize', ($scope) => {\r\n\t\t\tthis.onResize(scope, element, attributes);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\tremoveListeners_() {\r\n\t\twindow.removeEventListener('beforeprint', this.onBeforePrint);\r\n\t}\r\n\r\n\tswiperInitOrUpdate_() {\r\n\t\tif (this.enabled) {\r\n\t\t\tconst target = this.target;\r\n\t\t\tif (this.swiper) {\r\n\t\t\t\tthis.swiper.update();\r\n\t\t\t} else {\r\n\t\t\t\tlet swiper;\r\n\t\t\t\tconst on = this.options.on || (this.options.on = {});\r\n\t\t\t\tconst callback = on.init;\r\n\t\t\t\tif (!on.init || !on.init.swiperDirectiveInit) {\r\n\t\t\t\t\ton.init = function() {\r\n\t\t\t\t\t\tgsap.to(target, {\r\n\t\t\t\t\t\t\tduration: 0.4,\r\n\t\t\t\t\t\t\topacity: 1,\r\n\t\t\t\t\t\t\tease: Power2.easeOut,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tif (typeof callback === 'function') {\r\n\t\t\t\t\t\t\t\tcallback.apply(this, [swiper, element, scope]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, 1);\r\n\t\t\t\t\t};\r\n\t\t\t\t\ton.init.swiperDirectiveInit = true;\r\n\t\t\t\t}\r\n\t\t\t\tgsap.set(target, { opacity: 1 });\r\n\t\t\t\tswiper = new Swiper(target, this.options);\r\n\t\t\t\t// console.log(swiper);\r\n\t\t\t\tthis.swiper = swiper;\r\n\t\t\t\tthis.swiper._opening = true;\r\n\t\t\t\ttarget.classList.add('swiper-init');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tswiperDestroy_() {\r\n\t\tif (this.swiper) {\r\n\t\t\tthis.swiper.destroy();\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nSwiperDirective.meta = {\r\n\tselector: '[swiper]',\r\n\tinputs: ['consumer']\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\n\r\nlet ID = 0;\r\n\r\nexport class ThronComponent extends Component {\r\n\r\n\tplaying_ = false;\r\n\tget playing() {\r\n\t\treturn this.playing_;\r\n\t}\r\n\tset playing(playing) {\r\n\t\tif (this.playing_ !== playing) {\r\n\t\t\tthis.playing_ = playing;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tif (node) {\r\n\t\t\t\tplaying ? node.classList.add('playing') : node.classList.remove('playing');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\t// console.log('ThronComponent.onInit');\r\n\t\tconst THRON = window.THRONContentExperience || window.THRONPlayer;\r\n\t\tif (!THRON) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// console.log('THRONContentExperience', window.THRONContentExperience, 'THRONPlayer', window.THRONPlayer);\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = this.target = node.querySelector('.video > .thron');\r\n\t\tconst id = target.id = `thron-${++ID}`;\r\n\t\tlet media = this.thron;\r\n\t\tif (media.indexOf('pkey=') === -1) {\r\n\t\t\tconst splitted = media.split('/');\r\n\t\t\tconst clientId = splitted[6];\r\n\t\t\tconst xcontentId = splitted[7];\r\n\t\t\tconst pkey = splitted[8];\r\n\t\t\tmedia = `https://gruppoconcorde-view.thron.com/api/xcontents/resources/delivery/getContentDetail?clientId=${clientId}&xcontentId=${xcontentId}&pkey=${pkey}`;\r\n\t\t}\r\n\t\tconst controls = this.controls = node.hasAttribute('controls') ? true : false,\r\n\t\t\tloop = this.loop = node.hasAttribute('loop') ? true : false,\r\n\t\t\tautoplay = this.autoplay = node.hasAttribute('autoplay') ? true : false;\r\n\t\tconst player = this.player = THRON(id, {\r\n\t\t\tmedia: media,\r\n\t\t\tloop: loop,\r\n\t\t\tautoplay: autoplay,\r\n\t\t\tmuted: !controls,\r\n\t\t\tdisplayLinked: 'close',\r\n\t\t\tnoSkin: !controls,\r\n\t\t\t// lockBitrate: 'max',\r\n\t\t});\r\n\t\tthis.onReady = this.onReady.bind(this);\r\n\t\tthis.onCanPlay = this.onCanPlay.bind(this);\r\n\t\tthis.onPlaying = this.onPlaying.bind(this);\r\n\t\tthis.onPlay = this.onPlay.bind(this);\r\n\t\tthis.onPause = this.onPause.bind(this);\r\n\t\tthis.onComplete = this.onComplete.bind(this);\r\n\t\tplayer.on('ready', this.onReady);\r\n\t\tplayer.on('canPlay', this.onCanPlay);\r\n\t\tplayer.on('playing', this.onPlaying);\r\n\t\tplayer.on('play', this.onPlay);\r\n\t\tplayer.on('pause', this.onPause);\r\n\t\tplayer.on('complete', this.onComplete);\r\n\t}\r\n\r\n\tonReady() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tif (!this.controls) {\r\n\t\t\tconst mediaContainer = player.mediaContainer();\r\n\t\t\tconst video = mediaContainer.querySelector('video');\r\n\t\t\tvideo.setAttribute('playsinline', 'true');\r\n\t\t\tvideo.setAttribute('autoplay', 'true');\r\n\t\t}\r\n\t\tthis.ready.next(id);\r\n\t\t// video.setAttribute('autoplay', 'true');\r\n\t};\r\n\r\n\tonCanPlay() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\t// console.log('ThronDirective.onCanPlay', id);\r\n\t\tthis.canPlay.next(id);\r\n\t}\r\n\r\n\tonPlaying() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tplayer.off('playing', this.onPlaying);\r\n\t\tif (!this.controls) {\r\n\t\t\tconst qualities = player.qualityLevels();\r\n\t\t\t// console.log('ThronDirective.onPlaying', id, qualities);\r\n\t\t\tif (qualities.length) {\r\n\t\t\t\tconst highestQuality = qualities[qualities.length - 1].index;\r\n\t\t\t\tconst lowestQuality = qualities[0].index;\r\n\t\t\t\tplayer.currentQuality(highestQuality);\r\n\t\t\t\t// console.log('ThronDirective.onPlaying', id, 'currentQuality', player.currentQuality());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonPlay() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\t// console.log('ThronDirective.onComplete', id);\r\n\t\tthis.playing = true;\r\n\t\tthis.play.next(id);\r\n\t}\r\n\r\n\tonPause() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\t// console.log('ThronDirective.onComplete', id);\r\n\t\tthis.playing = false;\r\n\t\tthis.pause.next(id);\r\n\t}\r\n\r\n\tonComplete() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\t// console.log('ThronDirective.onComplete', id);\r\n\t\tthis.playing = false;\r\n\t\tthis.complete.next(id);\r\n\t}\r\n\r\n\tplayVideo() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tconst status = player.status();\r\n\t\t// console.log('ThronDirective.playVideo', id, status);\r\n\t\tif (status && !status.playing) {\r\n\t\t\tplayer.play();\r\n\t\t}\r\n\t}\r\n\r\n\tpauseVideo() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tconst status = player.status();\r\n\t\t// console.log('ThronDirective.pauseVideo', id, status);\r\n\t\tif (status && status.playing) {\r\n\t\t\tplayer.pause();\r\n\t\t}\r\n\t}\r\n\r\n\ttoggle() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tconst status = player.status();\r\n\t\t// console.log('ThronDirective.pauseVideo', id, status);\r\n\t\tif (status && status.playing) {\r\n\t\t\tplayer.pause();\r\n\t\t} else {\r\n\t\t\tplayer.play();\r\n\t\t}\r\n\t}\r\n\r\n\tplay(id) {\r\n\t\t// console.log('ThronDirective.play', id, id, id === id);\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (id === this.target.id) {\r\n\t\t\tthis.playVideo();\r\n\t\t}\r\n\t}\r\n\r\n\tpause(id) {\r\n\t\t// console.log('ThronDirective.pause', id, id, id === id);\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (id === this.target.id) {\r\n\t\t\tthis.pauseVideo();\r\n\t\t}\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tconst player = this.player;\r\n\t\tif (player) {\r\n\t\t\tplayer.off('ready', this.onReady);\r\n\t\t\tplayer.off('canPlay', this.onCanPlay);\r\n\t\t\tplayer.off('playing', this.onPlaying);\r\n\t\t\tplayer.off('play', this.onPlay);\r\n\t\t\tplayer.off('pause', this.onPause);\r\n\t\t\tplayer.off('complete', this.onComplete);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nThronComponent.meta = {\r\n\tselector: '[thron],[[thron]]',\r\n\toutputs: ['ready', 'canPlay', 'play', 'pause', 'complete'],\r\n\tinputs: ['thron', 'm3u8'],\r\n\ttemplate: /* html */``,\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class TitleDirective extends Directive {\r\n\tset title(title) {\r\n\t\tif (this.title_ !== title) {\r\n\t\t\tthis.title_ = title;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\ttitle ? node.setAttribute('title', title) : node.removeAttribute('title');\r\n\t\t}\r\n\t}\r\n\tget title() {\r\n\t\treturn this.title_;\r\n\t}\r\n}\r\n\r\nTitleDirective.meta = {\r\n\tselector: '[[title]]',\r\n\tinputs: ['title'],\r\n};\r\n","import { Module } from 'rxcomp';\r\nimport { DropdownItemDirective } from './dropdown/dropdown-item.directive';\r\nimport { DropdownDirective } from './dropdown/dropdown.directive';\r\nimport { EnvPipe } from './env/env.pipe';\r\nimport { FlagPipe } from './flag/flag.pipe';\r\nimport { ControlCheckboxComponent } from './forms/control-checkbox.component';\r\nimport { ControlCustomSelectComponent } from './forms/control-custom-select.component';\r\nimport { ControlEmailComponent } from './forms/control-email.component';\r\nimport { ControlPasswordComponent } from './forms/control-password.component';\r\nimport { ControlSearchComponent } from './forms/control-search.component';\r\nimport { ControlTextComponent } from './forms/control-text.component';\r\nimport { ControlTextareaComponent } from './forms/control-textarea.component';\r\nimport { ErrorsComponent } from './forms/errors.component';\r\nimport { TestComponent } from './forms/test.component';\r\nimport { HtmlPipe } from './html/html.pipe';\r\nimport { IdDirective } from './id/id.directive';\r\nimport { LabelForDirective } from './label-for/label-for.directive';\r\nimport { LabelPipe } from './label/label.pipe';\r\nimport { LocomotiveScrollDirective } from './locomotive-scroll/locomotive-scroll.directive';\r\nimport { ScrollDirective } from './locomotive-scroll/scroll.directive';\r\nimport { ModalOutletComponent } from './modal/modal-outlet.component';\r\nimport { SlugPipe } from './slug/slug.pipe';\r\nimport { SwiperDirective } from './swiper/swiper.directive';\r\nimport { ThronComponent } from './thron/thron.component';\r\nimport { TitleDirective } from './title/title.directive';\r\n\r\nconst factories = [\r\n\tControlCheckboxComponent,\r\n\tControlCustomSelectComponent,\r\n\tControlEmailComponent,\r\n\tControlPasswordComponent,\r\n\t// ControlSelectComponent,\r\n\tControlSearchComponent,\r\n\tControlTextareaComponent,\r\n\tControlTextComponent,\r\n\t// DisabledDirective,\r\n\t// DropDirective,\r\n\tDropdownDirective,\r\n\tDropdownItemDirective,\r\n\t// DropdownItemDirective,\r\n\tErrorsComponent,\r\n\tIdDirective,\r\n\tLabelForDirective,\r\n\t// LanguageComponent,\r\n\t// LazyDirective,\r\n\tLocomotiveScrollDirective,\r\n\t// ModalComponent,\r\n\tModalOutletComponent,\r\n\tScrollDirective,\r\n\t// SvgIconStructure,\r\n\tSwiperDirective,\r\n\tTestComponent,\r\n\tThronComponent,\r\n\tTitleDirective,\r\n\t// UploadItemComponent,\r\n\t// ValueDirective,\r\n\t// VirtualStructure\r\n];\r\n\r\nconst pipes = [\r\n\tEnvPipe,\r\n\tFlagPipe,\r\n\tHtmlPipe,\r\n\tLabelPipe,\r\n\tSlugPipe,\r\n];\r\n\r\nexport class CommonModule extends Module { }\r\n\r\nCommonModule.meta = {\r\n\timports: [\r\n\t],\r\n\tdeclarations: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n\texports: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n};\r\n","/**\n * Copyright 2019 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface OverlayViewSafe extends google.maps.OverlayView {}\n\n/**\n * Extends an object's prototype by another's.\n *\n * @param type1 The Type to be extended.\n * @param type2 The Type to extend with.\n * @ignore\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction extend(type1: any, type2: any): void {\n  // eslint-disable-next-line prefer-const\n  for (let property in type2.prototype) {\n    type1.prototype[property] = type2.prototype[property];\n  }\n}\n\n/**\n * @ignore\n */\nexport class OverlayViewSafe {\n  constructor() {\n    // MarkerClusterer implements google.maps.OverlayView interface. We use the\n    // extend function to extend MarkerClusterer with google.maps.OverlayView\n    // because it might not always be available when the code is defined so we\n    // look for it at the last possible moment. If it doesn't exist now then\n    // there is no point going ahead :)\n    extend(OverlayViewSafe, google.maps.OverlayView);\n  }\n}\n","/**\n * Copyright 2019 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * This class represents the object for values in the `styles` array passed\n * to the {@link MarkerClusterer} constructor. The element in this array that is used to\n * style the cluster icon is determined by calling the `calculator` function.\n */\nimport { Cluster } from \"./cluster\";\nimport { OverlayViewSafe } from \"./overlay-view-safe\";\n\n/**\n *\n * @hidden\n */\nfunction toCssText(styles: { [key: string]: string }): string {\n  return Object.keys(styles)\n    .reduce((acc, key) => {\n      if (styles[key]) {\n        acc.push(key + \":\" + styles[key]);\n      }\n      return acc;\n    }, [])\n    .join(\";\");\n}\n\n/**\n *\n * @hidden\n */\nfunction coercePixels(pixels: number): string {\n  return pixels ? pixels + \"px\" : undefined;\n}\n\nexport interface ClusterIconStyle {\n  /** The URL of the cluster icon image file. If not set, img element will not be created */\n  url?: string;\n  /** The name of the CSS class defining styles for the cluster markers. */\n  className?: string;\n  /** Height The display height (in pixels) of the cluster icon. Required. */\n  height: number;\n  /** Width The display width (in pixels) of the cluster icon. Required. */\n  width: number;\n  /**\n   * The position (in pixels) from the center of the cluster icon to\n   * where the text label is to be centered and drawn. The format is `[yoffset, xoffset]`\n   * where `yoffset` increases as you go down from center and `xoffset`\n   * increases to the right of center. The default is `[0, 0]`.\n   */\n  anchorText?: [number, number];\n  /**\n   * The anchor position (in pixels) of the cluster icon. This is the\n   * spot on the cluster icon that is to be aligned with the cluster position. The format is\n   * `[yoffset, xoffset]` where `yoffset` increases as you go down and\n   * `xoffset` increases to the right of the top-left corner of the icon. The default\n   * anchor position is the center of the cluster icon.\n   */\n  anchorIcon?: [number, number];\n  /**\n   * The color of the label text shown on the cluster icon.\n   * @default `\"black\"`\n   */\n  textColor?: string;\n  /** The size (in pixels) of the label text shown on the cluster icon.\n   * @default `11`\n   */\n  textSize?: number;\n\n  /** The line height (in pixels) of the label text shown on the cluster icon.\n   * @default the same as cluster icon height\n   */\n  textLineHeight?: number;\n  /**\n   * The value of the CSS `text-decoration`\n   * property for the label text shown on the cluster icon.\n   *\n   * @default `\"none\"`\n   */\n  textDecoration?: string;\n  /**\n   * The value of the CSS `font-weight`\n   * property for the label text shown on the cluster icon.\n   *\n   *  @default `\"bold\"`\n   */\n  fontWeight?: string;\n  /**\n   *  The value of the CSS `font-style`\n   *  property for the label text shown on the cluster icon.\n   *\n   *  @default `\"normal\"`\n   */\n  fontStyle?: string;\n  /**\n   *  The value of the CSS `font-family`\n   *  property for the label text shown on the cluster icon.\n   *  @default `\"Arial,sans-serif\"`\n   */\n  fontFamily?: string;\n  /**\n   * The position of the cluster icon image\n   * within the image defined by `url`. The format is `\"xpos ypos\"`\n   * (the same format as for the CSS `background-position` property). You must set\n   * this property appropriately when the image defined by `url` represents a sprite\n   * containing multiple images. Note that the position <i>must</i> be specified in px units.\n   *\n   * @default `\"0 0\"`\n   */\n  backgroundPosition?: string;\n}\n\n/**\n * @description This is an object containing general information about a cluster icon. This is\n *  the object that a `calculator` function returns.\n */\nexport interface ClusterIconInfo {\n  /**\n   * The text of the label to be shown on the cluster icon.\n   */\n  text: string;\n  /**\n   * The index plus 1 of the element in the `styles`\n   */\n  index: number;\n  /**\n   * The tooltip to display when the mouse moves over the cluster icon.\n   * If this value is `undefined` or `\"\"`, `title` is set to the\n   * value of the `title` property passed to the MarkerClusterer.\n   */\n  title: string;\n  /**\n   * An override for dynamic cluster icon url (if not provided, the component will use the default style icon)\n   */\n  url?: string;\n}\n\n/**\n * A cluster icon.\n */\nexport class ClusterIcon extends OverlayViewSafe {\n  private className_: string;\n  private center_: google.maps.LatLng = null;\n  private div_: HTMLDivElement = null;\n  private sums_: ClusterIconInfo = null;\n  private visible_ = false;\n\n  private style: ClusterIconStyle = null;\n\n  private anchorText_: [number, number];\n  private anchorIcon_: [number, number];\n\n  private boundsChangedListener_: google.maps.MapsEventListener;\n\n  /**\n   * @param cluster_ The cluster with which the icon is to be associated.\n   * @param styles_ An array of {@link ClusterIconStyle} defining the cluster icons\n   *  to use for various cluster sizes.\n   */\n  constructor(private cluster_: Cluster, private styles_: ClusterIconStyle[]) {\n    super();\n\n    this.setMap(cluster_.getMap()); // Note: this causes onAdd to be called\n  }\n\n  /**\n   * Adds the icon to the DOM.\n   */\n  onAdd(): void {\n    let cMouseDownInCluster: boolean;\n    let cDraggingMapByCluster: boolean;\n\n    const mc = this.cluster_.getMarkerClusterer();\n\n    const [major, minor] = google.maps.version.split(\".\");\n\n    const gmVersion = parseInt(major, 10) * 100 + parseInt(minor, 10);\n\n    this.div_ = document.createElement(\"div\");\n    if (this.visible_) {\n      this.show();\n    }\n\n    this.getPanes().overlayMouseTarget.appendChild(this.div_);\n\n    // Fix for Issue 157\n    this.boundsChangedListener_ = google.maps.event.addListener(\n      this.getMap(),\n      \"bounds_changed\",\n      () => {\n        cDraggingMapByCluster = cMouseDownInCluster;\n      }\n    );\n\n    google.maps.event.addDomListener(this.div_, \"mousedown\", () => {\n      cMouseDownInCluster = true;\n      cDraggingMapByCluster = false;\n    });\n\n    // March 1, 2018: Fix for this 3.32 exp bug, https://issuetracker.google.com/issues/73571522\n    // But it doesn't work with earlier releases so do a version check.\n    if (gmVersion >= 332) {\n      // Ugly version-dependent code\n      google.maps.event.addDomListener(this.div_, \"touchstart\", (e: Event) => {\n        e.stopPropagation();\n      });\n    }\n\n    google.maps.event.addDomListener(this.div_, \"click\", (e: Event) => {\n      cMouseDownInCluster = false;\n      if (!cDraggingMapByCluster) {\n        /**\n         * This event is fired when a cluster marker is clicked.\n         * @name MarkerClusterer#click\n         * @param {Cluster} c The cluster that was clicked.\n         * @event\n         */\n        google.maps.event.trigger(mc, \"click\", this.cluster_);\n        google.maps.event.trigger(mc, \"clusterclick\", this.cluster_); // deprecated name\n\n        // The default click handler follows. Disable it by setting\n        // the zoomOnClick property to false.\n        if (mc.getZoomOnClick()) {\n          // Zoom into the cluster.\n          const mz = mc.getMaxZoom();\n          const theBounds = this.cluster_.getBounds();\n          (mc.getMap() as google.maps.Map).fitBounds(theBounds);\n          // There is a fix for Issue 170 here:\n          setTimeout(() => {\n            (mc.getMap() as google.maps.Map).fitBounds(theBounds);\n            // Don't zoom beyond the max zoom level\n            if (mz !== null && mc.getMap().getZoom() > mz) {\n              mc.getMap().setZoom(mz + 1);\n            }\n          }, 100);\n        }\n\n        // Prevent event propagation to the map:\n        e.cancelBubble = true;\n        if (e.stopPropagation) {\n          e.stopPropagation();\n        }\n      }\n    });\n\n    google.maps.event.addDomListener(this.div_, \"mouseover\", () => {\n      /**\n       * This event is fired when the mouse moves over a cluster marker.\n       * @name MarkerClusterer#mouseover\n       * @param {Cluster} c The cluster that the mouse moved over.\n       * @event\n       */\n      google.maps.event.trigger(mc, \"mouseover\", this.cluster_);\n    });\n\n    google.maps.event.addDomListener(this.div_, \"mouseout\", () => {\n      /**\n       * This event is fired when the mouse moves out of a cluster marker.\n       * @name MarkerClusterer#mouseout\n       * @param {Cluster} c The cluster that the mouse moved out of.\n       * @event\n       */\n      google.maps.event.trigger(mc, \"mouseout\", this.cluster_);\n    });\n  }\n\n  /**\n   * Removes the icon from the DOM.\n   */\n  onRemove(): void {\n    if (this.div_ && this.div_.parentNode) {\n      this.hide();\n      google.maps.event.removeListener(this.boundsChangedListener_);\n      google.maps.event.clearInstanceListeners(this.div_);\n      this.div_.parentNode.removeChild(this.div_);\n      this.div_ = null;\n    }\n  }\n\n  /**\n   * Draws the icon.\n   */\n  draw(): void {\n    if (this.visible_) {\n      const pos = this.getPosFromLatLng_(this.center_);\n      this.div_.style.top = pos.y + \"px\";\n      this.div_.style.left = pos.x + \"px\";\n    }\n  }\n\n  /**\n   * Hides the icon.\n   */\n  hide(): void {\n    if (this.div_) {\n      this.div_.style.display = \"none\";\n    }\n    this.visible_ = false;\n  }\n\n  /**\n   * Positions and shows the icon.\n   */\n  show(): void {\n    if (this.div_) {\n      this.div_.className = this.className_;\n      this.div_.style.cssText = this.createCss_(\n        this.getPosFromLatLng_(this.center_)\n      );\n\n      this.div_.innerHTML =\n        (this.style.url ? this.getImageElementHtml() : \"\") +\n        this.getLabelDivHtml();\n\n      if (typeof this.sums_.title === \"undefined\" || this.sums_.title === \"\") {\n        this.div_.title = this.cluster_.getMarkerClusterer().getTitle();\n      } else {\n        this.div_.title = this.sums_.title;\n      }\n      this.div_.style.display = \"\";\n    }\n    this.visible_ = true;\n  }\n\n  private getLabelDivHtml(): string {\n    const mc = this.cluster_.getMarkerClusterer();\n    const ariaLabel = mc.ariaLabelFn(this.sums_.text);\n\n    const divStyle: { [key: string]: string } = {\n      position: \"absolute\",\n      top: coercePixels(this.anchorText_[0]),\n      left: coercePixels(this.anchorText_[1]),\n      color: this.style.textColor,\n      \"font-size\": coercePixels(this.style.textSize),\n      \"font-family\": this.style.fontFamily,\n      \"font-weight\": this.style.fontWeight,\n      \"font-style\": this.style.fontStyle,\n      \"text-decoration\": this.style.textDecoration,\n      \"text-align\": \"center\",\n      width: coercePixels(this.style.width),\n      \"line-height\": coercePixels(this.style.textLineHeight),\n    };\n\n    return `\n<div aria-label=\"${ariaLabel}\" style=\"${toCssText(divStyle)}\" tabindex=\"0\">\n  <span aria-hidden=\"true\">${this.sums_.text}</span>\n</div>\n`;\n  }\n\n  private getImageElementHtml(): string {\n    // NOTE: values must be specified in px units\n    const bp = (this.style.backgroundPosition || \"0 0\").split(\" \");\n    const spriteH = parseInt(bp[0].replace(/^\\s+|\\s+$/g, \"\"), 10);\n    const spriteV = parseInt(bp[1].replace(/^\\s+|\\s+$/g, \"\"), 10);\n\n    let dimensions: { [key: string]: string } = {};\n\n    if (this.cluster_.getMarkerClusterer().getEnableRetinaIcons()) {\n      dimensions = {\n        width: coercePixels(this.style.width),\n        height: coercePixels(this.style.height),\n      };\n    } else {\n      const [Y1, X1, Y2, X2] = [\n        -1 * spriteV,\n        -1 * spriteH + this.style.width,\n        -1 * spriteV + this.style.height,\n        -1 * spriteH,\n      ];\n      dimensions = {\n        clip: `rect(${Y1}px, ${X1}px, ${Y2}px, ${X2}px)`,\n      };\n    }\n\n    const overrideDimensionsDynamicIcon = this.sums_.url\n      ? { width: \"100%\", height: \"100%\" }\n      : {};\n\n    const cssText = toCssText({\n      position: \"absolute\",\n      top: coercePixels(spriteV),\n      left: coercePixels(spriteH),\n      ...dimensions,\n      ...overrideDimensionsDynamicIcon,\n    });\n\n    return `<img alt=\"${this.sums_.text}\" aria-hidden=\"true\" src=\"${this.style.url}\" style=\"${cssText}\"/>`;\n  }\n\n  /**\n   * Sets the icon styles to the appropriate element in the styles array.\n   *\n   * @ignore\n   * @param sums The icon label text and styles index.\n   */\n  useStyle(sums: ClusterIconInfo): void {\n    this.sums_ = sums;\n    let index = Math.max(0, sums.index - 1);\n    index = Math.min(this.styles_.length - 1, index);\n    this.style = this.sums_.url\n      ? { ...this.styles_[index], url: this.sums_.url }\n      : this.styles_[index];\n\n    this.anchorText_ = this.style.anchorText || [0, 0];\n    this.anchorIcon_ = this.style.anchorIcon || [\n      Math.floor(this.style.height / 2),\n      Math.floor(this.style.width / 2),\n    ];\n\n    this.className_ =\n      this.cluster_.getMarkerClusterer().getClusterClass() +\n      \" \" +\n      (this.style.className || \"cluster-\" + index);\n  }\n\n  /**\n   * Sets the position at which to center the icon.\n   *\n   * @param center The latlng to set as the center.\n   */\n  setCenter(center: google.maps.LatLng): void {\n    this.center_ = center;\n  }\n\n  /**\n   * Creates the `cssText` style parameter based on the position of the icon.\n   *\n   * @param pos The position of the icon.\n   * @return The CSS style text.\n   */\n  private createCss_(pos: google.maps.Point): string {\n    return toCssText({\n      \"z-index\": `${this.cluster_.getMarkerClusterer().getZIndex()}`,\n      top: coercePixels(pos.y),\n      left: coercePixels(pos.x),\n      width: coercePixels(this.style.width),\n      height: coercePixels(this.style.height),\n      cursor: \"pointer\",\n      position: \"absolute\",\n      \"-webkit-user-select\": \"none\",\n      \"-khtml-user-select\": \"none\",\n      \"-moz-user-select\": \"none\",\n      \"-o-user-select\": \"none\",\n      \"user-select\": \"none\",\n    });\n  }\n\n  /**\n   * Returns the position at which to place the DIV depending on the latlng.\n   *\n   * @param latlng The position in latlng.\n   * @return The position in pixels.\n   */\n  private getPosFromLatLng_(latlng: google.maps.LatLng): google.maps.Point {\n    const pos = this.getProjection().fromLatLngToDivPixel(latlng);\n    pos.x = Math.floor(pos.x - this.anchorIcon_[1]);\n    pos.y = Math.floor(pos.y - this.anchorIcon_[0]);\n    return pos;\n  }\n}\n","import MarkerClusterer from '@googlemaps/markerclustererplus';\r\nimport { Component, getContext } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\nimport { MAP_STYLE } from './map.style';\r\n\r\nconst USE_CLUSTERER = true;\r\n\r\nlet GOOGLE_MAPS;\r\n\r\nexport class MapComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst apiKey = environment.googleMaps.apiKey;\r\n\t\tif (GOOGLE_MAPS != null) {\r\n\t\t\tthis.initMap();\r\n\t\t} else {\r\n\t\t\twindow.onGoogleMapsLoaded = () => {\r\n\t\t\t\tGOOGLE_MAPS = window.google.maps;\r\n\t\t\t\tthis.initMap();\r\n\t\t\t};\r\n\t\t\tconst script = document.createElement('script');\r\n\t\t\tscript.setAttribute('type', 'text/javascript');\r\n\t\t\tscript.setAttribute('src', `https://maps.googleapis.com/maps/api/js?callback=onGoogleMapsLoaded${apiKey ? `&key=${apiKey}` : ''}&libraries=places`);\r\n\t\t\t(document.getElementsByTagName('head')[0] || document.documentElement).appendChild(script);\r\n\t\t}\r\n\t}\r\n\r\n\tinitMap() {\r\n\t\tconst google = window.google;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst center = this.center;\r\n\r\n\t\tconst item = this.items && this.items.length ? this.items[0] : null;\r\n\r\n\t\tconst position = item ? new google.maps.LatLng(item.latitude, item.longitude) : null;\r\n\r\n\t\tconst mapOptions = {\r\n\t\t\tzoom: 15, // 9,\r\n\t\t\tcenter: position,\r\n\r\n\t\t\tscrollwheel: false,\r\n\t\t\t// mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n\t\t\tzoomControlOptions: {\r\n\t\t\t\tstyle: google.maps.ZoomControlStyle.DEFAULT\r\n\t\t\t},\r\n\t\t\t// overviewMapControl: true,\r\n\r\n\t\t\tscaleControl: false,\r\n\t\t\tzoomControl: true,\r\n\t\t\tmapTypeControl: false,\r\n\t\t\tstreetViewControl: false,\r\n\t\t\trotateControl: true,\r\n\t\t\tfullscreenControl: true,\r\n\r\n\t\t\tstyles: MAP_STYLE\r\n\t\t};\r\n\r\n\t\tconst mapElement = node.querySelector('.map');\r\n\r\n\t\tconst map = this.map = new google.maps.Map(mapElement, mapOptions);\r\n\r\n\t\tthis.addMarkers(this.items);\r\n\r\n\t\tif (!this.items) {\r\n\t\t\tmap.fitBounds(this.getItalyBounds());\r\n\t\t}\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tthis.clearMarkers();\r\n\t\tthis.addMarkers(this.items);\r\n\t}\r\n\r\n\tcalculateDistance(lat1, lon1, lat2, lon2, unit) {\r\n\t\tif ((lat1 == lat2) && (lon1 == lon2)) {\r\n\t\t\treturn 0;\r\n\t\t} else {\r\n\t\t\tconst radlat1 = Math.PI * lat1 / 180;\r\n\t\t\tconst radlat2 = Math.PI * lat2 / 180;\r\n\t\t\tconst theta = lon1 - lon2;\r\n\t\t\tconst radtheta = Math.PI * theta / 180;\r\n\t\t\tlet dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);\r\n\t\t\tif (dist > 1) {\r\n\t\t\t\tdist = 1;\r\n\t\t\t}\r\n\t\t\tdist = Math.acos(dist);\r\n\t\t\tdist = dist * 180 / Math.PI;\r\n\t\t\tdist = dist * 60 * 1.1515;\r\n\t\t\tif (unit == \"K\") {\r\n\t\t\t\tdist = dist * 1.609344;\r\n\t\t\t}\r\n\t\t\tif (unit == \"N\") {\r\n\t\t\t\tdist = dist * 0.8684;\r\n\t\t\t}\r\n\t\t\treturn dist;\r\n\t\t}\r\n\t}\r\n\r\n\tclearMarkers() {\r\n\t\tif (this.markerCluster) {\r\n\t\t\tthis.markerCluster.clearMarkers();\r\n\t\t}\r\n\t\tif (this.markers) {\r\n\t\t\tthis.markers.forEach(marker => marker.setMap(null));\r\n\t\t}\r\n\t}\r\n\r\n\taddMarkers(items) {\r\n\t\tconst map = this.map;\r\n\t\tif (map && items) {\r\n\t\t\tconst bounds = new google.maps.LatLngBounds();\r\n\r\n\t\t\tconst markers = items.map((item) => {\r\n\r\n\t\t\t\tconst position = new google.maps.LatLng(item.latitude, item.longitude);\r\n\r\n\t\t\t\tbounds.extend(position);\r\n\r\n\t\t\t\tlet content = /* html */`<div class=\"card--store-locator\">\r\n\t\t\t\t\t<div class=\"card__content\">\r\n\t\t\t\t\t\t<div class=\"card__name\"><span>${item.name}</span></div>\r\n\t\t\t\t\t\t<div class=\"card__address\">${item.address}</div>\r\n\t\t\t\t\t\t<div class=\"card__city\">${item.city}</div>\r\n\t\t\t\t\t\t<div class=\"card__country\">${item.country.name}</div>\r\n\t\t\t\t\t\t${item.phone ? `<a class=\"card__phone\" href=\"tel:${item.phone}\">${item.phone}</a>` : ''}\r\n\t\t\t\t\t\t${item.fax ? `<a class=\"card__fax\" href=\"tel:${item.fax}\">${item.fax}</a>` : ''}\r\n\t\t\t\t\t\t${item.email ? `<a class=\"card__email\" href=\"mailto:${item.email}\">${item.email}</a>` : ''}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>`;\r\n\r\n\t\t\t\t/*\r\n\t\t\t\t`<div class=\"marker__content\">\r\n\t\t\t\t\t<div class=\"title\"><span>${item.name}</span></div>\r\n\t\t\t\t\t<div class=\"group group--info\">\r\n\t\t\t\t\t\t<div class=\"address\">\r\n\t\t\t\t\t\t\t${item.address}<br>\r\n\t\t\t\t\t\t\t${item.city} ${item.country}<br>\r\n\t\t\t\t\t\t\t${item.phone ? `<span><a href=\"tel:${item.phone}\">${item.phone}</a><br></span>` : ''}\r\n\t\t\t\t\t\t\t${item.fax ? `<span><a href=\"tel:${item.fax}\">${item.fax}</a><br></span>` : ''}\r\n\t\t\t\t\t\t\t${item.email ? `<span><a href=\"mailto:${item.email}\">${item.email}</a><br></span>` : ''}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t${item.address !== '' ? `<div class=\"distance\">${this.labels.approximately} <b>${Math.floor(item.distance)} km</b></div>` : ``}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"group group--cta\">\r\n\t\t\t\t\t\t${item.address !== '' ? `<a id=\"locator-marker\" href=\"https://www.google.it/maps/dir/${position.lat()},${position.lng()}/${item.title}/@${item.latitude},${item.longitude}/\" target=\"_blank\" class=\"btn btn--link\"><span>${this.labels.reachStore}</span></a>` : ``}\r\n\t\t\t\t\t\t${item.type === 8 || item.type === 9 ? `<a id=\"contact-item\" href=\"${window.itemLocatorSettings.urlStoreContact}?item=${item.id}\" target=\"_blank\" class=\"btn btn--link\"><span>${this.labels.contactStore}</span></a>` : ''}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>`\r\n\t\t\t\t*/\r\n\r\n\t\t\t\tconst markerImage = new google.maps.MarkerImage(\r\n\t\t\t\t\t`${environment.assets}img/maps/marker-sm.png`,\r\n\t\t\t\t\tnew google.maps.Size(24, 32),\r\n\t\t\t\t);\r\n\r\n\t\t\t\tlet marker = new google.maps.Marker({\r\n\t\t\t\t\tposition: position,\r\n\t\t\t\t\tmap: USE_CLUSTERER ? null : map,\r\n\t\t\t\t\ticon: markerImage,\r\n\t\t\t\t\ttitle: item.title,\r\n\t\t\t\t\titem: item,\r\n\t\t\t\t\tcontent: content,\r\n\t\t\t\t});\r\n\t\t\t\tmarker.addListener('click', () => {\r\n\t\t\t\t\tthis.setMarkerWindow(marker.position, content);\r\n\t\t\t\t\t// this.scrollToStore(item);\r\n\t\t\t\t\t// GtmService.push({ event: 'dealerlocator', action: 'marker-click', label: item.title });\r\n\t\t\t\t});\r\n\t\t\t\titem.marker = marker;\r\n\t\t\t\treturn marker;\r\n\t\t\t});\r\n\r\n\t\t\tif (USE_CLUSTERER) {\r\n\t\t\t\tconst markerCluster = new MarkerClusterer(this.map, markers, {\r\n\t\t\t\t\timagePath: `${environment.assets}img/maps/cluster-`,\r\n\t\t\t\t});\r\n\t\t\t\tconst styles = markerCluster.getStyles();\r\n\t\t\t\tconst sizes = [48, 56, 64, 72, 80];\r\n\t\t\t\tstyles.forEach((style, i) => {\r\n\t\t\t\t\tstyle.width = sizes[i];\r\n\t\t\t\t\tstyle.height = sizes[i];\r\n\t\t\t\t\tstyle.textLineHeight = sizes[i];\r\n\t\t\t\t\tstyle.textSize = Math.floor(style.width / 5);\r\n\t\t\t\t\tstyle.textColor = '#ffffff';\r\n\t\t\t\t});\r\n\t\t\t\tmarkerCluster.setStyles(styles);\r\n\t\t\t\tthis.markerCluster = markerCluster;\r\n\t\t\t}\r\n\r\n\t\t\tthis.markers = markers;\r\n\r\n\t\t\tmap.fitBounds(bounds);\r\n\t\t}\r\n\t}\r\n\r\n\tgetGeolocation(map) {\r\n\t\tthis.error = null;\r\n\t\tthis.busyLocation = true;\r\n\t\tlet position = this.map.getCenter();\r\n\r\n\t\t// Try HTML5 geolocation.\r\n\t\tif (navigator.geolocation) {\r\n\t\t\tnavigator.geolocation.getCurrentPosition((location) => {\r\n\t\t\t\tposition = new google.maps.LatLng(location.coords.latitude, location.coords.longitude);\r\n\r\n\t\t\t\tconst geocoder = this.geocoder || new google.maps.Geocoder();\r\n\t\t\t\tthis.geocoder = geocoder;\r\n\t\t\t\tgeocoder.geocode({ 'location': position }, (results, status) => {\r\n\t\t\t\t\tif (status == 'OK') {\r\n\t\t\t\t\t\tvar filteredInfoCity = results.filter(function(address_component) {\r\n\t\t\t\t\t\t\treturn address_component.types.includes(\"locality\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.model.city = filteredInfoCity.length ? filteredInfoCity[0].formatted_address : undefined;\r\n\t\t\t\t\t\tthis.model.address = results[0].formatted_address;\r\n\r\n\t\t\t\t\t\tfor (let i = 0; i < results[0].address_components.length; i++) {\r\n\t\t\t\t\t\t\tif (results[0].address_components[i].types[0] == \"country\" || results[0].address_components[i].types[0] == \"political\") {\r\n\t\t\t\t\t\t\t\tthis.searchCountry = results[0].address_components[i].short_name;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.setInfoWindow(position, 1);\r\n\t\t\t\t\t\tthis.searchPosition(position).finally(() => this.busyLocation = false);\r\n\t\t\t\t\t\tthis.map.setCenter(position);\r\n\t\t\t\t\t\tthis.map.setZoom(ZOOM_LEVEL);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}, () => {\r\n\t\t\t\tthis.setInfoWindow(position, 2);\r\n\t\t\t\tthis.searchPosition(position).finally(() => this.busyLocation = false);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\t// Browser doesn't support Geolocation\r\n\t\t\tthis.setInfoWindow(position, 3);\r\n\t\t\tthis.searchPosition(position).finally(() => this.busyLocation = false);\r\n\t\t}\r\n\t}\r\n\r\n\tfitBounds(items) {\r\n\t\tif (items.length) {\r\n\t\t\tconst bounds = new google.maps.LatLngBounds();\r\n\t\t\titems.forEach((item) => {\r\n\t\t\t\tconst position = new google.maps.LatLng(item.latitude, item.longitude);\r\n\t\t\t\tbounds.extend(position);\r\n\t\t\t});\r\n\t\t\tthis.map.fitBounds(bounds);\r\n\t\t\t// console.log('fitBounds');\r\n\t\t}\r\n\t}\r\n\r\n\tfindNearStores(items, position) {\r\n\t\tif (items) {\r\n\t\t\titems.forEach((item) => {\r\n\t\t\t\titem.distance = this.calculateDistance(item.latitude, item.longitude, position.lat(), position.lng(), 'K');\r\n\t\t\t\titem.visible = (item.cod_stato == window.userCountry || !window.userCountry) && item.distance <= MAX_DISTANCE /* Km */;\r\n\t\t\t\tif (item.visible) {\r\n\t\t\t\t\tif (item.removed) {\r\n\t\t\t\t\t\tthis.markerCluster.addMarker(item.marker);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdelete item.removed;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.markerCluster.removeMarker(item.marker);\r\n\t\t\t\t\titem.removed = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\titems = items.slice();\r\n\t\t\titems.sort((a, b) => {\r\n\t\t\t\treturn a.distance * (a.importante ? 0.5 : 1) - b.distance * (b.importante ? 0.5 : 1);\r\n\t\t\t});\r\n\t\t\tconst visibleStores = items.filter(item => item.visible).slice(0, 50);\r\n\t\t\tthis.$timeout(() => {\r\n\t\t\t\tthis.visibleStores = visibleStores;\r\n\t\t\t}, 1);\r\n\t\t\t// console.log('findNearStores', visibleStores);\r\n\t\t\treturn visibleStores;\r\n\t\t}\r\n\t}\r\n\r\n\tpanTo(item) {\r\n\t\tconst position = new google.maps.LatLng(item.latitude, item.longitude);\r\n\t\tthis.map.setZoom(ZOOM_LEVEL);\r\n\t\tthis.map.panTo(position);\r\n\t\tconst marker = this.markers.find(x => x.item === item);\r\n\t\tthis.setMarkerWindow(marker.position, marker.content);\r\n\t}\r\n\r\n\tsetMarkerWindow(position, content) {\r\n\t\tif (position) {\r\n\t\t\tconst markerWindow = this.markerWindow || new google.maps.InfoWindow({\r\n\t\t\t\tpixelOffset: new google.maps.Size(0, -35)\r\n\t\t\t});\r\n\t\t\tthis.markerWindow = markerWindow;\r\n\t\t\tmarkerWindow.setPosition(position);\r\n\t\t\tmarkerWindow.setContent(content);\r\n\t\t\tmarkerWindow.open(this.map);\r\n\t\t} else {\r\n\t\t\tthis.closeMarkerWindow();\r\n\t\t}\r\n\t}\r\n\r\n\tcloseMarkerWindow() {\r\n\t\tif (this.markerWindow) {\r\n\t\t\tthis.markerWindow.close();\r\n\t\t}\r\n\t}\r\n\r\n\tgetWorldBounds() {\r\n\t\treturn new google.maps.LatLngBounds(\r\n\t\t\tnew google.maps.LatLng(61, 60),\r\n\t\t\tnew google.maps.LatLng(-37, -92)\r\n\t\t);\r\n\t}\r\n\r\n\tgetItalyBounds() {\r\n\t\treturn new google.maps.LatLngBounds(\r\n\t\t\tnew google.maps.LatLng(46.4657567, 5.233972),\r\n\t\t\tnew google.maps.LatLng(36.8257773, 18.963541)\r\n\t\t);\r\n\t}\r\n}\r\n\r\nMapComponent.meta = {\r\n\tselector: '[map]',\r\n\tinputs: ['center', 'items'],\r\n};\r\n","/**\n * Copyright 2019 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { MarkerClusterer, ClusterAugmentedMarker } from \"./markerclusterer\";\nimport { ClusterIcon } from \"./cluster-icon\";\n\n/**\n * Creates a single cluster that manages a group of proximate markers.\n *  Used internally, do not call this constructor directly.\n */\nexport class Cluster {\n  private map_ = this.markerClusterer_.getMap() as google.maps.Map;\n  private minClusterSize_: number = this.markerClusterer_.getMinimumClusterSize();\n  private averageCenter_: boolean = this.markerClusterer_.getAverageCenter();\n  private markers_: ClusterAugmentedMarker[] = []; // TODO: type;\n  private center_: google.maps.LatLng = null;\n  private bounds_: google.maps.LatLngBounds = null;\n  private clusterIcon_ = new ClusterIcon(\n    this,\n    this.markerClusterer_.getStyles()\n  );\n\n  /**\n   *\n   * @param markerClusterer_ The `MarkerClusterer` object with which this\n   *  cluster is associated.\n   */\n  constructor(private markerClusterer_: MarkerClusterer) {}\n\n  /**\n   * Returns the number of markers managed by the cluster. You can call this from\n   * a `click`, `mouseover`, or `mouseout` event handler for the `MarkerClusterer` object.\n   *\n   * @return The number of markers in the cluster.\n   */\n  public getSize(): number {\n    return this.markers_.length;\n  }\n\n  /**\n   * Returns the array of markers managed by the cluster. You can call this from\n   * a `click`, `mouseover`, or `mouseout` event handler for the `MarkerClusterer` object.\n   *\n   * @return The array of markers in the cluster.\n   */\n  public getMarkers(): google.maps.Marker[] {\n    return this.markers_;\n  }\n\n  /**\n   * Returns the center of the cluster. You can call this from\n   * a `click`, `mouseover`, or `mouseout` event handler\n   * for the `MarkerClusterer` object.\n   *\n   * @return The center of the cluster.\n   */\n  public getCenter(): google.maps.LatLng {\n    return this.center_;\n  }\n\n  /**\n   * Returns the map with which the cluster is associated.\n   *\n   * @return The map.\n   * @ignore\n   */\n  public getMap(): google.maps.Map {\n    return this.map_;\n  }\n\n  /**\n   * Returns the `MarkerClusterer` object with which the cluster is associated.\n   *\n   * @return The associated marker clusterer.\n   * @ignore\n   */\n  public getMarkerClusterer(): MarkerClusterer {\n    return this.markerClusterer_;\n  }\n\n  /**\n   * Returns the bounds of the cluster.\n   *\n   * @return the cluster bounds.\n   * @ignore\n   */\n  public getBounds(): google.maps.LatLngBounds {\n    const bounds = new google.maps.LatLngBounds(this.center_, this.center_);\n    const markers = this.getMarkers();\n    for (let i = 0; i < markers.length; i++) {\n      bounds.extend(markers[i].getPosition());\n    }\n    return bounds;\n  }\n\n  /**\n   * Removes the cluster from the map.\n   *\n   * @ignore\n   */\n  public remove(): void {\n    this.clusterIcon_.setMap(null);\n    this.markers_ = [];\n    delete this.markers_;\n  }\n\n  /**\n   * Adds a marker to the cluster.\n   *\n   * @param marker The marker to be added.\n   * @return True if the marker was added.\n   * @ignore\n   */\n  public addMarker(\n    marker: google.maps.Marker & { isAdded?: boolean }\n  ): boolean {\n    if (this.isMarkerAlreadyAdded_(marker)) {\n      return false;\n    }\n\n    if (!this.center_) {\n      this.center_ = marker.getPosition();\n      this.calculateBounds_();\n    } else {\n      if (this.averageCenter_) {\n        const l = this.markers_.length + 1;\n        const lat =\n          (this.center_.lat() * (l - 1) + marker.getPosition().lat()) / l;\n        const lng =\n          (this.center_.lng() * (l - 1) + marker.getPosition().lng()) / l;\n        this.center_ = new google.maps.LatLng(lat, lng);\n        this.calculateBounds_();\n      }\n    }\n\n    marker.isAdded = true;\n    this.markers_.push(marker);\n\n    const mCount = this.markers_.length;\n    const mz = this.markerClusterer_.getMaxZoom();\n    if (mz !== null && this.map_.getZoom() > mz) {\n      // Zoomed in past max zoom, so show the marker.\n      if (marker.getMap() !== this.map_) {\n        marker.setMap(this.map_);\n      }\n    } else if (mCount < this.minClusterSize_) {\n      // Min cluster size not reached so show the marker.\n      if (marker.getMap() !== this.map_) {\n        marker.setMap(this.map_);\n      }\n    } else if (mCount === this.minClusterSize_) {\n      // Hide the markers that were showing.\n      for (let i = 0; i < mCount; i++) {\n        this.markers_[i].setMap(null);\n      }\n    } else {\n      marker.setMap(null);\n    }\n\n    return true;\n  }\n\n  /**\n   * Determines if a marker lies within the cluster's bounds.\n   *\n   * @param marker The marker to check.\n   * @return True if the marker lies in the bounds.\n   * @ignore\n   */\n  public isMarkerInClusterBounds(marker: google.maps.Marker): boolean {\n    return this.bounds_.contains(marker.getPosition());\n  }\n\n  /**\n   * Calculates the extended bounds of the cluster with the grid.\n   */\n  private calculateBounds_(): void {\n    const bounds = new google.maps.LatLngBounds(this.center_, this.center_);\n    this.bounds_ = this.markerClusterer_.getExtendedBounds(bounds);\n  }\n\n  /**\n   * Updates the cluster icon.\n   */\n  public updateIcon(): void {\n    const mCount = this.markers_.length;\n    const mz = this.markerClusterer_.getMaxZoom();\n\n    if (mz !== null && this.map_.getZoom() > mz) {\n      this.clusterIcon_.hide();\n      return;\n    }\n\n    if (mCount < this.minClusterSize_) {\n      // Min cluster size not yet reached.\n      this.clusterIcon_.hide();\n      return;\n    }\n\n    const numStyles = this.markerClusterer_.getStyles().length;\n    const sums = this.markerClusterer_.getCalculator()(\n      this.markers_,\n      numStyles\n    );\n    this.clusterIcon_.setCenter(this.center_);\n    this.clusterIcon_.useStyle(sums);\n    this.clusterIcon_.show();\n  }\n\n  /**\n   * Determines if a marker has already been added to the cluster.\n   *\n   * @param marker The marker to check.\n   * @return True if the marker has already been added.\n   */\n  private isMarkerAlreadyAdded_(marker: google.maps.Marker): boolean {\n    if (this.markers_.indexOf) {\n      return this.markers_.indexOf(marker) !== -1;\n    } else {\n      for (let i = 0; i < this.markers_.length; i++) {\n        if (marker === this.markers_[i]) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n}\n","/**\n * Copyright 2019 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @name MarkerClustererPlus for Google Maps V3\n * @author Gary Little\n * @fileoverview\n * The library creates and manages per-zoom-level clusters for large amounts of markers.\n * <p>\n * This is an enhanced V3 implementation of the V2 MarkerClusterer by Xiaoxi Wu. It is\n * based on the V3 MarkerClusterer port by Luke Mahe. MarkerClustererPlus was created\n * by Gary Little.\n * <p>\n * v2.0 release: MarkerClustererPlus v2.0 is backward compatible with MarkerClusterer v1.0. It\n *  adds support for the `ignoreHidden`, `title`, `batchSizeIE`,\n *  and `calculator` properties as well as support for four more events. It also allows\n *  greater control over the styling of the text that appears on the cluster marker. The\n *  documentation has been significantly improved and the overall code has been simplified and\n *  polished. Very large numbers of markers can now be managed without causing Javascript timeout\n *  errors on Internet Explorer. Note that the name of the `clusterclick` event has been\n *  deprecated. The new name is `click`, so please change your application code now.\n */\n\nimport { ClusterIconInfo, ClusterIconStyle } from \"./cluster-icon\";\n\nimport { Cluster } from \"./cluster\";\nimport { OverlayViewSafe } from \"./overlay-view-safe\";\n\n/**\n * @param text The text attribute of the cluster\n */\ntype AriaLabelFn = (text: string) => string;\n\nexport type Calculator = (\n  markers: google.maps.Marker[],\n  clusterIconStylesCount: number\n) => ClusterIconInfo;\n\nexport interface ClusterAugmentedMarker extends google.maps.Marker {\n  isAdded?: boolean;\n}\n\n/**\n * This event is fired on the {@link MarkerClusterer} instance when the `MarkerClusterer` stops clustering markers.\n *\n * Example:\n * ```typescript\n *  mc.addListener('clusteringend', (mc: MarkerClusterer) => {})\n * ```\n *\n * @param mc The MarkerClusterer whose markers are being clustered.\n * @event clusteringend\n */\nexport declare function clusteringend(mc: MarkerClusterer): void;\n\n/**\n * This event is fired on the {@link MarkerClusterer} instance when the `MarkerClusterer` begins clustering markers.\n *\n * Example:\n * ```typescript\n *  mc.addListener('clusteringbegin', (mc: MarkerClusterer) => {})\n * ```\n *\n * @param mc The MarkerClusterer whose markers are being clustered.\n * @event clusteringbegin\n */\nexport declare function clusteringbegin(mc: MarkerClusterer): void;\n\n/**\n * Optional parameter passed to the {@link MarkerClusterer} constructor.\n */\nexport interface MarkerClustererOptions {\n  /**\n   * The grid size of a cluster in pixels. The grid is a square.\n   *\n   * @default `60`\n   */\n  gridSize?: number;\n  /**\n   * The maximum zoom level at which clustering is enabled or\n   * `null` if clustering is to be enabled at all zoom levels.\n   *\n   * @default `null`\n   */\n  maxZoom?: number;\n\n  /**\n   * Whether to zoom the map when a cluster marker is\n   * clicked. You may want to set this to `false` if you have installed a handler\n   * for the `click` event and it deals with zooming on its own.\n   *\n   * @default `true`\n   */\n  zoomOnClick?: boolean;\n  /***\n   * Whether the position of a cluster marker should be\n   * the average position of all markers in the cluster. If set to `false`, the\n   * cluster marker is positioned at the location of the first marker added to the cluster.\n   *\n   * @default `false`\n   */\n  averageCenter?: boolean;\n  /**\n   * The minimum number of markers needed in a cluster\n   * before the markers are hidden and a cluster marker appears.\n   *\n   * @default `2`\n   */\n  minimumClusterSize?: number;\n\n  /**\n   *  the z-index of a cluster.\n   *\n   *  @default `google.maps.Marker.MAX_ZINDEX + 1`\n   */\n  zIndex?: number;\n\n  /**\n   * Whether to ignore hidden markers in clusters. You\n   * may want to set this to `true` to ensure that hidden markers are not included\n   * in the marker count that appears on a cluster marker (this count is the value of the\n   * `text` property of the result returned by the default  {@link calculator}).\n   * If set to `true` and you change the visibility of a marker being clustered, be\n   * sure to also call {@link MarkerClusterer#repaint()}.\n   *\n   * @default `false`\n   */\n  ignoreHidden?: boolean;\n  /**\n   * The tooltip to display when the mouse moves over a cluster\n   * marker. (Alternatively, you can use a custom `calculator` function to specify a\n   * different tooltip for each cluster marker.)\n   *\n   * @default `\"\"`\n   */\n  title?: string;\n  /**\n   * The function used to determine\n   * the text to be displayed on a cluster marker and the index indicating which style to use\n   * for the cluster marker. The input parameters for the function are (1) the array of markers\n   * represented by a cluster marker and (2) the number of cluster icon styles. It returns a\n   * {@link ClusterIconInfo} object. The default `calculator` returns a\n   * `text` property which is the number of markers in the cluster and an\n   * `index` property which is one higher than the lowest integer such that\n   * `10^i` exceeds the number of markers in the cluster, or the size of the styles\n   * array, whichever is less. The `styles` array element used has an index of\n   * `index` minus 1. For example, the default `calculator` returns a\n   * `text` value of `\"125\"` and an `index` of `3`\n   * for a cluster icon representing 125 markers so the element used in the `styles`\n   * array is `2`. A `calculator` may also return a `title`\n   * property that contains the text of the tooltip to be used for the cluster marker. If\n   * `title` is not defined, the tooltip is set to the value of the `title`\n   * property for the MarkerClusterer.\n   *\n   * @default {@link MarkerClusterer.CALCULATOR}\n   */\n  calculator?: Calculator;\n  /**\n   * The name of the CSS class defining general styles\n   * for the cluster markers. Use this class to define CSS styles that are not set up by the code\n   * that processes the `styles` array.\n   *\n   * @default `\"cluster\"`\n   */\n  clusterClass?: string;\n  /**\n   * An array of {@link ClusterIconStyle} elements defining the styles\n   * of the cluster markers to be used. The element to be used to style a given cluster marker\n   * is determined by the function defined by the `calculator` property.\n   * The default is an array of {@link ClusterIconStyle} elements whose properties are derived\n   * from the values for `imagePath`, `imageExtension`, and `imageSizes`.\n   *\n   * @default `styles`\n   */\n  styles?: ClusterIconStyle[];\n  /**\n   * Whether to allow the use of cluster icons that\n   * have sizes that are some multiple (typically double) of their actual display size. Icons such\n   * as these look better when viewed on high-resolution monitors such as Apple's Retina displays.\n   * Note: if this property is `true`, sprites cannot be used as cluster icons.\n   *\n   * @default `false`\n   */\n  enableRetinaIcons?: boolean;\n  /**\n   * Set this property to the number of markers to be processed in a single batch when using\n   * a browser other than Internet Explorer (for Internet Explorer, use the batchSizeIE property instead).\n   *\n   * @default `MarkerClusterer.BATCH_SIZE`\n   */\n  batchSize?: number;\n  /**\n   * When Internet Explorer is\n   * being used, markers are processed in several batches with a small delay inserted between\n   * each batch in an attempt to avoid Javascript timeout errors. Set this property to the\n   * number of markers to be processed in a single batch; select as high a number as you can\n   * without causing a timeout error in the browser. This number might need to be as low as 100\n   * if 15,000 markers are being managed, for example.\n   *\n   * @default `MarkerClusterer.BATCH_SIZE_IE`\n   */\n  batchSizeIE?: number;\n  /**\n   * The full URL of the root name of the group of image files to use for cluster icons.\n   * The complete file name is of the form `imagePath`n.`imageExtension`\n   * where n is the image file number (1, 2, etc.).\n   *\n   * @default `MarkerClusterer.IMAGE_PATH`\n   */\n  imagePath?: string;\n  /**\n   * The extension name for the cluster icon image files (e.g., `\"png\"` or\n   * `\"jpg\"`).\n   *\n   * @default `MarkerClusterer.IMAGE_EXTENSION`\n   */\n  imageExtension?: string;\n  /**\n   * An array of numbers containing the widths of the group of\n   * `imagePath`n.`imageExtension` image files.\n   * (The images are assumed to be square.)\n   *\n   * @default `MarkerClusterer.IMAGE_SIZES`\n   */\n  imageSizes?: number[];\n  /**\n   * A function to take the text attribute associated with the cluster and output a string to attach an\n   * ariaLabel to the cluster\n   */\n  ariaLabelFn?: AriaLabelFn;\n}\n\n/**\n * @ignore\n */\nconst getOption = <T, K extends keyof T>(\n  options: T,\n  prop: K,\n  def: T[K]\n): T[K] => {\n  if (options[prop] !== undefined) {\n    return options[prop];\n  } else {\n    return def;\n  }\n};\n\nexport class MarkerClusterer extends OverlayViewSafe {\n  /**\n   * The number of markers to process in one batch.\n   */\n  static BATCH_SIZE = 2000;\n\n  /**\n   * The number of markers to process in one batch (IE only).\n   */\n  static BATCH_SIZE_IE = 500;\n\n  /**\n   * The default root name for the marker cluster images.\n   */\n  static IMAGE_PATH = \"../images/m\";\n\n  /**\n   * The default extension name for the marker cluster images.\n   */\n  static IMAGE_EXTENSION = \"png\";\n\n  /**\n   * The default array of sizes for the marker cluster images.\n   */\n  static IMAGE_SIZES: number[] = [53, 56, 66, 78, 90];\n\n  private markers_: ClusterAugmentedMarker[] = [];\n  private clusters_: Cluster[] = [];\n  private listeners_: google.maps.MapsEventListener[] = [];\n\n  private activeMap_: google.maps.Map = null;\n  private ready_ = false;\n\n  public ariaLabelFn = this.options.ariaLabelFn || ((): string => \"\");\n\n  private zIndex_ =\n    this.options.zIndex || Number(google.maps.Marker.MAX_ZINDEX) + 1;\n  private gridSize_ = this.options.gridSize || 60;\n  private minClusterSize_ = this.options.minimumClusterSize || 2;\n  private maxZoom_ = this.options.maxZoom || null;\n  private styles_: ClusterIconStyle[] = this.options.styles || [];\n  private title_ = this.options.title || \"\";\n\n  private zoomOnClick_ = getOption(this.options, \"zoomOnClick\", true);\n  private averageCenter_ = getOption(this.options, \"averageCenter\", false);\n\n  private ignoreHidden_ = getOption(this.options, \"ignoreHidden\", false);\n  private enableRetinaIcons_ = getOption(\n    this.options,\n    \"enableRetinaIcons\",\n    false\n  );\n\n  private imagePath_ = this.options.imagePath || MarkerClusterer.IMAGE_PATH;\n  private imageExtension_ =\n    this.options.imageExtension || MarkerClusterer.IMAGE_EXTENSION;\n  private imageSizes_ = this.options.imageSizes || MarkerClusterer.IMAGE_SIZES;\n  private calculator_ = this.options.calculator || MarkerClusterer.CALCULATOR;\n  private batchSize_ = this.options.batchSize || MarkerClusterer.BATCH_SIZE;\n  private batchSizeIE_ =\n    this.options.batchSizeIE || MarkerClusterer.BATCH_SIZE_IE;\n  private clusterClass_ = this.options.clusterClass || \"cluster\";\n\n  private prevZoom_: number;\n  private timerRefStatic: number;\n\n  /**\n   * Creates a MarkerClusterer object with the options specified in {@link MarkerClustererOptions}.\n   * @param map The Google map to attach to.\n   * @param markers The markers to be added to the cluster.\n   * @param options The optional parameters.\n   */\n  constructor(\n    map: google.maps.Map,\n    markers: google.maps.Marker[] = [],\n    private options: MarkerClustererOptions = {}\n  ) {\n    super();\n\n    if (navigator.userAgent.toLowerCase().indexOf(\"msie\") !== -1) {\n      // Try to avoid IE timeout when processing a huge number of markers:\n      this.batchSize_ = this.batchSizeIE_;\n    }\n\n    this.setupStyles_();\n\n    this.addMarkers(markers, true);\n    this.setMap(map); // Note: this causes onAdd to be called\n  }\n\n  /**\n   * Implementation of the onAdd interface method.\n   * @ignore\n   */\n  onAdd(): void {\n    this.activeMap_ = this.getMap() as google.maps.Map;\n    this.ready_ = true;\n\n    this.repaint();\n\n    this.prevZoom_ = this.getMap().getZoom();\n\n    // Add the map event listeners\n    this.listeners_ = [\n      google.maps.event.addListener(this.getMap(), \"zoom_changed\", () => {\n        const map: google.maps.Map & {\n          minZoom: number;\n          maxZoom: number;\n          mapTypes: { [type: string]: google.maps.MapType };\n        } = this.getMap() as any; // eslint-disable-line @typescript-eslint/no-explicit-any\n\n        // Fix for bug #407\n        // Determines map type and prevents illegal zoom levels\n        const minZoom = map.minZoom || 0;\n        const maxZoom = Math.min(\n          map.maxZoom || 100,\n          map.mapTypes[map.getMapTypeId()].maxZoom\n        );\n        const zoom = Math.min(\n          Math.max(this.getMap().getZoom(), minZoom),\n          maxZoom\n        );\n\n        if (this.prevZoom_ != zoom) {\n          this.prevZoom_ = zoom;\n          this.resetViewport_(false);\n        }\n      }),\n      google.maps.event.addListener(this.getMap(), \"idle\", () => {\n        this.redraw_();\n      }),\n    ];\n  }\n\n  /**\n   * Implementation of the onRemove interface method.\n   * Removes map event listeners and all cluster icons from the DOM.\n   * All managed markers are also put back on the map.\n   * @ignore\n   */\n  onRemove(): void {\n    // Put all the managed markers back on the map:\n    for (let i = 0; i < this.markers_.length; i++) {\n      if (this.markers_[i].getMap() !== this.activeMap_) {\n        this.markers_[i].setMap(this.activeMap_);\n      }\n    }\n\n    // Remove all clusters:\n    for (let i = 0; i < this.clusters_.length; i++) {\n      this.clusters_[i].remove();\n    }\n    this.clusters_ = [];\n\n    // Remove map event listeners:\n    for (let i = 0; i < this.listeners_.length; i++) {\n      google.maps.event.removeListener(this.listeners_[i]);\n    }\n    this.listeners_ = [];\n\n    this.activeMap_ = null;\n    this.ready_ = false;\n  }\n\n  /**\n   * Implementation of the draw interface method.\n   * @ignore\n   */\n  draw(): void {}\n\n  /**\n   * Sets up the styles object.\n   */\n  private setupStyles_(): void {\n    if (this.styles_.length > 0) {\n      return;\n    }\n\n    for (let i = 0; i < this.imageSizes_.length; i++) {\n      const size = this.imageSizes_[i];\n      this.styles_.push(\n        MarkerClusterer.withDefaultStyle({\n          url: this.imagePath_ + (i + 1) + \".\" + this.imageExtension_,\n          height: size,\n          width: size,\n        })\n      );\n    }\n  }\n\n  /**\n   *  Fits the map to the bounds of the markers managed by the clusterer.\n   */\n  fitMapToMarkers(padding: number | google.maps.Padding): void {\n    const markers = this.getMarkers();\n    const bounds = new google.maps.LatLngBounds();\n    for (let i = 0; i < markers.length; i++) {\n      // March 3, 2018: Bug fix -- honor the ignoreHidden property\n      if (markers[i].getVisible() || !this.getIgnoreHidden()) {\n        bounds.extend(markers[i].getPosition());\n      }\n    }\n\n    (this.getMap() as google.maps.Map).fitBounds(bounds, padding);\n  }\n\n  /**\n   * Returns the value of the `gridSize` property.\n   *\n   * @return The grid size.\n   */\n  getGridSize(): number {\n    return this.gridSize_;\n  }\n\n  /**\n   * Sets the value of the `gridSize` property.\n   *\n   * @param gridSize The grid size.\n   */\n  setGridSize(gridSize: number): void {\n    this.gridSize_ = gridSize;\n  }\n\n  /**\n   * Returns the value of the `minimumClusterSize` property.\n   *\n   * @return The minimum cluster size.\n   */\n  getMinimumClusterSize(): number {\n    return this.minClusterSize_;\n  }\n\n  /**\n   * Sets the value of the `minimumClusterSize` property.\n   *\n   * @param minimumClusterSize The minimum cluster size.\n   */\n  setMinimumClusterSize(minimumClusterSize: number): void {\n    this.minClusterSize_ = minimumClusterSize;\n  }\n\n  /**\n   *  Returns the value of the `maxZoom` property.\n   *\n   *  @return The maximum zoom level.\n   */\n  getMaxZoom(): number {\n    return this.maxZoom_;\n  }\n\n  /**\n   *  Sets the value of the `maxZoom` property.\n   *\n   *  @param maxZoom The maximum zoom level.\n   */\n  setMaxZoom(maxZoom: number): void {\n    this.maxZoom_ = maxZoom;\n  }\n\n  getZIndex(): number {\n    return this.zIndex_;\n  }\n\n  setZIndex(zIndex: number): void {\n    this.zIndex_ = zIndex;\n  }\n\n  /**\n   *  Returns the value of the `styles` property.\n   *\n   *  @return The array of styles defining the cluster markers to be used.\n   */\n  getStyles(): ClusterIconStyle[] {\n    return this.styles_;\n  }\n\n  /**\n   *  Sets the value of the `styles` property.\n   *\n   *  @param styles The array of styles to use.\n   */\n  setStyles(styles: ClusterIconStyle[]): void {\n    this.styles_ = styles;\n  }\n\n  /**\n   * Returns the value of the `title` property.\n   *\n   * @return The content of the title text.\n   */\n  getTitle(): string {\n    return this.title_;\n  }\n\n  /**\n   *  Sets the value of the `title` property.\n   *\n   *  @param title The value of the title property.\n   */\n  setTitle(title: string): void {\n    this.title_ = title;\n  }\n\n  /**\n   * Returns the value of the `zoomOnClick` property.\n   *\n   * @return True if zoomOnClick property is set.\n   */\n  getZoomOnClick(): boolean {\n    return this.zoomOnClick_;\n  }\n\n  /**\n   *  Sets the value of the `zoomOnClick` property.\n   *\n   *  @param zoomOnClick The value of the zoomOnClick property.\n   */\n  setZoomOnClick(zoomOnClick: boolean): void {\n    this.zoomOnClick_ = zoomOnClick;\n  }\n\n  /**\n   * Returns the value of the `averageCenter` property.\n   *\n   * @return True if averageCenter property is set.\n   */\n  getAverageCenter(): boolean {\n    return this.averageCenter_;\n  }\n\n  /**\n   *  Sets the value of the `averageCenter` property.\n   *\n   *  @param averageCenter The value of the averageCenter property.\n   */\n  setAverageCenter(averageCenter: boolean): void {\n    this.averageCenter_ = averageCenter;\n  }\n\n  /**\n   * Returns the value of the `ignoreHidden` property.\n   *\n   * @return True if ignoreHidden property is set.\n   */\n  getIgnoreHidden(): boolean {\n    return this.ignoreHidden_;\n  }\n\n  /**\n   *  Sets the value of the `ignoreHidden` property.\n   *\n   *  @param ignoreHidden The value of the ignoreHidden property.\n   */\n  setIgnoreHidden(ignoreHidden: boolean): void {\n    this.ignoreHidden_ = ignoreHidden;\n  }\n\n  /**\n   * Returns the value of the `enableRetinaIcons` property.\n   *\n   * @return True if enableRetinaIcons property is set.\n   */\n  getEnableRetinaIcons(): boolean {\n    return this.enableRetinaIcons_;\n  }\n\n  /**\n   *  Sets the value of the `enableRetinaIcons` property.\n   *\n   *  @param enableRetinaIcons The value of the enableRetinaIcons property.\n   */\n  setEnableRetinaIcons(enableRetinaIcons: boolean): void {\n    this.enableRetinaIcons_ = enableRetinaIcons;\n  }\n\n  /**\n   * Returns the value of the `imageExtension` property.\n   *\n   * @return The value of the imageExtension property.\n   */\n  getImageExtension(): string {\n    return this.imageExtension_;\n  }\n\n  /**\n   *  Sets the value of the `imageExtension` property.\n   *\n   *  @param imageExtension The value of the imageExtension property.\n   */\n  setImageExtension(imageExtension: string): void {\n    this.imageExtension_ = imageExtension;\n  }\n\n  /**\n   * Returns the value of the `imagePath` property.\n   *\n   * @return The value of the imagePath property.\n   */\n  getImagePath(): string {\n    return this.imagePath_;\n  }\n\n  /**\n   *  Sets the value of the `imagePath` property.\n   *\n   *  @param imagePath The value of the imagePath property.\n   */\n  setImagePath(imagePath: string): void {\n    this.imagePath_ = imagePath;\n  }\n\n  /**\n   * Returns the value of the `imageSizes` property.\n   *\n   * @return The value of the imageSizes property.\n   */\n  getImageSizes(): number[] {\n    return this.imageSizes_;\n  }\n\n  /**\n   *  Sets the value of the `imageSizes` property.\n   *\n   *  @param imageSizes The value of the imageSizes property.\n   */\n  setImageSizes(imageSizes: number[]): void {\n    this.imageSizes_ = imageSizes;\n  }\n\n  /**\n   * Returns the value of the `calculator` property.\n   *\n   * @return the value of the calculator property.\n   */\n  getCalculator(): Calculator {\n    return this.calculator_;\n  }\n\n  /**\n   * Sets the value of the `calculator` property.\n   *\n   * @param calculator The value of the calculator property.\n   */\n  setCalculator(calculator: Calculator): void {\n    this.calculator_ = calculator;\n  }\n\n  /**\n   * Returns the value of the `batchSizeIE` property.\n   *\n   * @return the value of the batchSizeIE property.\n   */\n  getBatchSizeIE(): number {\n    return this.batchSizeIE_;\n  }\n\n  /**\n   * Sets the value of the `batchSizeIE` property.\n   *\n   *  @param batchSizeIE The value of the batchSizeIE property.\n   */\n  setBatchSizeIE(batchSizeIE: number): void {\n    this.batchSizeIE_ = batchSizeIE;\n  }\n\n  /**\n   * Returns the value of the `clusterClass` property.\n   *\n   * @return the value of the clusterClass property.\n   */\n  getClusterClass(): string {\n    return this.clusterClass_;\n  }\n\n  /**\n   * Sets the value of the `clusterClass` property.\n   *\n   *  @param clusterClass The value of the clusterClass property.\n   */\n  setClusterClass(clusterClass: string): void {\n    this.clusterClass_ = clusterClass;\n  }\n\n  /**\n   *  Returns the array of markers managed by the clusterer.\n   *\n   *  @return The array of markers managed by the clusterer.\n   */\n  getMarkers(): google.maps.Marker[] {\n    return this.markers_;\n  }\n\n  /**\n   *  Returns the number of markers managed by the clusterer.\n   *\n   *  @return The number of markers.\n   */\n  getTotalMarkers(): number {\n    return this.markers_.length;\n  }\n\n  /**\n   * Returns the current array of clusters formed by the clusterer.\n   *\n   * @return The array of clusters formed by the clusterer.\n   */\n  getClusters(): Cluster[] {\n    return this.clusters_;\n  }\n\n  /**\n   * Returns the number of clusters formed by the clusterer.\n   *\n   * @return The number of clusters formed by the clusterer.\n   */\n  getTotalClusters(): number {\n    return this.clusters_.length;\n  }\n\n  /**\n   * Adds a marker to the clusterer. The clusters are redrawn unless\n   *  `nodraw` is set to `true`.\n   *\n   * @param marker The marker to add.\n   * @param nodraw Set to `true` to prevent redrawing.\n   */\n  addMarker(marker: google.maps.Marker, nodraw?: boolean): void {\n    this.pushMarkerTo_(marker);\n    if (!nodraw) {\n      this.redraw_();\n    }\n  }\n\n  /**\n   * Adds an array of markers to the clusterer. The clusters are redrawn unless\n   *  `nodraw` is set to `true`.\n   *\n   * @param markers The markers to add.\n   * @param nodraw Set to `true` to prevent redrawing.\n   */\n  addMarkers(markers: google.maps.Marker[], nodraw?: boolean): void {\n    for (const key in markers) {\n      if (Object.prototype.hasOwnProperty.call(markers, key)) {\n        this.pushMarkerTo_(markers[key]);\n      }\n    }\n    if (!nodraw) {\n      this.redraw_();\n    }\n  }\n\n  /**\n   * Pushes a marker to the clusterer.\n   *\n   * @param marker The marker to add.\n   */\n  private pushMarkerTo_(\n    marker: google.maps.Marker & { isAdded?: boolean }\n  ): void {\n    // If the marker is draggable add a listener so we can update the clusters on the dragend:\n    if (marker.getDraggable()) {\n      google.maps.event.addListener(marker, \"dragend\", () => {\n        if (this.ready_) {\n          marker.isAdded = false;\n          this.repaint();\n        }\n      });\n    }\n    marker.isAdded = false;\n    this.markers_.push(marker);\n  }\n\n  /**\n   * Removes a marker from the cluster.  The clusters are redrawn unless\n   *  `nodraw` is set to `true`. Returns `true` if the\n   *  marker was removed from the clusterer.\n   *\n   * @param marker The marker to remove.\n   * @param nodraw Set to `true` to prevent redrawing.\n   * @return True if the marker was removed from the clusterer.\n   */\n  removeMarker(marker: google.maps.Marker, nodraw?: boolean): boolean {\n    const removed = this.removeMarker_(marker);\n\n    if (!nodraw && removed) {\n      this.repaint();\n    }\n\n    return removed;\n  }\n\n  /**\n   * Removes an array of markers from the cluster. The clusters are redrawn unless\n   *  `nodraw` is set to `true`. Returns `true` if markers were removed from the clusterer.\n   *\n   * @param markers The markers to remove.\n   * @param nodraw Set to `true` to prevent redrawing.\n   * @return True if markers were removed from the clusterer.\n   */\n  removeMarkers(markers: google.maps.Marker[], nodraw?: boolean): boolean {\n    let removed = false;\n\n    for (let i = 0; i < markers.length; i++) {\n      const r = this.removeMarker_(markers[i]);\n      removed = removed || r;\n    }\n\n    if (!nodraw && removed) {\n      this.repaint();\n    }\n\n    return removed;\n  }\n\n  /**\n   * Removes a marker and returns true if removed, false if not.\n   *\n   * @param marker The marker to remove\n   * @return Whether the marker was removed or not\n   */\n  private removeMarker_(marker: google.maps.Marker): boolean {\n    let index = -1;\n    if (this.markers_.indexOf) {\n      index = this.markers_.indexOf(marker);\n    } else {\n      for (let i = 0; i < this.markers_.length; i++) {\n        if (marker === this.markers_[i]) {\n          index = i;\n          break;\n        }\n      }\n    }\n\n    if (index === -1) {\n      // Marker is not in our list of markers, so do nothing:\n      return false;\n    }\n\n    marker.setMap(null);\n    this.markers_.splice(index, 1); // Remove the marker from the list of managed markers\n    return true;\n  }\n\n  /**\n   * Removes all clusters and markers from the map and also removes all markers\n   *  managed by the clusterer.\n   */\n  clearMarkers(): void {\n    this.resetViewport_(true);\n    this.markers_ = [];\n  }\n\n  /**\n   * Recalculates and redraws all the marker clusters from scratch.\n   *  Call this after changing any properties.\n   */\n  repaint(): void {\n    const oldClusters = this.clusters_.slice();\n    this.clusters_ = [];\n    this.resetViewport_(false);\n    this.redraw_();\n\n    // Remove the old clusters.\n    // Do it in a timeout to prevent blinking effect.\n    setTimeout(() => {\n      for (let i = 0; i < oldClusters.length; i++) {\n        oldClusters[i].remove();\n      }\n    }, 0);\n  }\n\n  /**\n   * Returns the current bounds extended by the grid size.\n   *\n   * @param bounds The bounds to extend.\n   * @return The extended bounds.\n   * @ignore\n   */\n  getExtendedBounds(\n    bounds: google.maps.LatLngBounds\n  ): google.maps.LatLngBounds {\n    const projection = this.getProjection();\n\n    // Turn the bounds into latlng.\n    const tr = new google.maps.LatLng(\n      bounds.getNorthEast().lat(),\n      bounds.getNorthEast().lng()\n    );\n    const bl = new google.maps.LatLng(\n      bounds.getSouthWest().lat(),\n      bounds.getSouthWest().lng()\n    );\n\n    // Convert the points to pixels and the extend out by the grid size.\n    const trPix = projection.fromLatLngToDivPixel(tr);\n    trPix.x += this.gridSize_;\n    trPix.y -= this.gridSize_;\n\n    const blPix = projection.fromLatLngToDivPixel(bl);\n    blPix.x -= this.gridSize_;\n    blPix.y += this.gridSize_;\n\n    // Convert the pixel points back to LatLng\n    const ne = projection.fromDivPixelToLatLng(trPix);\n    const sw = projection.fromDivPixelToLatLng(blPix);\n\n    // Extend the bounds to contain the new bounds.\n    bounds.extend(ne);\n    bounds.extend(sw);\n\n    return bounds;\n  }\n\n  /**\n   * Redraws all the clusters.\n   */\n  private redraw_(): void {\n    this.createClusters_(0);\n  }\n\n  /**\n   * Removes all clusters from the map. The markers are also removed from the map\n   *  if `hide` is set to `true`.\n   *\n   * @param hide Set to `true` to also remove the markers from the map.\n   */\n  private resetViewport_(hide?: boolean): void {\n    // Remove all the clusters\n    for (let i = 0; i < this.clusters_.length; i++) {\n      this.clusters_[i].remove();\n    }\n    this.clusters_ = [];\n\n    // Reset the markers to not be added and to be removed from the map.\n    for (let i = 0; i < this.markers_.length; i++) {\n      const marker = this.markers_[i];\n      marker.isAdded = false;\n      if (hide) {\n        marker.setMap(null);\n      }\n    }\n  }\n\n  /**\n   * Calculates the distance between two latlng locations in km.\n   *\n   * @param p1 The first lat lng point.\n   * @param p2 The second lat lng point.\n   * @return The distance between the two points in km.\n   * @link http://www.movable-type.co.uk/scripts/latlong.html\n   */\n  private distanceBetweenPoints_(\n    p1: google.maps.LatLng,\n    p2: google.maps.LatLng\n  ): number {\n    const R = 6371; // Radius of the Earth in km\n    const dLat = ((p2.lat() - p1.lat()) * Math.PI) / 180;\n    const dLon = ((p2.lng() - p1.lng()) * Math.PI) / 180;\n    const a =\n      Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n      Math.cos((p1.lat() * Math.PI) / 180) *\n        Math.cos((p2.lat() * Math.PI) / 180) *\n        Math.sin(dLon / 2) *\n        Math.sin(dLon / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c;\n  }\n\n  /**\n   * Determines if a marker is contained in a bounds.\n   *\n   * @param marker The marker to check.\n   * @param bounds The bounds to check against.\n   * @return True if the marker is in the bounds.\n   */\n  private isMarkerInBounds_(\n    marker: google.maps.Marker,\n    bounds: google.maps.LatLngBounds\n  ): boolean {\n    return bounds.contains(marker.getPosition());\n  }\n\n  /**\n   * Adds a marker to a cluster, or creates a new cluster.\n   *\n   * @param marker The marker to add.\n   */\n  private addToClosestCluster_(marker: google.maps.Marker): void {\n    let distance = 40000; // Some large number\n    let clusterToAddTo = null;\n    for (let i = 0; i < this.clusters_.length; i++) {\n      const cluster = this.clusters_[i];\n      const center = cluster.getCenter();\n      if (center) {\n        const d = this.distanceBetweenPoints_(center, marker.getPosition());\n        if (d < distance) {\n          distance = d;\n          clusterToAddTo = cluster;\n        }\n      }\n    }\n\n    if (clusterToAddTo && clusterToAddTo.isMarkerInClusterBounds(marker)) {\n      clusterToAddTo.addMarker(marker);\n    } else {\n      const cluster = new Cluster(this);\n      cluster.addMarker(marker);\n      this.clusters_.push(cluster);\n    }\n  }\n\n  /**\n   * Creates the clusters. This is done in batches to avoid timeout errors\n   *  in some browsers when there is a huge number of markers.\n   *\n   * @param iFirst The index of the first marker in the batch of\n   *  markers to be added to clusters.\n   */\n  private createClusters_(iFirst: number): void {\n    if (!this.ready_) {\n      return;\n    }\n\n    // Cancel previous batch processing if we're working on the first batch:\n    if (iFirst === 0) {\n      google.maps.event.trigger(this, \"clusteringbegin\", this);\n\n      if (typeof this.timerRefStatic !== \"undefined\") {\n        clearTimeout(this.timerRefStatic);\n        delete this.timerRefStatic;\n      }\n    }\n\n    // Get our current map view bounds.\n    // Create a new bounds object so we don't affect the map.\n    //\n    // See Comments 9 & 11 on Issue 3651 relating to this workaround for a Google Maps bug:\n    let mapBounds: google.maps.LatLngBounds;\n\n    if (this.getMap().getZoom() > 3) {\n      mapBounds = new google.maps.LatLngBounds(\n        (this.getMap() as google.maps.Map).getBounds().getSouthWest(),\n        (this.getMap() as google.maps.Map).getBounds().getNorthEast()\n      );\n    } else {\n      mapBounds = new google.maps.LatLngBounds(\n        new google.maps.LatLng(85.02070771743472, -178.48388434375),\n        new google.maps.LatLng(-85.08136444384544, 178.00048865625)\n      );\n    }\n    const bounds = this.getExtendedBounds(mapBounds);\n\n    const iLast = Math.min(iFirst + this.batchSize_, this.markers_.length);\n\n    for (let i = iFirst; i < iLast; i++) {\n      const marker = this.markers_[i];\n      if (!marker.isAdded && this.isMarkerInBounds_(marker, bounds)) {\n        if (\n          !this.ignoreHidden_ ||\n          (this.ignoreHidden_ && marker.getVisible())\n        ) {\n          this.addToClosestCluster_(marker);\n        }\n      }\n    }\n\n    if (iLast < this.markers_.length) {\n      this.timerRefStatic = window.setTimeout(() => {\n        this.createClusters_(iLast);\n      }, 0);\n    } else {\n      delete this.timerRefStatic;\n      google.maps.event.trigger(this, \"clusteringend\", this);\n\n      for (let i = 0; i < this.clusters_.length; i++) {\n        this.clusters_[i].updateIcon();\n      }\n    }\n  }\n\n  /**\n   * The default function for determining the label text and style\n   * for a cluster icon.\n   *\n   * @param markers The array of markers represented by the cluster.\n   * @param numStyles The number of marker styles available.\n   * @return The information resource for the cluster.\n   */\n  static CALCULATOR(\n    markers: google.maps.Marker[],\n    numStyles: number\n  ): ClusterIconInfo {\n    let index = 0;\n    const count: number = markers.length;\n\n    let dv = count;\n    while (dv !== 0) {\n      dv = Math.floor(dv / 10);\n      index++;\n    }\n\n    index = Math.min(index, numStyles);\n    return {\n      text: count.toString(),\n      index: index,\n      title: \"\",\n    };\n  }\n\n  /**\n   * Generates default styles augmented with user passed values.\n   * Useful when you want to override some default values but keep untouched\n   *\n   * @param overrides override default values\n   */\n  static withDefaultStyle(overrides: ClusterIconStyle): ClusterIconStyle {\n    return {\n      textColor: \"black\",\n      textSize: 11,\n      textDecoration: \"none\",\n      textLineHeight: overrides.height,\n      fontWeight: \"bold\",\n      fontStyle: \"normal\",\n      fontFamily: \"Arial,sans-serif\",\n      backgroundPosition: \"0 0\",\n      ...overrides,\n    };\n  }\n}\n","export const MAP_STYLE = [\r\n\t{\r\n\t\t\"featureType\": \"administrative\",\r\n\t\t\"elementType\": \"labels.text.fill\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"color\": \"#444444\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"landscape\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"color\": \"#f2f2f2\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"poi\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"visibility\": \"off\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"road\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"saturation\": -100\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"lightness\": 45\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"road.highway\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"visibility\": \"simplified\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"road.arterial\",\r\n\t\t\"elementType\": \"labels.icon\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"visibility\": \"off\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"transit\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"visibility\": \"off\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"featureType\": \"water\",\r\n\t\t\"elementType\": \"all\",\r\n\t\t\"stylers\": [\r\n\t\t\t{\r\n\t\t\t\t\"color\": \"#e2e0df\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"visibility\": \"on\"\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n];\r\n","import { SwiperDirective } from '../../common/swiper/swiper.directive';\r\n\r\nexport class SwiperGalleryDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 'auto',\r\n\t\t\tspaceBetween: 40,\r\n\t\t\tspeed: 600,\r\n\t\t\tcenteredSlides: true,\r\n\t\t\tloop: true,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t\t// console.log('SwiperGalleryDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperGalleryDirective.meta = {\r\n\tselector: '[swiper-gallery]'\r\n};\r\n","import { SwiperDirective } from '../../common/swiper/swiper.directive';\r\n\r\nexport class SwiperHomepageDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1,\r\n\t\t\tspaceBetween: 0,\r\n\t\t\tspeed: 600,\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t\t// console.log('SwiperHomepageDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperHomepageDirective.meta = {\r\n\tselector: '[swiper-homepage]'\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { SwiperDirective } from '../../common/swiper/swiper.directive';\r\n\r\nexport class SwiperNewsPropositionDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1,\r\n\t\t\tspaceBetween: 30,\r\n\t\t\tbreakpoints: {\r\n\t\t\t\t768: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 40\r\n\t\t\t\t},\r\n\t\t\t\t1024: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 50\r\n\t\t\t\t},\r\n\t\t\t\t1440: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 60\r\n\t\t\t\t},\r\n\t\t\t\t1920: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 70\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tspeed: 600,\r\n\t\t\tcenteredSlides: false,\r\n\t\t\tloop: false,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = node.querySelector('.swiper-container');\r\n\t\tthis.init_(target);\r\n\t\t// console.log('SwiperNewsPropositionDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperNewsPropositionDirective.meta = {\r\n\tselector: '[swiper-news-proposition]'\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { SwiperDirective } from '../../common/swiper/swiper.directive';\r\n\r\nexport class SwiperProductsPropositionDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1.5,\r\n\t\t\tspaceBetween: 30,\r\n\t\t\tbreakpoints: {\r\n\t\t\t\t768: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 40\r\n\t\t\t\t},\r\n\t\t\t\t1024: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 50\r\n\t\t\t\t},\r\n\t\t\t\t1440: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 60\r\n\t\t\t\t},\r\n\t\t\t\t1920: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 70\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tspeed: 600,\r\n\t\t\tcenteredSlides: false,\r\n\t\t\tloop: false,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = node.querySelector('.swiper-container');\r\n\t\tthis.init_(target);\r\n\t\t// console.log('SwiperProductsPropositionDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperProductsPropositionDirective.meta = {\r\n\tselector: '[swiper-products-proposition]'\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { SwiperDirective } from '../../common/swiper/swiper.directive';\r\n\r\nexport class SwiperProjectsPropositionDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1.5,\r\n\t\t\tspaceBetween: 30,\r\n\t\t\tbreakpoints: {\r\n\t\t\t\t768: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 40\r\n\t\t\t\t},\r\n\t\t\t\t1024: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 50\r\n\t\t\t\t},\r\n\t\t\t\t1440: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 60\r\n\t\t\t\t},\r\n\t\t\t\t1920: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 70\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tspeed: 600,\r\n\t\t\tcenteredSlides: false,\r\n\t\t\tloop: false,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = node.querySelector('.swiper-container');\r\n\t\tthis.init_(target);\r\n\t\t// console.log('SwiperProjectsPropositionDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperProjectsPropositionDirective.meta = {\r\n\tselector: '[swiper-projects-proposition]'\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalResolveEvent, ModalService } from '../../common/modal/modal.service';\r\nimport { environment } from '../../environment';\r\nimport { UserService } from '../user/user.service';\r\n\r\nexport const HeaderMode = {\r\n\tIDLE: 'idle',\r\n\tMENU: 'menu',\r\n\tSEARCH: 'search',\r\n\tCART: 'cart',\r\n}\r\n\r\nexport class HeaderComponent extends Component {\r\n\r\n\tdirection_ = null;\r\n\tget direction() {\r\n\t\treturn this.direction_;\r\n\t}\r\n\tset direction(direction) {\r\n\t\tif (this.direction_ !== direction) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tnode.classList.remove(`scrolling-${this.direction_}`);\r\n\t\t\tnode.classList.add(`scrolling-${direction}`);\r\n\t\t\tthis.direction_ = direction;\r\n\t\t}\r\n\t}\r\n\r\n\tscrolled_ = null;\r\n\tget scrolled() {\r\n\t\treturn this.scrolled_;\r\n\t}\r\n\tset scrolled(scrolled) {\r\n\t\tif (this.scrolled_ !== scrolled) {\r\n\t\t\tthis.scrolled_ = scrolled;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tscrolled ? node.classList.add(`scrolled`) : node.classList.remove(`scrolled`);\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.show = HeaderMode.IDLE;\r\n\t\tconst pictogram = document.querySelector('.page > .pictogram');\r\n\t\tLocomotiveScrollService.scroll$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe((event) => {\r\n\t\t\tthis.direction = event.direction;\r\n\t\t\tthis.scrolled = event.scroll.y > 100;\r\n\t\t\tconst opacity = 0.1 - 0.1 * Math.min(1, Math.max(0, (event.scroll.y - window.innerHeight * 3) / window.innerHeight / 3));\r\n\t\t\tgsap.set(pictogram, { opacity });\r\n\t\t\t// console.log('HeaderComponent', event.scroll.y, event.direction, event.speed);\r\n\t\t});\r\n\t\tthis.user = null;\r\n\t\tUserService.me$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(user => {\r\n\t\t\tthis.user = user;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tonLogin() {\r\n\t\tModalService.open$({ src: environment.template.modal.userModal, data: { view: 1 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tconsole.log('HeaderComponent.onLogin', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\twindow.location.href = environment.slug.reservedArea;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonLogout() {\r\n\t\tUserService.signout$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tonToggleMenu() {\r\n\t\tthis.show = this.show === HeaderMode.MENU ? HeaderMode.IDLE : HeaderMode.MENU;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonToggleSearch() {\r\n\t\tthis.show = this.show === HeaderMode.SEARCH ? HeaderMode.IDLE : HeaderMode.SEARCH;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonToggleCart() {\r\n\t\tthis.show = this.show === HeaderMode.CART ? HeaderMode.IDLE : HeaderMode.CART;\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nHeaderComponent.meta = {\r\n\tselector: '[header]',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nconst MENUS = [];\r\n\r\nexport class MenuDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst submenus = this.submenus = document.querySelector(`.group--submenus`);\r\n\t\tconst target = this.target = document.querySelector(`#menu-${this.menu}`);\r\n\t\tconst container = this.container = target.querySelector(`.container`);\r\n\t\tthis.onOver = this.onOver.bind(this);\r\n\t\tthis.onLeave = this.onLeave.bind(this);\r\n\t\tnode.addEventListener('click', this.onOver);\r\n\t\tMENUS.push(this);\r\n\t}\r\n\r\n\tonOver(event) {\r\n\t\tevent.preventDefault();\r\n\t\tMENUS.forEach(x => x.onLeave(true));\r\n\t\tconst submenus = this.submenus;\r\n\t\tsubmenus.classList.add('active');\r\n\t\tconst target = this.target;\r\n\t\ttarget.classList.add('active');\r\n\t\tconst container = this.container;\r\n\t\tcontainer.addEventListener('mouseleave', this.onLeave);\r\n\t}\r\n\r\n\tonLeave(keepBackground) {\r\n\t\tif (keepBackground !== true) {\r\n\t\t\tconst submenus = this.submenus;\r\n\t\t\tsubmenus.classList.remove('active');\r\n\t\t}\r\n\t\tconst target = this.target;\r\n\t\ttarget.classList.remove('active');\r\n\t\tconst container = this.container;\r\n\t\tcontainer.removeEventListener('mouseleave', this.onLeave);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.onLeave();\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.removeEventListener('mouseover', this.onOver);\r\n\t}\r\n}\r\n\r\nMenuDirective.meta = {\r\n\tselector: '[menu]',\r\n\tinputs: ['menu'],\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\n\r\nexport class NewsletterPropositionComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tonNewsletter(event) {\r\n\t\tconsole.log('NewsletterPropositionComponent.onNewsletter', this.form.value);\r\n\t}\r\n}\r\n\r\nNewsletterPropositionComponent.meta = {\r\n\tselector: '[newsletter-proposition]',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class SubmenuDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst items = Array.prototype.slice.call(node.querySelectorAll('[data-picture]'));\r\n\t\tconst target = node.querySelector('[data-target]');\r\n\t\tgsap.set(target, { opacity: 1 });\r\n\t\titems.forEach(item => {\r\n\t\t\titem.addEventListener('mouseover', (event) => {\r\n\t\t\t\tconst picture = item.getAttribute('data-picture');\r\n\t\t\t\tgsap.set(target, { opacity: 0 });\r\n\t\t\t\ttarget.onload = () => {\r\n\t\t\t\t\tgsap.to(target, {\r\n\t\t\t\t\t\tduration: 0.5,\r\n\t\t\t\t\t\tdelay: 0.1,\r\n\t\t\t\t\t\topacity: 1,\r\n\t\t\t\t\t\tease: Power4.easeOut,\r\n\t\t\t\t\t\toverwrite: 'all',\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\ttarget.src = picture;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nSubmenuDirective.meta = {\r\n\tselector: '[submenu]'\r\n};\r\n","import { Component } from 'rxcomp';\r\n\r\nexport class TreeComponent extends Component {\r\n\r\n\thasItems(item) {\r\n\t\treturn item.items && item.items.length > 0;\r\n\t}\r\n\r\n\tonClick(item) {\r\n\t\tthis.tree.forEach(x => {\r\n\t\t\tx.active = x.id === item.id ? (this.hasItems(item) ? !item.active : true) : false;\r\n\t\t});\r\n\t\tif (item.active) {\r\n\t\t\tthis.open.next(item);\r\n\t\t}\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonOpen(item) {\r\n\t\tthis.open.next(item);\r\n\t}\r\n\r\n}\r\n\r\nTreeComponent.meta = {\r\n\tselector: '[tree]',\r\n\tinputs: ['tree'],\r\n\toutputs: ['open'],\r\n\ttemplate: /* html */ `\r\n\t\t<li class=\"folder\" [class]=\"{ active: item.active }\" *for=\"let item of tree\">\r\n\t\t\t<span [innerHTML]=\"item.title\" (click)=\"onClick(item)\"></span>\r\n\t\t\t<ul [tree]=\"item.items\" (open)=\"onOpen($event)\"></ul>\r\n\t\t</li>\r\n\t`\r\n};\r\n","function push_(event) {\r\n\tconst dataLayer = window.dataLayer || [];\r\n\tdataLayer.push(event);\r\n\tconsole.log('GtmService.dataLayer', event);\r\n}\r\n\r\nexport class GtmService {\r\n\r\n\tstatic push(event) {\r\n\t\treturn push_(event);\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { UserService } from './user.service';\r\n\r\nexport class UserForgotComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tform.patch({\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('UserForgotComponent.onSubmit', form.value);\r\n\t\tif (form.valid) {\r\n\t\t\tform.submitted = true;\r\n\t\t\tUserService.forgot$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\tconsole.log('UserForgotComponent.onSubmit', response);\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Forgot\",\r\n\t\t\t\t\t'form_name': \"Recupero Password\"\r\n\t\t\t\t});\r\n\t\t\t\tform.reset();\r\n\t\t\t\tthis.forgot.next(true);\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('UserForgotComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tform.submitted = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonSignIn() {\r\n\t\tthis.viewSignIn.next();\r\n\t}\r\n\r\n\tonSignUp() {\r\n\t\tthis.viewSignUp.next();\r\n\t}\r\n}\r\n\r\nUserForgotComponent.meta = {\r\n\tselector: '[user-forgot]',\r\n\toutputs: ['forgot', 'viewSignIn', 'viewSignUp'],\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { UserService, UserViews } from './user.service';\r\n\r\nexport class UserComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.views = UserViews;\r\n\t\tthis.view = this.view || UserViews.SIGN_UP;\r\n\t}\r\n\r\n\tsetView(view) {\r\n\t\tthis.view = view;\r\n\t\tthis.pushChanges();\r\n\t\tconst { node } = getContext(this);\r\n\t\tLocomotiveScrollService.scrollTo(node, { offset: -100 });\r\n\t}\r\n\r\n\tonViewForgot(event) {\r\n\t\t// console.log('UserComponent.onForgot');\r\n\t\tthis.setView(UserViews.FORGOTTEN);\r\n\t}\r\n\r\n\tonViewSignIn(event) {\r\n\t\t// console.log('UserComponent.onSignIn');\r\n\t\tthis.setView(UserViews.SIGN_IN);\r\n\t}\r\n\r\n\tonViewSignUp(event) {\r\n\t\t// console.log('UserComponent.onSignUp');\r\n\t\tthis.setView(UserViews.SIGN_UP);\r\n\t}\r\n\r\n\tonSignIn(user) {\r\n\t\tconsole.log('UserComponent.onSignIn', user);\r\n\t\tUserService.setUser(user);\r\n\t\tif (this.navTo) {\r\n\t\t\twindow.location.href = this.navTo;\r\n\t\t}\r\n\t\t// nav to profile\r\n\t}\r\n\r\n\tonSignUp(user) {\r\n\t\tconsole.log('UserComponent.onSignUp', user);\r\n\t\tUserService.setUser(user);\r\n\t\tif (this.navTo) {\r\n\t\t\twindow.location.href = this.navTo;\r\n\t\t}\r\n\t\t// nav to profile\r\n\t}\r\n\r\n\tonForgot(email) {\r\n\t\t/*\r\n\t\tconsole.log('UserComponent.onForgot', email);\r\n\t\tthis.setView(UserViews.SIGN_IN);\r\n\t\t*/\r\n\t}\r\n}\r\n\r\nUserComponent.meta = {\r\n\tselector: '[user]',\r\n\tinputs: ['navTo', 'view']\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalOutletComponent } from '../../common/modal/modal-outlet.component';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\nimport { UserComponent } from './user.component';\r\nimport { UserViews } from './user.service';\r\n\r\nexport class UserModalComponent extends UserComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tconst data = parentInstance.modal.data;\r\n\t\t\tthis.view = data.view;\r\n\t\t\t// console.log('UserModalComponent.onInit', data);\r\n\t\t}\r\n\t\tLocomotiveScrollService.stop();\r\n\t}\r\n\r\n\tsetView(view) {\r\n\t\tthis.view = view;\r\n\t\tthis.pushChanges();\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = window.innerWidth >= 1024 ? node.querySelector('.modal__inner') : node;\r\n\t\ttarget.scrollTo(0, 0);\r\n\t}\r\n\r\n\tonViewForgot() {\r\n\t\tconsole.log('UserModalComponent.onViewForgot');\r\n\t\tthis.setView(UserViews.FORGOTTEN);\r\n\t}\r\n\r\n\tonViewSignIn() {\r\n\t\tconsole.log('UserModalComponent.onViewSignIn');\r\n\t\tthis.setView(UserViews.SIGN_IN);\r\n\t}\r\n\r\n\tonViewSignUp() {\r\n\t\tconsole.log('UserModalComponent.onViewSignUp');\r\n\t\tthis.setView(UserViews.SIGN_UP);\r\n\t}\r\n\r\n\tonClose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n\tonSignUp(user) {\r\n\t\t// console.log('UserModalComponent.onSignUp', user);\r\n\t\tModalService.resolve(user);\r\n\t}\r\n\r\n\tonSignIn(user) {\r\n\t\t// console.log('UserModalComponent.onSignIn', user);\r\n\t\tModalService.resolve(user);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tLocomotiveScrollService.start();\r\n\t}\r\n}\r\n\r\nUserModalComponent.meta = {\r\n\tselector: '[user-modal]'\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { UserService } from './user.service';\r\n\r\nexport class UserSigninComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tpassword: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tform.patch({\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tpassword: '********',\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('UserSigninComponent.onSubmit', form.value);\r\n\t\tif (form.valid) {\r\n\t\t\tform.submitted = true;\r\n\t\t\tUserService.signin$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\tconsole.log('UserSigninComponent.onSubmit', response);\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Signin\",\r\n\t\t\t\t\t'form_name': \"Login\"\r\n\t\t\t\t});\r\n\t\t\t\tform.reset();\r\n\t\t\t\tthis.signIn.next(response);\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('UserSigninComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tform.submitted = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonForgot(event) {\r\n\t\tthis.viewForgot.next();\r\n\t}\r\n\r\n\tonSignUp(event) {\r\n\t\tthis.viewSignUp.next();\r\n\t}\r\n}\r\n\r\nUserSigninComponent.meta = {\r\n\tselector: '[user-signin]',\r\n\toutputs: ['signIn', 'viewForgot', 'viewSignUp'],\r\n};\r\n","\r\nexport class FormService {\r\n\r\n\tstatic toSelectOptions(options) {\r\n\t\toptions = options.slice().map(x => ({ id: x.value, name: x.label }));\r\n\t\toptions.unshift({ id: null, name: 'select' });\r\n\t\treturn options;\r\n\t}\r\n\r\n}\r\n","import { FormValidator } from 'rxcomp-form';\r\n\r\nexport default function RequiredIfValidator(fieldName, formGroup) {\r\n\r\n\treturn new FormValidator((value) => {\r\n\t\tconst field = formGroup ? formGroup.get(fieldName) : null;\r\n\t\treturn field && field.value && !value ? { required: { value: value, requiredIf: fieldName } } : null;\r\n\t});\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { FormService } from '../../common/forms/form.service';\r\nimport MatchValidator from '../../common/forms/match.validator';\r\nimport RequiredIfValidator from '../../common/forms/required-if.validator';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { UserService } from './user.service';\r\n\r\nexport class UserSignupComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tlastName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcountry: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcity: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcompany: new FormControl(null),\r\n\t\t\toccupation: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tpassword: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tpasswordConfirm: new FormControl(null, [Validators.RequiredValidator(), MatchValidator('password', form)]),\r\n\t\t\tprivacy: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tnewsletter: new FormControl(null),\r\n\t\t\tnewsletterLanguage: new FormControl(null, [RequiredIfValidator('newsletter', form)]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn UserService.data$().pipe(\r\n\t\t\ttap(data => {\r\n\t\t\t\tconst controls = this.controls;\r\n\t\t\t\tcontrols.country.options = FormService.toSelectOptions(data.country.options);\r\n\t\t\t\tcontrols.occupation.options = FormService.toSelectOptions(data.occupation.options);\r\n\t\t\t\tcontrols.newsletterLanguage.options = FormService.toSelectOptions(data.newsletterLanguage.options);\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tconst controls = this.controls;\r\n\t\tconst country = controls.country.options.length > 1 ? controls.country.options[1].id : null;\r\n\t\tconst occupation = controls.occupation.options.length > 1 ? controls.occupation.options[1].id : null;\r\n\t\tform.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\tcountry: country,\r\n\t\t\tcity: 'Pesaro',\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\toccupation: occupation,\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tpassword: '********',\r\n\t\t\tpasswordConfirm: '********',\r\n\t\t\tprivacy: true,\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('UserSignupComponent.onSubmit', form.value);\r\n\t\tif (form.valid) {\r\n\t\t\tform.submitted = true;\r\n\t\t\tUserService.signup$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\tconsole.log('UserSignupComponent.onSubmit', response);\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Registration\",\r\n\t\t\t\t\t'form_name': \"Registrazione\"\r\n\t\t\t\t});\r\n\t\t\t\tform.reset();\r\n\t\t\t\tthis.signUp.next(response);\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('UserSignupComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tform.submitted = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonSignIn() {\r\n\t\tthis.viewSignIn.next();\r\n\t}\r\n}\r\n\r\nUserSignupComponent.meta = {\r\n\tselector: '[user-signup]',\r\n\toutputs: ['signUp', 'viewSignIn'],\r\n};\r\n","import { FormValidator } from 'rxcomp-form';\r\n\r\nexport default function MatchValidator(fieldName, formGroup) {\r\n\r\n\treturn new FormValidator((value) => {\r\n\t\tconst field = formGroup ? formGroup.get(fieldName) : null;\r\n\t\tif (!value || !field) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn value !== field.value ? { match: { value: value, match: field.value } } : null;\r\n\t});\r\n\r\n}\r\n","import { Module } from 'rxcomp';\r\nimport { MapComponent } from '../partials/map/map.component';\r\nimport { SwiperGalleryDirective } from '../partials/swiper-gallery/swiper-gallery.directive';\r\nimport { SwiperHomepageDirective } from '../partials/swiper-homepage/swiper-homepage.directive';\r\nimport { SwiperNewsPropositionDirective } from '../partials/swiper-news-proposition/swiper-news-proposition.directive';\r\nimport { SwiperProductsPropositionDirective } from '../partials/swiper-products-proposition/swiper-products-proposition.directive';\r\nimport { SwiperProjectsPropositionDirective } from '../partials/swiper-projects-proposition/swiper-projects-proposition.directive';\r\nimport { HeaderComponent } from './header/header.component';\r\nimport { MenuDirective } from './menu/menu.directive';\r\nimport { NewsletterPropositionComponent } from './newsletter-proposition/newsletter-proposition.component';\r\nimport { SubmenuDirective } from './submenu/submenu.directive';\r\nimport { TreeComponent } from './tree/tree.component';\r\nimport { UserForgotComponent } from './user/user-forgot.component';\r\nimport { UserModalComponent } from './user/user-modal.component';\r\nimport { UserSigninComponent } from './user/user-signin.component';\r\nimport { UserSignupComponent } from './user/user-signup.component';\r\nimport { UserComponent } from './user/user.component';\r\n\r\nconst factories = [\r\n\tHeaderComponent,\r\n\tMapComponent,\r\n\tMenuDirective,\r\n\tNewsletterPropositionComponent,\r\n\tSubmenuDirective,\r\n\tSwiperGalleryDirective,\r\n\tSwiperHomepageDirective,\r\n\tSwiperNewsPropositionDirective,\r\n\tSwiperProductsPropositionDirective,\r\n\tSwiperProjectsPropositionDirective,\r\n\tTreeComponent,\r\n\tUserComponent,\r\n\tUserForgotComponent,\r\n\tUserModalComponent,\r\n\tUserSigninComponent,\r\n\tUserSignupComponent,\r\n];\r\n\r\nconst pipes = [\r\n];\r\n\r\nexport class SharedModule extends Module { }\r\n\r\nSharedModule.meta = {\r\n\timports: [],\r\n\tdeclarations: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n\texports: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n};\r\n","import { BehaviorSubject } from 'rxjs';\r\n\r\nexport const FilterMode = {\r\n\tSELECT: 'select',\r\n\tAND: 'and',\r\n\tOR: 'or',\r\n\tQUERY: 'query',\r\n};\r\n\r\nexport class FilterItem {\r\n\r\n\tconstructor(filter) {\r\n\t\tthis.change$ = new BehaviorSubject();\r\n\t\tthis.mode = FilterMode.SELECT;\r\n\t\tthis.filter = 'Filter';\r\n\t\tthis.placeholder = 'Select';\r\n\t\tthis.values = [];\r\n\t\tthis.options = [];\r\n\t\tif (filter) {\r\n\t\t\tObject.assign(this, filter);\r\n\t\t}\r\n\t\tif (filter.mode === FilterMode.SELECT) {\r\n\t\t\tfilter.options.unshift({\r\n\t\t\t\tlabel: filter.placeholder,\r\n\t\t\t\tvalue: undefined,\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfilter(item, value) {\r\n\t\treturn item.options.indexOf(value) !== -1;\r\n\t}\r\n\r\n\tmatch(item) {\r\n\t\tlet match;\r\n\t\tif (this.mode === FilterMode.OR) {\r\n\t\t\tmatch = this.values.length ? false : true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match || this.filter(item, value);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tmatch = true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match && this.filter(item, value);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn match;\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tif (this.mode === FilterMode.SELECT || this.mode === FilterMode.QUERY) {\r\n\t\t\treturn this.placeholder || this.label;\r\n\t\t} else {\r\n\t\t\treturn this.label;\r\n\t\t}\r\n\t}\r\n\r\n\thas(item) {\r\n\t\treturn this.values.indexOf(item.value) !== -1;\r\n\t}\r\n\r\n\tset(item) {\r\n\t\tif (this.mode === FilterMode.QUERY) {\r\n\t\t\tthis.values = item ? [item] : [];\r\n\t\t\tthis.placeholder = item;\r\n\t\t} else {\r\n\t\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\t\tthis.values = [];\r\n\t\t\t}\r\n\t\t\tconst index = this.values.indexOf(item.value);\r\n\t\t\tif (index === -1) {\r\n\t\t\t\tif (item.value !== undefined) {\r\n\t\t\t\t\tthis.values.push(item.value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\t\tthis.placeholder = item.label;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// console.log('FilterItem.set', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\tremove(item) {\r\n\t\tconst index = this.values.indexOf(item.value);\r\n\t\tif (index !== -1) {\r\n\t\t\tthis.values.splice(index, 1);\r\n\t\t}\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst first = this.options[0];\r\n\t\t\tthis.placeholder = first.label;\r\n\t\t}\r\n\t\t// console.log('FilterItem.remove', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\ttoggle(item) {\r\n\t\tif (this.has(item)) {\r\n\t\t\tthis.remove(item);\r\n\t\t} else {\r\n\t\t\tthis.set(item);\r\n\t\t}\r\n\t}\r\n\r\n\tclear() {\r\n\t\tthis.values = [];\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst first = this.options[0];\r\n\t\t\tthis.placeholder = first.label;\r\n\t\t}\r\n\t\tthis.change$.next();\r\n\t}\r\n}\r\n","import { merge } from 'rxjs';\r\nimport { map, tap } from 'rxjs/operators';\r\nimport { LocationService } from '../location/location.service';\r\nimport { FilterItem } from './filter-item';\r\n\r\nexport class FilterService {\r\n\r\n\tconstructor(options, initialParams, callback) {\r\n\t\tconst filters = {};\r\n\t\tif (options) {\r\n\t\t\tObject.keys(options).forEach(key => {\r\n\t\t\t\tconst filter = new FilterItem(options[key]);\r\n\t\t\t\tif (typeof callback === 'function') {\r\n\t\t\t\t\tcallback(key, filter);\r\n\t\t\t\t}\r\n\t\t\t\tfilters[key] = filter;\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.filters = filters;\r\n\t\tthis.deserialize(this.filters, initialParams);\r\n\t}\r\n\r\n\tgetParamsCount(params) {\r\n\t\tif (params) {\r\n\t\t\tconst paramsCount = Object.keys(params).reduce((p, c, i) => {\r\n\t\t\t\tconst values = params[c];\r\n\t\t\t\treturn p + (values ? values.length : 0);\r\n\t\t\t}, 0);\r\n\t\t\treturn paramsCount;\r\n\t\t} else {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t}\r\n\r\n\tdeserialize(filters, initialParams) {\r\n\t\tlet params;\r\n\t\tif (initialParams && this.getParamsCount(initialParams)) {\r\n\t\t\tparams = initialParams;\r\n\t\t}\r\n\t\tconst locationParams = LocationService.deserialize('filters');\r\n\t\tif (locationParams && this.getParamsCount(locationParams)) {\r\n\t\t\tparams = locationParams;\r\n\t\t}\r\n\t\tif (params) {\r\n\t\t\tObject.keys(filters).forEach(key => {\r\n\t\t\t\tfilters[key].values = params[key] || [];\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn filters;\r\n\t}\r\n\r\n\tserialize(filters) {\r\n\t\tlet params = {};\r\n\t\tlet any = false;\r\n\t\tObject.keys(filters).forEach(x => {\r\n\t\t\tconst filter = filters[x];\r\n\t\t\tif (filter.value !== null) {\r\n\t\t\t\tparams[x] = filter.values;\r\n\t\t\t\tany = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (!any) {\r\n\t\t\tparams = null;\r\n\t\t}\r\n\t\t// console.log('ReferenceCtrl.serialize', params);\r\n\t\tLocationService.serialize('filters', params);\r\n\t\treturn params;\r\n\t}\r\n\r\n\titems$(items) {\r\n\t\tconst filters = this.filters;\r\n\t\tconst changes = Object.keys(filters).map(key => filters[key].change$);\r\n\t\treturn merge(...changes).pipe(\r\n\t\t\t// tap(() => console.log(filters)),\r\n\t\t\ttap(() => this.serialize(filters)),\r\n\t\t\tmap(() => this.filterItems(items)),\r\n\t\t\ttap(() => this.updateFilterStates(filters, items))\r\n\t\t);\r\n\t}\r\n\r\n\tfilterItems(items, skipFilter) {\r\n\t\tconst filters = Object.keys(this.filters).map((x) => this.filters[x]).filter(x => x.value !== null);\r\n\t\titems = items.filter(item => {\r\n\t\t\tlet has = true;\r\n\t\t\tfilters.forEach(filter => {\r\n\t\t\t\tif (filter !== skipFilter) {\r\n\t\t\t\t\thas = has && filter.match(item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn has;\r\n\t\t});\r\n\t\treturn items;\r\n\t}\r\n\r\n\tupdateFilterStates(filters, items) {\r\n\t\tObject.keys(filters).forEach(x => {\r\n\t\t\tconst filter = filters[x];\r\n\t\t\tconst filteredItems = this.filterItems(items, filter);\r\n\t\t\tfilter.options.forEach(option => {\r\n\t\t\t\tlet count = 0;\r\n\t\t\t\tif (option.value) {\r\n\t\t\t\t\tlet i = 0;\r\n\t\t\t\t\twhile (i < filteredItems.length) {\r\n\t\t\t\t\t\tconst item = filteredItems[i];\r\n\t\t\t\t\t\tif (filter.filter(item, option.value)) {\r\n\t\t\t\t\t\t\tcount++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ti++;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcount = filteredItems.length;\r\n\t\t\t\t}\r\n\t\t\t\toption.count = count;\r\n\t\t\t\toption.disabled = count === 0;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tlet filter;\r\n\t\tObject.keys(this.filters).forEach(x => {\r\n\t\t\tfilter = this.filters[x];\r\n\t\t\tfilter.values = [];\r\n\t\t});\r\n\t\tif (filter) {\r\n\t\t\tfilter.change$.next();\r\n\t\t}\r\n\t}\r\n}\r\n","import { map } from 'rxjs/operators';\r\nimport { ApiService } from '../../common/api/api.service';\r\n\r\nexport class StoreLocatorService {\r\n\r\n\tstatic all$() {\r\n\t\treturn ApiService.get$('/store-locator/all.json').pipe(\r\n\t\t\tmap(items => items.sort((a, b) => {\r\n\t\t\t\treturn a.rank - b.rank;\r\n\t\t\t})),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\treturn ApiService.get$('/store-locator/filters.json');\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup } from 'rxcomp-form';\r\nimport { combineLatest } from 'rxjs';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { FilterMode } from '../../common/filter/filter-item';\r\nimport { FilterService } from '../../common/filter/filter.service';\r\nimport { FormService } from '../../common/forms/form.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { StoreLocatorService } from './store-locator.service';\r\n\r\nexport class StoreLocatorComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.items = [];\r\n\t\tthis.filteredItems = [];\r\n\t\tthis.visibleItems = [];\r\n\t\tthis.filters = {};\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tcountry: new FormControl(null),\r\n\t\t\tcategory: new FormControl(null),\r\n\t\t\tsearch: new FormControl(null),\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\t// console.log('StoreLocatorComponent.changes$', form.value);\r\n\t\t\tthis.setFilterByKeyAndValue('country', form.value.country);\r\n\t\t\tthis.setFilterByKeyAndValue('category', form.value.category);\r\n\t\t\tthis.setFilterByKeyAndValue('search', form.value.search);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(data => {\r\n\t\t\tthis.items = data[0];\r\n\t\t\tthis.filters = data[1];\r\n\t\t\tcontrols.country.options = FormService.toSelectOptions(this.filters.country.options);\r\n\t\t\tcontrols.category.options = FormService.toSelectOptions(this.filters.category.options);\r\n\t\t\tthis.onLoad();\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tStoreLocatorService.all$(),\r\n\t\t\tStoreLocatorService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\tonLoad() {\r\n\t\tconst items = this.items;\r\n\t\tconst filters = this.filters;\r\n\t\tObject.keys(filters).forEach(key => {\r\n\t\t\tfilters[key].mode = filters[key].mode || FilterMode.OR;\r\n\t\t});\r\n\t\tconst initialParams = {};\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\tswitch (key) {\r\n\t\t\t\t\t\t\tcase 'country':\r\n\t\t\t\t\t\t\t\treturn item.country && item.country.id === value;\r\n\t\t\t\t\t\t\tcase 'category':\r\n\t\t\t\t\t\t\t\treturn item.category && item.category.id === value;\r\n\t\t\t\t\t\t\tcase 'search':\r\n\t\t\t\t\t\t\t\treturn item.name.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\r\n\t\t\t\t\t\t\t\t\t// item.address.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\r\n\t\t\t\t\t\t\t\t\titem.city.toLowerCase().indexOf(value.toLowerCase()) !== -1 ||\r\n\t\t\t\t\t\t\t\t\titem.country.name.toLowerCase().indexOf(value.toLowerCase()) !== -1\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t\tconst country = this.filters.country.values.length ? this.filters.country.values[0] : null;\r\n\t\tconst category = this.filters.category.values.length ? this.filters.category.values[0] : null;\r\n\t\tconst search = this.filters.search.values.length ? this.filters.search.values[0] : null;\r\n\t\tthis.form.patch({ country, category, search });\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(filteredItems => {\r\n\t\t\tthis.filteredItems = filteredItems;\r\n\t\t\tthis.visibleItems = filteredItems.slice(0, Math.min(12, filteredItems.length));\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t\t// console.log('StoreLocatorComponent.filteredItems', filteredItems.length);\r\n\t\t});\r\n\t}\r\n\r\n\tshowMore(event) {\r\n\t\tthis.visibleItems = this.filteredItems.slice();\r\n\t\tthis.pushChanges();\r\n\t\tLocomotiveScrollService.update();\r\n\t}\r\n\r\n\tsetFilterByKeyAndValue(key, value) {\r\n\t\tconst filter = this.filters[key];\r\n\t\tif (filter) {\r\n\t\t\tif (filter.mode === FilterMode.QUERY) {\r\n\t\t\t\tfilter.set(value);\r\n\t\t\t} else {\r\n\t\t\t\tconst option = filter.options.find(x => x.value === value);\r\n\t\t\t\t// console.log(filter.options, option);\r\n\t\t\t\tif (option) {\r\n\t\t\t\t\tfilter.set(option);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfilter.clear();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonSearch(model) {\r\n\t\t// console.log('StoreLocatorComponent.onSearch', this.form.value);\r\n\t\tthis.setFilterByKeyAndValue('country', this.form.value.country);\r\n\t\tthis.setFilterByKeyAndValue('category', this.form.value.category);\r\n\t\tthis.setFilterByKeyAndValue('search', this.form.value.search);\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tclearFilter(event, filter) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopImmediatePropagation();\r\n\t\tfilter.clear();\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nStoreLocatorComponent.meta = {\r\n\tselector: '[store-locator]',\r\n};\r\n","import { Browser, CoreModule, Module } from 'rxcomp';\r\nimport { FormModule } from 'rxcomp-form';\r\nimport { AppComponent } from '../../app.component';\r\nimport { CommonModule } from '../../common/common.module';\r\nimport { SharedModule } from '../../shared/shared.module';\r\nimport { StoreLocatorComponent } from './store-locator.component';\r\n\r\nexport class AppModule extends Module { }\r\n\r\nAppModule.meta = {\r\n\timports: [\r\n\t\tCoreModule,\r\n\t\tFormModule,\r\n\t\tCommonModule,\r\n\t\tSharedModule,\r\n\t],\r\n\tdeclarations: [\r\n\t\tStoreLocatorComponent,\r\n\t],\r\n\tbootstrap: AppComponent,\r\n};\r\n\r\nBrowser.bootstrap(AppModule);\r\n"]}